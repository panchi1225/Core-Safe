(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function Vu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Wd={exports:{}},eo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function A1(){if(tx)return eo;tx=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(a,c,u){var m=null;if(u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),"key"in c){u={};for(var y in c)y!=="key"&&(u[y]=c[y])}else u=c;return c=u.ref,{$$typeof:r,type:a,key:m,ref:c!==void 0?c:null,props:u}}return eo.Fragment=t,eo.jsx=s,eo.jsxs=s,eo}var nx;function C1(){return nx||(nx=1,Wd.exports=A1()),Wd.exports}var l=C1(),ef={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function R1(){if(sx)return Ue;sx=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),w=Symbol.iterator;function V(k){return k===null||typeof k!="object"?null:(k=w&&k[w]||k["@@iterator"],typeof k=="function"?k:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,L={};function oe(k,ee,fe){this.props=k,this.context=ee,this.refs=L,this.updater=fe||P}oe.prototype.isReactComponent={},oe.prototype.setState=function(k,ee){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ee,"setState")},oe.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function ce(){}ce.prototype=oe.prototype;function Z(k,ee,fe){this.props=k,this.context=ee,this.refs=L,this.updater=fe||P}var ue=Z.prototype=new ce;ue.constructor=Z,G(ue,oe.prototype),ue.isPureReactComponent=!0;var Te=Array.isArray;function je(){}var D={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(k,ee,fe){var pe=fe.ref;return{$$typeof:r,type:k,key:ee,ref:pe!==void 0?pe:null,props:fe}}function O(k,ee){return R(k.type,ee,k.props)}function j(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function M(k){var ee={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(fe){return ee[fe]})}var S=/\/+/g;function Ee(k,ee){return typeof k=="object"&&k!==null&&k.key!=null?M(""+k.key):ee.toString(36)}function _e(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(je,je):(k.status="pending",k.then(function(ee){k.status==="pending"&&(k.status="fulfilled",k.value=ee)},function(ee){k.status==="pending"&&(k.status="rejected",k.reason=ee)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function $(k,ee,fe,pe,le){var Se=typeof k;(Se==="undefined"||Se==="boolean")&&(k=null);var Ie=!1;if(k===null)Ie=!0;else switch(Se){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(k.$$typeof){case r:case t:Ie=!0;break;case v:return Ie=k._init,$(Ie(k._payload),ee,fe,pe,le)}}if(Ie)return le=le(k),Ie=pe===""?"."+Ee(k,0):pe,Te(le)?(fe="",Ie!=null&&(fe=Ie.replace(S,"$&/")+"/"),$(le,ee,fe,"",function(en){return en})):le!=null&&(j(le)&&(le=O(le,fe+(le.key==null||k&&k.key===le.key?"":(""+le.key).replace(S,"$&/")+"/")+Ie)),ee.push(le)),1;Ie=0;var it=pe===""?".":pe+":";if(Te(k))for(var De=0;De<k.length;De++)pe=k[De],Se=it+Ee(pe,De),Ie+=$(pe,ee,fe,Se,le);else if(De=V(k),typeof De=="function")for(k=De.call(k),De=0;!(pe=k.next()).done;)pe=pe.value,Se=it+Ee(pe,De++),Ie+=$(pe,ee,fe,Se,le);else if(Se==="object"){if(typeof k.then=="function")return $(_e(k),ee,fe,pe,le);throw ee=String(k),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function Q(k,ee,fe){if(k==null)return k;var pe=[],le=0;return $(k,pe,"","",function(Se){return ee.call(fe,Se,le++)}),pe}function me(k){if(k._status===-1){var ee=k._result;ee=ee(),ee.then(function(fe){(k._status===0||k._status===-1)&&(k._status=1,k._result=fe)},function(fe){(k._status===0||k._status===-1)&&(k._status=2,k._result=fe)}),k._status===-1&&(k._status=0,k._result=ee)}if(k._status===1)return k._result.default;throw k._result}var he=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},ve={map:Q,forEach:function(k,ee,fe){Q(k,function(){ee.apply(this,arguments)},fe)},count:function(k){var ee=0;return Q(k,function(){ee++}),ee},toArray:function(k){return Q(k,function(ee){return ee})||[]},only:function(k){if(!j(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ue.Activity=E,Ue.Children=ve,Ue.Component=oe,Ue.Fragment=s,Ue.Profiler=c,Ue.PureComponent=Z,Ue.StrictMode=a,Ue.Suspense=p,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},Ue.cache=function(k){return function(){return k.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(k,ee,fe){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var pe=G({},k.props),le=k.key;if(ee!=null)for(Se in ee.key!==void 0&&(le=""+ee.key),ee)!A.call(ee,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ee.ref===void 0||(pe[Se]=ee[Se]);var Se=arguments.length-2;if(Se===1)pe.children=fe;else if(1<Se){for(var Ie=Array(Se),it=0;it<Se;it++)Ie[it]=arguments[it+2];pe.children=Ie}return R(k.type,le,pe)},Ue.createContext=function(k){return k={$$typeof:m,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Ue.createElement=function(k,ee,fe){var pe,le={},Se=null;if(ee!=null)for(pe in ee.key!==void 0&&(Se=""+ee.key),ee)A.call(ee,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(le[pe]=ee[pe]);var Ie=arguments.length-2;if(Ie===1)le.children=fe;else if(1<Ie){for(var it=Array(Ie),De=0;De<Ie;De++)it[De]=arguments[De+2];le.children=it}if(k&&k.defaultProps)for(pe in Ie=k.defaultProps,Ie)le[pe]===void 0&&(le[pe]=Ie[pe]);return R(k,Se,le)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(k){return{$$typeof:y,render:k}},Ue.isValidElement=j,Ue.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:me}},Ue.memo=function(k,ee){return{$$typeof:g,type:k,compare:ee===void 0?null:ee}},Ue.startTransition=function(k){var ee=D.T,fe={};D.T=fe;try{var pe=k(),le=D.S;le!==null&&le(fe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(je,he)}catch(Se){he(Se)}finally{ee!==null&&fe.types!==null&&(ee.types=fe.types),D.T=ee}},Ue.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ue.use=function(k){return D.H.use(k)},Ue.useActionState=function(k,ee,fe){return D.H.useActionState(k,ee,fe)},Ue.useCallback=function(k,ee){return D.H.useCallback(k,ee)},Ue.useContext=function(k){return D.H.useContext(k)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(k,ee){return D.H.useDeferredValue(k,ee)},Ue.useEffect=function(k,ee){return D.H.useEffect(k,ee)},Ue.useEffectEvent=function(k){return D.H.useEffectEvent(k)},Ue.useId=function(){return D.H.useId()},Ue.useImperativeHandle=function(k,ee,fe){return D.H.useImperativeHandle(k,ee,fe)},Ue.useInsertionEffect=function(k,ee){return D.H.useInsertionEffect(k,ee)},Ue.useLayoutEffect=function(k,ee){return D.H.useLayoutEffect(k,ee)},Ue.useMemo=function(k,ee){return D.H.useMemo(k,ee)},Ue.useOptimistic=function(k,ee){return D.H.useOptimistic(k,ee)},Ue.useReducer=function(k,ee,fe){return D.H.useReducer(k,ee,fe)},Ue.useRef=function(k){return D.H.useRef(k)},Ue.useState=function(k){return D.H.useState(k)},Ue.useSyncExternalStore=function(k,ee,fe){return D.H.useSyncExternalStore(k,ee,fe)},Ue.useTransition=function(){return D.H.useTransition()},Ue.version="19.2.4",Ue}var ax;function Qf(){return ax||(ax=1,ef.exports=R1()),ef.exports}var W=Qf();const Ct=Vu(W);var tf={exports:{}},to={},nf={exports:{}},sf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx;function D1(){return rx||(rx=1,(function(r){function t($,Q){var me=$.length;$.push(Q);e:for(;0<me;){var he=me-1>>>1,ve=$[he];if(0<c(ve,Q))$[he]=Q,$[me]=ve,me=he;else break e}}function s($){return $.length===0?null:$[0]}function a($){if($.length===0)return null;var Q=$[0],me=$.pop();if(me!==Q){$[0]=me;e:for(var he=0,ve=$.length,k=ve>>>1;he<k;){var ee=2*(he+1)-1,fe=$[ee],pe=ee+1,le=$[pe];if(0>c(fe,me))pe<ve&&0>c(le,fe)?($[he]=le,$[pe]=me,he=pe):($[he]=fe,$[ee]=me,he=ee);else if(pe<ve&&0>c(le,me))$[he]=le,$[pe]=me,he=pe;else break e}}return Q}function c($,Q){var me=$.sortIndex-Q.sortIndex;return me!==0?me:$.id-Q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var m=Date,y=m.now();r.unstable_now=function(){return m.now()-y}}var p=[],g=[],v=1,E=null,w=3,V=!1,P=!1,G=!1,L=!1,oe=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ue($){for(var Q=s(g);Q!==null;){if(Q.callback===null)a(g);else if(Q.startTime<=$)a(g),Q.sortIndex=Q.expirationTime,t(p,Q);else break;Q=s(g)}}function Te($){if(G=!1,ue($),!P)if(s(p)!==null)P=!0,je||(je=!0,M());else{var Q=s(g);Q!==null&&_e(Te,Q.startTime-$)}}var je=!1,D=-1,A=5,R=-1;function O(){return L?!0:!(r.unstable_now()-R<A)}function j(){if(L=!1,je){var $=r.unstable_now();R=$;var Q=!0;try{e:{P=!1,G&&(G=!1,ce(D),D=-1),V=!0;var me=w;try{t:{for(ue($),E=s(p);E!==null&&!(E.expirationTime>$&&O());){var he=E.callback;if(typeof he=="function"){E.callback=null,w=E.priorityLevel;var ve=he(E.expirationTime<=$);if($=r.unstable_now(),typeof ve=="function"){E.callback=ve,ue($),Q=!0;break t}E===s(p)&&a(p),ue($)}else a(p);E=s(p)}if(E!==null)Q=!0;else{var k=s(g);k!==null&&_e(Te,k.startTime-$),Q=!1}}break e}finally{E=null,w=me,V=!1}Q=void 0}}finally{Q?M():je=!1}}}var M;if(typeof Z=="function")M=function(){Z(j)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Ee=S.port2;S.port1.onmessage=j,M=function(){Ee.postMessage(null)}}else M=function(){oe(j,0)};function _e($,Q){D=oe(function(){$(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function($){switch(w){case 1:case 2:case 3:var Q=3;break;default:Q=w}var me=w;w=Q;try{return $()}finally{w=me}},r.unstable_requestPaint=function(){L=!0},r.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var me=w;w=$;try{return Q()}finally{w=me}},r.unstable_scheduleCallback=function($,Q,me){var he=r.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?he+me:he):me=he,$){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=me+ve,$={id:v++,callback:Q,priorityLevel:$,startTime:me,expirationTime:ve,sortIndex:-1},me>he?($.sortIndex=me,t(g,$),s(p)===null&&$===s(g)&&(G?(ce(D),D=-1):G=!0,_e(Te,me-he))):($.sortIndex=ve,t(p,$),P||V||(P=!0,je||(je=!0,M()))),$},r.unstable_shouldYield=O,r.unstable_wrapCallback=function($){var Q=w;return function(){var me=w;w=Q;try{return $.apply(this,arguments)}finally{w=me}}}})(sf)),sf}var ix;function M1(){return ix||(ix=1,nf.exports=D1()),nf.exports}var af={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function I1(){if(lx)return hn;lx=1;var r=Qf();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var m=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,hn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(p,g,null,v)},hn.flushSync=function(p){var g=m.T,v=a.p;try{if(m.T=null,a.p=2,p)return p()}finally{m.T=g,a.p=v,a.d.f()}},hn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},hn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},hn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=y(v,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,V=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:V}):v==="script"&&a.d.X(p,{crossOrigin:E,integrity:w,fetchPriority:V,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},hn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=y(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},hn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=y(v,g.crossOrigin);a.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},hn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=y(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},hn.requestFormReset=function(p){a.d.r(p)},hn.unstable_batchedUpdates=function(p,g){return p(g)},hn.useFormState=function(p,g,v){return m.H.useFormState(p,g,v)},hn.useFormStatus=function(){return m.H.useHostTransitionStatus()},hn.version="19.2.4",hn}var ox;function O1(){if(ox)return af.exports;ox=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),af.exports=I1(),af.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function V1(){if(cx)return to;cx=1;var r=M1(),t=Qf(),s=O1();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function m(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(a(188))}function g(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(a(188));return n!==e?null:e}for(var i=e,o=n;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){i=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return p(d),e;if(f===o)return p(d),n;f=f.sibling}throw Error(a(188))}if(i.return!==o.return)i=d,o=f;else{for(var b=!1,N=d.child;N;){if(N===i){b=!0,i=d,o=f;break}if(N===o){b=!0,o=d,i=f;break}N=N.sibling}if(!b){for(N=f.child;N;){if(N===i){b=!0,i=f,o=d;break}if(N===o){b=!0,o=f,i=d;break}N=N.sibling}if(!b)throw Error(a(189))}}if(i.alternate!==o)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?e:n}function v(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=v(e),n!==null)return n;e=e.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function M(e){return e===null||typeof e!="object"?null:(e=j&&e[j]||e["@@iterator"],typeof e=="function"?e:null)}var S=Symbol.for("react.client.reference");function Ee(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===S?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G:return"Fragment";case oe:return"Profiler";case L:return"StrictMode";case Te:return"Suspense";case je:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case P:return"Portal";case Z:return e.displayName||"Context";case ce:return(e._context.displayName||"Context")+".Consumer";case ue:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return n=e.displayName||null,n!==null?n:Ee(e.type)||"Memo";case A:n=e._payload,e=e._init;try{return Ee(e(n))}catch{}}return null}var _e=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},he=[],ve=-1;function k(e){return{current:e}}function ee(e){0>ve||(e.current=he[ve],he[ve]=null,ve--)}function fe(e,n){ve++,he[ve]=e.current,e.current=n}var pe=k(null),le=k(null),Se=k(null),Ie=k(null);function it(e,n){switch(fe(Se,n),fe(le,e),fe(pe,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?wy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=wy(n),e=Ty(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ee(pe),fe(pe,e)}function De(){ee(pe),ee(le),ee(Se)}function en(e){e.memoizedState!==null&&fe(Ie,e);var n=pe.current,i=Ty(n,e.type);n!==i&&(fe(le,e),fe(pe,i))}function we(e){le.current===e&&(ee(pe),ee(le)),Ie.current===e&&(ee(Ie),Xl._currentValue=me)}var J,Ae;function ke(e){if(J===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);J=n&&n[1]||"",Ae=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+e+Ae}var z=!1;function ae(e,n){if(!e||z)return"";z=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var Y=X}Reflect.construct(e,[],re)}else{try{re.call()}catch(X){Y=X}e.call(re.prototype)}}else{try{throw Error()}catch(X){Y=X}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),b=f[0],N=f[1];if(b&&N){var I=b.split(`
`),F=N.split(`
`);for(d=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(o===I.length||d===F.length)for(o=I.length-1,d=F.length-1;1<=o&&0<=d&&I[o]!==F[d];)d--;for(;1<=o&&0<=d;o--,d--)if(I[o]!==F[d]){if(o!==1||d!==1)do if(o--,d--,0>d||I[o]!==F[d]){var te=`
`+I[o].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=o&&0<=d);break}}}finally{z=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?ke(i):""}function qe(e,n){switch(e.tag){case 26:case 27:case 5:return ke(e.type);case 16:return ke("Lazy");case 13:return e.child!==n&&n!==null?ke("Suspense Fallback"):ke("Suspense");case 19:return ke("SuspenseList");case 0:case 15:return ae(e.type,!1);case 11:return ae(e.type.render,!1);case 1:return ae(e.type,!0);case 31:return ke("Activity");default:return""}}function ot(e){try{var n="",i=null;do n+=qe(e,i),i=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Fe=Object.prototype.hasOwnProperty,C=r.unstable_scheduleCallback,de=r.unstable_cancelCallback,Me=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Yt=r.unstable_now,sr=r.unstable_getCurrentPriorityLevel,Wi=r.unstable_ImmediatePriority,el=r.unstable_UserBlockingPriority,ua=r.unstable_NormalPriority,nh=r.unstable_LowPriority,Do=r.unstable_IdlePriority,Mo=r.log,Io=r.unstable_setDisableYieldValue,Wn=null,tn=null;function Pn(e){if(typeof Mo=="function"&&Io(e),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(Wn,e)}catch{}}var Rt=Math.clz32?Math.clz32:Vo,Oo=Math.log,Fr=Math.LN2;function Vo(e){return e>>>=0,e===0?32:31-(Oo(e)/Fr|0)|0}var fs=256,ar=262144,Vt=4194304;function ms(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function gs(e,n,i){var o=e.pendingLanes;if(o===0)return 0;var d=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var N=o&134217727;return N!==0?(o=N&~f,o!==0?d=ms(o):(b&=N,b!==0?d=ms(b):i||(i=N&~e,i!==0&&(d=ms(i))))):(N=o&~f,N!==0?d=ms(N):b!==0?d=ms(b):i||(i=o&~e,i!==0&&(d=ms(i)))),d===0?0:n!==0&&n!==d&&(n&f)===0&&(f=d&-d,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:d}function es(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function sh(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(){var e=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),e}function ps(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function rr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ah(e,n,i,o,d,f){var b=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var N=e.entanglements,I=e.expirationTimes,F=e.hiddenUpdates;for(i=b&~i;0<i;){var te=31-Rt(i),re=1<<te;N[te]=0,I[te]=-1;var Y=F[te];if(Y!==null)for(F[te]=null,te=0;te<Y.length;te++){var X=Y[te];X!==null&&(X.lane&=-536870913)}i&=~re}o!==0&&ir(e,o,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~n))}function ir(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Rt(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function tl(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var o=31-Rt(i),d=1<<o;d&n|e[o]&n&&(e[o]|=n),i&=~d}}function nl(e,n){var i=n&-n;return i=(i&42)!==0?1:lr(i),(i&(e.suspendedLanes|n))!==0?0:i}function lr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function zo(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:Qy(e.type))}function ts(e,n){var i=Q.p;try{return Q.p=e,n()}finally{Q.p=i}}var ns=Math.random().toString(36).slice(2),kt="__reactFiber$"+ns,Xt="__reactProps$"+ns,ys="__reactContainer$"+ns,Gr="__reactEvents$"+ns,rh="__reactListeners$"+ns,Uo="__reactHandles$"+ns,Po="__reactResources$"+ns,xs="__reactMarker$"+ns;function $r(e){delete e[kt],delete e[Xt],delete e[Gr],delete e[rh],delete e[Uo]}function vs(e){var n=e[kt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[ys]||i[kt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=My(e);e!==null;){if(i=e[kt])return i;e=My(e)}return n}e=i,i=e.parentNode}return null}function Ln(e){if(e=e[kt]||e[ys]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Sn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function bs(e){var n=e[Po];return n||(n=e[Po]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function zt(e){e[xs]=!0}var sl=new Set,al={};function _s(e,n){Es(e,n),Es(e+"Capture",n)}function Es(e,n){for(al[e]=n,e=0;e<n.length;e++)sl.add(n[e])}var rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),il={},ll={};function Lo(e){return Fe.call(ll,e)?!0:Fe.call(il,e)?!1:rl.test(e)?ll[e]=!0:(il[e]=!0,!1)}function Yr(e,n,i){if(Lo(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function An(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function Ut(e,n,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+o)}}function Zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ha(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ol(e,n,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(b){i=""+b,f.call(this,b)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(b){i=""+b},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ct(e){if(!e._valueTracker){var n=ha(e)?"checked":"value";e._valueTracker=ol(e,n,""+e[n])}}function or(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return e&&(o=ha(e)?e.checked?"true":"false":e.value),e=o,e!==i?(n.setValue(e),!0):!1}function Ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cr=/[\n"\\]/g;function yn(e){return e.replace(cr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Qr(e,n,i,o,d,f,b,N){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),n!=null?b==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Zt(n)):e.value!==""+Zt(n)&&(e.value=""+Zt(n)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),n!=null?cl(e,b,Zt(n)):i!=null?cl(e,b,Zt(i)):o!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+Zt(N):e.removeAttribute("name")}function Bo(e,n,i,o,d,f,b,N){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){ct(e);return}i=i!=null?""+Zt(i):"",n=n!=null?""+Zt(n):i,N||n===e.value||(e.value=n),e.defaultValue=n}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=N?e.checked:!!o,e.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),ct(e)}function cl(e,n,i){n==="number"&&Ns(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function da(e,n,i,o){if(e=e.options,n){n={};for(var d=0;d<i.length;d++)n["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=n.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Zt(i),n=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function qo(e,n,i){if(n!=null&&(n=""+Zt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Zt(i):""}function fa(e,n,i,o){if(n==null){if(o!=null){if(i!=null)throw Error(a(92));if(_e(o)){if(1<o.length)throw Error(a(93));o=o[0]}i=o}i==null&&(i=""),n=i}i=Zt(n),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),ct(e)}function xn(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Ho=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(e,n,i){var o=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,i):typeof i!="number"||i===0||Ho.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function hl(e,n,i){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in n)o=n[d],n.hasOwnProperty(d)&&i[d]!==o&&ul(e,d,o)}else for(var f in n)n.hasOwnProperty(f)&&ul(e,f,n[f])}function Kr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ma=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xr(e){return ma.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ss(){}var dl=null;function Bn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ga=null,ws=null;function ur(e){var n=Ln(e);if(n&&(e=n.stateNode)){var i=e[Xt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Qr(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+yn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==e&&o.form===e.form){var d=o[Xt]||null;if(!d)throw Error(a(90));Qr(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<i.length;n++)o=i[n],o.form===e.form&&or(o)}break e;case"textarea":qo(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&da(e,!!i.multiple,n,!1)}}}var Zr=!1;function pa(e,n,i){if(Zr)return e(n,i);Zr=!0;try{var o=e(n);return o}finally{if(Zr=!1,(ga!==null||ws!==null)&&(zc(),ga&&(n=ga,e=ws,ws=ga=null,ur(n),e)))for(n=0;n<e.length;n++)ur(e[n])}}function as(e,n){var i=e.stateNode;if(i===null)return null;var o=i[Xt]||null;if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(a(231,n,typeof i));return i}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hr=!1;if(qn)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){hr=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{hr=!1}var Ts=null,fl=null,dr=null;function ml(){if(dr)return dr;var e,n=fl,i=n.length,o,d="value"in Ts?Ts.value:Ts.textContent,f=d.length;for(e=0;e<i&&n[e]===d[e];e++);var b=i-e;for(o=1;o<=b&&n[i-o]===d[f-o];o++);return dr=d.slice(e,1<o?1-o:void 0)}function fr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function qs(){return!0}function rs(){return!1}function nn(e){function n(i,o,d,f,b){this._reactName=i,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(i=e[N],this[N]=i?i(f):f[N]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?qs:rs,this.isPropagationStopped=rs,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),n}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=nn(Hs),ya=E({},Hs,{view:0,detail:0}),gl=nn(ya),xa,Jr,Ss,Wr=E({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:va,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ss&&(Ss&&e.type==="mousemove"?(xa=e.screenX-Ss.screenX,Jr=e.screenY-Ss.screenY):Jr=xa=0,Ss=e),xa)},movementY:function(e){return"movementY"in e?e.movementY:Jr}}),pl=nn(Wr),mr=E({},Wr,{dataTransfer:0}),Go=nn(mr),$o=E({},ya,{relatedTarget:0}),gr=nn($o),yl=E({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),Yo=nn(yl),ei=E({},Hs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qo=nn(ei),Ko=E({},Hs,{data:0}),As=nn(Ko),Xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Jo[e])?!!n[e]:!1}function va(){return Wo}var gn=E({},ya,{key:function(e){if(e.key){var n=Xo[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=fr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:va,charCode:function(e){return e.type==="keypress"?fr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ec=nn(gn),tc=E({},Wr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fs=nn(tc),h=E({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:va}),x=nn(h),_=E({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=nn(_),q=E({},Wr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K=nn(q),ge=E({},Hs,{newState:0,oldState:0}),Le=nn(ge),Dt=[9,13,27,32],at=qn&&"CompositionEvent"in window,Et=null;qn&&"documentMode"in document&&(Et=document.documentMode);var Hn=qn&&"TextEvent"in window&&!Et,Cs=qn&&(!at||Et&&8<Et&&11>=Et),is=" ",ls=!1;function pr(e,n){switch(e){case"keyup":return Dt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ti(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ni=!1;function Jb(e,n){switch(e){case"compositionend":return ti(n);case"keypress":return n.which!==32?null:(ls=!0,is);case"textInput":return e=n.data,e===is&&ls?null:e;default:return null}}function Wb(e,n){if(ni)return e==="compositionend"||!at&&pr(e,n)?(e=ml(),dr=fl=Ts=null,ni=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Cs&&n.locale!=="ko"?null:n.data;default:return null}}var e_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!e_[e.type]:n==="textarea"}function km(e,n,i,o){ga?ws?ws.push(o):ws=[o]:ga=o,n=Fc(n,"onChange"),0<n.length&&(i=new js("onChange","change",null,i,o),e.push({event:i,listeners:n}))}var xl=null,vl=null;function t_(e){xy(e,0)}function nc(e){var n=Sn(e);if(or(n))return e}function zm(e,n){if(e==="change")return n}var Um=!1;if(qn){var ih;if(qn){var lh="oninput"in document;if(!lh){var Pm=document.createElement("div");Pm.setAttribute("oninput","return;"),lh=typeof Pm.oninput=="function"}ih=lh}else ih=!1;Um=ih&&(!document.documentMode||9<document.documentMode)}function Lm(){xl&&(xl.detachEvent("onpropertychange",Bm),vl=xl=null)}function Bm(e){if(e.propertyName==="value"&&nc(vl)){var n=[];km(n,vl,e,Bn(e)),pa(t_,n)}}function n_(e,n,i){e==="focusin"?(Lm(),xl=n,vl=i,xl.attachEvent("onpropertychange",Bm)):e==="focusout"&&Lm()}function s_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nc(vl)}function a_(e,n){if(e==="click")return nc(n)}function r_(e,n){if(e==="input"||e==="change")return nc(n)}function i_(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Cn=typeof Object.is=="function"?Object.is:i_;function bl(e,n){if(Cn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var d=i[o];if(!Fe.call(n,d)||!Cn(e[d],n[d]))return!1}return!0}function qm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hm(e,n){var i=qm(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=n&&o>=n)return{node:i,offset:n-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=qm(i)}}function Fm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Fm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Gm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ns(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=Ns(e.document)}return n}function oh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var l_=qn&&"documentMode"in document&&11>=document.documentMode,si=null,ch=null,_l=null,uh=!1;function $m(e,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;uh||si==null||si!==Ns(o)||(o=si,"selectionStart"in o&&oh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),_l&&bl(_l,o)||(_l=o,o=Fc(ch,"onSelect"),0<o.length&&(n=new js("onSelect","select",null,n,i),e.push({event:n,listeners:o}),n.target=si)))}function yr(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var ai={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionrun:yr("Transition","TransitionRun"),transitionstart:yr("Transition","TransitionStart"),transitioncancel:yr("Transition","TransitionCancel"),transitionend:yr("Transition","TransitionEnd")},hh={},Ym={};qn&&(Ym=document.createElement("div").style,"AnimationEvent"in window||(delete ai.animationend.animation,delete ai.animationiteration.animation,delete ai.animationstart.animation),"TransitionEvent"in window||delete ai.transitionend.transition);function xr(e){if(hh[e])return hh[e];if(!ai[e])return e;var n=ai[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Ym)return hh[e]=n[i];return e}var Qm=xr("animationend"),Km=xr("animationiteration"),Xm=xr("animationstart"),o_=xr("transitionrun"),c_=xr("transitionstart"),u_=xr("transitioncancel"),Zm=xr("transitionend"),Jm=new Map,dh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dh.push("scrollEnd");function os(e,n){Jm.set(e,n),_s(n,[e])}var sc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Fn=[],ri=0,fh=0;function ac(){for(var e=ri,n=fh=ri=0;n<e;){var i=Fn[n];Fn[n++]=null;var o=Fn[n];Fn[n++]=null;var d=Fn[n];Fn[n++]=null;var f=Fn[n];if(Fn[n++]=null,o!==null&&d!==null){var b=o.pending;b===null?d.next=d:(d.next=b.next,b.next=d),o.pending=d}f!==0&&Wm(i,d,f)}}function rc(e,n,i,o){Fn[ri++]=e,Fn[ri++]=n,Fn[ri++]=i,Fn[ri++]=o,fh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function mh(e,n,i,o){return rc(e,n,i,o),ic(e)}function vr(e,n){return rc(e,null,null,n),ic(e)}function Wm(e,n,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var d=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&n!==null&&(d=31-Rt(i),e=f.hiddenUpdates,o=e[d],o===null?e[d]=[n]:o.push(n),n.lane=i|536870912),f):null}function ic(e){if(50<Hl)throw Hl=0,Nd=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ii={};function h_(e,n,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(e,n,i,o){return new h_(e,n,i,o)}function gh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gs(e,n){var i=e.alternate;return i===null?(i=Rn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function eg(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function lc(e,n,i,o,d,f){var b=0;if(o=e,typeof e=="function")gh(e)&&(b=1);else if(typeof e=="string")b=p1(e,i,pe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case R:return e=Rn(31,i,n,d),e.elementType=R,e.lanes=f,e;case G:return br(i.children,d,f,n);case L:b=8,d|=24;break;case oe:return e=Rn(12,i,n,d|2),e.elementType=oe,e.lanes=f,e;case Te:return e=Rn(13,i,n,d),e.elementType=Te,e.lanes=f,e;case je:return e=Rn(19,i,n,d),e.elementType=je,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z:b=10;break e;case ce:b=9;break e;case ue:b=11;break e;case D:b=14;break e;case A:b=16,o=null;break e}b=29,i=Error(a(130,e===null?"null":typeof e,"")),o=null}return n=Rn(b,i,n,d),n.elementType=e,n.type=o,n.lanes=f,n}function br(e,n,i,o){return e=Rn(7,e,o,n),e.lanes=i,e}function ph(e,n,i){return e=Rn(6,e,null,n),e.lanes=i,e}function tg(e){var n=Rn(18,null,null,0);return n.stateNode=e,n}function yh(e,n,i){return n=Rn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ng=new WeakMap;function Gn(e,n){if(typeof e=="object"&&e!==null){var i=ng.get(e);return i!==void 0?i:(n={value:e,source:n,stack:ot(n)},ng.set(e,n),n)}return{value:e,source:n,stack:ot(n)}}var li=[],oi=0,oc=null,El=0,$n=[],Yn=0,ba=null,Rs=1,Ds="";function $s(e,n){li[oi++]=El,li[oi++]=oc,oc=e,El=n}function sg(e,n,i){$n[Yn++]=Rs,$n[Yn++]=Ds,$n[Yn++]=ba,ba=e;var o=Rs;e=Ds;var d=32-Rt(o)-1;o&=~(1<<d),i+=1;var f=32-Rt(n)+d;if(30<f){var b=d-d%5;f=(o&(1<<b)-1).toString(32),o>>=b,d-=b,Rs=1<<32-Rt(n)+d|i<<d|o,Ds=f+e}else Rs=1<<f|i<<d|o,Ds=e}function xh(e){e.return!==null&&($s(e,1),sg(e,1,0))}function vh(e){for(;e===oc;)oc=li[--oi],li[oi]=null,El=li[--oi],li[oi]=null;for(;e===ba;)ba=$n[--Yn],$n[Yn]=null,Ds=$n[--Yn],$n[Yn]=null,Rs=$n[--Yn],$n[Yn]=null}function ag(e,n){$n[Yn++]=Rs,$n[Yn++]=Ds,$n[Yn++]=ba,Rs=n.id,Ds=n.overflow,ba=e}var sn=null,bt=null,We=!1,_a=null,Qn=!1,bh=Error(a(519));function Ea(e){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(Gn(n,e)),bh}function rg(e){var n=e.stateNode,i=e.type,o=e.memoizedProps;switch(n[kt]=e,n[Xt]=o,i){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(i=0;i<Gl.length;i++)$e(Gl[i],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":$e("invalid",n),Bo(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":$e("invalid",n);break;case"textarea":$e("invalid",n),fa(n,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||o.suppressHydrationWarning===!0||Ey(n.textContent,i)?(o.popover!=null&&($e("beforetoggle",n),$e("toggle",n)),o.onScroll!=null&&$e("scroll",n),o.onScrollEnd!=null&&$e("scrollend",n),o.onClick!=null&&(n.onclick=ss),n=!0):n=!1,n||Ea(e,!0)}function ig(e){for(sn=e.return;sn;)switch(sn.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:sn=sn.return}}function ci(e){if(e!==sn)return!1;if(!We)return ig(e),We=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ud(e.type,e.memoizedProps)),i=!i),i&&bt&&Ea(e),ig(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));bt=Dy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));bt=Dy(e)}else n===27?(n=bt,ka(e.type)?(e=Hd,Hd=null,bt=e):bt=n):bt=sn?Xn(e.stateNode.nextSibling):null;return!0}function _r(){bt=sn=null,We=!1}function _h(){var e=_a;return e!==null&&(En===null?En=e:En.push.apply(En,e),_a=null),e}function Nl(e){_a===null?_a=[e]:_a.push(e)}var Eh=k(null),Er=null,Ys=null;function Na(e,n,i){fe(Eh,n._currentValue),n._currentValue=i}function Qs(e){e._currentValue=Eh.current,ee(Eh)}function Nh(e,n,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===i)break;e=e.return}}function wh(e,n,i,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var b=d.child;f=f.firstContext;e:for(;f!==null;){var N=f;f=d;for(var I=0;I<n.length;I++)if(N.context===n[I]){f.lanes|=i,N=f.alternate,N!==null&&(N.lanes|=i),Nh(f.return,i,e),o||(b=null);break e}f=N.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(a(341));b.lanes|=i,f=b.alternate,f!==null&&(f.lanes|=i),Nh(b,i,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function ui(e,n,i,o){e=null;for(var d=n,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var N=d.type;Cn(d.pendingProps.value,b.value)||(e!==null?e.push(N):e=[N])}}else if(d===Ie.current){if(b=d.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Xl):e=[Xl])}d=d.return}e!==null&&wh(n,e,i,o),n.flags|=262144}function cc(e){for(e=e.firstContext;e!==null;){if(!Cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Nr(e){Er=e,Ys=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function an(e){return lg(Er,e)}function uc(e,n){return Er===null&&Nr(e),lg(e,n)}function lg(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Ys===null){if(e===null)throw Error(a(308));Ys=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ys=Ys.next=n;return i}var d_=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},f_=r.unstable_scheduleCallback,m_=r.unstable_NormalPriority,Pt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Th(){return{controller:new d_,data:new Map,refCount:0}}function wl(e){e.refCount--,e.refCount===0&&f_(m_,function(){e.controller.abort()})}var Tl=null,jh=0,hi=0,di=null;function g_(e,n){if(Tl===null){var i=Tl=[];jh=0,hi=Cd(),di={status:"pending",value:void 0,then:function(o){i.push(o)}}}return jh++,n.then(og,og),n}function og(){if(--jh===0&&Tl!==null){di!==null&&(di.status="fulfilled");var e=Tl;Tl=null,hi=0,di=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function p_(e,n){var i=[],o={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var d=0;d<i.length;d++)(0,i[d])(n)},function(d){for(o.status="rejected",o.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),o}var cg=$.S;$.S=function(e,n){$p=Yt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&g_(e,n),cg!==null&&cg(e,n)};var wr=k(null);function Sh(){var e=wr.current;return e!==null?e:pt.pooledCache}function hc(e,n){n===null?fe(wr,wr.current):fe(wr,n.pool)}function ug(){var e=Sh();return e===null?null:{parent:Pt._currentValue,pool:e}}var fi=Error(a(460)),Ah=Error(a(474)),dc=Error(a(542)),fc={then:function(){}};function hg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dg(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(ss,ss),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,mg(e),e;default:if(typeof n.status=="string")n.then(ss,ss);else{if(e=pt,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=o}},function(o){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,mg(e),e}throw jr=n,fi}}function Tr(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(jr=i,fi):i}}var jr=null;function fg(){if(jr===null)throw Error(a(459));var e=jr;return jr=null,e}function mg(e){if(e===fi||e===dc)throw Error(a(483))}var mi=null,jl=0;function mc(e){var n=jl;return jl+=1,mi===null&&(mi=[]),dg(mi,e,n)}function Sl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function gc(e,n){throw n.$$typeof===w?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function gg(e){function n(B,U){if(e){var H=B.deletions;H===null?(B.deletions=[U],B.flags|=16):H.push(U)}}function i(B,U){if(!e)return null;for(;U!==null;)n(B,U),U=U.sibling;return null}function o(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function d(B,U){return B=Gs(B,U),B.index=0,B.sibling=null,B}function f(B,U,H){return B.index=H,e?(H=B.alternate,H!==null?(H=H.index,H<U?(B.flags|=67108866,U):H):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function b(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function N(B,U,H,ne){return U===null||U.tag!==6?(U=ph(H,B.mode,ne),U.return=B,U):(U=d(U,H),U.return=B,U)}function I(B,U,H,ne){var Ce=H.type;return Ce===G?te(B,U,H.props.children,ne,H.key):U!==null&&(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===A&&Tr(Ce)===U.type)?(U=d(U,H.props),Sl(U,H),U.return=B,U):(U=lc(H.type,H.key,H.props,null,B.mode,ne),Sl(U,H),U.return=B,U)}function F(B,U,H,ne){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=yh(H,B.mode,ne),U.return=B,U):(U=d(U,H.children||[]),U.return=B,U)}function te(B,U,H,ne,Ce){return U===null||U.tag!==7?(U=br(H,B.mode,ne,Ce),U.return=B,U):(U=d(U,H),U.return=B,U)}function re(B,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=ph(""+U,B.mode,H),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case V:return H=lc(U.type,U.key,U.props,null,B.mode,H),Sl(H,U),H.return=B,H;case P:return U=yh(U,B.mode,H),U.return=B,U;case A:return U=Tr(U),re(B,U,H)}if(_e(U)||M(U))return U=br(U,B.mode,H,null),U.return=B,U;if(typeof U.then=="function")return re(B,mc(U),H);if(U.$$typeof===Z)return re(B,uc(B,U),H);gc(B,U)}return null}function Y(B,U,H,ne){var Ce=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ce!==null?null:N(B,U,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case V:return H.key===Ce?I(B,U,H,ne):null;case P:return H.key===Ce?F(B,U,H,ne):null;case A:return H=Tr(H),Y(B,U,H,ne)}if(_e(H)||M(H))return Ce!==null?null:te(B,U,H,ne,null);if(typeof H.then=="function")return Y(B,U,mc(H),ne);if(H.$$typeof===Z)return Y(B,U,uc(B,H),ne);gc(B,H)}return null}function X(B,U,H,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(H)||null,N(U,B,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case V:return B=B.get(ne.key===null?H:ne.key)||null,I(U,B,ne,Ce);case P:return B=B.get(ne.key===null?H:ne.key)||null,F(U,B,ne,Ce);case A:return ne=Tr(ne),X(B,U,H,ne,Ce)}if(_e(ne)||M(ne))return B=B.get(H)||null,te(U,B,ne,Ce,null);if(typeof ne.then=="function")return X(B,U,H,mc(ne),Ce);if(ne.$$typeof===Z)return X(B,U,H,uc(U,ne),Ce);gc(U,ne)}return null}function be(B,U,H,ne){for(var Ce=null,nt=null,Ne=U,He=U=0,Xe=null;Ne!==null&&He<H.length;He++){Ne.index>He?(Xe=Ne,Ne=null):Xe=Ne.sibling;var st=Y(B,Ne,H[He],ne);if(st===null){Ne===null&&(Ne=Xe);break}e&&Ne&&st.alternate===null&&n(B,Ne),U=f(st,U,He),nt===null?Ce=st:nt.sibling=st,nt=st,Ne=Xe}if(He===H.length)return i(B,Ne),We&&$s(B,He),Ce;if(Ne===null){for(;He<H.length;He++)Ne=re(B,H[He],ne),Ne!==null&&(U=f(Ne,U,He),nt===null?Ce=Ne:nt.sibling=Ne,nt=Ne);return We&&$s(B,He),Ce}for(Ne=o(Ne);He<H.length;He++)Xe=X(Ne,B,He,H[He],ne),Xe!==null&&(e&&Xe.alternate!==null&&Ne.delete(Xe.key===null?He:Xe.key),U=f(Xe,U,He),nt===null?Ce=Xe:nt.sibling=Xe,nt=Xe);return e&&Ne.forEach(function(Ba){return n(B,Ba)}),We&&$s(B,He),Ce}function Oe(B,U,H,ne){if(H==null)throw Error(a(151));for(var Ce=null,nt=null,Ne=U,He=U=0,Xe=null,st=H.next();Ne!==null&&!st.done;He++,st=H.next()){Ne.index>He?(Xe=Ne,Ne=null):Xe=Ne.sibling;var Ba=Y(B,Ne,st.value,ne);if(Ba===null){Ne===null&&(Ne=Xe);break}e&&Ne&&Ba.alternate===null&&n(B,Ne),U=f(Ba,U,He),nt===null?Ce=Ba:nt.sibling=Ba,nt=Ba,Ne=Xe}if(st.done)return i(B,Ne),We&&$s(B,He),Ce;if(Ne===null){for(;!st.done;He++,st=H.next())st=re(B,st.value,ne),st!==null&&(U=f(st,U,He),nt===null?Ce=st:nt.sibling=st,nt=st);return We&&$s(B,He),Ce}for(Ne=o(Ne);!st.done;He++,st=H.next())st=X(Ne,B,He,st.value,ne),st!==null&&(e&&st.alternate!==null&&Ne.delete(st.key===null?He:st.key),U=f(st,U,He),nt===null?Ce=st:nt.sibling=st,nt=st);return e&&Ne.forEach(function(S1){return n(B,S1)}),We&&$s(B,He),Ce}function gt(B,U,H,ne){if(typeof H=="object"&&H!==null&&H.type===G&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case V:e:{for(var Ce=H.key;U!==null;){if(U.key===Ce){if(Ce=H.type,Ce===G){if(U.tag===7){i(B,U.sibling),ne=d(U,H.props.children),ne.return=B,B=ne;break e}}else if(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===A&&Tr(Ce)===U.type){i(B,U.sibling),ne=d(U,H.props),Sl(ne,H),ne.return=B,B=ne;break e}i(B,U);break}else n(B,U);U=U.sibling}H.type===G?(ne=br(H.props.children,B.mode,ne,H.key),ne.return=B,B=ne):(ne=lc(H.type,H.key,H.props,null,B.mode,ne),Sl(ne,H),ne.return=B,B=ne)}return b(B);case P:e:{for(Ce=H.key;U!==null;){if(U.key===Ce)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){i(B,U.sibling),ne=d(U,H.children||[]),ne.return=B,B=ne;break e}else{i(B,U);break}else n(B,U);U=U.sibling}ne=yh(H,B.mode,ne),ne.return=B,B=ne}return b(B);case A:return H=Tr(H),gt(B,U,H,ne)}if(_e(H))return be(B,U,H,ne);if(M(H)){if(Ce=M(H),typeof Ce!="function")throw Error(a(150));return H=Ce.call(H),Oe(B,U,H,ne)}if(typeof H.then=="function")return gt(B,U,mc(H),ne);if(H.$$typeof===Z)return gt(B,U,uc(B,H),ne);gc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(i(B,U.sibling),ne=d(U,H),ne.return=B,B=ne):(i(B,U),ne=ph(H,B.mode,ne),ne.return=B,B=ne),b(B)):i(B,U)}return function(B,U,H,ne){try{jl=0;var Ce=gt(B,U,H,ne);return mi=null,Ce}catch(Ne){if(Ne===fi||Ne===dc)throw Ne;var nt=Rn(29,Ne,null,B.mode);return nt.lanes=ne,nt.return=B,nt}finally{}}}var Sr=gg(!0),pg=gg(!1),wa=!1;function Ch(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ta(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ja(e,n,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(rt&2)!==0){var d=o.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),o.pending=n,n=ic(e),Wm(e,null,i),n}return rc(e,o,n,i),ic(e)}function Al(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,tl(e,i)}}function Dh(e,n){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?d=f=b:f=f.next=b,i=i.next}while(i!==null);f===null?d=f=n:f=f.next=n}else d=f=n;i={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Mh=!1;function Cl(){if(Mh){var e=di;if(e!==null)throw e}}function Rl(e,n,i,o){Mh=!1;var d=e.updateQueue;wa=!1;var f=d.firstBaseUpdate,b=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var I=N,F=I.next;I.next=null,b===null?f=F:b.next=F,b=I;var te=e.alternate;te!==null&&(te=te.updateQueue,N=te.lastBaseUpdate,N!==b&&(N===null?te.firstBaseUpdate=F:N.next=F,te.lastBaseUpdate=I))}if(f!==null){var re=d.baseState;b=0,te=F=I=null,N=f;do{var Y=N.lane&-536870913,X=Y!==N.lane;if(X?(Ke&Y)===Y:(o&Y)===Y){Y!==0&&Y===hi&&(Mh=!0),te!==null&&(te=te.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var be=e,Oe=N;Y=n;var gt=i;switch(Oe.tag){case 1:if(be=Oe.payload,typeof be=="function"){re=be.call(gt,re,Y);break e}re=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Oe.payload,Y=typeof be=="function"?be.call(gt,re,Y):be,Y==null)break e;re=E({},re,Y);break e;case 2:wa=!0}}Y=N.callback,Y!==null&&(e.flags|=64,X&&(e.flags|=8192),X=d.callbacks,X===null?d.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:N.tag,payload:N.payload,callback:N.callback,next:null},te===null?(F=te=X,I=re):te=te.next=X,b|=Y;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;X=N,N=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);te===null&&(I=re),d.baseState=I,d.firstBaseUpdate=F,d.lastBaseUpdate=te,f===null&&(d.shared.lanes=0),Da|=b,e.lanes=b,e.memoizedState=re}}function yg(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function xg(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)yg(i[e],n)}var gi=k(null),pc=k(0);function vg(e,n){e=sa,fe(pc,e),fe(gi,n),sa=e|n.baseLanes}function Ih(){fe(pc,sa),fe(gi,gi.current)}function Oh(){sa=pc.current,ee(gi),ee(pc)}var Dn=k(null),Kn=null;function Sa(e){var n=e.alternate;fe(Mt,Mt.current&1),fe(Dn,e),Kn===null&&(n===null||gi.current!==null||n.memoizedState!==null)&&(Kn=e)}function Vh(e){fe(Mt,Mt.current),fe(Dn,e),Kn===null&&(Kn=e)}function bg(e){e.tag===22?(fe(Mt,Mt.current),fe(Dn,e),Kn===null&&(Kn=e)):Aa()}function Aa(){fe(Mt,Mt.current),fe(Dn,Dn.current)}function Mn(e){ee(Dn),Kn===e&&(Kn=null),ee(Mt)}var Mt=k(0);function yc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Bd(i)||qd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ks=0,Be=null,ft=null,Lt=null,xc=!1,pi=!1,Ar=!1,vc=0,Dl=0,yi=null,y_=0;function jt(){throw Error(a(321))}function kh(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!Cn(e[i],n[i]))return!1;return!0}function zh(e,n,i,o,d,f){return Ks=f,Be=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,$.H=e===null||e.memoizedState===null?sp:Jh,Ar=!1,f=i(o,d),Ar=!1,pi&&(f=Eg(n,i,o,d)),_g(e),f}function _g(e){$.H=Ol;var n=ft!==null&&ft.next!==null;if(Ks=0,Lt=ft=Be=null,xc=!1,Dl=0,yi=null,n)throw Error(a(300));e===null||Bt||(e=e.dependencies,e!==null&&cc(e)&&(Bt=!0))}function Eg(e,n,i,o){Be=e;var d=0;do{if(pi&&(yi=null),Dl=0,pi=!1,25<=d)throw Error(a(301));if(d+=1,Lt=ft=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}$.H=ap,f=n(i,o)}while(pi);return f}function x_(){var e=$.H,n=e.useState()[0];return n=typeof n.then=="function"?Ml(n):n,e=e.useState()[0],(ft!==null?ft.memoizedState:null)!==e&&(Be.flags|=1024),n}function Uh(){var e=vc!==0;return vc=0,e}function Ph(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Lh(e){if(xc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}xc=!1}Ks=0,Lt=ft=Be=null,pi=!1,Dl=vc=0,yi=null}function pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Be.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function It(){if(ft===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var n=Lt===null?Be.memoizedState:Lt.next;if(n!==null)Lt=n,ft=e;else{if(e===null)throw Be.alternate===null?Error(a(467)):Error(a(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Lt===null?Be.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(e){var n=Dl;return Dl+=1,yi===null&&(yi=[]),e=dg(yi,e,n),n=Be,(Lt===null?n.memoizedState:Lt.next)===null&&(n=n.alternate,$.H=n===null||n.memoizedState===null?sp:Jh),e}function _c(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ml(e);if(e.$$typeof===Z)return an(e)}throw Error(a(438,String(e)))}function Bh(e){var n=null,i=Be.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var o=Be.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=bc(),Be.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),o=0;o<e;o++)i[o]=O;return n.index++,i}function Xs(e,n){return typeof n=="function"?n(e):n}function Ec(e){var n=It();return qh(n,ft,e)}function qh(e,n,i){var o=e.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=i;var d=e.baseQueue,f=o.pending;if(f!==null){if(d!==null){var b=d.next;d.next=f.next,f.next=b}n.baseQueue=d=f,o.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{n=d.next;var N=b=null,I=null,F=n,te=!1;do{var re=F.lane&-536870913;if(re!==F.lane?(Ke&re)===re:(Ks&re)===re){var Y=F.revertLane;if(Y===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),re===hi&&(te=!0);else if((Ks&Y)===Y){F=F.next,Y===hi&&(te=!0);continue}else re={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(N=I=re,b=f):I=I.next=re,Be.lanes|=Y,Da|=Y;re=F.action,Ar&&i(f,re),f=F.hasEagerState?F.eagerState:i(f,re)}else Y={lane:re,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(N=I=Y,b=f):I=I.next=Y,Be.lanes|=re,Da|=re;F=F.next}while(F!==null&&F!==n);if(I===null?b=f:I.next=N,!Cn(f,e.memoizedState)&&(Bt=!0,te&&(i=di,i!==null)))throw i;e.memoizedState=f,e.baseState=b,e.baseQueue=I,o.lastRenderedState=f}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Hh(e){var n=It(),i=n.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=e;var o=i.dispatch,d=i.pending,f=n.memoizedState;if(d!==null){i.pending=null;var b=d=d.next;do f=e(f,b.action),b=b.next;while(b!==d);Cn(f,n.memoizedState)||(Bt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,o]}function Ng(e,n,i){var o=Be,d=It(),f=We;if(f){if(i===void 0)throw Error(a(407));i=i()}else i=n();var b=!Cn((ft||d).memoizedState,i);if(b&&(d.memoizedState=i,Bt=!0),d=d.queue,$h(jg.bind(null,o,d,e),[e]),d.getSnapshot!==n||b||Lt!==null&&Lt.memoizedState.tag&1){if(o.flags|=2048,xi(9,{destroy:void 0},Tg.bind(null,o,d,i,n),null),pt===null)throw Error(a(349));f||(Ks&127)!==0||wg(o,n,i)}return i}function wg(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=Be.updateQueue,n===null?(n=bc(),Be.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Tg(e,n,i,o){n.value=i,n.getSnapshot=o,Sg(n)&&Ag(e)}function jg(e,n,i){return i(function(){Sg(n)&&Ag(e)})}function Sg(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!Cn(e,i)}catch{return!0}}function Ag(e){var n=vr(e,2);n!==null&&Nn(n,e,2)}function Fh(e){var n=pn();if(typeof e=="function"){var i=e;if(e=i(),Ar){Pn(!0);try{i()}finally{Pn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:e},n}function Cg(e,n,i,o){return e.baseState=i,qh(e,ft,typeof o=="function"?o:Xs)}function v_(e,n,i,o,d){if(Tc(e))throw Error(a(485));if(e=n.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};$.T!==null?i(!0):f.isTransition=!1,o(f),i=n.pending,i===null?(f.next=n.pending=f,Rg(n,f)):(f.next=i.next,n.pending=i.next=f)}}function Rg(e,n){var i=n.action,o=n.payload,d=e.state;if(n.isTransition){var f=$.T,b={};$.T=b;try{var N=i(d,o),I=$.S;I!==null&&I(b,N),Dg(e,n,N)}catch(F){Gh(e,n,F)}finally{f!==null&&b.types!==null&&(f.types=b.types),$.T=f}}else try{f=i(d,o),Dg(e,n,f)}catch(F){Gh(e,n,F)}}function Dg(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){Mg(e,n,o)},function(o){return Gh(e,n,o)}):Mg(e,n,i)}function Mg(e,n,i){n.status="fulfilled",n.value=i,Ig(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,Rg(e,i)))}function Gh(e,n,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=i,Ig(n),n=n.next;while(n!==o)}e.action=null}function Ig(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Og(e,n){return n}function Vg(e,n){if(We){var i=pt.formState;if(i!==null){e:{var o=Be;if(We){if(bt){t:{for(var d=bt,f=Qn;d.nodeType!==8;){if(!f){d=null;break t}if(d=Xn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){bt=Xn(d.nextSibling),o=d.data==="F!";break e}}Ea(o)}o=!1}o&&(n=i[0])}}return i=pn(),i.memoizedState=i.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Og,lastRenderedState:n},i.queue=o,i=ep.bind(null,Be,o),o.dispatch=i,o=Fh(!1),f=Zh.bind(null,Be,!1,o.queue),o=pn(),d={state:n,dispatch:null,action:e,pending:null},o.queue=d,i=v_.bind(null,Be,d,f,i),d.dispatch=i,o.memoizedState=e,[n,i,!1]}function kg(e){var n=It();return zg(n,ft,e)}function zg(e,n,i){if(n=qh(e,n,Og)[0],e=Ec(Xs)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Ml(n)}catch(b){throw b===fi?dc:b}else o=n;n=It();var d=n.queue,f=d.dispatch;return i!==n.memoizedState&&(Be.flags|=2048,xi(9,{destroy:void 0},b_.bind(null,d,i),null)),[o,f,e]}function b_(e,n){e.action=n}function Ug(e){var n=It(),i=ft;if(i!==null)return zg(n,i,e);It(),n=n.memoizedState,i=It();var o=i.queue.dispatch;return i.memoizedState=e,[n,o,!1]}function xi(e,n,i,o){return e={tag:e,create:i,deps:o,inst:n,next:null},n=Be.updateQueue,n===null&&(n=bc(),Be.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,n.lastEffect=e),e}function Pg(){return It().memoizedState}function Nc(e,n,i,o){var d=pn();Be.flags|=e,d.memoizedState=xi(1|n,{destroy:void 0},i,o===void 0?null:o)}function wc(e,n,i,o){var d=It();o=o===void 0?null:o;var f=d.memoizedState.inst;ft!==null&&o!==null&&kh(o,ft.memoizedState.deps)?d.memoizedState=xi(n,f,i,o):(Be.flags|=e,d.memoizedState=xi(1|n,f,i,o))}function Lg(e,n){Nc(8390656,8,e,n)}function $h(e,n){wc(2048,8,e,n)}function __(e){Be.flags|=4;var n=Be.updateQueue;if(n===null)n=bc(),Be.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function Bg(e){var n=It().memoizedState;return __({ref:n,nextImpl:e}),function(){if((rt&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function qg(e,n){return wc(4,2,e,n)}function Hg(e,n){return wc(4,4,e,n)}function Fg(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Gg(e,n,i){i=i!=null?i.concat([e]):null,wc(4,4,Fg.bind(null,n,e),i)}function Yh(){}function $g(e,n){var i=It();n=n===void 0?null:n;var o=i.memoizedState;return n!==null&&kh(n,o[1])?o[0]:(i.memoizedState=[e,n],e)}function Yg(e,n){var i=It();n=n===void 0?null:n;var o=i.memoizedState;if(n!==null&&kh(n,o[1]))return o[0];if(o=e(),Ar){Pn(!0);try{e()}finally{Pn(!1)}}return i.memoizedState=[o,n],o}function Qh(e,n,i){return i===void 0||(Ks&1073741824)!==0&&(Ke&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Qp(),Be.lanes|=e,Da|=e,i)}function Qg(e,n,i,o){return Cn(i,n)?i:gi.current!==null?(e=Qh(e,i,o),Cn(e,n)||(Bt=!0),e):(Ks&42)===0||(Ks&1073741824)!==0&&(Ke&261930)===0?(Bt=!0,e.memoizedState=i):(e=Qp(),Be.lanes|=e,Da|=e,n)}function Kg(e,n,i,o,d){var f=Q.p;Q.p=f!==0&&8>f?f:8;var b=$.T,N={};$.T=N,Zh(e,!1,n,i);try{var I=d(),F=$.S;if(F!==null&&F(N,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var te=p_(I,o);Il(e,n,te,Vn(e))}else Il(e,n,o,Vn(e))}catch(re){Il(e,n,{then:function(){},status:"rejected",reason:re},Vn())}finally{Q.p=f,b!==null&&N.types!==null&&(b.types=N.types),$.T=b}}function E_(){}function Kh(e,n,i,o){if(e.tag!==5)throw Error(a(476));var d=Xg(e).queue;Kg(e,d,n,me,i===null?E_:function(){return Zg(e),i(o)})}function Xg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:me},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Zg(e){var n=Xg(e);n.next===null&&(n=e.alternate.memoizedState),Il(e,n.next.queue,{},Vn())}function Xh(){return an(Xl)}function Jg(){return It().memoizedState}function Wg(){return It().memoizedState}function N_(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=Vn();e=Ta(i);var o=ja(n,e,i);o!==null&&(Nn(o,n,i),Al(o,n,i)),n={cache:Th()},e.payload=n;return}n=n.return}}function w_(e,n,i){var o=Vn();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Tc(e)?tp(n,i):(i=mh(e,n,i,o),i!==null&&(Nn(i,e,o),np(i,n,o)))}function ep(e,n,i){var o=Vn();Il(e,n,i,o)}function Il(e,n,i,o){var d={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Tc(e))tp(n,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var b=n.lastRenderedState,N=f(b,i);if(d.hasEagerState=!0,d.eagerState=N,Cn(N,b))return rc(e,n,d,0),pt===null&&ac(),!1}catch{}finally{}if(i=mh(e,n,d,o),i!==null)return Nn(i,e,o),np(i,n,o),!0}return!1}function Zh(e,n,i,o){if(o={lane:2,revertLane:Cd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Tc(e)){if(n)throw Error(a(479))}else n=mh(e,i,o,2),n!==null&&Nn(n,e,2)}function Tc(e){var n=e.alternate;return e===Be||n!==null&&n===Be}function tp(e,n){pi=xc=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function np(e,n,i){if((i&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,tl(e,i)}}var Ol={readContext:an,use:_c,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt};Ol.useEffectEvent=jt;var sp={readContext:an,use:_c,useCallback:function(e,n){return pn().memoizedState=[e,n===void 0?null:n],e},useContext:an,useEffect:Lg,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,Nc(4194308,4,Fg.bind(null,n,e),i)},useLayoutEffect:function(e,n){return Nc(4194308,4,e,n)},useInsertionEffect:function(e,n){Nc(4,2,e,n)},useMemo:function(e,n){var i=pn();n=n===void 0?null:n;var o=e();if(Ar){Pn(!0);try{e()}finally{Pn(!1)}}return i.memoizedState=[o,n],o},useReducer:function(e,n,i){var o=pn();if(i!==void 0){var d=i(n);if(Ar){Pn(!0);try{i(n)}finally{Pn(!1)}}}else d=n;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=w_.bind(null,Be,e),[o.memoizedState,e]},useRef:function(e){var n=pn();return e={current:e},n.memoizedState=e},useState:function(e){e=Fh(e);var n=e.queue,i=ep.bind(null,Be,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Yh,useDeferredValue:function(e,n){var i=pn();return Qh(i,e,n)},useTransition:function(){var e=Fh(!1);return e=Kg.bind(null,Be,e.queue,!0,!1),pn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var o=Be,d=pn();if(We){if(i===void 0)throw Error(a(407));i=i()}else{if(i=n(),pt===null)throw Error(a(349));(Ke&127)!==0||wg(o,n,i)}d.memoizedState=i;var f={value:i,getSnapshot:n};return d.queue=f,Lg(jg.bind(null,o,f,e),[e]),o.flags|=2048,xi(9,{destroy:void 0},Tg.bind(null,o,f,i,n),null),i},useId:function(){var e=pn(),n=pt.identifierPrefix;if(We){var i=Ds,o=Rs;i=(o&~(1<<32-Rt(o)-1)).toString(32)+i,n="_"+n+"R_"+i,i=vc++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=y_++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Xh,useFormState:Vg,useActionState:Vg,useOptimistic:function(e){var n=pn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Zh.bind(null,Be,!0,i),i.dispatch=n,[e,n]},useMemoCache:Bh,useCacheRefresh:function(){return pn().memoizedState=N_.bind(null,Be)},useEffectEvent:function(e){var n=pn(),i={impl:e};return n.memoizedState=i,function(){if((rt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}},Jh={readContext:an,use:_c,useCallback:$g,useContext:an,useEffect:$h,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Hg,useMemo:Yg,useReducer:Ec,useRef:Pg,useState:function(){return Ec(Xs)},useDebugValue:Yh,useDeferredValue:function(e,n){var i=It();return Qg(i,ft.memoizedState,e,n)},useTransition:function(){var e=Ec(Xs)[0],n=It().memoizedState;return[typeof e=="boolean"?e:Ml(e),n]},useSyncExternalStore:Ng,useId:Jg,useHostTransitionStatus:Xh,useFormState:kg,useActionState:kg,useOptimistic:function(e,n){var i=It();return Cg(i,ft,e,n)},useMemoCache:Bh,useCacheRefresh:Wg};Jh.useEffectEvent=Bg;var ap={readContext:an,use:_c,useCallback:$g,useContext:an,useEffect:$h,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Hg,useMemo:Yg,useReducer:Hh,useRef:Pg,useState:function(){return Hh(Xs)},useDebugValue:Yh,useDeferredValue:function(e,n){var i=It();return ft===null?Qh(i,e,n):Qg(i,ft.memoizedState,e,n)},useTransition:function(){var e=Hh(Xs)[0],n=It().memoizedState;return[typeof e=="boolean"?e:Ml(e),n]},useSyncExternalStore:Ng,useId:Jg,useHostTransitionStatus:Xh,useFormState:Ug,useActionState:Ug,useOptimistic:function(e,n){var i=It();return ft!==null?Cg(i,ft,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Bh,useCacheRefresh:Wg};ap.useEffectEvent=Bg;function Wh(e,n,i,o){n=e.memoizedState,i=i(o,n),i=i==null?n:E({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ed={enqueueSetState:function(e,n,i){e=e._reactInternals;var o=Vn(),d=Ta(o);d.payload=n,i!=null&&(d.callback=i),n=ja(e,d,o),n!==null&&(Nn(n,e,o),Al(n,e,o))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var o=Vn(),d=Ta(o);d.tag=1,d.payload=n,i!=null&&(d.callback=i),n=ja(e,d,o),n!==null&&(Nn(n,e,o),Al(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Vn(),o=Ta(i);o.tag=2,n!=null&&(o.callback=n),n=ja(e,o,i),n!==null&&(Nn(n,e,i),Al(n,e,i))}};function rp(e,n,i,o,d,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,b):n.prototype&&n.prototype.isPureReactComponent?!bl(i,o)||!bl(d,f):!0}function ip(e,n,i,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==e&&ed.enqueueReplaceState(n,n.state,null)}function Cr(e,n){var i=n;if("ref"in n){i={};for(var o in n)o!=="ref"&&(i[o]=n[o])}if(e=e.defaultProps){i===n&&(i=E({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}function lp(e){sc(e)}function op(e){console.error(e)}function cp(e){sc(e)}function jc(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function up(e,n,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function td(e,n,i){return i=Ta(i),i.tag=3,i.payload={element:null},i.callback=function(){jc(e,n)},i}function hp(e){return e=Ta(e),e.tag=3,e}function dp(e,n,i,o){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;e.payload=function(){return d(f)},e.callback=function(){up(n,i,o)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){up(n,i,o),typeof d!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var N=o.stack;this.componentDidCatch(o.value,{componentStack:N!==null?N:""})})}function T_(e,n,i,o,d){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=i.alternate,n!==null&&ui(n,i,d,!0),i=Dn.current,i!==null){switch(i.tag){case 31:case 13:return Kn===null?Uc():i.alternate===null&&St===0&&(St=3),i.flags&=-257,i.flags|=65536,i.lanes=d,o===fc?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([o]):n.add(o),jd(e,o,d)),!1;case 22:return i.flags|=65536,o===fc?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([o]):i.add(o)),jd(e,o,d)),!1}throw Error(a(435,i.tag))}return jd(e,o,d),Uc(),!1}if(We)return n=Dn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,o!==bh&&(e=Error(a(422),{cause:o}),Nl(Gn(e,i)))):(o!==bh&&(n=Error(a(423),{cause:o}),Nl(Gn(n,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Gn(o,i),d=td(e.stateNode,o,d),Dh(e,d),St!==4&&(St=2)),!1;var f=Error(a(520),{cause:o});if(f=Gn(f,i),ql===null?ql=[f]:ql.push(f),St!==4&&(St=2),n===null)return!0;o=Gn(o,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=td(i.stateNode,o,e),Dh(i,e),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ma===null||!Ma.has(f))))return i.flags|=65536,d&=-d,i.lanes|=d,d=hp(d),dp(d,e,i,o),Dh(i,d),!1}i=i.return}while(i!==null);return!1}var nd=Error(a(461)),Bt=!1;function rn(e,n,i,o){n.child=e===null?pg(n,null,i,o):Sr(n,e.child,i,o)}function fp(e,n,i,o,d){i=i.render;var f=n.ref;if("ref"in o){var b={};for(var N in o)N!=="ref"&&(b[N]=o[N])}else b=o;return Nr(n),o=zh(e,n,i,b,f,d),N=Uh(),e!==null&&!Bt?(Ph(e,n,d),Zs(e,n,d)):(We&&N&&xh(n),n.flags|=1,rn(e,n,o,d),n.child)}function mp(e,n,i,o,d){if(e===null){var f=i.type;return typeof f=="function"&&!gh(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,gp(e,n,f,o,d)):(e=lc(i.type,null,o,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!ud(e,d)){var b=f.memoizedProps;if(i=i.compare,i=i!==null?i:bl,i(b,o)&&e.ref===n.ref)return Zs(e,n,d)}return n.flags|=1,e=Gs(f,o),e.ref=n.ref,e.return=n,n.child=e}function gp(e,n,i,o,d){if(e!==null){var f=e.memoizedProps;if(bl(f,o)&&e.ref===n.ref)if(Bt=!1,n.pendingProps=o=f,ud(e,d))(e.flags&131072)!==0&&(Bt=!0);else return n.lanes=e.lanes,Zs(e,n,d)}return sd(e,n,i,o,d)}function pp(e,n,i,o){var d=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(o=n.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~f}else o=0,n.child=null;return yp(e,n,f,i,o)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&hc(n,f!==null?f.cachePool:null),f!==null?vg(n,f):Ih(),bg(n);else return o=n.lanes=536870912,yp(e,n,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(hc(n,f.cachePool),vg(n,f),Aa(),n.memoizedState=null):(e!==null&&hc(n,null),Ih(),Aa());return rn(e,n,d,i),n.child}function Vl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function yp(e,n,i,o,d){var f=Sh();return f=f===null?null:{parent:Pt._currentValue,pool:f},n.memoizedState={baseLanes:i,cachePool:f},e!==null&&hc(n,null),Ih(),bg(n),e!==null&&ui(e,n,o,!0),n.childLanes=d,null}function Sc(e,n){return n=Cc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function xp(e,n,i){return Sr(n,e.child,null,i),e=Sc(n,n.pendingProps),e.flags|=2,Mn(n),n.memoizedState=null,e}function j_(e,n,i){var o=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(We){if(o.mode==="hidden")return e=Sc(n,o),n.lanes=536870912,Vl(null,e);if(Vh(n),(e=bt)?(e=Ry(e,Qn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Rs,overflow:Ds}:null,retryLane:536870912,hydrationErrors:null},i=tg(e),i.return=n,n.child=i,sn=n,bt=null)):e=null,e===null)throw Ea(n);return n.lanes=536870912,null}return Sc(n,o)}var f=e.memoizedState;if(f!==null){var b=f.dehydrated;if(Vh(n),d)if(n.flags&256)n.flags&=-257,n=xp(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(a(558));else if(Bt||ui(e,n,i,!1),d=(i&e.childLanes)!==0,Bt||d){if(o=pt,o!==null&&(b=nl(o,i),b!==0&&b!==f.retryLane))throw f.retryLane=b,vr(e,b),Nn(o,e,b),nd;Uc(),n=xp(e,n,i)}else e=f.treeContext,bt=Xn(b.nextSibling),sn=n,We=!0,_a=null,Qn=!1,e!==null&&ag(n,e),n=Sc(n,o),n.flags|=4096;return n}return e=Gs(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Ac(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function sd(e,n,i,o,d){return Nr(n),i=zh(e,n,i,o,void 0,d),o=Uh(),e!==null&&!Bt?(Ph(e,n,d),Zs(e,n,d)):(We&&o&&xh(n),n.flags|=1,rn(e,n,i,d),n.child)}function vp(e,n,i,o,d,f){return Nr(n),n.updateQueue=null,i=Eg(n,o,i,d),_g(e),o=Uh(),e!==null&&!Bt?(Ph(e,n,f),Zs(e,n,f)):(We&&o&&xh(n),n.flags|=1,rn(e,n,i,f),n.child)}function bp(e,n,i,o,d){if(Nr(n),n.stateNode===null){var f=ii,b=i.contextType;typeof b=="object"&&b!==null&&(f=an(b)),f=new i(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ed,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Ch(n),b=i.contextType,f.context=typeof b=="object"&&b!==null?an(b):ii,f.state=n.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(Wh(n,i,b,o),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&ed.enqueueReplaceState(f,f.state,null),Rl(n,o,f,d),Cl(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var N=n.memoizedProps,I=Cr(i,N);f.props=I;var F=f.context,te=i.contextType;b=ii,typeof te=="object"&&te!==null&&(b=an(te));var re=i.getDerivedStateFromProps;te=typeof re=="function"||typeof f.getSnapshotBeforeUpdate=="function",N=n.pendingProps!==N,te||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(N||F!==b)&&ip(n,f,o,b),wa=!1;var Y=n.memoizedState;f.state=Y,Rl(n,o,f,d),Cl(),F=n.memoizedState,N||Y!==F||wa?(typeof re=="function"&&(Wh(n,i,re,o),F=n.memoizedState),(I=wa||rp(n,i,I,o,Y,F,b))?(te||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=F),f.props=o,f.state=F,f.context=b,o=I):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,Rh(e,n),b=n.memoizedProps,te=Cr(i,b),f.props=te,re=n.pendingProps,Y=f.context,F=i.contextType,I=ii,typeof F=="object"&&F!==null&&(I=an(F)),N=i.getDerivedStateFromProps,(F=typeof N=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==re||Y!==I)&&ip(n,f,o,I),wa=!1,Y=n.memoizedState,f.state=Y,Rl(n,o,f,d),Cl();var X=n.memoizedState;b!==re||Y!==X||wa||e!==null&&e.dependencies!==null&&cc(e.dependencies)?(typeof N=="function"&&(Wh(n,i,N,o),X=n.memoizedState),(te=wa||rp(n,i,te,o,Y,X,I)||e!==null&&e.dependencies!==null&&cc(e.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,X,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,X,I)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=X),f.props=o,f.state=X,f.context=I,o=te):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Ac(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=Sr(n,e.child,null,d),n.child=Sr(n,null,i,d)):rn(e,n,i,d),n.memoizedState=f.state,e=n.child):e=Zs(e,n,d),e}function _p(e,n,i,o){return _r(),n.flags|=256,rn(e,n,i,o),n.child}var ad={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rd(e){return{baseLanes:e,cachePool:ug()}}function id(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=On),e}function Ep(e,n,i){var o=n.pendingProps,d=!1,f=(n.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(Mt.current&2)!==0),b&&(d=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,e===null){if(We){if(d?Sa(n):Aa(),(e=bt)?(e=Ry(e,Qn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Rs,overflow:Ds}:null,retryLane:536870912,hydrationErrors:null},i=tg(e),i.return=n,n.child=i,sn=n,bt=null)):e=null,e===null)throw Ea(n);return qd(e)?n.lanes=32:n.lanes=536870912,null}var N=o.children;return o=o.fallback,d?(Aa(),d=n.mode,N=Cc({mode:"hidden",children:N},d),o=br(o,d,i,null),N.return=n,o.return=n,N.sibling=o,n.child=N,o=n.child,o.memoizedState=rd(i),o.childLanes=id(e,b,i),n.memoizedState=ad,Vl(null,o)):(Sa(n),ld(n,N))}var I=e.memoizedState;if(I!==null&&(N=I.dehydrated,N!==null)){if(f)n.flags&256?(Sa(n),n.flags&=-257,n=od(e,n,i)):n.memoizedState!==null?(Aa(),n.child=e.child,n.flags|=128,n=null):(Aa(),N=o.fallback,d=n.mode,o=Cc({mode:"visible",children:o.children},d),N=br(N,d,i,null),N.flags|=2,o.return=n,N.return=n,o.sibling=N,n.child=o,Sr(n,e.child,null,i),o=n.child,o.memoizedState=rd(i),o.childLanes=id(e,b,i),n.memoizedState=ad,n=Vl(null,o));else if(Sa(n),qd(N)){if(b=N.nextSibling&&N.nextSibling.dataset,b)var F=b.dgst;b=F,o=Error(a(419)),o.stack="",o.digest=b,Nl({value:o,source:null,stack:null}),n=od(e,n,i)}else if(Bt||ui(e,n,i,!1),b=(i&e.childLanes)!==0,Bt||b){if(b=pt,b!==null&&(o=nl(b,i),o!==0&&o!==I.retryLane))throw I.retryLane=o,vr(e,o),Nn(b,e,o),nd;Bd(N)||Uc(),n=od(e,n,i)}else Bd(N)?(n.flags|=192,n.child=e.child,n=null):(e=I.treeContext,bt=Xn(N.nextSibling),sn=n,We=!0,_a=null,Qn=!1,e!==null&&ag(n,e),n=ld(n,o.children),n.flags|=4096);return n}return d?(Aa(),N=o.fallback,d=n.mode,I=e.child,F=I.sibling,o=Gs(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,F!==null?N=Gs(F,N):(N=br(N,d,i,null),N.flags|=2),N.return=n,o.return=n,o.sibling=N,n.child=o,Vl(null,o),o=n.child,N=e.child.memoizedState,N===null?N=rd(i):(d=N.cachePool,d!==null?(I=Pt._currentValue,d=d.parent!==I?{parent:I,pool:I}:d):d=ug(),N={baseLanes:N.baseLanes|i,cachePool:d}),o.memoizedState=N,o.childLanes=id(e,b,i),n.memoizedState=ad,Vl(e.child,o)):(Sa(n),i=e.child,e=i.sibling,i=Gs(i,{mode:"visible",children:o.children}),i.return=n,i.sibling=null,e!==null&&(b=n.deletions,b===null?(n.deletions=[e],n.flags|=16):b.push(e)),n.child=i,n.memoizedState=null,i)}function ld(e,n){return n=Cc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Cc(e,n){return e=Rn(22,e,null,n),e.lanes=0,e}function od(e,n,i){return Sr(n,e.child,null,i),e=ld(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Np(e,n,i){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Nh(e.return,n,i)}function cd(e,n,i,o,d,f){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:d,treeForkCount:f}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=i,b.tailMode=d,b.treeForkCount=f)}function wp(e,n,i){var o=n.pendingProps,d=o.revealOrder,f=o.tail;o=o.children;var b=Mt.current,N=(b&2)!==0;if(N?(b=b&1|2,n.flags|=128):b&=1,fe(Mt,b),rn(e,n,o,i),o=We?El:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Np(e,i,n);else if(e.tag===19)Np(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(i=n.child,d=null;i!==null;)e=i.alternate,e!==null&&yc(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=n.child,n.child=null):(d=i.sibling,i.sibling=null),cd(n,!1,d,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&yc(e)===null){n.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}cd(n,!0,i,null,f,o);break;case"together":cd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Zs(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Da|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(ui(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,i=Gs(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Gs(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function ud(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&cc(e)))}function S_(e,n,i){switch(n.tag){case 3:it(n,n.stateNode.containerInfo),Na(n,Pt,e.memoizedState.cache),_r();break;case 27:case 5:en(n);break;case 4:it(n,n.stateNode.containerInfo);break;case 10:Na(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Vh(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Sa(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Ep(e,n,i):(Sa(n),e=Zs(e,n,i),e!==null?e.sibling:null);Sa(n);break;case 19:var d=(e.flags&128)!==0;if(o=(i&n.childLanes)!==0,o||(ui(e,n,i,!1),o=(i&n.childLanes)!==0),d){if(o)return wp(e,n,i);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),fe(Mt,Mt.current),o)break;return null;case 22:return n.lanes=0,pp(e,n,i,n.pendingProps);case 24:Na(n,Pt,e.memoizedState.cache)}return Zs(e,n,i)}function Tp(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Bt=!0;else{if(!ud(e,i)&&(n.flags&128)===0)return Bt=!1,S_(e,n,i);Bt=(e.flags&131072)!==0}else Bt=!1,We&&(n.flags&1048576)!==0&&sg(n,El,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=Tr(n.elementType),n.type=e,typeof e=="function")gh(e)?(o=Cr(e,o),n.tag=1,n=bp(null,n,e,o,i)):(n.tag=0,n=sd(null,n,e,o,i));else{if(e!=null){var d=e.$$typeof;if(d===ue){n.tag=11,n=fp(null,n,e,o,i);break e}else if(d===D){n.tag=14,n=mp(null,n,e,o,i);break e}}throw n=Ee(e)||e,Error(a(306,n,""))}}return n;case 0:return sd(e,n,n.type,n.pendingProps,i);case 1:return o=n.type,d=Cr(o,n.pendingProps),bp(e,n,o,d,i);case 3:e:{if(it(n,n.stateNode.containerInfo),e===null)throw Error(a(387));o=n.pendingProps;var f=n.memoizedState;d=f.element,Rh(e,n),Rl(n,o,null,i);var b=n.memoizedState;if(o=b.cache,Na(n,Pt,o),o!==f.cache&&wh(n,[Pt],i,!0),Cl(),o=b.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=_p(e,n,o,i);break e}else if(o!==d){d=Gn(Error(a(424)),n),Nl(d),n=_p(e,n,o,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(bt=Xn(e.firstChild),sn=n,We=!0,_a=null,Qn=!0,i=pg(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(_r(),o===d){n=Zs(e,n,i);break e}rn(e,n,o,i)}n=n.child}return n;case 26:return Ac(e,n),e===null?(i=ky(n.type,null,n.pendingProps,null))?n.memoizedState=i:We||(i=n.type,e=n.pendingProps,o=Gc(Se.current).createElement(i),o[kt]=n,o[Xt]=e,ln(o,i,e),zt(o),n.stateNode=o):n.memoizedState=ky(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return en(n),e===null&&We&&(o=n.stateNode=Iy(n.type,n.pendingProps,Se.current),sn=n,Qn=!0,d=bt,ka(n.type)?(Hd=d,bt=Xn(o.firstChild)):bt=d),rn(e,n,n.pendingProps.children,i),Ac(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&We&&((d=o=bt)&&(o=s1(o,n.type,n.pendingProps,Qn),o!==null?(n.stateNode=o,sn=n,bt=Xn(o.firstChild),Qn=!1,d=!0):d=!1),d||Ea(n)),en(n),d=n.type,f=n.pendingProps,b=e!==null?e.memoizedProps:null,o=f.children,Ud(d,f)?o=null:b!==null&&Ud(d,b)&&(n.flags|=32),n.memoizedState!==null&&(d=zh(e,n,x_,null,null,i),Xl._currentValue=d),Ac(e,n),rn(e,n,o,i),n.child;case 6:return e===null&&We&&((e=i=bt)&&(i=a1(i,n.pendingProps,Qn),i!==null?(n.stateNode=i,sn=n,bt=null,e=!0):e=!1),e||Ea(n)),null;case 13:return Ep(e,n,i);case 4:return it(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Sr(n,null,o,i):rn(e,n,o,i),n.child;case 11:return fp(e,n,n.type,n.pendingProps,i);case 7:return rn(e,n,n.pendingProps,i),n.child;case 8:return rn(e,n,n.pendingProps.children,i),n.child;case 12:return rn(e,n,n.pendingProps.children,i),n.child;case 10:return o=n.pendingProps,Na(n,n.type,o.value),rn(e,n,o.children,i),n.child;case 9:return d=n.type._context,o=n.pendingProps.children,Nr(n),d=an(d),o=o(d),n.flags|=1,rn(e,n,o,i),n.child;case 14:return mp(e,n,n.type,n.pendingProps,i);case 15:return gp(e,n,n.type,n.pendingProps,i);case 19:return wp(e,n,i);case 31:return j_(e,n,i);case 22:return pp(e,n,i,n.pendingProps);case 24:return Nr(n),o=an(Pt),e===null?(d=Sh(),d===null&&(d=pt,f=Th(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=i),d=f),n.memoizedState={parent:o,cache:d},Ch(n),Na(n,Pt,d)):((e.lanes&i)!==0&&(Rh(e,n),Rl(n,null,null,i),Cl()),d=e.memoizedState,f=n.memoizedState,d.parent!==o?(d={parent:o,cache:o},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),Na(n,Pt,o)):(o=f.cache,Na(n,Pt,o),o!==d.cache&&wh(n,[Pt],i,!0))),rn(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Js(e){e.flags|=4}function hd(e,n,i,o,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Jp())e.flags|=8192;else throw jr=fc,Ah}else e.flags&=-16777217}function jp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!By(n))if(Jp())e.flags|=8192;else throw jr=fc,Ah}function Rc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ko():536870912,e.lanes|=n,Ei|=n)}function kl(e,n){if(!We)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function _t(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(n)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=i,n}function A_(e,n,i){var o=n.pendingProps;switch(vh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(n),null;case 1:return _t(n),null;case 3:return i=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Qs(Pt),De(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ci(n)?Js(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,_h())),_t(n),null;case 26:var d=n.type,f=n.memoizedState;return e===null?(Js(n),f!==null?(_t(n),jp(n,f)):(_t(n),hd(n,d,null,o,i))):f?f!==e.memoizedState?(Js(n),_t(n),jp(n,f)):(_t(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Js(n),_t(n),hd(n,d,e,o,i)),null;case 27:if(we(n),i=Se.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Js(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return _t(n),null}e=pe.current,ci(n)?rg(n):(e=Iy(d,o,i),n.stateNode=e,Js(n))}return _t(n),null;case 5:if(we(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Js(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return _t(n),null}if(f=pe.current,ci(n))rg(n);else{var b=Gc(Se.current);switch(f){case 1:f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=b.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?b.createElement(d,{is:o.is}):b.createElement(d)}}f[kt]=n,f[Xt]=o;e:for(b=n.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===n)break e;for(;b.sibling===null;){if(b.return===null||b.return===n)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}n.stateNode=f;e:switch(ln(f,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Js(n)}}return _t(n),hd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Js(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(e=Se.current,ci(n)){if(e=n.stateNode,i=n.memoizedProps,o=null,d=sn,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[kt]=n,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||Ey(e.nodeValue,i)),e||Ea(n,!0)}else e=Gc(e).createTextNode(o),e[kt]=n,n.stateNode=e}return _t(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(o=ci(n),i!==null){if(e===null){if(!o)throw Error(a(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[kt]=n}else _r(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;_t(n),e=!1}else i=_h(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(Mn(n),n):(Mn(n),null);if((n.flags&128)!==0)throw Error(a(558))}return _t(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=ci(n),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(a(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));d[kt]=n}else _r(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;_t(n),d=!1}else d=_h(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Mn(n),n):(Mn(n),null)}return Mn(n),(n.flags&128)!==0?(n.lanes=i,n):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=n.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Rc(n,n.updateQueue),_t(n),null);case 4:return De(),e===null&&Id(n.stateNode.containerInfo),_t(n),null;case 10:return Qs(n.type),_t(n),null;case 19:if(ee(Mt),o=n.memoizedState,o===null)return _t(n),null;if(d=(n.flags&128)!==0,f=o.rendering,f===null)if(d)kl(o,!1);else{if(St!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=yc(e),f!==null){for(n.flags|=128,kl(o,!1),e=f.updateQueue,n.updateQueue=e,Rc(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)eg(i,e),i=i.sibling;return fe(Mt,Mt.current&1|2),We&&$s(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&Yt()>Vc&&(n.flags|=128,d=!0,kl(o,!1),n.lanes=4194304)}else{if(!d)if(e=yc(f),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,Rc(n,e),kl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!We)return _t(n),null}else 2*Yt()-o.renderingStartTime>Vc&&i!==536870912&&(n.flags|=128,d=!0,kl(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Yt(),e.sibling=null,i=Mt.current,fe(Mt,d?i&1|2:i&1),We&&$s(n,o.treeForkCount),e):(_t(n),null);case 22:case 23:return Mn(n),Oh(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(i&536870912)!==0&&(n.flags&128)===0&&(_t(n),n.subtreeFlags&6&&(n.flags|=8192)):_t(n),i=n.updateQueue,i!==null&&Rc(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048),e!==null&&ee(wr),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Qs(Pt),_t(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function C_(e,n){switch(vh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Qs(Pt),De(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return we(n),null;case 31:if(n.memoizedState!==null){if(Mn(n),n.alternate===null)throw Error(a(340));_r()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Mn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));_r()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ee(Mt),null;case 4:return De(),null;case 10:return Qs(n.type),null;case 22:case 23:return Mn(n),Oh(),e!==null&&ee(wr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Qs(Pt),null;case 25:return null;default:return null}}function Sp(e,n){switch(vh(n),n.tag){case 3:Qs(Pt),De();break;case 26:case 27:case 5:we(n);break;case 4:De();break;case 31:n.memoizedState!==null&&Mn(n);break;case 13:Mn(n);break;case 19:ee(Mt);break;case 10:Qs(n.type);break;case 22:case 23:Mn(n),Oh(),e!==null&&ee(wr);break;case 24:Qs(Pt)}}function zl(e,n){try{var i=n.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var d=o.next;i=d;do{if((i.tag&e)===e){o=void 0;var f=i.create,b=i.inst;o=f(),b.destroy=o}i=i.next}while(i!==d)}}catch(N){ht(n,n.return,N)}}function Ca(e,n,i){try{var o=n.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var f=d.next;o=f;do{if((o.tag&e)===e){var b=o.inst,N=b.destroy;if(N!==void 0){b.destroy=void 0,d=n;var I=i,F=N;try{F()}catch(te){ht(d,I,te)}}}o=o.next}while(o!==f)}}catch(te){ht(n,n.return,te)}}function Ap(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{xg(n,i)}catch(o){ht(e,e.return,o)}}}function Cp(e,n,i){i.props=Cr(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){ht(e,n,o)}}function Ul(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(d){ht(e,n,d)}}function Ms(e,n){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(d){ht(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){ht(e,n,d)}else i.current=null}function Rp(e){var n=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(d){ht(e,e.return,d)}}function dd(e,n,i){try{var o=e.stateNode;Z_(o,e.type,i,n),o[Xt]=n}catch(d){ht(e,e.return,d)}}function Dp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ka(e.type)||e.tag===4}function fd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ka(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function md(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=ss));else if(o!==4&&(o===27&&ka(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(md(e,n,i),e=e.sibling;e!==null;)md(e,n,i),e=e.sibling}function Dc(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(o!==4&&(o===27&&ka(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Dc(e,n,i),e=e.sibling;e!==null;)Dc(e,n,i),e=e.sibling}function Mp(e){var n=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);ln(n,o,i),n[kt]=e,n[Xt]=i}catch(f){ht(e,e.return,f)}}var Ws=!1,qt=!1,gd=!1,Ip=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function R_(e,n){if(e=e.containerInfo,kd=Jc,e=Gm(e),oh(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var b=0,N=-1,I=-1,F=0,te=0,re=e,Y=null;t:for(;;){for(var X;re!==i||d!==0&&re.nodeType!==3||(N=b+d),re!==f||o!==0&&re.nodeType!==3||(I=b+o),re.nodeType===3&&(b+=re.nodeValue.length),(X=re.firstChild)!==null;)Y=re,re=X;for(;;){if(re===e)break t;if(Y===i&&++F===d&&(N=b),Y===f&&++te===o&&(I=b),(X=re.nextSibling)!==null)break;re=Y,Y=re.parentNode}re=X}i=N===-1||I===-1?null:{start:N,end:I}}else i=null}i=i||{start:0,end:0}}else i=null;for(zd={focusedElem:e,selectionRange:i},Jc=!1,Jt=n;Jt!==null;)if(n=Jt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Jt=e;else for(;Jt!==null;){switch(n=Jt,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)d=e[i],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=n,d=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var be=Cr(i.type,d);e=o.getSnapshotBeforeUpdate(be,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Oe){ht(i,i.return,Oe)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Ld(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ld(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,Jt=e;break}Jt=n.return}}function Op(e,n,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:ta(e,i),o&4&&zl(5,i);break;case 1:if(ta(e,i),o&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(b){ht(i,i.return,b)}else{var d=Cr(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(b){ht(i,i.return,b)}}o&64&&Ap(i),o&512&&Ul(i,i.return);break;case 3:if(ta(e,i),o&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{xg(e,n)}catch(b){ht(i,i.return,b)}}break;case 27:n===null&&o&4&&Mp(i);case 26:case 5:ta(e,i),n===null&&o&4&&Rp(i),o&512&&Ul(i,i.return);break;case 12:ta(e,i);break;case 31:ta(e,i),o&4&&zp(e,i);break;case 13:ta(e,i),o&4&&Up(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=P_.bind(null,i),r1(e,i))));break;case 22:if(o=i.memoizedState!==null||Ws,!o){n=n!==null&&n.memoizedState!==null||qt,d=Ws;var f=qt;Ws=o,(qt=n)&&!f?na(e,i,(i.subtreeFlags&8772)!==0):ta(e,i),Ws=d,qt=f}break;case 30:break;default:ta(e,i)}}function Vp(e){var n=e.alternate;n!==null&&(e.alternate=null,Vp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&$r(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nt=null,vn=!1;function ea(e,n,i){for(i=i.child;i!==null;)kp(e,n,i),i=i.sibling}function kp(e,n,i){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Wn,i)}catch{}switch(i.tag){case 26:qt||Ms(i,n),ea(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:qt||Ms(i,n);var o=Nt,d=vn;ka(i.type)&&(Nt=i.stateNode,vn=!1),ea(e,n,i),Yl(i.stateNode),Nt=o,vn=d;break;case 5:qt||Ms(i,n);case 6:if(o=Nt,d=vn,Nt=null,ea(e,n,i),Nt=o,vn=d,Nt!==null)if(vn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(i.stateNode)}catch(f){ht(i,n,f)}else try{Nt.removeChild(i.stateNode)}catch(f){ht(i,n,f)}break;case 18:Nt!==null&&(vn?(e=Nt,Ay(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ri(e)):Ay(Nt,i.stateNode));break;case 4:o=Nt,d=vn,Nt=i.stateNode.containerInfo,vn=!0,ea(e,n,i),Nt=o,vn=d;break;case 0:case 11:case 14:case 15:Ca(2,i,n),qt||Ca(4,i,n),ea(e,n,i);break;case 1:qt||(Ms(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"&&Cp(i,n,o)),ea(e,n,i);break;case 21:ea(e,n,i);break;case 22:qt=(o=qt)||i.memoizedState!==null,ea(e,n,i),qt=o;break;default:ea(e,n,i)}}function zp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ri(e)}catch(i){ht(n,n.return,i)}}}function Up(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ri(e)}catch(i){ht(n,n.return,i)}}function D_(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Ip),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Ip),n;default:throw Error(a(435,e.tag))}}function Mc(e,n){var i=D_(e);n.forEach(function(o){if(!i.has(o)){i.add(o);var d=L_.bind(null,e,o);o.then(d,d)}})}function bn(e,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var d=i[o],f=e,b=n,N=b;e:for(;N!==null;){switch(N.tag){case 27:if(ka(N.type)){Nt=N.stateNode,vn=!1;break e}break;case 5:Nt=N.stateNode,vn=!1;break e;case 3:case 4:Nt=N.stateNode.containerInfo,vn=!0;break e}N=N.return}if(Nt===null)throw Error(a(160));kp(f,b,d),Nt=null,vn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Pp(n,e),n=n.sibling}var cs=null;function Pp(e,n){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:bn(n,e),_n(e),o&4&&(Ca(3,e,e.return),zl(3,e),Ca(5,e,e.return));break;case 1:bn(n,e),_n(e),o&512&&(qt||i===null||Ms(i,i.return)),o&64&&Ws&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var d=cs;if(bn(n,e),_n(e),o&512&&(qt||i===null||Ms(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":f=d.getElementsByTagName("title")[0],(!f||f[xs]||f[kt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(o),d.head.insertBefore(f,d.querySelector("head > title"))),ln(f,o,i),f[kt]=e,zt(f),o=f;break e;case"link":var b=Py("link","href",d).get(o+(i.href||""));if(b){for(var N=0;N<b.length;N++)if(f=b[N],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(N,1);break t}}f=d.createElement(o),ln(f,o,i),d.head.appendChild(f);break;case"meta":if(b=Py("meta","content",d).get(o+(i.content||""))){for(N=0;N<b.length;N++)if(f=b[N],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(N,1);break t}}f=d.createElement(o),ln(f,o,i),d.head.appendChild(f);break;default:throw Error(a(468,o))}f[kt]=e,zt(f),o=f}e.stateNode=o}else Ly(d,e.type,e.stateNode);else e.stateNode=Uy(d,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?Ly(d,e.type,e.stateNode):Uy(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&dd(e,e.memoizedProps,i.memoizedProps)}break;case 27:bn(n,e),_n(e),o&512&&(qt||i===null||Ms(i,i.return)),i!==null&&o&4&&dd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(bn(n,e),_n(e),o&512&&(qt||i===null||Ms(i,i.return)),e.flags&32){d=e.stateNode;try{xn(d,"")}catch(be){ht(e,e.return,be)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,dd(e,d,i!==null?i.memoizedProps:d)),o&1024&&(gd=!0);break;case 6:if(bn(n,e),_n(e),o&4){if(e.stateNode===null)throw Error(a(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(be){ht(e,e.return,be)}}break;case 3:if(Qc=null,d=cs,cs=$c(n.containerInfo),bn(n,e),cs=d,_n(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Ri(n.containerInfo)}catch(be){ht(e,e.return,be)}gd&&(gd=!1,Lp(e));break;case 4:o=cs,cs=$c(e.stateNode.containerInfo),bn(n,e),_n(e),cs=o;break;case 12:bn(n,e),_n(e);break;case 31:bn(n,e),_n(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Mc(e,o)));break;case 13:bn(n,e),_n(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Oc=Yt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Mc(e,o)));break;case 22:d=e.memoizedState!==null;var I=i!==null&&i.memoizedState!==null,F=Ws,te=qt;if(Ws=F||d,qt=te||I,bn(n,e),qt=te,Ws=F,_n(e),o&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(i===null||I||Ws||qt||Rr(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){I=i=n;try{if(f=I.stateNode,d)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{N=I.stateNode;var re=I.memoizedProps.style,Y=re!=null&&re.hasOwnProperty("display")?re.display:null;N.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(be){ht(I,I.return,be)}}}else if(n.tag===6){if(i===null){I=n;try{I.stateNode.nodeValue=d?"":I.memoizedProps}catch(be){ht(I,I.return,be)}}}else if(n.tag===18){if(i===null){I=n;try{var X=I.stateNode;d?Cy(X,!0):Cy(I.stateNode,!1)}catch(be){ht(I,I.return,be)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Mc(e,i))));break;case 19:bn(n,e),_n(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Mc(e,o)));break;case 30:break;case 21:break;default:bn(n,e),_n(e)}}function _n(e){var n=e.flags;if(n&2){try{for(var i,o=e.return;o!==null;){if(Dp(o)){i=o;break}o=o.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var d=i.stateNode,f=fd(e);Dc(e,f,d);break;case 5:var b=i.stateNode;i.flags&32&&(xn(b,""),i.flags&=-33);var N=fd(e);Dc(e,N,b);break;case 3:case 4:var I=i.stateNode.containerInfo,F=fd(e);md(e,F,I);break;default:throw Error(a(161))}}catch(te){ht(e,e.return,te)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Lp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Lp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ta(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Op(e,n.alternate,n),n=n.sibling}function Rr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ca(4,n,n.return),Rr(n);break;case 1:Ms(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Cp(n,n.return,i),Rr(n);break;case 27:Yl(n.stateNode);case 26:case 5:Ms(n,n.return),Rr(n);break;case 22:n.memoizedState===null&&Rr(n);break;case 30:Rr(n);break;default:Rr(n)}e=e.sibling}}function na(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,d=e,f=n,b=f.flags;switch(f.tag){case 0:case 11:case 15:na(d,f,i),zl(4,f);break;case 1:if(na(d,f,i),o=f,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){ht(o,o.return,F)}if(o=f,d=o.updateQueue,d!==null){var N=o.stateNode;try{var I=d.shared.hiddenCallbacks;if(I!==null)for(d.shared.hiddenCallbacks=null,d=0;d<I.length;d++)yg(I[d],N)}catch(F){ht(o,o.return,F)}}i&&b&64&&Ap(f),Ul(f,f.return);break;case 27:Mp(f);case 26:case 5:na(d,f,i),i&&o===null&&b&4&&Rp(f),Ul(f,f.return);break;case 12:na(d,f,i);break;case 31:na(d,f,i),i&&b&4&&zp(d,f);break;case 13:na(d,f,i),i&&b&4&&Up(d,f);break;case 22:f.memoizedState===null&&na(d,f,i),Ul(f,f.return);break;case 30:break;default:na(d,f,i)}n=n.sibling}}function pd(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&wl(i))}function yd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&wl(e))}function us(e,n,i,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Bp(e,n,i,o),n=n.sibling}function Bp(e,n,i,o){var d=n.flags;switch(n.tag){case 0:case 11:case 15:us(e,n,i,o),d&2048&&zl(9,n);break;case 1:us(e,n,i,o);break;case 3:us(e,n,i,o),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&wl(e)));break;case 12:if(d&2048){us(e,n,i,o),e=n.stateNode;try{var f=n.memoizedProps,b=f.id,N=f.onPostCommit;typeof N=="function"&&N(b,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){ht(n,n.return,I)}}else us(e,n,i,o);break;case 31:us(e,n,i,o);break;case 13:us(e,n,i,o);break;case 23:break;case 22:f=n.stateNode,b=n.alternate,n.memoizedState!==null?f._visibility&2?us(e,n,i,o):Pl(e,n):f._visibility&2?us(e,n,i,o):(f._visibility|=2,vi(e,n,i,o,(n.subtreeFlags&10256)!==0||!1)),d&2048&&pd(b,n);break;case 24:us(e,n,i,o),d&2048&&yd(n.alternate,n);break;default:us(e,n,i,o)}}function vi(e,n,i,o,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,b=n,N=i,I=o,F=b.flags;switch(b.tag){case 0:case 11:case 15:vi(f,b,N,I,d),zl(8,b);break;case 23:break;case 22:var te=b.stateNode;b.memoizedState!==null?te._visibility&2?vi(f,b,N,I,d):Pl(f,b):(te._visibility|=2,vi(f,b,N,I,d)),d&&F&2048&&pd(b.alternate,b);break;case 24:vi(f,b,N,I,d),d&&F&2048&&yd(b.alternate,b);break;default:vi(f,b,N,I,d)}n=n.sibling}}function Pl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,o=n,d=o.flags;switch(o.tag){case 22:Pl(i,o),d&2048&&pd(o.alternate,o);break;case 24:Pl(i,o),d&2048&&yd(o.alternate,o);break;default:Pl(i,o)}n=n.sibling}}var Ll=8192;function bi(e,n,i){if(e.subtreeFlags&Ll)for(e=e.child;e!==null;)qp(e,n,i),e=e.sibling}function qp(e,n,i){switch(e.tag){case 26:bi(e,n,i),e.flags&Ll&&e.memoizedState!==null&&y1(i,cs,e.memoizedState,e.memoizedProps);break;case 5:bi(e,n,i);break;case 3:case 4:var o=cs;cs=$c(e.stateNode.containerInfo),bi(e,n,i),cs=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Ll,Ll=16777216,bi(e,n,i),Ll=o):bi(e,n,i));break;default:bi(e,n,i)}}function Hp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Bl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];Jt=o,Gp(o,e)}Hp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Fp(e),e=e.sibling}function Fp(e){switch(e.tag){case 0:case 11:case 15:Bl(e),e.flags&2048&&Ca(9,e,e.return);break;case 3:Bl(e);break;case 12:Bl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ic(e)):Bl(e);break;default:Bl(e)}}function Ic(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];Jt=o,Gp(o,e)}Hp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ca(8,n,n.return),Ic(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Ic(n));break;default:Ic(n)}e=e.sibling}}function Gp(e,n){for(;Jt!==null;){var i=Jt;switch(i.tag){case 0:case 11:case 15:Ca(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:wl(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,Jt=o;else e:for(i=e;Jt!==null;){o=Jt;var d=o.sibling,f=o.return;if(Vp(o),o===i){Jt=null;break e}if(d!==null){d.return=f,Jt=d;break e}Jt=f}}}var M_={getCacheForType:function(e){var n=an(Pt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return an(Pt).controller.signal}},I_=typeof WeakMap=="function"?WeakMap:Map,rt=0,pt=null,Ge=null,Ke=0,ut=0,In=null,Ra=!1,_i=!1,xd=!1,sa=0,St=0,Da=0,Dr=0,vd=0,On=0,Ei=0,ql=null,En=null,bd=!1,Oc=0,$p=0,Vc=1/0,kc=null,Ma=null,Qt=0,Ia=null,Ni=null,aa=0,_d=0,Ed=null,Yp=null,Hl=0,Nd=null;function Vn(){return(rt&2)!==0&&Ke!==0?Ke&-Ke:$.T!==null?Cd():zo()}function Qp(){if(On===0)if((Ke&536870912)===0||We){var e=ar;ar<<=1,(ar&3932160)===0&&(ar=262144),On=e}else On=536870912;return e=Dn.current,e!==null&&(e.flags|=32),On}function Nn(e,n,i){(e===pt&&(ut===2||ut===9)||e.cancelPendingCommit!==null)&&(wi(e,0),Oa(e,Ke,On,!1)),rr(e,i),((rt&2)===0||e!==pt)&&(e===pt&&((rt&2)===0&&(Dr|=i),St===4&&Oa(e,Ke,On,!1)),Is(e))}function Kp(e,n,i){if((rt&6)!==0)throw Error(a(327));var o=!i&&(n&127)===0&&(n&e.expiredLanes)===0||es(e,n),d=o?k_(e,n):Td(e,n,!0),f=o;do{if(d===0){_i&&!o&&Oa(e,n,0,!1);break}else{if(i=e.current.alternate,f&&!O_(i)){d=Td(e,n,!1),f=!1;continue}if(d===2){if(f=n,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;e:{var N=e;d=ql;var I=N.current.memoizedState.isDehydrated;if(I&&(wi(N,b).flags|=256),b=Td(N,b,!1),b!==2){if(xd&&!I){N.errorRecoveryDisabledLanes|=f,Dr|=f,d=4;break e}f=En,En=d,f!==null&&(En===null?En=f:En.push.apply(En,f))}d=b}if(f=!1,d!==2)continue}}if(d===1){wi(e,0),Oa(e,n,0,!0);break}e:{switch(o=e,f=d,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Oa(o,n,On,!Ra);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(d=Oc+300-Yt(),10<d)){if(Oa(o,n,On,!Ra),gs(o,0,!0)!==0)break e;aa=n,o.timeoutHandle=jy(Xp.bind(null,o,i,En,kc,bd,n,On,Dr,Ei,Ra,f,"Throttled",-0,0),d);break e}Xp(o,i,En,kc,bd,n,On,Dr,Ei,Ra,f,null,-0,0)}}break}while(!0);Is(e)}function Xp(e,n,i,o,d,f,b,N,I,F,te,re,Y,X){if(e.timeoutHandle=-1,re=n.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},qp(n,f,re);var be=(f&62914560)===f?Oc-Yt():(f&4194048)===f?$p-Yt():0;if(be=x1(re,be),be!==null){aa=f,e.cancelPendingCommit=be(ay.bind(null,e,n,f,i,o,d,b,N,I,te,re,null,Y,X)),Oa(e,f,b,!F);return}}ay(e,n,f,i,o,d,b,N,I)}function O_(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var d=i[o],f=d.getSnapshot;d=d.value;try{if(!Cn(f(),d))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Oa(e,n,i,o){n&=~vd,n&=~Dr,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var d=n;0<d;){var f=31-Rt(d),b=1<<f;o[f]=-1,d&=~b}i!==0&&ir(e,i,n)}function zc(){return(rt&6)===0?(Fl(0),!1):!0}function wd(){if(Ge!==null){if(ut===0)var e=Ge.return;else e=Ge,Ys=Er=null,Lh(e),mi=null,jl=0,e=Ge;for(;e!==null;)Sp(e.alternate,e),e=e.return;Ge=null}}function wi(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,e1(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),aa=0,wd(),pt=e,Ge=i=Gs(e.current,null),Ke=n,ut=0,In=null,Ra=!1,_i=es(e,n),xd=!1,Ei=On=vd=Dr=Da=St=0,En=ql=null,bd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var d=31-Rt(o),f=1<<d;n|=e[d],o&=~f}return sa=n,ac(),i}function Zp(e,n){Be=null,$.H=Ol,n===fi||n===dc?(n=fg(),ut=3):n===Ah?(n=fg(),ut=4):ut=n===nd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,In=n,Ge===null&&(St=1,jc(e,Gn(n,e.current)))}function Jp(){var e=Dn.current;return e===null?!0:(Ke&4194048)===Ke?Kn===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?e===Kn:!1}function Wp(){var e=$.H;return $.H=Ol,e===null?Ol:e}function ey(){var e=$.A;return $.A=M_,e}function Uc(){St=4,Ra||(Ke&4194048)!==Ke&&Dn.current!==null||(_i=!0),(Da&134217727)===0&&(Dr&134217727)===0||pt===null||Oa(pt,Ke,On,!1)}function Td(e,n,i){var o=rt;rt|=2;var d=Wp(),f=ey();(pt!==e||Ke!==n)&&(kc=null,wi(e,n)),n=!1;var b=St;e:do try{if(ut!==0&&Ge!==null){var N=Ge,I=In;switch(ut){case 8:wd(),b=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(n=!0);var F=ut;if(ut=0,In=null,Ti(e,N,I,F),i&&_i){b=0;break e}break;default:F=ut,ut=0,In=null,Ti(e,N,I,F)}}V_(),b=St;break}catch(te){Zp(e,te)}while(!0);return n&&e.shellSuspendCounter++,Ys=Er=null,rt=o,$.H=d,$.A=f,Ge===null&&(pt=null,Ke=0,ac()),b}function V_(){for(;Ge!==null;)ty(Ge)}function k_(e,n){var i=rt;rt|=2;var o=Wp(),d=ey();pt!==e||Ke!==n?(kc=null,Vc=Yt()+500,wi(e,n)):_i=es(e,n);e:do try{if(ut!==0&&Ge!==null){n=Ge;var f=In;t:switch(ut){case 1:ut=0,In=null,Ti(e,n,f,1);break;case 2:case 9:if(hg(f)){ut=0,In=null,ny(n);break}n=function(){ut!==2&&ut!==9||pt!==e||(ut=7),Is(e)},f.then(n,n);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:hg(f)?(ut=0,In=null,ny(n)):(ut=0,In=null,Ti(e,n,f,7));break;case 5:var b=null;switch(Ge.tag){case 26:b=Ge.memoizedState;case 5:case 27:var N=Ge;if(b?By(b):N.stateNode.complete){ut=0,In=null;var I=N.sibling;if(I!==null)Ge=I;else{var F=N.return;F!==null?(Ge=F,Pc(F)):Ge=null}break t}}ut=0,In=null,Ti(e,n,f,5);break;case 6:ut=0,In=null,Ti(e,n,f,6);break;case 8:wd(),St=6;break e;default:throw Error(a(462))}}z_();break}catch(te){Zp(e,te)}while(!0);return Ys=Er=null,$.H=o,$.A=d,rt=i,Ge!==null?0:(pt=null,Ke=0,ac(),St)}function z_(){for(;Ge!==null&&!Me();)ty(Ge)}function ty(e){var n=Tp(e.alternate,e,sa);e.memoizedProps=e.pendingProps,n===null?Pc(e):Ge=n}function ny(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=vp(i,n,n.pendingProps,n.type,void 0,Ke);break;case 11:n=vp(i,n,n.pendingProps,n.type.render,n.ref,Ke);break;case 5:Lh(n);default:Sp(i,n),n=Ge=eg(n,sa),n=Tp(i,n,sa)}e.memoizedProps=e.pendingProps,n===null?Pc(e):Ge=n}function Ti(e,n,i,o){Ys=Er=null,Lh(n),mi=null,jl=0;var d=n.return;try{if(T_(e,d,n,i,Ke)){St=1,jc(e,Gn(i,e.current)),Ge=null;return}}catch(f){if(d!==null)throw Ge=d,f;St=1,jc(e,Gn(i,e.current)),Ge=null;return}n.flags&32768?(We||o===1?e=!0:_i||(Ke&536870912)!==0?e=!1:(Ra=e=!0,(o===2||o===9||o===3||o===6)&&(o=Dn.current,o!==null&&o.tag===13&&(o.flags|=16384))),sy(n,e)):Pc(n)}function Pc(e){var n=e;do{if((n.flags&32768)!==0){sy(n,Ra);return}e=n.return;var i=A_(n.alternate,n,sa);if(i!==null){Ge=i;return}if(n=n.sibling,n!==null){Ge=n;return}Ge=n=e}while(n!==null);St===0&&(St=5)}function sy(e,n){do{var i=C_(e.alternate,e);if(i!==null){i.flags&=32767,Ge=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Ge=e;return}Ge=e=i}while(e!==null);St=6,Ge=null}function ay(e,n,i,o,d,f,b,N,I){e.cancelPendingCommit=null;do Lc();while(Qt!==0);if((rt&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=fh,ah(e,i,f,b,N,I),e===pt&&(Ge=pt=null,Ke=0),Ni=n,Ia=e,aa=i,_d=f,Ed=d,Yp=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,B_(ua,function(){return cy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=$.T,$.T=null,d=Q.p,Q.p=2,b=rt,rt|=4;try{R_(e,n,i)}finally{rt=b,Q.p=d,$.T=o}}Qt=1,ry(),iy(),ly()}}function ry(){if(Qt===1){Qt=0;var e=Ia,n=Ni,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=$.T,$.T=null;var o=Q.p;Q.p=2;var d=rt;rt|=4;try{Pp(n,e);var f=zd,b=Gm(e.containerInfo),N=f.focusedElem,I=f.selectionRange;if(b!==N&&N&&N.ownerDocument&&Fm(N.ownerDocument.documentElement,N)){if(I!==null&&oh(N)){var F=I.start,te=I.end;if(te===void 0&&(te=F),"selectionStart"in N)N.selectionStart=F,N.selectionEnd=Math.min(te,N.value.length);else{var re=N.ownerDocument||document,Y=re&&re.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),be=N.textContent.length,Oe=Math.min(I.start,be),gt=I.end===void 0?Oe:Math.min(I.end,be);!X.extend&&Oe>gt&&(b=gt,gt=Oe,Oe=b);var B=Hm(N,Oe),U=Hm(N,gt);if(B&&U&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==U.node||X.focusOffset!==U.offset)){var H=re.createRange();H.setStart(B.node,B.offset),X.removeAllRanges(),Oe>gt?(X.addRange(H),X.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),X.addRange(H))}}}}for(re=[],X=N;X=X.parentNode;)X.nodeType===1&&re.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<re.length;N++){var ne=re[N];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Jc=!!kd,zd=kd=null}finally{rt=d,Q.p=o,$.T=i}}e.current=n,Qt=2}}function iy(){if(Qt===2){Qt=0;var e=Ia,n=Ni,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=$.T,$.T=null;var o=Q.p;Q.p=2;var d=rt;rt|=4;try{Op(e,n.alternate,n)}finally{rt=d,Q.p=o,$.T=i}}Qt=3}}function ly(){if(Qt===4||Qt===3){Qt=0,Qe();var e=Ia,n=Ni,i=aa,o=Yp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Qt=5:(Qt=0,Ni=Ia=null,oy(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Ma=null),Bs(i),n=n.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Wn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=$.T,d=Q.p,Q.p=2,$.T=null;try{for(var f=e.onRecoverableError,b=0;b<o.length;b++){var N=o[b];f(N.value,{componentStack:N.stack})}}finally{$.T=n,Q.p=d}}(aa&3)!==0&&Lc(),Is(e),d=e.pendingLanes,(i&261930)!==0&&(d&42)!==0?e===Nd?Hl++:(Hl=0,Nd=e):Hl=0,Fl(0)}}function oy(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,wl(n)))}function Lc(){return ry(),iy(),ly(),cy()}function cy(){if(Qt!==5)return!1;var e=Ia,n=_d;_d=0;var i=Bs(aa),o=$.T,d=Q.p;try{Q.p=32>i?32:i,$.T=null,i=Ed,Ed=null;var f=Ia,b=aa;if(Qt=0,Ni=Ia=null,aa=0,(rt&6)!==0)throw Error(a(331));var N=rt;if(rt|=4,Fp(f.current),Bp(f,f.current,b,i),rt=N,Fl(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Wn,f)}catch{}return!0}finally{Q.p=d,$.T=o,oy(e,n)}}function uy(e,n,i){n=Gn(i,n),n=td(e.stateNode,n,2),e=ja(e,n,2),e!==null&&(rr(e,2),Is(e))}function ht(e,n,i){if(e.tag===3)uy(e,e,i);else for(;n!==null;){if(n.tag===3){uy(n,e,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ma===null||!Ma.has(o))){e=Gn(i,e),i=hp(2),o=ja(n,i,2),o!==null&&(dp(i,o,n,e),rr(o,2),Is(o));break}}n=n.return}}function jd(e,n,i){var o=e.pingCache;if(o===null){o=e.pingCache=new I_;var d=new Set;o.set(n,d)}else d=o.get(n),d===void 0&&(d=new Set,o.set(n,d));d.has(i)||(xd=!0,d.add(i),e=U_.bind(null,e,n,i),n.then(e,e))}function U_(e,n,i){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,pt===e&&(Ke&i)===i&&(St===4||St===3&&(Ke&62914560)===Ke&&300>Yt()-Oc?(rt&2)===0&&wi(e,0):vd|=i,Ei===Ke&&(Ei=0)),Is(e)}function hy(e,n){n===0&&(n=ko()),e=vr(e,n),e!==null&&(rr(e,n),Is(e))}function P_(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),hy(e,i)}function L_(e,n){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),hy(e,i)}function B_(e,n){return C(e,n)}var Bc=null,ji=null,Sd=!1,qc=!1,Ad=!1,Va=0;function Is(e){e!==ji&&e.next===null&&(ji===null?Bc=ji=e:ji=ji.next=e),qc=!0,Sd||(Sd=!0,H_())}function Fl(e,n){if(!Ad&&qc){Ad=!0;do for(var i=!1,o=Bc;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var f=0;else{var b=o.suspendedLanes,N=o.pingedLanes;f=(1<<31-Rt(42|e)+1)-1,f&=d&~(b&~N),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,gy(o,f))}else f=Ke,f=gs(o,o===pt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||es(o,f)||(i=!0,gy(o,f));o=o.next}while(i);Ad=!1}}function q_(){dy()}function dy(){qc=Sd=!1;var e=0;Va!==0&&W_()&&(e=Va);for(var n=Yt(),i=null,o=Bc;o!==null;){var d=o.next,f=fy(o,n);f===0?(o.next=null,i===null?Bc=d:i.next=d,d===null&&(ji=i)):(i=o,(e!==0||(f&3)!==0)&&(qc=!0)),o=d}Qt!==0&&Qt!==5||Fl(e),Va!==0&&(Va=0)}function fy(e,n){for(var i=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-Rt(f),N=1<<b,I=d[b];I===-1?((N&i)===0||(N&o)!==0)&&(d[b]=sh(N,n)):I<=n&&(e.expiredLanes|=N),f&=~N}if(n=pt,i=Ke,i=gs(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===n&&(ut===2||ut===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&de(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||es(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(o!==null&&de(o),Bs(i)){case 2:case 8:i=el;break;case 32:i=ua;break;case 268435456:i=Do;break;default:i=ua}return o=my.bind(null,e),i=C(i,o),e.callbackPriority=n,e.callbackNode=i,n}return o!==null&&o!==null&&de(o),e.callbackPriority=2,e.callbackNode=null,2}function my(e,n){if(Qt!==0&&Qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Lc()&&e.callbackNode!==i)return null;var o=Ke;return o=gs(e,e===pt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Kp(e,o,n),fy(e,Yt()),e.callbackNode!=null&&e.callbackNode===i?my.bind(null,e):null)}function gy(e,n){if(Lc())return null;Kp(e,n,!0)}function H_(){t1(function(){(rt&6)!==0?C(Wi,q_):dy()})}function Cd(){if(Va===0){var e=hi;e===0&&(e=fs,fs<<=1,(fs&261888)===0&&(fs=256)),Va=e}return Va}function py(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Xr(""+e)}function yy(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function F_(e,n,i,o,d){if(n==="submit"&&i&&i.stateNode===d){var f=py((d[Xt]||null).action),b=o.submitter;b&&(n=(n=b[Xt]||null)?py(n.formAction):b.getAttribute("formAction"),n!==null&&(f=n,b=null));var N=new js("action","action",null,o,d);e.push({event:N,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Va!==0){var I=b?yy(d,b):new FormData(d);Kh(i,{pending:!0,data:I,method:d.method,action:f},null,I)}}else typeof f=="function"&&(N.preventDefault(),I=b?yy(d,b):new FormData(d),Kh(i,{pending:!0,data:I,method:d.method,action:f},f,I))},currentTarget:d}]})}}for(var Rd=0;Rd<dh.length;Rd++){var Dd=dh[Rd],G_=Dd.toLowerCase(),$_=Dd[0].toUpperCase()+Dd.slice(1);os(G_,"on"+$_)}os(Qm,"onAnimationEnd"),os(Km,"onAnimationIteration"),os(Xm,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(o_,"onTransitionRun"),os(c_,"onTransitionStart"),os(u_,"onTransitionCancel"),os(Zm,"onTransitionEnd"),Es("onMouseEnter",["mouseout","mouseover"]),Es("onMouseLeave",["mouseout","mouseover"]),Es("onPointerEnter",["pointerout","pointerover"]),Es("onPointerLeave",["pointerout","pointerover"]),_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function xy(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],d=o.event;o=o.listeners;e:{var f=void 0;if(n)for(var b=o.length-1;0<=b;b--){var N=o[b],I=N.instance,F=N.currentTarget;if(N=N.listener,I!==f&&d.isPropagationStopped())break e;f=N,d.currentTarget=F;try{f(d)}catch(te){sc(te)}d.currentTarget=null,f=I}else for(b=0;b<o.length;b++){if(N=o[b],I=N.instance,F=N.currentTarget,N=N.listener,I!==f&&d.isPropagationStopped())break e;f=N,d.currentTarget=F;try{f(d)}catch(te){sc(te)}d.currentTarget=null,f=I}}}}function $e(e,n){var i=n[Gr];i===void 0&&(i=n[Gr]=new Set);var o=e+"__bubble";i.has(o)||(vy(n,e,2,!1),i.add(o))}function Md(e,n,i){var o=0;n&&(o|=4),vy(i,e,o,n)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function Id(e){if(!e[Hc]){e[Hc]=!0,sl.forEach(function(i){i!=="selectionchange"&&(Y_.has(i)||Md(i,!1,e),Md(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Hc]||(n[Hc]=!0,Md("selectionchange",!1,n))}}function vy(e,n,i,o){switch(Qy(n)){case 2:var d=_1;break;case 8:d=E1;break;default:d=Qd}i=d.bind(null,n,i,e),d=void 0,!hr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(n,i,{capture:!0,passive:d}):e.addEventListener(n,i,!0):d!==void 0?e.addEventListener(n,i,{passive:d}):e.addEventListener(n,i,!1)}function Od(e,n,i,o,d){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var N=o.stateNode.containerInfo;if(N===d)break;if(b===4)for(b=o.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;N!==null;){if(b=vs(N),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){o=f=b;continue e}N=N.parentNode}}o=o.return}pa(function(){var F=f,te=Bn(i),re=[];e:{var Y=Jm.get(e);if(Y!==void 0){var X=js,be=e;switch(e){case"keypress":if(fr(i)===0)break e;case"keydown":case"keyup":X=ec;break;case"focusin":be="focus",X=gr;break;case"focusout":be="blur",X=gr;break;case"beforeblur":case"afterblur":X=gr;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Go;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=x;break;case Qm:case Km:case Xm:X=Yo;break;case Zm:X=T;break;case"scroll":case"scrollend":X=gl;break;case"wheel":X=K;break;case"copy":case"cut":case"paste":X=Qo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Fs;break;case"toggle":case"beforetoggle":X=Le}var Oe=(n&4)!==0,gt=!Oe&&(e==="scroll"||e==="scrollend"),B=Oe?Y!==null?Y+"Capture":null:Y;Oe=[];for(var U=F,H;U!==null;){var ne=U;if(H=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||H===null||B===null||(ne=as(U,B),ne!=null&&Oe.push($l(U,ne,H))),gt)break;U=U.return}0<Oe.length&&(Y=new X(Y,be,null,i,te),re.push({event:Y,listeners:Oe}))}}if((n&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",Y&&i!==dl&&(be=i.relatedTarget||i.fromElement)&&(vs(be)||be[ys]))break e;if((X||Y)&&(Y=te.window===te?te:(Y=te.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(be=i.relatedTarget||i.toElement,X=F,be=be?vs(be):null,be!==null&&(gt=u(be),Oe=be.tag,be!==gt||Oe!==5&&Oe!==27&&Oe!==6)&&(be=null)):(X=null,be=F),X!==be)){if(Oe=pl,ne="onMouseLeave",B="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(Oe=Fs,ne="onPointerLeave",B="onPointerEnter",U="pointer"),gt=X==null?Y:Sn(X),H=be==null?Y:Sn(be),Y=new Oe(ne,U+"leave",X,i,te),Y.target=gt,Y.relatedTarget=H,ne=null,vs(te)===F&&(Oe=new Oe(B,U+"enter",be,i,te),Oe.target=H,Oe.relatedTarget=gt,ne=Oe),gt=ne,X&&be)t:{for(Oe=Q_,B=X,U=be,H=0,ne=B;ne;ne=Oe(ne))H++;ne=0;for(var Ce=U;Ce;Ce=Oe(Ce))ne++;for(;0<H-ne;)B=Oe(B),H--;for(;0<ne-H;)U=Oe(U),ne--;for(;H--;){if(B===U||U!==null&&B===U.alternate){Oe=B;break t}B=Oe(B),U=Oe(U)}Oe=null}else Oe=null;X!==null&&by(re,Y,X,Oe,!1),be!==null&&gt!==null&&by(re,gt,be,Oe,!0)}}e:{if(Y=F?Sn(F):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var nt=zm;else if(Vm(Y))if(Um)nt=r_;else{nt=s_;var Ne=n_}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?F&&Kr(F.elementType)&&(nt=zm):nt=a_;if(nt&&(nt=nt(e,F))){km(re,nt,i,te);break e}Ne&&Ne(e,Y,F),e==="focusout"&&F&&Y.type==="number"&&F.memoizedProps.value!=null&&cl(Y,"number",Y.value)}switch(Ne=F?Sn(F):window,e){case"focusin":(Vm(Ne)||Ne.contentEditable==="true")&&(si=Ne,ch=F,_l=null);break;case"focusout":_l=ch=si=null;break;case"mousedown":uh=!0;break;case"contextmenu":case"mouseup":case"dragend":uh=!1,$m(re,i,te);break;case"selectionchange":if(l_)break;case"keydown":case"keyup":$m(re,i,te)}var He;if(at)e:{switch(e){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else ni?pr(e,i)&&(Xe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Xe="onCompositionStart");Xe&&(Cs&&i.locale!=="ko"&&(ni||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&ni&&(He=ml()):(Ts=te,fl="value"in Ts?Ts.value:Ts.textContent,ni=!0)),Ne=Fc(F,Xe),0<Ne.length&&(Xe=new As(Xe,e,null,i,te),re.push({event:Xe,listeners:Ne}),He?Xe.data=He:(He=ti(i),He!==null&&(Xe.data=He)))),(He=Hn?Jb(e,i):Wb(e,i))&&(Xe=Fc(F,"onBeforeInput"),0<Xe.length&&(Ne=new As("onBeforeInput","beforeinput",null,i,te),re.push({event:Ne,listeners:Xe}),Ne.data=He)),F_(re,e,F,i,te)}xy(re,n)})}function $l(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Fc(e,n){for(var i=n+"Capture",o=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=as(e,i),d!=null&&o.unshift($l(e,d,f)),d=as(e,n),d!=null&&o.push($l(e,d,f))),e.tag===3)return o;e=e.return}return[]}function Q_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function by(e,n,i,o,d){for(var f=n._reactName,b=[];i!==null&&i!==o;){var N=i,I=N.alternate,F=N.stateNode;if(N=N.tag,I!==null&&I===o)break;N!==5&&N!==26&&N!==27||F===null||(I=F,d?(F=as(i,f),F!=null&&b.unshift($l(i,F,I))):d||(F=as(i,f),F!=null&&b.push($l(i,F,I)))),i=i.return}b.length!==0&&e.push({event:n,listeners:b})}var K_=/\r\n?/g,X_=/\u0000|\uFFFD/g;function _y(e){return(typeof e=="string"?e:""+e).replace(K_,`
`).replace(X_,"")}function Ey(e,n){return n=_y(n),_y(e)===n}function mt(e,n,i,o,d,f){switch(i){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||xn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&xn(e,""+o);break;case"className":An(e,"class",o);break;case"tabIndex":An(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":An(e,i,o);break;case"style":hl(e,o,f);break;case"data":if(n!=="object"){An(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Xr(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&mt(e,n,"name",d.name,d,null),mt(e,n,"formEncType",d.formEncType,d,null),mt(e,n,"formMethod",d.formMethod,d,null),mt(e,n,"formTarget",d.formTarget,d,null)):(mt(e,n,"encType",d.encType,d,null),mt(e,n,"method",d.method,d,null),mt(e,n,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Xr(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=ss);break;case"onScroll":o!=null&&$e("scroll",e);break;case"onScrollEnd":o!=null&&$e("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(i=o.__html,i!=null){if(d.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Xr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":$e("beforetoggle",e),$e("toggle",e),Yr(e,"popover",o);break;case"xlinkActuate":Ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ut(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ut(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ut(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ut(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Yr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Fo.get(i)||i,Yr(e,i,o))}}function Vd(e,n,i,o,d,f){switch(i){case"style":hl(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(i=o.__html,i!=null){if(d.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"children":typeof o=="string"?xn(e,o):(typeof o=="number"||typeof o=="bigint")&&xn(e,""+o);break;case"onScroll":o!=null&&$e("scroll",e);break;case"onScrollEnd":o!=null&&$e("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!al.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),n=i.slice(2,d?i.length-7:void 0),f=e[Xt]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(n,f,d),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,o,d);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):Yr(e,i,o)}}}function ln(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",e),$e("load",e);var o=!1,d=!1,f;for(f in i)if(i.hasOwnProperty(f)){var b=i[f];if(b!=null)switch(f){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:mt(e,n,f,b,i,null)}}d&&mt(e,n,"srcSet",i.srcSet,i,null),o&&mt(e,n,"src",i.src,i,null);return;case"input":$e("invalid",e);var N=f=b=d=null,I=null,F=null;for(o in i)if(i.hasOwnProperty(o)){var te=i[o];if(te!=null)switch(o){case"name":d=te;break;case"type":b=te;break;case"checked":I=te;break;case"defaultChecked":F=te;break;case"value":f=te;break;case"defaultValue":N=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,n));break;default:mt(e,n,o,te,i,null)}}Bo(e,f,N,I,F,b,d,!1);return;case"select":$e("invalid",e),o=b=f=null;for(d in i)if(i.hasOwnProperty(d)&&(N=i[d],N!=null))switch(d){case"value":f=N;break;case"defaultValue":b=N;break;case"multiple":o=N;default:mt(e,n,d,N,i,null)}n=f,i=b,e.multiple=!!o,n!=null?da(e,!!o,n,!1):i!=null&&da(e,!!o,i,!0);return;case"textarea":$e("invalid",e),f=d=o=null;for(b in i)if(i.hasOwnProperty(b)&&(N=i[b],N!=null))switch(b){case"value":o=N;break;case"defaultValue":d=N;break;case"children":f=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(91));break;default:mt(e,n,b,N,i,null)}fa(e,o,d,f);return;case"option":for(I in i)if(i.hasOwnProperty(I)&&(o=i[I],o!=null))switch(I){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:mt(e,n,I,o,i,null)}return;case"dialog":$e("beforetoggle",e),$e("toggle",e),$e("cancel",e),$e("close",e);break;case"iframe":case"object":$e("load",e);break;case"video":case"audio":for(o=0;o<Gl.length;o++)$e(Gl[o],e);break;case"image":$e("error",e),$e("load",e);break;case"details":$e("toggle",e);break;case"embed":case"source":case"link":$e("error",e),$e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in i)if(i.hasOwnProperty(F)&&(o=i[F],o!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:mt(e,n,F,o,i,null)}return;default:if(Kr(n)){for(te in i)i.hasOwnProperty(te)&&(o=i[te],o!==void 0&&Vd(e,n,te,o,i,void 0));return}}for(N in i)i.hasOwnProperty(N)&&(o=i[N],o!=null&&mt(e,n,N,o,i,null))}function Z_(e,n,i,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,b=null,N=null,I=null,F=null,te=null;for(X in i){var re=i[X];if(i.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":I=re;default:o.hasOwnProperty(X)||mt(e,n,X,null,o,re)}}for(var Y in o){var X=o[Y];if(re=i[Y],o.hasOwnProperty(Y)&&(X!=null||re!=null))switch(Y){case"type":f=X;break;case"name":d=X;break;case"checked":F=X;break;case"defaultChecked":te=X;break;case"value":b=X;break;case"defaultValue":N=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,n));break;default:X!==re&&mt(e,n,Y,X,o,re)}}Qr(e,b,N,I,F,te,f,d);return;case"select":X=b=N=Y=null;for(f in i)if(I=i[f],i.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":X=I;default:o.hasOwnProperty(f)||mt(e,n,f,null,o,I)}for(d in o)if(f=o[d],I=i[d],o.hasOwnProperty(d)&&(f!=null||I!=null))switch(d){case"value":Y=f;break;case"defaultValue":N=f;break;case"multiple":b=f;default:f!==I&&mt(e,n,d,f,o,I)}n=N,i=b,o=X,Y!=null?da(e,!!i,Y,!1):!!o!=!!i&&(n!=null?da(e,!!i,n,!0):da(e,!!i,i?[]:"",!1));return;case"textarea":X=Y=null;for(N in i)if(d=i[N],i.hasOwnProperty(N)&&d!=null&&!o.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:mt(e,n,N,null,o,d)}for(b in o)if(d=o[b],f=i[b],o.hasOwnProperty(b)&&(d!=null||f!=null))switch(b){case"value":Y=d;break;case"defaultValue":X=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(a(91));break;default:d!==f&&mt(e,n,b,d,o,f)}qo(e,Y,X);return;case"option":for(var be in i)if(Y=i[be],i.hasOwnProperty(be)&&Y!=null&&!o.hasOwnProperty(be))switch(be){case"selected":e.selected=!1;break;default:mt(e,n,be,null,o,Y)}for(I in o)if(Y=o[I],X=i[I],o.hasOwnProperty(I)&&Y!==X&&(Y!=null||X!=null))switch(I){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:mt(e,n,I,Y,o,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in i)Y=i[Oe],i.hasOwnProperty(Oe)&&Y!=null&&!o.hasOwnProperty(Oe)&&mt(e,n,Oe,null,o,Y);for(F in o)if(Y=o[F],X=i[F],o.hasOwnProperty(F)&&Y!==X&&(Y!=null||X!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,n));break;default:mt(e,n,F,Y,o,X)}return;default:if(Kr(n)){for(var gt in i)Y=i[gt],i.hasOwnProperty(gt)&&Y!==void 0&&!o.hasOwnProperty(gt)&&Vd(e,n,gt,void 0,o,Y);for(te in o)Y=o[te],X=i[te],!o.hasOwnProperty(te)||Y===X||Y===void 0&&X===void 0||Vd(e,n,te,Y,o,X);return}}for(var B in i)Y=i[B],i.hasOwnProperty(B)&&Y!=null&&!o.hasOwnProperty(B)&&mt(e,n,B,null,o,Y);for(re in o)Y=o[re],X=i[re],!o.hasOwnProperty(re)||Y===X||Y==null&&X==null||mt(e,n,re,Y,o,X)}function Ny(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var d=i[o],f=d.transferSize,b=d.initiatorType,N=d.duration;if(f&&N&&Ny(b)){for(b=0,N=d.responseEnd,o+=1;o<i.length;o++){var I=i[o],F=I.startTime;if(F>N)break;var te=I.transferSize,re=I.initiatorType;te&&Ny(re)&&(I=I.responseEnd,b+=te*(I<N?1:(N-F)/(I-F)))}if(--o,n+=8*(f+b)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var kd=null,zd=null;function Gc(e){return e.nodeType===9?e:e.ownerDocument}function wy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ty(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ud(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Pd=null;function W_(){var e=window.event;return e&&e.type==="popstate"?e===Pd?!1:(Pd=e,!0):(Pd=null,!1)}var jy=typeof setTimeout=="function"?setTimeout:void 0,e1=typeof clearTimeout=="function"?clearTimeout:void 0,Sy=typeof Promise=="function"?Promise:void 0,t1=typeof queueMicrotask=="function"?queueMicrotask:typeof Sy<"u"?function(e){return Sy.resolve(null).then(e).catch(n1)}:jy;function n1(e){setTimeout(function(){throw e})}function ka(e){return e==="head"}function Ay(e,n){var i=n,o=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(d),Ri(n);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")Yl(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Yl(i);for(var f=i.firstChild;f;){var b=f.nextSibling,N=f.nodeName;f[xs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=b}}else i==="body"&&Yl(e.ownerDocument.body);i=d}while(i);Ri(n)}function Cy(e,n){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Ld(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Ld(i),$r(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function s1(e,n,i,o){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[xs])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Xn(e.nextSibling),e===null)break}return null}function a1(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Xn(e.nextSibling),e===null))return null;return e}function Ry(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Xn(e.nextSibling),e===null))return null;return e}function Bd(e){return e.data==="$?"||e.data==="$~"}function qd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function r1(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var o=function(){n(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Xn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Hd=null;function Dy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return Xn(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function My(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function Iy(e,n,i){switch(n=Gc(i),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Yl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);$r(e)}var Zn=new Map,Oy=new Set;function $c(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ra=Q.d;Q.d={f:i1,r:l1,D:o1,C:c1,L:u1,m:h1,X:f1,S:d1,M:m1};function i1(){var e=ra.f(),n=zc();return e||n}function l1(e){var n=Ln(e);n!==null&&n.tag===5&&n.type==="form"?Zg(n):ra.r(e)}var Si=typeof document>"u"?null:document;function Vy(e,n,i){var o=Si;if(o&&typeof n=="string"&&n){var d=yn(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),Oy.has(d)||(Oy.add(d),e={rel:e,crossOrigin:i,href:n},o.querySelector(d)===null&&(n=o.createElement("link"),ln(n,"link",e),zt(n),o.head.appendChild(n)))}}function o1(e){ra.D(e),Vy("dns-prefetch",e,null)}function c1(e,n){ra.C(e,n),Vy("preconnect",e,n)}function u1(e,n,i){ra.L(e,n,i);var o=Si;if(o&&e&&n){var d='link[rel="preload"][as="'+yn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+yn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+yn(i.imageSizes)+'"]')):d+='[href="'+yn(e)+'"]';var f=d;switch(n){case"style":f=Ai(e);break;case"script":f=Ci(e)}Zn.has(f)||(e=E({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Zn.set(f,e),o.querySelector(d)!==null||n==="style"&&o.querySelector(Ql(f))||n==="script"&&o.querySelector(Kl(f))||(n=o.createElement("link"),ln(n,"link",e),zt(n),o.head.appendChild(n)))}}function h1(e,n){ra.m(e,n);var i=Si;if(i&&e){var o=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+yn(o)+'"][href="'+yn(e)+'"]',f=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ci(e)}if(!Zn.has(f)&&(e=E({rel:"modulepreload",href:e},n),Zn.set(f,e),i.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Kl(f)))return}o=i.createElement("link"),ln(o,"link",e),zt(o),i.head.appendChild(o)}}}function d1(e,n,i){ra.S(e,n,i);var o=Si;if(o&&e){var d=bs(o).hoistableStyles,f=Ai(e);n=n||"default";var b=d.get(f);if(!b){var N={loading:0,preload:null};if(b=o.querySelector(Ql(f)))N.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Zn.get(f))&&Fd(e,i);var I=b=o.createElement("link");zt(I),ln(I,"link",e),I._p=new Promise(function(F,te){I.onload=F,I.onerror=te}),I.addEventListener("load",function(){N.loading|=1}),I.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Yc(b,n,o)}b={type:"stylesheet",instance:b,count:1,state:N},d.set(f,b)}}}function f1(e,n){ra.X(e,n);var i=Si;if(i&&e){var o=bs(i).hoistableScripts,d=Ci(e),f=o.get(d);f||(f=i.querySelector(Kl(d)),f||(e=E({src:e,async:!0},n),(n=Zn.get(d))&&Gd(e,n),f=i.createElement("script"),zt(f),ln(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function m1(e,n){ra.M(e,n);var i=Si;if(i&&e){var o=bs(i).hoistableScripts,d=Ci(e),f=o.get(d);f||(f=i.querySelector(Kl(d)),f||(e=E({src:e,async:!0,type:"module"},n),(n=Zn.get(d))&&Gd(e,n),f=i.createElement("script"),zt(f),ln(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function ky(e,n,i,o){var d=(d=Se.current)?$c(d):null;if(!d)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Ai(i.href),i=bs(d).hoistableStyles,o=i.get(n),o||(o={type:"style",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ai(i.href);var f=bs(d).hoistableStyles,b=f.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=d.querySelector(Ql(e)))&&!f._p&&(b.instance=f,b.state.loading=5),Zn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Zn.set(e,i),f||g1(d,e,i,b.state))),n&&o===null)throw Error(a(528,""));return b}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ci(i),i=bs(d).hoistableScripts,o=i.get(n),o||(o={type:"script",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ai(e){return'href="'+yn(e)+'"'}function Ql(e){return'link[rel="stylesheet"]['+e+"]"}function zy(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function g1(e,n,i,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),ln(n,"link",i),zt(n),e.head.appendChild(n))}function Ci(e){return'[src="'+yn(e)+'"]'}function Kl(e){return"script[async]"+e}function Uy(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+yn(i.href)+'"]');if(o)return n.instance=o,zt(o),o;var d=E({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),zt(o),ln(o,"style",d),Yc(o,i.precedence,e),n.instance=o;case"stylesheet":d=Ai(i.href);var f=e.querySelector(Ql(d));if(f)return n.state.loading|=4,n.instance=f,zt(f),f;o=zy(i),(d=Zn.get(d))&&Fd(o,d),f=(e.ownerDocument||e).createElement("link"),zt(f);var b=f;return b._p=new Promise(function(N,I){b.onload=N,b.onerror=I}),ln(f,"link",o),n.state.loading|=4,Yc(f,i.precedence,e),n.instance=f;case"script":return f=Ci(i.src),(d=e.querySelector(Kl(f)))?(n.instance=d,zt(d),d):(o=i,(d=Zn.get(f))&&(o=E({},i),Gd(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),zt(d),ln(d,"link",o),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Yc(o,i.precedence,e));return n.instance}function Yc(e,n,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,f=d,b=0;b<o.length;b++){var N=o[b];if(N.dataset.precedence===n)f=N;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Fd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Gd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Qc=null;function Py(e,n,i){if(Qc===null){var o=new Map,d=Qc=new Map;d.set(i,o)}else d=Qc,o=d.get(i),o||(o=new Map,d.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var f=i[d];if(!(f[xs]||f[kt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(n)||"";b=e+b;var N=o.get(b);N?N.push(f):o.set(b,[f])}}return o}function Ly(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function p1(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function By(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function y1(e,n,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=Ai(o.href),f=n.querySelector(Ql(d));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Kc.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=f,zt(f);return}f=n.ownerDocument||n,o=zy(o),(d=Zn.get(d))&&Fd(o,d),f=f.createElement("link"),zt(f);var b=f;b._p=new Promise(function(N,I){b.onload=N,b.onerror=I}),ln(f,"link",o),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Kc.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var $d=0;function x1(e,n){return e.stylesheets&&e.count===0&&Zc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Zc(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&$d===0&&($d=62500*J_());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Zc(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>$d?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xc=null;function Zc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xc=new Map,n.forEach(v1,e),Xc=null,Kc.call(e))}function v1(e,n){if(!(n.state.loading&4)){var i=Xc.get(e);if(i)var o=i.get(null);else{i=new Map,Xc.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var b=d[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),o=b)}o&&i.set(null,o)}d=n.instance,b=d.getAttribute("data-precedence"),f=i.get(b)||o,f===o&&i.set(null,d),i.set(b,d),this.count++,o=Kc.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Xl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function b1(e,n,i,o,d,f,b,N,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ps(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ps(0),this.hiddenUpdates=ps(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function qy(e,n,i,o,d,f,b,N,I,F,te,re){return e=new b1(e,n,i,b,I,F,te,re,N),n=1,f===!0&&(n|=24),f=Rn(3,null,null,n),e.current=f,f.stateNode=e,n=Th(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:n},Ch(f),e}function Hy(e){return e?(e=ii,e):ii}function Fy(e,n,i,o,d,f){d=Hy(d),o.context===null?o.context=d:o.pendingContext=d,o=Ta(n),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=ja(e,o,n),i!==null&&(Nn(i,e,n),Al(i,e,n))}function Gy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Yd(e,n){Gy(e,n),(e=e.alternate)&&Gy(e,n)}function $y(e){if(e.tag===13||e.tag===31){var n=vr(e,67108864);n!==null&&Nn(n,e,67108864),Yd(e,67108864)}}function Yy(e){if(e.tag===13||e.tag===31){var n=Vn();n=lr(n);var i=vr(e,n);i!==null&&Nn(i,e,n),Yd(e,n)}}var Jc=!0;function _1(e,n,i,o){var d=$.T;$.T=null;var f=Q.p;try{Q.p=2,Qd(e,n,i,o)}finally{Q.p=f,$.T=d}}function E1(e,n,i,o){var d=$.T;$.T=null;var f=Q.p;try{Q.p=8,Qd(e,n,i,o)}finally{Q.p=f,$.T=d}}function Qd(e,n,i,o){if(Jc){var d=Kd(o);if(d===null)Od(e,n,o,Wc,i),Ky(e,o);else if(w1(d,e,n,i,o))o.stopPropagation();else if(Ky(e,o),n&4&&-1<N1.indexOf(e)){for(;d!==null;){var f=Ln(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=ms(f.pendingLanes);if(b!==0){var N=f;for(N.pendingLanes|=2,N.entangledLanes|=2;b;){var I=1<<31-Rt(b);N.entanglements[1]|=I,b&=~I}Is(f),(rt&6)===0&&(Vc=Yt()+500,Fl(0))}}break;case 31:case 13:N=vr(f,2),N!==null&&Nn(N,f,2),zc(),Yd(f,2)}if(f=Kd(o),f===null&&Od(e,n,o,Wc,i),f===d)break;d=f}d!==null&&o.stopPropagation()}else Od(e,n,o,null,i)}}function Kd(e){return e=Bn(e),Xd(e)}var Wc=null;function Xd(e){if(Wc=null,e=vs(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=m(n),e!==null)return e;e=null}else if(i===31){if(e=y(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Wc=e,null}function Qy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sr()){case Wi:return 2;case el:return 8;case ua:case nh:return 32;case Do:return 268435456;default:return 32}default:return 32}}var Zd=!1,za=null,Ua=null,Pa=null,Zl=new Map,Jl=new Map,La=[],N1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ky(e,n){switch(e){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":Zl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(n.pointerId)}}function Wl(e,n,i,o,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},n!==null&&(n=Ln(n),n!==null&&$y(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function w1(e,n,i,o,d){switch(n){case"focusin":return za=Wl(za,e,n,i,o,d),!0;case"dragenter":return Ua=Wl(Ua,e,n,i,o,d),!0;case"mouseover":return Pa=Wl(Pa,e,n,i,o,d),!0;case"pointerover":var f=d.pointerId;return Zl.set(f,Wl(Zl.get(f)||null,e,n,i,o,d)),!0;case"gotpointercapture":return f=d.pointerId,Jl.set(f,Wl(Jl.get(f)||null,e,n,i,o,d)),!0}return!1}function Xy(e){var n=vs(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=m(i),n!==null){e.blockedOn=n,ts(e.priority,function(){Yy(i)});return}}else if(n===31){if(n=y(i),n!==null){e.blockedOn=n,ts(e.priority,function(){Yy(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function eu(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Kd(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);dl=o,i.target.dispatchEvent(o),dl=null}else return n=Ln(i),n!==null&&$y(n),e.blockedOn=i,!1;n.shift()}return!0}function Zy(e,n,i){eu(e)&&i.delete(n)}function T1(){Zd=!1,za!==null&&eu(za)&&(za=null),Ua!==null&&eu(Ua)&&(Ua=null),Pa!==null&&eu(Pa)&&(Pa=null),Zl.forEach(Zy),Jl.forEach(Zy)}function tu(e,n){e.blockedOn===n&&(e.blockedOn=null,Zd||(Zd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,T1)))}var nu=null;function Jy(e){nu!==e&&(nu=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nu===e&&(nu=null);for(var n=0;n<e.length;n+=3){var i=e[n],o=e[n+1],d=e[n+2];if(typeof o!="function"){if(Xd(o||i)===null)continue;break}var f=Ln(i);f!==null&&(e.splice(n,3),n-=3,Kh(f,{pending:!0,data:d,method:i.method,action:o},o,d))}}))}function Ri(e){function n(I){return tu(I,e)}za!==null&&tu(za,e),Ua!==null&&tu(Ua,e),Pa!==null&&tu(Pa,e),Zl.forEach(n),Jl.forEach(n);for(var i=0;i<La.length;i++){var o=La[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<La.length&&(i=La[0],i.blockedOn===null);)Xy(i),i.blockedOn===null&&La.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var d=i[o],f=i[o+1],b=d[Xt]||null;if(typeof f=="function")b||Jy(i);else if(b){var N=null;if(f&&f.hasAttribute("formAction")){if(d=f,b=f[Xt]||null)N=b.formAction;else if(Xd(d)!==null)continue}else N=b.action;typeof N=="function"?i[o+1]=N:(i.splice(o,3),o-=3),Jy(i)}}}function Wy(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function Jd(e){this._internalRoot=e}su.prototype.render=Jd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var i=n.current,o=Vn();Fy(i,o,e,n,null,null)},su.prototype.unmount=Jd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Fy(e.current,2,null,e,null,null),zc(),n[ys]=null}};function su(e){this._internalRoot=e}su.prototype.unstable_scheduleHydration=function(e){if(e){var n=zo();e={blockedOn:null,target:e,priority:n};for(var i=0;i<La.length&&n!==0&&n<La[i].priority;i++);La.splice(i,0,e),i===0&&Xy(e)}};var ex=t.version;if(ex!=="19.2.4")throw Error(a(527,ex,"19.2.4"));Q.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=g(n),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var j1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{Wn=au.inject(j1),tn=au}catch{}}return to.createRoot=function(e,n){if(!c(e))throw Error(a(299));var i=!1,o="",d=lp,f=op,b=cp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError)),n=qy(e,1,!1,null,null,i,o,null,d,f,b,Wy),e[ys]=n.current,Id(e),new Jd(n)},to.hydrateRoot=function(e,n,i){if(!c(e))throw Error(a(299));var o=!1,d="",f=lp,b=op,N=cp,I=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(N=i.onRecoverableError),i.formState!==void 0&&(I=i.formState)),n=qy(e,1,!0,n,i??null,o,d,I,f,b,N,Wy),n.context=Hy(null),i=n.current,o=Vn(),o=lr(o),d=Ta(o),d.callback=null,ja(i,d,o),i=o,n.current.lanes=i,rr(n,i),Is(n),e[ys]=n.current,Id(e),new su(n)},to.version="19.2.4",to}var ux;function k1(){if(ux)return tf.exports;ux=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),tf.exports=V1(),tf.exports}var z1=k1();const U1=Vu(z1);var P1=Object.defineProperty,yu=Object.getOwnPropertySymbols,P0=Object.prototype.hasOwnProperty,L0=Object.prototype.propertyIsEnumerable,hx=(r,t,s)=>t in r?P1(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,bf=(r,t)=>{for(var s in t||(t={}))P0.call(t,s)&&hx(r,s,t[s]);if(yu)for(var s of yu(t))L0.call(t,s)&&hx(r,s,t[s]);return r},_f=(r,t)=>{var s={};for(var a in r)P0.call(r,a)&&t.indexOf(a)<0&&(s[a]=r[a]);if(r!=null&&yu)for(var a of yu(r))t.indexOf(a)<0&&L0.call(r,a)&&(s[a]=r[a]);return s};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Vr;(r=>{const t=class Ye{constructor(p,g,v,E){if(this.version=p,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],p<Ye.MIN_VERSION||p>Ye.MAX_VERSION)throw new RangeError("Version value out of range");if(E<-1||E>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let w=[];for(let P=0;P<this.size;P++)w.push(!1);for(let P=0;P<this.size;P++)this.modules.push(w.slice()),this.isFunction.push(w.slice());this.drawFunctionPatterns();const V=this.addEccAndInterleave(v);if(this.drawCodewords(V),E==-1){let P=1e9;for(let G=0;G<8;G++){this.applyMask(G),this.drawFormatBits(G);const L=this.getPenaltyScore();L<P&&(E=G,P=L),this.applyMask(G)}}c(0<=E&&E<=7),this.mask=E,this.applyMask(E),this.drawFormatBits(E),this.isFunction=[]}static encodeText(p,g){const v=r.QrSegment.makeSegments(p);return Ye.encodeSegments(v,g)}static encodeBinary(p,g){const v=r.QrSegment.makeBytes(p);return Ye.encodeSegments([v],g)}static encodeSegments(p,g,v=1,E=40,w=-1,V=!0){if(!(Ye.MIN_VERSION<=v&&v<=E&&E<=Ye.MAX_VERSION)||w<-1||w>7)throw new RangeError("Invalid value");let P,G;for(P=v;;P++){const Z=Ye.getNumDataCodewords(P,g)*8,ue=m.getTotalBits(p,P);if(ue<=Z){G=ue;break}if(P>=E)throw new RangeError("Data too long")}for(const Z of[Ye.Ecc.MEDIUM,Ye.Ecc.QUARTILE,Ye.Ecc.HIGH])V&&G<=Ye.getNumDataCodewords(P,Z)*8&&(g=Z);let L=[];for(const Z of p){s(Z.mode.modeBits,4,L),s(Z.numChars,Z.mode.numCharCountBits(P),L);for(const ue of Z.getData())L.push(ue)}c(L.length==G);const oe=Ye.getNumDataCodewords(P,g)*8;c(L.length<=oe),s(0,Math.min(4,oe-L.length),L),s(0,(8-L.length%8)%8,L),c(L.length%8==0);for(let Z=236;L.length<oe;Z^=253)s(Z,8,L);let ce=[];for(;ce.length*8<L.length;)ce.push(0);return L.forEach((Z,ue)=>ce[ue>>>3]|=Z<<7-(ue&7)),new Ye(P,g,ce,w)}getModule(p,g){return 0<=p&&p<this.size&&0<=g&&g<this.size&&this.modules[g][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),g=p.length;for(let v=0;v<g;v++)for(let E=0;E<g;E++)v==0&&E==0||v==0&&E==g-1||v==g-1&&E==0||this.drawAlignmentPattern(p[v],p[E]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const g=this.errorCorrectionLevel.formatBits<<3|p;let v=g;for(let w=0;w<10;w++)v=v<<1^(v>>>9)*1335;const E=(g<<10|v)^21522;c(E>>>15==0);for(let w=0;w<=5;w++)this.setFunctionModule(8,w,a(E,w));this.setFunctionModule(8,7,a(E,6)),this.setFunctionModule(8,8,a(E,7)),this.setFunctionModule(7,8,a(E,8));for(let w=9;w<15;w++)this.setFunctionModule(14-w,8,a(E,w));for(let w=0;w<8;w++)this.setFunctionModule(this.size-1-w,8,a(E,w));for(let w=8;w<15;w++)this.setFunctionModule(8,this.size-15+w,a(E,w));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let v=0;v<12;v++)p=p<<1^(p>>>11)*7973;const g=this.version<<12|p;c(g>>>18==0);for(let v=0;v<18;v++){const E=a(g,v),w=this.size-11+v%3,V=Math.floor(v/3);this.setFunctionModule(w,V,E),this.setFunctionModule(V,w,E)}}drawFinderPattern(p,g){for(let v=-4;v<=4;v++)for(let E=-4;E<=4;E++){const w=Math.max(Math.abs(E),Math.abs(v)),V=p+E,P=g+v;0<=V&&V<this.size&&0<=P&&P<this.size&&this.setFunctionModule(V,P,w!=2&&w!=4)}}drawAlignmentPattern(p,g){for(let v=-2;v<=2;v++)for(let E=-2;E<=2;E++)this.setFunctionModule(p+E,g+v,Math.max(Math.abs(E),Math.abs(v))!=1)}setFunctionModule(p,g,v){this.modules[g][p]=v,this.isFunction[g][p]=!0}addEccAndInterleave(p){const g=this.version,v=this.errorCorrectionLevel;if(p.length!=Ye.getNumDataCodewords(g,v))throw new RangeError("Invalid argument");const E=Ye.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][g],w=Ye.ECC_CODEWORDS_PER_BLOCK[v.ordinal][g],V=Math.floor(Ye.getNumRawDataModules(g)/8),P=E-V%E,G=Math.floor(V/E);let L=[];const oe=Ye.reedSolomonComputeDivisor(w);for(let Z=0,ue=0;Z<E;Z++){let Te=p.slice(ue,ue+G-w+(Z<P?0:1));ue+=Te.length;const je=Ye.reedSolomonComputeRemainder(Te,oe);Z<P&&Te.push(0),L.push(Te.concat(je))}let ce=[];for(let Z=0;Z<L[0].length;Z++)L.forEach((ue,Te)=>{(Z!=G-w||Te>=P)&&ce.push(ue[Z])});return c(ce.length==V),ce}drawCodewords(p){if(p.length!=Math.floor(Ye.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let E=0;E<this.size;E++)for(let w=0;w<2;w++){const V=v-w,G=(v+1&2)==0?this.size-1-E:E;!this.isFunction[G][V]&&g<p.length*8&&(this.modules[G][V]=a(p[g>>>3],7-(g&7)),g++)}}c(g==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let v=0;v<this.size;v++){let E;switch(p){case 0:E=(v+g)%2==0;break;case 1:E=g%2==0;break;case 2:E=v%3==0;break;case 3:E=(v+g)%3==0;break;case 4:E=(Math.floor(v/3)+Math.floor(g/2))%2==0;break;case 5:E=v*g%2+v*g%3==0;break;case 6:E=(v*g%2+v*g%3)%2==0;break;case 7:E=((v+g)%2+v*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][v]&&E&&(this.modules[g][v]=!this.modules[g][v])}}getPenaltyScore(){let p=0;for(let w=0;w<this.size;w++){let V=!1,P=0,G=[0,0,0,0,0,0,0];for(let L=0;L<this.size;L++)this.modules[w][L]==V?(P++,P==5?p+=Ye.PENALTY_N1:P>5&&p++):(this.finderPenaltyAddHistory(P,G),V||(p+=this.finderPenaltyCountPatterns(G)*Ye.PENALTY_N3),V=this.modules[w][L],P=1);p+=this.finderPenaltyTerminateAndCount(V,P,G)*Ye.PENALTY_N3}for(let w=0;w<this.size;w++){let V=!1,P=0,G=[0,0,0,0,0,0,0];for(let L=0;L<this.size;L++)this.modules[L][w]==V?(P++,P==5?p+=Ye.PENALTY_N1:P>5&&p++):(this.finderPenaltyAddHistory(P,G),V||(p+=this.finderPenaltyCountPatterns(G)*Ye.PENALTY_N3),V=this.modules[L][w],P=1);p+=this.finderPenaltyTerminateAndCount(V,P,G)*Ye.PENALTY_N3}for(let w=0;w<this.size-1;w++)for(let V=0;V<this.size-1;V++){const P=this.modules[w][V];P==this.modules[w][V+1]&&P==this.modules[w+1][V]&&P==this.modules[w+1][V+1]&&(p+=Ye.PENALTY_N2)}let g=0;for(const w of this.modules)g=w.reduce((V,P)=>V+(P?1:0),g);const v=this.size*this.size,E=Math.ceil(Math.abs(g*20-v*10)/v)-1;return c(0<=E&&E<=9),p+=E*Ye.PENALTY_N4,c(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let v=[6];for(let E=this.size-7;v.length<p;E-=g)v.splice(1,0,E);return v}}static getNumRawDataModules(p){if(p<Ye.MIN_VERSION||p>Ye.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*p+128)*p+64;if(p>=2){const v=Math.floor(p/7)+2;g-=(25*v-10)*v-55,p>=7&&(g-=36)}return c(208<=g&&g<=29648),g}static getNumDataCodewords(p,g){return Math.floor(Ye.getNumRawDataModules(p)/8)-Ye.ECC_CODEWORDS_PER_BLOCK[g.ordinal][p]*Ye.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let g=[];for(let E=0;E<p-1;E++)g.push(0);g.push(1);let v=1;for(let E=0;E<p;E++){for(let w=0;w<g.length;w++)g[w]=Ye.reedSolomonMultiply(g[w],v),w+1<g.length&&(g[w]^=g[w+1]);v=Ye.reedSolomonMultiply(v,2)}return g}static reedSolomonComputeRemainder(p,g){let v=g.map(E=>0);for(const E of p){const w=E^v.shift();v.push(0),g.forEach((V,P)=>v[P]^=Ye.reedSolomonMultiply(V,w))}return v}static reedSolomonMultiply(p,g){if(p>>>8||g>>>8)throw new RangeError("Byte out of range");let v=0;for(let E=7;E>=0;E--)v=v<<1^(v>>>7)*285,v^=(g>>>E&1)*p;return c(v>>>8==0),v}finderPenaltyCountPatterns(p){const g=p[1];c(g<=this.size*3);const v=g>0&&p[2]==g&&p[3]==g*3&&p[4]==g&&p[5]==g;return(v&&p[0]>=g*4&&p[6]>=g?1:0)+(v&&p[6]>=g*4&&p[0]>=g?1:0)}finderPenaltyTerminateAndCount(p,g,v){return p&&(this.finderPenaltyAddHistory(g,v),g=0),g+=this.size,this.finderPenaltyAddHistory(g,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(p,g){g[0]==0&&(p+=this.size),g.pop(),g.unshift(p)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=t;function s(y,p,g){if(p<0||p>31||y>>>p)throw new RangeError("Value out of range");for(let v=p-1;v>=0;v--)g.push(y>>>v&1)}function a(y,p){return(y>>>p&1)!=0}function c(y){if(!y)throw new Error("Assertion error")}const u=class At{constructor(p,g,v){if(this.mode=p,this.numChars=g,this.bitData=v,g<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(p){let g=[];for(const v of p)s(v,8,g);return new At(At.Mode.BYTE,p.length,g)}static makeNumeric(p){if(!At.isNumeric(p))throw new RangeError("String contains non-numeric characters");let g=[];for(let v=0;v<p.length;){const E=Math.min(p.length-v,3);s(parseInt(p.substring(v,v+E),10),E*3+1,g),v+=E}return new At(At.Mode.NUMERIC,p.length,g)}static makeAlphanumeric(p){if(!At.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],v;for(v=0;v+2<=p.length;v+=2){let E=At.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v))*45;E+=At.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v+1)),s(E,11,g)}return v<p.length&&s(At.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v)),6,g),new At(At.Mode.ALPHANUMERIC,p.length,g)}static makeSegments(p){return p==""?[]:At.isNumeric(p)?[At.makeNumeric(p)]:At.isAlphanumeric(p)?[At.makeAlphanumeric(p)]:[At.makeBytes(At.toUtf8ByteArray(p))]}static makeEci(p){let g=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)s(p,8,g);else if(p<16384)s(2,2,g),s(p,14,g);else if(p<1e6)s(6,3,g),s(p,21,g);else throw new RangeError("ECI assignment value out of range");return new At(At.Mode.ECI,0,g)}static isNumeric(p){return At.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return At.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,g){let v=0;for(const E of p){const w=E.mode.numCharCountBits(g);if(E.numChars>=1<<w)return 1/0;v+=4+w+E.bitData.length}return v}static toUtf8ByteArray(p){p=encodeURI(p);let g=[];for(let v=0;v<p.length;v++)p.charAt(v)!="%"?g.push(p.charCodeAt(v)):(g.push(parseInt(p.substring(v+1,v+3),16)),v+=2);return g}};u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let m=u;r.QrSegment=u})(Vr||(Vr={}));(r=>{(t=>{const s=class{constructor(c,u){this.ordinal=c,this.formatBits=u}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),t.Ecc=s})(r.QrCode||(r.QrCode={}))})(Vr||(Vr={}));(r=>{(t=>{const s=class{constructor(c,u){this.modeBits=c,this.numBitsCharCount=u}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),t.Mode=s})(r.QrSegment||(r.QrSegment={}))})(Vr||(Vr={}));var Vi=Vr;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var L1={L:Vi.QrCode.Ecc.LOW,M:Vi.QrCode.Ecc.MEDIUM,Q:Vi.QrCode.Ecc.QUARTILE,H:Vi.QrCode.Ecc.HIGH},B0=128,q0="L",H0="#FFFFFF",F0="#000000",G0=!1,$0=1,B1=4,q1=0,H1=.1;function Y0(r,t=0){const s=[];return r.forEach(function(a,c){let u=null;a.forEach(function(m,y){if(!m&&u!==null){s.push(`M${u+t} ${c+t}h${y-u}v1H${u+t}z`),u=null;return}if(y===a.length-1){if(!m)return;u===null?s.push(`M${y+t},${c+t} h1v1H${y+t}z`):s.push(`M${u+t},${c+t} h${y+1-u}v1H${u+t}z`);return}m&&u===null&&(u=y)})}),s.join("")}function Q0(r,t){return r.slice().map((s,a)=>a<t.y||a>=t.y+t.h?s:s.map((c,u)=>u<t.x||u>=t.x+t.w?c:!1))}function F1(r,t,s,a){if(a==null)return null;const c=r.length+s*2,u=Math.floor(t*H1),m=c/t,y=(a.width||u)*m,p=(a.height||u)*m,g=a.x==null?r.length/2-y/2:a.x*m,v=a.y==null?r.length/2-p/2:a.y*m,E=a.opacity==null?1:a.opacity;let w=null;if(a.excavate){let P=Math.floor(g),G=Math.floor(v),L=Math.ceil(y+g-P),oe=Math.ceil(p+v-G);w={x:P,y:G,w:L,h:oe}}const V=a.crossOrigin;return{x:g,y:v,h:p,w:y,excavation:w,opacity:E,crossOrigin:V}}function G1(r,t){return t!=null?Math.max(Math.floor(t),0):r?B1:q1}function K0({value:r,level:t,minVersion:s,includeMargin:a,marginSize:c,imageSettings:u,size:m,boostLevel:y}){let p=Ct.useMemo(()=>{const P=(Array.isArray(r)?r:[r]).reduce((G,L)=>(G.push(...Vi.QrSegment.makeSegments(L)),G),[]);return Vi.QrCode.encodeSegments(P,L1[t],s,void 0,void 0,y)},[r,t,s,y]);const{cells:g,margin:v,numCells:E,calculatedImageSettings:w}=Ct.useMemo(()=>{let V=p.getModules();const P=G1(a,c),G=V.length+P*2,L=F1(V,m,P,u);return{cells:V,margin:P,numCells:G,calculatedImageSettings:L}},[p,m,u,a,c]);return{qrcode:p,margin:v,cells:g,numCells:E,calculatedImageSettings:w}}var $1=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),X0=Ct.forwardRef(function(t,s){const a=t,{value:c,size:u=B0,level:m=q0,bgColor:y=H0,fgColor:p=F0,includeMargin:g=G0,minVersion:v=$0,boostLevel:E,marginSize:w,imageSettings:V}=a,G=_f(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:L}=G,oe=_f(G,["style"]),ce=V==null?void 0:V.src,Z=Ct.useRef(null),ue=Ct.useRef(null),Te=Ct.useCallback(Ee=>{Z.current=Ee,typeof s=="function"?s(Ee):s&&(s.current=Ee)},[s]),[je,D]=Ct.useState(!1),{margin:A,cells:R,numCells:O,calculatedImageSettings:j}=K0({value:c,level:m,minVersion:v,boostLevel:E,includeMargin:g,marginSize:w,imageSettings:V,size:u});Ct.useEffect(()=>{if(Z.current!=null){const Ee=Z.current,_e=Ee.getContext("2d");if(!_e)return;let $=R;const Q=ue.current,me=j!=null&&Q!==null&&Q.complete&&Q.naturalHeight!==0&&Q.naturalWidth!==0;me&&j.excavation!=null&&($=Q0(R,j.excavation));const he=window.devicePixelRatio||1;Ee.height=Ee.width=u*he;const ve=u/O*he;_e.scale(ve,ve),_e.fillStyle=y,_e.fillRect(0,0,O,O),_e.fillStyle=p,$1?_e.fill(new Path2D(Y0($,A))):R.forEach(function(k,ee){k.forEach(function(fe,pe){fe&&_e.fillRect(pe+A,ee+A,1,1)})}),j&&(_e.globalAlpha=j.opacity),me&&_e.drawImage(Q,j.x+A,j.y+A,j.w,j.h)}}),Ct.useEffect(()=>{D(!1)},[ce]);const M=bf({height:u,width:u},L);let S=null;return ce!=null&&(S=Ct.createElement("img",{src:ce,key:ce,style:{display:"none"},onLoad:()=>{D(!0)},ref:ue,crossOrigin:j==null?void 0:j.crossOrigin})),Ct.createElement(Ct.Fragment,null,Ct.createElement("canvas",bf({style:M,height:u,width:u,ref:Te,role:"img"},oe)),S)});X0.displayName="QRCodeCanvas";var Y1=Ct.forwardRef(function(t,s){const a=t,{value:c,size:u=B0,level:m=q0,bgColor:y=H0,fgColor:p=F0,includeMargin:g=G0,minVersion:v=$0,boostLevel:E,title:w,marginSize:V,imageSettings:P}=a,G=_f(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:L,cells:oe,numCells:ce,calculatedImageSettings:Z}=K0({value:c,level:m,minVersion:v,boostLevel:E,includeMargin:g,marginSize:V,imageSettings:P,size:u});let ue=oe,Te=null;P!=null&&Z!=null&&(Z.excavation!=null&&(ue=Q0(oe,Z.excavation)),Te=Ct.createElement("image",{href:P.src,height:Z.h,width:Z.w,x:Z.x+L,y:Z.y+L,preserveAspectRatio:"none",opacity:Z.opacity,crossOrigin:Z.crossOrigin}));const je=Y0(ue,L);return Ct.createElement("svg",bf({height:u,width:u,viewBox:`0 0 ${ce} ${ce}`,ref:s,role:"img"},G),!!w&&Ct.createElement("title",null,w),Ct.createElement("path",{fill:y,d:`M0,0 h${ce}v${ce}H0z`,shapeRendering:"crispEdges"}),Ct.createElement("path",{fill:p,d:je,shapeRendering:"crispEdges"}),Te)});Y1.displayName="QRCodeSVG";const wt={projects:[""],workplaces:[""],contractors:[""],subcontractors:[""],supervisors:[" "],locations:[""],goals:[""],processes:[""],topics:[""],cautions:[""],roles:[""],jobTypes:["","","",""],predictions:[""],countermeasures:[""]},Q1={project:wt.projects[0],month:new Date().getMonth()+1,contractor:wt.contractors[0],date:new Date().toISOString().split("T")[0],startTime:"08:00",endTime:"08:30",location:wt.locations[0],instructor:wt.supervisors[0],goal:wt.goals[0],process:wt.processes[0],topic:wt.topics[0],caution:wt.cautions[0],photoUrl:null,signatures:[]},K1={count:1,project:wt.projects[0],date:new Date().toISOString().split("T")[0],contractor:wt.contractors[0],startTime:"13:00",endTime:"14:00",location:wt.locations[0],gcAttendees:Array(8).fill({role:"",name:""}),subcontractorAttendees:[]},X1={year:new Date().getFullYear(),month:new Date().getMonth()+1,createdDate:new Date().toISOString().split("T")[0],project:wt.projects[0],location:wt.locations[0],author:wt.supervisors[0],trainingDate:"",trainingLeader:wt.supervisors[0],councilDate:"",councilLeader:"",patrolDate:"",processRows:[],predictions:Array(5).fill(""),countermeasures:Array(5).fill(""),inspectionItems:Array(5).fill(""),safetyDuty:{},lastMonthReflection:""},rf={project:wt.projects[0],director:wt.supervisors[0],furiganaSei:"",furiganaMei:"",nameSei:"",nameMei:"",birthEra:"Showa",birthYear:"",birthMonth:"",birthDay:"",gender:"Male",age:0,company:wt.subcontractors[0],subcontractorRank:"",experienceYears:10,experienceMonths:0,jobType:"",jobTypeOther:"",address:"",phone:"",emergencyContactSei:"",emergencyContactMei:"",emergencyContactRelation:"",emergencyContactPhone:"",bloodType:"A",bloodTypeRh:"Unknown",healthCheckYear:new Date().getFullYear()-2018,healthCheckMonth:new Date().getMonth()+1,healthCheckDay:new Date().getDate(),kentaikyo:"Joined",qualifications:{vehicle_leveling:!1,vehicle_demolition:!1,mobile_crane:!1,slinging:!1,gas_welding:!1,earth_retaining:!1,excavation:!1,scaffolding:!1,formwork:!1,oxygen_deficiency:!1,rough_terrain:!1,arc_welding:!1,grinding_wheel:!1,low_voltage:!1,roller:!1,asbestos:!1,foreman:!1,otherText1:"",otherText2:"",otherText3:""},pledgeDateYear:new Date().getFullYear()-2018,pledgeDateMonth:new Date().getMonth()+1,pledgeDateDay:new Date().getDate(),signatureDataUrl:null},Z1=()=>{};var dx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=function(r){const t=[];let s=0;for(let a=0;a<r.length;a++){let c=r.charCodeAt(a);c<128?t[s++]=c:c<2048?(t[s++]=c>>6|192,t[s++]=c&63|128):(c&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(c=65536+((c&1023)<<10)+(r.charCodeAt(++a)&1023),t[s++]=c>>18|240,t[s++]=c>>12&63|128,t[s++]=c>>6&63|128,t[s++]=c&63|128):(t[s++]=c>>12|224,t[s++]=c>>6&63|128,t[s++]=c&63|128)}return t},J1=function(r){const t=[];let s=0,a=0;for(;s<r.length;){const c=r[s++];if(c<128)t[a++]=String.fromCharCode(c);else if(c>191&&c<224){const u=r[s++];t[a++]=String.fromCharCode((c&31)<<6|u&63)}else if(c>239&&c<365){const u=r[s++],m=r[s++],y=r[s++],p=((c&7)<<18|(u&63)<<12|(m&63)<<6|y&63)-65536;t[a++]=String.fromCharCode(55296+(p>>10)),t[a++]=String.fromCharCode(56320+(p&1023))}else{const u=r[s++],m=r[s++];t[a++]=String.fromCharCode((c&15)<<12|(u&63)<<6|m&63)}}return t.join("")},J0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let c=0;c<r.length;c+=3){const u=r[c],m=c+1<r.length,y=m?r[c+1]:0,p=c+2<r.length,g=p?r[c+2]:0,v=u>>2,E=(u&3)<<4|y>>4;let w=(y&15)<<2|g>>6,V=g&63;p||(V=64,m||(w=64)),a.push(s[v],s[E],s[w],s[V])}return a.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(Z0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):J1(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let c=0;c<r.length;){const u=s[r.charAt(c++)],y=c<r.length?s[r.charAt(c)]:0;++c;const g=c<r.length?s[r.charAt(c)]:64;++c;const E=c<r.length?s[r.charAt(c)]:64;if(++c,u==null||y==null||g==null||E==null)throw new W1;const w=u<<2|y>>4;if(a.push(w),g!==64){const V=y<<4&240|g>>2;if(a.push(V),E!==64){const P=g<<6&192|E;a.push(P)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class W1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eE=function(r){const t=Z0(r);return J0.encodeByteArray(t,!0)},xu=function(r){return eE(r).replace(/\./g,"")},tE=function(r){try{return J0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=()=>nE().__FIREBASE_DEFAULTS__,aE=()=>{if(typeof process>"u"||typeof dx>"u")return;const r=dx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},rE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&tE(r[1]);return t&&JSON.parse(t)},Kf=()=>{try{return Z1()||sE()||aE()||rE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iE=r=>{var t,s;return(s=(t=Kf())==null?void 0:t.emulatorHosts)==null?void 0:s[r]},lE=r=>{const t=iE(r);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),a]:[t.substring(0,s),a]},W0=()=>{var r;return(r=Kf())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,a)=>{s?this.reject(s):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},a=t||"demo-project",c=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${a}`,aud:a,iat:c,exp:c+3600,auth_time:c,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[xu(JSON.stringify(s)),xu(JSON.stringify(m)),""].join(".")}const lo={};function hE(){const r={prod:[],emulator:[]};for(const t of Object.keys(lo))lo[t]?r.emulator.push(t):r.prod.push(t);return r}function dE(r){let t=document.getElementById(r),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),s=!0),{created:s,element:t}}let fx=!1;function fE(r,t){if(typeof window>"u"||typeof document>"u"||!Xf(window.location.host)||lo[r]===t||lo[r]||fx)return;lo[r]=t;function s(w){return`__firebase__banner__${w}`}const a="__firebase__banner",u=hE().prod.length>0;function m(){const w=document.getElementById(a);w&&w.remove()}function y(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,V){w.setAttribute("width","24"),w.setAttribute("id",V),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{fx=!0,m()},w}function v(w,V){w.setAttribute("id",V),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=dE(a),V=s("text"),P=document.getElementById(V)||document.createElement("span"),G=s("learnmore"),L=document.getElementById(G)||document.createElement("a"),oe=s("preprendIcon"),ce=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Z=w.element;y(Z),v(L,G);const ue=g();p(ce,oe),Z.append(ce,P,L,ue),document.body.appendChild(Z)}u?(P.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gE(){var t;const r=(t=Kf())==null?void 0:t.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pE(){return!gE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yE(){try{return typeof indexedDB=="object"}catch{return!1}}function xE(){return new Promise((r,t)=>{try{let s=!0;const a="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(a);c.onsuccess=()=>{c.result.close(),s||self.indexedDB.deleteDatabase(a),r(!0)},c.onupgradeneeded=()=>{s=!1},c.onerror=()=>{var u;t(((u=c.error)==null?void 0:u.message)||"")}}catch(s){t(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="FirebaseError";class Yi extends Error{constructor(t,s,a){super(s),this.code=t,this.customData=a,this.name=vE,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ev.prototype.create)}}class ev{constructor(t,s,a){this.service=t,this.serviceName=s,this.errors=a}create(t,...s){const a=s[0]||{},c=`${this.service}/${t}`,u=this.errors[t],m=u?bE(u,a):"Error",y=`${this.serviceName}: ${m} (${c}).`;return new Yi(c,y,a)}}function bE(r,t){return r.replace(_E,(s,a)=>{const c=t[a];return c!=null?String(c):`<${a}?>`})}const _E=/\{\$([^}]+)}/g;function vu(r,t){if(r===t)return!0;const s=Object.keys(r),a=Object.keys(t);for(const c of s){if(!a.includes(c))return!1;const u=r[c],m=t[c];if(mx(u)&&mx(m)){if(!vu(u,m))return!1}else if(u!==m)return!1}for(const c of a)if(!s.includes(c))return!1;return!0}function mx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(r){return r&&r._delegate?r._delegate:r}class fo{constructor(t,s,a){this.name=t,this.instanceFactory=s,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const a=new oE;if(this.instancesDeferred.set(s,a),this.isInitialized(s)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:s});c&&a.resolve(c)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(wE(t))try{this.getOrInitializeService({instanceIdentifier:Mr})}catch{}for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:c});a.resolve(u)}catch{}}}}clearInstance(t=Mr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Mr){return this.instances.has(t)}getOptions(t=Mr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:a,options:s});for(const[u,m]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);a===y&&m.resolve(c)}return c}onInit(t,s){const a=this.normalizeInstanceIdentifier(s),c=this.onInitCallbacks.get(a)??new Set;c.add(t),this.onInitCallbacks.set(a,c);const u=this.instances.get(a);return u&&t(u,a),()=>{c.delete(t)}}invokeOnInitCallbacks(t,s){const a=this.onInitCallbacks.get(s);if(a)for(const c of a)try{c(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:NE(t),options:s}),this.instances.set(t,a),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=Mr){return this.component?this.component.multipleInstances?t:Mr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NE(r){return r===Mr?void 0:r}function wE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new EE(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(tt||(tt={}));const jE={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},SE=tt.INFO,AE={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},CE=(r,t,...s)=>{if(t<r.logLevel)return;const a=new Date().toISOString(),c=AE[t];if(c)console[c](`[${a}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class tv{constructor(t){this.name=t,this._logLevel=SE,this._logHandler=CE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in tt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?jE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...t),this._logHandler(this,tt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...t),this._logHandler(this,tt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...t),this._logHandler(this,tt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...t),this._logHandler(this,tt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...t),this._logHandler(this,tt.ERROR,...t)}}const RE=(r,t)=>t.some(s=>r instanceof s);let gx,px;function DE(){return gx||(gx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ME(){return px||(px=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nv=new WeakMap,Ef=new WeakMap,sv=new WeakMap,lf=new WeakMap,Zf=new WeakMap;function IE(r){const t=new Promise((s,a)=>{const c=()=>{r.removeEventListener("success",u),r.removeEventListener("error",m)},u=()=>{s(Ha(r.result)),c()},m=()=>{a(r.error),c()};r.addEventListener("success",u),r.addEventListener("error",m)});return t.then(s=>{s instanceof IDBCursor&&nv.set(s,r)}).catch(()=>{}),Zf.set(t,r),t}function OE(r){if(Ef.has(r))return;const t=new Promise((s,a)=>{const c=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",m),r.removeEventListener("abort",m)},u=()=>{s(),c()},m=()=>{a(r.error||new DOMException("AbortError","AbortError")),c()};r.addEventListener("complete",u),r.addEventListener("error",m),r.addEventListener("abort",m)});Ef.set(r,t)}let Nf={get(r,t,s){if(r instanceof IDBTransaction){if(t==="done")return Ef.get(r);if(t==="objectStoreNames")return r.objectStoreNames||sv.get(r);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Ha(r[t])},set(r,t,s){return r[t]=s,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function VE(r){Nf=r(Nf)}function kE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const a=r.call(of(this),t,...s);return sv.set(a,t.sort?t.sort():[t]),Ha(a)}:ME().includes(r)?function(...t){return r.apply(of(this),t),Ha(nv.get(this))}:function(...t){return Ha(r.apply(of(this),t))}}function zE(r){return typeof r=="function"?kE(r):(r instanceof IDBTransaction&&OE(r),RE(r,DE())?new Proxy(r,Nf):r)}function Ha(r){if(r instanceof IDBRequest)return IE(r);if(lf.has(r))return lf.get(r);const t=zE(r);return t!==r&&(lf.set(r,t),Zf.set(t,r)),t}const of=r=>Zf.get(r);function UE(r,t,{blocked:s,upgrade:a,blocking:c,terminated:u}={}){const m=indexedDB.open(r,t),y=Ha(m);return a&&m.addEventListener("upgradeneeded",p=>{a(Ha(m.result),p.oldVersion,p.newVersion,Ha(m.transaction),p)}),s&&m.addEventListener("blocked",p=>s(p.oldVersion,p.newVersion,p)),y.then(p=>{u&&p.addEventListener("close",()=>u()),c&&p.addEventListener("versionchange",g=>c(g.oldVersion,g.newVersion,g))}).catch(()=>{}),y}const PE=["get","getKey","getAll","getAllKeys","count"],LE=["put","add","delete","clear"],cf=new Map;function yx(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(cf.get(t))return cf.get(t);const s=t.replace(/FromIndex$/,""),a=t!==s,c=LE.includes(s);if(!(s in(a?IDBIndex:IDBObjectStore).prototype)||!(c||PE.includes(s)))return;const u=async function(m,...y){const p=this.transaction(m,c?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(y.shift())),(await Promise.all([g[s](...y),c&&p.done]))[0]};return cf.set(t,u),u}VE(r=>({...r,get:(t,s,a)=>yx(t,s)||r.get(t,s,a),has:(t,s)=>!!yx(t,s)||r.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(qE(s)){const a=s.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(s=>s).join(" ")}}function qE(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wf="@firebase/app",xx="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new tv("@firebase/app"),HE="@firebase/app-compat",FE="@firebase/analytics-compat",GE="@firebase/analytics",$E="@firebase/app-check-compat",YE="@firebase/app-check",QE="@firebase/auth",KE="@firebase/auth-compat",XE="@firebase/database",ZE="@firebase/data-connect",JE="@firebase/database-compat",WE="@firebase/functions",eN="@firebase/functions-compat",tN="@firebase/installations",nN="@firebase/installations-compat",sN="@firebase/messaging",aN="@firebase/messaging-compat",rN="@firebase/performance",iN="@firebase/performance-compat",lN="@firebase/remote-config",oN="@firebase/remote-config-compat",cN="@firebase/storage",uN="@firebase/storage-compat",hN="@firebase/firestore",dN="@firebase/ai",fN="@firebase/firestore-compat",mN="firebase",gN="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="[DEFAULT]",pN={[wf]:"fire-core",[HE]:"fire-core-compat",[GE]:"fire-analytics",[FE]:"fire-analytics-compat",[YE]:"fire-app-check",[$E]:"fire-app-check-compat",[QE]:"fire-auth",[KE]:"fire-auth-compat",[XE]:"fire-rtdb",[ZE]:"fire-data-connect",[JE]:"fire-rtdb-compat",[WE]:"fire-fn",[eN]:"fire-fn-compat",[tN]:"fire-iid",[nN]:"fire-iid-compat",[sN]:"fire-fcm",[aN]:"fire-fcm-compat",[rN]:"fire-perf",[iN]:"fire-perf-compat",[lN]:"fire-rc",[oN]:"fire-rc-compat",[cN]:"fire-gcs",[uN]:"fire-gcs-compat",[hN]:"fire-fst",[fN]:"fire-fst-compat",[dN]:"fire-vertex","fire-js":"fire-js",[mN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Map,yN=new Map,jf=new Map;function vx(r,t){try{r.container.addComponent(t)}catch(s){la.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,s)}}function _u(r){const t=r.name;if(jf.has(t))return la.debug(`There were multiple attempts to register component ${t}.`),!1;jf.set(t,r);for(const s of bu.values())vx(s,r);for(const s of yN.values())vx(s,r);return!0}function xN(r,t){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(t)}function vN(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fa=new ev("app","Firebase",bN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(t,s,a){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Fa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=gN;function av(r,t={}){let s=r;typeof t!="object"&&(t={name:t});const a={name:Tf,automaticDataCollectionEnabled:!0,...t},c=a.name;if(typeof c!="string"||!c)throw Fa.create("bad-app-name",{appName:String(c)});if(s||(s=W0()),!s)throw Fa.create("no-options");const u=bu.get(c);if(u){if(vu(s,u.options)&&vu(a,u.config))return u;throw Fa.create("duplicate-app",{appName:c})}const m=new TE(c);for(const p of jf.values())m.addComponent(p);const y=new _N(s,a,m);return bu.set(c,y),y}function NN(r=Tf){const t=bu.get(r);if(!t&&r===Tf&&W0())return av();if(!t)throw Fa.create("no-app",{appName:r});return t}function ki(r,t,s){let a=pN[r]??r;s&&(a+=`-${s}`);const c=a.match(/\s|\//),u=t.match(/\s|\//);if(c||u){const m=[`Unable to register library "${a}" with version "${t}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&u&&m.push("and"),u&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),la.warn(m.join(" "));return}_u(new fo(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firebase-heartbeat-database",TN=1,mo="firebase-heartbeat-store";let uf=null;function rv(){return uf||(uf=UE(wN,TN,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(mo)}catch(s){console.warn(s)}}}}).catch(r=>{throw Fa.create("idb-open",{originalErrorMessage:r.message})})),uf}async function jN(r){try{const s=(await rv()).transaction(mo),a=await s.objectStore(mo).get(iv(r));return await s.done,a}catch(t){if(t instanceof Yi)la.warn(t.message);else{const s=Fa.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});la.warn(s.message)}}}async function bx(r,t){try{const a=(await rv()).transaction(mo,"readwrite");await a.objectStore(mo).put(t,iv(r)),await a.done}catch(s){if(s instanceof Yi)la.warn(s.message);else{const a=Fa.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});la.warn(a.message)}}}function iv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1024,AN=30;class CN{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new DN(s),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,s;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=_x();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(m=>m.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:c}),this._heartbeatsCache.heartbeats.length>AN){const m=MN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){la.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=_x(),{heartbeatsToSend:a,unsentEntries:c}=RN(this._heartbeatsCache.heartbeats),u=xu(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=s,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(s){return la.warn(s),""}}}function _x(){return new Date().toISOString().substring(0,10)}function RN(r,t=SN){const s=[];let a=r.slice();for(const c of r){const u=s.find(m=>m.agent===c.agent);if(u){if(u.dates.push(c.date),Ex(s)>t){u.dates.pop();break}}else if(s.push({agent:c.agent,dates:[c.date]}),Ex(s)>t){s.pop();break}a=a.slice(1)}return{heartbeatsToSend:s,unsentEntries:a}}class DN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yE()?xE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await jN(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return bx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const a=await this.read();return bx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function Ex(r){return xu(JSON.stringify({version:2,heartbeats:r})).length}function MN(r){if(r.length===0)return-1;let t=0,s=r[0].date;for(let a=1;a<r.length;a++)r[a].date<s&&(s=r[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(r){_u(new fo("platform-logger",t=>new BE(t),"PRIVATE")),_u(new fo("heartbeat",t=>new CN(t),"PRIVATE")),ki(wf,xx,r),ki(wf,xx,"esm2020"),ki("fire-js","")}IN("");var ON="firebase",VN="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(ON,VN,"app");var Nx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ga,lv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,A){function R(){}R.prototype=A.prototype,D.F=A.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(O,j,M){for(var S=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)S[Ee-2]=arguments[Ee];return A.prototype[j].apply(O,S)}}function s(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(a,s),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(D,A,R){R||(R=0);const O=Array(16);if(typeof A=="string")for(var j=0;j<16;++j)O[j]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(j=0;j<16;++j)O[j]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=D.g[0],R=D.g[1],j=D.g[2];let M=D.g[3],S;S=A+(M^R&(j^M))+O[0]+3614090360&4294967295,A=R+(S<<7&4294967295|S>>>25),S=M+(j^A&(R^j))+O[1]+3905402710&4294967295,M=A+(S<<12&4294967295|S>>>20),S=j+(R^M&(A^R))+O[2]+606105819&4294967295,j=M+(S<<17&4294967295|S>>>15),S=R+(A^j&(M^A))+O[3]+3250441966&4294967295,R=j+(S<<22&4294967295|S>>>10),S=A+(M^R&(j^M))+O[4]+4118548399&4294967295,A=R+(S<<7&4294967295|S>>>25),S=M+(j^A&(R^j))+O[5]+1200080426&4294967295,M=A+(S<<12&4294967295|S>>>20),S=j+(R^M&(A^R))+O[6]+2821735955&4294967295,j=M+(S<<17&4294967295|S>>>15),S=R+(A^j&(M^A))+O[7]+4249261313&4294967295,R=j+(S<<22&4294967295|S>>>10),S=A+(M^R&(j^M))+O[8]+1770035416&4294967295,A=R+(S<<7&4294967295|S>>>25),S=M+(j^A&(R^j))+O[9]+2336552879&4294967295,M=A+(S<<12&4294967295|S>>>20),S=j+(R^M&(A^R))+O[10]+4294925233&4294967295,j=M+(S<<17&4294967295|S>>>15),S=R+(A^j&(M^A))+O[11]+2304563134&4294967295,R=j+(S<<22&4294967295|S>>>10),S=A+(M^R&(j^M))+O[12]+1804603682&4294967295,A=R+(S<<7&4294967295|S>>>25),S=M+(j^A&(R^j))+O[13]+4254626195&4294967295,M=A+(S<<12&4294967295|S>>>20),S=j+(R^M&(A^R))+O[14]+2792965006&4294967295,j=M+(S<<17&4294967295|S>>>15),S=R+(A^j&(M^A))+O[15]+1236535329&4294967295,R=j+(S<<22&4294967295|S>>>10),S=A+(j^M&(R^j))+O[1]+4129170786&4294967295,A=R+(S<<5&4294967295|S>>>27),S=M+(R^j&(A^R))+O[6]+3225465664&4294967295,M=A+(S<<9&4294967295|S>>>23),S=j+(A^R&(M^A))+O[11]+643717713&4294967295,j=M+(S<<14&4294967295|S>>>18),S=R+(M^A&(j^M))+O[0]+3921069994&4294967295,R=j+(S<<20&4294967295|S>>>12),S=A+(j^M&(R^j))+O[5]+3593408605&4294967295,A=R+(S<<5&4294967295|S>>>27),S=M+(R^j&(A^R))+O[10]+38016083&4294967295,M=A+(S<<9&4294967295|S>>>23),S=j+(A^R&(M^A))+O[15]+3634488961&4294967295,j=M+(S<<14&4294967295|S>>>18),S=R+(M^A&(j^M))+O[4]+3889429448&4294967295,R=j+(S<<20&4294967295|S>>>12),S=A+(j^M&(R^j))+O[9]+568446438&4294967295,A=R+(S<<5&4294967295|S>>>27),S=M+(R^j&(A^R))+O[14]+3275163606&4294967295,M=A+(S<<9&4294967295|S>>>23),S=j+(A^R&(M^A))+O[3]+4107603335&4294967295,j=M+(S<<14&4294967295|S>>>18),S=R+(M^A&(j^M))+O[8]+1163531501&4294967295,R=j+(S<<20&4294967295|S>>>12),S=A+(j^M&(R^j))+O[13]+2850285829&4294967295,A=R+(S<<5&4294967295|S>>>27),S=M+(R^j&(A^R))+O[2]+4243563512&4294967295,M=A+(S<<9&4294967295|S>>>23),S=j+(A^R&(M^A))+O[7]+1735328473&4294967295,j=M+(S<<14&4294967295|S>>>18),S=R+(M^A&(j^M))+O[12]+2368359562&4294967295,R=j+(S<<20&4294967295|S>>>12),S=A+(R^j^M)+O[5]+4294588738&4294967295,A=R+(S<<4&4294967295|S>>>28),S=M+(A^R^j)+O[8]+2272392833&4294967295,M=A+(S<<11&4294967295|S>>>21),S=j+(M^A^R)+O[11]+1839030562&4294967295,j=M+(S<<16&4294967295|S>>>16),S=R+(j^M^A)+O[14]+4259657740&4294967295,R=j+(S<<23&4294967295|S>>>9),S=A+(R^j^M)+O[1]+2763975236&4294967295,A=R+(S<<4&4294967295|S>>>28),S=M+(A^R^j)+O[4]+1272893353&4294967295,M=A+(S<<11&4294967295|S>>>21),S=j+(M^A^R)+O[7]+4139469664&4294967295,j=M+(S<<16&4294967295|S>>>16),S=R+(j^M^A)+O[10]+3200236656&4294967295,R=j+(S<<23&4294967295|S>>>9),S=A+(R^j^M)+O[13]+681279174&4294967295,A=R+(S<<4&4294967295|S>>>28),S=M+(A^R^j)+O[0]+3936430074&4294967295,M=A+(S<<11&4294967295|S>>>21),S=j+(M^A^R)+O[3]+3572445317&4294967295,j=M+(S<<16&4294967295|S>>>16),S=R+(j^M^A)+O[6]+76029189&4294967295,R=j+(S<<23&4294967295|S>>>9),S=A+(R^j^M)+O[9]+3654602809&4294967295,A=R+(S<<4&4294967295|S>>>28),S=M+(A^R^j)+O[12]+3873151461&4294967295,M=A+(S<<11&4294967295|S>>>21),S=j+(M^A^R)+O[15]+530742520&4294967295,j=M+(S<<16&4294967295|S>>>16),S=R+(j^M^A)+O[2]+3299628645&4294967295,R=j+(S<<23&4294967295|S>>>9),S=A+(j^(R|~M))+O[0]+4096336452&4294967295,A=R+(S<<6&4294967295|S>>>26),S=M+(R^(A|~j))+O[7]+1126891415&4294967295,M=A+(S<<10&4294967295|S>>>22),S=j+(A^(M|~R))+O[14]+2878612391&4294967295,j=M+(S<<15&4294967295|S>>>17),S=R+(M^(j|~A))+O[5]+4237533241&4294967295,R=j+(S<<21&4294967295|S>>>11),S=A+(j^(R|~M))+O[12]+1700485571&4294967295,A=R+(S<<6&4294967295|S>>>26),S=M+(R^(A|~j))+O[3]+2399980690&4294967295,M=A+(S<<10&4294967295|S>>>22),S=j+(A^(M|~R))+O[10]+4293915773&4294967295,j=M+(S<<15&4294967295|S>>>17),S=R+(M^(j|~A))+O[1]+2240044497&4294967295,R=j+(S<<21&4294967295|S>>>11),S=A+(j^(R|~M))+O[8]+1873313359&4294967295,A=R+(S<<6&4294967295|S>>>26),S=M+(R^(A|~j))+O[15]+4264355552&4294967295,M=A+(S<<10&4294967295|S>>>22),S=j+(A^(M|~R))+O[6]+2734768916&4294967295,j=M+(S<<15&4294967295|S>>>17),S=R+(M^(j|~A))+O[13]+1309151649&4294967295,R=j+(S<<21&4294967295|S>>>11),S=A+(j^(R|~M))+O[4]+4149444226&4294967295,A=R+(S<<6&4294967295|S>>>26),S=M+(R^(A|~j))+O[11]+3174756917&4294967295,M=A+(S<<10&4294967295|S>>>22),S=j+(A^(M|~R))+O[2]+718787259&4294967295,j=M+(S<<15&4294967295|S>>>17),S=R+(M^(j|~A))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(j+(S<<21&4294967295|S>>>11))&4294967295,D.g[2]=D.g[2]+j&4294967295,D.g[3]=D.g[3]+M&4294967295}a.prototype.v=function(D,A){A===void 0&&(A=D.length);const R=A-this.blockSize,O=this.C;let j=this.h,M=0;for(;M<A;){if(j==0)for(;M<=R;)c(this,D,M),M+=this.blockSize;if(typeof D=="string"){for(;M<A;)if(O[j++]=D.charCodeAt(M++),j==this.blockSize){c(this,O),j=0;break}}else for(;M<A;)if(O[j++]=D[M++],j==this.blockSize){c(this,O),j=0;break}}this.h=j,this.o+=A},a.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)D[A++]=this.g[R]>>>O&255;return D};function u(D,A){var R=y;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=A(D)}function m(D,A){this.h=A;const R=[];let O=!0;for(let j=D.length-1;j>=0;j--){const M=D[j]|0;O&&M==A||(R[j]=M,O=!1)}this.g=R}var y={};function p(D){return-128<=D&&D<128?u(D,function(A){return new m([A|0],A<0?-1:0)}):new m([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return L(g(-D));const A=[];let R=1;for(let O=0;D>=R;O++)A[O]=D/R|0,R*=4294967296;return new m(A,0)}function v(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return L(v(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(A,8));let O=E;for(let M=0;M<D.length;M+=8){var j=Math.min(8,D.length-M);const S=parseInt(D.substring(M,M+j),A);j<8?(j=g(Math.pow(A,j)),O=O.j(j).add(g(S))):(O=O.j(R),O=O.add(g(S)))}return O}var E=p(0),w=p(1),V=p(16777216);r=m.prototype,r.m=function(){if(G(this))return-L(this).m();let D=0,A=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);D+=(O>=0?O:4294967296+O)*A,A*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(P(this))return"0";if(G(this))return"-"+L(this).toString(D);const A=g(Math.pow(D,6));var R=this;let O="";for(;;){const j=ue(R,A).g;R=oe(R,j.j(A));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=j,P(R))return M+O;for(;M.length<6;)M="0"+M;O=M+O}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function P(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function G(D){return D.h==-1}r.l=function(D){return D=oe(this,D),G(D)?-1:P(D)?0:1};function L(D){const A=D.g.length,R=[];for(let O=0;O<A;O++)R[O]=~D.g[O];return new m(R,~D.h).add(w)}r.abs=function(){return G(this)?L(this):this},r.add=function(D){const A=Math.max(this.g.length,D.g.length),R=[];let O=0;for(let j=0;j<=A;j++){let M=O+(this.i(j)&65535)+(D.i(j)&65535),S=(M>>>16)+(this.i(j)>>>16)+(D.i(j)>>>16);O=S>>>16,M&=65535,S&=65535,R[j]=S<<16|M}return new m(R,R[R.length-1]&-2147483648?-1:0)};function oe(D,A){return D.add(L(A))}r.j=function(D){if(P(this)||P(D))return E;if(G(this))return G(D)?L(this).j(L(D)):L(L(this).j(D));if(G(D))return L(this.j(L(D)));if(this.l(V)<0&&D.l(V)<0)return g(this.m()*D.m());const A=this.g.length+D.g.length,R=[];for(var O=0;O<2*A;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let j=0;j<D.g.length;j++){const M=this.i(O)>>>16,S=this.i(O)&65535,Ee=D.i(j)>>>16,_e=D.i(j)&65535;R[2*O+2*j]+=S*_e,ce(R,2*O+2*j),R[2*O+2*j+1]+=M*_e,ce(R,2*O+2*j+1),R[2*O+2*j+1]+=S*Ee,ce(R,2*O+2*j+1),R[2*O+2*j+2]+=M*Ee,ce(R,2*O+2*j+2)}for(D=0;D<A;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=A;D<2*A;D++)R[D]=0;return new m(R,0)};function ce(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function Z(D,A){this.g=D,this.h=A}function ue(D,A){if(P(A))throw Error("division by zero");if(P(D))return new Z(E,E);if(G(D))return A=ue(L(D),A),new Z(L(A.g),L(A.h));if(G(A))return A=ue(D,L(A)),new Z(L(A.g),A.h);if(D.g.length>30){if(G(D)||G(A))throw Error("slowDivide_ only works with positive integers.");for(var R=w,O=A;O.l(D)<=0;)R=Te(R),O=Te(O);var j=je(R,1),M=je(O,1);for(O=je(O,2),R=je(R,2);!P(O);){var S=M.add(O);S.l(D)<=0&&(j=j.add(R),M=S),O=je(O,1),R=je(R,1)}return A=oe(D,j.j(A)),new Z(j,A)}for(j=E;D.l(A)>=0;){for(R=Math.max(1,Math.floor(D.m()/A.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),M=g(R),S=M.j(A);G(S)||S.l(D)>0;)R-=O,M=g(R),S=M.j(A);P(M)&&(M=w),j=j.add(M),D=oe(D,S)}return new Z(j,D)}r.B=function(D){return ue(this,D).h},r.and=function(D){const A=Math.max(this.g.length,D.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)&D.i(O);return new m(R,this.h&D.h)},r.or=function(D){const A=Math.max(this.g.length,D.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)|D.i(O);return new m(R,this.h|D.h)},r.xor=function(D){const A=Math.max(this.g.length,D.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)^D.i(O);return new m(R,this.h^D.h)};function Te(D){const A=D.g.length+1,R=[];for(let O=0;O<A;O++)R[O]=D.i(O)<<1|D.i(O-1)>>>31;return new m(R,D.h)}function je(D,A){const R=A>>5;A%=32;const O=D.g.length-R,j=[];for(let M=0;M<O;M++)j[M]=A>0?D.i(M+R)>>>A|D.i(M+R+1)<<32-A:D.i(M+R);return new m(j,D.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,lv=a,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=g,m.fromString=v,Ga=m}).apply(typeof Nx<"u"?Nx:typeof self<"u"?self:typeof window<"u"?window:{});var ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ov,so,cv,uu,Sf,uv,hv,dv;(function(){var r,t=Object.defineProperty;function s(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ru=="object"&&ru];for(var x=0;x<h.length;++x){var _=h[x];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=s(this);function c(h,x){if(x)e:{var _=a;h=h.split(".");for(var T=0;T<h.length-1;T++){var q=h[T];if(!(q in _))break e;_=_[q]}h=h[h.length-1],T=_[h],x=x(T),x!=T&&x!=null&&t(_,h,{configurable:!0,writable:!0,value:x})}}c("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(h){return h||function(x){var _=[],T;for(T in x)Object.prototype.hasOwnProperty.call(x,T)&&_.push([T,x[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},m=this||self;function y(h){var x=typeof h;return x=="object"&&h!=null||x=="function"}function p(h,x,_){return h.call.apply(h.bind,arguments)}function g(h,x,_){return g=p,g.apply(null,arguments)}function v(h,x){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function E(h,x){function _(){}_.prototype=x.prototype,h.Z=x.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(T,q,K){for(var ge=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ge[Le-2]=arguments[Le];return x.prototype[q].apply(T,ge)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function V(h){const x=h.length;if(x>0){const _=Array(x);for(let T=0;T<x;T++)_[T]=h[T];return _}return[]}function P(h,x){for(let T=1;T<arguments.length;T++){const q=arguments[T];var _=typeof q;if(_=_!="object"?_:q?Array.isArray(q)?"array":_:"null",_=="array"||_=="object"&&typeof q.length=="number"){_=h.length||0;const K=q.length||0;h.length=_+K;for(let ge=0;ge<K;ge++)h[_+ge]=q[ge]}else h.push(q)}}class G{constructor(x,_){this.i=x,this.j=_,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function L(h){m.setTimeout(()=>{throw h},0)}function oe(){var h=D;let x=null;return h.g&&(x=h.g,h.g=h.g.next,h.g||(h.h=null),x.next=null),x}class ce{constructor(){this.h=this.g=null}add(x,_){const T=Z.get();T.set(x,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Z=new G(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(x,_){this.h=x,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,je=!1,D=new ce,A=()=>{const h=Promise.resolve(void 0);Te=()=>{h.then(R)}};function R(){for(var h;h=oe();){try{h.h.call(h.g)}catch(_){L(_)}var x=Z;x.j(h),x.h<100&&(x.h++,h.next=x.g,x.g=h)}je=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,x){this.type=h,this.g=this.target=x,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,x=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};m.addEventListener("test",_,x),m.removeEventListener("test",_,x)}catch{}return h})();function S(h){return/^[\s\xa0]*$/.test(h)}function Ee(h,x){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,x)}E(Ee,j),Ee.prototype.init=function(h,x){const _=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=x,x=h.relatedTarget,x||(_=="mouseover"?x=h.fromElement:_=="mouseout"&&(x=h.toElement)),this.relatedTarget=x,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),$=0;function Q(h,x,_,T,q){this.listener=h,this.proxy=null,this.src=x,this.type=_,this.capture=!!T,this.ha=q,this.key=++$,this.da=this.fa=!1}function me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function he(h,x,_){for(const T in h)x.call(_,h[T],T,h)}function ve(h,x){for(const _ in h)x.call(void 0,h[_],_,h)}function k(h){const x={};for(const _ in h)x[_]=h[_];return x}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(h,x){let _,T;for(let q=1;q<arguments.length;q++){T=arguments[q];for(_ in T)h[_]=T[_];for(let K=0;K<ee.length;K++)_=ee[K],Object.prototype.hasOwnProperty.call(T,_)&&(h[_]=T[_])}}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,x,_,T,q){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const ge=Se(h,x,T,q);return ge>-1?(x=h[ge],_||(x.fa=!1)):(x=new Q(x,this.src,K,!!T,q),x.fa=_,h.push(x)),x};function le(h,x){const _=x.type;if(_ in h.g){var T=h.g[_],q=Array.prototype.indexOf.call(T,x,void 0),K;(K=q>=0)&&Array.prototype.splice.call(T,q,1),K&&(me(x),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Se(h,x,_,T){for(let q=0;q<h.length;++q){const K=h[q];if(!K.da&&K.listener==x&&K.capture==!!_&&K.ha==T)return q}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),it={};function De(h,x,_,T,q){if(Array.isArray(x)){for(let K=0;K<x.length;K++)De(h,x[K],_,T,q);return null}return _=ot(_),h&&h[_e]?h.J(x,_,y(T)?!!T.capture:!1,q):en(h,x,_,!1,T,q)}function en(h,x,_,T,q,K){if(!x)throw Error("Invalid event type");const ge=y(q)?!!q.capture:!!q;let Le=ae(h);if(Le||(h[Ie]=Le=new pe(h)),_=Le.add(x,_,T,ge,K),_.proxy)return _;if(T=we(),_.proxy=T,T.src=h,T.listener=_,h.addEventListener)M||(q=ge),q===void 0&&(q=!1),h.addEventListener(x.toString(),T,q);else if(h.attachEvent)h.attachEvent(ke(x.toString()),T);else if(h.addListener&&h.removeListener)h.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function we(){function h(_){return x.call(h.src,h.listener,_)}const x=z;return h}function J(h,x,_,T,q){if(Array.isArray(x))for(var K=0;K<x.length;K++)J(h,x[K],_,T,q);else T=y(T)?!!T.capture:!!T,_=ot(_),h&&h[_e]?(h=h.i,K=String(x).toString(),K in h.g&&(x=h.g[K],_=Se(x,_,T,q),_>-1&&(me(x[_]),Array.prototype.splice.call(x,_,1),x.length==0&&(delete h.g[K],h.h--)))):h&&(h=ae(h))&&(x=h.g[x.toString()],h=-1,x&&(h=Se(x,_,T,q)),(_=h>-1?x[h]:null)&&Ae(_))}function Ae(h){if(typeof h!="number"&&h&&!h.da){var x=h.src;if(x&&x[_e])le(x.i,h);else{var _=h.type,T=h.proxy;x.removeEventListener?x.removeEventListener(_,T,h.capture):x.detachEvent?x.detachEvent(ke(_),T):x.addListener&&x.removeListener&&x.removeListener(T),(_=ae(x))?(le(_,h),_.h==0&&(_.src=null,x[Ie]=null)):me(h)}}}function ke(h){return h in it?it[h]:it[h]="on"+h}function z(h,x){if(h.da)h=!0;else{x=new Ee(x,this);const _=h.listener,T=h.ha||h.src;h.fa&&Ae(h),h=_.call(T,x)}return h}function ae(h){return h=h[Ie],h instanceof pe?h:null}var qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(h){return typeof h=="function"?h:(h[qe]||(h[qe]=function(x){return h.handleEvent(x)}),h[qe])}function Fe(){O.call(this),this.i=new pe(this),this.M=this,this.G=null}E(Fe,O),Fe.prototype[_e]=!0,Fe.prototype.removeEventListener=function(h,x,_,T){J(this,h,x,_,T)};function C(h,x){var _,T=h.G;if(T)for(_=[];T;T=T.G)_.push(T);if(h=h.M,T=x.type||x,typeof x=="string")x=new j(x,h);else if(x instanceof j)x.target=x.target||h;else{var q=x;x=new j(T,h),fe(x,q)}q=!0;let K,ge;if(_)for(ge=_.length-1;ge>=0;ge--)K=x.g=_[ge],q=de(K,T,!0,x)&&q;if(K=x.g=h,q=de(K,T,!0,x)&&q,q=de(K,T,!1,x)&&q,_)for(ge=0;ge<_.length;ge++)K=x.g=_[ge],q=de(K,T,!1,x)&&q}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var h=this.i;for(const x in h.g){const _=h.g[x];for(let T=0;T<_.length;T++)me(_[T]);delete h.g[x],h.h--}}this.G=null},Fe.prototype.J=function(h,x,_,T){return this.i.add(String(h),x,!1,_,T)},Fe.prototype.K=function(h,x,_,T){return this.i.add(String(h),x,!0,_,T)};function de(h,x,_,T){if(x=h.i.g[String(x)],!x)return!0;x=x.concat();let q=!0;for(let K=0;K<x.length;++K){const ge=x[K];if(ge&&!ge.da&&ge.capture==_){const Le=ge.listener,Dt=ge.ha||ge.src;ge.fa&&le(h.i,ge),q=Le.call(Dt,T)!==!1&&q}}return q&&!T.defaultPrevented}function Me(h,x){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:m.setTimeout(h,x||0)}function Qe(h){h.g=Me(()=>{h.g=null,h.i&&(h.i=!1,Qe(h))},h.l);const x=h.h;h.h=null,h.m.apply(null,x)}class Yt extends O{constructor(x,_){super(),this.m=x,this.l=_,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Qe(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(h){O.call(this),this.h=h,this.g={}}E(sr,O);var Wi=[];function el(h){he(h.g,function(x,_){this.g.hasOwnProperty(_)&&Ae(x)},h),h.g={}}sr.prototype.N=function(){sr.Z.N.call(this),el(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ua=m.JSON.stringify,nh=m.JSON.parse,Do=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Mo(){}function Io(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){j.call(this,"d")}E(tn,j);function Pn(){j.call(this,"c")}E(Pn,j);var Rt={},Oo=null;function Fr(){return Oo=Oo||new Fe}Rt.Ia="serverreachability";function Vo(h){j.call(this,Rt.Ia,h)}E(Vo,j);function fs(h){const x=Fr();C(x,new Vo(x))}Rt.STAT_EVENT="statevent";function ar(h,x){j.call(this,Rt.STAT_EVENT,h),this.stat=x}E(ar,j);function Vt(h){const x=Fr();C(x,new ar(x,h))}Rt.Ja="timingevent";function ms(h,x){j.call(this,Rt.Ja,h),this.size=x}E(ms,j);function gs(h,x){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},x)}function es(){this.g=!0}es.prototype.ua=function(){this.g=!1};function sh(h,x,_,T,q,K){h.info(function(){if(h.g)if(K){var ge="",Le=K.split("&");for(let at=0;at<Le.length;at++){var Dt=Le[at].split("=");if(Dt.length>1){const Et=Dt[0];Dt=Dt[1];const Hn=Et.split("_");ge=Hn.length>=2&&Hn[1]=="type"?ge+(Et+"="+Dt+"&"):ge+(Et+"=redacted&")}}}else ge=null;else ge=K;return"XMLHTTP REQ ("+T+") [attempt "+q+"]: "+x+`
`+_+`
`+ge})}function ko(h,x,_,T,q,K,ge){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+q+"]: "+x+`
`+_+`
`+K+" "+ge})}function ps(h,x,_,T){h.info(function(){return"XMLHTTP TEXT ("+x+"): "+ah(h,_)+(T?" "+T:"")})}function rr(h,x){h.info(function(){return"TIMEOUT: "+x})}es.prototype.info=function(){};function ah(h,x){if(!h.g)return x;if(!x)return null;try{const K=JSON.parse(x);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var _=K[h];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var q=T[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ge=1;ge<T.length;ge++)T[ge]=""}}}}return ua(K)}catch{return x}}var ir={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nl;function lr(){}E(lr,Mo),lr.prototype.g=function(){return new XMLHttpRequest},nl=new lr;function Bs(h){return encodeURIComponent(String(h))}function zo(h){var x=1;h=h.split(":");const _=[];for(;x>0&&h.length;)_.push(h.shift()),x--;return h.length&&_.push(h.join(":")),_}function ts(h,x,_,T){this.j=h,this.i=x,this.l=_,this.S=T||1,this.V=new sr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var kt={},Xt={};function ys(h,x,_){h.M=1,h.A=or(Ut(x)),h.u=_,h.R=!0,Gr(h,null)}function Gr(h,x){h.F=Date.now(),xs(h),h.B=Ut(h.A);var _=h.B,T=h.S;Array.isArray(T)||(T=[String(T)]),Kr(_.i,"t",T),h.C=0,_=h.j.L,h.h=new ns,h.g=Jo(h.j,_?x:null,!h.u),h.P>0&&(h.O=new Yt(g(h.Y,h,h.g),h.P)),x=h.V,_=h.g,T=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Wi[0]=q.toString()),q=Wi);for(let K=0;K<q.length;K++){const ge=De(_,q[K],T||x.handleEvent,!1,x.h||x);if(!ge)break;x.g[ge.key]=ge}x=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,x)):(h.v="GET",h.g.ea(h.B,h.v,null,x)),fs(),sh(h.i,h.v,h.B,h.l,h.S,h.u)}ts.prototype.ba=function(h){h=h.target;const x=this.O;x&&rs(h)==3?x.j():this.Y(h)},ts.prototype.Y=function(h){try{if(h==this.g)e:{const Le=rs(this.g),Dt=this.g.ya(),at=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||Le!=4||Dt==7||(Dt==8||at<=0?fs(3):fs(2)),vs(this);var x=this.g.ca();this.X=x;var _=rh(this);if(this.o=x==200,ko(this.i,this.v,this.B,this.l,this.S,Le,x),this.o){if(this.U&&!this.L){t:{if(this.g){var T,q=this.g;if((T=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(T)){var K=T;break t}}K=null}if(h=K)ps(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bs(this,h);else{this.o=!1,this.m=3,Vt(12),Sn(this),Ln(this);break e}}if(this.R){h=!0;let Et;for(;!this.K&&this.C<_.length;)if(Et=Po(this,_),Et==Xt){Le==4&&(this.m=4,Vt(14),h=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==kt){this.m=4,Vt(15),ps(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else ps(this.i,this.l,Et,null),bs(this,Et);if(Uo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||_.length!=0||this.h.h||(this.m=1,Vt(16),h=!1),this.o=this.o&&h,!h)ps(this.i,this.l,_,"[Invalid Chunked Response]"),Sn(this),Ln(this);else if(_.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),yl(ge),ge.P=!0,Vt(11))}}else ps(this.i,this.l,_,null),bs(this,_);Le==4&&Sn(this),this.o&&!this.K&&(Le==4?Qo(this.j,this):(this.o=!1,xs(this)))}else Hs(this.g),x==400&&_.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Sn(this),Ln(this)}}}catch{}finally{}};function rh(h){if(!Uo(h))return h.g.la();const x=nn(h.g);if(x==="")return"";let _="";const T=x.length,q=rs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Sn(h),Ln(h),"";h.h.i=new m.TextDecoder}for(let K=0;K<T;K++)h.h.h=!0,_+=h.h.i.decode(x[K],{stream:!(q&&K==T-1)});return x.length=0,h.h.g+=_,h.C=0,h.h.g}function Uo(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Po(h,x){var _=h.C,T=x.indexOf(`
`,_);return T==-1?Xt:(_=Number(x.substring(_,T)),isNaN(_)?kt:(T+=1,T+_>x.length?Xt:(x=x.slice(T,T+_),h.C=T+_,x)))}ts.prototype.cancel=function(){this.K=!0,Sn(this)};function xs(h){h.T=Date.now()+h.H,$r(h,h.H)}function $r(h,x){if(h.D!=null)throw Error("WatchDog timer not null");h.D=gs(g(h.aa,h),x)}function vs(h){h.D&&(m.clearTimeout(h.D),h.D=null)}ts.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(rr(this.i,this.B),this.M!=2&&(fs(),Vt(17)),Sn(this),this.m=2,Ln(this)):$r(this,this.T-h)};function Ln(h){h.j.I==0||h.K||Qo(h.j,h)}function Sn(h){vs(h);var x=h.O;x&&typeof x.dispose=="function"&&x.dispose(),h.O=null,el(h.V),h.g&&(x=h.g,h.g=null,x.abort(),x.dispose())}function bs(h,x){try{var _=h.j;if(_.I!=0&&(_.g==h||Es(_.h,h))){if(!h.L&&Es(_.h,h)&&_.I==3){try{var T=_.Ba.g.parse(x)}catch{T=null}if(Array.isArray(T)&&T.length==3){var q=T;if(q[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)ei(_),xa(_);else break e;gr(_),Vt(18)}}else _.xa=q[1],0<_.xa-_.K&&q[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=gs(g(_.Va,_),6e3));_s(_.h)<=1&&_.ta&&(_.ta=void 0)}else As(_,11)}else if((h.L||_.g==h)&&ei(_),!S(x))for(q=_.Ba.g.parse(x),x=0;x<q.length;x++){let at=q[x];const Et=at[0];if(!(Et<=_.K))if(_.K=Et,at=at[1],_.I==2)if(at[0]=="c"){_.M=at[1],_.ba=at[2];const Hn=at[3];Hn!=null&&(_.ka=Hn,_.j.info("VER="+_.ka));const Cs=at[4];Cs!=null&&(_.za=Cs,_.j.info("SVER="+_.za));const is=at[5];is!=null&&typeof is=="number"&&is>0&&(T=1.5*is,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const ls=h.g;if(ls){const pr=ls.g?ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pr){var K=T.h;K.g||pr.indexOf("spdy")==-1&&pr.indexOf("quic")==-1&&pr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(rl(K,K.h),K.h=null))}if(T.G){const ti=ls.g?ls.g.getResponseHeader("X-HTTP-Session-Id"):null;ti&&(T.wa=ti,ct(T.J,T.G,ti))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ge=h;if(T.na=Zo(T,T.L?T.ba:null,T.W),ge.L){il(T.h,ge);var Le=ge,Dt=T.O;Dt&&(Le.H=Dt),Le.D&&(vs(Le),xs(Le)),T.g=ge}else $o(T);_.i.length>0&&Ss(_)}else at[0]!="stop"&&at[0]!="close"||As(_,7);else _.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?As(_,7):gl(_):at[0]!="noop"&&_.l&&_.l.qa(at),_.A=0)}}fs(4)}catch{}}var zt=class{constructor(h,x){this.g=h,this.map=x}};function sl(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function al(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function _s(h){return h.h?1:h.g?h.g.size:0}function Es(h,x){return h.h?h.h==x:h.g?h.g.has(x):!1}function rl(h,x){h.g?h.g.add(x):h.h=x}function il(h,x){h.h&&h.h==x?h.h=null:h.g&&h.g.has(x)&&h.g.delete(x)}sl.prototype.cancel=function(){if(this.i=ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ll(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let x=h.i;for(const _ of h.g.values())x=x.concat(_.G);return x}return V(h.i)}var Lo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yr(h,x){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const T=h[_].indexOf("=");let q,K=null;T>=0?(q=h[_].substring(0,T),K=h[_].substring(T+1)):q=h[_],x(q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function An(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;h instanceof An?(this.l=h.l,Zt(this,h.j),this.o=h.o,this.g=h.g,ha(this,h.u),this.h=h.h,ol(this,Fo(h.i)),this.m=h.m):h&&(x=String(h).match(Lo))?(this.l=!1,Zt(this,x[1]||"",!0),this.o=Ns(x[2]||""),this.g=Ns(x[3]||"",!0),ha(this,x[4]),this.h=Ns(x[5]||"",!0),ol(this,x[6]||"",!0),this.m=Ns(x[7]||"")):(this.l=!1,this.i=new fa(null,this.l))}An.prototype.toString=function(){const h=[];var x=this.j;x&&h.push(cr(x,Qr,!0),":");var _=this.g;return(_||x=="file")&&(h.push("//"),(x=this.o)&&h.push(cr(x,Qr,!0),"@"),h.push(Bs(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(cr(_,_.charAt(0)=="/"?cl:Bo,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",cr(_,qo)),h.join("")},An.prototype.resolve=function(h){const x=Ut(this);let _=!!h.j;_?Zt(x,h.j):_=!!h.o,_?x.o=h.o:_=!!h.g,_?x.g=h.g:_=h.u!=null;var T=h.h;if(_)ha(x,h.u);else if(_=!!h.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var q=x.h.lastIndexOf("/");q!=-1&&(T=x.h.slice(0,q+1)+T)}if(q=T,q==".."||q==".")T="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){T=q.lastIndexOf("/",0)==0,q=q.split("/");const K=[];for(let ge=0;ge<q.length;){const Le=q[ge++];Le=="."?T&&ge==q.length&&K.push(""):Le==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),T&&ge==q.length&&K.push("")):(K.push(Le),T=!0)}T=K.join("/")}else T=q}return _?x.h=T:_=h.i.toString()!=="",_?ol(x,Fo(h.i)):_=!!h.m,_&&(x.m=h.m),x};function Ut(h){return new An(h)}function Zt(h,x,_){h.j=_?Ns(x,!0):x,h.j&&(h.j=h.j.replace(/:$/,""))}function ha(h,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);h.u=x}else h.u=null}function ol(h,x,_){x instanceof fa?(h.i=x,Xr(h.i,h.l)):(_||(x=cr(x,da)),h.i=new fa(x,h.l))}function ct(h,x,_){h.i.set(x,_)}function or(h){return ct(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ns(h,x){return h?x?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function cr(h,x,_){return typeof h=="string"?(h=encodeURI(h).replace(x,yn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Qr=/[#\/\?@]/g,Bo=/[#\?:]/g,cl=/[#\?]/g,da=/[#\?@]/g,qo=/#/g;function fa(h,x){this.h=this.g=null,this.i=h||null,this.j=!!x}function xn(h){h.g||(h.g=new Map,h.h=0,h.i&&Yr(h.i,function(x,_){h.add(decodeURIComponent(x.replace(/\+/g," ")),_)}))}r=fa.prototype,r.add=function(h,x){xn(this),this.i=null,h=ma(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(x),this.h+=1,this};function Ho(h,x){xn(h),x=ma(h,x),h.g.has(x)&&(h.i=null,h.h-=h.g.get(x).length,h.g.delete(x))}function ul(h,x){return xn(h),x=ma(h,x),h.g.has(x)}r.forEach=function(h,x){xn(this),this.g.forEach(function(_,T){_.forEach(function(q){h.call(x,q,T,this)},this)},this)};function hl(h,x){xn(h);let _=[];if(typeof x=="string")ul(h,x)&&(_=_.concat(h.g.get(ma(h,x))));else for(h=Array.from(h.g.values()),x=0;x<h.length;x++)_=_.concat(h[x]);return _}r.set=function(h,x){return xn(this),this.i=null,h=ma(this,h),ul(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[x]),this.h+=1,this},r.get=function(h,x){return h?(h=hl(this,h),h.length>0?String(h[0]):x):x};function Kr(h,x,_){Ho(h,x),_.length>0&&(h.i=null,h.g.set(ma(h,x),V(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],x=Array.from(this.g.keys());for(let T=0;T<x.length;T++){var _=x[T];const q=Bs(_);_=hl(this,_);for(let K=0;K<_.length;K++){let ge=q;_[K]!==""&&(ge+="="+Bs(_[K])),h.push(ge)}}return this.i=h.join("&")};function Fo(h){const x=new fa;return x.i=h.i,h.g&&(x.g=new Map(h.g),x.h=h.h),x}function ma(h,x){return x=String(x),h.j&&(x=x.toLowerCase()),x}function Xr(h,x){x&&!h.j&&(xn(h),h.i=null,h.g.forEach(function(_,T){const q=T.toLowerCase();T!=q&&(Ho(this,T),Kr(this,q,_))},h)),h.j=x}function ss(h,x){const _=new es;if(m.Image){const T=new Image;T.onload=v(Bn,_,"TestLoadImage: loaded",!0,x,T),T.onerror=v(Bn,_,"TestLoadImage: error",!1,x,T),T.onabort=v(Bn,_,"TestLoadImage: abort",!1,x,T),T.ontimeout=v(Bn,_,"TestLoadImage: timeout",!1,x,T),m.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else x(!1)}function dl(h,x){const _=new es,T=new AbortController,q=setTimeout(()=>{T.abort(),Bn(_,"TestPingServer: timeout",!1,x)},1e4);fetch(h,{signal:T.signal}).then(K=>{clearTimeout(q),K.ok?Bn(_,"TestPingServer: ok",!0,x):Bn(_,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(q),Bn(_,"TestPingServer: error",!1,x)})}function Bn(h,x,_,T,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),T(_)}catch{}}function ga(){this.g=new Do}function ws(h){this.i=h.Sb||null,this.h=h.ab||!1}E(ws,Mo),ws.prototype.g=function(){return new ur(this.i,this.h)};function ur(h,x){Fe.call(this),this.H=h,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ur,Fe),r=ur.prototype,r.open=function(h,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=x,this.readyState=1,as(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(x.body=h),(this.H||m).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pa(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,as(this)),this.g&&(this.readyState=3,as(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var x=h.value?h.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!h.done}))&&(this.response=this.responseText+=x)}h.done?pa(this):as(this),this.readyState==3&&Zr(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,pa(this))},r.Na=function(h){this.g&&(this.response=h,pa(this))},r.ga=function(){this.g&&pa(this)};function pa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,as(h)}r.setRequestHeader=function(h,x){this.A.append(h,x)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],x=this.h.entries();for(var _=x.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=x.next();return h.join(`\r
`)};function as(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qn(h){let x="";return he(h,function(_,T){x+=T,x+=":",x+=_,x+=`\r
`}),x}function hr(h,x,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=qn(_),typeof h=="string"?_!=null&&Bs(_):ct(h,x,_))}function dt(h){Fe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(dt,Fe);var Ts=/^https?$/i,fl=["POST","PUT"];r=dt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,x,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);x=x?x.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nl.g(),this.g.onreadystatechange=w(g(this.Ca,this));try{this.B=!0,this.g.open(x,String(h),!0),this.B=!1}catch(K){dr(this,K);return}if(h=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var q in T)_.set(q,T[q]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const K of T.keys())_.set(K,T.get(K));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),q=m.FormData&&h instanceof m.FormData,!(Array.prototype.indexOf.call(fl,x,void 0)>=0)||T||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ge]of _)this.g.setRequestHeader(K,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){dr(this,K)}};function dr(h,x){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=x,h.o=5,ml(h),qs(h)}function ml(h){h.A||(h.A=!0,C(h,"complete"),C(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,C(this,"complete"),C(this,"abort"),qs(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qs(this,!0)),dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?fr(this):this.Xa())},r.Xa=function(){fr(this)};function fr(h){if(h.h&&typeof u<"u"){if(h.v&&rs(h)==4)setTimeout(h.Ca.bind(h),0);else if(C(h,"readystatechange"),rs(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var _;if(!(_=x)){var T;if(T=K===0){let ge=String(h.D).match(Lo)[1]||null;!ge&&m.self&&m.self.location&&(ge=m.self.location.protocol.slice(0,-1)),T=!Ts.test(ge?ge.toLowerCase():"")}_=T}if(_)C(h,"complete"),C(h,"success");else{h.o=6;try{var q=rs(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",ml(h)}}finally{qs(h)}}}}function qs(h,x){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,x||C(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function rs(h){return h.g?h.g.readyState:0}r.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var x=this.g.responseText;return h&&x.indexOf(h)==0&&(x=x.substring(h.length)),nh(x)}};function nn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Hs(h){const x={};h=(h.g&&rs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<h.length;T++){if(S(h[T]))continue;var _=zo(h[T]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=x[q]||[];x[q]=K,K.push(_)}ve(x,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function js(h,x,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||x}function ya(h){this.za=0,this.i=[],this.j=new es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=js("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=js("baseRetryDelayMs",5e3,h),this.Za=js("retryDelaySeedMs",1e4,h),this.Ta=js("forwardChannelMaxRetries",2,h),this.va=js("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new sl(h&&h.concurrentRequestLimit),this.Ba=new ga,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ya.prototype,r.ka=8,r.I=1,r.connect=function(h,x,_,T){Vt(0),this.W=h,this.H=x||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Zo(this,null,this.W),Ss(this)};function gl(h){if(Jr(h),h.I==3){var x=h.V++,_=Ut(h.J);if(ct(_,"SID",h.M),ct(_,"RID",x),ct(_,"TYPE","terminate"),mr(h,_),x=new ts(h,h.j,x),x.M=2,x.A=or(Ut(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(x.A.toString(),"")}catch{}!_&&m.Image&&(new Image().src=x.A,_=!0),_||(x.g=Jo(x.j,null),x.g.ea(x.A)),x.F=Date.now(),xs(x)}Xo(h)}function xa(h){h.g&&(yl(h),h.g.cancel(),h.g=null)}function Jr(h){xa(h),h.v&&(m.clearTimeout(h.v),h.v=null),ei(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&m.clearTimeout(h.m),h.m=null)}function Ss(h){if(!al(h.h)&&!h.m){h.m=!0;var x=h.Ea;Te||A(),je||(Te(),je=!0),D.add(x,h),h.D=0}}function Wr(h,x){return _s(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=x.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=gs(g(h.Ea,h,x),Ko(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new ts(this,this.j,h);let K=this.o;if(this.U&&(K?(K=k(K),fe(K,this.U)):K=this.U),this.u!==null||this.R||(q.J=K,K=null),this.S)e:{for(var x=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(x+=T,x>4096){x=_;break e}if(x===4096||_===this.i.length-1){x=_+1;break e}}x=1e3}else x=1e3;x=Go(this,q,x),_=Ut(this.J),ct(_,"RID",h),ct(_,"CVER",22),this.G&&ct(_,"X-HTTP-Session-Id",this.G),mr(this,_),K&&(this.R?x="headers="+Bs(qn(K))+"&"+x:this.u&&hr(_,this.u,K)),rl(this.h,q),this.Ra&&ct(_,"TYPE","init"),this.S?(ct(_,"$req",x),ct(_,"SID","null"),q.U=!0,ys(q,_,null)):ys(q,_,x),this.I=2}}else this.I==3&&(h?pl(this,h):this.i.length==0||al(this.h)||pl(this))};function pl(h,x){var _;x?_=x.l:_=h.V++;const T=Ut(h.J);ct(T,"SID",h.M),ct(T,"RID",_),ct(T,"AID",h.K),mr(h,T),h.u&&h.o&&hr(T,h.u,h.o),_=new ts(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),x&&(h.i=x.G.concat(h.i)),x=Go(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),rl(h.h,_),ys(_,T,x)}function mr(h,x){h.H&&he(h.H,function(_,T){ct(x,T,_)}),h.l&&he({},function(_,T){ct(x,T,_)})}function Go(h,x,_){_=Math.min(h.i.length,_);const T=h.l?g(h.l.Ka,h.l,h):null;e:{var q=h.i;let Le=-1;for(;;){const Dt=["count="+_];Le==-1?_>0?(Le=q[0].g,Dt.push("ofs="+Le)):Le=0:Dt.push("ofs="+Le);let at=!0;for(let Et=0;Et<_;Et++){var K=q[Et].g;const Hn=q[Et].map;if(K-=Le,K<0)Le=Math.max(0,q[Et].g-100),at=!1;else try{K="req"+K+"_"||"";try{var ge=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Cs,is]of ge){let ls=is;y(is)&&(ls=ua(is)),Dt.push(K+Cs+"="+encodeURIComponent(ls))}}catch(Cs){throw Dt.push(K+"type="+encodeURIComponent("_badmap")),Cs}}catch{T&&T(Hn)}}if(at){ge=Dt.join("&");break e}}ge=void 0}return h=h.i.splice(0,_),x.G=h,ge}function $o(h){if(!h.g&&!h.v){h.Y=1;var x=h.Da;Te||A(),je||(Te(),je=!0),D.add(x,h),h.A=0}}function gr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=gs(g(h.Da,h),Ko(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Yo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=gs(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),xa(this),Yo(this))};function yl(h){h.B!=null&&(m.clearTimeout(h.B),h.B=null)}function Yo(h){h.g=new ts(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var x=Ut(h.na);ct(x,"RID","rpc"),ct(x,"SID",h.M),ct(x,"AID",h.K),ct(x,"CI",h.F?"0":"1"),!h.F&&h.ia&&ct(x,"TO",h.ia),ct(x,"TYPE","xmlhttp"),mr(h,x),h.u&&h.o&&hr(x,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=or(Ut(x)),_.u=null,_.R=!0,Gr(_,h)}r.Va=function(){this.C!=null&&(this.C=null,xa(this),gr(this),Vt(19))};function ei(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function Qo(h,x){var _=null;if(h.g==x){ei(h),yl(h),h.g=null;var T=2}else if(Es(h.h,x))_=x.G,il(h.h,x),T=1;else return;if(h.I!=0){if(x.o)if(T==1){_=x.u?x.u.length:0,x=Date.now()-x.F;var q=h.D;T=Fr(),C(T,new ms(T,_)),Ss(h)}else $o(h);else if(q=x.m,q==3||q==0&&x.X>0||!(T==1&&Wr(h,x)||T==2&&gr(h)))switch(_&&_.length>0&&(x=h.h,x.i=x.i.concat(_)),q){case 1:As(h,5);break;case 4:As(h,10);break;case 3:As(h,6);break;default:As(h,2)}}}function Ko(h,x){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*x}function As(h,x){if(h.j.info("Error code "+x),x==2){var _=g(h.bb,h),T=h.Ua;const q=!T;T=new An(T||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Zt(T,"https"),or(T),q?ss(T.toString(),_):dl(T.toString(),_)}else Vt(2);h.I=0,h.l&&h.l.pa(x),Xo(h),Jr(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Xo(h){if(h.I=0,h.ja=[],h.l){const x=ll(h.h);(x.length!=0||h.i.length!=0)&&(P(h.ja,x),P(h.ja,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.oa()}}function Zo(h,x,_){var T=_ instanceof An?Ut(_):new An(_);if(T.g!="")x&&(T.g=x+"."+T.g),ha(T,T.u);else{var q=m.location;T=q.protocol,x=x?x+"."+q.hostname:q.hostname,q=+q.port;const K=new An(null);T&&Zt(K,T),x&&(K.g=x),q&&ha(K,q),_&&(K.h=_),T=K}return _=h.G,x=h.wa,_&&x&&ct(T,_,x),ct(T,"VER",h.ka),mr(h,T),T}function Jo(h,x,_){if(x&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=h.Aa&&!h.ma?new dt(new ws({ab:_})):new dt(h.ma),x.Fa(h.L),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wo(){}r=Wo.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function va(){}va.prototype.g=function(h,x){return new gn(h,x)};function gn(h,x){Fe.call(this),this.g=new ya(x),this.l=h,this.h=x&&x.messageUrlParams||null,h=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(h?h["X-WebChannel-Content-Type"]=x.messageContentType:h={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(h?h["X-WebChannel-Client-Profile"]=x.sa:h={"X-WebChannel-Client-Profile":x.sa}),this.g.U=h,(h=x&&x.Qb)&&!S(h)&&(this.g.u=h),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!S(x)&&(this.g.G=x,h=this.h,h!==null&&x in h&&(h=this.h,x in h&&delete h[x])),this.j=new Fs(this)}E(gn,Fe),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){gl(this.g)},gn.prototype.o=function(h){var x=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=ua(h),h=_);x.i.push(new zt(x.Ya++,h)),x.I==3&&Ss(x)},gn.prototype.N=function(){this.g.l=null,delete this.j,gl(this.g),delete this.g,gn.Z.N.call(this)};function ec(h){tn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var x=h.__sm__;if(x){e:{for(const _ in x){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,x=x!==null&&h in x?x[h]:void 0),this.data=x}else this.data=h}E(ec,tn);function tc(){Pn.call(this),this.status=1}E(tc,Pn);function Fs(h){this.g=h}E(Fs,Wo),Fs.prototype.ra=function(){C(this.g,"a")},Fs.prototype.qa=function(h){C(this.g,new ec(h))},Fs.prototype.pa=function(h){C(this.g,new tc)},Fs.prototype.oa=function(){C(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,dv=function(){return new va},hv=function(){return Fr()},uv=Rt,Sf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ir.NO_ERROR=0,ir.TIMEOUT=8,ir.HTTP_ERROR=6,uu=ir,tl.COMPLETE="complete",cv=tl,Io.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,so=Io,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,ov=dt}).apply(typeof ru<"u"?ru:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi="12.9.0";function kN(r){Qi=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new tv("@firebase/firestore");function Di(){return kr.logLevel}function xe(r,...t){if(kr.logLevel<=tt.DEBUG){const s=t.map(Jf);kr.debug(`Firestore (${Qi}): ${r}`,...s)}}function oa(r,...t){if(kr.logLevel<=tt.ERROR){const s=t.map(Jf);kr.error(`Firestore (${Qi}): ${r}`,...s)}}function zr(r,...t){if(kr.logLevel<=tt.WARN){const s=t.map(Jf);kr.warn(`Firestore (${Qi}): ${r}`,...s)}}function Jf(r){if(typeof r=="string")return r;try{return(function(s){return JSON.stringify(s)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(r,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,fv(r,a,s)}function fv(r,t,s){let a=`FIRESTORE (${Qi}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(s!==void 0)try{a+=" CONTEXT: "+JSON.stringify(s)}catch{a+=" CONTEXT: "+s}throw oa(a),new Error(a)}function lt(r,t,s,a){let c="Unexpected state";typeof s=="string"?c=s:a=s,r||fv(t,c,a)}function Pe(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Yi{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.promise=new Promise(((t,s)=>{this.resolve=t,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable((()=>s(fn.UNAUTHENTICATED)))}shutdown(){}}class UN{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class PN{constructor(t){this.t=t,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){lt(this.o===void 0,42304);let a=this.i;const c=p=>this.i!==a?(a=this.i,s(p)):Promise.resolve();let u=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ia,t.enqueueRetryable((()=>c(this.currentUser)))};const m=()=>{const p=u;t.enqueueRetryable((async()=>{await p.promise,await c(this.currentUser)}))},y=p=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((p=>y(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?y(p):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ia)}}),0),m()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((a=>this.i!==t?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(lt(typeof a.accessToken=="string",31837,{l:a}),new mv(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return lt(t===null||typeof t=="string",2055,{h:t}),new fn(t)}}class LN{constructor(t,s,a){this.P=t,this.T=s,this.I=a,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class BN{constructor(t,s,a){this.P=t,this.T=s,this.I=a}getToken(){return Promise.resolve(new LN(this.P,this.T,this.I))}start(t,s){t.enqueueRetryable((()=>s(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qN{constructor(t,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vN(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,s){lt(this.o===void 0,3512);const a=u=>{u.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const m=u.token!==this.m;return this.m=u.token,xe("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?s(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>a(u)))};const c=u=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>c(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?c(u):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((s=>s?(lt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new wx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let a=0;a<r;a++)s[a]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const c=HN(40);for(let u=0;u<c.length;++u)a.length<20&&c[u]<s&&(a+=t.charAt(c[u]%62))}return a}}function Ze(r,t){return r<t?-1:r>t?1:0}function Af(r,t){const s=Math.min(r.length,t.length);for(let a=0;a<s;a++){const c=r.charAt(a),u=t.charAt(a);if(c!==u)return hf(c)===hf(u)?Ze(c,u):hf(c)?1:-1}return Ze(r.length,t.length)}const FN=55296,GN=57343;function hf(r){const t=r.charCodeAt(0);return t>=FN&&t<=GN}function Bi(r,t,s){return r.length===t.length&&r.every(((a,c)=>s(a,t[c])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="__name__";class Os{constructor(t,s,a){s===void 0?s=0:s>t.length&&Ve(637,{offset:s,range:t.length}),a===void 0?a=t.length-s:a>t.length-s&&Ve(1746,{length:a,range:t.length-s}),this.segments=t,this.offset=s,this.len=a}get length(){return this.len}isEqual(t){return Os.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof Os?t.forEach((a=>{s.push(a)})):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,a=this.limit();s<a;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const a=Math.min(t.length,s.length);for(let c=0;c<a;c++){const u=Os.compareSegments(t.get(c),s.get(c));if(u!==0)return u}return Ze(t.length,s.length)}static compareSegments(t,s){const a=Os.isNumericId(t),c=Os.isNumericId(s);return a&&!c?-1:!a&&c?1:a&&c?Os.extractNumericId(t).compare(Os.extractNumericId(s)):Af(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ga.fromString(t.substring(4,t.length-2))}}class vt extends Os{construct(t,s,a){return new vt(t,s,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const a of t){if(a.indexOf("//")>=0)throw new ye(se.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);s.push(...a.split("/").filter((c=>c.length>0)))}return new vt(s)}static emptyPath(){return new vt([])}}const $N=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Os{construct(t,s,a){return new cn(t,s,a)}static isValidIdentifier(t){return $N.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tx}static keyField(){return new cn([Tx])}static fromServerFormat(t){const s=[];let a="",c=0;const u=()=>{if(a.length===0)throw new ye(se.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(a),a=""};let m=!1;for(;c<t.length;){const y=t[c];if(y==="\\"){if(c+1===t.length)throw new ye(se.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[c+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ye(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=p,c+=2}else y==="`"?(m=!m,c++):y!=="."||m?(a+=y,c++):(u(),c++)}if(u(),m)throw new ye(se.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new cn(s)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.path=t}static fromPath(t){return new Re(vt.fromString(t))}static fromName(t){return new Re(vt.fromString(t).popFirst(5))}static empty(){return new Re(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&vt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return vt.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Re(new vt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(r,t,s){if(!s)throw new ye(se.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function YN(r,t,s,a){if(t===!0&&a===!0)throw new ye(se.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function jx(r){if(!Re.isDocumentKey(r))throw new ye(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Sx(r){if(Re.isDocumentKey(r))throw new ye(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function pv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ku(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(a){return a.constructor?a.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Ve(12329,{type:typeof r})}function Ps(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ye(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=ku(r);throw new ye(se.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(r,t){const s={typeString:r};return t&&(s.value=t),s}function wo(r,t){if(!pv(r))throw new ye(se.INVALID_ARGUMENT,"JSON must be an object");let s;for(const a in t)if(t[a]){const c=t[a].typeString,u="value"in t[a]?{value:t[a].value}:void 0;if(!(a in r)){s=`JSON missing required field: '${a}'`;break}const m=r[a];if(c&&typeof m!==c){s=`JSON field '${a}' must be a ${c}.`;break}if(u!==void 0&&m!==u.value){s=`Expected '${a}' field to equal '${u.value}'`;break}}if(s)throw new ye(se.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=-62135596800,Cx=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(t){return yt.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),a=Math.floor((t-1e3*s)*Cx);return new yt(s,a)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<Ax)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cx}_compareTo(t){return this.seconds===t.seconds?Ze(this.nanoseconds,t.nanoseconds):Ze(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(wo(t,yt._jsonSchema))return new yt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Ax;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Gt("string",yt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(t){return new ze(t)}static min(){return new ze(new yt(0,0))}static max(){return new ze(new yt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=-1;function QN(r,t){const s=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,c=ze.fromTimestamp(a===1e9?new yt(s+1,0):new yt(s,a));return new Ya(c,Re.empty(),t)}function KN(r){return new Ya(r.readTime,r.key,go)}class Ya{constructor(t,s,a){this.readTime=t,this.documentKey=s,this.largestBatchId=a}static min(){return new Ya(ze.min(),Re.empty(),go)}static max(){return new Ya(ze.max(),Re.empty(),go)}}function XN(r,t){let s=r.readTime.compareTo(t.readTime);return s!==0?s:(s=Re.comparator(r.documentKey,t.documentKey),s!==0?s:Ze(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ki(r){if(r.code!==se.FAILED_PRECONDITION||r.message!==ZN)throw r;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new ie(((a,c)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(a,c)},this.catchCallback=u=>{this.wrapFailure(s,u).next(a,c)}}))}toPromise(){return new Promise(((t,s)=>{this.next(t,s)}))}wrapUserFunction(t){try{const s=t();return s instanceof ie?s:ie.resolve(s)}catch(s){return ie.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction((()=>t(s))):ie.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction((()=>t(s))):ie.reject(s)}static resolve(t){return new ie(((s,a)=>{s(t)}))}static reject(t){return new ie(((s,a)=>{a(t)}))}static waitFor(t){return new ie(((s,a)=>{let c=0,u=0,m=!1;t.forEach((y=>{++c,y.next((()=>{++u,m&&u===c&&s()}),(p=>a(p)))})),m=!0,u===c&&s()}))}static or(t){let s=ie.resolve(!1);for(const a of t)s=s.next((c=>c?ie.resolve(c):a()));return s}static forEach(t,s){const a=[];return t.forEach(((c,u)=>{a.push(s.call(this,c,u))})),this.waitFor(a)}static mapArray(t,s){return new ie(((a,c)=>{const u=t.length,m=new Array(u);let y=0;for(let p=0;p<u;p++){const g=p;s(t[g]).next((v=>{m[g]=v,++y,y===u&&a(m)}),(v=>c(v)))}}))}static doWhile(t,s){return new ie(((a,c)=>{const u=()=>{t()===!0?s().next((()=>{u()}),c):a()};u()}))}}function WN(r){const t=r.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Xi(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>s.writeSequenceNumber(a))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}zu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=-1;function Uu(r){return r==null}function Eu(r){return r===0&&1/r==-1/0}function ew(r){return typeof r=="number"&&Number.isInteger(r)&&!Eu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="";function tw(r){let t="";for(let s=0;s<r.length;s++)t.length>0&&(t=Rx(t)),t=nw(r.get(s),t);return Rx(t)}function nw(r,t){let s=t;const a=r.length;for(let c=0;c<a;c++){const u=r.charAt(c);switch(u){case"\0":s+="";break;case yv:s+="";break;default:s+=u}}return s}function Rx(r){return r+yv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(r){let t=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t++;return t}function tr(r,t){for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t(s,r[s])}function xv(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t,s){this.comparator=t,this.root=s||on.EMPTY}insert(t,s){return new Tt(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,on.BLACK,null,null))}remove(t){return new Tt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,on.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const a=this.comparator(t,s.key);if(a===0)return s.value;a<0?s=s.left:a>0&&(s=s.right)}return null}indexOf(t){let s=0,a=this.root;for(;!a.isEmpty();){const c=this.comparator(t,a.key);if(c===0)return s+a.left.size;c<0?a=a.left:(s+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((s,a)=>(t(s,a),!1)))}toString(){const t=[];return this.inorderTraversal(((s,a)=>(t.push(`${s}:${a}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new iu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new iu(this.root,t,this.comparator,!1)}getReverseIterator(){return new iu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new iu(this.root,t,this.comparator,!0)}}class iu{constructor(t,s,a,c){this.isReverse=c,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=s?a(t.key,s):1,s&&c&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class on{constructor(t,s,a,c,u){this.key=t,this.value=s,this.color=a??on.RED,this.left=c??on.EMPTY,this.right=u??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,a,c,u){return new on(t??this.key,s??this.value,a??this.color,c??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,a){let c=this;const u=a(t,c.key);return c=u<0?c.copy(null,null,null,c.left.insert(t,s,a),null):u===0?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(t,s,a)),c.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let a,c=this;if(s(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,s),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),s(t,c.key)===0){if(c.right.isEmpty())return on.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,s))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ve(27949);return t+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(t,s,a,c,u){return this}insert(t,s,a){return new on(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.comparator=t,this.data=new Tt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((s,a)=>(t(s),!1)))}forEachInRange(t,s){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const c=a.getNext();if(this.comparator(c.key,t[1])>=0)return;s(c.key)}}forEachWhile(t,s){let a;for(a=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new Mx(this.data.getIterator())}getIteratorFrom(t){return new Mx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach((a=>{s=s.add(a)})),s}isEqual(t){if(!(t instanceof Kt)||this.size!==t.size)return!1;const s=this.data.getIterator(),a=t.data.getIterator();for(;s.hasNext();){const c=s.getNext().key,u=a.getNext().key;if(this.comparator(c,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((s=>{t.push(s)})),t}toString(){const t=[];return this.forEach((s=>t.push(s))),"SortedSet("+t.toString()+")"}copy(t){const s=new Kt(this.comparator);return s.data=t,s}}class Mx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(t){this.fields=t,t.sort(cn.comparator)}static empty(){return new zn([])}unionWith(t){let s=new Kt(cn.comparator);for(const a of this.fields)s=s.add(a);for(const a of t)s=s.add(a);return new zn(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return Bi(this.fields,t.fields,((s,a)=>s.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.binaryString=t}static fromBase64String(t){const s=(function(c){try{return atob(c)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new vv("Invalid base64 string: "+u):u}})(t);return new un(s)}static fromUint8Array(t){const s=(function(c){let u="";for(let m=0;m<c.length;++m)u+=String.fromCharCode(c[m]);return u})(t);return new un(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const a=new Uint8Array(s.length);for(let c=0;c<s.length;c++)a[c]=s.charCodeAt(c);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ze(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}un.EMPTY_BYTE_STRING=new un("");const sw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qa(r){if(lt(!!r,39018),typeof r=="string"){let t=0;const s=sw.exec(r);if(lt(!!s,46558,{timestamp:r}),s[1]){let c=s[1];c=(c+"000000000").substr(0,9),t=Number(c)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Ot(r.seconds),nanos:Ot(r.nanos)}}function Ot(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ka(r){return typeof r=="string"?un.fromBase64String(r):un.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="server_timestamp",_v="__type__",Ev="__previous_value__",Nv="__local_write_time__";function tm(r){var s,a;return((a=(((s=r==null?void 0:r.mapValue)==null?void 0:s.fields)||{})[_v])==null?void 0:a.stringValue)===bv}function Pu(r){const t=r.mapValue.fields[Ev];return tm(t)?Pu(t):t}function po(r){const t=Qa(r.mapValue.fields[Nv].timestampValue);return new yt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t,s,a,c,u,m,y,p,g,v,E){this.databaseId=t,this.appId=s,this.persistenceKey=a,this.host=c,this.ssl=u,this.forceLongPolling=m,this.autoDetectLongPolling=y,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const Nu="(default)";class yo{constructor(t,s){this.projectId=t,this.database=s||Nu}static empty(){return new yo("","")}get isDefaultDatabase(){return this.database===Nu}isEqual(t){return t instanceof yo&&t.projectId===this.projectId&&t.database===this.database}}function rw(r,t){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ye(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(r.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="__type__",iw="__max__",lu={mapValue:{}},Tv="__vector__",wu="value";function Xa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?tm(r)?4:ow(r)?9007199254740991:lw(r)?10:11:Ve(28295,{value:r})}function Ls(r,t){if(r===t)return!0;const s=Xa(r);if(s!==Xa(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return po(r).isEqual(po(t));case 3:return(function(c,u){if(typeof c.timestampValue=="string"&&typeof u.timestampValue=="string"&&c.timestampValue.length===u.timestampValue.length)return c.timestampValue===u.timestampValue;const m=Qa(c.timestampValue),y=Qa(u.timestampValue);return m.seconds===y.seconds&&m.nanos===y.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(c,u){return Ka(c.bytesValue).isEqual(Ka(u.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(c,u){return Ot(c.geoPointValue.latitude)===Ot(u.geoPointValue.latitude)&&Ot(c.geoPointValue.longitude)===Ot(u.geoPointValue.longitude)})(r,t);case 2:return(function(c,u){if("integerValue"in c&&"integerValue"in u)return Ot(c.integerValue)===Ot(u.integerValue);if("doubleValue"in c&&"doubleValue"in u){const m=Ot(c.doubleValue),y=Ot(u.doubleValue);return m===y?Eu(m)===Eu(y):isNaN(m)&&isNaN(y)}return!1})(r,t);case 9:return Bi(r.arrayValue.values||[],t.arrayValue.values||[],Ls);case 10:case 11:return(function(c,u){const m=c.mapValue.fields||{},y=u.mapValue.fields||{};if(Dx(m)!==Dx(y))return!1;for(const p in m)if(m.hasOwnProperty(p)&&(y[p]===void 0||!Ls(m[p],y[p])))return!1;return!0})(r,t);default:return Ve(52216,{left:r})}}function xo(r,t){return(r.values||[]).find((s=>Ls(s,t)))!==void 0}function qi(r,t){if(r===t)return 0;const s=Xa(r),a=Xa(t);if(s!==a)return Ze(s,a);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ze(r.booleanValue,t.booleanValue);case 2:return(function(u,m){const y=Ot(u.integerValue||u.doubleValue),p=Ot(m.integerValue||m.doubleValue);return y<p?-1:y>p?1:y===p?0:isNaN(y)?isNaN(p)?0:-1:1})(r,t);case 3:return Ix(r.timestampValue,t.timestampValue);case 4:return Ix(po(r),po(t));case 5:return Af(r.stringValue,t.stringValue);case 6:return(function(u,m){const y=Ka(u),p=Ka(m);return y.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(u,m){const y=u.split("/"),p=m.split("/");for(let g=0;g<y.length&&g<p.length;g++){const v=Ze(y[g],p[g]);if(v!==0)return v}return Ze(y.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(u,m){const y=Ze(Ot(u.latitude),Ot(m.latitude));return y!==0?y:Ze(Ot(u.longitude),Ot(m.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Ox(r.arrayValue,t.arrayValue);case 10:return(function(u,m){var w,V,P,G;const y=u.fields||{},p=m.fields||{},g=(w=y[wu])==null?void 0:w.arrayValue,v=(V=p[wu])==null?void 0:V.arrayValue,E=Ze(((P=g==null?void 0:g.values)==null?void 0:P.length)||0,((G=v==null?void 0:v.values)==null?void 0:G.length)||0);return E!==0?E:Ox(g,v)})(r.mapValue,t.mapValue);case 11:return(function(u,m){if(u===lu.mapValue&&m===lu.mapValue)return 0;if(u===lu.mapValue)return 1;if(m===lu.mapValue)return-1;const y=u.fields||{},p=Object.keys(y),g=m.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const w=Af(p[E],v[E]);if(w!==0)return w;const V=qi(y[p[E]],g[v[E]]);if(V!==0)return V}return Ze(p.length,v.length)})(r.mapValue,t.mapValue);default:throw Ve(23264,{he:s})}}function Ix(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Ze(r,t);const s=Qa(r),a=Qa(t),c=Ze(s.seconds,a.seconds);return c!==0?c:Ze(s.nanos,a.nanos)}function Ox(r,t){const s=r.values||[],a=t.values||[];for(let c=0;c<s.length&&c<a.length;++c){const u=qi(s[c],a[c]);if(u)return u}return Ze(s.length,a.length)}function Hi(r){return Cf(r)}function Cf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(s){const a=Qa(s);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(s){return Ka(s).toBase64()})(r.bytesValue):"referenceValue"in r?(function(s){return Re.fromName(s).toString()})(r.referenceValue):"geoPointValue"in r?(function(s){return`geo(${s.latitude},${s.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(s){let a="[",c=!0;for(const u of s.values||[])c?c=!1:a+=",",a+=Cf(u);return a+"]"})(r.arrayValue):"mapValue"in r?(function(s){const a=Object.keys(s.fields||{}).sort();let c="{",u=!0;for(const m of a)u?u=!1:c+=",",c+=`${m}:${Cf(s.fields[m])}`;return c+"}"})(r.mapValue):Ve(61005,{value:r})}function hu(r){switch(Xa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Pu(r);return t?16+hu(t):16;case 5:return 2*r.stringValue.length;case 6:return Ka(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((c,u)=>c+hu(u)),0)})(r.arrayValue);case 10:case 11:return(function(a){let c=0;return tr(a.fields,((u,m)=>{c+=u.length+hu(m)})),c})(r.mapValue);default:throw Ve(13486,{value:r})}}function Vx(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Rf(r){return!!r&&"integerValue"in r}function nm(r){return!!r&&"arrayValue"in r}function kx(r){return!!r&&"nullValue"in r}function zx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function du(r){return!!r&&"mapValue"in r}function lw(r){var s,a;return((a=(((s=r==null?void 0:r.mapValue)==null?void 0:s.fields)||{})[wv])==null?void 0:a.stringValue)===Tv}function oo(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return tr(r.mapValue.fields,((s,a)=>t.mapValue.fields[s]=oo(a))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(r.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=oo(r.arrayValue.values[s]);return t}return{...r}}function ow(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.value=t}static empty(){return new Tn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let a=0;a<t.length-1;++a)if(s=(s.mapValue.fields||{})[t.get(a)],!du(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=oo(s)}setAll(t){let s=cn.emptyPath(),a={},c=[];t.forEach(((m,y)=>{if(!s.isImmediateParentOf(y)){const p=this.getFieldsMap(s);this.applyChanges(p,a,c),a={},c=[],s=y.popLast()}m?a[y.lastSegment()]=oo(m):c.push(y.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,a,c)}delete(t){const s=this.field(t.popLast());du(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return Ls(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let a=0;a<t.length;++a){let c=s.mapValue.fields[t.get(a)];du(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},s.mapValue.fields[t.get(a)]=c),s=c}return s.mapValue.fields}applyChanges(t,s,a){tr(s,((c,u)=>t[c]=u));for(const c of a)delete t[c]}clone(){return new Tn(oo(this.value))}}function jv(r){const t=[];return tr(r.fields,((s,a)=>{const c=new cn([s]);if(du(a)){const u=jv(a.mapValue).fields;if(u.length===0)t.push(c);else for(const m of u)t.push(c.child(m))}else t.push(c)})),new zn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,s,a,c,u,m,y){this.key=t,this.documentType=s,this.version=a,this.readTime=c,this.createTime=u,this.data=m,this.documentState=y}static newInvalidDocument(t){return new mn(t,0,ze.min(),ze.min(),ze.min(),Tn.empty(),0)}static newFoundDocument(t,s,a,c){return new mn(t,1,s,ze.min(),a,c,0)}static newNoDocument(t,s){return new mn(t,2,s,ze.min(),ze.min(),Tn.empty(),0)}static newUnknownDocument(t,s){return new mn(t,3,s,ze.min(),ze.min(),Tn.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof mn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,s){this.position=t,this.inclusive=s}}function Ux(r,t,s){let a=0;for(let c=0;c<r.position.length;c++){const u=t[c],m=r.position[c];if(u.field.isKeyField()?a=Re.comparator(Re.fromName(m.referenceValue),s.key):a=qi(m,s.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Px(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let s=0;s<r.position.length;s++)if(!Ls(r.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t,s="asc"){this.field=t,this.dir=s}}function cw(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{}class Ft extends Sv{constructor(t,s,a){super(),this.field=t,this.op=s,this.value=a}static create(t,s,a){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,a):new hw(t,s,a):s==="array-contains"?new mw(t,a):s==="in"?new gw(t,a):s==="not-in"?new pw(t,a):s==="array-contains-any"?new yw(t,a):new Ft(t,s,a)}static createKeyFieldInFilter(t,s,a){return s==="in"?new dw(t,a):new fw(t,a)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(qi(s,this.value)):s!==null&&Xa(this.value)===Xa(s)&&this.matchesComparison(qi(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends Sv{constructor(t,s){super(),this.filters=t,this.op=s,this.Pe=null}static create(t,s){return new ds(t,s)}matches(t){return Av(this)?this.filters.find((s=>!s.matches(t)))===void 0:this.filters.find((s=>s.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,s)=>t.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Av(r){return r.op==="and"}function Cv(r){return uw(r)&&Av(r)}function uw(r){for(const t of r.filters)if(t instanceof ds)return!1;return!0}function Df(r){if(r instanceof Ft)return r.field.canonicalString()+r.op.toString()+Hi(r.value);if(Cv(r))return r.filters.map((t=>Df(t))).join(",");{const t=r.filters.map((s=>Df(s))).join(",");return`${r.op}(${t})`}}function Rv(r,t){return r instanceof Ft?(function(a,c){return c instanceof Ft&&a.op===c.op&&a.field.isEqual(c.field)&&Ls(a.value,c.value)})(r,t):r instanceof ds?(function(a,c){return c instanceof ds&&a.op===c.op&&a.filters.length===c.filters.length?a.filters.reduce(((u,m,y)=>u&&Rv(m,c.filters[y])),!0):!1})(r,t):void Ve(19439)}function Dv(r){return r instanceof Ft?(function(s){return`${s.field.canonicalString()} ${s.op} ${Hi(s.value)}`})(r):r instanceof ds?(function(s){return s.op.toString()+" {"+s.getFilters().map(Dv).join(" ,")+"}"})(r):"Filter"}class hw extends Ft{constructor(t,s,a){super(t,s,a),this.key=Re.fromName(a.referenceValue)}matches(t){const s=Re.comparator(t.key,this.key);return this.matchesComparison(s)}}class dw extends Ft{constructor(t,s){super(t,"in",s),this.keys=Mv("in",s)}matches(t){return this.keys.some((s=>s.isEqual(t.key)))}}class fw extends Ft{constructor(t,s){super(t,"not-in",s),this.keys=Mv("not-in",s)}matches(t){return!this.keys.some((s=>s.isEqual(t.key)))}}function Mv(r,t){var s;return(((s=t.arrayValue)==null?void 0:s.values)||[]).map((a=>Re.fromName(a.referenceValue)))}class mw extends Ft{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return nm(s)&&xo(s.arrayValue,this.value)}}class gw extends Ft{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&xo(this.value.arrayValue,s)}}class pw extends Ft{constructor(t,s){super(t,"not-in",s)}matches(t){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&s.nullValue===void 0&&!xo(this.value.arrayValue,s)}}class yw extends Ft{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!nm(s)||!s.arrayValue.values)&&s.arrayValue.values.some((a=>xo(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t,s=null,a=[],c=[],u=null,m=null,y=null){this.path=t,this.collectionGroup=s,this.orderBy=a,this.filters=c,this.limit=u,this.startAt=m,this.endAt=y,this.Te=null}}function Lx(r,t=null,s=[],a=[],c=null,u=null,m=null){return new xw(r,t,s,a,c,u,m)}function sm(r){const t=Pe(r);if(t.Te===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map((a=>Df(a))).join(","),s+="|ob:",s+=t.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Uu(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Hi(a))).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Hi(a))).join(",")),t.Te=s}return t.Te}function am(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<r.orderBy.length;s++)if(!cw(r.orderBy[s],t.orderBy[s]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let s=0;s<r.filters.length;s++)if(!Rv(r.filters[s],t.filters[s]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Px(r.startAt,t.startAt)&&Px(r.endAt,t.endAt)}function Mf(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,s=null,a=[],c=[],u=null,m="F",y=null,p=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=a,this.filters=c,this.limit=u,this.limitType=m,this.startAt=y,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function vw(r,t,s,a,c,u,m,y){return new Zi(r,t,s,a,c,u,m,y)}function rm(r){return new Zi(r)}function Bx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function bw(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Iv(r){return r.collectionGroup!==null}function co(r){const t=Pe(r);if(t.Ie===null){t.Ie=[];const s=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),s.add(u.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let y=new Kt(cn.comparator);return m.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(y=y.add(g.field))}))})),y})(t).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new vo(u,a))})),s.has(cn.keyField().canonicalString())||t.Ie.push(new vo(cn.keyField(),a))}return t.Ie}function Vs(r){const t=Pe(r);return t.Ee||(t.Ee=_w(t,co(r))),t.Ee}function _w(r,t){if(r.limitType==="F")return Lx(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((c=>{const u=c.dir==="desc"?"asc":"desc";return new vo(c.field,u)}));const s=r.endAt?new Tu(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new Tu(r.startAt.position,r.startAt.inclusive):null;return Lx(r.path,r.collectionGroup,t,r.filters,r.limit,s,a)}}function If(r,t){const s=r.filters.concat([t]);return new Zi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),s,r.limit,r.limitType,r.startAt,r.endAt)}function Ew(r,t){const s=r.explicitOrderBy.concat([t]);return new Zi(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Of(r,t,s){return new Zi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,s,r.startAt,r.endAt)}function Lu(r,t){return am(Vs(r),Vs(t))&&r.limitType===t.limitType}function Ov(r){return`${sm(Vs(r))}|lt:${r.limitType}`}function Mi(r){return`Query(target=${(function(s){let a=s.path.canonicalString();return s.collectionGroup!==null&&(a+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(a+=`, filters: [${s.filters.map((c=>Dv(c))).join(", ")}]`),Uu(s.limit)||(a+=", limit: "+s.limit),s.orderBy.length>0&&(a+=`, orderBy: [${s.orderBy.map((c=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(c))).join(", ")}]`),s.startAt&&(a+=", startAt: ",a+=s.startAt.inclusive?"b:":"a:",a+=s.startAt.position.map((c=>Hi(c))).join(",")),s.endAt&&(a+=", endAt: ",a+=s.endAt.inclusive?"a:":"b:",a+=s.endAt.position.map((c=>Hi(c))).join(",")),`Target(${a})`})(Vs(r))}; limitType=${r.limitType})`}function Bu(r,t){return t.isFoundDocument()&&(function(a,c){const u=c.key.path;return a.collectionGroup!==null?c.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Re.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(r,t)&&(function(a,c){for(const u of co(a))if(!u.field.isKeyField()&&c.data.field(u.field)===null)return!1;return!0})(r,t)&&(function(a,c){for(const u of a.filters)if(!u.matches(c))return!1;return!0})(r,t)&&(function(a,c){return!(a.startAt&&!(function(m,y,p){const g=Ux(m,y,p);return m.inclusive?g<=0:g<0})(a.startAt,co(a),c)||a.endAt&&!(function(m,y,p){const g=Ux(m,y,p);return m.inclusive?g>=0:g>0})(a.endAt,co(a),c))})(r,t)}function Nw(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Vv(r){return(t,s)=>{let a=!1;for(const c of co(r)){const u=ww(c,t,s);if(u!==0)return u;a=a||c.field.isKeyField()}return 0}}function ww(r,t,s){const a=r.field.isKeyField()?Re.comparator(t.key,s.key):(function(u,m,y){const p=m.data.field(u),g=y.data.field(u);return p!==null&&g!==null?qi(p,g):Ve(42886)})(r.field,t,s);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Ve(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),a=this.inner[s];if(a!==void 0){for(const[c,u]of a)if(this.equalsFn(c,t))return u}}has(t){return this.get(t)!==void 0}set(t,s){const a=this.mapKeyFn(t),c=this.inner[a];if(c===void 0)return this.inner[a]=[[t,s]],void this.innerSize++;for(let u=0;u<c.length;u++)if(this.equalsFn(c[u][0],t))return void(c[u]=[t,s]);c.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),a=this.inner[s];if(a===void 0)return!1;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],t))return a.length===1?delete this.inner[s]:a.splice(c,1),this.innerSize--,!0;return!1}forEach(t){tr(this.inner,((s,a)=>{for(const[c,u]of a)t(c,u)}))}isEmpty(){return xv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=new Tt(Re.comparator);function ca(){return Tw}const kv=new Tt(Re.comparator);function ao(...r){let t=kv;for(const s of r)t=t.insert(s.key,s);return t}function zv(r){let t=kv;return r.forEach(((s,a)=>t=t.insert(s,a.overlayedDocument))),t}function Ir(){return uo()}function Uv(){return uo()}function uo(){return new Lr((r=>r.toString()),((r,t)=>r.isEqual(t)))}const jw=new Tt(Re.comparator),Sw=new Kt(Re.comparator);function Je(...r){let t=Sw;for(const s of r)t=t.add(s);return t}const Aw=new Kt(Ze);function Cw(){return Aw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(t)?"-0":t}}function Pv(r){return{integerValue:""+r}}function Rw(r,t){return ew(t)?Pv(t):im(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this._=void 0}}function Dw(r,t,s){return r instanceof ju?(function(c,u){const m={fields:{[_v]:{stringValue:bv},[Nv]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return u&&tm(u)&&(u=Pu(u)),u&&(m.fields[Ev]=u),{mapValue:m}})(s,t):r instanceof bo?Bv(r,t):r instanceof _o?qv(r,t):(function(c,u){const m=Lv(c,u),y=qx(m)+qx(c.Ae);return Rf(m)&&Rf(c.Ae)?Pv(y):im(c.serializer,y)})(r,t)}function Mw(r,t,s){return r instanceof bo?Bv(r,t):r instanceof _o?qv(r,t):s}function Lv(r,t){return r instanceof Su?(function(a){return Rf(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(t)?t:{integerValue:0}:null}class ju extends qu{}class bo extends qu{constructor(t){super(),this.elements=t}}function Bv(r,t){const s=Hv(t);for(const a of r.elements)s.some((c=>Ls(c,a)))||s.push(a);return{arrayValue:{values:s}}}class _o extends qu{constructor(t){super(),this.elements=t}}function qv(r,t){let s=Hv(t);for(const a of r.elements)s=s.filter((c=>!Ls(c,a)));return{arrayValue:{values:s}}}class Su extends qu{constructor(t,s){super(),this.serializer=t,this.Ae=s}}function qx(r){return Ot(r.integerValue||r.doubleValue)}function Hv(r){return nm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Iw(r,t){return r.field.isEqual(t.field)&&(function(a,c){return a instanceof bo&&c instanceof bo||a instanceof _o&&c instanceof _o?Bi(a.elements,c.elements,Ls):a instanceof Su&&c instanceof Su?Ls(a.Ae,c.Ae):a instanceof ju&&c instanceof ju})(r.transform,t.transform)}class Ow{constructor(t,s){this.version=t,this.transformResults=s}}class jn{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new jn}static exists(t){return new jn(void 0,t)}static updateTime(t){return new jn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fu(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Hu{}function Fv(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Fu(r.key,jn.none()):new To(r.key,r.data,jn.none());{const s=r.data,a=Tn.empty();let c=new Kt(cn.comparator);for(let u of t.fields)if(!c.has(u)){let m=s.field(u);m===null&&u.length>1&&(u=u.popLast(),m=s.field(u)),m===null?a.delete(u):a.set(u,m),c=c.add(u)}return new nr(r.key,a,new zn(c.toArray()),jn.none())}}function Vw(r,t,s){r instanceof To?(function(c,u,m){const y=c.value.clone(),p=Fx(c.fieldTransforms,u,m.transformResults);y.setAll(p),u.convertToFoundDocument(m.version,y).setHasCommittedMutations()})(r,t,s):r instanceof nr?(function(c,u,m){if(!fu(c.precondition,u))return void u.convertToUnknownDocument(m.version);const y=Fx(c.fieldTransforms,u,m.transformResults),p=u.data;p.setAll(Gv(c)),p.setAll(y),u.convertToFoundDocument(m.version,p).setHasCommittedMutations()})(r,t,s):(function(c,u,m){u.convertToNoDocument(m.version).setHasCommittedMutations()})(0,t,s)}function ho(r,t,s,a){return r instanceof To?(function(u,m,y,p){if(!fu(u.precondition,m))return y;const g=u.value.clone(),v=Gx(u.fieldTransforms,p,m);return g.setAll(v),m.convertToFoundDocument(m.version,g).setHasLocalMutations(),null})(r,t,s,a):r instanceof nr?(function(u,m,y,p){if(!fu(u.precondition,m))return y;const g=Gx(u.fieldTransforms,p,m),v=m.data;return v.setAll(Gv(u)),v.setAll(g),m.convertToFoundDocument(m.version,v).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(r,t,s,a):(function(u,m,y){return fu(u.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):y})(r,t,s)}function kw(r,t){let s=null;for(const a of r.fieldTransforms){const c=t.data.field(a.field),u=Lv(a.transform,c||null);u!=null&&(s===null&&(s=Tn.empty()),s.set(a.field,u))}return s||null}function Hx(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(a,c){return a===void 0&&c===void 0||!(!a||!c)&&Bi(a,c,((u,m)=>Iw(u,m)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class To extends Hu{constructor(t,s,a,c=[]){super(),this.key=t,this.value=s,this.precondition=a,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class nr extends Hu{constructor(t,s,a,c,u=[]){super(),this.key=t,this.data=s,this.fieldMask=a,this.precondition=c,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Gv(r){const t=new Map;return r.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const a=r.data.field(s);t.set(s,a)}})),t}function Fx(r,t,s){const a=new Map;lt(r.length===s.length,32656,{Ve:s.length,de:r.length});for(let c=0;c<s.length;c++){const u=r[c],m=u.transform,y=t.data.field(u.field);a.set(u.field,Mw(m,y,s[c]))}return a}function Gx(r,t,s){const a=new Map;for(const c of r){const u=c.transform,m=s.data.field(c.field);a.set(c.field,Dw(u,m,t))}return a}class Fu extends Hu{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zw extends Hu{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(t,s,a,c){this.batchId=t,this.localWriteTime=s,this.baseMutations=a,this.mutations=c}applyToRemoteDocument(t,s){const a=s.mutationResults;for(let c=0;c<this.mutations.length;c++){const u=this.mutations[c];u.key.isEqual(t.key)&&Vw(u,t,a[c])}}applyToLocalView(t,s){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(s=ho(a,t,s,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(s=ho(a,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const a=Uv();return this.mutations.forEach((c=>{const u=t.get(c.key),m=u.overlayedDocument;let y=this.applyToLocalView(m,u.mutatedFields);y=s.has(c.key)?null:y;const p=Fv(m,y);p!==null&&a.set(c.key,p),m.isValidDocument()||m.convertToNoDocument(ze.min())})),a}keys(){return this.mutations.reduce(((t,s)=>t.add(s.key)),Je())}isEqual(t){return this.batchId===t.batchId&&Bi(this.mutations,t.mutations,((s,a)=>Hx(s,a)))&&Bi(this.baseMutations,t.baseMutations,((s,a)=>Hx(s,a)))}}class lm{constructor(t,s,a,c){this.batch=t,this.commitVersion=s,this.mutationResults=a,this.docVersions=c}static from(t,s,a){lt(t.mutations.length===a.length,58842,{me:t.mutations.length,fe:a.length});let c=(function(){return jw})();const u=t.mutations;for(let m=0;m<u.length;m++)c=c.insert(u[m].key,a[m].version);return new lm(t,s,a,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,et;function Bw(r){switch(r){case se.OK:return Ve(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ve(15467,{code:r})}}function $v(r){if(r===void 0)return oa("GRPC error has no .code"),se.UNKNOWN;switch(r){case Ht.OK:return se.OK;case Ht.CANCELLED:return se.CANCELLED;case Ht.UNKNOWN:return se.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return se.INTERNAL;case Ht.UNAVAILABLE:return se.UNAVAILABLE;case Ht.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Ht.NOT_FOUND:return se.NOT_FOUND;case Ht.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Ht.ABORTED:return se.ABORTED;case Ht.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Ht.DATA_LOSS:return se.DATA_LOSS;default:return Ve(39323,{code:r})}}(et=Ht||(Ht={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=new Ga([4294967295,4294967295],0);function $x(r){const t=qw().encode(r),s=new lv;return s.update(t),new Uint8Array(s.digest())}function Yx(r){const t=new DataView(r.buffer),s=t.getUint32(0,!0),a=t.getUint32(4,!0),c=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Ga([s,a],0),new Ga([c,u],0)]}class om{constructor(t,s,a){if(this.bitmap=t,this.padding=s,this.hashCount=a,s<0||s>=8)throw new ro(`Invalid padding: ${s}`);if(a<0)throw new ro(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${a}`);if(t.length===0&&s!==0)throw new ro(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*t.length-s,this.pe=Ga.fromNumber(this.ge)}ye(t,s,a){let c=t.add(s.multiply(Ga.fromNumber(a)));return c.compare(Hw)===1&&(c=new Ga([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const s=$x(t),[a,c]=Yx(s);for(let u=0;u<this.hashCount;u++){const m=this.ye(a,c,u);if(!this.we(m))return!1}return!0}static create(t,s,a){const c=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),m=new om(u,c,s);return a.forEach((y=>m.insert(y))),m}insert(t){if(this.ge===0)return;const s=$x(t),[a,c]=Yx(s);for(let u=0;u<this.hashCount;u++){const m=this.ye(a,c,u);this.be(m)}}be(t){const s=Math.floor(t/8),a=t%8;this.bitmap[s]|=1<<a}}class ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(t,s,a,c,u){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,s,a){const c=new Map;return c.set(t,jo.createSynthesizedTargetChangeForCurrentChange(t,s,a)),new Gu(ze.min(),c,new Tt(Ze),ca(),Je())}}class jo{constructor(t,s,a,c,u){this.resumeToken=t,this.current=s,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,s,a){return new jo(a,s,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t,s,a,c){this.Se=t,this.removedTargetIds=s,this.key=a,this.De=c}}class Yv{constructor(t,s){this.targetId=t,this.Ce=s}}class Qv{constructor(t,s,a=un.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=s,this.resumeToken=a,this.cause=c}}class Qx{constructor(){this.ve=0,this.Fe=Kx(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Je(),s=Je(),a=Je();return this.Fe.forEach(((c,u)=>{switch(u){case 0:t=t.add(c);break;case 2:s=s.add(c);break;case 1:a=a.add(c);break;default:Ve(38017,{changeType:u})}})),new jo(this.Me,this.xe,t,s,a)}Ke(){this.Oe=!1,this.Fe=Kx()}qe(t,s){this.Oe=!0,this.Fe=this.Fe.insert(t,s)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Fw{constructor(t){this.Ge=t,this.ze=new Map,this.je=ca(),this.He=ou(),this.Je=ou(),this.Ze=new Tt(Ze)}Xe(t){for(const s of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(s,t.De):this.et(s,t.key,t.De);for(const s of t.removedTargetIds)this.et(s,t.key,t.De)}tt(t){this.forEachTarget(t,(s=>{const a=this.nt(s);switch(t.state){case 0:this.rt(s)&&a.Le(t.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(t.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(a.Qe(),a.Le(t.resumeToken));break;case 4:this.rt(s)&&(this.it(s),a.Le(t.resumeToken));break;default:Ve(56790,{state:t.state})}}))}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.ze.forEach(((a,c)=>{this.rt(c)&&s(c)}))}st(t){const s=t.targetId,a=t.Ce.count,c=this.ot(s);if(c){const u=c.target;if(Mf(u))if(a===0){const m=new Re(u.path);this.et(s,m,mn.newNoDocument(m,ze.min()))}else lt(a===1,20013,{expectedCount:a});else{const m=this._t(s);if(m!==a){const y=this.ut(t),p=y?this.ct(y,t,m):1;if(p!==0){this.it(s);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,g)}}}}}ut(t){const s=t.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:a="",padding:c=0},hashCount:u=0}=s;let m,y;try{m=Ka(a).toUint8Array()}catch(p){if(p instanceof vv)return zr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{y=new om(m,c,u)}catch(p){return zr(p instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return y.ge===0?null:y}ct(t,s,a){return s.Ce.count===a-this.Pt(t,s.targetId)?0:2}Pt(t,s){const a=this.Ge.getRemoteKeysForTarget(s);let c=0;return a.forEach((u=>{const m=this.Ge.ht(),y=`projects/${m.projectId}/databases/${m.database}/documents/${u.path.canonicalString()}`;t.mightContain(y)||(this.et(s,u,null),c++)})),c}Tt(t){const s=new Map;this.ze.forEach(((u,m)=>{const y=this.ot(m);if(y){if(u.current&&Mf(y.target)){const p=new Re(y.target.path);this.It(p).has(m)||this.Et(m,p)||this.et(m,p,mn.newNoDocument(p,t))}u.Be&&(s.set(m,u.ke()),u.Ke())}}));let a=Je();this.Je.forEach(((u,m)=>{let y=!0;m.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(a=a.add(u))})),this.je.forEach(((u,m)=>m.setReadTime(t)));const c=new Gu(t,s,this.Ze,this.je,a);return this.je=ca(),this.He=ou(),this.Je=ou(),this.Ze=new Tt(Ze),c}Ye(t,s){if(!this.rt(t))return;const a=this.Et(t,s.key)?2:0;this.nt(t).qe(s.key,a),this.je=this.je.insert(s.key,s),this.He=this.He.insert(s.key,this.It(s.key).add(t)),this.Je=this.Je.insert(s.key,this.Rt(s.key).add(t))}et(t,s,a){if(!this.rt(t))return;const c=this.nt(t);this.Et(t,s)?c.qe(s,1):c.Ue(s),this.Je=this.Je.insert(s,this.Rt(s).delete(t)),this.Je=this.Je.insert(s,this.Rt(s).add(t)),a&&(this.je=this.je.insert(s,a))}removeTarget(t){this.ze.delete(t)}_t(t){const s=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let s=this.ze.get(t);return s||(s=new Qx,this.ze.set(t,s)),s}Rt(t){let s=this.Je.get(t);return s||(s=new Kt(Ze),this.Je=this.Je.insert(t,s)),s}It(t){let s=this.He.get(t);return s||(s=new Kt(Ze),this.He=this.He.insert(t,s)),s}rt(t){const s=this.ot(t)!==null;return s||xe("WatchChangeAggregator","Detected inactive target",t),s}ot(t){const s=this.ze.get(t);return s&&s.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Qx),this.Ge.getRemoteKeysForTarget(t).forEach((s=>{this.et(t,s,null)}))}Et(t,s){return this.Ge.getRemoteKeysForTarget(t).has(s)}}function ou(){return new Tt(Re.comparator)}function Kx(){return new Tt(Re.comparator)}const Gw={asc:"ASCENDING",desc:"DESCENDING"},$w={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yw={and:"AND",or:"OR"};class Qw{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function Vf(r,t){return r.useProto3Json||Uu(t)?t:{value:t}}function Au(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Kv(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function Kw(r,t){return Au(r,t.toTimestamp())}function ks(r){return lt(!!r,49232),ze.fromTimestamp((function(s){const a=Qa(s);return new yt(a.seconds,a.nanos)})(r))}function cm(r,t){return kf(r,t).canonicalString()}function kf(r,t){const s=(function(c){return new vt(["projects",c.projectId,"databases",c.database])})(r).child("documents");return t===void 0?s:s.child(t)}function Xv(r){const t=vt.fromString(r);return lt(tb(t),10190,{key:t.toString()}),t}function zf(r,t){return cm(r.databaseId,t.path)}function df(r,t){const s=Xv(t);if(s.get(1)!==r.databaseId.projectId)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+r.databaseId.projectId);if(s.get(3)!==r.databaseId.database)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+r.databaseId.database);return new Re(Jv(s))}function Zv(r,t){return cm(r.databaseId,t)}function Xw(r){const t=Xv(r);return t.length===4?vt.emptyPath():Jv(t)}function Uf(r){return new vt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Jv(r){return lt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Xx(r,t,s){return{name:zf(r,t),fields:s.value.mapValue.fields}}function Zw(r,t){let s;if("targetChange"in t){t.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ve(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),c=t.targetChange.targetIds||[],u=(function(g,v){return g.useProto3Json?(lt(v===void 0||typeof v=="string",58123),un.fromBase64String(v||"")):(lt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),un.fromUint8Array(v||new Uint8Array))})(r,t.targetChange.resumeToken),m=t.targetChange.cause,y=m&&(function(g){const v=g.code===void 0?se.UNKNOWN:$v(g.code);return new ye(v,g.message||"")})(m);s=new Qv(a,c,u,y||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const c=df(r,a.document.name),u=ks(a.document.updateTime),m=a.document.createTime?ks(a.document.createTime):ze.min(),y=new Tn({mapValue:{fields:a.document.fields}}),p=mn.newFoundDocument(c,u,m,y),g=a.targetIds||[],v=a.removedTargetIds||[];s=new mu(g,v,p.key,p)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const c=df(r,a.document),u=a.readTime?ks(a.readTime):ze.min(),m=mn.newNoDocument(c,u),y=a.removedTargetIds||[];s=new mu([],y,m.key,m)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const c=df(r,a.document),u=a.removedTargetIds||[];s=new mu([],u,c,null)}else{if(!("filter"in t))return Ve(11601,{Vt:t});{t.filter;const a=t.filter;a.targetId;const{count:c=0,unchangedNames:u}=a,m=new Lw(c,u),y=a.targetId;s=new Yv(y,m)}}return s}function Jw(r,t){let s;if(t instanceof To)s={update:Xx(r,t.key,t.value)};else if(t instanceof Fu)s={delete:zf(r,t.key)};else if(t instanceof nr)s={update:Xx(r,t.key,t.data),updateMask:l2(t.fieldMask)};else{if(!(t instanceof zw))return Ve(16599,{dt:t.type});s={verify:zf(r,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map((a=>(function(u,m){const y=m.transform;if(y instanceof ju)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof bo)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof _o)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Su)return{fieldPath:m.field.canonicalString(),increment:y.Ae};throw Ve(20930,{transform:m.transform})})(0,a)))),t.precondition.isNone||(s.currentDocument=(function(c,u){return u.updateTime!==void 0?{updateTime:Kw(c,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ve(27497)})(r,t.precondition)),s}function Ww(r,t){return r&&r.length>0?(lt(t!==void 0,14353),r.map((s=>(function(c,u){let m=c.updateTime?ks(c.updateTime):ks(u);return m.isEqual(ze.min())&&(m=ks(u)),new Ow(m,c.transformResults||[])})(s,t)))):[]}function e2(r,t){return{documents:[Zv(r,t.path)]}}function t2(r,t){const s={structuredQuery:{}},a=t.path;let c;t.collectionGroup!==null?(c=a,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=a.popLast(),s.structuredQuery.from=[{collectionId:a.lastSegment()}]),s.parent=Zv(r,c);const u=(function(g){if(g.length!==0)return eb(ds.create(g,"and"))})(t.filters);u&&(s.structuredQuery.where=u);const m=(function(g){if(g.length!==0)return g.map((v=>(function(w){return{field:Ii(w.field),direction:a2(w.dir)}})(v)))})(t.orderBy);m&&(s.structuredQuery.orderBy=m);const y=Vf(r,t.limit);return y!==null&&(s.structuredQuery.limit=y),t.startAt&&(s.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(s.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:s,parent:c}}function n2(r){let t=Xw(r.parent);const s=r.structuredQuery,a=s.from?s.from.length:0;let c=null;if(a>0){lt(a===1,65062);const v=s.from[0];v.allDescendants?c=v.collectionId:t=t.child(v.collectionId)}let u=[];s.where&&(u=(function(E){const w=Wv(E);return w instanceof ds&&Cv(w)?w.getFilters():[w]})(s.where));let m=[];s.orderBy&&(m=(function(E){return E.map((w=>(function(P){return new vo(Oi(P.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(w)))})(s.orderBy));let y=null;s.limit&&(y=(function(E){let w;return w=typeof E=="object"?E.value:E,Uu(w)?null:w})(s.limit));let p=null;s.startAt&&(p=(function(E){const w=!!E.before,V=E.values||[];return new Tu(V,w)})(s.startAt));let g=null;return s.endAt&&(g=(function(E){const w=!E.before,V=E.values||[];return new Tu(V,w)})(s.endAt)),vw(t,c,m,u,y,"F",p,g)}function s2(r,t){const s=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:c})}})(t.purpose);return s==null?null:{"goog-listen-tags":s}}function Wv(r){return r.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const a=Oi(s.unaryFilter.field);return Ft.create(a,"==",{doubleValue:NaN});case"IS_NULL":const c=Oi(s.unaryFilter.field);return Ft.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Oi(s.unaryFilter.field);return Ft.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Oi(s.unaryFilter.field);return Ft.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(r):r.fieldFilter!==void 0?(function(s){return Ft.create(Oi(s.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(s){return ds.create(s.compositeFilter.filters.map((a=>Wv(a))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(s.compositeFilter.op))})(r):Ve(30097,{filter:r})}function a2(r){return Gw[r]}function r2(r){return $w[r]}function i2(r){return Yw[r]}function Ii(r){return{fieldPath:r.canonicalString()}}function Oi(r){return cn.fromServerFormat(r.fieldPath)}function eb(r){return r instanceof Ft?(function(s){if(s.op==="=="){if(zx(s.value))return{unaryFilter:{field:Ii(s.field),op:"IS_NAN"}};if(kx(s.value))return{unaryFilter:{field:Ii(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(zx(s.value))return{unaryFilter:{field:Ii(s.field),op:"IS_NOT_NAN"}};if(kx(s.value))return{unaryFilter:{field:Ii(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ii(s.field),op:r2(s.op),value:s.value}}})(r):r instanceof ds?(function(s){const a=s.getFilters().map((c=>eb(c)));return a.length===1?a[0]:{compositeFilter:{op:i2(s.op),filters:a}}})(r):Ve(54877,{filter:r})}function l2(r){const t=[];return r.fields.forEach((s=>t.push(s.canonicalString()))),{fieldPaths:t}}function tb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function nb(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t,s,a,c,u=ze.min(),m=ze.min(),y=un.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=s,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=y,this.expectedCount=p}withSequenceNumber(t){return new qa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t){this.yt=t}}function c2(r){const t=n2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Of(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.Sn=new h2}addToCollectionParentIndex(t,s){return this.Sn.add(s),ie.resolve()}getCollectionParents(t,s){return ie.resolve(this.Sn.getEntries(s))}addFieldIndex(t,s){return ie.resolve()}deleteFieldIndex(t,s){return ie.resolve()}deleteAllFieldIndexes(t){return ie.resolve()}createTargetIndexes(t,s){return ie.resolve()}getDocumentsMatchingTarget(t,s){return ie.resolve(null)}getIndexType(t,s){return ie.resolve(0)}getFieldIndexes(t,s){return ie.resolve([])}getNextCollectionGroupToUpdate(t){return ie.resolve(null)}getMinOffset(t,s){return ie.resolve(Ya.min())}getMinOffsetFromCollectionGroup(t,s){return ie.resolve(Ya.min())}updateCollectionGroup(t,s,a){return ie.resolve()}updateIndexEntries(t,s){return ie.resolve()}}class h2{constructor(){this.index={}}add(t){const s=t.lastSegment(),a=t.popLast(),c=this.index[s]||new Kt(vt.comparator),u=!c.has(a);return this.index[s]=c.add(a),u}has(t){const s=t.lastSegment(),a=t.popLast(),c=this.index[s];return c&&c.has(a)}getEntries(t){return(this.index[t]||new Kt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sb=41943040;class wn{static withCacheSize(t){return new wn(t,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(sb,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new Fi(0)}static ar(){return new Fi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="LruGarbageCollector",d2=1048576;function Wx([r,t],[s,a]){const c=Ze(r,s);return c===0?Ze(t,a):c}class f2{constructor(t){this.Pr=t,this.buffer=new Kt(Wx),this.Tr=0}Ir(){return++this.Tr}Er(t){const s=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(s);else{const a=this.buffer.last();Wx(s,a)<0&&(this.buffer=this.buffer.delete(a).add(s))}}get maxValue(){return this.buffer.last()[0]}}class m2{constructor(t,s,a){this.garbageCollector=t,this.asyncQueue=s,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){xe(Jx,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Xi(s)?xe(Jx,"Ignoring IndexedDB error during garbage collection: ",s):await Ki(s)}await this.Ar(3e5)}))}}class g2{constructor(t,s){this.Vr=t,this.params=s}calculateTargetCount(t,s){return this.Vr.dr(t).next((a=>Math.floor(s/100*a)))}nthSequenceNumber(t,s){if(s===0)return ie.resolve(zu.ce);const a=new f2(s);return this.Vr.forEachTarget(t,(c=>a.Er(c.sequenceNumber))).next((()=>this.Vr.mr(t,(c=>a.Er(c))))).next((()=>a.maxValue))}removeTargets(t,s,a){return this.Vr.removeTargets(t,s,a)}removeOrphanedDocuments(t,s){return this.Vr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Zx)):this.getCacheSize(t).next((a=>a<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zx):this.gr(t,s)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,s){let a,c,u,m,y,p,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),c=this.params.maximumSequenceNumbersToCollect):c=E,m=Date.now(),this.nthSequenceNumber(t,c)))).next((E=>(a=E,y=Date.now(),this.removeTargets(t,a,s)))).next((E=>(u=E,p=Date.now(),this.removeOrphanedDocuments(t,a)))).next((E=>(g=Date.now(),Di()<=tt.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-v}ms
	Determined least recently used ${c} in `+(y-m)+`ms
	Removed ${u} targets in `+(p-y)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:u,documentsRemoved:E}))))}}function p2(r,t){return new g2(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.changes=new Lr((t=>t.toString()),((t,s)=>t.isEqual(s))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,mn.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const a=this.changes.get(s);return a!==void 0?ie.resolve(a):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t,s,a,c){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=a,this.indexManager=c}getDocument(t,s){let a=null;return this.documentOverlayCache.getOverlay(t,s).next((c=>(a=c,this.remoteDocumentCache.getEntry(t,s)))).next((c=>(a!==null&&ho(a.mutation,c,zn.empty(),yt.now()),c)))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next((a=>this.getLocalViewOfDocuments(t,a,Je()).next((()=>a))))}getLocalViewOfDocuments(t,s,a=Je()){const c=Ir();return this.populateOverlays(t,c,s).next((()=>this.computeViews(t,s,c,a).next((u=>{let m=ao();return u.forEach(((y,p)=>{m=m.insert(y,p.overlayedDocument)})),m}))))}getOverlayedDocuments(t,s){const a=Ir();return this.populateOverlays(t,a,s).next((()=>this.computeViews(t,s,a,Je())))}populateOverlays(t,s,a){const c=[];return a.forEach((u=>{s.has(u)||c.push(u)})),this.documentOverlayCache.getOverlays(t,c).next((u=>{u.forEach(((m,y)=>{s.set(m,y)}))}))}computeViews(t,s,a,c){let u=ca();const m=uo(),y=(function(){return uo()})();return s.forEach(((p,g)=>{const v=a.get(g.key);c.has(g.key)&&(v===void 0||v.mutation instanceof nr)?u=u.insert(g.key,g):v!==void 0?(m.set(g.key,v.mutation.getFieldMask()),ho(v.mutation,g,v.mutation.getFieldMask(),yt.now())):m.set(g.key,zn.empty())})),this.recalculateAndSaveOverlays(t,u).next((p=>(p.forEach(((g,v)=>m.set(g,v))),s.forEach(((g,v)=>y.set(g,new x2(v,m.get(g)??null)))),y)))}recalculateAndSaveOverlays(t,s){const a=uo();let c=new Tt(((m,y)=>m-y)),u=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next((m=>{for(const y of m)y.keys().forEach((p=>{const g=s.get(p);if(g===null)return;let v=a.get(p)||zn.empty();v=y.applyToLocalView(g,v),a.set(p,v);const E=(c.get(y.batchId)||Je()).add(p);c=c.insert(y.batchId,E)}))})).next((()=>{const m=[],y=c.getReverseIterator();for(;y.hasNext();){const p=y.getNext(),g=p.key,v=p.value,E=Uv();v.forEach((w=>{if(!u.has(w)){const V=Fv(s.get(w),a.get(w));V!==null&&E.set(w,V),u=u.add(w)}})),m.push(this.documentOverlayCache.saveOverlays(t,g,E))}return ie.waitFor(m)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next((a=>this.recalculateAndSaveOverlays(t,a)))}getDocumentsMatchingQuery(t,s,a,c){return bw(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):Iv(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,a,c):this.getDocumentsMatchingCollectionQuery(t,s,a,c)}getNextDocuments(t,s,a,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,a,c).next((u=>{const m=c-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,a.largestBatchId,c-u.size):ie.resolve(Ir());let y=go,p=u;return m.next((g=>ie.forEach(g,((v,E)=>(y<E.largestBatchId&&(y=E.largestBatchId),u.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(t,v).next((w=>{p=p.insert(v,w)}))))).next((()=>this.populateOverlays(t,g,u))).next((()=>this.computeViews(t,p,g,Je()))).next((v=>({batchId:y,changes:zv(v)})))))}))}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new Re(s)).next((a=>{let c=ao();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c}))}getDocumentsMatchingCollectionGroupQuery(t,s,a,c){const u=s.collectionGroup;let m=ao();return this.indexManager.getCollectionParents(t,u).next((y=>ie.forEach(y,(p=>{const g=(function(E,w){return new Zi(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(s,p.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,a,c).next((v=>{v.forEach(((E,w)=>{m=m.insert(E,w)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(t,s,a,c){let u;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,a.largestBatchId).next((m=>(u=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,a,u,c)))).next((m=>{u.forEach(((p,g)=>{const v=g.getKey();m.get(v)===null&&(m=m.insert(v,mn.newInvalidDocument(v)))}));let y=ao();return m.forEach(((p,g)=>{const v=u.get(p);v!==void 0&&ho(v.mutation,g,zn.empty(),yt.now()),Bu(s,g)&&(y=y.insert(p,g))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,s){return ie.resolve(this.Nr.get(s))}saveBundleMetadata(t,s){return this.Nr.set(s.id,(function(c){return{id:c.id,version:c.version,createTime:ks(c.createTime)}})(s)),ie.resolve()}getNamedQuery(t,s){return ie.resolve(this.Br.get(s))}saveNamedQuery(t,s){return this.Br.set(s.name,(function(c){return{name:c.name,query:c2(c.bundledQuery),readTime:ks(c.readTime)}})(s)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.overlays=new Tt(Re.comparator),this.Lr=new Map}getOverlay(t,s){return ie.resolve(this.overlays.get(s))}getOverlays(t,s){const a=Ir();return ie.forEach(s,(c=>this.getOverlay(t,c).next((u=>{u!==null&&a.set(c,u)})))).next((()=>a))}saveOverlays(t,s,a){return a.forEach(((c,u)=>{this.bt(t,s,u)})),ie.resolve()}removeOverlaysForBatchId(t,s,a){const c=this.Lr.get(a);return c!==void 0&&(c.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),ie.resolve()}getOverlaysForCollection(t,s,a){const c=Ir(),u=s.length+1,m=new Re(s.child("")),y=this.overlays.getIteratorFrom(m);for(;y.hasNext();){const p=y.getNext().value,g=p.getKey();if(!s.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>a&&c.set(p.getKey(),p)}return ie.resolve(c)}getOverlaysForCollectionGroup(t,s,a,c){let u=new Tt(((g,v)=>g-v));const m=this.overlays.getIterator();for(;m.hasNext();){const g=m.getNext().value;if(g.getKey().getCollectionGroup()===s&&g.largestBatchId>a){let v=u.get(g.largestBatchId);v===null&&(v=Ir(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const y=Ir(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>y.set(g,v))),!(y.size()>=c)););return ie.resolve(y)}bt(t,s,a){const c=this.overlays.get(a.key);if(c!==null){const m=this.Lr.get(c.largestBatchId).delete(a.key);this.Lr.set(c.largestBatchId,m)}this.overlays=this.overlays.insert(a.key,new Pw(s,a));let u=this.Lr.get(s);u===void 0&&(u=Je(),this.Lr.set(s,u)),this.Lr.set(s,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(t){return ie.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.kr=new Kt(Wt.Kr),this.qr=new Kt(Wt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,s){const a=new Wt(t,s);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(t,s){t.forEach((a=>this.addReference(a,s)))}removeReference(t,s){this.Wr(new Wt(t,s))}Qr(t,s){t.forEach((a=>this.removeReference(a,s)))}Gr(t){const s=new Re(new vt([])),a=new Wt(s,t),c=new Wt(s,t+1),u=[];return this.qr.forEachInRange([a,c],(m=>{this.Wr(m),u.push(m.key)})),u}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const s=new Re(new vt([])),a=new Wt(s,t),c=new Wt(s,t+1);let u=Je();return this.qr.forEachInRange([a,c],(m=>{u=u.add(m.key)})),u}containsKey(t){const s=new Wt(t,0),a=this.kr.firstAfterOrEqual(s);return a!==null&&t.isEqual(a.key)}}class Wt{constructor(t,s){this.key=t,this.Hr=s}static Kr(t,s){return Re.comparator(t.key,s.key)||Ze(t.Hr,s.Hr)}static Ur(t,s){return Ze(t.Hr,s.Hr)||Re.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.Yn=1,this.Jr=new Kt(Wt.Kr)}checkEmpty(t){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,a,c){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new Uw(u,s,a,c);this.mutationQueue.push(m);for(const y of c)this.Jr=this.Jr.add(new Wt(y.key,u)),this.indexManager.addToCollectionParentIndex(t,y.key.path.popLast());return ie.resolve(m)}lookupMutationBatch(t,s){return ie.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(t,s){const a=s+1,c=this.Xr(a),u=c<0?0:c;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?em:this.Yn-1)}getAllMutationBatches(t){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const a=new Wt(s,0),c=new Wt(s,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,c],(m=>{const y=this.Zr(m.Hr);u.push(y)})),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,s){let a=new Kt(Ze);return s.forEach((c=>{const u=new Wt(c,0),m=new Wt(c,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,m],(y=>{a=a.add(y.Hr)}))})),ie.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(t,s){const a=s.path,c=a.length+1;let u=a;Re.isDocumentKey(u)||(u=u.child(""));const m=new Wt(new Re(u),0);let y=new Kt(Ze);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===c&&(y=y.add(p.Hr)),!0)}),m),ie.resolve(this.Yr(y))}Yr(t){const s=[];return t.forEach((a=>{const c=this.Zr(a);c!==null&&s.push(c)})),s}removeMutationBatch(t,s){lt(this.ei(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return ie.forEach(s.mutations,(c=>{const u=new Wt(c.key,s.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)})).next((()=>{this.Jr=a}))}nr(t){}containsKey(t,s){const a=new Wt(s,0),c=this.Jr.firstAfterOrEqual(a);return ie.resolve(s.isEqual(c&&c.key))}performConsistencyCheck(t){return this.mutationQueue.length,ie.resolve()}ei(t,s){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const s=this.Xr(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(t){this.ti=t,this.docs=(function(){return new Tt(Re.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const a=s.key,c=this.docs.get(a),u=c?c.size:0,m=this.ti(s);return this.docs=this.docs.insert(a,{document:s.mutableCopy(),size:m}),this.size+=m-u,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const a=this.docs.get(s);return ie.resolve(a?a.document.mutableCopy():mn.newInvalidDocument(s))}getEntries(t,s){let a=ca();return s.forEach((c=>{const u=this.docs.get(c);a=a.insert(c,u?u.document.mutableCopy():mn.newInvalidDocument(c))})),ie.resolve(a)}getDocumentsMatchingQuery(t,s,a,c){let u=ca();const m=s.path,y=new Re(m.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(y);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!m.isPrefixOf(g.path))break;g.path.length>m.length+1||XN(KN(v),a)<=0||(c.has(v.key)||Bu(s,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(t,s,a,c){Ve(9500)}ni(t,s){return ie.forEach(this.docs,(a=>s(a)))}newChangeBuffer(t){return new T2(this)}getSize(t){return ie.resolve(this.size)}}class T2 extends y2{constructor(t){super(),this.Mr=t}applyChanges(t){const s=[];return this.changes.forEach(((a,c)=>{c.isValidDocument()?s.push(this.Mr.addEntry(t,c)):this.Mr.removeEntry(a)})),ie.waitFor(s)}getFromCache(t,s){return this.Mr.getEntry(t,s)}getAllFromCache(t,s){return this.Mr.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(t){this.persistence=t,this.ri=new Lr((s=>sm(s)),am),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.ii=0,this.si=new um,this.targetCount=0,this.oi=Fi._r()}forEachTarget(t,s){return this.ri.forEach(((a,c)=>s(c))),ie.resolve()}getLastRemoteSnapshotVersion(t){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ie.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(t,s,a){return a&&(this.lastRemoteSnapshotVersion=a),s>this.ii&&(this.ii=s),ie.resolve()}lr(t){this.ri.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.oi=new Fi(s),this.highestTargetId=s),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,s){return this.lr(s),this.targetCount+=1,ie.resolve()}updateTargetData(t,s){return this.lr(s),ie.resolve()}removeTargetData(t,s){return this.ri.delete(s.target),this.si.Gr(s.targetId),this.targetCount-=1,ie.resolve()}removeTargets(t,s,a){let c=0;const u=[];return this.ri.forEach(((m,y)=>{y.sequenceNumber<=s&&a.get(y.targetId)===null&&(this.ri.delete(m),u.push(this.removeMatchingKeysForTargetId(t,y.targetId)),c++)})),ie.waitFor(u).next((()=>c))}getTargetCount(t){return ie.resolve(this.targetCount)}getTargetData(t,s){const a=this.ri.get(s)||null;return ie.resolve(a)}addMatchingKeys(t,s,a){return this.si.$r(s,a),ie.resolve()}removeMatchingKeys(t,s,a){this.si.Qr(s,a);const c=this.persistence.referenceDelegate,u=[];return c&&s.forEach((m=>{u.push(c.markPotentiallyOrphaned(t,m))})),ie.waitFor(u)}removeMatchingKeysForTargetId(t,s){return this.si.Gr(s),ie.resolve()}getMatchingKeysForTargetId(t,s){const a=this.si.jr(s);return ie.resolve(a)}containsKey(t,s){return ie.resolve(this.si.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t,s){this._i={},this.overlays={},this.ai=new zu(0),this.ui=!1,this.ui=!0,this.ci=new E2,this.referenceDelegate=t(this),this.li=new j2(this),this.indexManager=new u2,this.remoteDocumentCache=(function(c){return new w2(c)})((a=>this.referenceDelegate.hi(a))),this.serializer=new o2(s),this.Pi=new b2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new _2,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let a=this._i[t.toKey()];return a||(a=new N2(s,this.referenceDelegate),this._i[t.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,s,a){xe("MemoryPersistence","Starting transaction:",t);const c=new S2(this.ai.next());return this.referenceDelegate.Ti(),a(c).next((u=>this.referenceDelegate.Ii(c).next((()=>u)))).toPromise().then((u=>(c.raiseOnCommittedEvent(),u)))}Ei(t,s){return ie.or(Object.values(this._i).map((a=>()=>a.containsKey(t,s))))}}class S2 extends JN{constructor(t){super(),this.currentSequenceNumber=t}}class hm{constructor(t){this.persistence=t,this.Ri=new um,this.Ai=null}static Vi(t){return new hm(t)}get di(){if(this.Ai)return this.Ai;throw Ve(60996)}addReference(t,s,a){return this.Ri.addReference(a,s),this.di.delete(a.toString()),ie.resolve()}removeReference(t,s,a){return this.Ri.removeReference(a,s),this.di.add(a.toString()),ie.resolve()}markPotentiallyOrphaned(t,s){return this.di.add(s.toString()),ie.resolve()}removeTarget(t,s){this.Ri.Gr(s.targetId).forEach((c=>this.di.add(c.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,s.targetId).next((c=>{c.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(t,s)))}Ti(){this.Ai=new Set}Ii(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.di,(a=>{const c=Re.fromPath(a);return this.mi(t,c).next((u=>{u||s.removeEntry(c,ze.min())}))})).next((()=>(this.Ai=null,s.apply(t))))}updateLimboDocument(t,s){return this.mi(t,s).next((a=>{a?this.di.delete(s.toString()):this.di.add(s.toString())}))}hi(t){return 0}mi(t,s){return ie.or([()=>ie.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Ei(t,s)])}}class Cu{constructor(t,s){this.persistence=t,this.fi=new Lr((a=>tw(a.path)),((a,c)=>a.isEqual(c))),this.garbageCollector=p2(this,s)}static Vi(t,s){return new Cu(t,s)}Ti(){}Ii(t){return ie.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}dr(t){const s=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((a=>s.next((c=>a+c))))}pr(t){let s=0;return this.mr(t,(a=>{s++})).next((()=>s))}mr(t,s){return ie.forEach(this.fi,((a,c)=>this.wr(t,a,c).next((u=>u?ie.resolve():s(c)))))}removeTargets(t,s,a){return this.persistence.getTargetCache().removeTargets(t,s,a)}removeOrphanedDocuments(t,s){let a=0;const c=this.persistence.getRemoteDocumentCache(),u=c.newChangeBuffer();return c.ni(t,(m=>this.wr(t,m,s).next((y=>{y||(a++,u.removeEntry(m,ze.min()))})))).next((()=>u.apply(t))).next((()=>a))}markPotentiallyOrphaned(t,s){return this.fi.set(s,t.currentSequenceNumber),ie.resolve()}removeTarget(t,s){const a=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,s,a){return this.fi.set(a,t.currentSequenceNumber),ie.resolve()}removeReference(t,s,a){return this.fi.set(a,t.currentSequenceNumber),ie.resolve()}updateLimboDocument(t,s){return this.fi.set(s,t.currentSequenceNumber),ie.resolve()}hi(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=hu(t.data.value)),s}wr(t,s,a){return ie.or([()=>this.persistence.Ei(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const c=this.fi.get(s);return ie.resolve(c!==void 0&&c>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(t,s,a,c){this.targetId=t,this.fromCache=s,this.Ts=a,this.Is=c}static Es(t,s){let a=Je(),c=Je();for(const u of s.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:c=c.add(u.doc.key)}return new dm(t,s.fromCache,a,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return pE()?8:WN(mE())>0?6:4})()}initialize(t,s){this.fs=t,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(t,s,a,c){const u={result:null};return this.gs(t,s).next((m=>{u.result=m})).next((()=>{if(!u.result)return this.ps(t,s,c,a).next((m=>{u.result=m}))})).next((()=>{if(u.result)return;const m=new A2;return this.ys(t,s,m).next((y=>{if(u.result=y,this.As)return this.ws(t,s,m,y.size)}))})).next((()=>u.result))}ws(t,s,a,c){return a.documentReadCount<this.Vs?(Di()<=tt.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Mi(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ie.resolve()):(Di()<=tt.DEBUG&&xe("QueryEngine","Query:",Mi(s),"scans",a.documentReadCount,"local documents and returns",c,"documents as results."),a.documentReadCount>this.ds*c?(Di()<=tt.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Mi(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vs(s))):ie.resolve())}gs(t,s){if(Bx(s))return ie.resolve(null);let a=Vs(s);return this.indexManager.getIndexType(t,a).next((c=>c===0?null:(s.limit!==null&&c===1&&(s=Of(s,null,"F"),a=Vs(s)),this.indexManager.getDocumentsMatchingTarget(t,a).next((u=>{const m=Je(...u);return this.fs.getDocuments(t,m).next((y=>this.indexManager.getMinOffset(t,a).next((p=>{const g=this.bs(s,y);return this.Ss(s,g,m,p.readTime)?this.gs(t,Of(s,null,"F")):this.Ds(t,g,s,p)}))))})))))}ps(t,s,a,c){return Bx(s)||c.isEqual(ze.min())?ie.resolve(null):this.fs.getDocuments(t,a).next((u=>{const m=this.bs(s,u);return this.Ss(s,m,a,c)?ie.resolve(null):(Di()<=tt.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Mi(s)),this.Ds(t,m,s,QN(c,go)).next((y=>y)))}))}bs(t,s){let a=new Kt(Vv(t));return s.forEach(((c,u)=>{Bu(t,u)&&(a=a.add(u))})),a}Ss(t,s,a,c){if(t.limit===null)return!1;if(a.size!==s.size)return!0;const u=t.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(c)>0)}ys(t,s,a){return Di()<=tt.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Mi(s)),this.fs.getDocumentsMatchingQuery(t,s,Ya.min(),a)}Ds(t,s,a,c){return this.fs.getDocumentsMatchingQuery(t,a,c).next((u=>(s.forEach((m=>{u=u.insert(m.key,m)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="LocalStore",R2=3e8;class D2{constructor(t,s,a,c){this.persistence=t,this.Cs=s,this.serializer=c,this.vs=new Tt(Ze),this.Fs=new Lr((u=>sm(u)),am),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(a)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new v2(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>t.collect(s,this.vs)))}}function M2(r,t,s,a){return new D2(r,t,s,a)}async function rb(r,t){const s=Pe(r);return await s.persistence.runTransaction("Handle user change","readonly",(a=>{let c;return s.mutationQueue.getAllMutationBatches(a).next((u=>(c=u,s.Os(t),s.mutationQueue.getAllMutationBatches(a)))).next((u=>{const m=[],y=[];let p=Je();for(const g of c){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of u){y.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return s.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:m,addedBatchIds:y})))}))}))}function I2(r,t){const s=Pe(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const c=t.batch.keys(),u=s.xs.newChangeBuffer({trackRemovals:!0});return(function(y,p,g,v){const E=g.batch,w=E.keys();let V=ie.resolve();return w.forEach((P=>{V=V.next((()=>v.getEntry(p,P))).next((G=>{const L=g.docVersions.get(P);lt(L!==null,48541),G.version.compareTo(L)<0&&(E.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),v.addEntry(G)))}))})),V.next((()=>y.mutationQueue.removeMutationBatch(p,E)))})(s,a,t,u).next((()=>u.apply(a))).next((()=>s.mutationQueue.performConsistencyCheck(a))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(a,c,t.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(y){let p=Je();for(let g=0;g<y.mutationResults.length;++g)y.mutationResults[g].transformResults.length>0&&(p=p.add(y.batch.mutations[g].key));return p})(t)))).next((()=>s.localDocuments.getDocuments(a,c)))}))}function ib(r){const t=Pe(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>t.li.getLastRemoteSnapshotVersion(s)))}function O2(r,t){const s=Pe(r),a=t.snapshotVersion;let c=s.vs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const m=s.xs.newChangeBuffer({trackRemovals:!0});c=s.vs;const y=[];t.targetChanges.forEach(((v,E)=>{const w=c.get(E);if(!w)return;y.push(s.li.removeMatchingKeys(u,v.removedDocuments,E).next((()=>s.li.addMatchingKeys(u,v.addedDocuments,E))));let V=w.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(E)!==null?V=V.withResumeToken(un.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):v.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(v.resumeToken,a)),c=c.insert(E,V),(function(G,L,oe){return G.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=R2?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(w,V,v)&&y.push(s.li.updateTargetData(u,V))}));let p=ca(),g=Je();if(t.documentUpdates.forEach((v=>{t.resolvedLimboDocuments.has(v)&&y.push(s.persistence.referenceDelegate.updateLimboDocument(u,v))})),y.push(V2(u,m,t.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!a.isEqual(ze.min())){const v=s.li.getLastRemoteSnapshotVersion(u).next((E=>s.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));y.push(v)}return ie.waitFor(y).next((()=>m.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(s.vs=c,u)))}function V2(r,t,s){let a=Je(),c=Je();return s.forEach((u=>a=a.add(u))),t.getEntries(r,a).next((u=>{let m=ca();return s.forEach(((y,p)=>{const g=u.get(y);p.isFoundDocument()!==g.isFoundDocument()&&(c=c.add(y)),p.isNoDocument()&&p.version.isEqual(ze.min())?(t.removeEntry(y,p.readTime),m=m.insert(y,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p),m=m.insert(y,p)):xe(fm,"Ignoring outdated watch update for ",y,". Current version:",g.version," Watch version:",p.version)})),{Bs:m,Ls:c}}))}function k2(r,t){const s=Pe(r);return s.persistence.runTransaction("Get next mutation batch","readonly",(a=>(t===void 0&&(t=em),s.mutationQueue.getNextMutationBatchAfterBatchId(a,t))))}function z2(r,t){const s=Pe(r);return s.persistence.runTransaction("Allocate target","readwrite",(a=>{let c;return s.li.getTargetData(a,t).next((u=>u?(c=u,ie.resolve(c)):s.li.allocateTargetId(a).next((m=>(c=new qa(t,m,"TargetPurposeListen",a.currentSequenceNumber),s.li.addTargetData(a,c).next((()=>c)))))))})).then((a=>{const c=s.vs.get(a.targetId);return(c===null||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(s.vs=s.vs.insert(a.targetId,a),s.Fs.set(t,a.targetId)),a}))}async function Pf(r,t,s){const a=Pe(r),c=a.vs.get(t),u=s?"readwrite":"readwrite-primary";try{s||await a.persistence.runTransaction("Release target",u,(m=>a.persistence.referenceDelegate.removeTarget(m,c)))}catch(m){if(!Xi(m))throw m;xe(fm,`Failed to update sequence numbers for target ${t}: ${m}`)}a.vs=a.vs.remove(t),a.Fs.delete(c.target)}function e0(r,t,s){const a=Pe(r);let c=ze.min(),u=Je();return a.persistence.runTransaction("Execute query","readwrite",(m=>(function(p,g,v){const E=Pe(p),w=E.Fs.get(v);return w!==void 0?ie.resolve(E.vs.get(w)):E.li.getTargetData(g,v)})(a,m,Vs(t)).next((y=>{if(y)return c=y.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(m,y.targetId).next((p=>{u=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(m,t,s?c:ze.min(),s?u:Je()))).next((y=>(U2(a,Nw(t),y),{documents:y,ks:u})))))}function U2(r,t,s){let a=r.Ms.get(t)||ze.min();s.forEach(((c,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),r.Ms.set(t,a)}class t0{constructor(){this.activeTargetIds=Cw()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class P2{constructor(){this.vo=new t0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,a){}addLocalQueryTarget(t,s=!0){return s&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,s,a){this.Fo[t]=s}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new t0,Promise.resolve()}handleUserChange(t,s,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="ConnectivityMonitor";class s0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){xe(n0,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){xe(n0,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu=null;function Lf(){return cu===null?cu=(function(){return 268435456+Math.round(2147483648*Math.random())})():cu++,"0x"+cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="RestConnection",B2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class q2{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.qo=s+"://"+t.host,this.Uo=`projects/${a}/databases/${c}`,this.$o=this.databaseId.database===Nu?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Wo(t,s,a,c,u){const m=Lf(),y=this.Qo(t,s.toUriEncodedString());xe(ff,`Sending RPC '${t}' ${m}:`,y,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,c,u);const{host:g}=new URL(y),v=Xf(g);return this.zo(t,y,p,a,v).then((E=>(xe(ff,`Received RPC '${t}' ${m}: `,E),E)),(E=>{throw zr(ff,`RPC '${t}' ${m} failed with error: `,E,"url: ",y,"request:",a),E}))}jo(t,s,a,c,u,m){return this.Wo(t,s,a,c,u)}Go(t,s,a){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qi})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((c,u)=>t[u]=c)),a&&a.headers.forEach(((c,u)=>t[u]=c))}Qo(t,s){const a=B2[t];let c=`${this.qo}/v1/${s}:${a}`;return this.databaseInfo.apiKey&&(c=`${c}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),c}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection",no=(r,t,s)=>{r.listen(t,(a=>{try{s(a)}catch(c){setTimeout((()=>{throw c}),0)}}))};class zi extends q2{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!zi.c_){const t=hv();no(t,uv.STAT_EVENT,(s=>{s.stat===Sf.PROXY?xe(dn,"STAT_EVENT: detected buffering proxy"):s.stat===Sf.NOPROXY&&xe(dn,"STAT_EVENT: detected no buffering proxy")})),zi.c_=!0}}zo(t,s,a,c,u){const m=Lf();return new Promise(((y,p)=>{const g=new ov;g.setWithCredentials(!0),g.listenOnce(cv.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case uu.NO_ERROR:const E=g.getResponseJson();xe(dn,`XHR for RPC '${t}' ${m} received:`,JSON.stringify(E)),y(E);break;case uu.TIMEOUT:xe(dn,`RPC '${t}' ${m} timed out`),p(new ye(se.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:const w=g.getStatus();if(xe(dn,`RPC '${t}' ${m} failed with status:`,w,"response text:",g.getResponseText()),w>0){let V=g.getResponseJson();Array.isArray(V)&&(V=V[0]);const P=V==null?void 0:V.error;if(P&&P.status&&P.message){const G=(function(oe){const ce=oe.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(ce)>=0?ce:se.UNKNOWN})(P.status);p(new ye(G,P.message))}else p(new ye(se.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ye(se.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:t,streamId:m,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{xe(dn,`RPC '${t}' ${m} completed.`)}}));const v=JSON.stringify(c);xe(dn,`RPC '${t}' ${m} sending request:`,c),g.send(s,"POST",v,a,15)}))}T_(t,s,a){const c=Lf(),u=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=this.createWebChannelTransport(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Go(y.initMessageHeaders,s,a),y.encodeInitMessageHeaders=!0;const g=u.join("");xe(dn,`Creating RPC '${t}' stream ${c}: ${g}`,y);const v=m.createWebChannel(g,y);this.I_(v);let E=!1,w=!1;const V=new H2({Ho:P=>{w?xe(dn,`Not sending because RPC '${t}' stream ${c} is closed:`,P):(E||(xe(dn,`Opening RPC '${t}' stream ${c} transport.`),v.open(),E=!0),xe(dn,`RPC '${t}' stream ${c} sending:`,P),v.send(P))},Jo:()=>v.close()});return no(v,so.EventType.OPEN,(()=>{w||(xe(dn,`RPC '${t}' stream ${c} transport opened.`),V.i_())})),no(v,so.EventType.CLOSE,(()=>{w||(w=!0,xe(dn,`RPC '${t}' stream ${c} transport closed`),V.o_(),this.E_(v))})),no(v,so.EventType.ERROR,(P=>{w||(w=!0,zr(dn,`RPC '${t}' stream ${c} transport errored. Name:`,P.name,"Message:",P.message),V.o_(new ye(se.UNAVAILABLE,"The operation could not be completed")))})),no(v,so.EventType.MESSAGE,(P=>{var G;if(!w){const L=P.data[0];lt(!!L,16349);const oe=L,ce=(oe==null?void 0:oe.error)||((G=oe[0])==null?void 0:G.error);if(ce){xe(dn,`RPC '${t}' stream ${c} received error:`,ce);const Z=ce.status;let ue=(function(D){const A=Ht[D];if(A!==void 0)return $v(A)})(Z),Te=ce.message;Z==="NOT_FOUND"&&Te.includes("database")&&Te.includes("does not exist")&&Te.includes(this.databaseId.database)&&zr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ue===void 0&&(ue=se.INTERNAL,Te="Unknown error status: "+Z+" with message "+ce.message),w=!0,V.o_(new ye(ue,Te)),v.close()}else xe(dn,`RPC '${t}' stream ${c} received:`,L),V.__(L)}})),zi.u_(),setTimeout((()=>{V.s_()}),0),V}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((s=>s===t))}Go(t,s,a){super.Go(t,s,a),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return dv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(r){return new zi(r)}function mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(r){return new Qw(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi.c_=!1;class lb{constructor(t,s,a=1e3,c=1.5,u=6e4){this.Ci=t,this.timerId=s,this.R_=a,this.A_=c,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const s=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),c=Math.max(0,s-a);c>0&&xe("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.d_} ms, delay with jitter: ${s} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="PersistentStream";class ob{constructor(t,s,a,c,u,m,y,p){this.Ci=t,this.b_=a,this.S_=c,this.connection=u,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=y,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lb(t,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,s){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():s&&s.code===se.RESOURCE_EXHAUSTED?(oa(s.toString()),oa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(s)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,c])=>{this.D_===s&&this.G_(a,c)}),(a=>{t((()=>{const c=new ye(se.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(c)}))}))}G_(t,s){const a=this.Q_(this.D_);this.stream=this.j_(t,s),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((c=>{a((()=>this.z_(c)))})),this.stream.onMessage((c=>{a((()=>++this.F_==1?this.H_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return xe(a0,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return s=>{this.Ci.enqueueAndForget((()=>this.D_===t?s():(xe(a0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class G2 extends ob{constructor(t,s,a,c,u,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,a,c,m),this.serializer=u}j_(t,s){return this.connection.T_("Listen",t,s)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const s=Zw(this.serializer,t),a=(function(u){if(!("targetChange"in u))return ze.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?ze.min():m.readTime?ks(m.readTime):ze.min()})(t);return this.listener.J_(s,a)}Z_(t){const s={};s.database=Uf(this.serializer),s.addTarget=(function(u,m){let y;const p=m.target;if(y=Mf(p)?{documents:e2(u,p)}:{query:t2(u,p).ft},y.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){y.resumeToken=Kv(u,m.resumeToken);const g=Vf(u,m.expectedCount);g!==null&&(y.expectedCount=g)}else if(m.snapshotVersion.compareTo(ze.min())>0){y.readTime=Au(u,m.snapshotVersion.toTimestamp());const g=Vf(u,m.expectedCount);g!==null&&(y.expectedCount=g)}return y})(this.serializer,t);const a=s2(this.serializer,t);a&&(s.labels=a),this.K_(s)}X_(t){const s={};s.database=Uf(this.serializer),s.removeTarget=t,this.K_(s)}}class $2 extends ob{constructor(t,s,a,c,u,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,a,c,m),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,s){return this.connection.T_("Write",t,s)}H_(t){return lt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,lt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){lt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const s=Ww(t.writeResults,t.commitTime),a=ks(t.commitTime);return this.listener.na(a,s)}ra(){const t={};t.database=Uf(this.serializer),this.K_(t)}ea(t){const s={streamToken:this.lastStreamToken,writes:t.map((a=>Jw(this.serializer,a)))};this.K_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{}class Q2 extends Y2{constructor(t,s,a,c){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=a,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.Wo(t,kf(s,a),c,u,m))).catch((u=>{throw u.name==="FirebaseError"?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(se.UNKNOWN,u.toString())}))}jo(t,s,a,c,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,y])=>this.connection.jo(t,kf(s,a),c,m,y,u))).catch((m=>{throw m.name==="FirebaseError"?(m.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new ye(se.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function K2(r,t,s,a){return new Q2(r,t,s,a)}class X2{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oa(s),this.aa=!1):xe("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="RemoteStore";class Z2{constructor(t,s,a,c,u){this.localStore=t,this.datastore=s,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((m=>{a.enqueueAndForget((async()=>{Br(this)&&(xe(Ur,"Restarting streams for network reachability change."),await(async function(p){const g=Pe(p);g.Ea.add(4),await So(g),g.Va.set("Unknown"),g.Ea.delete(4),await Yu(g)})(this))}))})),this.Va=new X2(a,c)}}async function Yu(r){if(Br(r))for(const t of r.Ra)await t(!0)}async function So(r){for(const t of r.Ra)await t(!1)}function cb(r,t){const s=Pe(r);s.Ia.has(t.targetId)||(s.Ia.set(t.targetId,t),ym(s)?pm(s):Ji(s).O_()&&gm(s,t))}function mm(r,t){const s=Pe(r),a=Ji(s);s.Ia.delete(t),a.O_()&&ub(s,t),s.Ia.size===0&&(a.O_()?a.L_():Br(s)&&s.Va.set("Unknown"))}function gm(r,t){if(r.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ze.min())>0){const s=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Ji(r).Z_(t)}function ub(r,t){r.da.$e(t),Ji(r).X_(t)}function pm(r){r.da=new Fw({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Ji(r).start(),r.Va.ua()}function ym(r){return Br(r)&&!Ji(r).x_()&&r.Ia.size>0}function Br(r){return Pe(r).Ea.size===0}function hb(r){r.da=void 0}async function J2(r){r.Va.set("Online")}async function W2(r){r.Ia.forEach(((t,s)=>{gm(r,t)}))}async function eT(r,t){hb(r),ym(r)?(r.Va.ha(t),pm(r)):r.Va.set("Unknown")}async function tT(r,t,s){if(r.Va.set("Online"),t instanceof Qv&&t.state===2&&t.cause)try{await(async function(c,u){const m=u.cause;for(const y of u.targetIds)c.Ia.has(y)&&(await c.remoteSyncer.rejectListen(y,m),c.Ia.delete(y),c.da.removeTarget(y))})(r,t)}catch(a){xe(Ur,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Ru(r,a)}else if(t instanceof mu?r.da.Xe(t):t instanceof Yv?r.da.st(t):r.da.tt(t),!s.isEqual(ze.min()))try{const a=await ib(r.localStore);s.compareTo(a)>=0&&await(function(u,m){const y=u.da.Tt(m);return y.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(g);v&&u.Ia.set(g,v.withResumeToken(p.resumeToken,m))}})),y.targetMismatches.forEach(((p,g)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(un.EMPTY_BYTE_STRING,v.snapshotVersion)),ub(u,p);const E=new qa(v.target,p,g,v.sequenceNumber);gm(u,E)})),u.remoteSyncer.applyRemoteEvent(y)})(r,s)}catch(a){xe(Ur,"Failed to raise snapshot:",a),await Ru(r,a)}}async function Ru(r,t,s){if(!Xi(t))throw t;r.Ea.add(1),await So(r),r.Va.set("Offline"),s||(s=()=>ib(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{xe(Ur,"Retrying IndexedDB access"),await s(),r.Ea.delete(1),await Yu(r)}))}function db(r,t){return t().catch((s=>Ru(r,s,t)))}async function Qu(r){const t=Pe(r),s=Za(t);let a=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:em;for(;nT(t);)try{const c=await k2(t.localStore,a);if(c===null){t.Ta.length===0&&s.L_();break}a=c.batchId,sT(t,c)}catch(c){await Ru(t,c)}fb(t)&&mb(t)}function nT(r){return Br(r)&&r.Ta.length<10}function sT(r,t){r.Ta.push(t);const s=Za(r);s.O_()&&s.Y_&&s.ea(t.mutations)}function fb(r){return Br(r)&&!Za(r).x_()&&r.Ta.length>0}function mb(r){Za(r).start()}async function aT(r){Za(r).ra()}async function rT(r){const t=Za(r);for(const s of r.Ta)t.ea(s.mutations)}async function iT(r,t,s){const a=r.Ta.shift(),c=lm.from(a,t,s);await db(r,(()=>r.remoteSyncer.applySuccessfulWrite(c))),await Qu(r)}async function lT(r,t){t&&Za(r).Y_&&await(async function(a,c){if((function(m){return Bw(m)&&m!==se.ABORTED})(c.code)){const u=a.Ta.shift();Za(a).B_(),await db(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,c))),await Qu(a)}})(r,t),fb(r)&&mb(r)}async function r0(r,t){const s=Pe(r);s.asyncQueue.verifyOperationInProgress(),xe(Ur,"RemoteStore received new credentials");const a=Br(s);s.Ea.add(3),await So(s),a&&s.Va.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.Ea.delete(3),await Yu(s)}async function oT(r,t){const s=Pe(r);t?(s.Ea.delete(2),await Yu(s)):t||(s.Ea.add(2),await So(s),s.Va.set("Unknown"))}function Ji(r){return r.ma||(r.ma=(function(s,a,c){const u=Pe(s);return u.sa(),new G2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,c)})(r.datastore,r.asyncQueue,{Zo:J2.bind(null,r),Yo:W2.bind(null,r),t_:eT.bind(null,r),J_:tT.bind(null,r)}),r.Ra.push((async t=>{t?(r.ma.B_(),ym(r)?pm(r):r.Va.set("Unknown")):(await r.ma.stop(),hb(r))}))),r.ma}function Za(r){return r.fa||(r.fa=(function(s,a,c){const u=Pe(s);return u.sa(),new $2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,c)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:aT.bind(null,r),t_:lT.bind(null,r),ta:rT.bind(null,r),na:iT.bind(null,r)}),r.Ra.push((async t=>{t?(r.fa.B_(),await Qu(r)):(await r.fa.stop(),r.Ta.length>0&&(xe(Ur,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(t,s,a,c,u){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=a,this.op=c,this.removalCallback=u,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,s,a,c,u){const m=Date.now()+a,y=new xm(t,s,m,c,u);return y.start(a),y}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(se.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vm(r,t){if(oa("AsyncQueue",`${t}: ${r}`),Xi(r))return new ye(se.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{static emptySet(t){return new Ui(t.comparator)}constructor(t){this.comparator=t?(s,a)=>t(s,a)||Re.comparator(s.key,a.key):(s,a)=>Re.comparator(s.key,a.key),this.keyedMap=ao(),this.sortedSet=new Tt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((s,a)=>(t(s),!1)))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof Ui)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;s.hasNext();){const c=s.getNext().key,u=a.getNext().key;if(!c.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((s=>{t.push(s.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const a=new Ui;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=s,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.ga=new Tt(Re.comparator)}track(t){const s=t.doc.key,a=this.ga.get(s);a?t.type!==0&&a.type===3?this.ga=this.ga.insert(s,t):t.type===3&&a.type!==1?this.ga=this.ga.insert(s,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.ga=this.ga.insert(s,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.ga=this.ga.remove(s):t.type===1&&a.type===2?this.ga=this.ga.insert(s,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):Ve(63341,{Vt:t,pa:a}):this.ga=this.ga.insert(s,t)}ya(){const t=[];return this.ga.inorderTraversal(((s,a)=>{t.push(a)})),t}}class Gi{constructor(t,s,a,c,u,m,y,p,g){this.query=t,this.docs=s,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=u,this.fromCache=m,this.syncStateChanged=y,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(t,s,a,c,u){const m=[];return s.forEach((y=>{m.push({type:0,doc:y})})),new Gi(t,s,Ui.emptySet(s),m,a,c,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Lu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,a=t.docChanges;if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++)if(s[c].type!==a[c].type||!s[c].doc.isEqual(a[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class uT{constructor(){this.queries=l0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,a){const c=Pe(s),u=c.queries;c.queries=l0(),u.forEach(((m,y)=>{for(const p of y.ba)p.onError(a)}))})(this,new ye(se.ABORTED,"Firestore shutting down"))}}function l0(){return new Lr((r=>Ov(r)),Lu)}async function gb(r,t){const s=Pe(r);let a=3;const c=t.query;let u=s.queries.get(c);u?!u.Sa()&&t.Da()&&(a=2):(u=new cT,a=t.Da()?0:1);try{switch(a){case 0:u.wa=await s.onListen(c,!0);break;case 1:u.wa=await s.onListen(c,!1);break;case 2:await s.onFirstRemoteStoreListen(c)}}catch(m){const y=vm(m,`Initialization of query '${Mi(t.query)}' failed`);return void t.onError(y)}s.queries.set(c,u),u.ba.push(t),t.va(s.onlineState),u.wa&&t.Fa(u.wa)&&bm(s)}async function pb(r,t){const s=Pe(r),a=t.query;let c=3;const u=s.queries.get(a);if(u){const m=u.ba.indexOf(t);m>=0&&(u.ba.splice(m,1),u.ba.length===0?c=t.Da()?0:1:!u.Sa()&&t.Da()&&(c=2))}switch(c){case 0:return s.queries.delete(a),s.onUnlisten(a,!0);case 1:return s.queries.delete(a),s.onUnlisten(a,!1);case 2:return s.onLastRemoteStoreUnlisten(a);default:return}}function hT(r,t){const s=Pe(r);let a=!1;for(const c of t){const u=c.query,m=s.queries.get(u);if(m){for(const y of m.ba)y.Fa(c)&&(a=!0);m.wa=c}}a&&bm(s)}function dT(r,t,s){const a=Pe(r),c=a.queries.get(t);if(c)for(const u of c.ba)u.onError(s);a.queries.delete(t)}function bm(r){r.Ca.forEach((t=>{t.next()}))}var Bf,o0;(o0=Bf||(Bf={})).Ma="default",o0.Cache="cache";class yb{constructor(t,s,a){this.query=t,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(t){if(!this.options.includeMetadataChanges){const a=[];for(const c of t.docChanges)c.type!==3&&a.push(c);t=new Gi(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),s=!0):this.La(t,this.onlineState)&&(this.ka(t),s=!0),this.Na=t,s}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),s=!0),s}La(t,s){if(!t.fromCache||!this.Da())return!0;const a=s!=="Offline";return(!this.options.Ka||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(t){t=Gi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Bf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t){this.key=t}}class vb{constructor(t){this.key=t}}class fT{constructor(t,s){this.query=t,this.Za=s,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Je(),this.mutatedKeys=Je(),this.eu=Vv(t),this.tu=new Ui(this.eu)}get nu(){return this.Za}ru(t,s){const a=s?s.iu:new i0,c=s?s.tu:this.tu;let u=s?s.mutatedKeys:this.mutatedKeys,m=c,y=!1;const p=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,g=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal(((v,E)=>{const w=c.get(v),V=Bu(this.query,E)?E:null,P=!!w&&this.mutatedKeys.has(w.key),G=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let L=!1;w&&V?w.data.isEqual(V.data)?P!==G&&(a.track({type:3,doc:V}),L=!0):this.su(w,V)||(a.track({type:2,doc:V}),L=!0,(p&&this.eu(V,p)>0||g&&this.eu(V,g)<0)&&(y=!0)):!w&&V?(a.track({type:0,doc:V}),L=!0):w&&!V&&(a.track({type:1,doc:w}),L=!0,(p||g)&&(y=!0)),L&&(V?(m=m.add(V),u=G?u.add(v):u.delete(v)):(m=m.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const v=this.query.limitType==="F"?m.last():m.first();m=m.delete(v.key),u=u.delete(v.key),a.track({type:1,doc:v})}return{tu:m,iu:a,Ss:y,mutatedKeys:u}}su(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,a,c){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const m=t.iu.ya();m.sort(((v,E)=>(function(V,P){const G=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Vt:L})}};return G(V)-G(P)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(a),c=c??!1;const y=s&&!c?this._u():[],p=this.Ya.size===0&&this.current&&!c?1:0,g=p!==this.Xa;return this.Xa=p,m.length!==0||g?{snapshot:new Gi(this.query,t.tu,u,m,t.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new i0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((s=>this.Za=this.Za.add(s))),t.modifiedDocuments.forEach((s=>{})),t.removedDocuments.forEach((s=>this.Za=this.Za.delete(s))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Je(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const s=[];return t.forEach((a=>{this.Ya.has(a)||s.push(new vb(a))})),this.Ya.forEach((a=>{t.has(a)||s.push(new xb(a))})),s}cu(t){this.Za=t.ks,this.Ya=Je();const s=this.ru(t.documents);return this.applyChanges(s,!0)}lu(){return Gi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const _m="SyncEngine";class mT{constructor(t,s,a){this.query=t,this.targetId=s,this.view=a}}class gT{constructor(t){this.key=t,this.hu=!1}}class pT{constructor(t,s,a,c,u,m){this.localStore=t,this.remoteStore=s,this.eventManager=a,this.sharedClientState=c,this.currentUser=u,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Lr((y=>Ov(y)),Lu),this.Iu=new Map,this.Eu=new Set,this.Ru=new Tt(Re.comparator),this.Au=new Map,this.Vu=new um,this.du={},this.mu=new Map,this.fu=Fi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yT(r,t,s=!0){const a=Tb(r);let c;const u=a.Tu.get(t);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),c=u.view.lu()):c=await bb(a,t,s,!0),c}async function xT(r,t){const s=Tb(r);await bb(s,t,!0,!1)}async function bb(r,t,s,a){const c=await z2(r.localStore,Vs(t)),u=c.targetId,m=r.sharedClientState.addLocalQueryTarget(u,s);let y;return a&&(y=await vT(r,t,u,m==="current",c.resumeToken)),r.isPrimaryClient&&s&&cb(r.remoteStore,c),y}async function vT(r,t,s,a,c){r.pu=(E,w,V)=>(async function(G,L,oe,ce){let Z=L.view.ru(oe);Z.Ss&&(Z=await e0(G.localStore,L.query,!1).then((({documents:D})=>L.view.ru(D,Z))));const ue=ce&&ce.targetChanges.get(L.targetId),Te=ce&&ce.targetMismatches.get(L.targetId)!=null,je=L.view.applyChanges(Z,G.isPrimaryClient,ue,Te);return u0(G,L.targetId,je.au),je.snapshot})(r,E,w,V);const u=await e0(r.localStore,t,!0),m=new fT(t,u.ks),y=m.ru(u.documents),p=jo.createSynthesizedTargetChangeForCurrentChange(s,a&&r.onlineState!=="Offline",c),g=m.applyChanges(y,r.isPrimaryClient,p);u0(r,s,g.au);const v=new mT(t,s,m);return r.Tu.set(t,v),r.Iu.has(s)?r.Iu.get(s).push(t):r.Iu.set(s,[t]),g.snapshot}async function bT(r,t,s){const a=Pe(r),c=a.Tu.get(t),u=a.Iu.get(c.targetId);if(u.length>1)return a.Iu.set(c.targetId,u.filter((m=>!Lu(m,t)))),void a.Tu.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(c.targetId),a.sharedClientState.isActiveQueryTarget(c.targetId)||await Pf(a.localStore,c.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(c.targetId),s&&mm(a.remoteStore,c.targetId),qf(a,c.targetId)})).catch(Ki)):(qf(a,c.targetId),await Pf(a.localStore,c.targetId,!0))}async function _T(r,t){const s=Pe(r),a=s.Tu.get(t),c=s.Iu.get(a.targetId);s.isPrimaryClient&&c.length===1&&(s.sharedClientState.removeLocalQueryTarget(a.targetId),mm(s.remoteStore,a.targetId))}async function ET(r,t,s){const a=CT(r);try{const c=await(function(m,y){const p=Pe(m),g=yt.now(),v=y.reduce(((V,P)=>V.add(P.key)),Je());let E,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let P=ca(),G=Je();return p.xs.getEntries(V,v).next((L=>{P=L,P.forEach(((oe,ce)=>{ce.isValidDocument()||(G=G.add(oe))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,P))).next((L=>{E=L;const oe=[];for(const ce of y){const Z=kw(ce,E.get(ce.key).overlayedDocument);Z!=null&&oe.push(new nr(ce.key,Z,jv(Z.value.mapValue),jn.exists(!0)))}return p.mutationQueue.addMutationBatch(V,g,oe,y)})).next((L=>{w=L;const oe=L.applyToLocalDocumentSet(E,G);return p.documentOverlayCache.saveOverlays(V,L.batchId,oe)}))})).then((()=>({batchId:w.batchId,changes:zv(E)})))})(a.localStore,t);a.sharedClientState.addPendingMutation(c.batchId),(function(m,y,p){let g=m.du[m.currentUser.toKey()];g||(g=new Tt(Ze)),g=g.insert(y,p),m.du[m.currentUser.toKey()]=g})(a,c.batchId,s),await Ao(a,c.changes),await Qu(a.remoteStore)}catch(c){const u=vm(c,"Failed to persist write");s.reject(u)}}async function _b(r,t){const s=Pe(r);try{const a=await O2(s.localStore,t);t.targetChanges.forEach(((c,u)=>{const m=s.Au.get(u);m&&(lt(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?m.hu=!0:c.modifiedDocuments.size>0?lt(m.hu,14607):c.removedDocuments.size>0&&(lt(m.hu,42227),m.hu=!1))})),await Ao(s,a,t)}catch(a){await Ki(a)}}function c0(r,t,s){const a=Pe(r);if(a.isPrimaryClient&&s===0||!a.isPrimaryClient&&s===1){const c=[];a.Tu.forEach(((u,m)=>{const y=m.view.va(t);y.snapshot&&c.push(y.snapshot)})),(function(m,y){const p=Pe(m);p.onlineState=y;let g=!1;p.queries.forEach(((v,E)=>{for(const w of E.ba)w.va(y)&&(g=!0)})),g&&bm(p)})(a.eventManager,t),c.length&&a.Pu.J_(c),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function NT(r,t,s){const a=Pe(r);a.sharedClientState.updateQueryState(t,"rejected",s);const c=a.Au.get(t),u=c&&c.key;if(u){let m=new Tt(Re.comparator);m=m.insert(u,mn.newNoDocument(u,ze.min()));const y=Je().add(u),p=new Gu(ze.min(),new Map,new Tt(Ze),m,y);await _b(a,p),a.Ru=a.Ru.remove(u),a.Au.delete(t),Em(a)}else await Pf(a.localStore,t,!1).then((()=>qf(a,t,s))).catch(Ki)}async function wT(r,t){const s=Pe(r),a=t.batch.batchId;try{const c=await I2(s.localStore,t);Nb(s,a,null),Eb(s,a),s.sharedClientState.updateMutationState(a,"acknowledged"),await Ao(s,c)}catch(c){await Ki(c)}}async function TT(r,t,s){const a=Pe(r);try{const c=await(function(m,y){const p=Pe(m);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,y).next((E=>(lt(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,y))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(a.localStore,t);Nb(a,t,s),Eb(a,t),a.sharedClientState.updateMutationState(t,"rejected",s),await Ao(a,c)}catch(c){await Ki(c)}}function Eb(r,t){(r.mu.get(t)||[]).forEach((s=>{s.resolve()})),r.mu.delete(t)}function Nb(r,t,s){const a=Pe(r);let c=a.du[a.currentUser.toKey()];if(c){const u=c.get(t);u&&(s?u.reject(s):u.resolve(),c=c.remove(t)),a.du[a.currentUser.toKey()]=c}}function qf(r,t,s=null){r.sharedClientState.removeLocalQueryTarget(t);for(const a of r.Iu.get(t))r.Tu.delete(a),s&&r.Pu.yu(a,s);r.Iu.delete(t),r.isPrimaryClient&&r.Vu.Gr(t).forEach((a=>{r.Vu.containsKey(a)||wb(r,a)}))}function wb(r,t){r.Eu.delete(t.path.canonicalString());const s=r.Ru.get(t);s!==null&&(mm(r.remoteStore,s),r.Ru=r.Ru.remove(t),r.Au.delete(s),Em(r))}function u0(r,t,s){for(const a of s)a instanceof xb?(r.Vu.addReference(a.key,t),jT(r,a)):a instanceof vb?(xe(_m,"Document no longer in limbo: "+a.key),r.Vu.removeReference(a.key,t),r.Vu.containsKey(a.key)||wb(r,a.key)):Ve(19791,{wu:a})}function jT(r,t){const s=t.key,a=s.path.canonicalString();r.Ru.get(s)||r.Eu.has(a)||(xe(_m,"New document in limbo: "+s),r.Eu.add(a),Em(r))}function Em(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const s=new Re(vt.fromString(t)),a=r.fu.next();r.Au.set(a,new gT(s)),r.Ru=r.Ru.insert(s,a),cb(r.remoteStore,new qa(Vs(rm(s.path)),a,"TargetPurposeLimboResolution",zu.ce))}}async function Ao(r,t,s){const a=Pe(r),c=[],u=[],m=[];a.Tu.isEmpty()||(a.Tu.forEach(((y,p)=>{m.push(a.pu(p,t,s).then((g=>{var v;if((g||s)&&a.isPrimaryClient){const E=g?!g.fromCache:(v=s==null?void 0:s.targetChanges.get(p.targetId))==null?void 0:v.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){c.push(g);const E=dm.Es(p.targetId,g);u.push(E)}})))})),await Promise.all(m),a.Pu.J_(c),await(async function(p,g){const v=Pe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(g,(w=>ie.forEach(w.Ts,(V=>v.persistence.referenceDelegate.addReference(E,w.targetId,V))).next((()=>ie.forEach(w.Is,(V=>v.persistence.referenceDelegate.removeReference(E,w.targetId,V)))))))))}catch(E){if(!Xi(E))throw E;xe(fm,"Failed to update sequence numbers: "+E)}for(const E of g){const w=E.targetId;if(!E.fromCache){const V=v.vs.get(w),P=V.snapshotVersion,G=V.withLastLimboFreeSnapshotVersion(P);v.vs=v.vs.insert(w,G)}}})(a.localStore,u))}async function ST(r,t){const s=Pe(r);if(!s.currentUser.isEqual(t)){xe(_m,"User change. New user:",t.toKey());const a=await rb(s.localStore,t);s.currentUser=t,(function(u,m){u.mu.forEach((y=>{y.forEach((p=>{p.reject(new ye(se.CANCELLED,m))}))})),u.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await Ao(s,a.Ns)}}function AT(r,t){const s=Pe(r),a=s.Au.get(t);if(a&&a.hu)return Je().add(a.key);{let c=Je();const u=s.Iu.get(t);if(!u)return c;for(const m of u){const y=s.Tu.get(m);c=c.unionWith(y.view.nu)}return c}}function Tb(r){const t=Pe(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=_b.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=AT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NT.bind(null,t),t.Pu.J_=hT.bind(null,t.eventManager),t.Pu.yu=dT.bind(null,t.eventManager),t}function CT(r){const t=Pe(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=TT.bind(null,t),t}class Du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=$u(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,s){return null}Mu(t,s){return null}vu(t){return M2(this.persistence,new C2,t.initialUser,this.serializer)}Cu(t){return new ab(hm.Vi,this.serializer)}Du(t){return new P2}async terminate(){var t,s;(t=this.gcScheduler)==null||t.stop(),(s=this.indexBackfillerScheduler)==null||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Du.provider={build:()=>new Du};class RT extends Du{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,s){lt(this.persistence.referenceDelegate instanceof Cu,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new m2(a,t.asyncQueue,s)}Cu(t){const s=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new ab((a=>Cu.Vi(a,s)),this.serializer)}}class Hf{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>c0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=ST.bind(null,this.syncEngine),await oT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new uT})()}createDatastore(t){const s=$u(t.databaseInfo.databaseId),a=F2(t.databaseInfo);return K2(t.authCredentials,t.appCheckCredentials,a,s)}createRemoteStore(t){return(function(a,c,u,m,y){return new Z2(a,c,u,m,y)})(this.localStore,this.datastore,t.asyncQueue,(s=>c0(this.syncEngine,s,0)),(function(){return s0.v()?new s0:new L2})())}createSyncEngine(t,s){return(function(c,u,m,y,p,g,v){const E=new pT(c,u,m,y,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await(async function(c){const u=Pe(c);xe(Ur,"RemoteStore shutting down."),u.Ea.add(5),await So(u),u.Aa.shutdown(),u.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(s=this.eventManager)==null||s.terminate()}}Hf.provider={build:()=>new Hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):oa("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,s){setTimeout((()=>{this.muted||t(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja="FirestoreClient";class DT{constructor(t,s,a,c,u){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=a,this._databaseInfo=c,this.user=fn.UNAUTHENTICATED,this.clientId=Wf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async m=>{xe(Ja,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(a,(m=>(xe(Ja,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=vm(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}async function gf(r,t){r.asyncQueue.verifyOperationInProgress(),xe(Ja,"Initializing OfflineComponentProvider");const s=r.configuration;await t.initialize(s);let a=s.initialUser;r.setCredentialChangeListener((async c=>{a.isEqual(c)||(await rb(t.localStore,c),a=c)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function h0(r,t){r.asyncQueue.verifyOperationInProgress();const s=await MT(r);xe(Ja,"Initializing OnlineComponentProvider"),await t.initialize(s,r.configuration),r.setCredentialChangeListener((a=>r0(t.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,c)=>r0(t.remoteStore,c))),r._onlineComponents=t}async function MT(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xe(Ja,"Using user provided OfflineComponentProvider");try{await gf(r,r._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!(function(c){return c.name==="FirebaseError"?c.code===se.FAILED_PRECONDITION||c.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(s))throw s;zr("Error using user provided cache. Falling back to memory cache: "+s),await gf(r,new Du)}}else xe(Ja,"Using default OfflineComponentProvider"),await gf(r,new RT(void 0));return r._offlineComponents}async function Sb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xe(Ja,"Using user provided OnlineComponentProvider"),await h0(r,r._uninitializedComponentsProvider._online)):(xe(Ja,"Using default OnlineComponentProvider"),await h0(r,new Hf))),r._onlineComponents}function IT(r){return Sb(r).then((t=>t.syncEngine))}async function Ab(r){const t=await Sb(r),s=t.eventManager;return s.onListen=yT.bind(null,t.syncEngine),s.onUnlisten=bT.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=xT.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=_T.bind(null,t.syncEngine),s}function OT(r,t,s={}){const a=new ia;return r.asyncQueue.enqueueAndForget((async()=>(function(u,m,y,p,g){const v=new jb({next:w=>{v.Nu(),m.enqueueAndForget((()=>pb(u,E)));const V=w.docs.has(y);!V&&w.fromCache?g.reject(new ye(se.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&w.fromCache&&p&&p.source==="server"?g.reject(new ye(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),E=new yb(rm(y.path),v,{includeMetadataChanges:!0,Ka:!0});return gb(u,E)})(await Ab(r),r.asyncQueue,t,s,a))),a.promise}function VT(r,t,s={}){const a=new ia;return r.asyncQueue.enqueueAndForget((async()=>(function(u,m,y,p,g){const v=new jb({next:w=>{v.Nu(),m.enqueueAndForget((()=>pb(u,E))),w.fromCache&&p.source==="server"?g.reject(new ye(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),E=new yb(y,v,{includeMetadataChanges:!0,Ka:!0});return gb(u,E)})(await Ab(r),r.asyncQueue,t,s,a))),a.promise}function kT(r,t){const s=new ia;return r.asyncQueue.enqueueAndForget((async()=>ET(await IT(r),t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="ComponentProvider",d0=new Map;function UT(r,t,s,a,c){return new aw(r,t,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Cb(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="firestore.googleapis.com",f0=!0;class m0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ye(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rb,this.ssl=f0}else this.host=t.host,this.ssl=t.ssl??f0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=sb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<d2)throw new ye(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}YN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cb(t.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(a,c){return a.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ku{constructor(t,s,a,c){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=a,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ye(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new zN;switch(a.type){case"firstParty":return new BN(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ye(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const a=d0.get(s);a&&(xe(zT,"Removing Datastore"),d0.delete(s),a.terminate())})(this),Promise.resolve()}}function PT(r,t,s,a={}){var g;r=Ps(r,Ku);const c=Xf(t),u=r._getSettings(),m={...u,emulatorOptions:r._getEmulatorOptions()},y=`${t}:${s}`;c&&(cE(`https://${y}`),fE("Firestore",!0)),u.host!==Rb&&u.host!==y&&zr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:y,ssl:c,emulatorOptions:a};if(!vu(p,m)&&(r._setSettings(p),a.mockUserToken)){let v,E;if(typeof a.mockUserToken=="string")v=a.mockUserToken,E=fn.MOCK_USER;else{v=uE(a.mockUserToken,(g=r._app)==null?void 0:g.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new ye(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new fn(w)}r._authCredentials=new UN(new mv(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t,s,a){this.converter=s,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new qr(this.firestore,t,this._query)}}class $t{constructor(t,s,a){this.converter=s,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $t(this.firestore,t,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,s,a){if(wo(s,$t._jsonSchema))return new $t(t,a||null,new Re(vt.fromString(s.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:Gt("string",$t._jsonSchemaVersion),referencePath:Gt("string")};class $a extends qr{constructor(t,s,a){super(t,s,rm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $t(this.firestore,null,new Re(t))}withConverter(t){return new $a(this.firestore,t,this._path)}}function Nm(r,t,...s){if(r=Us(r),gv("collection","path",t),r instanceof Ku){const a=vt.fromString(t,...s);return Sx(a),new $a(r,null,a)}{if(!(r instanceof $t||r instanceof $a))throw new ye(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(vt.fromString(t,...s));return Sx(a),new $a(r.firestore,null,a)}}function Co(r,t,...s){if(r=Us(r),arguments.length===1&&(t=Wf.newId()),gv("doc","path",t),r instanceof Ku){const a=vt.fromString(t,...s);return jx(a),new $t(r,null,new Re(a))}{if(!(r instanceof $t||r instanceof $a))throw new ye(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(vt.fromString(t,...s));return jx(a),new $t(r.firestore,r instanceof $a?r.converter:null,new Re(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="AsyncQueue";class p0{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lb(this,"async_queue_retry"),this._c=()=>{const a=mf();a&&xe(g0,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=t;const s=mf();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const s=mf();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new ia;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Xi(t))throw t;xe(g0,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const s=this.ac.then((()=>(this.rc=!0,t().catch((a=>{throw this.nc=a,this.rc=!1,oa("INTERNAL UNHANDLED ERROR: ",y0(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=s,s}enqueueAfterDelay(t,s,a){this.uc(),this.oc.indexOf(t)>-1&&(s=0);const c=xm.createAndSchedule(this,t,s,a,(u=>this.hc(u)));return this.tc.push(c),c}uc(){this.nc&&Ve(47125,{Pc:y0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const s of this.tc)if(s.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((s,a)=>s.targetTimeMs-a.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const s=this.tc.indexOf(t);this.tc.splice(s,1)}}function y0(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class Hr extends Ku{constructor(t,s,a,c){super(t,s,a,c),this.type="firestore",this._queue=new p0,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new p0(t),this._firestoreClient=void 0,await t}}}function LT(r,t){const s=typeof r=="object"?r:NN(),a=typeof r=="string"?r:Nu,c=xN(s,"firestore").getImmediate({identifier:a});if(!c._initialized){const u=lE("firestore");u&&PT(c,...u)}return c}function Xu(r){if(r._terminated)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||BT(r),r._firestoreClient}function BT(r){var a,c,u,m;const t=r._freezeSettings(),s=UT(r._databaseId,((a=r._app)==null?void 0:a.options.appId)||"",r._persistenceKey,(c=r._app)==null?void 0:c.options.apiKey,t);r._componentsProvider||(u=t.localCache)!=null&&u._offlineComponentProvider&&((m=t.localCache)!=null&&m._onlineComponentProvider)&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new DT(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Jn(un.fromBase64String(t))}catch(s){throw new ye(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new Jn(un.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(wo(t,Jn._jsonSchema))return Jn.fromBase64String(t.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Gt("string",Jn._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new ye(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new ye(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new ye(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ze(this._lat,t._lat)||Ze(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(t){if(wo(t,zs._jsonSchema))return new zs(t.latitude,t.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:Gt("string",zs._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(t){this._values=(t||[]).map((s=>s))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(a,c){if(a.length!==c.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==c[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(wo(t,hs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((s=>typeof s=="number")))return new hs(t.vectorValues);throw new ye(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hs._jsonSchemaVersion="firestore/vectorValue/1.0",hs._jsonSchema={type:Gt("string",hs._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=/^__.*__$/;class HT{constructor(t,s,a){this.data=t,this.fieldMask=s,this.fieldTransforms=a}toMutation(t,s){return this.fieldMask!==null?new nr(t,this.data,this.fieldMask,s,this.fieldTransforms):new To(t,this.data,s,this.fieldTransforms)}}class Db{constructor(t,s,a){this.data=t,this.fieldMask=s,this.fieldTransforms=a}toMutation(t,s){return new nr(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function Mb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{dataSource:r})}}class jm{constructor(t,s,a,c,u,m){this.settings=t,this.databaseId=s,this.serializer=a,this.ignoreUndefinedProperties=c,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new jm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var c;const s=(c=this.path)==null?void 0:c.child(t),a=this.contextWith({path:s,arrayElement:!1});return a.validatePathSegment(t),a}childContextForFieldPath(t){var c;const s=(c=this.path)==null?void 0:c.child(t),a=this.contextWith({path:s,arrayElement:!1});return a.validatePath(),a}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Mu(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((s=>t.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>t.isPrefixOf(s.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(Mb(this.dataSource)&&qT.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class FT{constructor(t,s,a){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=a||$u(t)}createContext(t,s,a,c=!1){return new jm({dataSource:t,methodName:s,targetDoc:a,path:cn.emptyPath(),arrayElement:!1,hasConverter:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zu(r){const t=r._freezeSettings(),s=$u(r._databaseId);return new FT(r._databaseId,!!t.ignoreUndefinedProperties,s)}function Sm(r,t,s,a,c,u={}){const m=r.createContext(u.merge||u.mergeFields?2:0,t,s,c);Am("Data must be an object, but it was:",m,a);const y=Ib(a,m);let p,g;if(u.merge)p=new zn(m.fieldMask),g=m.fieldTransforms;else if(u.mergeFields){const v=[];for(const E of u.mergeFields){const w=$i(t,E,s);if(!m.contains(w))throw new ye(se.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);kb(v,w)||v.push(w)}p=new zn(v),g=m.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=m.fieldTransforms;return new HT(new Tn(y),p,g)}class Ju extends Tm{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ju}}function GT(r,t,s,a){const c=r.createContext(1,t,s);Am("Data must be an object, but it was:",c,a);const u=[],m=Tn.empty();tr(a,((p,g)=>{const v=Vb(t,p,s);g=Us(g);const E=c.childContextForFieldPath(v);if(g instanceof Ju)u.push(v);else{const w=Ro(g,E);w!=null&&(u.push(v),m.set(v,w))}}));const y=new zn(u);return new Db(m,y,c.fieldTransforms)}function $T(r,t,s,a,c,u){const m=r.createContext(1,t,s),y=[$i(t,a,s)],p=[c];if(u.length%2!=0)throw new ye(se.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)y.push($i(t,u[w])),p.push(u[w+1]);const g=[],v=Tn.empty();for(let w=y.length-1;w>=0;--w)if(!kb(g,y[w])){const V=y[w];let P=p[w];P=Us(P);const G=m.childContextForFieldPath(V);if(P instanceof Ju)g.push(V);else{const L=Ro(P,G);L!=null&&(g.push(V),v.set(V,L))}}const E=new zn(g);return new Db(v,E,m.fieldTransforms)}function YT(r,t,s,a=!1){return Ro(s,r.createContext(a?4:3,t))}function Ro(r,t){if(Ob(r=Us(r)))return Am("Unsupported field value:",t,r),Ib(r,t);if(r instanceof Tm)return(function(a,c){if(!Mb(c.dataSource))throw c.createError(`${a._methodName}() can only be used with update() and set()`);if(!c.path)throw c.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(c);u&&c.fieldTransforms.push(u)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(a,c){const u=[];let m=0;for(const y of a){let p=Ro(y,c.childContextForArray(m));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),m++}return{arrayValue:{values:u}}})(r,t)}return(function(a,c){if((a=Us(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Rw(c.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=yt.fromDate(a);return{timestampValue:Au(c.serializer,u)}}if(a instanceof yt){const u=new yt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Au(c.serializer,u)}}if(a instanceof zs)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Jn)return{bytesValue:Kv(c.serializer,a._byteString)};if(a instanceof $t){const u=c.databaseId,m=a.firestore._databaseId;if(!m.isEqual(u))throw c.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cm(a.firestore._databaseId||c.databaseId,a._key.path)}}if(a instanceof hs)return(function(m,y){const p=m instanceof hs?m.toArray():m;return{mapValue:{fields:{[wv]:{stringValue:Tv},[wu]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw y.createError("VectorValues must only contain numeric values.");return im(y.serializer,v)}))}}}}}})(a,c);if(nb(a))return a._toProto(c.serializer);throw c.createError(`Unsupported field value: ${ku(a)}`)})(r,t)}function Ib(r,t){const s={};return xv(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tr(r,((a,c)=>{const u=Ro(c,t.childContextForField(a));u!=null&&(s[a]=u)})),{mapValue:{fields:s}}}function Ob(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof yt||r instanceof zs||r instanceof Jn||r instanceof $t||r instanceof Tm||r instanceof hs||nb(r))}function Am(r,t,s){if(!Ob(s)||!pv(s)){const a=ku(s);throw a==="an object"?t.createError(r+" a custom object"):t.createError(r+" "+a)}}function $i(r,t,s){if((t=Us(t))instanceof wm)return t._internalPath;if(typeof t=="string")return Vb(r,t);throw Mu("Field path arguments must be of type string or ",r,!1,void 0,s)}const QT=new RegExp("[~\\*/\\[\\]]");function Vb(r,t,s){if(t.search(QT)>=0)throw Mu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,s);try{return new wm(...t.split("."))._internalPath}catch{throw Mu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,s)}}function Mu(r,t,s,a,c){const u=a&&!a.isEmpty(),m=c!==void 0;let y=`Function ${t}() called with invalid data`;s&&(y+=" (via `toFirestore()`)"),y+=". ";let p="";return(u||m)&&(p+=" (found",u&&(p+=` in field ${a}`),m&&(p+=` in document ${c}`),p+=")"),new ye(se.INVALID_ARGUMENT,y+r+p)}function kb(r,t){return r.some((s=>s.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{convertValue(t,s="none"){switch(Xa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ot(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(Ka(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw Ve(62114,{value:t})}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const a={};return tr(t,((c,u)=>{a[c]=this.convertValue(u,s)})),a}convertVectorValue(t){var a,c,u;const s=(u=(c=(a=t.fields)==null?void 0:a[wu].arrayValue)==null?void 0:c.values)==null?void 0:u.map((m=>Ot(m.doubleValue)));return new hs(s)}convertGeoPoint(t){return new zs(Ot(t.latitude),Ot(t.longitude))}convertArray(t,s){return(t.values||[]).map((a=>this.convertValue(a,s)))}convertServerTimestamp(t,s){switch(s){case"previous":const a=Pu(t);return a==null?null:this.convertValue(a,s);case"estimate":return this.convertTimestamp(po(t));default:return null}}convertTimestamp(t){const s=Qa(t);return new yt(s.seconds,s.nanos)}convertDocumentKey(t,s){const a=vt.fromString(t);lt(tb(a),9688,{name:t});const c=new yo(a.get(1),a.get(3)),u=new Re(a.popFirst(5));return c.isEqual(s)||oa(`Document ${u} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb extends KT{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jn(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new $t(this.firestore,null,s)}}const x0="@firebase/firestore",v0="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t,s,a,c,u){this._firestore=t,this._userDataWriter=s,this._key=a,this._document=c,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new XT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const s=this._document.data.field($i("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class XT extends Ub{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cm{}class Pb extends Cm{}function JT(r,t,...s){let a=[];t instanceof Cm&&a.push(t),a=a.concat(s),(function(u){const m=u.filter((p=>p instanceof Dm)).length,y=u.filter((p=>p instanceof Rm)).length;if(m>1||m>0&&y>0)throw new ye(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const c of a)r=c._apply(r);return r}class Rm extends Pb{constructor(t,s,a){super(),this._field=t,this._op=s,this._value=a,this.type="where"}static _create(t,s,a){return new Rm(t,s,a)}_apply(t){const s=this._parse(t);return Lb(t._query,s),new qr(t.firestore,t.converter,If(t._query,s))}_parse(t){const s=Zu(t.firestore);return(function(u,m,y,p,g,v,E){let w;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){_0(E,v);const P=[];for(const G of E)P.push(b0(p,u,G));w={arrayValue:{values:P}}}else w=b0(p,u,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||_0(E,v),w=YT(y,m,E,v==="in"||v==="not-in");return Ft.create(g,v,w)})(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}class Dm extends Cm{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new Dm(t,s)}_parse(t){const s=this._queryConstraints.map((a=>a._parse(t))).filter((a=>a.getFilters().length>0));return s.length===1?s[0]:ds.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:((function(c,u){let m=c;const y=u.getFlattenedFilters();for(const p of y)Lb(m,p),m=If(m,p)})(t._query,s),new qr(t.firestore,t.converter,If(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mm extends Pb{constructor(t,s){super(),this._field=t,this._direction=s,this.type="orderBy"}static _create(t,s){return new Mm(t,s)}_apply(t){const s=(function(c,u,m){if(c.startAt!==null)throw new ye(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(c.endAt!==null)throw new ye(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vo(u,m)})(t._query,this._field,this._direction);return new qr(t.firestore,t.converter,Ew(t._query,s))}}function WT(r,t="asc"){const s=t,a=$i("orderBy",r);return Mm._create(a,s)}function b0(r,t,s){if(typeof(s=Us(s))=="string"){if(s==="")throw new ye(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iv(t)&&s.indexOf("/")!==-1)throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const a=t.path.child(vt.fromString(s));if(!Re.isDocumentKey(a))throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Vx(r,new Re(a))}if(s instanceof $t)return Vx(r,s._key);throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ku(s)}.`)}function _0(r,t){if(!Array.isArray(r)||r.length===0)throw new ye(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Lb(r,t){const s=(function(c,u){for(const m of c)for(const y of m.getFlattenedFilters())if(u.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(s!==null)throw s===t.op?new ye(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ye(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}function Im(r,t,s){let a;return a=r?s&&(s.merge||s.mergeFields)?r.toFirestore(t,s):r.toFirestore(t):t,a}class io{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Or extends Ub{constructor(t,s,a,c,u,m){super(t,s,a,c,m),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const a=this._document.data.field($i("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,s={};return s.type=Or._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:Gt("string",Or._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class gu extends Or{data(t={}){return super.data(t)}}class Pi{constructor(t,s,a,c){this._firestore=t,this._userDataWriter=s,this._snapshot=c,this.metadata=new io(c.hasPendingWrites,c.fromCache),this.query=a}get docs(){const t=[];return this.forEach((s=>t.push(s))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach((a=>{t.call(s,new gu(this._firestore,this._userDataWriter,a.key,a,new io(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new ye(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(c,u){if(c._snapshot.oldDocs.isEmpty()){let m=0;return c._snapshot.docChanges.map((y=>{const p=new gu(c._firestore,c._userDataWriter,y.doc.key,y.doc,new io(c._snapshot.mutatedKeys.has(y.doc.key),c._snapshot.fromCache),c.query.converter);return y.doc,{type:"added",doc:p,oldIndex:-1,newIndex:m++}}))}{let m=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const p=new gu(c._firestore,c._userDataWriter,y.doc.key,y.doc,new io(c._snapshot.mutatedKeys.has(y.doc.key),c._snapshot.fromCache),c.query.converter);let g=-1,v=-1;return y.type!==0&&(g=m.indexOf(y.doc.key),m=m.delete(y.doc.key)),y.type!==1&&(m=m.add(y.doc),v=m.indexOf(y.doc.key)),{type:ej(y.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pi._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Wf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],a=[],c=[];return this.docs.forEach((u=>{u._document!==null&&(s.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),c.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ej(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi._jsonSchemaVersion="firestore/querySnapshot/1.0",Pi._jsonSchema={type:Gt("string",Pi._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(t,s){this._firestore=t,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Zu(t)}set(t,s,a){this._verifyNotCommitted();const c=pf(t,this._firestore),u=Im(c.converter,s,a),m=Sm(this._dataReader,"WriteBatch.set",c._key,u,c.converter!==null,a);return this._mutations.push(m.toMutation(c._key,jn.none())),this}update(t,s,a,...c){this._verifyNotCommitted();const u=pf(t,this._firestore);let m;return m=typeof(s=Us(s))=="string"||s instanceof wm?$T(this._dataReader,"WriteBatch.update",u._key,s,a,c):GT(this._dataReader,"WriteBatch.update",u._key,s),this._mutations.push(m.toMutation(u._key,jn.exists(!0))),this}delete(t){this._verifyNotCommitted();const s=pf(t,this._firestore);return this._mutations=this._mutations.concat(new Fu(s._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pf(r,t){if((r=Us(r)).firestore!==t)throw new ye(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(r){r=Ps(r,$t);const t=Ps(r.firestore,Hr),s=Xu(t);return OT(s,r._key).then((a=>rj(t,r,a)))}function Bb(r){r=Ps(r,qr);const t=Ps(r.firestore,Hr),s=Xu(t),a=new zb(t);return ZT(r._query),VT(s,r._query).then((c=>new Pi(t,a,r,c)))}function qb(r,t,s){r=Ps(r,$t);const a=Ps(r.firestore,Hr),c=Im(r.converter,t,s),u=Zu(a);return Wu(a,[Sm(u,"setDoc",r._key,c,r.converter!==null,s).toMutation(r._key,jn.none())])}function sj(r){return Wu(Ps(r.firestore,Hr),[new Fu(r._key,jn.none())])}function aj(r,t){const s=Ps(r.firestore,Hr),a=Co(r),c=Im(r.converter,t),u=Zu(r.firestore);return Wu(s,[Sm(u,"addDoc",a._key,c,r.converter!==null,{}).toMutation(a._key,jn.exists(!1))]).then((()=>a))}function Wu(r,t){const s=Xu(r);return kT(s,t)}function rj(r,t,s){const a=s.docs.get(t._key),c=new zb(r);return new Or(r,c,t._key,a,new io(s.hasPendingWrites,s.fromCache),t.converter)}function ij(r){return r=Ps(r,Hr),Xu(r),new tj(r,(t=>Wu(r,t)))}(function(t,s=!0){kN(EN),_u(new fo("firestore",((a,{instanceIdentifier:c,options:u})=>{const m=a.getProvider("app").getImmediate(),y=new Hr(new PN(a.getProvider("auth-internal")),new qN(m,a.getProvider("app-check-internal")),rw(m,c),m);return u={useFetchStreams:s,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),ki(x0,v0,t),ki(x0,v0,"esm2020")})();const lj={apiKey:"AIzaSyCYT45WYMTTCpp3MDvUShT1yEwz-x9mYWQ",authDomain:"core-safe.firebaseapp.com",projectId:"core-safe",storageBucket:"core-safe.firebasestorage.app",messagingSenderId:"538945747105",appId:"1:538945747105:web:09373b659159a8b8c618e0"},oj=av(lj),Wa=LT(oj),Eo="drafts",Hb="masterData",Fb="general",Ff=async()=>{try{const r=JT(Nm(Wa,Eo),WT("lastModified","desc"));return(await Bb(r)).docs.map(s=>{const a=s.data();return{id:s.id,type:a.type,lastModified:a.lastModified instanceof yt?a.lastModified.toMillis():a.lastModified,data:a.data}})}catch(r){throw console.error(": ",r),r}},cj=async r=>{try{await sj(Co(Wa,Eo,r))}catch(t){throw console.error(": ",t),t}},er=async(r,t,s)=>{try{const a={type:t,data:s,lastModified:yt.now()};return r?(await qb(Co(Wa,Eo,r),a,{merge:!0}),r):(await aj(Nm(Wa,Eo),a)).id}catch(a){throw console.error(": ",a),a}},eh=async()=>{try{const r=Co(Wa,Hb,Fb),t=await nj(r);return t.exists()?t.data():wt}catch(r){return console.error(": ",r),wt}},Un=async r=>{try{await qb(Co(Wa,Hb,Fb),r)}catch(t){throw console.error(": ",t),t}},uj=r=>new Promise((t,s)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=c=>{var m;const u=new Image;u.src=(m=c.target)==null?void 0:m.result,u.onload=()=>{const y=document.createElement("canvas"),p=800,g=p/u.width;y.width=p,y.height=u.height*g;const v=y.getContext("2d");v==null||v.drawImage(u,0,0,y.width,y.height),t(y.toDataURL("image/jpeg",.7))},u.onerror=s},a.onerror=s}),No=async r=>{try{const t=await Bb(Nm(Wa,Eo)),s=ij(Wa);let a=0;t.forEach(c=>{const u=c.data();u.data&&u.data.project===r&&(s.delete(c.ref),a++)}),a>0&&await s.commit()}catch(t){throw console.error(": ",t),t}},Gb=async r=>{try{return(await Ff()).filter(a=>a.type==="SAFETY_PLAN"&&a.data.project===r)}catch(t){throw console.error(": ",t),t}},$b=({onSave:r,onClear:t,lineWidth:s=3.5,keepOpenOnSave:a=!1})=>{const[c,u]=W.useState(!1),m=W.useRef(null),y=W.useRef(null),[p,g]=W.useState(!1),[v,E]=W.useState(!1),[w,V]=W.useState(!1),[P,G]=W.useState(!1),[L,oe]=W.useState({width:0,height:0}),[ce,Z]=W.useState(!1);W.useEffect(()=>{const j=()=>{Z(window.innerHeight>window.innerWidth)};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),W.useEffect(()=>{if(!c||!m.current)return;const j=setTimeout(()=>{(()=>{if(m.current){const S=window.devicePixelRatio||1,Ee=Math.floor(m.current.clientWidth*S),_e=Math.floor(m.current.clientHeight*S);Ee>0&&_e>0&&oe({width:Ee,height:_e})}})()},300);return()=>clearTimeout(j)},[c,ce]),W.useEffect(()=>{if(!c||L.width===0)return;const j=y.current;if(j){const M=j.getContext("2d");M&&(M.lineWidth=s,M.lineCap="round",M.lineJoin="round",M.strokeStyle="#000")}},[L,c,s]);const ue=j=>{const M=y.current;if(!M)return{x:0,y:0};const S=M.getBoundingClientRect(),Ee=j.clientX,_e=j.clientY,$=Ee-S.left,Q=_e-S.top;return ce?{x:Q/S.height*M.width,y:(1-$/S.width)*M.height}:{x:$/S.width*M.width,y:Q/S.height*M.height}},Te=j=>{var Ee;if(P&&j.pointerType!=="pen")return;j.preventDefault(),j.stopPropagation(),g(!0),j.target.setPointerCapture(j.pointerId);const M=ue(j),S=(Ee=y.current)==null?void 0:Ee.getContext("2d");S==null||S.beginPath(),S==null||S.moveTo(M.x,M.y)},je=j=>{var Ee;if(!p||P&&j.pointerType!=="pen")return;j.preventDefault(),j.stopPropagation();const M=ue(j),S=(Ee=y.current)==null?void 0:Ee.getContext("2d");S==null||S.lineTo(M.x,M.y),S==null||S.stroke(),v||E(!0)},D=j=>{p&&(j.preventDefault(),g(!1),j.target.releasePointerCapture(j.pointerId))},A=()=>{const j=y.current,M=j==null?void 0:j.getContext("2d");j&&M&&M.clearRect(0,0,j.width,j.height),E(!1)},R=()=>{if(y.current&&v){const j=y.current,M=0,S=j.height*.25,Ee=j.width,_e=j.height*.5,$=document.createElement("canvas");$.width=Ee,$.height=_e;const Q=$.getContext("2d");Q&&(Q.drawImage(j,M,S,Ee,_e,0,0,$.width,$.height),r($.toDataURL("image/png"))),a?(A(),V(!0),setTimeout(()=>V(!1),2e3)):u(!1)}};if(!c)return l.jsxs("div",{onClick:()=>u(!0),className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-blue-50 hover:border-blue-300 bg-white text-gray-500 transition-all group",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-2 group-hover:bg-blue-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-pen-nib text-xl text-gray-400 group-hover:text-blue-500"})}),l.jsx("span",{className:"font-bold text-sm group-hover:text-blue-600",children:""})]});const O=ce?"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[100dvh] h-[100dvw] rotate-90 origin-center":"fixed inset-0 w-full h-full";return l.jsx("div",{className:"fixed inset-0 z-[100] bg-gray-900 bg-opacity-95 select-none touch-none",onContextMenu:j=>j.preventDefault(),style:{WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:l.jsxs("div",{className:`${O} bg-white flex flex-col overflow-hidden shadow-2xl relative select-none`,children:[w&&l.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[60] bg-gray-800 bg-opacity-90 text-white px-8 py-6 rounded-xl shadow-2xl animate-fade-in flex flex-col items-center backdrop-blur-sm pointer-events-none",children:[l.jsx("i",{className:"fa-solid fa-check-circle text-5xl text-green-400 mb-4"}),l.jsx("span",{className:"font-bold text-xl mb-1",children:""}),l.jsx("span",{className:"text-sm text-gray-300",children:""})]}),l.jsxs("div",{className:"bg-gray-100 flex-none border-b shadow-sm z-20 select-none",children:[l.jsxs("div",{className:"relative flex justify-between items-center px-4 py-4 border-b border-gray-200 bg-white min-h-[72px]",children:[l.jsx("button",{type:"button",onClick:()=>{u(!1),t()},className:"px-4 py-2 text-sm font-bold text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 border border-gray-300 z-10 relative",children:""}),l.jsxs("h3",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 font-bold text-lg text-gray-800 hidden sm:flex items-center justify-center pointer-events-none",children:[l.jsx("i",{className:"fa-solid fa-pen-nib mr-2 text-gray-500"}),""]}),l.jsxs("div",{className:"flex items-center gap-2 z-10 relative",children:[l.jsxs("button",{type:"button",onClick:A,className:"px-3 py-2 text-sm font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg flex items-center border border-red-200 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-eraser mr-1"})," ",l.jsx("span",{className:"hidden sm:inline",children:""}),l.jsx("span",{className:"sm:hidden",children:""})]}),l.jsxs("button",{type:"button",onClick:R,disabled:!v,className:`px-4 py-2 text-sm font-bold rounded-lg flex items-center shadow-sm transition-colors ${v?"bg-blue-600 text-white active:scale-95 hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[l.jsx("i",{className:"fa-solid fa-check mr-1"})," "]})]})]}),l.jsxs("div",{className:"relative flex justify-end items-center px-4 py-3 bg-gray-50",children:[l.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-red-600 text-sm font-bold flex items-center pointer-events-none whitespace-nowrap",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),l.jsx("span",{className:"hidden sm:inline",children:""}),l.jsx("span",{className:"sm:hidden",children:""})]}),l.jsxs("label",{className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-bold cursor-pointer transition-colors shadow-sm select-none border-2 z-10 relative bg-white
                  ${P?"bg-blue-600 text-white border-blue-700 hover:bg-blue-700":"bg-green-600 text-white border-green-700 hover:bg-green-700"}
                `,children:[l.jsx("input",{type:"checkbox",className:"hidden",checked:P,onChange:j=>G(j.target.checked)}),l.jsx("i",{className:`fa-solid ${P?"fa-pen-fancy":"fa-hand-pointer"} text-lg`}),l.jsx("span",{children:P?"":""})]})]})]}),l.jsx("div",{className:"flex-1 min-h-0 bg-gray-50 p-2 sm:p-4 pb-8 sm:pb-8 flex flex-col select-none",children:l.jsxs("div",{ref:m,className:"flex-1 min-h-0 w-full bg-white border-2 border-gray-300 shadow-inner rounded-xl overflow-hidden touch-none relative select-none",children:[l.jsxs("div",{className:"absolute inset-0 flex flex-col pointer-events-none select-none",children:[l.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-b-2 border-dashed border-gray-400 flex items-end justify-center pb-1",children:l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})}),l.jsx("div",{className:"h-[50%] w-full flex items-center justify-center bg-transparent",children:!v&&l.jsxs("div",{className:"text-center text-gray-200",children:[l.jsx("span",{className:"text-4xl sm:text-6xl font-bold mb-2 block",children:""}),l.jsx("span",{className:"text-xs sm:text-lg font-bold",children:""}),l.jsx("div",{className:"sm:hidden text-red-300 text-[10px] mt-1 font-bold",children:""})]})}),l.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-t-2 border-dashed border-gray-400 flex items-start justify-center pt-1",children:l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})})]}),L.width>0&&l.jsx("canvas",{ref:y,width:L.width,height:L.height,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},className:"absolute inset-0 z-10 cursor-crosshair block touch-none select-none",onPointerDown:Te,onPointerMove:je,onPointerUp:D,onPointerLeave:D,onContextMenu:j=>j.preventDefault()})]})})]})})},E0=({data:r})=>{const t=a=>{const c=a.length;return c>30?"text-xl":c>22?"text-2xl":c>15?"text-3xl":c>10?"text-4xl":"text-5xl"},s=(a,c,u)=>{const m=[];for(let y=0;y<u;y++){const p=c[y];m.push(l.jsxs("tr",{className:"h-20",children:[l.jsx("td",{className:"border border-black text-center text-xl font-bold",children:a+y+1}),l.jsx("td",{className:"border border-black px-4 text-lg",children:p?p.company:""}),l.jsx("td",{className:"border border-black px-2 text-center",children:p?l.jsx("img",{src:p.signatureDataUrl,alt:p.name,className:"h-16 w-auto max-w-full object-contain mx-auto"}):null})]},a+y))}return l.jsx("div",{className:"print-page p-[15mm] flex flex-col h-full justify-between",children:l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-bold text-center mb-4",children:[r.month,"  (",a+1,"",a+u,")"]}),l.jsxs("table",{className:"w-full border-collapse border-2 border-black",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"h-10",children:[l.jsx("th",{className:"border border-black bg-gray-100 py-1 w-20 text-lg",children:""}),l.jsx("th",{className:"border border-black bg-gray-100 py-1 w-1/3 text-lg",children:""}),l.jsx("th",{className:"border border-black bg-gray-100 py-1 text-lg",children:" ()"})]})}),l.jsx("tbody",{children:m})]}),l.jsx("div",{className:"mt-2 text-right text-sm",children:a===0&&r.signatures.length<=10?` ${r.signatures.length} `:a===10?` ${r.signatures.length} `:""})]})})};return l.jsxs("div",{className:"font-serif text-black leading-tight",children:[l.jsxs("div",{className:"print-page relative p-[20mm] flex flex-col justify-between items-center",children:[l.jsx("div",{className:"w-full text-center mt-24",children:l.jsx("h1",{className:`${t(r.project)} font-bold mb-4 leading-normal`,children:r.project})}),l.jsx("div",{className:"text-center my-auto",children:l.jsx("h2",{className:"text-4xl font-bold border-b-4 border-double border-black pb-2 px-10 inline-block",children:""})}),l.jsxs("div",{className:"text-center mb-20",children:[l.jsxs("p",{className:"text-4xl font-bold mb-16",children:[r.month," "]}),l.jsx("div",{className:"flex items-center justify-center gap-2",children:l.jsxs("span",{className:"font-bold text-xl italic",style:{fontFamily:"sans-serif"},children:[l.jsx("span",{className:"bg-red-600 text-white px-1 mr-1",children:"K"}),r.contractor]})})]})]}),l.jsx("div",{className:"print-page p-[15mm]",children:l.jsxs("div",{className:"border-2 border-black p-6 h-full",children:[l.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:""}),l.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-y-4 text-lg mb-8",children:[l.jsx("div",{className:"col-span-2 h-8"}),l.jsx("div",{className:"font-bold",children:""}),l.jsx("div",{children:new Date(r.date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}),l.jsx("div",{className:"font-bold",children:""}),l.jsx("div",{children:r.location}),l.jsx("div",{className:"font-bold",children:""}),l.jsxs("div",{children:[r.startTime,"  ",r.endTime," 15"]}),l.jsx("div",{className:"font-bold",children:""}),l.jsx("div",{children:r.instructor}),l.jsx("div",{className:"font-bold",children:""}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(1)"})," ",l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(2)"})," ",l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(3)"})," ",l.jsx("span",{children:r.topic})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(4)"})," ",l.jsx("span",{children:r.caution})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(5)"})," ",l.jsx("span",{children:"web"})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(6)"})," ",l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"mt-8",children:[l.jsx("h4",{className:"text-lg mb-4",children:""}),l.jsx("div",{className:"w-full h-[400px] border border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:r.photoUrl?l.jsx("img",{src:r.photoUrl,alt:"Evidence",className:"max-w-full max-h-full object-contain"}):l.jsx("div",{className:"text-gray-400",children:""})})]})]})}),s(0,r.signatures.slice(0,10),10),r.signatures.length>10&&s(10,r.signatures.slice(10,20),10)]})},N0=Symbol.for("constructDateFrom");function Yb(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&N0 in r?r[N0](t):r instanceof Date?new r.constructor(t):new Date(t)}function Qb(r,t){return Yb(r,r)}function Li(r,t){return Qb(r).getDay()}function Kb(r,t){const s=Qb(r),a=s.getFullYear(),c=s.getMonth(),u=Yb(s,0);return u.setFullYear(a,c+1,0),u.setHours(0,0,0,0),u.getDate()}const hj=["","","","","","",""],dj=r=>{const t=r.getFullYear(),s=r.getMonth()+1,a=r.getDate();if(s===1&&a===1||s===2&&a===11||s===2&&a===23||s===4&&a===29||s===5&&a===3||s===5&&a===4||s===5&&a===5||s===8&&a===11||s===11&&a===3||s===11&&a===23)return!0;const c=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),u=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&a===c||s===9&&a===u},Iu=({data:r})=>{const t="border-2 border-black",s="border border-black",a="bg-cyan-100",c=W.useMemo(()=>{const m=new Date(r.year,r.month-1,1),y=Kb(m),p=[];for(let g=1;g<=y;g++){const v=new Date(r.year,r.month-1,g),E=Li(v)===0,w=Li(v)===6,V=dj(v);let P="",G="";E||V?(P="text-red-600",G="bg-red-50"):w&&(P="text-blue-600",G="bg-blue-50"),p.push({date:g,dayOfWeek:hj[Li(v)],colorClass:P,bgClass:G})}return p},[r.year,r.month]),u=W.useMemo(()=>{const m=c.length,y=Math.floor(m/5),p=m%5;return Array.from({length:5}).map((g,v)=>y+(v<p?1:0))},[c.length]);return l.jsxs("div",{className:"bg-white w-full h-full flex flex-col font-serif text-black p-[10mm]",style:{width:"297mm",height:"210mm"},children:[l.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[l.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[l.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[l.jsxs("span",{className:"text-xl",children:[" ",r.year-2018,"  ",r.month," "]}),l.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),l.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),r.project]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),r.location]})]})]}),l.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[l.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",r.createdDate,""]}),l.jsxs("table",{className:`w-full ${t} text-[10px] border-collapse`,children:[l.jsxs("colgroup",{children:[l.jsx("col",{className:"w-[15%]"}),l.jsx("col",{className:"w-[25%]"}),l.jsx("col",{className:"w-[35%]"}),l.jsx("col",{className:"w-[25%]"})]}),l.jsx("thead",{children:l.jsxs("tr",{className:a,children:[l.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${s} py-0.5 font-normal`,children:""})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.trainingDate}),l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.trainingLeader})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.councilDate}),l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.councilLeader})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.patrolDate}),l.jsx("td",{className:`${s} bg-gray-100`}),l.jsx("td",{className:`${s} bg-gray-100`})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${s} bg-gray-100`}),l.jsx("td",{className:`${s} bg-gray-100`}),l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.author})]})]})]})]})]}),l.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:l.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[l.jsxs("colgroup",{children:[l.jsx("col",{className:"w-[35mm]"}),c.map(m=>l.jsx("col",{},m.date)),l.jsx("col",{className:"w-[10mm]"})]}),l.jsxs("thead",{children:[l.jsxs("tr",{className:"h-[8mm]",children:[l.jsx("th",{className:`${s} ${a} font-normal`,children:""}),l.jsx("th",{className:`${s} ${a}`,colSpan:c.length,children:l.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[l.jsx("span",{children:""}),l.jsx("span",{children:""}),l.jsx("span",{children:""})]})}),l.jsx("th",{className:`${s} ${a} font-normal`,rowSpan:4,children:""})]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),l.jsxs("th",{className:`${s} font-normal text-center`,colSpan:c.length,children:[r.month,""]})]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),c.map(m=>l.jsx("th",{className:`${s} font-normal text-center ${m.colorClass} ${m.bgClass}`,children:m.date},m.date))]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:" "}),c.map(m=>l.jsx("th",{className:`${s} font-normal text-center ${m.colorClass} ${m.bgClass}`,children:m.dayOfWeek},m.date))]})]}),l.jsxs("tbody",{children:[r.processRows.map(m=>l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${s} px-1 align-middle leading-none`,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:m.category}),l.jsx("span",{className:"font-bold text-[9px] truncate",children:m.name})]})}),c.map(y=>{const p=m.bars.some(g=>y.date>=g.startDay&&y.date<=g.endDay);return l.jsx("td",{className:`${s} p-0 relative ${y.bgClass}`,children:p&&l.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"})},y.date)}),l.jsx("td",{className:`${s}`})]},m.id)),Array.from({length:Math.max(0,12-r.processRows.length)}).map((m,y)=>l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${s}`}),c.map(p=>l.jsx("td",{className:`${s} ${p.bgClass}`},p.date)),l.jsx("td",{className:`${s}`})]},`fill-${y}`))]}),l.jsxs("tfoot",{children:[l.jsxs("tr",{className:"h-[12mm]",children:[l.jsx("td",{className:`${s} ${a} text-center font-normal`,children:""}),u.map((m,y)=>l.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:r.predictions[y]},y)),l.jsx("td",{className:`${s}`})]}),l.jsxs("tr",{className:"h-[18mm]",children:[l.jsxs("td",{className:`${s} ${a} text-center font-normal leading-tight`,children:["",l.jsx("br",{}),""]}),u.map((m,y)=>l.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:r.countermeasures[y]},y)),l.jsx("td",{className:`${s}`})]}),l.jsxs("tr",{className:"h-[10mm]",children:[l.jsx("td",{className:`${s} ${a} text-center font-normal leading-tight`,children:""}),u.map((m,y)=>l.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:r.inspectionItems[y]},y)),l.jsx("td",{className:`${s}`})]}),l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${s} ${a} text-center font-normal`,children:""}),c.map(m=>l.jsx("td",{className:`${s} p-0 text-center text-[8px]`,children:r.safetyDuty[m.date]},m.date)),l.jsx("td",{className:`${s}`})]}),l.jsxs("tr",{className:"h-[10mm]",children:[l.jsx("td",{className:`${s} ${a} text-center font-normal`,children:""}),l.jsx("td",{colSpan:c.length+1,className:`${s} p-1 text-[10px]`,children:r.lastMonthReflection})]})]})]})})]})},w0=({isOpen:r,message:t,onConfirm:s,onCancel:a})=>r?l.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),l.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,fj=({isOpen:r,projectName:t,onConfirm:s,onCancel:a})=>{const[c,u]=W.useState(""),[m,y]=W.useState("");if(W.useEffect(()=>{r&&(u(""),y(""))},[r]),!r)return null;const p=()=>{c==="4043"?s():y("")};return l.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6 animate-fade-in border-l-8 border-red-600",children:[l.jsxs("h3",{className:"text-xl font-bold text-red-600 mb-4 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),""]}),l.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["",t,""]}),l.jsxs("div",{className:"bg-red-50 p-3 rounded mb-4 text-sm text-red-800 leading-relaxed",children:[l.jsx("strong",{children:""}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{className:"font-bold underline text-red-600 text-base",children:""}),l.jsx("br",{}),""]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" (4043)"}),l.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 outline-none text-lg tracking-widest",placeholder:"PASS",value:c,onChange:g=>u(g.target.value)}),m&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 font-bold",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),m]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),l.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold shadow-md",children:""})]})]})})},mj=({title:r,items:t,onUpdate:s,onDeleteRequest:a,onBack:c})=>{const[u,m]=W.useState(""),y=t||[],p=()=>{u.trim()&&(s([...y,u.trim()]),m(""))};return l.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[l.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:l.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),l.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[r," ",l.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[y.length,""]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsxs("ul",{className:"space-y-2",children:[y.map((g,v)=>l.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[l.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:g}),l.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),a(v,g)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},v)),y.length===0&&l.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),l.jsx("div",{className:"p-4 border-t bg-gray-50",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:u,onChange:g=>m(g.target.value),onKeyDown:g=>g.key==="Enter"&&p()}),l.jsxs("button",{onClick:p,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[l.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},T0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},gj={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["roles","topics","jobTypes","goals","predictions","countermeasures"]},pj=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[a,c]=W.useState(1),[u,m]=W.useState(r||Q1),[y,p]=W.useState(t||null),[g,v]=W.useState(wt),[E,w]=W.useState(!1),[V,P]=W.useState(!1),[G,L]=W.useState("idle"),[oe,ce]=W.useState(!1),[Z,ue]=W.useState(null),[Te,je]=W.useState(1),[D,A]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[R,O]=W.useState(!1),[j,M]=W.useState([]),[S,Ee]=W.useState(null),[_e,$]=W.useState("BASIC"),[Q,me]=W.useState(null),[he,ve]=W.useState(null);W.useEffect(()=>{(async()=>{try{const de=await eh();v(de)}catch(de){console.error("",de)}})()},[]),W.useEffect(()=>{if(!V)return;const C=()=>{const Qe=window.innerWidth-40;je(Qe<794?Qe/794:1)};return window.addEventListener("resize",C),C(),()=>window.removeEventListener("resize",C)},[V]);const k=(C,de)=>{m(Me=>({...Me,[C]:de})),L("idle"),ce(!0)},ee=()=>c(C=>Math.min(C+1,3)),fe=async C=>{if(C.target.files&&C.target.files[0]){const de=await uj(C.target.files[0]);k("photoUrl",de)}},pe=async()=>{L("saving");try{const C=await er(y,"SAFETY_TRAINING",u);p(C),L("saved"),ce(!1),setTimeout(()=>L("idle"),2e3)}catch(C){console.error(C),alert(""),L("idle")}},le=(C,de)=>{const Me={id:Date.now().toString(),company:C,name:"Signed",signatureDataUrl:de};m(Qe=>({...Qe,signatures:[...Qe.signatures,Me]})),L("idle"),ce(!0)},Se=async()=>{L("saving");try{const C=await er(y,"SAFETY_TRAINING",u);p(C),L("saved"),ce(!1),setTimeout(()=>L("idle"),2e3);const de=await Gb(u.project);if(de.length===0){alert(`${u.project}

`);return}M(de),O(!0)}catch{alert(""),L("idle")}},Ie=C=>{Ee(C.data),O(!1),P(!0)},it=()=>{const C=document.title;document.title=`_${u.project}_${u.month}`,window.print(),document.title=C},De=()=>{oe?A({isOpen:!0,message:`
`,onConfirm:()=>{A(C=>({...C,isOpen:!1})),s()}}):s()},en=()=>l.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[l.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),l.jsxs("button",{onClick:()=>{w(!1),me(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[l.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),Q?l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(mj,{title:T0[Q],items:g[Q],onBack:()=>me(null),onUpdate:async C=>{const de={...g,[Q]:C};v(de),await Un(de)},onDeleteRequest:(C,de)=>{Q==="projects"?ve({index:C,name:de}):A({isOpen:!0,message:`${de}`,onConfirm:async()=>{const Me=[...g[Q]];Me.splice(C,1);const Qe={...g,[Q]:Me};v(Qe),await Un(Qe),A(Yt=>({...Yt,isOpen:!1}))}})}})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-4 mb-6 shrink-0",children:[l.jsxs("button",{onClick:()=>$("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${_e==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),l.jsxs("button",{onClick:()=>$("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${_e==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-list-check mr-2"}),""]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:gj[_e].map(C=>{const de=g[C]||[];return l.jsxs("button",{onClick:()=>me(C),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:T0[C]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[de.length," "]})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:l.jsx("i",{className:"fa-solid fa-chevron-right"})})]},C)})})]})]}),we=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 1: "}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:u.project,onChange:C=>k("project",C.target.value),children:g.projects.map(C=>l.jsx("option",{value:C,children:C},C))})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:u.month,onChange:C=>k("month",parseInt(C.target.value)),children:Array.from({length:12},(C,de)=>de+1).map(C=>l.jsxs("option",{value:C,children:[C,""]},C))})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:u.contractor,onChange:C=>k("contractor",C.target.value),children:g.contractors.map(C=>l.jsx("option",{value:C,children:C},C))})]})]}),J=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 2: "}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("input",{type:"date",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.date,onChange:C=>k("date",C.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.location,onChange:C=>k("location",C.target.value),children:g.locations.map(C=>l.jsx("option",{value:C,children:C},C))})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("input",{type:"time",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.startTime,onChange:C=>k("startTime",C.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("input",{type:"time",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.endTime,onChange:C=>k("endTime",C.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.instructor,onChange:C=>k("instructor",C.target.value),children:g.supervisors.map(C=>l.jsx("option",{value:C,children:C},C))})]}),l.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg space-y-4",children:[l.jsx("h3",{className:"font-bold text-gray-700 mb-2",children:""}),l.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 space-y-2 py-1",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"font-bold w-8",children:"(1)"}),l.jsx("span",{children:" ()"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"font-bold w-8",children:"(2)"}),l.jsx("span",{children:" ()"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(3)"}),l.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm appearance-none",value:u.topic,onChange:C=>k("topic",C.target.value),children:g.topics.map(C=>l.jsx("option",{value:C,children:C},C))})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(4)"}),l.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm appearance-none",value:u.caution,onChange:C=>k("caution",C.target.value),children:g.topics.map(C=>l.jsx("option",{value:C,children:C},C))})]})]}),l.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 mt-2 space-y-2 py-1",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"font-bold w-8",children:"(5)"}),l.jsx("span",{children:"web ()"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"font-bold w-8",children:"(6)"}),l.jsx("span",{children:" ()"})]})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold flex justify-between text-gray-700",children:l.jsxs("span",{children:[" ()",l.jsx("span",{className:"text-red-500 text-sm ml-1 font-bold",children:""})]})}),l.jsx("input",{type:"file",accept:"image/*",className:"w-full mt-2 text-sm text-gray-500",onChange:fe}),u.photoUrl&&l.jsx("div",{className:"mt-3",children:l.jsx("img",{src:u.photoUrl,alt:"preview",className:"h-40 w-full object-contain border bg-gray-50 rounded"})})]})]}),[Ae,ke]=W.useState("");W.useEffect(()=>{g.subcontractors.length>0&&!Ae&&ke(g.subcontractors[0])},[g.subcontractors,Ae]);const[z,ae]=W.useState(0),qe=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 3: "}),l.jsxs("div",{className:"bg-white p-6 shadow rounded-lg border border-gray-200",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:""}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-50 text-lg text-black outline-none appearance-none",value:Ae,onChange:C=>ke(C.target.value),children:g.subcontractors.map(C=>l.jsx("option",{value:C,children:C},C))})]}),l.jsxs("div",{className:"mb-2",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2 text-center",children:" ()"}),l.jsx("div",{className:"w-full",children:l.jsx($b,{onSave:C=>{le(Ae,C)},onClear:()=>{},lineWidth:6,keepOpenOnSave:!0},z)})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("h3",{className:"font-bold text-gray-700 mb-2",children:[" (",u.signatures.length,")"]}),l.jsxs("div",{className:"bg-white border rounded divide-y max-h-60 overflow-y-auto",children:[u.signatures.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-400",children:""}),u.signatures.map((C,de)=>l.jsxs("div",{className:"p-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l.jsx("span",{className:"w-6 h-6 shrink-0 rounded-full bg-gray-200 text-xs flex items-center justify-center text-gray-700",children:de+1}),l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-bold text-gray-700 truncate flex-1",children:C.company}),l.jsx("div",{className:"h-10 border border-gray-200 bg-gray-50 rounded cursor-pointer hover:border-blue-400 transition-colors flex items-center justify-center px-2 shrink-0",onClick:()=>ue(C.signatureDataUrl),title:"",children:l.jsx("img",{src:C.signatureDataUrl,alt:"sig",className:"h-full object-contain"})})]})]}),l.jsx("button",{onClick:()=>{A({isOpen:!0,message:`${de+1}`,onConfirm:()=>{m(Me=>({...Me,signatures:Me.signatures.filter(Qe=>Qe.id!==C.id)})),A(Me=>({...Me,isOpen:!1})),ce(!0)}})},className:"ml-3 text-red-400 hover:text-red-600 p-2 shrink-0",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},C.id))]})]})]}),ot=()=>l.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[l.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500",children:""}),l.jsxs("button",{onClick:it,className:"px-6 py-2 bg-green-600 rounded font-bold hover:bg-green-500 shadow-md flex items-center",children:[l.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[l.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${Te})`,transformOrigin:"top center"},children:l.jsx(E0,{data:u})}),S&&l.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${Te*.7})`,transformOrigin:"top center"},children:l.jsx(Iu,{data:S})})]})]}),Fe=()=>R?l.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",u.project,""]}),l.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:j.map(C=>{const de=C.data;return l.jsxs("button",{onClick:()=>Ie(C),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-bold text-blue-800",children:[de.month," "]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(C.lastModified).toLocaleString("ja-JP")]})]}),l.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},C.id)})}),l.jsx("button",{onClick:()=>O(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null;return E?l.jsxs(l.Fragment,{children:[en(),l.jsx(w0,{isOpen:D.isOpen,message:D.message,onConfirm:D.onConfirm,onCancel:()=>A(C=>({...C,isOpen:!1}))}),he&&l.jsx(fj,{isOpen:!!he,projectName:he.name,onCancel:()=>ve(null),onConfirm:async()=>{const C=[...g.projects];C.splice(he.index,1),await No(he.name);const de={...g,projects:C};v(de),await Un(de),ve(null)}})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:De,className:"text-white hover:text-gray-300",children:l.jsx("i",{className:"fa-solid fa-house"})}),l.jsxs("h1",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-helmet-safety mr-2"}),""]})]}),l.jsxs("button",{onClick:()=>w(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),l.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[l.jsx("span",{className:a>=1?"text-blue-600":"",children:"STEP 1"}),l.jsx("span",{className:a>=2?"text-blue-600":"",children:"STEP 2"}),l.jsx("span",{className:a>=3?"text-blue-600":"",children:"STEP 3"})]}),l.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"bg-blue-600 h-full transition-all duration-300",style:{width:`${a*33.3}%`}})})]}),l.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg min-h-[60vh] max-w-3xl",children:[a===1&&we(),a===2&&J(),a===3&&qe()]}),l.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>c(C=>Math.max(1,C-1)),disabled:a===1,className:`px-4 py-3 rounded-lg font-bold ${a===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),l.jsxs("button",{onClick:pe,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center",children:[l.jsx("i",{className:`fa-solid ${G==="saved"?"fa-check":"fa-save"} mr-2`}),G==="saved"?"":""]})]}),a<3?l.jsxs("button",{onClick:ee,className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-bold shadow hover:bg-blue-700 flex items-center",children:[" ",l.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):l.jsxs("button",{onClick:Se,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),Z&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>ue(null),children:[l.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:l.jsx("img",{src:Z,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),l.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),V&&ot(),Fe(),l.jsx(w0,{isOpen:D.isOpen,message:D.message,onConfirm:D.onConfirm,onCancel:()=>A({...D,isOpen:!1})}),l.jsxs("div",{className:"hidden print:block",children:[l.jsx(E0,{data:u}),S&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),l.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:l.jsx(Iu,{data:S})})]})]})]})},j0=({data:r})=>{var g,v,E,w,V,P,G,L,oe,ce,Z,ue,Te,je,D,A,R,O,j,M,S,Ee,_e,$;const t="border border-black",s="bg-green-100 text-center font-bold py-1",a=Q=>{const me=new Date(Q);return`${me.getFullYear()}/${me.getMonth()+1}/${me.getDate()}`},c=Math.max(10,r.subcontractorAttendees.length),u=Array.from({length:c-r.subcontractorAttendees.length}),m=Q=>{const me=Q.length;return me>45?"text-lg":me>35?"text-xl":me>25?"text-2xl":me>15?"text-3xl":"text-4xl"},y=Q=>Q?Q===""?"":Q===""?"":Q:"",p=Q=>{const me=y(Q);if(!me)return"";const he=me.length;return he>10?"text-xs tracking-tighter":he>8?"text-sm":""};return l.jsxs("div",{className:"font-serif text-black leading-tight",children:[l.jsxs("div",{className:"print-page relative p-[25mm] flex flex-col justify-between items-center text-center",children:[l.jsxs("div",{className:"mt-16 text-3xl font-normal tracking-widest",children:["",r.count,""]}),l.jsx("div",{className:"mt-20 px-4 w-full flex items-center justify-center min-h-[4rem]",children:l.jsx("h1",{className:`${m(r.project)} font-normal mb-4 leading-normal whitespace-nowrap`,children:r.project})}),l.jsx("div",{className:"my-auto",children:l.jsx("h2",{className:"text-5xl font-normal tracking-[0.2em] leading-loose",children:"      "})}),l.jsxs("div",{className:"mb-24 w-full",children:[l.jsxs("div",{className:"text-2xl mb-16",children:[" ",a(r.date)]}),l.jsx("div",{className:"flex items-center justify-center gap-3",children:l.jsxs("span",{className:"font-bold text-2xl italic flex items-center",style:{fontFamily:"sans-serif"},children:[l.jsx("span",{className:"bg-red-600 text-white px-2 py-0.5 mr-2 skew-x-[-12deg] inline-block",children:"K"}),r.contractor]})})]})]}),l.jsxs("div",{className:"print-page p-[30mm] flex flex-col items-center",children:[l.jsx("div",{className:"mt-20 mb-24 border-b-2 border-black px-12 pb-2",children:l.jsx("h2",{className:"text-4xl font-normal tracking-[0.2em] ml-2",children:""})}),l.jsxs("div",{className:"w-full max-w-lg space-y-12 text-2xl",children:[l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"1"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"2"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"3"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"4"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"5"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"6"}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"print-page p-[20mm]",children:[l.jsxs("div",{className:"flex justify-between items-end mb-4 px-2",children:[l.jsxs("div",{className:"text-xl font-bold",children:[" ",r.count," "]}),l.jsx("h3",{className:"text-2xl font-bold text-center flex-1",children:""}),l.jsx("div",{className:"w-16"})," "]}),l.jsx("table",{className:`w-full border-collapse mb-6 ${t}`,children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:`${t} p-2 w-32 text-center`,children:"   "}),l.jsx("td",{className:`${t} p-2`,children:" "})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${t} p-2 text-center`,children:"   "}),l.jsx("td",{className:`${t} p-2`,children:a(r.date)})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${t} p-2 text-center`,children:""}),l.jsx("td",{className:`${t} p-2`,children:r.location})]})]})}),l.jsx("div",{className:"mb-6",children:l.jsxs("table",{className:`w-full border-collapse ${t}`,children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{className:`${t} ${s}`,colSpan:4,children:""})}),l.jsxs("tr",{children:[l.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),l.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),l.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),l.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""})]})]}),l.jsxs("tbody",{children:[l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle ${p((g=r.gcAttendees[0])==null?void 0:g.role)}`,children:y((v=r.gcAttendees[0])==null?void 0:v.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(E=r.gcAttendees[0])==null?void 0:E.name}),l.jsx("td",{className:`${t} px-2 align-middle ${p((w=r.gcAttendees[1])==null?void 0:w.role)}`,children:y((V=r.gcAttendees[1])==null?void 0:V.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(P=r.gcAttendees[1])==null?void 0:P.name})]}),l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle ${p((G=r.gcAttendees[2])==null?void 0:G.role)}`,children:y((L=r.gcAttendees[2])==null?void 0:L.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(oe=r.gcAttendees[2])==null?void 0:oe.name}),l.jsx("td",{className:`${t} px-2 align-middle ${p((ce=r.gcAttendees[3])==null?void 0:ce.role)}`,children:y((Z=r.gcAttendees[3])==null?void 0:Z.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(ue=r.gcAttendees[3])==null?void 0:ue.name})]}),l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle ${p((Te=r.gcAttendees[4])==null?void 0:Te.role)}`,children:y((je=r.gcAttendees[4])==null?void 0:je.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(D=r.gcAttendees[4])==null?void 0:D.name}),l.jsx("td",{className:`${t} px-2 align-middle ${p((A=r.gcAttendees[5])==null?void 0:A.role)}`,children:y((R=r.gcAttendees[5])==null?void 0:R.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(O=r.gcAttendees[5])==null?void 0:O.name})]}),l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle ${p((j=r.gcAttendees[6])==null?void 0:j.role)}`,children:y((M=r.gcAttendees[6])==null?void 0:M.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(S=r.gcAttendees[6])==null?void 0:S.name}),l.jsx("td",{className:`${t} px-2 align-middle ${p((Ee=r.gcAttendees[7])==null?void 0:Ee.role)}`,children:y((_e=r.gcAttendees[7])==null?void 0:_e.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:($=r.gcAttendees[7])==null?void 0:$.name})]})]})]})}),l.jsx("div",{children:l.jsxs("table",{className:`w-full border-collapse ${t}`,children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{className:`${t} ${s}`,colSpan:3,children:"              "})}),l.jsxs("tr",{children:[l.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""}),l.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:"     "}),l.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""})]})]}),l.jsxs("tbody",{children:[r.subcontractorAttendees.map(Q=>l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle`,children:Q.company}),l.jsx("td",{className:`${t} px-2 align-middle`,children:Q.role}),l.jsx("td",{className:`${t} px-2 align-middle text-center`,children:Q.signatureDataUrl?l.jsx("img",{src:Q.signatureDataUrl,alt:Q.name,className:"h-10 mx-auto object-contain"}):Q.name})]},Q.id)),u.map((Q,me)=>l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t}`}),l.jsx("td",{className:`${t}`}),l.jsx("td",{className:`${t}`})]},`blank-${me}`))]})]})})]})]})},S0=({isOpen:r,message:t,onConfirm:s,onCancel:a})=>r?l.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),l.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,yj=({isOpen:r,projectName:t,onConfirm:s,onCancel:a})=>{const[c,u]=W.useState(""),[m,y]=W.useState("");if(W.useEffect(()=>{r&&(u(""),y(""))},[r]),!r)return null;const p=()=>{c==="4043"?s():y("")};return l.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6 animate-fade-in border-l-8 border-red-600",children:[l.jsxs("h3",{className:"text-xl font-bold text-red-600 mb-4 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),""]}),l.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["",t,""]}),l.jsxs("div",{className:"bg-red-50 p-3 rounded mb-4 text-sm text-red-800 leading-relaxed",children:[l.jsx("strong",{children:""}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{className:"font-bold underline text-red-600 text-base",children:""}),l.jsx("br",{}),""]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" (4043)"}),l.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 outline-none text-lg tracking-widest",placeholder:"PASS",value:c,onChange:g=>u(g.target.value)}),m&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 font-bold",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),m]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),l.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold shadow-md",children:""})]})]})})},xj=({title:r,items:t,onUpdate:s,onDeleteRequest:a,onBack:c})=>{const[u,m]=W.useState(""),y=t||[],p=()=>{u.trim()&&(s([...y,u.trim()]),m(""))};return l.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[l.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:l.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),l.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[r," ",l.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[y.length,""]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsxs("ul",{className:"space-y-2",children:[y.map((g,v)=>l.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[l.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:g}),l.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),a(v,g)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},v)),y.length===0&&l.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),l.jsx("div",{className:"p-4 border-t bg-gray-50",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:u,onChange:g=>m(g.target.value),onKeyDown:g=>g.key==="Enter"&&p()}),l.jsxs("button",{onClick:p,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[l.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},A0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},vj={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["roles","topics","jobTypes","goals","predictions","countermeasures"]},C0=["","","",""],bj=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[a,c]=W.useState(1),[u,m]=W.useState(r||K1),[y,p]=W.useState(t||null),[g,v]=W.useState(wt),[E,w]=W.useState(!1),[V,P]=W.useState(!1),[G,L]=W.useState("idle"),[oe,ce]=W.useState(1),[Z,ue]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[Te,je]=W.useState(!1),[D,A]=W.useState(null),[R,O]=W.useState(""),[j,M]=W.useState(""),[S,Ee]=W.useState(0),[_e,$]=W.useState("BASIC"),[Q,me]=W.useState(null),[he,ve]=W.useState(null),[k,ee]=W.useState(!1),[fe,pe]=W.useState([]),[le,Se]=W.useState(null);W.useEffect(()=>{(async()=>{try{const de=await eh();v(de);const Me=de.subcontractors||[],Qe=de.roles||[];Me.length>0&&O(Me[0]),Qe.length>0&&M(Qe[0])}catch(de){console.error("",de)}})()},[]),W.useEffect(()=>{if(!r){const C=u.gcAttendees?[...u.gcAttendees]:Array(8).fill({role:"",name:""});let de=!1;C0.forEach((Me,Qe)=>{(!C[Qe]||C[Qe].role!==Me)&&(C[Qe]={...C[Qe],role:Me},de=!0)}),de&&m(Me=>({...Me,gcAttendees:C}))}},[r]),W.useEffect(()=>{const C=g.subcontractors||[];C.length>0&&!C.includes(R)&&R!==""&&O(C[0])},[g.subcontractors,R]),W.useEffect(()=>{if(!V)return;const C=()=>{const Qe=window.innerWidth-40;ce(Qe<794?Qe/794:1)};return window.addEventListener("resize",C),C(),()=>window.removeEventListener("resize",C)},[V]);const Ie=(C,de)=>{m(Me=>({...Me,[C]:de})),L("idle"),je(!0)},it=(C,de,Me)=>{const Qe=[...u.gcAttendees];Qe[C]||(Qe[C]={role:"",name:""}),Qe[C][de]=Me,Ie("gcAttendees",Qe)},De=C=>{const de={id:Date.now().toString(),company:R,role:j,name:"Signed",signatureDataUrl:C};m(Me=>({...Me,subcontractorAttendees:[...Me.subcontractorAttendees,de]})),Ee(Me=>Me+1),L("idle"),je(!0)},en=async()=>{L("saving");try{const C=await er(y,"DISASTER_COUNCIL",u);p(C),L("saved"),je(!1),setTimeout(()=>L("idle"),2e3)}catch(C){console.error(C),alert(""),L("idle")}},we=async()=>{L("saving");try{const C=await er(y,"DISASTER_COUNCIL",u);p(C),L("saved"),je(!1),setTimeout(()=>L("idle"),2e3);const de=await Gb(u.project);if(de.length===0){alert(`${u.project}

`);return}pe(de),ee(!0)}catch{alert(""),L("idle")}},J=C=>{Se(C.data),ee(!1),P(!0)},Ae=()=>{const de=new Date(u.date).getMonth()+1,Me=document.title;document.title=`_${u.project}_${de}`,window.print(),document.title=Me},ke=()=>{Te?ue({isOpen:!0,message:`
`,onConfirm:()=>{ue(C=>({...C,isOpen:!1})),s()}}):s()},z=()=>l.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[l.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),l.jsxs("button",{onClick:()=>{w(!1),me(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[l.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),l.jsxs("div",{className:"flex gap-4 mb-6",children:[l.jsxs("button",{onClick:()=>$("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${_e==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),l.jsxs("button",{onClick:()=>$("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${_e==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-clipboard-check mr-2"}),""]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:Q?l.jsx("div",{className:"flex-1 overflow-hidden col-span-2",children:l.jsx(xj,{title:A0[Q],items:g[Q]||[],onBack:()=>me(null),onUpdate:async C=>{const de={...g,[Q]:C};v(de),await Un(de)},onDeleteRequest:(C,de)=>{Q==="projects"?ve({index:C,name:de}):ue({isOpen:!0,message:`${de}`,onConfirm:async()=>{const Me=[...g[Q]||[]];Me.splice(C,1);const Qe={...g,[Q]:Me};v(Qe),await Un(Qe),ue(Yt=>({...Yt,isOpen:!1}))}})}})}):vj[_e].map(C=>{const de=g[C]||[];return l.jsxs("button",{onClick:()=>me(C),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:A0[C]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[de.length," "]})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:l.jsx("i",{className:"fa-solid fa-chevron-right"})})]},C)})})]}),ae=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 1: "}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-gray-600",children:""}),l.jsx("select",{className:"w-24 p-2 border border-gray-300 rounded text-center text-lg bg-white appearance-none",value:u.count,onChange:C=>Ie("count",parseInt(C.target.value)||0),children:Array.from({length:100},(C,de)=>de+1).map(C=>l.jsx("option",{value:C,children:C},C))}),l.jsx("span",{className:"text-gray-600",children:""})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white appearance-none",value:u.project,onChange:C=>Ie("project",C.target.value),children:(g.projects||[]).map(C=>l.jsx("option",{value:C,children:C},C))})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("input",{type:"date",className:"w-full p-3 border border-gray-300 rounded-lg bg-white appearance-none",value:u.date,onChange:C=>Ie("date",C.target.value)})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white appearance-none",value:u.contractor,onChange:C=>Ie("contractor",C.target.value),children:(g.contractors||[]).map(C=>l.jsx("option",{value:C,children:C},C))})]})]}),qe=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 2: "}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[l.jsx("h3",{className:"font-bold text-gray-700 mb-3",children:""}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500",children:" ()"}),l.jsx("select",{className:"w-full p-2 border border-gray-300 rounded bg-white appearance-none",value:u.location,onChange:C=>Ie("location",C.target.value),children:(g.locations||[]).map(C=>l.jsx("option",{value:C,children:C},C))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500",children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"p-2 border rounded appearance-none",value:u.startTime,onChange:C=>Ie("startTime",C.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"time",className:"p-2 border rounded appearance-none",value:u.endTime,onChange:C=>Ie("endTime",C.target.value)})]})]})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[l.jsx("h3",{className:"font-bold text-gray-700 mb-3 border-b pb-1",children:""}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.gcAttendees.map((C,de)=>l.jsxs("div",{className:"flex gap-2 items-center",children:[de<4?l.jsx("div",{className:"w-1/3 p-2 border border-gray-300 rounded text-xs bg-gray-100 font-bold truncate",children:C0[de]}):l.jsxs("select",{className:"w-1/3 p-2 border border-gray-300 rounded text-sm bg-white appearance-none",value:C.role,onChange:Me=>it(de,"role",Me.target.value),children:[l.jsx("option",{value:"",children:"()"}),(g.roles||[]).map(Me=>l.jsx("option",{value:Me,children:Me},Me))]}),l.jsxs("select",{className:"flex-1 p-2 border border-gray-300 rounded text-sm appearance-none",value:C.name,onChange:Me=>it(de,"name",Me.target.value),children:[l.jsx("option",{value:"",children:"()"}),(g.supervisors||[]).map(Me=>l.jsx("option",{value:Me,children:Me},Me))]})]},de))})]}),l.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[l.jsx("h3",{className:"font-bold text-gray-700 mb-3 border-b pb-1",children:""}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" ()"}),l.jsx("select",{className:"w-full p-2 border border-gray-300 rounded appearance-none",value:R,onChange:C=>O(C.target.value),children:(g.subcontractors||[]).map(C=>l.jsx("option",{value:C,children:C},C))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),l.jsx("select",{className:"w-full p-2 border border-gray-300 rounded appearance-none",value:j,onChange:C=>M(C.target.value),children:(g.roles||[]).map(C=>l.jsx("option",{value:C,children:C},C))})]})]}),l.jsxs("div",{className:"mb-2",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 text-center",children:" ()"}),l.jsx($b,{onSave:De,onClear:()=>{},lineWidth:6},S)]})]}),l.jsx("div",{className:"divide-y border rounded max-h-48 overflow-y-auto",children:u.subcontractorAttendees.map((C,de)=>l.jsxs("div",{className:"p-2 flex justify-between items-center bg-white",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"font-bold",children:C.company}),l.jsx("div",{className:"text-xs text-gray-500",children:C.role})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-10 cursor-pointer hover:opacity-80 transition-opacity border border-transparent hover:border-blue-300 rounded px-1",onClick:()=>A(C.signatureDataUrl),title:"",children:l.jsx("img",{src:C.signatureDataUrl,alt:"sig",className:"h-full object-contain"})}),l.jsx("button",{onClick:()=>{const Me=u.subcontractorAttendees.filter(Qe=>Qe.id!==C.id);Ie("subcontractorAttendees",Me)},className:"text-red-400 hover:text-red-600",children:l.jsx("i",{className:"fa-solid fa-trash"})})]})]},C.id))})]})]}),ot=()=>l.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[l.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 bg-gray-600 rounded",children:""}),l.jsxs("button",{onClick:Ae,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center",children:[l.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[l.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${oe})`,transformOrigin:"top center"},children:l.jsx(j0,{data:u})}),le&&l.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${oe*.7})`,transformOrigin:"top center"},children:l.jsx(Iu,{data:le})})]})]}),Fe=()=>k?l.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",u.project,""]}),l.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:fe.map(C=>{const de=C.data;return l.jsxs("button",{onClick:()=>J(C),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-bold text-blue-800",children:[de.month," "]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(C.lastModified).toLocaleString("ja-JP")]})]}),l.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},C.id)})}),l.jsx("button",{onClick:()=>ee(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null;return E?l.jsxs(l.Fragment,{children:[z(),l.jsx(S0,{isOpen:Z.isOpen,message:Z.message,onConfirm:Z.onConfirm,onCancel:()=>ue({...Z,isOpen:!1})}),he&&l.jsx(yj,{isOpen:!!he,projectName:he.name,onCancel:()=>ve(null),onConfirm:async()=>{const C=[...g.projects];C.splice(he.index,1),await No(he.name);const de={...g,projects:C};v(de),await Un(de),ve(null)}})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:ke,className:"text-white hover:text-gray-300",children:l.jsx("i",{className:"fa-solid fa-house"})}),l.jsxs("h1",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-users-rectangle mr-2"}),""]})]}),l.jsxs("button",{onClick:()=>w(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),l.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[l.jsx("span",{className:a>=1?"text-green-600":"",children:"STEP 1"}),l.jsx("span",{className:a>=2?"text-green-600":"",children:"STEP 2"})]}),l.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"bg-green-600 h-full transition-all duration-300",style:{width:`${a*50}%`}})})]}),l.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg max-w-3xl min-h-[60vh]",children:[a===1&&ae(),a===2&&qe()]}),l.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-md z-20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>c(C=>Math.max(1,C-1)),disabled:a===1,className:`px-4 py-3 rounded-lg font-bold ${a===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),l.jsxs("button",{onClick:en,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center",children:[l.jsx("i",{className:`fa-solid ${G==="saved"?"fa-check":"fa-save"} mr-2`}),G==="saved"?"":""]})]}),a===1?l.jsxs("button",{onClick:()=>c(2),className:"px-8 py-3 bg-green-600 text-white rounded-lg font-bold shadow hover:bg-green-700 flex items-center",children:[" ",l.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):l.jsxs("button",{onClick:we,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),D&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>A(null),children:[l.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:l.jsx("img",{src:D,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),l.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),V&&ot(),Fe(),l.jsx(S0,{isOpen:Z.isOpen,message:Z.message,onConfirm:Z.onConfirm,onCancel:()=>ue({...Z,isOpen:!1})}),l.jsxs("div",{className:"hidden print:block",children:[l.jsx(j0,{data:u}),le&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),l.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:l.jsx(Iu,{data:le})})]})]})]})},R0=({isOpen:r,message:t,onConfirm:s,onCancel:a})=>r?l.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),l.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,D0=({isOpen:r,projectName:t,onConfirm:s,onCancel:a})=>{const[c,u]=W.useState(""),[m,y]=W.useState("");if(W.useEffect(()=>{r&&(u(""),y(""))},[r]),!r)return null;const p=()=>{c==="4043"?s():y("")};return l.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6 animate-fade-in border-l-8 border-red-600",children:[l.jsxs("h3",{className:"text-xl font-bold text-red-600 mb-4 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),""]}),l.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["",t,""]}),l.jsxs("div",{className:"bg-red-50 p-3 rounded mb-4 text-sm text-red-800 leading-relaxed",children:[l.jsx("strong",{children:""}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{className:"font-bold underline text-red-600 text-base",children:""}),l.jsx("br",{}),""]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" (4043)"}),l.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 outline-none text-lg tracking-widest",placeholder:"PASS",value:c,onChange:g=>u(g.target.value)}),m&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 font-bold",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),m]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),l.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold shadow-md",children:""})]})]})})},_j=({title:r,items:t,onUpdate:s,onDeleteRequest:a,onBack:c})=>{const[u,m]=W.useState(""),y=()=>{u.trim()&&(s([...t,u.trim()]),m(""))};return l.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[l.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:l.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),l.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[r," ",l.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[t.length,""]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsxs("ul",{className:"space-y-2",children:[t.map((p,g)=>l.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[l.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:p}),l.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),a(g,p)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},g)),t.length===0&&l.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),l.jsx("div",{className:"p-4 border-t bg-gray-50",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:u,onChange:p=>m(p.target.value),onKeyDown:p=>p.key==="Enter"&&y()}),l.jsxs("button",{onClick:y,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[l.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},M0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},Ej={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["goals","processes","topics","cautions"]},Nj=["","","","","","",""],wj=r=>{const t=r.getFullYear(),s=r.getMonth()+1,a=r.getDate();if(s===1&&a===1||s===2&&a===11||s===2&&a===23||s===4&&a===29||s===5&&a===3||s===5&&a===4||s===5&&a===5||s===8&&a===11||s===11&&a===3||s===11&&a===23)return!0;const c=(y,p,g)=>{const v=new Date(y,p-1,1).getDay();return 1+(v===1?0:(8-v)%7)+(g-1)*7};if(s===1&&a===c(t,1,2)||s===7&&a===c(t,7,3)||s===9&&a===c(t,9,3)||s===10&&a===c(t,10,2))return!0;const u=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),m=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&a===u||s===9&&a===m},Tj=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[a,c]=W.useState(r||X1),[u,m]=W.useState(t||null),[y,p]=W.useState(wt),[g,v]=W.useState(!1),[E,w]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[V,P]=W.useState(!1),[G,L]=W.useState(null),[oe,ce]=W.useState(null),[Z,ue]=W.useState("idle"),[Te,je]=W.useState(1),[D,A]=W.useState(!1),[R,O]=W.useState("BASIC"),[j,M]=W.useState(null),[S,Ee]=W.useState(null);W.useEffect(()=>{(async()=>{try{const J=await eh();p(J)}catch(J){console.error("",J)}})()},[]),W.useEffect(()=>{const we=()=>{let qe=(window.innerWidth-40)/1122.6599999999999;qe>1.2&&(qe=1.2),je(qe)};return window.addEventListener("resize",we),we(),()=>window.removeEventListener("resize",we)},[]);const _e=W.useMemo(()=>{const we=new Date(a.year,a.month-1,1),J=Kb(we),Ae=[];for(let ke=1;ke<=J;ke++){const z=new Date(a.year,a.month-1,ke),ae=Li(z)===0,qe=Li(z)===6,ot=wj(z);let Fe="",C="";ae||ot?(Fe="text-red-600",C="bg-red-50"):qe&&(Fe="text-blue-600",C="bg-blue-50"),Ae.push({date:ke,dayOfWeek:Nj[Li(z)],colorClass:Fe,bgClass:C})}return Ae},[a.year,a.month]),$=W.useMemo(()=>{const we=_e.length,J=Math.floor(we/5),Ae=we%5;return Array.from({length:5}).map((ke,z)=>J+(z<Ae?1:0))},[_e.length]),Q=we=>{c(J=>({...J,...we})),ue("idle"),A(!0)},me=async()=>{ue("saving");try{const we=await er(u,"SAFETY_PLAN",a);m(we),ue("saved"),A(!1),setTimeout(()=>ue("idle"),2e3)}catch(we){console.error(we),alert(""),ue("idle")}},he=async()=>{ue("saving");try{const we=await er(u,"SAFETY_PLAN",a);m(we),ue("saved"),A(!1),setTimeout(()=>ue("idle"),2e3),setTimeout(()=>window.print(),100)}catch{alert(""),ue("idle")}},ve=()=>{D?w({isOpen:!0,message:`
`,onConfirm:()=>{w(we=>({...we,isOpen:!1})),s()}}):s()},k=(we,J)=>{if(G===null)L(we),ce(J);else if(G!==we)L(we),ce(J);else{if(oe!==null){const Ae=Math.min(oe,J),ke=Math.max(oe,J),z=a.processRows.map(ae=>{if(ae.id===we){const qe=ae.bars.filter(ot=>ot.endDay<Ae||ot.startDay>ke);return{...ae,bars:[...qe,{startDay:Ae,endDay:ke}]}}return ae});Q({processRows:z})}L(null),ce(null)}},ee=(we,J)=>{const Ae=a.processRows.find(ke=>ke.id===we);return Ae?Ae.bars.some(ke=>J>=ke.startDay&&J<=ke.endDay):!1},fe=(we,J)=>G!==we||oe===null?!1:J===oe,pe="border-2 border-black",le="border border-black",Se="bg-cyan-100",Ie="w-full h-full bg-transparent outline-none text-center font-serif",it="w-full h-full bg-transparent outline-none text-center appearance-none font-serif text-center-last",De=()=>l.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[l.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),l.jsxs("button",{onClick:()=>{v(!1),M(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[l.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),j?l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(_j,{title:M0[j],items:y[j],onBack:()=>M(null),onUpdate:async we=>{const J={...y,[j]:we};p(J),await Un(J)},onDeleteRequest:(we,J)=>{j==="projects"?Ee({index:we,name:J}):w({isOpen:!0,message:`${J}`,onConfirm:async()=>{const Ae=[...y[j]];Ae.splice(we,1);const ke={...y,[j]:Ae};p(ke),await Un(ke),w(z=>({...z,isOpen:!1}))}})}})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-4 mb-6 shrink-0",children:[l.jsxs("button",{onClick:()=>O("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${R==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),l.jsxs("button",{onClick:()=>O("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${R==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-list-check mr-2"}),""]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:Ej[R].map(we=>{const J=y[we]||[];return l.jsxs("button",{onClick:()=>M(we),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:M0[we]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[J.length," "]})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:l.jsx("i",{className:"fa-solid fa-chevron-right"})})]},we)})})]})]}),en=(we=!1)=>l.jsxs("div",{className:"p-[10mm] w-full h-full flex flex-col font-serif",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[l.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[l.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("select",{className:"w-12 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:a.year-2018,onChange:J=>Q({year:2018+parseInt(J.target.value||"0")}),children:Array.from({length:30},(J,Ae)=>Ae+1).map(J=>l.jsx("option",{value:J,children:J},J))}),l.jsx("span",{className:"text-xl mr-4",children:""}),l.jsx("select",{className:"w-10 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:a.month,onChange:J=>Q({month:parseInt(J.target.value||"0")}),children:Array.from({length:12},(J,Ae)=>Ae+1).map(J=>l.jsx("option",{value:J,children:J},J))}),l.jsx("span",{className:"text-xl mr-2",children:""}),l.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),l.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),l.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[300px] max-w-[500px]",value:a.project,onChange:J=>Q({project:J.target.value}),children:y.projects.map(J=>l.jsx("option",{value:J,children:J},J))})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),l.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[200px]",value:a.location,onChange:J=>Q({location:J.target.value}),children:y.locations.map(J=>l.jsx("option",{value:J,children:J},J))})]})]})]}),l.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[l.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",l.jsx("input",{type:"date",className:"bg-transparent text-[10px] w-24 text-right font-serif",value:a.createdDate,onChange:J=>Q({createdDate:J.target.value})}),""]}),l.jsxs("table",{className:`w-full ${pe} text-[10px] border-collapse`,children:[l.jsxs("colgroup",{children:[l.jsx("col",{className:"w-[15%]"}),l.jsx("col",{className:"w-[25%]"}),l.jsx("col",{className:"w-[35%]"}),l.jsx("col",{className:"w-[25%]"})]}),l.jsx("thead",{children:l.jsxs("tr",{className:Se,children:[l.jsx("th",{className:`${le} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${le} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${le} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${le} py-0.5 font-normal`,children:""})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:`${le} text-center`,children:""}),l.jsx("td",{className:`${le}`,children:l.jsx("input",{type:"date",className:Ie,value:a.trainingDate,onChange:J=>Q({trainingDate:J.target.value})})}),l.jsx("td",{className:`${le} text-center`,children:""}),l.jsx("td",{className:`${le}`,children:l.jsx("select",{className:it,value:a.trainingLeader,onChange:J=>Q({trainingLeader:J.target.value}),children:y.supervisors.map(J=>l.jsx("option",{value:J,children:J},J))})})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${le} text-center`,children:""}),l.jsx("td",{className:`${le}`,children:l.jsx("input",{type:"date",className:Ie,value:a.councilDate,onChange:J=>Q({councilDate:J.target.value})})}),l.jsx("td",{className:`${le} text-center`,children:""}),l.jsx("td",{className:`${le}`,children:l.jsx("select",{className:it,value:a.councilLeader,onChange:J=>Q({councilLeader:J.target.value}),children:y.supervisors.map(J=>l.jsx("option",{value:J,children:J},J))})})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${le} text-center`,children:""}),l.jsx("td",{className:`${le}`,children:l.jsx("input",{type:"date",className:Ie,value:a.patrolDate,onChange:J=>Q({patrolDate:J.target.value})})}),l.jsx("td",{className:`${le} bg-gray-100`}),l.jsx("td",{className:`${le} bg-gray-100`})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${le} bg-gray-100`}),l.jsx("td",{className:`${le} bg-gray-100`}),l.jsx("td",{className:`${le} text-center`,children:""}),l.jsx("td",{className:`${le}`,children:l.jsx("select",{className:it,value:a.author,onChange:J=>Q({author:J.target.value}),children:y.supervisors.map(J=>l.jsx("option",{value:J,children:J},J))})})]})]})]})]})]}),l.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:l.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[l.jsxs("colgroup",{children:[l.jsx("col",{className:"w-[35mm]"}),_e.map(J=>l.jsx("col",{},J.date)),l.jsx("col",{className:"w-[10mm]"})]}),l.jsxs("thead",{children:[l.jsxs("tr",{className:"h-[8mm]",children:[l.jsx("th",{className:`${le} ${Se} font-normal`,children:""}),l.jsx("th",{className:`${le} ${Se}`,colSpan:_e.length,children:l.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[l.jsx("span",{children:""}),l.jsx("span",{children:""}),l.jsx("span",{children:""})]})}),l.jsx("th",{className:`${le} ${Se} font-normal`,rowSpan:4,children:""})]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${le} bg-gray-50 font-normal`,children:""}),l.jsxs("th",{className:`${le} font-normal text-center`,colSpan:_e.length,children:[a.month,""]})]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${le} bg-gray-50 font-normal`,children:""}),_e.map(J=>l.jsx("th",{className:`${le} font-normal text-center ${J.colorClass} ${J.bgClass}`,children:J.date},J.date))]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${le} bg-gray-50 font-normal`,children:" "}),_e.map(J=>l.jsx("th",{className:`${le} font-normal text-center ${J.colorClass} ${J.bgClass}`,children:J.dayOfWeek},J.date))]})]}),l.jsxs("tbody",{children:[a.processRows.map(J=>l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${le} px-1 align-middle leading-none`,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:J.category}),l.jsx("span",{className:"font-bold text-[9px] truncate",children:J.name})]})}),_e.map(Ae=>{const ke=ee(J.id,Ae.date),z=fe(J.id,Ae.date);return l.jsxs("td",{className:`${le} p-0 relative cursor-pointer hover:bg-yellow-50 ${Ae.bgClass}`,onClick:()=>!we&&k(J.id,Ae.date),children:[ke&&l.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"}),z&&l.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-300 opacity-50"})]},Ae.date)}),l.jsx("td",{className:`${le}`})]},J.id)),Array.from({length:Math.max(0,12-a.processRows.length)}).map((J,Ae)=>l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${le}`}),_e.map(ke=>l.jsx("td",{className:`${le} ${ke.bgClass}`},ke.date)),l.jsx("td",{className:`${le}`})]},`fill-${Ae}`))]}),l.jsxs("tfoot",{children:[l.jsxs("tr",{className:"h-[12mm]",children:[l.jsx("td",{className:`${le} ${Se} text-center font-normal`,children:""}),$.map((J,Ae)=>l.jsx("td",{colSpan:J,className:`${le} align-top p-0`,children:l.jsxs("select",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1 appearance-none",value:a.predictions[Ae]||"",onChange:ke=>{const z=[...a.predictions];z[Ae]=ke.target.value,Q({predictions:z})},children:[l.jsx("option",{value:"",children:"-"}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""})]})},Ae)),l.jsx("td",{className:`${le}`})]}),l.jsxs("tr",{className:"h-[18mm]",children:[l.jsxs("td",{className:`${le} ${Se} text-center font-normal leading-tight`,children:["",l.jsx("br",{}),""]}),$.map((J,Ae)=>l.jsx("td",{colSpan:J,className:`${le} align-top p-0`,children:l.jsx("textarea",{className:"w-full h-full bg-transparent text-[9px] outline-none resize-none p-1 leading-tight",value:a.countermeasures[Ae]||"",onChange:ke=>{const z=[...a.countermeasures];z[Ae]=ke.target.value,Q({countermeasures:z})}})},Ae)),l.jsx("td",{className:`${le}`})]}),l.jsxs("tr",{className:"h-[10mm]",children:[l.jsx("td",{className:`${le} ${Se} text-center font-normal leading-tight`,children:""}),$.map((J,Ae)=>l.jsx("td",{colSpan:J,className:`${le} align-top p-0`,children:l.jsx("input",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1",value:a.inspectionItems[Ae]||"",onChange:ke=>{const z=[...a.inspectionItems];z[Ae]=ke.target.value,Q({inspectionItems:z})}})},Ae)),l.jsx("td",{className:`${le}`})]}),l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${le} ${Se} text-center font-normal`,children:""}),_e.map(J=>l.jsx("td",{className:`${le} p-0 text-center`,children:l.jsx("input",{className:"w-full h-full text-[8px] text-center bg-transparent outline-none p-0",value:a.safetyDuty[J.date]||"",onChange:Ae=>Q({safetyDuty:{...a.safetyDuty,[J.date]:Ae.target.value}})})},J.date)),l.jsx("td",{className:`${le}`})]}),l.jsxs("tr",{className:"h-[10mm]",children:[l.jsx("td",{className:`${le} ${Se} text-center font-normal`,children:""}),l.jsx("td",{colSpan:_e.length+1,className:`${le} p-0`,children:l.jsx("textarea",{className:"w-full h-full p-1 text-[10px] bg-transparent outline-none resize-none leading-tight",value:a.lastMonthReflection,onChange:J=>Q({lastMonthReflection:J.target.value})})})]})]})]})})]});return g?l.jsxs(l.Fragment,{children:[De(),l.jsx(R0,{isOpen:E.isOpen,message:E.message,onConfirm:E.onConfirm,onCancel:()=>w({...E,isOpen:!1})}),S&&l.jsx(D0,{isOpen:!!S,projectName:S.name,onCancel:()=>Ee(null),onConfirm:async()=>{const we=[...y.projects];we.splice(S.index,1),await No(S.name);const J={...y,projects:we};p(J),await Un(J),Ee(null)}})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-print min-h-screen bg-gray-50 flex flex-col",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-30 flex justify-between items-center shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:ve,className:"text-white hover:text-gray-300 transition-colors",children:l.jsx("i",{className:"fa-solid fa-house"})}),l.jsxs("h1",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-clipboard-list mr-2"}),""]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:me,className:"px-4 py-2 rounded font-bold border border-blue-400 text-white bg-blue-600 hover:bg-blue-500 flex items-center text-sm transition-colors shadow-sm",children:[l.jsx("i",{className:`fa-solid ${Z==="saved"?"fa-check":"fa-save"} mr-2`}),Z==="saved"?"":""]}),l.jsxs("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-cyan-600 text-white rounded font-bold hover:bg-cyan-500 flex items-center text-sm transition-colors shadow-sm",children:[l.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]}),l.jsxs("button",{onClick:()=>v(!0),className:"text-xs bg-slate-700 px-3 py-2 rounded hover:bg-slate-600 transition-colors ml-2 shadow-sm",children:[l.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]})]}),l.jsx("main",{className:"flex-1 overflow-auto p-4 bg-gray-100 flex justify-center",children:l.jsx("div",{className:"bg-white shadow-xl origin-top",style:{width:"297mm",minHeight:"210mm"},children:en(!1)})})]}),V&&l.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-95 flex flex-col no-print",children:[l.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-eye mr-2"}),""]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500 transition-colors",children:""}),l.jsxs("button",{onClick:he,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center hover:bg-green-500 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-8 flex justify-center items-start bg-gray-800",children:l.jsx("div",{style:{width:"297mm",transform:`scale(${Te})`,transformOrigin:"top center",marginBottom:`${(Te-1)*100}%`},children:l.jsx("div",{className:"bg-white shadow-2xl",children:en(!0)})})})]}),l.jsxs("div",{className:"hidden print:block",children:[l.jsx("style",{children:"@media print { @page { size: landscape; } }"}),l.jsx("div",{className:"print-page-landscape",children:en(!0)})]}),l.jsx(R0,{isOpen:E.isOpen,message:E.message,onConfirm:E.onConfirm,onCancel:()=>w({...E,isOpen:!1})}),S&&l.jsx(D0,{isOpen:!!S,projectName:S.name,onCancel:()=>Ee(null),onConfirm:async()=>{const we=[...y.projects];we.splice(S.index,1),await No(S.name);const J={...y,projects:we};p(J),await Un(J),Ee(null)}})]})};function Gf(){return Gf=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(r[a]=s[a])}return r},Gf.apply(null,arguments)}function jj(r,t){if(r==null)return{};var s={};for(var a in r)if({}.hasOwnProperty.call(r,a)){if(t.indexOf(a)!==-1)continue;s[a]=r[a]}return s}function Sj(r,t){if(r==null)return{};var s,a,c=jj(r,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(a=0;a<u.length;a++)s=u[a],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(r,s)&&(c[s]=r[s])}return c}function $f(r){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(r)}function Aj(r,t,s){return Object.defineProperty(r,"prototype",{writable:!1}),r}function Cj(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Yf(r,t){return Yf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Yf(r,t)}function Rj(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Yf(r,t)}function Ou(r){return Ou=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ou(r)}function Xb(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xb=function(){return!!r})()}function Dj(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Mj(r,t){if(t&&($f(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dj(r)}function Ij(r){var t=Xb();return function(){var s,a=Ou(r);if(t){var c=Ou(this).constructor;s=Reflect.construct(a,arguments,c)}else s=a.apply(this,arguments);return Mj(this,s)}}var yf={exports:{}},xf,I0;function Oj(){if(I0)return xf;I0=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return xf=r,xf}var vf,O0;function Vj(){if(O0)return vf;O0=1;var r=Oj();function t(){}function s(){}return s.resetWarningCache=t,vf=function(){function a(m,y,p,g,v,E){if(E!==r){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}a.isRequired=a;function c(){return a}var u={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:c,element:a,elementType:a,instanceOf:c,node:a,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:s,resetWarningCache:t};return u.PropTypes=u,u},vf}var V0;function kj(){return V0||(V0=1,yf.exports=Vj()()),yf.exports}var zj=kj();const kn=Vu(zj);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bzier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bzier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function Pr(r,t,s){this.x=r,this.y=t,this.time=s||new Date().getTime()}Pr.prototype.velocityFrom=function(r){return this.time!==r.time?this.distanceTo(r)/(this.time-r.time):1};Pr.prototype.distanceTo=function(r){return Math.sqrt(Math.pow(this.x-r.x,2)+Math.pow(this.y-r.y,2))};Pr.prototype.equals=function(r){return this.x===r.x&&this.y===r.y&&this.time===r.time};function Om(r,t,s,a){this.startPoint=r,this.control1=t,this.control2=s,this.endPoint=a}Om.prototype.length=function(){for(var r=10,t=0,s=void 0,a=void 0,c=0;c<=r;c+=1){var u=c/r,m=this._point(u,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),y=this._point(u,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(c>0){var p=m-s,g=y-a;t+=Math.sqrt(p*p+g*g)}s=m,a=y}return t};Om.prototype._point=function(r,t,s,a,c){return t*(1-r)*(1-r)*(1-r)+3*s*(1-r)*(1-r)*r+3*a*(1-r)*r*r+c*r*r*r};function Uj(r,t,s){var a,c,u,m=null,y=0;s||(s={});var p=function(){y=s.leading===!1?0:Date.now(),m=null,u=r.apply(a,c),m||(a=c=null)};return function(){var g=Date.now();!y&&s.leading===!1&&(y=g);var v=t-(g-y);return a=this,c=arguments,v<=0||v>t?(m&&(clearTimeout(m),m=null),y=g,u=r.apply(a,c),m||(a=c=null)):!m&&s.trailing!==!1&&(m=setTimeout(p,v)),u}}function xt(r,t){var s=this,a=t||{};this.velocityFilterWeight=a.velocityFilterWeight||.7,this.minWidth=a.minWidth||.5,this.maxWidth=a.maxWidth||2.5,this.throttle="throttle"in a?a.throttle:16,this.minDistance="minDistance"in a?a.minDistance:5,this.throttle?this._strokeMoveUpdate=Uj(xt.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=xt.prototype._strokeUpdate,this.dotSize=a.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=a.penColor||"black",this.backgroundColor=a.backgroundColor||"rgba(0,0,0,0)",this.onBegin=a.onBegin,this.onEnd=a.onEnd,this._canvas=r,this._ctx=r.getContext("2d"),this.clear(),this._handleMouseDown=function(c){c.which===1&&(s._mouseButtonDown=!0,s._strokeBegin(c))},this._handleMouseMove=function(c){s._mouseButtonDown&&s._strokeMoveUpdate(c)},this._handleMouseUp=function(c){c.which===1&&s._mouseButtonDown&&(s._mouseButtonDown=!1,s._strokeEnd(c))},this._handleTouchStart=function(c){if(c.targetTouches.length===1){var u=c.changedTouches[0];s._strokeBegin(u)}},this._handleTouchMove=function(c){c.preventDefault();var u=c.targetTouches[0];s._strokeMoveUpdate(u)},this._handleTouchEnd=function(c){var u=c.target===s._canvas;u&&(c.preventDefault(),s._strokeEnd(c))},this.on()}xt.prototype.clear=function(){var r=this._ctx,t=this._canvas;r.fillStyle=this.backgroundColor,r.clearRect(0,0,t.width,t.height),r.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0};xt.prototype.fromDataURL=function(r){var t=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=new Image,c=s.ratio||window.devicePixelRatio||1,u=s.width||this._canvas.width/c,m=s.height||this._canvas.height/c;this._reset(),a.src=r,a.onload=function(){t._ctx.drawImage(a,0,0,u,m)},this._isEmpty=!1};xt.prototype.toDataURL=function(r){var t;switch(r){case"image/svg+xml":return this._toSVG();default:for(var s=arguments.length,a=Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return(t=this._canvas).toDataURL.apply(t,[r].concat(a))}};xt.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};xt.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};xt.prototype.isEmpty=function(){return this._isEmpty};xt.prototype._strokeBegin=function(r){this._data.push([]),this._reset(),this._strokeUpdate(r),typeof this.onBegin=="function"&&this.onBegin(r)};xt.prototype._strokeUpdate=function(r){var t=r.clientX,s=r.clientY,a=this._createPoint(t,s),c=this._data[this._data.length-1],u=c&&c[c.length-1],m=u&&a.distanceTo(u)<this.minDistance;if(!(u&&m)){var y=this._addPoint(a),p=y.curve,g=y.widths;p&&g&&this._drawCurve(p,g.start,g.end),this._data[this._data.length-1].push({x:a.x,y:a.y,time:a.time,color:this.penColor})}};xt.prototype._strokeEnd=function(r){var t=this.points.length>2,s=this.points[0];if(!t&&s&&this._drawDot(s),s){var a=this._data[this._data.length-1],c=a[a.length-1];s.equals(c)||a.push({x:s.x,y:s.y,time:s.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(r)};xt.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};xt.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};xt.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};xt.prototype._createPoint=function(r,t,s){var a=this._canvas.getBoundingClientRect();return new Pr(r-a.left,t-a.top,s||new Date().getTime())};xt.prototype._addPoint=function(r){var t=this.points,s=void 0;if(t.push(r),t.length>2){t.length===3&&t.unshift(t[0]),s=this._calculateCurveControlPoints(t[0],t[1],t[2]);var a=s.c2;s=this._calculateCurveControlPoints(t[1],t[2],t[3]);var c=s.c1,u=new Om(t[1],a,c,t[2]),m=this._calculateCurveWidths(u);return t.shift(),{curve:u,widths:m}}return{}};xt.prototype._calculateCurveControlPoints=function(r,t,s){var a=r.x-t.x,c=r.y-t.y,u=t.x-s.x,m=t.y-s.y,y={x:(r.x+t.x)/2,y:(r.y+t.y)/2},p={x:(t.x+s.x)/2,y:(t.y+s.y)/2},g=Math.sqrt(a*a+c*c),v=Math.sqrt(u*u+m*m),E=y.x-p.x,w=y.y-p.y,V=v/(g+v),P={x:p.x+E*V,y:p.y+w*V},G=t.x-P.x,L=t.y-P.y;return{c1:new Pr(y.x+G,y.y+L),c2:new Pr(p.x+G,p.y+L)}};xt.prototype._calculateCurveWidths=function(r){var t=r.startPoint,s=r.endPoint,a={start:null,end:null},c=this.velocityFilterWeight*s.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,u=this._strokeWidth(c);return a.start=this._lastWidth,a.end=u,this._lastVelocity=c,this._lastWidth=u,a};xt.prototype._strokeWidth=function(r){return Math.max(this.maxWidth/(r+1),this.minWidth)};xt.prototype._drawPoint=function(r,t,s){var a=this._ctx;a.moveTo(r,t),a.arc(r,t,s,0,2*Math.PI,!1),this._isEmpty=!1};xt.prototype._drawCurve=function(r,t,s){var a=this._ctx,c=s-t,u=Math.floor(r.length());a.beginPath();for(var m=0;m<u;m+=1){var y=m/u,p=y*y,g=p*y,v=1-y,E=v*v,w=E*v,V=w*r.startPoint.x;V+=3*E*y*r.control1.x,V+=3*v*p*r.control2.x,V+=g*r.endPoint.x;var P=w*r.startPoint.y;P+=3*E*y*r.control1.y,P+=3*v*p*r.control2.y,P+=g*r.endPoint.y;var G=t+g*c;this._drawPoint(V,P,G)}a.closePath(),a.fill()};xt.prototype._drawDot=function(r){var t=this._ctx,s=typeof this.dotSize=="function"?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(r.x,r.y,s),t.closePath(),t.fill()};xt.prototype._fromData=function(r,t,s){for(var a=0;a<r.length;a+=1){var c=r[a];if(c.length>1)for(var u=0;u<c.length;u+=1){var m=c[u],y=new Pr(m.x,m.y,m.time),p=m.color;if(u===0)this.penColor=p,this._reset(),this._addPoint(y);else if(u!==c.length-1){var g=this._addPoint(y),v=g.curve,E=g.widths;v&&E&&t(v,E,p)}}else{this._reset();var w=c[0];s(w)}}};xt.prototype._toSVG=function(){var r=this,t=this._data,s=this._canvas,a=Math.max(window.devicePixelRatio||1,1),c=0,u=0,m=s.width/a,y=s.height/a,p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttributeNS(null,"width",s.width),p.setAttributeNS(null,"height",s.height),this._fromData(t,function(oe,ce,Z){var ue=document.createElement("path");if(!isNaN(oe.control1.x)&&!isNaN(oe.control1.y)&&!isNaN(oe.control2.x)&&!isNaN(oe.control2.y)){var Te="M "+oe.startPoint.x.toFixed(3)+","+oe.startPoint.y.toFixed(3)+" "+("C "+oe.control1.x.toFixed(3)+","+oe.control1.y.toFixed(3)+" ")+(oe.control2.x.toFixed(3)+","+oe.control2.y.toFixed(3)+" ")+(oe.endPoint.x.toFixed(3)+","+oe.endPoint.y.toFixed(3));ue.setAttribute("d",Te),ue.setAttribute("stroke-width",(ce.end*2.25).toFixed(3)),ue.setAttribute("stroke",Z),ue.setAttribute("fill","none"),ue.setAttribute("stroke-linecap","round"),p.appendChild(ue)}},function(oe){var ce=document.createElement("circle"),Z=typeof r.dotSize=="function"?r.dotSize():r.dotSize;ce.setAttribute("r",Z),ce.setAttribute("cx",oe.x),ce.setAttribute("cy",oe.y),ce.setAttribute("fill",oe.color),p.appendChild(ce)});var g="data:image/svg+xml;base64,",v='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+c+" "+u+" "+m+" "+y+'"')+(' width="'+m+'"')+(' height="'+y+'"')+">",E=p.innerHTML;if(E===void 0){var w=document.createElement("dummy"),V=p.childNodes;w.innerHTML="";for(var P=0;P<V.length;P+=1)w.appendChild(V[P].cloneNode(!0));E=w.innerHTML}var G="</svg>",L=v+E+G;return g+btoa(L)};xt.prototype.fromData=function(r){var t=this;this.clear(),this._fromData(r,function(s,a){return t._drawCurve(s,a.start,a.end)},function(s){return t._drawDot(s)}),this._data=r};xt.prototype.toData=function(){return this._data};var pu={exports:{}},Pj=pu.exports,k0;function Lj(){return k0||(k0=1,(function(r,t){(function(s,a){r.exports=a()})(Pj,function(){return(function(s){function a(u){if(c[u])return c[u].exports;var m=c[u]={exports:{},id:u,loaded:!1};return s[u].call(m.exports,m,m.exports,a),m.loaded=!0,m.exports}var c={};return a.m=s,a.c=c,a.p="",a(0)})([function(s,a){function c(g){var v=g.getContext("2d"),E=g.width,w=g.height,V=v.getImageData(0,0,E,w).data,P=y(!0,E,w,V),G=y(!1,E,w,V),L=p(!0,E,w,V),oe=p(!1,E,w,V),ce=oe-L+1,Z=G-P+1,ue=v.getImageData(L,P,ce,Z);return g.width=ce,g.height=Z,v.clearRect(0,0,ce,Z),v.putImageData(ue,0,0),g}function u(g,v,E,w){return{red:w[4*(E*v+g)],green:w[4*(E*v+g)+1],blue:w[4*(E*v+g)+2],alpha:w[4*(E*v+g)+3]}}function m(g,v,E,w){return u(g,v,E,w).alpha}function y(g,v,E,w){for(var V=g?1:-1,P=g?0:E-1,G=P;g?G<E:G>-1;G+=V)for(var L=0;L<v;L++)if(m(L,G,v,w))return G;return null}function p(g,v,E,w){for(var V=g?1:-1,P=g?0:v-1,G=P;g?G<v:G>-1;G+=V)for(var L=0;L<E;L++)if(m(G,L,v,w))return G;return null}Object.defineProperty(a,"__esModule",{value:!0}),a.default=c}])})})(pu)),pu.exports}var Bj=Lj();const qj=Vu(Bj);var Hj=["canvasProps","clearOnResize"],th=(function(r){Rj(s,r);var t=Ij(s);function s(){var a;Cj(this,s);for(var c=arguments.length,u=new Array(c),m=0;m<c;m++)u[m]=arguments[m];return a=t.call.apply(t,[this].concat(u)),a.staticThis=a.constructor,a._sigPad=null,a._canvas=null,a.setRef=function(y){a._canvas=y,a._canvas===null&&(a._sigPad=null)},a._excludeOurProps=function(){var y=a.props;y.canvasProps,y.clearOnResize;var p=Sj(y,Hj);return p},a.componentDidMount=function(){var y=a.getCanvas();a._sigPad=new xt(y,a._excludeOurProps()),a._resizeCanvas(),a.on()},a.componentWillUnmount=function(){a.off()},a.componentDidUpdate=function(){Object.assign(a._sigPad,a._excludeOurProps())},a.getCanvas=function(){if(a._canvas===null)throw a.staticThis.refNullError;return a._canvas},a.getTrimmedCanvas=function(){var y=a.getCanvas(),p=document.createElement("canvas");return p.width=y.width,p.height=y.height,p.getContext("2d").drawImage(y,0,0),qj(p)},a.getSignaturePad=function(){if(a._sigPad===null)throw a.staticThis.refNullError;return a._sigPad},a._checkClearOnResize=function(){a.props.clearOnResize&&a._resizeCanvas()},a._resizeCanvas=function(){var y,p,g=(y=a.props.canvasProps)!==null&&y!==void 0?y:{},v=g.width,E=g.height;if(!(typeof v<"u"&&typeof E<"u")){var w=a.getCanvas(),V=Math.max((p=window.devicePixelRatio)!==null&&p!==void 0?p:1,1);typeof v>"u"&&(w.width=w.offsetWidth*V),typeof E>"u"&&(w.height=w.offsetHeight*V),w.getContext("2d").scale(V,V),a.clear()}},a.render=function(){var y=a.props.canvasProps;return Ct.createElement("canvas",Gf({ref:a.setRef},y))},a.on=function(){return window.addEventListener("resize",a._checkClearOnResize),a.getSignaturePad().on()},a.off=function(){return window.removeEventListener("resize",a._checkClearOnResize),a.getSignaturePad().off()},a.clear=function(){return a.getSignaturePad().clear()},a.isEmpty=function(){return a.getSignaturePad().isEmpty()},a.fromDataURL=function(y,p){return a.getSignaturePad().fromDataURL(y,p)},a.toDataURL=function(y,p){return a.getSignaturePad().toDataURL(y,p)},a.fromData=function(y){return a.getSignaturePad().fromData(y)},a.toData=function(){return a.getSignaturePad().toData()},a}return Aj(s)})(W.Component);th.propTypes={velocityFilterWeight:kn.number,minWidth:kn.number,maxWidth:kn.number,minDistance:kn.number,dotSize:kn.oneOfType([kn.number,kn.func]),penColor:kn.string,throttle:kn.number,onEnd:kn.func,onBegin:kn.func,canvasProps:kn.object,clearOnResize:kn.bool};th.defaultProps={clearOnResize:!0};th.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const z0=({data:r})=>{if(!r)return null;const t=r.qualifications||{},s="border-b border-r border-black",a=({checked:u,label:m})=>l.jsxs("div",{className:"flex items-center text-[10px] leading-tight mb-0.5",children:[l.jsx("div",{className:"w-3.5 h-3.5 border border-black flex items-center justify-center mr-1.5 text-[10px] shrink-0 font-sans",children:u?"":""}),l.jsx("span",{className:"whitespace-nowrap",children:m})]}),c=["","","","","","",""];return l.jsx("div",{className:"font-serif text-black leading-tight bg-white relative",children:l.jsxs("div",{className:"print-page p-[12mm] flex flex-col box-border",style:{height:"297mm",width:"210mm"},children:[l.jsx("h1",{className:"text-3xl font-bold text-center mb-6 tracking-[0.5em] shrink-0",children:""}),l.jsxs("div",{className:"w-full border-2 border-black flex-1 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[64px]",children:[l.jsxs("div",{className:`w-24 ${s} bg-gray-50 flex flex-col justify-center items-center p-1`,children:[l.jsx("span",{className:"text-[10px] mb-1",children:""}),l.jsx("span",{className:"font-bold text-base",children:""})]}),l.jsxs("div",{className:`w-64 ${s} p-1 flex flex-col justify-center`,children:[l.jsxs("div",{className:"text-xs text-center w-full mb-0.5",children:[r.furiganaSei,"",r.furiganaMei]}),l.jsxs("div",{className:"text-xl text-center font-bold",children:[r.nameSei,"",r.nameMei]})]}),l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold text-sm text-center`,children:""}),l.jsx("div",{className:`flex-1 ${s} flex items-center justify-center p-1`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsxs("div",{className:"flex flex-col text-[10px] leading-none mr-1 gap-1",children:[l.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${r.birthEra==="Showa"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""}),l.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${r.birthEra==="Heisei"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""})]}),l.jsx("span",{className:"text-lg font-bold",children:r.birthYear}),l.jsx("span",{className:"text-xs",children:""}),l.jsx("span",{className:"text-lg font-bold",children:r.birthMonth}),l.jsx("span",{className:"text-xs",children:""}),l.jsx("span",{className:"text-lg font-bold",children:r.birthDay}),l.jsx("span",{className:"text-xs",children:""})]})}),l.jsxs("div",{className:"w-24 border-b border-black flex flex-col items-center justify-center p-1",children:[l.jsxs("div",{className:"flex gap-3 mb-1 text-sm",children:[l.jsx("span",{className:r.gender==="Male"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""}),l.jsx("span",{children:""}),l.jsx("span",{className:r.gender==="Female"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""})]}),l.jsxs("div",{className:"flex items-end gap-0.5",children:[l.jsx("span",{className:"text-lg font-bold",children:r.age}),l.jsx("span",{className:"text-[10px]",children:""})]})]})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsx("div",{className:`flex-1 ${s} px-3 flex items-center`,children:l.jsx("span",{className:"text-base font-bold",children:r.company})}),l.jsxs("div",{className:`w-32 ${s} flex items-center justify-center p-1 text-[11px]`,children:["( ",l.jsx("span",{className:"w-6 text-center text-base font-bold",children:r.subcontractorRank})," ) "]}),l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsxs("div",{className:"w-40 border-b border-black flex items-center justify-center p-1",children:[l.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:r.experienceYears}),l.jsx("span",{className:"text-xs mr-2",children:""}),l.jsx("span",{className:"text-lg font-bold w-5 text-right mr-1",children:r.experienceMonths}),l.jsx("span",{className:"text-xs",children:""})]})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsx("div",{className:"flex-1 border-b border-black px-2 flex items-center text-sm",children:l.jsxs("div",{className:"flex flex-nowrap items-center w-full",children:[c.map((u,m)=>l.jsx(Ct.Fragment,{children:l.jsxs("div",{className:"flex items-center whitespace-nowrap",children:[l.jsx("span",{className:`px-1 ${r.jobType===u?"border border-black rounded-full font-bold":""}`,children:u}),m<c.length-1&&l.jsx("span",{className:"text-gray-400 mx-1",children:""})]})},u)),l.jsxs("div",{className:"flex items-center whitespace-nowrap ml-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"inline-block min-w-[100px] text-center px-1 italic",children:r.jobType===""?r.jobTypeOther:""}),l.jsx("span",{children:""})]})]})})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsx("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:r.address}),l.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:""})]}),l.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:r.phone})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm text-center leading-none`,children:""}),l.jsx("div",{className:`w-12 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-[10px]`,children:""}),l.jsxs("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:[r.emergencyContactSei,"",r.emergencyContactMei]}),l.jsx("div",{className:`w-12 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-[10px]`,children:""}),l.jsx("div",{className:`w-20 ${s} flex items-center justify-center text-sm`,children:r.emergencyContactRelation}),l.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:""})]}),l.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:r.emergencyContactPhone})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsxs("div",{className:`flex-1 ${s} p-1 flex items-center justify-center gap-2`,children:[l.jsx("span",{className:"text-lg font-bold w-6 text-center",children:r.bloodType}),l.jsx("span",{className:"text-xs",children:""}),l.jsx("span",{className:"ml-4 text-xs font-bold",children:"  "}),l.jsx("span",{className:"w-10 text-center border-b border-black text-lg font-bold",children:r.bloodTypeRh==="Plus"?"+":r.bloodTypeRh==="Minus"?"-":""}),l.jsx("span",{className:"text-xs font-bold",children:" "})]}),l.jsx("div",{className:`w-32 ${s} bg-gray-50 flex items-center justify-center font-bold text-[10px] p-1 text-center leading-tight`,children:""}),l.jsxs("div",{className:"w-64 border-b border-black p-1 flex items-center justify-center",children:[l.jsx("span",{className:"text-xs mr-1",children:""}),l.jsx("span",{className:"text-lg font-bold w-8 text-right mr-1",children:r.healthCheckYear}),l.jsx("span",{className:"text-xs mr-2",children:""}),l.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:r.healthCheckMonth}),l.jsx("span",{className:"text-xs mr-2",children:""}),l.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:r.healthCheckDay}),l.jsx("span",{className:"text-xs",children:""})]})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[l.jsx("div",{className:`w-1/2 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsxs("div",{className:"w-1/2 border-b border-black flex items-center justify-center gap-10 p-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:r.kentaikyo==="Joined"&&l.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),l.jsx("span",{className:`text-sm ${r.kentaikyo==="Joined"?"font-bold":""}`,children:""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:r.kentaikyo==="NotJoined"&&l.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),l.jsx("span",{className:`text-sm ${r.kentaikyo==="NotJoined"?"font-bold":""}`,children:""})]})]})]}),l.jsxs("div",{className:"p-4 flex-1 flex flex-col border-b border-black",children:[l.jsx("div",{className:"font-bold text-xs mb-3",children:""}),l.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[l.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2",children:[l.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx(a,{checked:t.vehicle_leveling,label:""}),l.jsx(a,{checked:t.vehicle_demolition,label:""}),l.jsx(a,{checked:t.mobile_crane,label:""}),l.jsx(a,{checked:t.slinging,label:""}),l.jsx(a,{checked:t.gas_welding,label:""}),l.jsx(a,{checked:t.earth_retaining,label:""}),l.jsx(a,{checked:t.excavation,label:""}),l.jsx(a,{checked:t.scaffolding,label:""}),l.jsx(a,{checked:t.formwork,label:""}),l.jsx(a,{checked:t.oxygen_deficiency,label:""}),l.jsx(a,{checked:t.rough_terrain,label:""})]})]}),l.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2 pl-2",children:[l.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx(a,{checked:t.arc_welding,label:""}),l.jsx(a,{checked:t.grinding_wheel,label:""}),l.jsx(a,{checked:t.low_voltage,label:""}),l.jsx(a,{checked:t.roller,label:""}),l.jsx(a,{checked:t.asbestos,label:""})]})]}),l.jsxs("div",{className:"flex flex-col pl-2",children:[l.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),l.jsx(a,{checked:t.foreman,label:""}),l.jsx("div",{className:"mt-1 pt-1 border-t border-dashed border-gray-300"}),l.jsx(a,{checked:t.license_regular,label:""}),l.jsx(a,{checked:t.license_large,label:""}),l.jsx(a,{checked:t.license_large_special,label:""}),l.jsx(a,{checked:t.license_towing,label:""}),l.jsxs("div",{className:"mt-auto pt-2",children:[l.jsx("div",{className:"text-[9px] font-bold mb-1 text-gray-600",children:""}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText1}),l.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText2}),l.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText3})]})]})]})]})]}),l.jsxs("div",{className:"p-3 bg-gray-50 flex-1 flex flex-col justify-between shrink-0 h-[180px]",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"font-bold text-sm mb-2 flex items-center",children:[l.jsx("span",{className:"w-1 h-4 bg-black mr-2"}),""]}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-4 pl-2 text-[9px] leading-tight mb-2",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1",children:"-"}),""]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1",children:"-"}),""]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1",children:"-"}),""]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1",children:"-"}),""]})]}),l.jsxs("div",{className:"space-y-0.5",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1",children:"-"}),""]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1",children:"-"}),""]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1",children:"-"}),""]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1",children:"-"}),""]})]})]})]}),l.jsxs("div",{className:"flex justify-between items-end px-1 mt-auto",children:[l.jsxs("div",{className:"w-[50%] space-y-2",children:[l.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[l.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5",children:""}),l.jsx("span",{className:"flex-1 text-[10px] font-bold truncate px-1",children:r.project})]}),l.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[l.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5",children:""}),l.jsx("span",{className:"flex-1 text-sm font-bold text-center",children:r.director}),l.jsx("span",{className:"text-[9px] ml-1 mb-0.5",children:""})]})]}),l.jsxs("div",{className:"w-[45%] flex flex-col items-end",children:[l.jsxs("div",{className:"flex justify-center items-baseline mb-1 text-[10px] font-bold w-full",children:[l.jsx("span",{className:"mr-1",children:""}),l.jsx("span",{className:"text-base w-6 text-center border-b border-black mx-0.5",children:r.pledgeDateYear}),l.jsx("span",{children:""}),l.jsx("span",{className:"text-base w-5 text-center border-b border-black mx-0.5",children:r.pledgeDateMonth}),l.jsx("span",{children:""}),l.jsx("span",{className:"text-base w-5 text-center border-b border-black mx-0.5",children:r.pledgeDateDay}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex w-full items-end border-2 border-black bg-white h-[50px] relative",children:[l.jsx("span",{className:"absolute left-1 top-1 text-[9px] font-bold text-gray-400",children:""}),l.jsx("div",{className:"flex-1 h-full flex items-center justify-center p-1",children:r.signatureDataUrl?l.jsx("img",{src:r.signatureDataUrl,alt:"Signature",className:"max-h-full max-w-full object-contain"}):l.jsx("span",{className:"text-gray-200 text-[9px]",children:"()"})})]})]})]})]})]})]})})},Fj=r=>{let t=rf;if(r){const s={...rf.qualifications,...r.qualifications||{}};t={...rf,...r,qualifications:s}}else{t={...t,experienceYears:null,experienceMonths:null,healthCheckYear:null,healthCheckMonth:null,healthCheckDay:null,pledgeDateYear:null,pledgeDateMonth:null,pledgeDateDay:null};const s=new Date,a=s.getFullYear()-2018;t.pledgeDateYear=a,t.pledgeDateMonth=s.getMonth()+1,t.pledgeDateDay=s.getDate()}return t},U0=({isOpen:r,message:t,onLeftButtonClick:s,onRightButtonClick:a,leftButtonLabel:c,rightButtonLabel:u,leftButtonClass:m,rightButtonClass:y})=>r?l.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap font-bold text-red-600",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:s,className:m,children:c}),l.jsx("button",{onClick:a,className:y,children:u})]})]})}):null,Gj=({title:r,items:t,onUpdate:s,onDeleteRequest:a})=>{const[c,u]=W.useState(""),m=()=>{c.trim()&&(s([...t,c.trim()]),u(""))};return l.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg bg-white shadow-sm break-inside-avoid",children:[l.jsxs("h3",{className:"font-bold mb-3 text-lg text-gray-800 border-b pb-2 flex justify-between items-center",children:[r,l.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[t.length,""]})]}),l.jsxs("ul",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[t.map((y,p)=>l.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded hover:bg-gray-100 transition-colors",children:[l.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:y}),l.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),a(p,y)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},p)),t.length===0&&l.jsx("li",{className:"text-gray-400 text-sm italic text-center py-2",children:""})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm bg-white text-black focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"...",value:c,onChange:y=>u(y.target.value),onKeyDown:y=>y.key==="Enter"&&m()}),l.jsxs("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 whitespace-nowrap shadow-sm transition-colors",children:[l.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})]})},$j={projects:"",supervisors:"",subcontractors:""},Yj={BASIC:["projects","supervisors","subcontractors"],TRAINING:[]},Qj=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[a,c]=W.useState(1),[u,m]=W.useState(Fj(r)),[y,p]=W.useState(t||null),[g,v]=W.useState(wt),[E,w]=W.useState(!1),[V,P]=W.useState(!1),[G,L]=W.useState("idle"),[oe,ce]=W.useState(1),[Z,ue]=W.useState({isOpen:!1,message:"",onLeftButtonClick:()=>{},onRightButtonClick:()=>{},leftButtonLabel:"",rightButtonLabel:"",leftButtonClass:"",rightButtonClass:""}),[Te,je]=W.useState(!1),[D,A]=W.useState(null),[R,O]=W.useState(!1),j=W.useRef(null),M=W.useRef(null),[S,Ee]=W.useState({}),[_e,$]=W.useState("BASIC"),[Q,me]=W.useState(null);W.useEffect(()=>{window.scrollTo(0,0)},[a]),W.useEffect(()=>{if(R&&M.current&&j.current){const z=j.current.getCanvas(),ae=M.current;z.width=ae.clientWidth,z.height=ae.clientHeight}},[R]),W.useEffect(()=>{(async()=>{try{const ae=await eh();v(ae)}catch(ae){console.error("",ae)}})()},[]),W.useEffect(()=>{if(!V)return;const z=()=>{const ot=window.innerWidth-40;ce(ot<794?ot/794:1)};return window.addEventListener("resize",z),z(),()=>window.removeEventListener("resize",z)},[V]),W.useEffect(()=>{const ae=(()=>{if(u.birthYear===""||u.birthMonth===""||u.birthDay==="")return u.age;let qe=0;if(u.birthEra==="Showa"?qe=1925+u.birthYear:u.birthEra==="Heisei"&&(qe=1988+u.birthYear),qe===0)return u.age;const ot=new Date,Fe=new Date(qe,u.birthMonth-1,u.birthDay);let C=ot.getFullYear()-Fe.getFullYear();const de=ot.getMonth()-Fe.getMonth();return(de<0||de===0&&ot.getDate()<Fe.getDate())&&C--,Math.max(0,C)})();ae!==u.age&&u.birthYear!==""&&u.birthMonth!==""&&u.birthDay!==""&&m(qe=>({...qe,age:ae}))},[u.birthEra,u.birthYear,u.birthMonth,u.birthDay]);const he=z=>{m(qe=>({...qe,...z})),L("idle"),je(!0);const ae={...S};Object.keys(z).forEach(qe=>delete ae[qe]),Ee(ae)},ve=(z,ae)=>{m(qe=>({...qe,qualifications:{...qe.qualifications,[z]:ae}})),L("idle"),je(!0)},k=()=>{const z={},ae=u;return ae.project||(z.project=!0),ae.director||(z.director=!0),ae.nameSei||(z.nameSei=!0),ae.nameMei||(z.nameMei=!0),ae.furiganaSei||(z.furiganaSei=!0),ae.furiganaMei||(z.furiganaMei=!0),ae.birthYear||(z.birthYear=!0),ae.birthMonth||(z.birthMonth=!0),ae.birthDay||(z.birthDay=!0),ae.company||(z.company=!0),(ae.experienceYears===void 0||ae.experienceYears===null||isNaN(Number(ae.experienceYears)))&&(z.experienceYears=!0),ae.jobType||(z.jobType=!0),ae.jobType===""&&!ae.jobTypeOther&&(z.jobTypeOther=!0),ae.address||(z.address=!0),ae.phone||(z.phone=!0),ae.emergencyContactSei||(z.emergencyContactSei=!0),ae.emergencyContactMei||(z.emergencyContactMei=!0),ae.emergencyContactRelation||(z.emergencyContactRelation=!0),ae.emergencyContactPhone||(z.emergencyContactPhone=!0),ae.healthCheckYear||(z.healthCheckYear=!0),ae.healthCheckMonth||(z.healthCheckMonth=!0),Ee(z),Object.keys(z).length===0},ee=()=>{if(a===1&&!k()){alert(`
`);return}c(z=>Math.min(z+1,3))},fe=async()=>{if(!u.signatureDataUrl){alert(`
`);return}L("saving");try{const z=(u.nameSei||"")+(u.nameMei||""),ae={...u,name:z||""},qe=await er(y,"NEWCOMER_SURVEY",ae);p(qe),L("saved"),je(!1),alert(""),setTimeout(()=>L("idle"),2e3)}catch(z){console.error(z),alert(""),L("idle")}},pe=()=>{if(!u.signatureDataUrl){alert(`
`);return}P(!0)},le=async()=>{if(!u.signatureDataUrl){alert(`
`);return}L("saving");try{const z=(u.nameSei||"")+(u.nameMei||""),ae={...u,name:z||""},qe=await er(y,"NEWCOMER_SURVEY",ae);p(qe),L("saved"),je(!1),setTimeout(()=>L("idle"),2e3);const ot=document.title,Fe=`_${u.company||""}_${z||""}`;document.title=Fe,window.print(),document.title=ot}catch{alert(""),L("idle")}},Se=()=>{Te?ue({isOpen:!0,message:`
`,leftButtonLabel:"",leftButtonClass:"px-4 py-2 bg-gray-200 text-gray-700 rounded font-bold hover:bg-gray-300",onLeftButtonClick:()=>{ue(z=>({...z,isOpen:!1})),s()},rightButtonLabel:"",rightButtonClass:"px-4 py-2 bg-red-600 text-white rounded font-bold hover:bg-red-700",onRightButtonClick:()=>{ue(z=>({...z,isOpen:!1}))}}):s()},Ie=()=>{if(j.current){if(j.current.isEmpty()){alert("");return}const z=j.current.getTrimmedCanvas().toDataURL("image/png");he({signatureDataUrl:z}),O(!1)}},it=()=>{j.current&&j.current.clear()},De=z=>S[z]?"border-red-500 bg-red-50 ring-1 ring-red-500":"border-gray-300 bg-white",en=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 1: "}),l.jsxs("p",{className:"text-sm text-red-500 font-bold",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),""]}),l.jsxs("div",{className:"bg-purple-50 p-4 rounded border border-purple-100 grid grid-cols-1 md:grid-cols-2 gap-4 w-full",children:[l.jsxs("div",{className:"col-span-1 md:col-span-2 text-sm text-purple-700 font-bold mb-1",children:[l.jsx("i",{className:"fa-solid fa-circle-info mr-1"}),""]}),l.jsxs("div",{className:"w-full overflow-hidden",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:" ()"}),l.jsx("select",{className:`w-full p-2 border rounded font-bold max-w-full text-ellipsis ${De("project")}`,value:u.project,onChange:z=>he({project:z.target.value}),children:g.projects.map(z=>l.jsx("option",{value:z,children:z},z))})]}),l.jsxs("div",{className:"w-full overflow-hidden",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:" ()"}),l.jsx("select",{className:`w-full p-2 border rounded max-w-full text-ellipsis ${De("director")}`,value:u.director,onChange:z=>he({director:z.target.value}),children:g.supervisors.map(z=>l.jsx("option",{value:z,children:z},z))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${De("nameSei")}`,placeholder:"",value:u.nameSei,onChange:z=>he({nameSei:z.target.value})}),l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${De("nameMei")}`,placeholder:"",value:u.nameMei,onChange:z=>he({nameMei:z.target.value})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${De("furiganaSei")}`,placeholder:"",value:u.furiganaSei,onChange:z=>he({furiganaSei:z.target.value})}),l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${De("furiganaMei")}`,placeholder:"",value:u.furiganaMei,onChange:z=>he({furiganaMei:z.target.value})})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[l.jsxs("select",{className:"p-2 border rounded bg-white",value:u.birthEra,onChange:z=>he({birthEra:z.target.value}),children:[l.jsx("option",{value:"Showa",children:""}),l.jsx("option",{value:"Heisei",children:""})]}),l.jsx("input",{type:"number",className:`w-14 p-2 border rounded text-center ${De("birthYear")}`,value:u.birthYear,onChange:z=>he({birthYear:z.target.value===""?"":parseInt(z.target.value)}),placeholder:""}),l.jsx("span",{children:""}),l.jsx("input",{type:"number",className:`w-12 p-2 border rounded text-center ${De("birthMonth")}`,value:u.birthMonth,onChange:z=>he({birthMonth:z.target.value===""?"":parseInt(z.target.value)}),placeholder:""}),l.jsx("span",{children:""}),l.jsx("input",{type:"number",className:`w-12 p-2 border rounded text-center ${De("birthDay")}`,value:u.birthDay,onChange:z=>he({birthDay:z.target.value===""?"":parseInt(z.target.value)}),placeholder:""}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex gap-2 border p-1 rounded bg-white",children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"radio",checked:u.gender==="Male",onChange:()=>he({gender:"Male"})}),""]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"radio",checked:u.gender==="Female",onChange:()=>he({gender:"Female"})}),""]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",className:"w-16 p-2 border rounded text-center bg-gray-100",readOnly:!0,value:u.age}),l.jsx("span",{children:""})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),l.jsx("select",{className:`w-full p-2 border rounded mb-2 max-w-full text-ellipsis ${De("company")}`,value:u.company,onChange:z=>he({company:z.target.value}),children:g.subcontractors.map(z=>l.jsx("option",{value:z,children:z},z))}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{children:"("}),l.jsx("input",{type:"text",className:`w-10 border-b text-center ${De("subcontractorRank")}`,value:u.subcontractorRank,onChange:z=>he({subcontractorRank:z.target.value})}),l.jsx("span",{children:") "})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("input",{type:"number",className:`w-16 p-2 border rounded text-center ${De("experienceYears")}`,value:u.experienceYears??"",onChange:z=>he({experienceYears:z.target.value===""?null:parseInt(z.target.value)})}),l.jsx("span",{children:""}),l.jsx("input",{type:"number",className:"w-16 p-2 border rounded text-center bg-white",value:u.experienceMonths??"",onChange:z=>he({experienceMonths:z.target.value===""?null:parseInt(z.target.value)})}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:`w-1/2 p-2 border rounded ${De("jobType")}`,value:u.jobType,onChange:z=>he({jobType:z.target.value}),children:[l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""})]}),u.jobType===""&&l.jsx("input",{type:"text",className:`flex-1 p-2 border rounded max-w-full ${De("jobTypeOther")}`,placeholder:"",value:u.jobTypeOther,onChange:z=>he({jobTypeOther:z.target.value})})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded mb-2 max-w-full ${De("address")}`,placeholder:"",value:u.address,onChange:z=>he({address:z.target.value})}),l.jsx("input",{type:"text",className:`w-48 p-2 border rounded max-w-full ${De("phone")}`,placeholder:"090-0000-0000",value:u.phone,onChange:z=>he({phone:z.target.value})})]}),l.jsxs("div",{className:"form-control bg-gray-50 p-3 rounded border-2 border-red-500 w-full",children:[l.jsx("label",{className:"label font-bold text-gray-700 mb-2 block",children:""}),l.jsxs("div",{className:"mb-2",children:[l.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${De("emergencyContactSei")}`,placeholder:"",value:u.emergencyContactSei,onChange:z=>he({emergencyContactSei:z.target.value})}),l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${De("emergencyContactMei")}`,placeholder:"",value:u.emergencyContactMei,onChange:z=>he({emergencyContactMei:z.target.value})})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("div",{className:"w-full sm:flex-1",children:[l.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),l.jsxs("select",{className:`w-full p-2 border rounded max-w-full ${De("emergencyContactRelation")}`,value:u.emergencyContactRelation,onChange:z=>he({emergencyContactRelation:z.target.value}),children:[l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""})]})]}),l.jsxs("div",{className:"w-full sm:flex-1",children:[l.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded max-w-full ${De("emergencyContactPhone")}`,placeholder:"090-0000-0000",value:u.emergencyContactPhone,onChange:z=>he({emergencyContactPhone:z.target.value})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"p-2 border rounded bg-white",value:u.bloodType,onChange:z=>he({bloodType:z.target.value}),children:[l.jsx("option",{value:"A",children:"A"}),l.jsx("option",{value:"B",children:"B"}),l.jsx("option",{value:"O",children:"O"}),l.jsx("option",{value:"AB",children:"AB"})]}),l.jsx("span",{className:"self-center",children:""}),l.jsx("span",{className:"self-center ml-2",children:"RH"}),l.jsxs("select",{className:"p-2 border rounded bg-white",value:u.bloodTypeRh,onChange:z=>he({bloodTypeRh:z.target.value}),children:[l.jsx("option",{value:"Unknown",children:""}),l.jsx("option",{value:"Plus",children:"+"}),l.jsx("option",{value:"Minus",children:"-"})]})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),l.jsxs("div",{className:"flex gap-1 items-center",children:[l.jsx("input",{type:"number",className:`w-14 p-2 border rounded text-center ${De("healthCheckYear")}`,value:u.healthCheckYear??"",onChange:z=>he({healthCheckYear:z.target.value===""?null:parseInt(z.target.value)})}),l.jsx("span",{children:""}),l.jsx("input",{type:"number",className:`w-12 p-2 border rounded text-center ${De("healthCheckMonth")}`,value:u.healthCheckMonth??"",onChange:z=>he({healthCheckMonth:z.target.value===""?null:parseInt(z.target.value)})}),l.jsx("span",{children:""}),l.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center bg-white",value:u.healthCheckDay??"",onChange:z=>he({healthCheckDay:z.target.value===""?null:parseInt(z.target.value)})}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-4 mt-1",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-2 border rounded shadow-sm",children:[l.jsx("input",{type:"radio",checked:u.kentaikyo==="Joined",onChange:()=>he({kentaikyo:"Joined"})}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-2 border rounded shadow-sm",children:[l.jsx("input",{type:"radio",checked:u.kentaikyo==="NotJoined",onChange:()=>he({kentaikyo:"NotJoined"})}),""]})]})]})]}),we=()=>{const z=u.qualifications||{};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 2: "}),l.jsx("p",{className:"text-sm text-gray-500",children:""}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[l.jsx("h3",{className:"font-bold border-b mb-3",children:""}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.vehicle_leveling,onChange:ae=>ve("vehicle_leveling",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.vehicle_demolition,onChange:ae=>ve("vehicle_demolition",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.mobile_crane,onChange:ae=>ve("mobile_crane",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.slinging,onChange:ae=>ve("slinging",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.gas_welding,onChange:ae=>ve("gas_welding",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.earth_retaining,onChange:ae=>ve("earth_retaining",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.excavation,onChange:ae=>ve("excavation",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.scaffolding,onChange:ae=>ve("scaffolding",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.formwork,onChange:ae=>ve("formwork",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.oxygen_deficiency,onChange:ae=>ve("oxygen_deficiency",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.rough_terrain,onChange:ae=>ve("rough_terrain",ae.target.checked)}),""]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[l.jsx("h3",{className:"font-bold border-b mb-3",children:""}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.arc_welding,onChange:ae=>ve("arc_welding",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.grinding_wheel,onChange:ae=>ve("grinding_wheel",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.low_voltage,onChange:ae=>ve("low_voltage",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.roller,onChange:ae=>ve("roller",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:z.asbestos,onChange:ae=>ve("asbestos",ae.target.checked)}),""]})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[l.jsx("h3",{className:"font-bold border-b mb-3",children:""}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[l.jsx("input",{type:"checkbox",checked:z.foreman,onChange:ae=>ve("foreman",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-1",children:[l.jsx("input",{type:"checkbox",checked:z.license_regular,onChange:ae=>ve("license_regular",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-1",children:[l.jsx("input",{type:"checkbox",checked:z.license_large,onChange:ae=>ve("license_large",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-1",children:[l.jsx("input",{type:"checkbox",checked:z.license_large_special,onChange:ae=>ve("license_large_special",ae.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-4",children:[l.jsx("input",{type:"checkbox",checked:z.license_towing,onChange:ae=>ve("license_towing",ae.target.checked)}),""]}),l.jsx("div",{className:"text-sm font-bold mb-2",children:""}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:z.otherText1,onChange:ae=>ve("otherText1",ae.target.value)}),l.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:z.otherText2,onChange:ae=>ve("otherText2",ae.target.value)}),l.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:z.otherText3,onChange:ae=>ve("otherText3",ae.target.value)})]})]})]})]})]})},J=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 3: "}),l.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border leading-relaxed text-gray-800",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:""}),l.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-6",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""})]}),l.jsxs("div",{className:"bg-white p-4 rounded border text-center",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"font-bold mr-2",children:" ()"}),l.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:u.pledgeDateYear??"",onChange:z=>he({pledgeDateYear:z.target.value===""?null:parseInt(z.target.value)})}),"",l.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:u.pledgeDateMonth??"",onChange:z=>he({pledgeDateMonth:z.target.value===""?null:parseInt(z.target.value)})}),"",l.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:u.pledgeDateDay??"",onChange:z=>he({pledgeDateDay:z.target.value===""?null:parseInt(z.target.value)})}),""]}),l.jsx("label",{className:"block font-bold text-gray-700 mb-2",children:""}),l.jsx("div",{className:"mx-auto w-full max-w-sm",children:u.signatureDataUrl?l.jsxs("div",{className:"mt-4",children:[l.jsx("p",{className:"text-xs text-green-600 font-bold mb-1",children:""}),l.jsx("div",{className:"cursor-pointer hover:opacity-80 transition-opacity inline-block border border-transparent hover:border-blue-300 rounded p-1",onClick:()=>A(u.signatureDataUrl),title:"",children:l.jsx("img",{src:u.signatureDataUrl,alt:"Signature",className:"h-10 mx-auto border"})}),l.jsx("button",{onClick:()=>he({signatureDataUrl:null}),className:"ml-4 text-xs text-red-500 underline",children:""})]}):l.jsxs("button",{type:"button",onClick:()=>O(!0),className:"w-full h-32 border-2 border-dashed border-gray-400 rounded bg-gray-50 flex flex-col items-center justify-center text-gray-500 hover:bg-gray-100 hover:text-blue-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-pen-nib text-2xl mb-2"}),l.jsx("span",{className:"font-bold",children:""})]})})]})]})]}),Ae=()=>l.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[l.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),l.jsxs("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[l.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),l.jsxs("div",{className:"flex gap-4 mb-6 shrink-0",children:[l.jsxs("button",{onClick:()=>$("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${_e==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),l.jsxs("button",{onClick:()=>$("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${_e==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-list-check mr-2"}),""]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:(Yj[_e]||[]).map(z=>{const ae=$j[z]||z;return l.jsx(Gj,{title:ae,items:g[z]||[],onUpdate:async qe=>{const ot={...g,[z]:qe};v(ot),await Un(ot)},onDeleteRequest:(qe,ot)=>{z==="projects"?me({index:qe,name:ot}):ue({isOpen:!0,message:`${ot}`,onLeftButtonClick:()=>ue(Fe=>({...Fe,isOpen:!1})),onRightButtonClick:async()=>{const Fe=[...g[z]||[]];Fe.splice(qe,1);const C={...g,[z]:Fe};v(C),await Un(C),ue(de=>({...de,isOpen:!1}))},leftButtonLabel:"",rightButtonLabel:"",leftButtonClass:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",rightButtonClass:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold"})}},z)})})]}),ke=()=>l.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[l.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 bg-gray-600 rounded",children:""}),l.jsxs("button",{onClick:le,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center",children:[l.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 flex justify-center",children:l.jsx("div",{style:{width:"794px",transform:`scale(${oe})`,transformOrigin:"top center",marginBottom:`${(oe-1)*100}%`},children:l.jsx(z0,{data:u})})})]});return E?l.jsxs(l.Fragment,{children:[Ae(),l.jsx(U0,{isOpen:Z.isOpen,message:Z.message,onLeftButtonClick:Z.onLeftButtonClick,onRightButtonClick:Z.onRightButtonClick,leftButtonLabel:Z.leftButtonLabel,rightButtonLabel:Z.rightButtonLabel,leftButtonClass:Z.leftButtonClass,rightButtonClass:Z.rightButtonClass}),Q&&l.jsx(Kj,{isOpen:!!Q,projectName:Q.name,onCancel:()=>me(null),onConfirm:async()=>{const z=[...g.projects];z.splice(Q.index,1),await No(Q.name);const ae={...g,projects:z};v(ae),await Un(ae),me(null)}})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:Se,className:"text-white hover:text-gray-300",children:l.jsx("i",{className:"fa-solid fa-house"})}),l.jsxs("h1",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-person-circle-question mr-2"}),""]})]}),l.jsxs("button",{onClick:()=>w(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),l.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[l.jsx("span",{className:a>=1?"text-purple-600":"",children:""}),l.jsx("span",{className:a>=2?"text-purple-600":"",children:""}),l.jsx("span",{className:a>=3?"text-purple-600":"",children:""})]}),l.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"bg-purple-600 h-full transition-all duration-300",style:{width:`${a*33.3}%`}})})]}),l.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg max-w-3xl min-h-[60vh]",children:[a===1&&en(),a===2&&we(),a===3&&J()]}),l.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-md z-20",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>c(z=>Math.max(1,z-1)),disabled:a===1,className:`px-4 py-3 rounded-lg font-bold ${a===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""})}),a<3?l.jsxs("button",{onClick:ee,className:"px-8 py-3 bg-purple-600 text-white rounded-lg font-bold shadow hover:bg-purple-700 flex items-center",children:[" ",l.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("button",{onClick:fe,className:"px-8 py-3 bg-red-600 text-white rounded-lg font-bold shadow hover:bg-red-700 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-save mr-2"})," "]}),l.jsxs("button",{onClick:pe,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]})]}),D&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>A(null),children:[l.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:l.jsx("img",{src:D,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),l.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),V&&ke(),R&&l.jsxs("div",{className:"fixed inset-0 z-[999] bg-white flex flex-col animate-fadeIn",children:[l.jsxs("div",{className:"bg-slate-800 text-white p-4 flex justify-between items-center shrink-0 shadow-md",children:[l.jsxs("span",{className:"font-bold text-lg",children:[l.jsx("i",{className:"fa-solid fa-pen-nib mr-2"}),""]}),l.jsx("button",{onClick:()=>O(!1),className:"text-gray-300 hover:text-white px-3 py-1",children:l.jsx("i",{className:"fa-solid fa-xmark text-2xl"})})]}),l.jsx("div",{className:"flex-1 bg-gray-100 p-4 flex flex-col items-center justify-center overflow-hidden",children:l.jsx("div",{ref:M,className:"w-full h-full max-w-5xl bg-white shadow-lg border rounded-lg overflow-hidden flex flex-col",children:l.jsx(th,{ref:j,canvasProps:{className:"sigCanvas w-full h-full"},backgroundColor:"white"})})}),l.jsxs("div",{className:"p-4 bg-white border-t flex justify-end gap-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[l.jsxs("button",{onClick:it,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-bold hover:bg-gray-300 transition-colors flex items-center",children:[l.jsx("i",{className:"fa-solid fa-eraser mr-2"}),""]}),l.jsxs("button",{onClick:Ie,className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-bold shadow-md hover:bg-blue-700 transition-colors flex items-center",children:[l.jsx("i",{className:"fa-solid fa-check mr-2"}),""]})]})]}),l.jsx(U0,{isOpen:Z.isOpen,message:Z.message,onLeftButtonClick:Z.onLeftButtonClick,onRightButtonClick:Z.onRightButtonClick,leftButtonLabel:Z.leftButtonLabel,rightButtonLabel:Z.rightButtonLabel,leftButtonClass:Z.leftButtonClass,rightButtonClass:Z.rightButtonClass}),l.jsx("div",{className:"hidden print:block",children:l.jsx(z0,{data:u})})]})},Kj=({isOpen:r,projectName:t,onConfirm:s,onCancel:a})=>{const[c,u]=W.useState("");return r?l.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 border-2 border-red-500",children:[l.jsx("h3",{className:"text-lg font-bold mb-4 text-red-600",children:" "}),l.jsxs("p",{className:"mb-4 text-sm text-gray-700",children:["",t,"",l.jsx("br",{}),""]}),l.jsx("p",{className:"mb-2 text-sm font-bold",children:"PASS (4043)"}),l.jsx("input",{type:"password",className:"w-full border p-2 rounded mb-4",value:c,onChange:m=>u(m.target.value)}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-200 rounded",children:""}),l.jsx("button",{onClick:()=>{c==="4043"?s():alert("PASS")},className:"px-4 py-2 bg-red-600 text-white rounded font-bold",children:""})]})]})}):null},Xj=({isOpen:r,message:t,onConfirm:s,onCancel:a})=>r?l.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),l.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,Zj=({isOpen:r,onClose:t,url:s})=>r?l.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full flex flex-col items-center animate-fade-in",onClick:a=>a.stopPropagation(),children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:" "}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6 text-center",children:["",l.jsx("br",{}),""]}),l.jsx("div",{className:"p-4 border-4 border-gray-200 rounded-lg bg-white mb-6",children:l.jsx(X0,{value:s,size:250,level:"H",includeMargin:!0})}),l.jsx("p",{className:"text-xs text-gray-400 break-all text-center mb-6",children:s}),l.jsx("button",{onClick:t,className:"w-full py-3 bg-gray-600 text-white rounded-lg font-bold hover:bg-gray-700",children:""})]})}):null,Jj=()=>{const[r,t]=W.useState("HOME"),[s,a]=W.useState(!1),[c,u]=W.useState(null),[m,y]=W.useState([]),[p,g]=W.useState(null),[v,E]=W.useState(!1),[w,V]=W.useState(!1),[P,G]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[L,oe]=W.useState(void 0),[ce,Z]=W.useState(null);W.useEffect(()=>{new URLSearchParams(window.location.search).get("form")==="newcomer"&&(oe(void 0),Z(null),t("NEWCOMER_SURVEY"))},[]),W.useEffect(()=>{s&&((async()=>{E(!0);try{const j=await Ff();y(j)}catch(j){console.error("Failed to load drafts",j),alert("")}finally{E(!1)}})(),g(null))},[s]);const ue=O=>{u(O),a(!0)},Te=()=>{c&&(oe(void 0),Z(null),t(c),a(!1))},je=O=>{oe(O.data),Z(O.id),t(O.type),a(!1)},D=O=>{G({isOpen:!0,message:"",onConfirm:async()=>{try{await cj(O);const j=await Ff();y(j),p&&c&&j.filter(S=>S.type===c&&(S.data.project||"")===p).length===0&&g(null),G(M=>({...M,isOpen:!1}))}catch(j){console.error("Failed to delete draft",j),alert("")}}})};if(r==="SAFETY_TRAINING")return l.jsx(pj,{initialData:L,initialDraftId:ce,onBackToMenu:()=>t("HOME")});if(r==="DISASTER_COUNCIL")return l.jsx(bj,{initialData:L,initialDraftId:ce,onBackToMenu:()=>t("HOME")});if(r==="SAFETY_PLAN")return l.jsx(Tj,{initialData:L,initialDraftId:ce,onBackToMenu:()=>t("HOME")});if(r==="NEWCOMER_SURVEY")return l.jsx(Qj,{initialData:L,initialDraftId:ce,onBackToMenu:()=>t("HOME")});const A=()=>{if(!s||!c)return null;const O=m.filter(M=>M.type===c),j={};return O.forEach(M=>{const S=M.data.project||"";j[S]||(j[S]=[]),j[S].push(M)}),l.jsx("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-gray-800 text-white p-4 flex justify-between items-center shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[p&&l.jsx("button",{onClick:()=>g(null),className:"mr-1 text-gray-300 hover:text-white",children:l.jsx("i",{className:"fa-solid fa-arrow-left"})}),l.jsx("h3",{className:"font-bold text-lg",children:p?"":""})]}),l.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white",children:l.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:v?l.jsxs("div",{className:"flex justify-center items-center py-10",children:[l.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"}),l.jsx("span",{className:"ml-3 text-gray-500",children:"..."})]}):p?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-gray-50 p-3 rounded border text-sm text-gray-600 mb-4",children:[l.jsx("i",{className:"fa-solid fa-building mr-2"}),p]}),l.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-2 uppercase tracking-wide",children:""}),l.jsx("div",{className:"space-y-3",children:j[p].map(M=>l.jsxs("div",{className:"border rounded-lg p-3 hover:bg-blue-50 transition-colors flex justify-between items-center group bg-white shadow-sm",children:[l.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>je(M),children:[l.jsxs("div",{className:"font-bold text-blue-800 text-lg",children:[l.jsx("i",{className:"fa-regular fa-calendar-check mr-2"}),M.type==="SAFETY_TRAINING"?`${M.data.month}`:M.type==="DISASTER_COUNCIL"?`${M.data.count}`:M.type==="NEWCOMER_SURVEY"?M.data.name||"":`${M.data.month} `]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1 pl-7",children:[": ",new Date(M.lastModified).toLocaleString("ja-JP")]})]}),l.jsx("button",{onClick:S=>{S.stopPropagation(),D(M.id)},className:"ml-3 p-3 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-50 transition-colors",title:"",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},M.id))})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-8 space-y-3",children:[l.jsxs("button",{onClick:Te,className:"w-full py-4 bg-blue-600 text-white rounded-lg font-bold shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition-transform transform hover:scale-[1.01]",children:[l.jsx("i",{className:"fa-solid fa-file-circle-plus text-xl"}),""]}),c==="NEWCOMER_SURVEY"&&l.jsxs("button",{onClick:()=>V(!0),className:"w-full py-4 bg-purple-600 text-white rounded-lg font-bold shadow-md hover:bg-purple-700 flex items-center justify-center gap-2 transition-transform transform hover:scale-[1.01]",children:[l.jsx("i",{className:"fa-solid fa-qrcode text-xl"}),"QR"]})]}),l.jsxs("div",{className:"border-t pt-4",children:[l.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-3 uppercase tracking-wide",children:""}),Object.keys(j).length===0?l.jsx("div",{className:"text-center py-8 text-gray-400 bg-gray-50 rounded-lg",children:""}):l.jsx("div",{className:"space-y-3",children:Object.entries(j).map(([M,S])=>l.jsxs("button",{onClick:()=>g(M),className:"w-full text-left border rounded-lg p-4 hover:bg-blue-50 transition-colors flex justify-between items-center group shadow-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-800 text-sm mb-1",children:M}),l.jsxs("div",{className:"text-xs text-gray-500",children:[l.jsx("i",{className:"fa-regular fa-folder-open mr-1"}),S.length," "]})]}),l.jsx("i",{className:"fa-solid fa-chevron-right text-gray-300 group-hover:text-blue-400"})]},M))})]})]})})]})})},R=`${window.location.protocol}//${window.location.host}${window.location.pathname}?form=newcomer`;return l.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-gray-800",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-6 shadow-md text-center",children:[l.jsxs("h1",{className:"text-2xl font-bold tracking-wide",children:[l.jsx("i",{className:"fa-solid fa-building-shield mr-2"}),""]}),l.jsx("p",{className:"text-slate-400 text-sm mt-2",children:""})]}),l.jsxs("main",{className:"max-w-4xl mx-auto p-6 mt-8",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-700 border-l-4 border-slate-800 pl-3",children:""}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("button",{onClick:()=>ue("SAFETY_TRAINING"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-blue-600 group",children:[l.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-helmet-safety text-4xl text-blue-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),l.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),l.jsxs("button",{onClick:()=>ue("DISASTER_COUNCIL"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-green-600 group",children:[l.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-green-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-users-rectangle text-4xl text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),l.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),l.jsxs("button",{onClick:()=>ue("SAFETY_PLAN"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-orange-500 group",children:[l.jsx("div",{className:"w-20 h-20 bg-orange-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-orange-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-clipboard-list text-4xl text-orange-500"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),l.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),l.jsxs("button",{onClick:()=>ue("NEWCOMER_SURVEY"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-purple-600 group",children:[l.jsx("div",{className:"w-20 h-20 bg-purple-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-person-circle-question text-4xl text-purple-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),l.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]})]})]}),l.jsx("footer",{className:"mt-12 text-center text-gray-400 text-sm pb-8",children:" 2024 Safety Reporting App"}),A(),l.jsx(Xj,{isOpen:P.isOpen,message:P.message,onConfirm:P.onConfirm,onCancel:()=>G(O=>({...O,isOpen:!1}))}),l.jsx(Zj,{isOpen:w,onClose:()=>V(!1),url:R})]})},Zb=document.getElementById("root");if(!Zb)throw new Error("Could not find root element to mount to");const Wj=U1.createRoot(Zb);Wj.render(l.jsx(Ct.StrictMode,{children:l.jsx(Jj,{})}));
