(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function s(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(c){if(c.ep)return;c.ep=!0;const h=s(c);fetch(c.href,h)}})();function o0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bf={exports:{}},$l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function L_(){if(Vy)return $l;Vy=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(i,c,h){var m=null;if(h!==void 0&&(m=""+h),c.key!==void 0&&(m=""+c.key),"key"in c){h={};for(var p in c)p!=="key"&&(h[p]=c[p])}else h=c;return c=h.ref,{$$typeof:r,type:i,key:m,ref:c!==void 0?c:null,props:h}}return $l.Fragment=t,$l.jsx=s,$l.jsxs=s,$l}var Oy;function P_(){return Oy||(Oy=1,Bf.exports=L_()),Bf.exports}var o=P_(),qf={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function B_(){if(ky)return Me;ky=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),I=Symbol.iterator;function G(A){return A===null||typeof A!="object"?null:(A=I&&A[I]||A["@@iterator"],typeof A=="function"?A:null)}var te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,X={};function ye(A,Q,le){this.props=A,this.context=Q,this.refs=X,this.updater=le||te}ye.prototype.isReactComponent={},ye.prototype.setState=function(A,Q){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,Q,"setState")},ye.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function pe(){}pe.prototype=ye.prototype;function de(A,Q,le){this.props=A,this.context=Q,this.refs=X,this.updater=le||te}var be=de.prototype=new pe;be.constructor=de,ie(be,ye.prototype),be.isPureReactComponent=!0;var De=Array.isArray;function we(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function S(A,Q,le){var O=le.ref;return{$$typeof:r,type:A,key:Q,ref:O!==void 0?O:null,props:le}}function M(A,Q){return S(A.type,Q,A.props)}function j(A){return typeof A=="object"&&A!==null&&A.$$typeof===r}function V(A){var Q={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(le){return Q[le]})}var E=/\/+/g;function me(A,Q){return typeof A=="object"&&A!==null&&A.key!=null?V(""+A.key):Q.toString(36)}function Oe(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(we,we):(A.status="pending",A.then(function(Q){A.status==="pending"&&(A.status="fulfilled",A.value=Q)},function(Q){A.status==="pending"&&(A.status="rejected",A.reason=Q)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function q(A,Q,le,O,ne){var ve=typeof A;(ve==="undefined"||ve==="boolean")&&(A=null);var oe=!1;if(A===null)oe=!0;else switch(ve){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(A.$$typeof){case r:case t:oe=!0;break;case T:return oe=A._init,q(oe(A._payload),Q,le,O,ne)}}if(oe)return ne=ne(A),oe=O===""?"."+me(A,0):O,De(ne)?(le="",oe!=null&&(le=oe.replace(E,"$&/")+"/"),q(ne,Q,le,"",function(je){return je})):ne!=null&&(j(ne)&&(ne=M(ne,le+(ne.key==null||A&&A.key===ne.key?"":(""+ne.key).replace(E,"$&/")+"/")+oe)),Q.push(ne)),1;oe=0;var $=O===""?".":O+":";if(De(A))for(var ue=0;ue<A.length;ue++)O=A[ue],ve=$+me(O,ue),oe+=q(O,Q,le,ve,ne);else if(ue=G(A),typeof ue=="function")for(A=ue.call(A),ue=0;!(O=A.next()).done;)O=O.value,ve=$+me(O,ue++),oe+=q(O,Q,le,ve,ne);else if(ve==="object"){if(typeof A.then=="function")return q(Oe(A),Q,le,O,ne);throw Q=String(A),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return oe}function Z(A,Q,le){if(A==null)return A;var O=[],ne=0;return q(A,O,"","",function(ve){return Q.call(le,ve,ne++)}),O}function he(A){if(A._status===-1){var Q=A._result;Q=Q(),Q.then(function(le){(A._status===0||A._status===-1)&&(A._status=1,A._result=le)},function(le){(A._status===0||A._status===-1)&&(A._status=2,A._result=le)}),A._status===-1&&(A._status=0,A._result=Q)}if(A._status===1)return A._result.default;throw A._result}var Ie=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},Le={map:Z,forEach:function(A,Q,le){Z(A,function(){Q.apply(this,arguments)},le)},count:function(A){var Q=0;return Z(A,function(){Q++}),Q},toArray:function(A){return Z(A,function(Q){return Q})||[]},only:function(A){if(!j(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return Me.Activity=C,Me.Children=Le,Me.Component=ye,Me.Fragment=s,Me.Profiler=c,Me.PureComponent=de,Me.StrictMode=i,Me.Suspense=v,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Me.__COMPILER_RUNTIME={__proto__:null,c:function(A){return R.H.useMemoCache(A)}},Me.cache=function(A){return function(){return A.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(A,Q,le){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var O=ie({},A.props),ne=A.key;if(Q!=null)for(ve in Q.key!==void 0&&(ne=""+Q.key),Q)!w.call(Q,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&Q.ref===void 0||(O[ve]=Q[ve]);var ve=arguments.length-2;if(ve===1)O.children=le;else if(1<ve){for(var oe=Array(ve),$=0;$<ve;$++)oe[$]=arguments[$+2];O.children=oe}return S(A.type,ne,O)},Me.createContext=function(A){return A={$$typeof:m,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:h,_context:A},A},Me.createElement=function(A,Q,le){var O,ne={},ve=null;if(Q!=null)for(O in Q.key!==void 0&&(ve=""+Q.key),Q)w.call(Q,O)&&O!=="key"&&O!=="__self"&&O!=="__source"&&(ne[O]=Q[O]);var oe=arguments.length-2;if(oe===1)ne.children=le;else if(1<oe){for(var $=Array(oe),ue=0;ue<oe;ue++)$[ue]=arguments[ue+2];ne.children=$}if(A&&A.defaultProps)for(O in oe=A.defaultProps,oe)ne[O]===void 0&&(ne[O]=oe[O]);return S(A,ve,ne)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(A){return{$$typeof:p,render:A}},Me.isValidElement=j,Me.lazy=function(A){return{$$typeof:T,_payload:{_status:-1,_result:A},_init:he}},Me.memo=function(A,Q){return{$$typeof:x,type:A,compare:Q===void 0?null:Q}},Me.startTransition=function(A){var Q=R.T,le={};R.T=le;try{var O=A(),ne=R.S;ne!==null&&ne(le,O),typeof O=="object"&&O!==null&&typeof O.then=="function"&&O.then(we,Ie)}catch(ve){Ie(ve)}finally{Q!==null&&le.types!==null&&(Q.types=le.types),R.T=Q}},Me.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Me.use=function(A){return R.H.use(A)},Me.useActionState=function(A,Q,le){return R.H.useActionState(A,Q,le)},Me.useCallback=function(A,Q){return R.H.useCallback(A,Q)},Me.useContext=function(A){return R.H.useContext(A)},Me.useDebugValue=function(){},Me.useDeferredValue=function(A,Q){return R.H.useDeferredValue(A,Q)},Me.useEffect=function(A,Q){return R.H.useEffect(A,Q)},Me.useEffectEvent=function(A){return R.H.useEffectEvent(A)},Me.useId=function(){return R.H.useId()},Me.useImperativeHandle=function(A,Q,le){return R.H.useImperativeHandle(A,Q,le)},Me.useInsertionEffect=function(A,Q){return R.H.useInsertionEffect(A,Q)},Me.useLayoutEffect=function(A,Q){return R.H.useLayoutEffect(A,Q)},Me.useMemo=function(A,Q){return R.H.useMemo(A,Q)},Me.useOptimistic=function(A,Q){return R.H.useOptimistic(A,Q)},Me.useReducer=function(A,Q,le){return R.H.useReducer(A,Q,le)},Me.useRef=function(A){return R.H.useRef(A)},Me.useState=function(A){return R.H.useState(A)},Me.useSyncExternalStore=function(A,Q,le){return R.H.useSyncExternalStore(A,Q,le)},Me.useTransition=function(){return R.H.useTransition()},Me.version="19.2.4",Me}var zy;function Sd(){return zy||(zy=1,qf.exports=B_()),qf.exports}var re=Sd();const c0=o0(re);var Hf={exports:{}},Yl={},Gf={exports:{}},Ff={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function q_(){return Uy||(Uy=1,(function(r){function t(q,Z){var he=q.length;q.push(Z);e:for(;0<he;){var Ie=he-1>>>1,Le=q[Ie];if(0<c(Le,Z))q[Ie]=Z,q[he]=Le,he=Ie;else break e}}function s(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Z=q[0],he=q.pop();if(he!==Z){q[0]=he;e:for(var Ie=0,Le=q.length,A=Le>>>1;Ie<A;){var Q=2*(Ie+1)-1,le=q[Q],O=Q+1,ne=q[O];if(0>c(le,he))O<Le&&0>c(ne,le)?(q[Ie]=ne,q[O]=he,Ie=O):(q[Ie]=le,q[Q]=he,Ie=Q);else if(O<Le&&0>c(ne,he))q[Ie]=ne,q[O]=he,Ie=O;else break e}}return Z}function c(q,Z){var he=q.sortIndex-Z.sortIndex;return he!==0?he:q.id-Z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var m=Date,p=m.now();r.unstable_now=function(){return m.now()-p}}var v=[],x=[],T=1,C=null,I=3,G=!1,te=!1,ie=!1,X=!1,ye=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;function be(q){for(var Z=s(x);Z!==null;){if(Z.callback===null)i(x);else if(Z.startTime<=q)i(x),Z.sortIndex=Z.expirationTime,t(v,Z);else break;Z=s(x)}}function De(q){if(ie=!1,be(q),!te)if(s(v)!==null)te=!0,we||(we=!0,V());else{var Z=s(x);Z!==null&&Oe(De,Z.startTime-q)}}var we=!1,R=-1,w=5,S=-1;function M(){return X?!0:!(r.unstable_now()-S<w)}function j(){if(X=!1,we){var q=r.unstable_now();S=q;var Z=!0;try{e:{te=!1,ie&&(ie=!1,pe(R),R=-1),G=!0;var he=I;try{t:{for(be(q),C=s(v);C!==null&&!(C.expirationTime>q&&M());){var Ie=C.callback;if(typeof Ie=="function"){C.callback=null,I=C.priorityLevel;var Le=Ie(C.expirationTime<=q);if(q=r.unstable_now(),typeof Le=="function"){C.callback=Le,be(q),Z=!0;break t}C===s(v)&&i(v),be(q)}else i(v);C=s(v)}if(C!==null)Z=!0;else{var A=s(x);A!==null&&Oe(De,A.startTime-q),Z=!1}}break e}finally{C=null,I=he,G=!1}Z=void 0}}finally{Z?V():we=!1}}}var V;if(typeof de=="function")V=function(){de(j)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,me=E.port2;E.port1.onmessage=j,V=function(){me.postMessage(null)}}else V=function(){ye(j,0)};function Oe(q,Z){R=ye(function(){q(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(q){switch(I){case 1:case 2:case 3:var Z=3;break;default:Z=I}var he=I;I=Z;try{return q()}finally{I=he}},r.unstable_requestPaint=function(){X=!0},r.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var he=I;I=q;try{return Z()}finally{I=he}},r.unstable_scheduleCallback=function(q,Z,he){var Ie=r.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ie+he:Ie):he=Ie,q){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=he+Le,q={id:T++,callback:Z,priorityLevel:q,startTime:he,expirationTime:Le,sortIndex:-1},he>Ie?(q.sortIndex=he,t(x,q),s(v)===null&&q===s(x)&&(ie?(pe(R),R=-1):ie=!0,Oe(De,he-Ie))):(q.sortIndex=Le,t(v,q),te||G||(te=!0,we||(we=!0,V()))),q},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(q){var Z=I;return function(){var he=I;I=Z;try{return q.apply(this,arguments)}finally{I=he}}}})(Ff)),Ff}var Ly;function H_(){return Ly||(Ly=1,Gf.exports=q_()),Gf.exports}var $f={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function G_(){if(Py)return sn;Py=1;var r=Sd();function t(v){var x="https://react.dev/errors/"+v;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)x+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+v+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(v,x,T){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:C==null?null:""+C,children:v,containerInfo:x,implementation:T}}var m=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,x){if(v==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,sn.createPortal=function(v,x){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return h(v,x,null,T)},sn.flushSync=function(v){var x=m.T,T=i.p;try{if(m.T=null,i.p=2,v)return v()}finally{m.T=x,i.p=T,i.d.f()}},sn.preconnect=function(v,x){typeof v=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(v,x))},sn.prefetchDNS=function(v){typeof v=="string"&&i.d.D(v)},sn.preinit=function(v,x){if(typeof v=="string"&&x&&typeof x.as=="string"){var T=x.as,C=p(T,x.crossOrigin),I=typeof x.integrity=="string"?x.integrity:void 0,G=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;T==="style"?i.d.S(v,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:C,integrity:I,fetchPriority:G}):T==="script"&&i.d.X(v,{crossOrigin:C,integrity:I,fetchPriority:G,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},sn.preinitModule=function(v,x){if(typeof v=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var T=p(x.as,x.crossOrigin);i.d.M(v,{crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(v)},sn.preload=function(v,x){if(typeof v=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var T=x.as,C=p(T,x.crossOrigin);i.d.L(v,T,{crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},sn.preloadModule=function(v,x){if(typeof v=="string")if(x){var T=p(x.as,x.crossOrigin);i.d.m(v,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(v)},sn.requestFormReset=function(v){i.d.r(v)},sn.unstable_batchedUpdates=function(v,x){return v(x)},sn.useFormState=function(v,x,T){return m.H.useFormState(v,x,T)},sn.useFormStatus=function(){return m.H.useHostTransitionStatus()},sn.version="19.2.4",sn}var By;function F_(){if(By)return $f.exports;By=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),$f.exports=G_(),$f.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function $_(){if(qy)return Yl;qy=1;var r=H_(),t=Sd(),s=F_();function i(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function m(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(i(188))}function x(e){var n=e.alternate;if(!n){if(n=h(e),n===null)throw Error(i(188));return n!==e?null:e}for(var a=e,l=n;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return v(f),e;if(d===l)return v(f),n;d=d.sibling}throw Error(i(188))}if(a.return!==l.return)a=f,l=d;else{for(var y=!1,_=f.child;_;){if(_===a){y=!0,a=f,l=d;break}if(_===l){y=!0,l=f,a=d;break}_=_.sibling}if(!y){for(_=d.child;_;){if(_===a){y=!0,a=d,l=f;break}if(_===l){y=!0,l=d,a=f;break}_=_.sibling}if(!y)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:n}function T(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=T(e),n!==null)return n;e=e.sibling}return null}var C=Object.assign,I=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),te=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),pe=Symbol.for("react.consumer"),de=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=j&&e[j]||e["@@iterator"],typeof e=="function"?e:null)}var E=Symbol.for("react.client.reference");function me(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===E?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ie:return"Fragment";case ye:return"Profiler";case X:return"StrictMode";case De:return"Suspense";case we:return"SuspenseList";case S:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case te:return"Portal";case de:return e.displayName||"Context";case pe:return(e._context.displayName||"Context")+".Consumer";case be:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return n=e.displayName||null,n!==null?n:me(e.type)||"Memo";case w:n=e._payload,e=e._init;try{return me(e(n))}catch{}}return null}var Oe=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ie=[],Le=-1;function A(e){return{current:e}}function Q(e){0>Le||(e.current=Ie[Le],Ie[Le]=null,Le--)}function le(e,n){Le++,Ie[Le]=e.current,e.current=n}var O=A(null),ne=A(null),ve=A(null),oe=A(null);function $(e,n){switch(le(ve,n),le(ne,e),le(O,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?sy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=sy(n),e=ay(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(O),le(O,e)}function ue(){Q(O),Q(ne),Q(ve)}function je(e){e.memoizedState!==null&&le(oe,e);var n=O.current,a=ay(n,e.type);n!==a&&(le(ne,e),le(O,a))}function qe(e){ne.current===e&&(Q(O),Q(ne)),oe.current===e&&(Q(oe),ql._currentValue=he)}var xt,_t;function Et(e){if(xt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);xt=n&&n[1]||"",_t=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xt+e+_t}var bn=!1;function ae(e,n){if(!e||bn)return"";bn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Y){var B=Y}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(Y){B=Y}e.call(ee.prototype)}}else{try{throw Error()}catch(Y){B=Y}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Y){if(Y&&B&&typeof Y.stack=="string")return[Y.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],_=d[1];if(y&&_){var D=y.split(`
`),P=_.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===P.length)for(l=D.length-1,f=P.length-1;1<=l&&0<=f&&D[l]!==P[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==P[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==P[f]){var K=`
`+D[l].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=l&&0<=f);break}}}finally{bn=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Et(a):""}function H(e,n){switch(e.tag){case 26:case 27:case 5:return Et(e.type);case 16:return Et("Lazy");case 13:return e.child!==n&&n!==null?Et("Suspense Fallback"):Et("Suspense");case 19:return Et("SuspenseList");case 0:case 15:return ae(e.type,!1);case 11:return ae(e.type.render,!1);case 1:return ae(e.type,!0);case 31:return Et("Activity");default:return""}}function Ee(e){try{var n="",a=null;do n+=H(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ae=Object.prototype.hasOwnProperty,Qe=r.unstable_scheduleCallback,Nt=r.unstable_cancelCallback,Dn=r.unstable_shouldYield,In=r.unstable_requestPaint,Bt=r.unstable_now,Ja=r.unstable_getCurrentPriorityLevel,Fi=r.unstable_ImmediatePriority,$i=r.unstable_UserBlockingPriority,ra=r.unstable_NormalPriority,Hu=r.unstable_LowPriority,Eo=r.unstable_IdlePriority,No=r.log,To=r.unstable_setDisableYieldValue,Yn=null,Qt=null;function Mn(e){if(typeof No=="function"&&To(e),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Yn,e)}catch{}}var Tt=Math.clz32?Math.clz32:jo,wo=Math.log,zr=Math.LN2;function jo(e){return e>>>=0,e===0?32:31-(wo(e)/zr|0)|0}var ls=256,Wa=262144,Ct=4194304;function os(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function cs(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~d,l!==0?f=os(l):(y&=_,y!==0?f=os(y):a||(a=_&~e,a!==0&&(f=os(a))))):(_=l&~d,_!==0?f=os(_):y!==0?f=os(y):a||(a=l&~e,a!==0&&(f=os(a)))),f===0?0:n!==0&&n!==f&&(n&d)===0&&(d=f&-f,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:f}function Qn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Gu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function So(){var e=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),e}function us(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function er(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Fu(e,n,a,l,f,d){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,D=e.expirationTimes,P=e.hiddenUpdates;for(a=y&~a;0<a;){var K=31-Tt(a),ee=1<<K;_[K]=0,D[K]=-1;var B=P[K];if(B!==null)for(P[K]=null,K=0;K<B.length;K++){var Y=B[K];Y!==null&&(Y.lane&=-536870913)}a&=~ee}l!==0&&tr(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~n))}function tr(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-Tt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Yi(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-Tt(a),f=1<<l;f&n|e[l]&n&&(e[l]|=n),a&=~f}}function Qi(e,n){var a=n&-n;return a=(a&42)!==0?1:nr(a),(a&(e.suspendedLanes|n))!==0?0:a}function nr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Os(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ao(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:Sy(e.type))}function Kn(e,n){var a=Z.p;try{return Z.p=e,n()}finally{Z.p=a}}var Xn=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Xn,Gt="__reactProps$"+Xn,hs="__reactContainer$"+Xn,Ur="__reactEvents$"+Xn,$u="__reactListeners$"+Xn,Co="__reactHandles$"+Xn,Ro="__reactResources$"+Xn,fs="__reactMarker$"+Xn;function Lr(e){delete e[Rt],delete e[Gt],delete e[Ur],delete e[$u],delete e[Co]}function ds(e){var n=e[Rt];if(n)return n;for(var a=e.parentNode;a;){if(n=a[hs]||a[Rt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=hy(e);e!==null;){if(a=e[Rt])return a;e=hy(e)}return n}e=a,a=e.parentNode}return null}function Vn(e){if(e=e[Rt]||e[hs]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function _n(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(i(33))}function ms(e){var n=e[Ro];return n||(n=e[Ro]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Dt(e){e[fs]=!0}var Ki=new Set,Xi={};function gs(e,n){ps(e,n),ps(e+"Capture",n)}function ps(e,n){for(Xi[e]=n,e=0;e<n.length;e++)Ki.add(n[e])}var Zi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ji={},Wi={};function Do(e){return Ae.call(Wi,e)?!0:Ae.call(Ji,e)?!1:Zi.test(e)?Wi[e]=!0:(Ji[e]=!0,!1)}function Pr(e,n,a){if(Do(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function En(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function It(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function Ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ia(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function el(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function nt(e){if(!e._valueTracker){var n=ia(e)?"checked":"value";e._valueTracker=el(e,n,""+e[n])}}function sr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=ia(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function ys(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ar=/[\n"\\]/g;function un(e){return e.replace(ar,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Br(e,n,a,l,f,d,y,_){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ft(n)):e.value!==""+Ft(n)&&(e.value=""+Ft(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?tl(e,y,Ft(n)):a!=null?tl(e,y,Ft(a)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Ft(_):e.removeAttribute("name")}function Io(e,n,a,l,f,d,y,_){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){nt(e);return}a=a!=null?""+Ft(a):"",n=n!=null?""+Ft(n):a,_||n===e.value||(e.value=n),e.defaultValue=n}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),nt(e)}function tl(e,n,a){n==="number"&&ys(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function la(e,n,a,l){if(e=e.options,n){n={};for(var f=0;f<a.length;f++)n["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=n.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ft(a),n=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function Mo(e,n,a){if(n!=null&&(n=""+Ft(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Ft(a):""}function oa(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(i(92));if(Oe(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Ft(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),nt(e)}function hn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nl(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||Vo.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function sl(e,n,a){if(n!=null&&typeof n!="object")throw Error(i(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in n)l=n[f],n.hasOwnProperty(f)&&a[f]!==l&&nl(e,f,l)}else for(var d in n)n.hasOwnProperty(d)&&nl(e,d,n[d])}function qr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ca=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hr(e){return ca.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Zn(){}var al=null;function On(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ua=null,xs=null;function rr(e){var n=Vn(e);if(n&&(e=n.stateNode)){var a=e[Gt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Br(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var f=l[Gt]||null;if(!f)throw Error(i(90));Br(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&sr(l)}break e;case"textarea":Mo(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&la(e,!!a.multiple,n,!1)}}}var Gr=!1;function ha(e,n,a){if(Gr)return e(n,a);Gr=!0;try{var l=e(n);return l}finally{if(Gr=!1,(ua!==null||xs!==null)&&(Ac(),ua&&(n=ua,e=xs,xs=ua=null,rr(n),e)))for(n=0;n<e.length;n++)rr(e[n])}}function Jn(e,n){var a=e.stateNode;if(a===null)return null;var l=a[Gt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,n,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ir=!1;if(kn)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){ir=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{ir=!1}var vs=null,rl=null,lr=null;function il(){if(lr)return lr;var e,n=rl,a=n.length,l,f="value"in vs?vs.value:vs.textContent,d=f.length;for(e=0;e<a&&n[e]===f[e];e++);var y=a-e;for(l=1;l<=y&&n[a-l]===f[d-l];l++);return lr=f.slice(e,1<l?1-l:void 0)}function or(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ks(){return!0}function Wn(){return!1}function Kt(e){function n(a,l,f,d,y){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(d):d[_]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ks:Wn,this.isPropagationStopped=Wn,this}return C(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),n}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bs=Kt(zs),fa=C({},zs,{view:0,detail:0}),ll=Kt(fa),da,Fr,_s,$r=C({},fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ma,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_s&&(_s&&e.type==="mousemove"?(da=e.screenX-_s.screenX,Fr=e.screenY-_s.screenY):Fr=da=0,_s=e),da)},movementY:function(e){return"movementY"in e?e.movementY:Fr}}),ol=Kt($r),cr=C({},$r,{dataTransfer:0}),ko=Kt(cr),zo=C({},fa,{relatedTarget:0}),ur=Kt(zo),cl=C({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Uo=Kt(cl),Yr=C({},zs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lo=Kt(Yr),Po=C({},zs,{data:0}),Es=Kt(Po),Bo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ho={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Go(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Ho[e])?!!n[e]:!1}function ma(){return Go}var on=C({},fa,{key:function(e){if(e.key){var n=Bo[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=or(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ma,charCode:function(e){return e.type==="keypress"?or(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?or(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fo=Kt(on),$o=C({},$r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Us=Kt($o),u=C({},fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ma}),g=Kt(u),b=C({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Kt(b),U=C({},$r,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Kt(U),ce=C({},zs,{newState:0,oldState:0}),ke=Kt(ce),wt=[9,13,27,32],We=kn&&"CompositionEvent"in window,gt=null;kn&&"documentMode"in document&&(gt=document.documentMode);var zn=kn&&"TextEvent"in window&&!gt,Ns=kn&&(!We||gt&&8<gt&&11>=gt),es=" ",ts=!1;function hr(e,n){switch(e){case"keyup":return wt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kr=!1;function cb(e,n){switch(e){case"compositionend":return Qr(n);case"keypress":return n.which!==32?null:(ts=!0,es);case"textInput":return e=n.data,e===es&&ts?null:e;default:return null}}function ub(e,n){if(Kr)return e==="compositionend"||!We&&hr(e,n)?(e=il(),lr=rl=vs=null,Kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ns&&n.locale!=="ko"?null:n.data;default:return null}}var hb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!hb[e.type]:n==="textarea"}function gm(e,n,a,l){ua?xs?xs.push(l):xs=[l]:ua=l,n=Oc(n,"onChange"),0<n.length&&(a=new bs("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var ul=null,hl=null;function fb(e){Zp(e,0)}function Yo(e){var n=_n(e);if(sr(n))return e}function pm(e,n){if(e==="change")return n}var ym=!1;if(kn){var Yu;if(kn){var Qu="oninput"in document;if(!Qu){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),Qu=typeof xm.oninput=="function"}Yu=Qu}else Yu=!1;ym=Yu&&(!document.documentMode||9<document.documentMode)}function vm(){ul&&(ul.detachEvent("onpropertychange",bm),hl=ul=null)}function bm(e){if(e.propertyName==="value"&&Yo(hl)){var n=[];gm(n,hl,e,On(e)),ha(fb,n)}}function db(e,n,a){e==="focusin"?(vm(),ul=n,hl=a,ul.attachEvent("onpropertychange",bm)):e==="focusout"&&vm()}function mb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yo(hl)}function gb(e,n){if(e==="click")return Yo(n)}function pb(e,n){if(e==="input"||e==="change")return Yo(n)}function yb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Nn=typeof Object.is=="function"?Object.is:yb;function fl(e,n){if(Nn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Ae.call(n,f)||!Nn(e[f],n[f]))return!1}return!0}function _m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Em(e,n){var a=_m(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_m(a)}}function Nm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Nm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Tm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ys(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=ys(e.document)}return n}function Ku(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var xb=kn&&"documentMode"in document&&11>=document.documentMode,Xr=null,Xu=null,dl=null,Zu=!1;function wm(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zu||Xr==null||Xr!==ys(l)||(l=Xr,"selectionStart"in l&&Ku(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dl&&fl(dl,l)||(dl=l,l=Oc(Xu,"onSelect"),0<l.length&&(n=new bs("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Xr)))}function fr(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Zr={animationend:fr("Animation","AnimationEnd"),animationiteration:fr("Animation","AnimationIteration"),animationstart:fr("Animation","AnimationStart"),transitionrun:fr("Transition","TransitionRun"),transitionstart:fr("Transition","TransitionStart"),transitioncancel:fr("Transition","TransitionCancel"),transitionend:fr("Transition","TransitionEnd")},Ju={},jm={};kn&&(jm=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function dr(e){if(Ju[e])return Ju[e];if(!Zr[e])return e;var n=Zr[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in jm)return Ju[e]=n[a];return e}var Sm=dr("animationend"),Am=dr("animationiteration"),Cm=dr("animationstart"),vb=dr("transitionrun"),bb=dr("transitionstart"),_b=dr("transitioncancel"),Rm=dr("transitionend"),Dm=new Map,Wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wu.push("scrollEnd");function ns(e,n){Dm.set(e,n),gs(n,[e])}var Qo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Un=[],Jr=0,eh=0;function Ko(){for(var e=Jr,n=eh=Jr=0;n<e;){var a=Un[n];Un[n++]=null;var l=Un[n];Un[n++]=null;var f=Un[n];Un[n++]=null;var d=Un[n];if(Un[n++]=null,l!==null&&f!==null){var y=l.pending;y===null?f.next=f:(f.next=y.next,y.next=f),l.pending=f}d!==0&&Im(a,f,d)}}function Xo(e,n,a,l){Un[Jr++]=e,Un[Jr++]=n,Un[Jr++]=a,Un[Jr++]=l,eh|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function th(e,n,a,l){return Xo(e,n,a,l),Zo(e)}function mr(e,n){return Xo(e,null,null,n),Zo(e)}function Im(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&n!==null&&(f=31-Tt(a),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[n]:l.push(n),n.lane=a|536870912),d):null}function Zo(e){if(50<Ol)throw Ol=0,hf=null,Error(i(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Wr={};function Eb(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(e,n,a,l){return new Eb(e,n,a,l)}function nh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ls(e,n){var a=e.alternate;return a===null?(a=Tn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Mm(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Jo(e,n,a,l,f,d){var y=0;if(l=e,typeof e=="function")nh(e)&&(y=1);else if(typeof e=="string")y=S_(e,a,O.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case S:return e=Tn(31,a,n,f),e.elementType=S,e.lanes=d,e;case ie:return gr(a.children,f,d,n);case X:y=8,f|=24;break;case ye:return e=Tn(12,a,n,f|2),e.elementType=ye,e.lanes=d,e;case De:return e=Tn(13,a,n,f),e.elementType=De,e.lanes=d,e;case we:return e=Tn(19,a,n,f),e.elementType=we,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case de:y=10;break e;case pe:y=9;break e;case be:y=11;break e;case R:y=14;break e;case w:y=16,l=null;break e}y=29,a=Error(i(130,e===null?"null":typeof e,"")),l=null}return n=Tn(y,a,n,f),n.elementType=e,n.type=l,n.lanes=d,n}function gr(e,n,a,l){return e=Tn(7,e,l,n),e.lanes=a,e}function sh(e,n,a){return e=Tn(6,e,null,n),e.lanes=a,e}function Vm(e){var n=Tn(18,null,null,0);return n.stateNode=e,n}function ah(e,n,a){return n=Tn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Om=new WeakMap;function Ln(e,n){if(typeof e=="object"&&e!==null){var a=Om.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Ee(n)},Om.set(e,n),n)}return{value:e,source:n,stack:Ee(n)}}var ei=[],ti=0,Wo=null,ml=0,Pn=[],Bn=0,ga=null,Ts=1,ws="";function Ps(e,n){ei[ti++]=ml,ei[ti++]=Wo,Wo=e,ml=n}function km(e,n,a){Pn[Bn++]=Ts,Pn[Bn++]=ws,Pn[Bn++]=ga,ga=e;var l=Ts;e=ws;var f=32-Tt(l)-1;l&=~(1<<f),a+=1;var d=32-Tt(n)+f;if(30<d){var y=f-f%5;d=(l&(1<<y)-1).toString(32),l>>=y,f-=y,Ts=1<<32-Tt(n)+f|a<<f|l,ws=d+e}else Ts=1<<d|a<<f|l,ws=e}function rh(e){e.return!==null&&(Ps(e,1),km(e,1,0))}function ih(e){for(;e===Wo;)Wo=ei[--ti],ei[ti]=null,ml=ei[--ti],ei[ti]=null;for(;e===ga;)ga=Pn[--Bn],Pn[Bn]=null,ws=Pn[--Bn],Pn[Bn]=null,Ts=Pn[--Bn],Pn[Bn]=null}function zm(e,n){Pn[Bn++]=Ts,Pn[Bn++]=ws,Pn[Bn++]=ga,Ts=n.id,ws=n.overflow,ga=e}var Xt=null,dt=null,Ye=!1,pa=null,qn=!1,lh=Error(i(519));function ya(e){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gl(Ln(n,e)),lh}function Um(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[Rt]=e,n[Gt]=l,a){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(a=0;a<zl.length;a++)Be(zl[a],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":Be("invalid",n),Io(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Be("invalid",n);break;case"textarea":Be("invalid",n),oa(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||ty(n.textContent,a)?(l.popover!=null&&(Be("beforetoggle",n),Be("toggle",n)),l.onScroll!=null&&Be("scroll",n),l.onScrollEnd!=null&&Be("scrollend",n),l.onClick!=null&&(n.onclick=Zn),n=!0):n=!1,n||ya(e,!0)}function Lm(e){for(Xt=e.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Xt=Xt.return}}function ni(e){if(e!==Xt)return!1;if(!Ye)return Lm(e),Ye=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||jf(e.type,e.memoizedProps)),a=!a),a&&dt&&ya(e),Lm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));dt=uy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));dt=uy(e)}else n===27?(n=dt,Da(e.type)?(e=Df,Df=null,dt=e):dt=n):dt=Xt?Gn(e.stateNode.nextSibling):null;return!0}function pr(){dt=Xt=null,Ye=!1}function oh(){var e=pa;return e!==null&&(gn===null?gn=e:gn.push.apply(gn,e),pa=null),e}function gl(e){pa===null?pa=[e]:pa.push(e)}var ch=A(null),yr=null,Bs=null;function xa(e,n,a){le(ch,n._currentValue),n._currentValue=a}function qs(e){e._currentValue=ch.current,Q(ch)}function uh(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function hh(e,n,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var y=f.child;d=d.firstContext;e:for(;d!==null;){var _=d;d=f;for(var D=0;D<n.length;D++)if(_.context===n[D]){d.lanes|=a,_=d.alternate,_!==null&&(_.lanes|=a),uh(d.return,a,e),l||(y=null);break e}d=_.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(i(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),uh(y,a,e),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===e){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function si(e,n,a,l){e=null;for(var f=n,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var _=f.type;Nn(f.pendingProps.value,y.value)||(e!==null?e.push(_):e=[_])}}else if(f===oe.current){if(y=f.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(ql):e=[ql])}f=f.return}e!==null&&hh(n,e,a,l),n.flags|=262144}function ec(e){for(e=e.firstContext;e!==null;){if(!Nn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function xr(e){yr=e,Bs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Zt(e){return Pm(yr,e)}function tc(e,n){return yr===null&&xr(e),Pm(e,n)}function Pm(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Bs===null){if(e===null)throw Error(i(308));Bs=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Bs=Bs.next=n;return a}var Nb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Tb=r.unstable_scheduleCallback,wb=r.unstable_NormalPriority,Mt={$$typeof:de,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fh(){return{controller:new Nb,data:new Map,refCount:0}}function pl(e){e.refCount--,e.refCount===0&&Tb(wb,function(){e.controller.abort()})}var yl=null,dh=0,ai=0,ri=null;function jb(e,n){if(yl===null){var a=yl=[];dh=0,ai=yf(),ri={status:"pending",value:void 0,then:function(l){a.push(l)}}}return dh++,n.then(Bm,Bm),n}function Bm(){if(--dh===0&&yl!==null){ri!==null&&(ri.status="fulfilled");var e=yl;yl=null,ai=0,ri=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Sb(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var f=0;f<a.length;f++)(0,a[f])(n)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var qm=q.S;q.S=function(e,n){wp=Bt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&jb(e,n),qm!==null&&qm(e,n)};var vr=A(null);function mh(){var e=vr.current;return e!==null?e:ct.pooledCache}function nc(e,n){n===null?le(vr,vr.current):le(vr,n.pool)}function Hm(){var e=mh();return e===null?null:{parent:Mt._currentValue,pool:e}}var ii=Error(i(460)),gh=Error(i(474)),sc=Error(i(542)),ac={then:function(){}};function Gm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Fm(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Zn,Zn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Ym(e),e;default:if(typeof n.status=="string")n.then(Zn,Zn);else{if(e=ct,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=l}},function(l){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Ym(e),e}throw _r=n,ii}}function br(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(_r=a,ii):a}}var _r=null;function $m(){if(_r===null)throw Error(i(459));var e=_r;return _r=null,e}function Ym(e){if(e===ii||e===sc)throw Error(i(483))}var li=null,xl=0;function rc(e){var n=xl;return xl+=1,li===null&&(li=[]),Fm(li,e,n)}function vl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function ic(e,n){throw n.$$typeof===I?Error(i(525)):(e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Qm(e){function n(z,k){if(e){var L=z.deletions;L===null?(z.deletions=[k],z.flags|=16):L.push(k)}}function a(z,k){if(!e)return null;for(;k!==null;)n(z,k),k=k.sibling;return null}function l(z){for(var k=new Map;z!==null;)z.key!==null?k.set(z.key,z):k.set(z.index,z),z=z.sibling;return k}function f(z,k){return z=Ls(z,k),z.index=0,z.sibling=null,z}function d(z,k,L){return z.index=L,e?(L=z.alternate,L!==null?(L=L.index,L<k?(z.flags|=67108866,k):L):(z.flags|=67108866,k)):(z.flags|=1048576,k)}function y(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function _(z,k,L,J){return k===null||k.tag!==6?(k=sh(L,z.mode,J),k.return=z,k):(k=f(k,L),k.return=z,k)}function D(z,k,L,J){var Ne=L.type;return Ne===ie?K(z,k,L.props.children,J,L.key):k!==null&&(k.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===w&&br(Ne)===k.type)?(k=f(k,L.props),vl(k,L),k.return=z,k):(k=Jo(L.type,L.key,L.props,null,z.mode,J),vl(k,L),k.return=z,k)}function P(z,k,L,J){return k===null||k.tag!==4||k.stateNode.containerInfo!==L.containerInfo||k.stateNode.implementation!==L.implementation?(k=ah(L,z.mode,J),k.return=z,k):(k=f(k,L.children||[]),k.return=z,k)}function K(z,k,L,J,Ne){return k===null||k.tag!==7?(k=gr(L,z.mode,J,Ne),k.return=z,k):(k=f(k,L),k.return=z,k)}function ee(z,k,L){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=sh(""+k,z.mode,L),k.return=z,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case G:return L=Jo(k.type,k.key,k.props,null,z.mode,L),vl(L,k),L.return=z,L;case te:return k=ah(k,z.mode,L),k.return=z,k;case w:return k=br(k),ee(z,k,L)}if(Oe(k)||V(k))return k=gr(k,z.mode,L,null),k.return=z,k;if(typeof k.then=="function")return ee(z,rc(k),L);if(k.$$typeof===de)return ee(z,tc(z,k),L);ic(z,k)}return null}function B(z,k,L,J){var Ne=k!==null?k.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return Ne!==null?null:_(z,k,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case G:return L.key===Ne?D(z,k,L,J):null;case te:return L.key===Ne?P(z,k,L,J):null;case w:return L=br(L),B(z,k,L,J)}if(Oe(L)||V(L))return Ne!==null?null:K(z,k,L,J,null);if(typeof L.then=="function")return B(z,k,rc(L),J);if(L.$$typeof===de)return B(z,k,tc(z,L),J);ic(z,L)}return null}function Y(z,k,L,J,Ne){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(L)||null,_(k,z,""+J,Ne);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case G:return z=z.get(J.key===null?L:J.key)||null,D(k,z,J,Ne);case te:return z=z.get(J.key===null?L:J.key)||null,P(k,z,J,Ne);case w:return J=br(J),Y(z,k,L,J,Ne)}if(Oe(J)||V(J))return z=z.get(L)||null,K(k,z,J,Ne,null);if(typeof J.then=="function")return Y(z,k,L,rc(J),Ne);if(J.$$typeof===de)return Y(z,k,L,tc(k,J),Ne);ic(k,J)}return null}function xe(z,k,L,J){for(var Ne=null,Ze=null,_e=k,Ue=k=0,Ge=null;_e!==null&&Ue<L.length;Ue++){_e.index>Ue?(Ge=_e,_e=null):Ge=_e.sibling;var Je=B(z,_e,L[Ue],J);if(Je===null){_e===null&&(_e=Ge);break}e&&_e&&Je.alternate===null&&n(z,_e),k=d(Je,k,Ue),Ze===null?Ne=Je:Ze.sibling=Je,Ze=Je,_e=Ge}if(Ue===L.length)return a(z,_e),Ye&&Ps(z,Ue),Ne;if(_e===null){for(;Ue<L.length;Ue++)_e=ee(z,L[Ue],J),_e!==null&&(k=d(_e,k,Ue),Ze===null?Ne=_e:Ze.sibling=_e,Ze=_e);return Ye&&Ps(z,Ue),Ne}for(_e=l(_e);Ue<L.length;Ue++)Ge=Y(_e,z,Ue,L[Ue],J),Ge!==null&&(e&&Ge.alternate!==null&&_e.delete(Ge.key===null?Ue:Ge.key),k=d(Ge,k,Ue),Ze===null?Ne=Ge:Ze.sibling=Ge,Ze=Ge);return e&&_e.forEach(function(ka){return n(z,ka)}),Ye&&Ps(z,Ue),Ne}function Se(z,k,L,J){if(L==null)throw Error(i(151));for(var Ne=null,Ze=null,_e=k,Ue=k=0,Ge=null,Je=L.next();_e!==null&&!Je.done;Ue++,Je=L.next()){_e.index>Ue?(Ge=_e,_e=null):Ge=_e.sibling;var ka=B(z,_e,Je.value,J);if(ka===null){_e===null&&(_e=Ge);break}e&&_e&&ka.alternate===null&&n(z,_e),k=d(ka,k,Ue),Ze===null?Ne=ka:Ze.sibling=ka,Ze=ka,_e=Ge}if(Je.done)return a(z,_e),Ye&&Ps(z,Ue),Ne;if(_e===null){for(;!Je.done;Ue++,Je=L.next())Je=ee(z,Je.value,J),Je!==null&&(k=d(Je,k,Ue),Ze===null?Ne=Je:Ze.sibling=Je,Ze=Je);return Ye&&Ps(z,Ue),Ne}for(_e=l(_e);!Je.done;Ue++,Je=L.next())Je=Y(_e,z,Ue,Je.value,J),Je!==null&&(e&&Je.alternate!==null&&_e.delete(Je.key===null?Ue:Je.key),k=d(Je,k,Ue),Ze===null?Ne=Je:Ze.sibling=Je,Ze=Je);return e&&_e.forEach(function(U_){return n(z,U_)}),Ye&&Ps(z,Ue),Ne}function ot(z,k,L,J){if(typeof L=="object"&&L!==null&&L.type===ie&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case G:e:{for(var Ne=L.key;k!==null;){if(k.key===Ne){if(Ne=L.type,Ne===ie){if(k.tag===7){a(z,k.sibling),J=f(k,L.props.children),J.return=z,z=J;break e}}else if(k.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===w&&br(Ne)===k.type){a(z,k.sibling),J=f(k,L.props),vl(J,L),J.return=z,z=J;break e}a(z,k);break}else n(z,k);k=k.sibling}L.type===ie?(J=gr(L.props.children,z.mode,J,L.key),J.return=z,z=J):(J=Jo(L.type,L.key,L.props,null,z.mode,J),vl(J,L),J.return=z,z=J)}return y(z);case te:e:{for(Ne=L.key;k!==null;){if(k.key===Ne)if(k.tag===4&&k.stateNode.containerInfo===L.containerInfo&&k.stateNode.implementation===L.implementation){a(z,k.sibling),J=f(k,L.children||[]),J.return=z,z=J;break e}else{a(z,k);break}else n(z,k);k=k.sibling}J=ah(L,z.mode,J),J.return=z,z=J}return y(z);case w:return L=br(L),ot(z,k,L,J)}if(Oe(L))return xe(z,k,L,J);if(V(L)){if(Ne=V(L),typeof Ne!="function")throw Error(i(150));return L=Ne.call(L),Se(z,k,L,J)}if(typeof L.then=="function")return ot(z,k,rc(L),J);if(L.$$typeof===de)return ot(z,k,tc(z,L),J);ic(z,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,k!==null&&k.tag===6?(a(z,k.sibling),J=f(k,L),J.return=z,z=J):(a(z,k),J=sh(L,z.mode,J),J.return=z,z=J),y(z)):a(z,k)}return function(z,k,L,J){try{xl=0;var Ne=ot(z,k,L,J);return li=null,Ne}catch(_e){if(_e===ii||_e===sc)throw _e;var Ze=Tn(29,_e,null,z.mode);return Ze.lanes=J,Ze.return=z,Ze}finally{}}}var Er=Qm(!0),Km=Qm(!1),va=!1;function ph(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _a(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(et&2)!==0){var f=l.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n,n=Zo(e),Im(e,null,a),n}return Xo(e,l,n,a),Zo(e)}function bl(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Yi(e,a)}}function xh(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?f=d=n:d=d.next=n}else f=d=n;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var vh=!1;function _l(){if(vh){var e=ri;if(e!==null)throw e}}function El(e,n,a,l){vh=!1;var f=e.updateQueue;va=!1;var d=f.firstBaseUpdate,y=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var D=_,P=D.next;D.next=null,y===null?d=P:y.next=P,y=D;var K=e.alternate;K!==null&&(K=K.updateQueue,_=K.lastBaseUpdate,_!==y&&(_===null?K.firstBaseUpdate=P:_.next=P,K.lastBaseUpdate=D))}if(d!==null){var ee=f.baseState;y=0,K=P=D=null,_=d;do{var B=_.lane&-536870913,Y=B!==_.lane;if(Y?(He&B)===B:(l&B)===B){B!==0&&B===ai&&(vh=!0),K!==null&&(K=K.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var xe=e,Se=_;B=n;var ot=a;switch(Se.tag){case 1:if(xe=Se.payload,typeof xe=="function"){ee=xe.call(ot,ee,B);break e}ee=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Se.payload,B=typeof xe=="function"?xe.call(ot,ee,B):xe,B==null)break e;ee=C({},ee,B);break e;case 2:va=!0}}B=_.callback,B!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[B]:Y.push(B))}else Y={lane:B,tag:_.tag,payload:_.payload,callback:_.callback,next:null},K===null?(P=K=Y,D=ee):K=K.next=Y,y|=B;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;Y=_,_=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);K===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=P,f.lastBaseUpdate=K,d===null&&(f.shared.lanes=0),ja|=y,e.lanes=y,e.memoizedState=ee}}function Xm(e,n){if(typeof e!="function")throw Error(i(191,e));e.call(n)}function Zm(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Xm(a[e],n)}var oi=A(null),lc=A(0);function Jm(e,n){e=Zs,le(lc,e),le(oi,n),Zs=e|n.baseLanes}function bh(){le(lc,Zs),le(oi,oi.current)}function _h(){Zs=lc.current,Q(oi),Q(lc)}var wn=A(null),Hn=null;function Ea(e){var n=e.alternate;le(jt,jt.current&1),le(wn,e),Hn===null&&(n===null||oi.current!==null||n.memoizedState!==null)&&(Hn=e)}function Eh(e){le(jt,jt.current),le(wn,e),Hn===null&&(Hn=e)}function Wm(e){e.tag===22?(le(jt,jt.current),le(wn,e),Hn===null&&(Hn=e)):Na()}function Na(){le(jt,jt.current),le(wn,wn.current)}function jn(e){Q(wn),Hn===e&&(Hn=null),Q(jt)}var jt=A(0);function oc(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Cf(a)||Rf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Hs=0,ze=null,it=null,Vt=null,cc=!1,ci=!1,Nr=!1,uc=0,Nl=0,ui=null,Ab=0;function vt(){throw Error(i(321))}function Nh(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Nn(e[a],n[a]))return!1;return!0}function Th(e,n,a,l,f,d){return Hs=d,ze=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,q.H=e===null||e.memoizedState===null?kg:Lh,Nr=!1,d=a(l,f),Nr=!1,ci&&(d=tg(n,a,l,f)),eg(e),d}function eg(e){q.H=jl;var n=it!==null&&it.next!==null;if(Hs=0,Vt=it=ze=null,cc=!1,Nl=0,ui=null,n)throw Error(i(300));e===null||Ot||(e=e.dependencies,e!==null&&ec(e)&&(Ot=!0))}function tg(e,n,a,l){ze=e;var f=0;do{if(ci&&(ui=null),Nl=0,ci=!1,25<=f)throw Error(i(301));if(f+=1,Vt=it=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}q.H=zg,d=n(a,l)}while(ci);return d}function Cb(){var e=q.H,n=e.useState()[0];return n=typeof n.then=="function"?Tl(n):n,e=e.useState()[0],(it!==null?it.memoizedState:null)!==e&&(ze.flags|=1024),n}function wh(){var e=uc!==0;return uc=0,e}function jh(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Sh(e){if(cc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}cc=!1}Hs=0,Vt=it=ze=null,ci=!1,Nl=uc=0,ui=null}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ze.memoizedState=Vt=e:Vt=Vt.next=e,Vt}function St(){if(it===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var n=Vt===null?ze.memoizedState:Vt.next;if(n!==null)Vt=n,it=e;else{if(e===null)throw ze.alternate===null?Error(i(467)):Error(i(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Vt===null?ze.memoizedState=Vt=e:Vt=Vt.next=e}return Vt}function hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(e){var n=Nl;return Nl+=1,ui===null&&(ui=[]),e=Fm(ui,e,n),n=ze,(Vt===null?n.memoizedState:Vt.next)===null&&(n=n.alternate,q.H=n===null||n.memoizedState===null?kg:Lh),e}function fc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Tl(e);if(e.$$typeof===de)return Zt(e)}throw Error(i(438,String(e)))}function Ah(e){var n=null,a=ze.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=hc(),ze.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=M;return n.index++,a}function Gs(e,n){return typeof n=="function"?n(e):n}function dc(e){var n=St();return Ch(n,it,e)}function Ch(e,n,a){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var y=f.next;f.next=d.next,d.next=y}n.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{n=f.next;var _=y=null,D=null,P=n,K=!1;do{var ee=P.lane&-536870913;if(ee!==P.lane?(He&ee)===ee:(Hs&ee)===ee){var B=P.revertLane;if(B===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),ee===ai&&(K=!0);else if((Hs&B)===B){P=P.next,B===ai&&(K=!0);continue}else ee={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},D===null?(_=D=ee,y=d):D=D.next=ee,ze.lanes|=B,ja|=B;ee=P.action,Nr&&a(d,ee),d=P.hasEagerState?P.eagerState:a(d,ee)}else B={lane:ee,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},D===null?(_=D=B,y=d):D=D.next=B,ze.lanes|=ee,ja|=ee;P=P.next}while(P!==null&&P!==n);if(D===null?y=d:D.next=_,!Nn(d,e.memoizedState)&&(Ot=!0,K&&(a=ri,a!==null)))throw a;e.memoizedState=d,e.baseState=y,e.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Rh(e){var n=St(),a=n.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,d=n.memoizedState;if(f!==null){a.pending=null;var y=f=f.next;do d=e(d,y.action),y=y.next;while(y!==f);Nn(d,n.memoizedState)||(Ot=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,l]}function ng(e,n,a){var l=ze,f=St(),d=Ye;if(d){if(a===void 0)throw Error(i(407));a=a()}else a=n();var y=!Nn((it||f).memoizedState,a);if(y&&(f.memoizedState=a,Ot=!0),f=f.queue,Mh(rg.bind(null,l,f,e),[e]),f.getSnapshot!==n||y||Vt!==null&&Vt.memoizedState.tag&1){if(l.flags|=2048,hi(9,{destroy:void 0},ag.bind(null,l,f,a,n),null),ct===null)throw Error(i(349));d||(Hs&127)!==0||sg(l,n,a)}return a}function sg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=ze.updateQueue,n===null?(n=hc(),ze.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function ag(e,n,a,l){n.value=a,n.getSnapshot=l,ig(n)&&lg(e)}function rg(e,n,a){return a(function(){ig(n)&&lg(e)})}function ig(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Nn(e,a)}catch{return!0}}function lg(e){var n=mr(e,2);n!==null&&pn(n,e,2)}function Dh(e){var n=cn();if(typeof e=="function"){var a=e;if(e=a(),Nr){Mn(!0);try{a()}finally{Mn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:e},n}function og(e,n,a,l){return e.baseState=a,Ch(e,it,typeof l=="function"?l:Gs)}function Rb(e,n,a,l,f){if(pc(e))throw Error(i(485));if(e=n.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};q.T!==null?a(!0):d.isTransition=!1,l(d),a=n.pending,a===null?(d.next=n.pending=d,cg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function cg(e,n){var a=n.action,l=n.payload,f=e.state;if(n.isTransition){var d=q.T,y={};q.T=y;try{var _=a(f,l),D=q.S;D!==null&&D(y,_),ug(e,n,_)}catch(P){Ih(e,n,P)}finally{d!==null&&y.types!==null&&(d.types=y.types),q.T=d}}else try{d=a(f,l),ug(e,n,d)}catch(P){Ih(e,n,P)}}function ug(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){hg(e,n,l)},function(l){return Ih(e,n,l)}):hg(e,n,a)}function hg(e,n,a){n.status="fulfilled",n.value=a,fg(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,cg(e,a)))}function Ih(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,fg(n),n=n.next;while(n!==l)}e.action=null}function fg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function dg(e,n){return n}function mg(e,n){if(Ye){var a=ct.formState;if(a!==null){e:{var l=ze;if(Ye){if(dt){t:{for(var f=dt,d=qn;f.nodeType!==8;){if(!d){f=null;break t}if(f=Gn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){dt=Gn(f.nextSibling),l=f.data==="F!";break e}}ya(l)}l=!1}l&&(n=a[0])}}return a=cn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dg,lastRenderedState:n},a.queue=l,a=Mg.bind(null,ze,l),l.dispatch=a,l=Dh(!1),d=Uh.bind(null,ze,!1,l.queue),l=cn(),f={state:n,dispatch:null,action:e,pending:null},l.queue=f,a=Rb.bind(null,ze,f,d,a),f.dispatch=a,l.memoizedState=e,[n,a,!1]}function gg(e){var n=St();return pg(n,it,e)}function pg(e,n,a){if(n=Ch(e,n,dg)[0],e=dc(Gs)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Tl(n)}catch(y){throw y===ii?sc:y}else l=n;n=St();var f=n.queue,d=f.dispatch;return a!==n.memoizedState&&(ze.flags|=2048,hi(9,{destroy:void 0},Db.bind(null,f,a),null)),[l,d,e]}function Db(e,n){e.action=n}function yg(e){var n=St(),a=it;if(a!==null)return pg(n,a,e);St(),n=n.memoizedState,a=St();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function hi(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=ze.updateQueue,n===null&&(n=hc(),ze.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function xg(){return St().memoizedState}function mc(e,n,a,l){var f=cn();ze.flags|=e,f.memoizedState=hi(1|n,{destroy:void 0},a,l===void 0?null:l)}function gc(e,n,a,l){var f=St();l=l===void 0?null:l;var d=f.memoizedState.inst;it!==null&&l!==null&&Nh(l,it.memoizedState.deps)?f.memoizedState=hi(n,d,a,l):(ze.flags|=e,f.memoizedState=hi(1|n,d,a,l))}function vg(e,n){mc(8390656,8,e,n)}function Mh(e,n){gc(2048,8,e,n)}function Ib(e){ze.flags|=4;var n=ze.updateQueue;if(n===null)n=hc(),ze.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function bg(e){var n=St().memoizedState;return Ib({ref:n,nextImpl:e}),function(){if((et&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function _g(e,n){return gc(4,2,e,n)}function Eg(e,n){return gc(4,4,e,n)}function Ng(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Tg(e,n,a){a=a!=null?a.concat([e]):null,gc(4,4,Ng.bind(null,n,e),a)}function Vh(){}function wg(e,n){var a=St();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Nh(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function jg(e,n){var a=St();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Nh(n,l[1]))return l[0];if(l=e(),Nr){Mn(!0);try{e()}finally{Mn(!1)}}return a.memoizedState=[l,n],l}function Oh(e,n,a){return a===void 0||(Hs&1073741824)!==0&&(He&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Sp(),ze.lanes|=e,ja|=e,a)}function Sg(e,n,a,l){return Nn(a,n)?a:oi.current!==null?(e=Oh(e,a,l),Nn(e,n)||(Ot=!0),e):(Hs&42)===0||(Hs&1073741824)!==0&&(He&261930)===0?(Ot=!0,e.memoizedState=a):(e=Sp(),ze.lanes|=e,ja|=e,n)}function Ag(e,n,a,l,f){var d=Z.p;Z.p=d!==0&&8>d?d:8;var y=q.T,_={};q.T=_,Uh(e,!1,n,a);try{var D=f(),P=q.S;if(P!==null&&P(_,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=Sb(D,l);wl(e,n,K,Cn(e))}else wl(e,n,l,Cn(e))}catch(ee){wl(e,n,{then:function(){},status:"rejected",reason:ee},Cn())}finally{Z.p=d,y!==null&&_.types!==null&&(y.types=_.types),q.T=y}}function Mb(){}function kh(e,n,a,l){if(e.tag!==5)throw Error(i(476));var f=Cg(e).queue;Ag(e,f,n,he,a===null?Mb:function(){return Rg(e),a(l)})}function Cg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:he},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Rg(e){var n=Cg(e);n.next===null&&(n=e.alternate.memoizedState),wl(e,n.next.queue,{},Cn())}function zh(){return Zt(ql)}function Dg(){return St().memoizedState}function Ig(){return St().memoizedState}function Vb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Cn();e=ba(a);var l=_a(n,e,a);l!==null&&(pn(l,n,a),bl(l,n,a)),n={cache:fh()},e.payload=n;return}n=n.return}}function Ob(e,n,a){var l=Cn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},pc(e)?Vg(n,a):(a=th(e,n,a,l),a!==null&&(pn(a,e,l),Og(a,n,l)))}function Mg(e,n,a){var l=Cn();wl(e,n,a,l)}function wl(e,n,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(pc(e))Vg(n,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var y=n.lastRenderedState,_=d(y,a);if(f.hasEagerState=!0,f.eagerState=_,Nn(_,y))return Xo(e,n,f,0),ct===null&&Ko(),!1}catch{}finally{}if(a=th(e,n,f,l),a!==null)return pn(a,e,l),Og(a,n,l),!0}return!1}function Uh(e,n,a,l){if(l={lane:2,revertLane:yf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},pc(e)){if(n)throw Error(i(479))}else n=th(e,a,l,2),n!==null&&pn(n,e,2)}function pc(e){var n=e.alternate;return e===ze||n!==null&&n===ze}function Vg(e,n){ci=cc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Og(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Yi(e,a)}}var jl={readContext:Zt,use:fc,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};jl.useEffectEvent=vt;var kg={readContext:Zt,use:fc,useCallback:function(e,n){return cn().memoizedState=[e,n===void 0?null:n],e},useContext:Zt,useEffect:vg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,mc(4194308,4,Ng.bind(null,n,e),a)},useLayoutEffect:function(e,n){return mc(4194308,4,e,n)},useInsertionEffect:function(e,n){mc(4,2,e,n)},useMemo:function(e,n){var a=cn();n=n===void 0?null:n;var l=e();if(Nr){Mn(!0);try{e()}finally{Mn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=cn();if(a!==void 0){var f=a(n);if(Nr){Mn(!0);try{a(n)}finally{Mn(!1)}}}else f=n;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=Ob.bind(null,ze,e),[l.memoizedState,e]},useRef:function(e){var n=cn();return e={current:e},n.memoizedState=e},useState:function(e){e=Dh(e);var n=e.queue,a=Mg.bind(null,ze,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Vh,useDeferredValue:function(e,n){var a=cn();return Oh(a,e,n)},useTransition:function(){var e=Dh(!1);return e=Ag.bind(null,ze,e.queue,!0,!1),cn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=ze,f=cn();if(Ye){if(a===void 0)throw Error(i(407));a=a()}else{if(a=n(),ct===null)throw Error(i(349));(He&127)!==0||sg(l,n,a)}f.memoizedState=a;var d={value:a,getSnapshot:n};return f.queue=d,vg(rg.bind(null,l,d,e),[e]),l.flags|=2048,hi(9,{destroy:void 0},ag.bind(null,l,d,a,n),null),a},useId:function(){var e=cn(),n=ct.identifierPrefix;if(Ye){var a=ws,l=Ts;a=(l&~(1<<32-Tt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=uc++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Ab++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:zh,useFormState:mg,useActionState:mg,useOptimistic:function(e){var n=cn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Uh.bind(null,ze,!0,a),a.dispatch=n,[e,n]},useMemoCache:Ah,useCacheRefresh:function(){return cn().memoizedState=Vb.bind(null,ze)},useEffectEvent:function(e){var n=cn(),a={impl:e};return n.memoizedState=a,function(){if((et&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Lh={readContext:Zt,use:fc,useCallback:wg,useContext:Zt,useEffect:Mh,useImperativeHandle:Tg,useInsertionEffect:_g,useLayoutEffect:Eg,useMemo:jg,useReducer:dc,useRef:xg,useState:function(){return dc(Gs)},useDebugValue:Vh,useDeferredValue:function(e,n){var a=St();return Sg(a,it.memoizedState,e,n)},useTransition:function(){var e=dc(Gs)[0],n=St().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:ng,useId:Dg,useHostTransitionStatus:zh,useFormState:gg,useActionState:gg,useOptimistic:function(e,n){var a=St();return og(a,it,e,n)},useMemoCache:Ah,useCacheRefresh:Ig};Lh.useEffectEvent=bg;var zg={readContext:Zt,use:fc,useCallback:wg,useContext:Zt,useEffect:Mh,useImperativeHandle:Tg,useInsertionEffect:_g,useLayoutEffect:Eg,useMemo:jg,useReducer:Rh,useRef:xg,useState:function(){return Rh(Gs)},useDebugValue:Vh,useDeferredValue:function(e,n){var a=St();return it===null?Oh(a,e,n):Sg(a,it.memoizedState,e,n)},useTransition:function(){var e=Rh(Gs)[0],n=St().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:ng,useId:Dg,useHostTransitionStatus:zh,useFormState:yg,useActionState:yg,useOptimistic:function(e,n){var a=St();return it!==null?og(a,it,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ah,useCacheRefresh:Ig};zg.useEffectEvent=bg;function Ph(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:C({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Bh={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=Cn(),f=ba(l);f.payload=n,a!=null&&(f.callback=a),n=_a(e,f,l),n!==null&&(pn(n,e,l),bl(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=Cn(),f=ba(l);f.tag=1,f.payload=n,a!=null&&(f.callback=a),n=_a(e,f,l),n!==null&&(pn(n,e,l),bl(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Cn(),l=ba(a);l.tag=2,n!=null&&(l.callback=n),n=_a(e,l,a),n!==null&&(pn(n,e,a),bl(n,e,a))}};function Ug(e,n,a,l,f,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,y):n.prototype&&n.prototype.isPureReactComponent?!fl(a,l)||!fl(f,d):!0}function Lg(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Bh.enqueueReplaceState(n,n.state,null)}function Tr(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=C({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function Pg(e){Qo(e)}function Bg(e){console.error(e)}function qg(e){Qo(e)}function yc(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Hg(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qh(e,n,a){return a=ba(a),a.tag=3,a.payload={element:null},a.callback=function(){yc(e,n)},a}function Gg(e){return e=ba(e),e.tag=3,e}function Fg(e,n,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){Hg(n,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Hg(n,a,l),typeof f!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function kb(e,n,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&si(n,a,f,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?Cc():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===ac?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),mf(e,l,f)),!1;case 22:return a.flags|=65536,l===ac?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),mf(e,l,f)),!1}throw Error(i(435,a.tag))}return mf(e,l,f),Cc(),!1}if(Ye)return n=wn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,l!==lh&&(e=Error(i(422),{cause:l}),gl(Ln(e,a)))):(l!==lh&&(n=Error(i(423),{cause:l}),gl(Ln(n,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Ln(l,a),f=qh(e.stateNode,l,f),xh(e,f),bt!==4&&(bt=2)),!1;var d=Error(i(520),{cause:l});if(d=Ln(d,a),Vl===null?Vl=[d]:Vl.push(d),bt!==4&&(bt=2),n===null)return!0;l=Ln(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=qh(a.stateNode,l,e),xh(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Sa===null||!Sa.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Gg(f),Fg(f,e,a,l),xh(a,f),!1}a=a.return}while(a!==null);return!1}var Hh=Error(i(461)),Ot=!1;function Jt(e,n,a,l){n.child=e===null?Km(n,null,a,l):Er(n,e.child,a,l)}function $g(e,n,a,l,f){a=a.render;var d=n.ref;if("ref"in l){var y={};for(var _ in l)_!=="ref"&&(y[_]=l[_])}else y=l;return xr(n),l=Th(e,n,a,y,d,f),_=wh(),e!==null&&!Ot?(jh(e,n,f),Fs(e,n,f)):(Ye&&_&&rh(n),n.flags|=1,Jt(e,n,l,f),n.child)}function Yg(e,n,a,l,f){if(e===null){var d=a.type;return typeof d=="function"&&!nh(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Qg(e,n,d,l,f)):(e=Jo(a.type,null,l,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!Zh(e,f)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(y,l)&&e.ref===n.ref)return Fs(e,n,f)}return n.flags|=1,e=Ls(d,l),e.ref=n.ref,e.return=n,n.child=e}function Qg(e,n,a,l,f){if(e!==null){var d=e.memoizedProps;if(fl(d,l)&&e.ref===n.ref)if(Ot=!1,n.pendingProps=l=d,Zh(e,f))(e.flags&131072)!==0&&(Ot=!0);else return n.lanes=e.lanes,Fs(e,n,f)}return Gh(e,n,a,l,f)}function Kg(e,n,a,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=n.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,n.child=null;return Xg(e,n,d,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&nc(n,d!==null?d.cachePool:null),d!==null?Jm(n,d):bh(),Wm(n);else return l=n.lanes=536870912,Xg(e,n,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(nc(n,d.cachePool),Jm(n,d),Na(),n.memoizedState=null):(e!==null&&nc(n,null),bh(),Na());return Jt(e,n,f,a),n.child}function Sl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Xg(e,n,a,l,f){var d=mh();return d=d===null?null:{parent:Mt._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},e!==null&&nc(n,null),bh(),Wm(n),e!==null&&si(e,n,l,!0),n.childLanes=f,null}function xc(e,n){return n=bc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Zg(e,n,a){return Er(n,e.child,null,a),e=xc(n,n.pendingProps),e.flags|=2,jn(n),n.memoizedState=null,e}function zb(e,n,a){var l=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ye){if(l.mode==="hidden")return e=xc(n,l),n.lanes=536870912,Sl(null,e);if(Eh(n),(e=dt)?(e=cy(e,qn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ga!==null?{id:Ts,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},a=Vm(e),a.return=n,n.child=a,Xt=n,dt=null)):e=null,e===null)throw ya(n);return n.lanes=536870912,null}return xc(n,l)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(Eh(n),f)if(n.flags&256)n.flags&=-257,n=Zg(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(i(558));else if(Ot||si(e,n,a,!1),f=(a&e.childLanes)!==0,Ot||f){if(l=ct,l!==null&&(y=Qi(l,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,mr(e,y),pn(l,e,y),Hh;Cc(),n=Zg(e,n,a)}else e=d.treeContext,dt=Gn(y.nextSibling),Xt=n,Ye=!0,pa=null,qn=!1,e!==null&&zm(n,e),n=xc(n,l),n.flags|=4096;return n}return e=Ls(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function vc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Gh(e,n,a,l,f){return xr(n),a=Th(e,n,a,l,void 0,f),l=wh(),e!==null&&!Ot?(jh(e,n,f),Fs(e,n,f)):(Ye&&l&&rh(n),n.flags|=1,Jt(e,n,a,f),n.child)}function Jg(e,n,a,l,f,d){return xr(n),n.updateQueue=null,a=tg(n,l,a,f),eg(e),l=wh(),e!==null&&!Ot?(jh(e,n,d),Fs(e,n,d)):(Ye&&l&&rh(n),n.flags|=1,Jt(e,n,a,d),n.child)}function Wg(e,n,a,l,f){if(xr(n),n.stateNode===null){var d=Wr,y=a.contextType;typeof y=="object"&&y!==null&&(d=Zt(y)),d=new a(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Bh,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},ph(n),y=a.contextType,d.context=typeof y=="object"&&y!==null?Zt(y):Wr,d.state=n.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(Ph(n,a,y,l),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&Bh.enqueueReplaceState(d,d.state,null),El(n,l,d,f),_l(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var _=n.memoizedProps,D=Tr(a,_);d.props=D;var P=d.context,K=a.contextType;y=Wr,typeof K=="object"&&K!==null&&(y=Zt(K));var ee=a.getDerivedStateFromProps;K=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_||P!==y)&&Lg(n,d,l,y),va=!1;var B=n.memoizedState;d.state=B,El(n,l,d,f),_l(),P=n.memoizedState,_||B!==P||va?(typeof ee=="function"&&(Ph(n,a,ee,l),P=n.memoizedState),(D=va||Ug(n,a,D,l,B,P,y))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=P),d.props=l,d.state=P,d.context=y,l=D):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,yh(e,n),y=n.memoizedProps,K=Tr(a,y),d.props=K,ee=n.pendingProps,B=d.context,P=a.contextType,D=Wr,typeof P=="object"&&P!==null&&(D=Zt(P)),_=a.getDerivedStateFromProps,(P=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==ee||B!==D)&&Lg(n,d,l,D),va=!1,B=n.memoizedState,d.state=B,El(n,l,d,f),_l();var Y=n.memoizedState;y!==ee||B!==Y||va||e!==null&&e.dependencies!==null&&ec(e.dependencies)?(typeof _=="function"&&(Ph(n,a,_,l),Y=n.memoizedState),(K=va||Ug(n,a,K,l,B,Y,D)||e!==null&&e.dependencies!==null&&ec(e.dependencies))?(P||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,D)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Y),d.props=l,d.state=Y,d.context=D,l=K):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,vc(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=Er(n,e.child,null,f),n.child=Er(n,null,a,f)):Jt(e,n,a,f),n.memoizedState=d.state,e=n.child):e=Fs(e,n,f),e}function ep(e,n,a,l){return pr(),n.flags|=256,Jt(e,n,a,l),n.child}var Fh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $h(e){return{baseLanes:e,cachePool:Hm()}}function Yh(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=An),e}function tp(e,n,a){var l=n.pendingProps,f=!1,d=(n.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(jt.current&2)!==0),y&&(f=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ye){if(f?Ea(n):Na(),(e=dt)?(e=cy(e,qn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ga!==null?{id:Ts,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},a=Vm(e),a.return=n,n.child=a,Xt=n,dt=null)):e=null,e===null)throw ya(n);return Rf(e)?n.lanes=32:n.lanes=536870912,null}var _=l.children;return l=l.fallback,f?(Na(),f=n.mode,_=bc({mode:"hidden",children:_},f),l=gr(l,f,a,null),_.return=n,l.return=n,_.sibling=l,n.child=_,l=n.child,l.memoizedState=$h(a),l.childLanes=Yh(e,y,a),n.memoizedState=Fh,Sl(null,l)):(Ea(n),Qh(n,_))}var D=e.memoizedState;if(D!==null&&(_=D.dehydrated,_!==null)){if(d)n.flags&256?(Ea(n),n.flags&=-257,n=Kh(e,n,a)):n.memoizedState!==null?(Na(),n.child=e.child,n.flags|=128,n=null):(Na(),_=l.fallback,f=n.mode,l=bc({mode:"visible",children:l.children},f),_=gr(_,f,a,null),_.flags|=2,l.return=n,_.return=n,l.sibling=_,n.child=l,Er(n,e.child,null,a),l=n.child,l.memoizedState=$h(a),l.childLanes=Yh(e,y,a),n.memoizedState=Fh,n=Sl(null,l));else if(Ea(n),Rf(_)){if(y=_.nextSibling&&_.nextSibling.dataset,y)var P=y.dgst;y=P,l=Error(i(419)),l.stack="",l.digest=y,gl({value:l,source:null,stack:null}),n=Kh(e,n,a)}else if(Ot||si(e,n,a,!1),y=(a&e.childLanes)!==0,Ot||y){if(y=ct,y!==null&&(l=Qi(y,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,mr(e,l),pn(y,e,l),Hh;Cf(_)||Cc(),n=Kh(e,n,a)}else Cf(_)?(n.flags|=192,n.child=e.child,n=null):(e=D.treeContext,dt=Gn(_.nextSibling),Xt=n,Ye=!0,pa=null,qn=!1,e!==null&&zm(n,e),n=Qh(n,l.children),n.flags|=4096);return n}return f?(Na(),_=l.fallback,f=n.mode,D=e.child,P=D.sibling,l=Ls(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,P!==null?_=Ls(P,_):(_=gr(_,f,a,null),_.flags|=2),_.return=n,l.return=n,l.sibling=_,n.child=l,Sl(null,l),l=n.child,_=e.child.memoizedState,_===null?_=$h(a):(f=_.cachePool,f!==null?(D=Mt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=Hm(),_={baseLanes:_.baseLanes|a,cachePool:f}),l.memoizedState=_,l.childLanes=Yh(e,y,a),n.memoizedState=Fh,Sl(e.child,l)):(Ea(n),a=e.child,e=a.sibling,a=Ls(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=a,n.memoizedState=null,a)}function Qh(e,n){return n=bc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function bc(e,n){return e=Tn(22,e,null,n),e.lanes=0,e}function Kh(e,n,a){return Er(n,e.child,null,a),e=Qh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function np(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),uh(e.return,n,a)}function Xh(e,n,a,l,f,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=f,y.treeForkCount=d)}function sp(e,n,a){var l=n.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var y=jt.current,_=(y&2)!==0;if(_?(y=y&1|2,n.flags|=128):y&=1,le(jt,y),Jt(e,n,l,a),l=Ye?ml:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&np(e,a,n);else if(e.tag===19)np(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=n.child,f=null;a!==null;)e=a.alternate,e!==null&&oc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=n.child,n.child=null):(f=a.sibling,a.sibling=null),Xh(n,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&oc(e)===null){n.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Xh(n,!0,a,null,d,l);break;case"together":Xh(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Fs(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),ja|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(si(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,a=Ls(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Ls(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Zh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ec(e)))}function Ub(e,n,a){switch(n.tag){case 3:$(n,n.stateNode.containerInfo),xa(n,Mt,e.memoizedState.cache),pr();break;case 27:case 5:je(n);break;case 4:$(n,n.stateNode.containerInfo);break;case 10:xa(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Eh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Ea(n),n.flags|=128,null):(a&n.child.childLanes)!==0?tp(e,n,a):(Ea(n),e=Fs(e,n,a),e!==null?e.sibling:null);Ea(n);break;case 19:var f=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(si(e,n,a,!1),l=(a&n.childLanes)!==0),f){if(l)return sp(e,n,a);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(jt,jt.current),l)break;return null;case 22:return n.lanes=0,Kg(e,n,a,n.pendingProps);case 24:xa(n,Mt,e.memoizedState.cache)}return Fs(e,n,a)}function ap(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ot=!0;else{if(!Zh(e,a)&&(n.flags&128)===0)return Ot=!1,Ub(e,n,a);Ot=(e.flags&131072)!==0}else Ot=!1,Ye&&(n.flags&1048576)!==0&&km(n,ml,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=br(n.elementType),n.type=e,typeof e=="function")nh(e)?(l=Tr(e,l),n.tag=1,n=Wg(null,n,e,l,a)):(n.tag=0,n=Gh(null,n,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===be){n.tag=11,n=$g(null,n,e,l,a);break e}else if(f===R){n.tag=14,n=Yg(null,n,e,l,a);break e}}throw n=me(e)||e,Error(i(306,n,""))}}return n;case 0:return Gh(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,f=Tr(l,n.pendingProps),Wg(e,n,l,f,a);case 3:e:{if($(n,n.stateNode.containerInfo),e===null)throw Error(i(387));l=n.pendingProps;var d=n.memoizedState;f=d.element,yh(e,n),El(n,l,null,a);var y=n.memoizedState;if(l=y.cache,xa(n,Mt,l),l!==d.cache&&hh(n,[Mt],a,!0),_l(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=ep(e,n,l,a);break e}else if(l!==f){f=Ln(Error(i(424)),n),gl(f),n=ep(e,n,l,a);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(dt=Gn(e.firstChild),Xt=n,Ye=!0,pa=null,qn=!0,a=Km(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(pr(),l===f){n=Fs(e,n,a);break e}Jt(e,n,l,a)}n=n.child}return n;case 26:return vc(e,n),e===null?(a=gy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ye||(a=n.type,e=n.pendingProps,l=kc(ve.current).createElement(a),l[Rt]=n,l[Gt]=e,Wt(l,a,e),Dt(l),n.stateNode=l):n.memoizedState=gy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return je(n),e===null&&Ye&&(l=n.stateNode=fy(n.type,n.pendingProps,ve.current),Xt=n,qn=!0,f=dt,Da(n.type)?(Df=f,dt=Gn(l.firstChild)):dt=f),Jt(e,n,n.pendingProps.children,a),vc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ye&&((f=l=dt)&&(l=m_(l,n.type,n.pendingProps,qn),l!==null?(n.stateNode=l,Xt=n,dt=Gn(l.firstChild),qn=!1,f=!0):f=!1),f||ya(n)),je(n),f=n.type,d=n.pendingProps,y=e!==null?e.memoizedProps:null,l=d.children,jf(f,d)?l=null:y!==null&&jf(f,y)&&(n.flags|=32),n.memoizedState!==null&&(f=Th(e,n,Cb,null,null,a),ql._currentValue=f),vc(e,n),Jt(e,n,l,a),n.child;case 6:return e===null&&Ye&&((e=a=dt)&&(a=g_(a,n.pendingProps,qn),a!==null?(n.stateNode=a,Xt=n,dt=null,e=!0):e=!1),e||ya(n)),null;case 13:return tp(e,n,a);case 4:return $(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Er(n,null,l,a):Jt(e,n,l,a),n.child;case 11:return $g(e,n,n.type,n.pendingProps,a);case 7:return Jt(e,n,n.pendingProps,a),n.child;case 8:return Jt(e,n,n.pendingProps.children,a),n.child;case 12:return Jt(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,xa(n,n.type,l.value),Jt(e,n,l.children,a),n.child;case 9:return f=n.type._context,l=n.pendingProps.children,xr(n),f=Zt(f),l=l(f),n.flags|=1,Jt(e,n,l,a),n.child;case 14:return Yg(e,n,n.type,n.pendingProps,a);case 15:return Qg(e,n,n.type,n.pendingProps,a);case 19:return sp(e,n,a);case 31:return zb(e,n,a);case 22:return Kg(e,n,a,n.pendingProps);case 24:return xr(n),l=Zt(Mt),e===null?(f=mh(),f===null&&(f=ct,d=fh(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),n.memoizedState={parent:l,cache:f},ph(n),xa(n,Mt,f)):((e.lanes&a)!==0&&(yh(e,n),El(n,null,null,a),_l()),f=e.memoizedState,d=n.memoizedState,f.parent!==l?(f={parent:l,cache:l},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),xa(n,Mt,l)):(l=d.cache,xa(n,Mt,l),l!==f.cache&&hh(n,[Mt],a,!0))),Jt(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function $s(e){e.flags|=4}function Jh(e,n,a,l,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Dp())e.flags|=8192;else throw _r=ac,gh}else e.flags&=-16777217}function rp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!by(n))if(Dp())e.flags|=8192;else throw _r=ac,gh}function _c(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?So():536870912,e.lanes|=n,gi|=n)}function Al(e,n){if(!Ye)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function mt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function Lb(e,n,a){var l=n.pendingProps;switch(ih(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(n),null;case 1:return mt(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),qs(Mt),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ni(n)?$s(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,oh())),mt(n),null;case 26:var f=n.type,d=n.memoizedState;return e===null?($s(n),d!==null?(mt(n),rp(n,d)):(mt(n),Jh(n,f,null,l,a))):d?d!==e.memoizedState?($s(n),mt(n),rp(n,d)):(mt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&$s(n),mt(n),Jh(n,f,e,l,a)),null;case 27:if(qe(n),a=ve.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$s(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return mt(n),null}e=O.current,ni(n)?Um(n):(e=fy(f,l,a),n.stateNode=e,$s(n))}return mt(n),null;case 5:if(qe(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&$s(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return mt(n),null}if(d=O.current,ni(n))Um(n);else{var y=kc(ve.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(f,{is:l.is}):y.createElement(f)}}d[Rt]=n,d[Gt]=l;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=d;e:switch(Wt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&$s(n)}}return mt(n),Jh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&$s(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(i(166));if(e=ve.current,ni(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,f=Xt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Rt]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||ty(e.nodeValue,a)),e||ya(n,!0)}else e=kc(e).createTextNode(l),e[Rt]=n,n.stateNode=e}return mt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=ni(n),a!==null){if(e===null){if(!l)throw Error(i(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Rt]=n}else pr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;mt(n),e=!1}else a=oh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(jn(n),n):(jn(n),null);if((n.flags&128)!==0)throw Error(i(558))}return mt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=ni(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(i(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Rt]=n}else pr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;mt(n),f=!1}else f=oh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(jn(n),n):(jn(n),null)}return jn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),_c(n,n.updateQueue),mt(n),null);case 4:return ue(),e===null&&_f(n.stateNode.containerInfo),mt(n),null;case 10:return qs(n.type),mt(n),null;case 19:if(Q(jt),l=n.memoizedState,l===null)return mt(n),null;if(f=(n.flags&128)!==0,d=l.rendering,d===null)if(f)Al(l,!1);else{if(bt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=oc(e),d!==null){for(n.flags|=128,Al(l,!1),e=d.updateQueue,n.updateQueue=e,_c(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Mm(a,e),a=a.sibling;return le(jt,jt.current&1|2),Ye&&Ps(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Bt()>jc&&(n.flags|=128,f=!0,Al(l,!1),n.lanes=4194304)}else{if(!f)if(e=oc(d),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,_c(n,e),Al(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ye)return mt(n),null}else 2*Bt()-l.renderingStartTime>jc&&a!==536870912&&(n.flags|=128,f=!0,Al(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(e=l.last,e!==null?e.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Bt(),e.sibling=null,a=jt.current,le(jt,f?a&1|2:a&1),Ye&&Ps(n,l.treeForkCount),e):(mt(n),null);case 22:case 23:return jn(n),_h(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(mt(n),n.subtreeFlags&6&&(n.flags|=8192)):mt(n),a=n.updateQueue,a!==null&&_c(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&Q(vr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),qs(Mt),mt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function Pb(e,n){switch(ih(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return qs(Mt),ue(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return qe(n),null;case 31:if(n.memoizedState!==null){if(jn(n),n.alternate===null)throw Error(i(340));pr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(jn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));pr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Q(jt),null;case 4:return ue(),null;case 10:return qs(n.type),null;case 22:case 23:return jn(n),_h(),e!==null&&Q(vr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return qs(Mt),null;case 25:return null;default:return null}}function ip(e,n){switch(ih(n),n.tag){case 3:qs(Mt),ue();break;case 26:case 27:case 5:qe(n);break;case 4:ue();break;case 31:n.memoizedState!==null&&jn(n);break;case 13:jn(n);break;case 19:Q(jt);break;case 10:qs(n.type);break;case 22:case 23:jn(n),_h(),e!==null&&Q(vr);break;case 24:qs(Mt)}}function Cl(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var d=a.create,y=a.inst;l=d(),y.destroy=l}a=a.next}while(a!==f)}}catch(_){at(n,n.return,_)}}function Ta(e,n,a){try{var l=n.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var y=l.inst,_=y.destroy;if(_!==void 0){y.destroy=void 0,f=n;var D=a,P=_;try{P()}catch(K){at(f,D,K)}}}l=l.next}while(l!==d)}}catch(K){at(n,n.return,K)}}function lp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Zm(n,a)}catch(l){at(e,e.return,l)}}}function op(e,n,a){a.props=Tr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){at(e,n,l)}}function Rl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){at(e,n,f)}}function js(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){at(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){at(e,n,f)}else a.current=null}function cp(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){at(e,e.return,f)}}function Wh(e,n,a){try{var l=e.stateNode;o_(l,e.type,a,n),l[Gt]=n}catch(f){at(e,e.return,f)}}function up(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Da(e.type)||e.tag===4}function ef(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||up(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Da(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tf(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Zn));else if(l!==4&&(l===27&&Da(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(tf(e,n,a),e=e.sibling;e!==null;)tf(e,n,a),e=e.sibling}function Ec(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&Da(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ec(e,n,a),e=e.sibling;e!==null;)Ec(e,n,a),e=e.sibling}function hp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);Wt(n,l,a),n[Rt]=e,n[Gt]=a}catch(d){at(e,e.return,d)}}var Ys=!1,kt=!1,nf=!1,fp=typeof WeakSet=="function"?WeakSet:Set,$t=null;function Bb(e,n){if(e=e.containerInfo,Tf=Hc,e=Tm(e),Ku(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var y=0,_=-1,D=-1,P=0,K=0,ee=e,B=null;t:for(;;){for(var Y;ee!==a||f!==0&&ee.nodeType!==3||(_=y+f),ee!==d||l!==0&&ee.nodeType!==3||(D=y+l),ee.nodeType===3&&(y+=ee.nodeValue.length),(Y=ee.firstChild)!==null;)B=ee,ee=Y;for(;;){if(ee===e)break t;if(B===a&&++P===f&&(_=y),B===d&&++K===l&&(D=y),(Y=ee.nextSibling)!==null)break;ee=B,B=ee.parentNode}ee=Y}a=_===-1||D===-1?null:{start:_,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(wf={focusedElem:e,selectionRange:a},Hc=!1,$t=n;$t!==null;)if(n=$t,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,$t=e;else for(;$t!==null;){switch(n=$t,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var xe=Tr(a.type,f);e=l.getSnapshotBeforeUpdate(xe,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Se){at(a,a.return,Se)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Af(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Af(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=n.sibling,e!==null){e.return=n.return,$t=e;break}$t=n.return}}function dp(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ks(e,a),l&4&&Cl(5,a);break;case 1:if(Ks(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(y){at(a,a.return,y)}else{var f=Tr(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){at(a,a.return,y)}}l&64&&lp(a),l&512&&Rl(a,a.return);break;case 3:if(Ks(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Zm(e,n)}catch(y){at(a,a.return,y)}}break;case 27:n===null&&l&4&&hp(a);case 26:case 5:Ks(e,a),n===null&&l&4&&cp(a),l&512&&Rl(a,a.return);break;case 12:Ks(e,a);break;case 31:Ks(e,a),l&4&&pp(e,a);break;case 13:Ks(e,a),l&4&&yp(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Xb.bind(null,a),p_(e,a))));break;case 22:if(l=a.memoizedState!==null||Ys,!l){n=n!==null&&n.memoizedState!==null||kt,f=Ys;var d=kt;Ys=l,(kt=n)&&!d?Xs(e,a,(a.subtreeFlags&8772)!==0):Ks(e,a),Ys=f,kt=d}break;case 30:break;default:Ks(e,a)}}function mp(e){var n=e.alternate;n!==null&&(e.alternate=null,mp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Lr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var pt=null,fn=!1;function Qs(e,n,a){for(a=a.child;a!==null;)gp(e,n,a),a=a.sibling}function gp(e,n,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:kt||js(a,n),Qs(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||js(a,n);var l=pt,f=fn;Da(a.type)&&(pt=a.stateNode,fn=!1),Qs(e,n,a),Ll(a.stateNode),pt=l,fn=f;break;case 5:kt||js(a,n);case 6:if(l=pt,f=fn,pt=null,Qs(e,n,a),pt=l,fn=f,pt!==null)if(fn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(d){at(a,n,d)}else try{pt.removeChild(a.stateNode)}catch(d){at(a,n,d)}break;case 18:pt!==null&&(fn?(e=pt,ly(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ni(e)):ly(pt,a.stateNode));break;case 4:l=pt,f=fn,pt=a.stateNode.containerInfo,fn=!0,Qs(e,n,a),pt=l,fn=f;break;case 0:case 11:case 14:case 15:Ta(2,a,n),kt||Ta(4,a,n),Qs(e,n,a);break;case 1:kt||(js(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&op(a,n,l)),Qs(e,n,a);break;case 21:Qs(e,n,a);break;case 22:kt=(l=kt)||a.memoizedState!==null,Qs(e,n,a),kt=l;break;default:Qs(e,n,a)}}function pp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ni(e)}catch(a){at(n,n.return,a)}}}function yp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ni(e)}catch(a){at(n,n.return,a)}}function qb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new fp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new fp),n;default:throw Error(i(435,e.tag))}}function Nc(e,n){var a=qb(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var f=Zb.bind(null,e,l);l.then(f,f)}})}function dn(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=e,y=n,_=y;e:for(;_!==null;){switch(_.tag){case 27:if(Da(_.type)){pt=_.stateNode,fn=!1;break e}break;case 5:pt=_.stateNode,fn=!1;break e;case 3:case 4:pt=_.stateNode.containerInfo,fn=!0;break e}_=_.return}if(pt===null)throw Error(i(160));gp(d,y,f),pt=null,fn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)xp(n,e),n=n.sibling}var ss=null;function xp(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dn(n,e),mn(e),l&4&&(Ta(3,e,e.return),Cl(3,e),Ta(5,e,e.return));break;case 1:dn(n,e),mn(e),l&512&&(kt||a===null||js(a,a.return)),l&64&&Ys&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ss;if(dn(n,e),mn(e),l&512&&(kt||a===null||js(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[fs]||d[Rt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Wt(d,l,a),d[Rt]=e,Dt(d),l=d;break e;case"link":var y=xy("link","href",f).get(l+(a.href||""));if(y){for(var _=0;_<y.length;_++)if(d=y[_],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(_,1);break t}}d=f.createElement(l),Wt(d,l,a),f.head.appendChild(d);break;case"meta":if(y=xy("meta","content",f).get(l+(a.content||""))){for(_=0;_<y.length;_++)if(d=y[_],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(_,1);break t}}d=f.createElement(l),Wt(d,l,a),f.head.appendChild(d);break;default:throw Error(i(468,l))}d[Rt]=e,Dt(d),l=d}e.stateNode=l}else vy(f,e.type,e.stateNode);else e.stateNode=yy(f,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?vy(f,e.type,e.stateNode):yy(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Wh(e,e.memoizedProps,a.memoizedProps)}break;case 27:dn(n,e),mn(e),l&512&&(kt||a===null||js(a,a.return)),a!==null&&l&4&&Wh(e,e.memoizedProps,a.memoizedProps);break;case 5:if(dn(n,e),mn(e),l&512&&(kt||a===null||js(a,a.return)),e.flags&32){f=e.stateNode;try{hn(f,"")}catch(xe){at(e,e.return,xe)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,Wh(e,f,a!==null?a.memoizedProps:f)),l&1024&&(nf=!0);break;case 6:if(dn(n,e),mn(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(xe){at(e,e.return,xe)}}break;case 3:if(Lc=null,f=ss,ss=zc(n.containerInfo),dn(n,e),ss=f,mn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ni(n.containerInfo)}catch(xe){at(e,e.return,xe)}nf&&(nf=!1,vp(e));break;case 4:l=ss,ss=zc(e.stateNode.containerInfo),dn(n,e),mn(e),ss=l;break;case 12:dn(n,e),mn(e);break;case 31:dn(n,e),mn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Nc(e,l)));break;case 13:dn(n,e),mn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wc=Bt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Nc(e,l)));break;case 22:f=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,P=Ys,K=kt;if(Ys=P||f,kt=K||D,dn(n,e),kt=K,Ys=P,mn(e),l&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(a===null||D||Ys||kt||wr(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(d=D.stateNode,f)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{_=D.stateNode;var ee=D.memoizedProps.style,B=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;_.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(xe){at(D,D.return,xe)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(xe){at(D,D.return,xe)}}}else if(n.tag===18){if(a===null){D=n;try{var Y=D.stateNode;f?oy(Y,!0):oy(D.stateNode,!1)}catch(xe){at(D,D.return,xe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Nc(e,a))));break;case 19:dn(n,e),mn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Nc(e,l)));break;case 30:break;case 21:break;default:dn(n,e),mn(e)}}function mn(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(up(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,d=ef(e);Ec(e,d,f);break;case 5:var y=a.stateNode;a.flags&32&&(hn(y,""),a.flags&=-33);var _=ef(e);Ec(e,_,y);break;case 3:case 4:var D=a.stateNode.containerInfo,P=ef(e);tf(e,P,D);break;default:throw Error(i(161))}}catch(K){at(e,e.return,K)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function vp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;vp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ks(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)dp(e,n.alternate,n),n=n.sibling}function wr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ta(4,n,n.return),wr(n);break;case 1:js(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&op(n,n.return,a),wr(n);break;case 27:Ll(n.stateNode);case 26:case 5:js(n,n.return),wr(n);break;case 22:n.memoizedState===null&&wr(n);break;case 30:wr(n);break;default:wr(n)}e=e.sibling}}function Xs(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,f=e,d=n,y=d.flags;switch(d.tag){case 0:case 11:case 15:Xs(f,d,a),Cl(4,d);break;case 1:if(Xs(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(P){at(l,l.return,P)}if(l=d,f=l.updateQueue,f!==null){var _=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Xm(D[f],_)}catch(P){at(l,l.return,P)}}a&&y&64&&lp(d),Rl(d,d.return);break;case 27:hp(d);case 26:case 5:Xs(f,d,a),a&&l===null&&y&4&&cp(d),Rl(d,d.return);break;case 12:Xs(f,d,a);break;case 31:Xs(f,d,a),a&&y&4&&pp(f,d);break;case 13:Xs(f,d,a),a&&y&4&&yp(f,d);break;case 22:d.memoizedState===null&&Xs(f,d,a),Rl(d,d.return);break;case 30:break;default:Xs(f,d,a)}n=n.sibling}}function sf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&pl(a))}function af(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&pl(e))}function as(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)bp(e,n,a,l),n=n.sibling}function bp(e,n,a,l){var f=n.flags;switch(n.tag){case 0:case 11:case 15:as(e,n,a,l),f&2048&&Cl(9,n);break;case 1:as(e,n,a,l);break;case 3:as(e,n,a,l),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&pl(e)));break;case 12:if(f&2048){as(e,n,a,l),e=n.stateNode;try{var d=n.memoizedProps,y=d.id,_=d.onPostCommit;typeof _=="function"&&_(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){at(n,n.return,D)}}else as(e,n,a,l);break;case 31:as(e,n,a,l);break;case 13:as(e,n,a,l);break;case 23:break;case 22:d=n.stateNode,y=n.alternate,n.memoizedState!==null?d._visibility&2?as(e,n,a,l):Dl(e,n):d._visibility&2?as(e,n,a,l):(d._visibility|=2,fi(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),f&2048&&sf(y,n);break;case 24:as(e,n,a,l),f&2048&&af(n.alternate,n);break;default:as(e,n,a,l)}}function fi(e,n,a,l,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,y=n,_=a,D=l,P=y.flags;switch(y.tag){case 0:case 11:case 15:fi(d,y,_,D,f),Cl(8,y);break;case 23:break;case 22:var K=y.stateNode;y.memoizedState!==null?K._visibility&2?fi(d,y,_,D,f):Dl(d,y):(K._visibility|=2,fi(d,y,_,D,f)),f&&P&2048&&sf(y.alternate,y);break;case 24:fi(d,y,_,D,f),f&&P&2048&&af(y.alternate,y);break;default:fi(d,y,_,D,f)}n=n.sibling}}function Dl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,f=l.flags;switch(l.tag){case 22:Dl(a,l),f&2048&&sf(l.alternate,l);break;case 24:Dl(a,l),f&2048&&af(l.alternate,l);break;default:Dl(a,l)}n=n.sibling}}var Il=8192;function di(e,n,a){if(e.subtreeFlags&Il)for(e=e.child;e!==null;)_p(e,n,a),e=e.sibling}function _p(e,n,a){switch(e.tag){case 26:di(e,n,a),e.flags&Il&&e.memoizedState!==null&&A_(a,ss,e.memoizedState,e.memoizedProps);break;case 5:di(e,n,a);break;case 3:case 4:var l=ss;ss=zc(e.stateNode.containerInfo),di(e,n,a),ss=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Il,Il=16777216,di(e,n,a),Il=l):di(e,n,a));break;default:di(e,n,a)}}function Ep(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ml(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];$t=l,Tp(l,e)}Ep(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Np(e),e=e.sibling}function Np(e){switch(e.tag){case 0:case 11:case 15:Ml(e),e.flags&2048&&Ta(9,e,e.return);break;case 3:Ml(e);break;case 12:Ml(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Tc(e)):Ml(e);break;default:Ml(e)}}function Tc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];$t=l,Tp(l,e)}Ep(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ta(8,n,n.return),Tc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Tc(n));break;default:Tc(n)}e=e.sibling}}function Tp(e,n){for(;$t!==null;){var a=$t;switch(a.tag){case 0:case 11:case 15:Ta(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,$t=l;else e:for(a=e;$t!==null;){l=$t;var f=l.sibling,d=l.return;if(mp(l),l===a){$t=null;break e}if(f!==null){f.return=d,$t=f;break e}$t=d}}}var Hb={getCacheForType:function(e){var n=Zt(Mt),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Zt(Mt).controller.signal}},Gb=typeof WeakMap=="function"?WeakMap:Map,et=0,ct=null,Pe=null,He=0,st=0,Sn=null,wa=!1,mi=!1,rf=!1,Zs=0,bt=0,ja=0,jr=0,lf=0,An=0,gi=0,Vl=null,gn=null,of=!1,wc=0,wp=0,jc=1/0,Sc=null,Sa=null,qt=0,Aa=null,pi=null,Js=0,cf=0,uf=null,jp=null,Ol=0,hf=null;function Cn(){return(et&2)!==0&&He!==0?He&-He:q.T!==null?yf():Ao()}function Sp(){if(An===0)if((He&536870912)===0||Ye){var e=Wa;Wa<<=1,(Wa&3932160)===0&&(Wa=262144),An=e}else An=536870912;return e=wn.current,e!==null&&(e.flags|=32),An}function pn(e,n,a){(e===ct&&(st===2||st===9)||e.cancelPendingCommit!==null)&&(yi(e,0),Ca(e,He,An,!1)),er(e,a),((et&2)===0||e!==ct)&&(e===ct&&((et&2)===0&&(jr|=a),bt===4&&Ca(e,He,An,!1)),Ss(e))}function Ap(e,n,a){if((et&6)!==0)throw Error(i(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Qn(e,n),f=l?Yb(e,n):df(e,n,!0),d=l;do{if(f===0){mi&&!l&&Ca(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!Fb(a)){f=df(e,n,!1),d=!1;continue}if(f===2){if(d=n,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var _=e;f=Vl;var D=_.current.memoizedState.isDehydrated;if(D&&(yi(_,y).flags|=256),y=df(_,y,!1),y!==2){if(rf&&!D){_.errorRecoveryDisabledLanes|=d,jr|=d,f=4;break e}d=gn,gn=f,d!==null&&(gn===null?gn=d:gn.push.apply(gn,d))}f=y}if(d=!1,f!==2)continue}}if(f===1){yi(e,0),Ca(e,n,0,!0);break}e:{switch(l=e,d=f,d){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:Ca(l,n,An,!wa);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(f=wc+300-Bt(),10<f)){if(Ca(l,n,An,!wa),cs(l,0,!0)!==0)break e;Js=n,l.timeoutHandle=ry(Cp.bind(null,l,a,gn,Sc,of,n,An,jr,gi,wa,d,"Throttled",-0,0),f);break e}Cp(l,a,gn,Sc,of,n,An,jr,gi,wa,d,null,-0,0)}}break}while(!0);Ss(e)}function Cp(e,n,a,l,f,d,y,_,D,P,K,ee,B,Y){if(e.timeoutHandle=-1,ee=n.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},_p(n,d,ee);var xe=(d&62914560)===d?wc-Bt():(d&4194048)===d?wp-Bt():0;if(xe=C_(ee,xe),xe!==null){Js=d,e.cancelPendingCommit=xe(zp.bind(null,e,n,d,a,l,f,y,_,D,K,ee,null,B,Y)),Ca(e,d,y,!P);return}}zp(e,n,d,a,l,f,y,_,D)}function Fb(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Nn(d(),f))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ca(e,n,a,l){n&=~lf,n&=~jr,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var f=n;0<f;){var d=31-Tt(f),y=1<<d;l[d]=-1,f&=~y}a!==0&&tr(e,a,n)}function Ac(){return(et&6)===0?(kl(0),!1):!0}function ff(){if(Pe!==null){if(st===0)var e=Pe.return;else e=Pe,Bs=yr=null,Sh(e),li=null,xl=0,e=Pe;for(;e!==null;)ip(e.alternate,e),e=e.return;Pe=null}}function yi(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,h_(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Js=0,ff(),ct=e,Pe=a=Ls(e.current,null),He=n,st=0,Sn=null,wa=!1,mi=Qn(e,n),rf=!1,gi=An=lf=jr=ja=bt=0,gn=Vl=null,of=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var f=31-Tt(l),d=1<<f;n|=e[f],l&=~d}return Zs=n,Ko(),a}function Rp(e,n){ze=null,q.H=jl,n===ii||n===sc?(n=$m(),st=3):n===gh?(n=$m(),st=4):st=n===Hh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Sn=n,Pe===null&&(bt=1,yc(e,Ln(n,e.current)))}function Dp(){var e=wn.current;return e===null?!0:(He&4194048)===He?Hn===null:(He&62914560)===He||(He&536870912)!==0?e===Hn:!1}function Ip(){var e=q.H;return q.H=jl,e===null?jl:e}function Mp(){var e=q.A;return q.A=Hb,e}function Cc(){bt=4,wa||(He&4194048)!==He&&wn.current!==null||(mi=!0),(ja&134217727)===0&&(jr&134217727)===0||ct===null||Ca(ct,He,An,!1)}function df(e,n,a){var l=et;et|=2;var f=Ip(),d=Mp();(ct!==e||He!==n)&&(Sc=null,yi(e,n)),n=!1;var y=bt;e:do try{if(st!==0&&Pe!==null){var _=Pe,D=Sn;switch(st){case 8:ff(),y=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(n=!0);var P=st;if(st=0,Sn=null,xi(e,_,D,P),a&&mi){y=0;break e}break;default:P=st,st=0,Sn=null,xi(e,_,D,P)}}$b(),y=bt;break}catch(K){Rp(e,K)}while(!0);return n&&e.shellSuspendCounter++,Bs=yr=null,et=l,q.H=f,q.A=d,Pe===null&&(ct=null,He=0,Ko()),y}function $b(){for(;Pe!==null;)Vp(Pe)}function Yb(e,n){var a=et;et|=2;var l=Ip(),f=Mp();ct!==e||He!==n?(Sc=null,jc=Bt()+500,yi(e,n)):mi=Qn(e,n);e:do try{if(st!==0&&Pe!==null){n=Pe;var d=Sn;t:switch(st){case 1:st=0,Sn=null,xi(e,n,d,1);break;case 2:case 9:if(Gm(d)){st=0,Sn=null,Op(n);break}n=function(){st!==2&&st!==9||ct!==e||(st=7),Ss(e)},d.then(n,n);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Gm(d)?(st=0,Sn=null,Op(n)):(st=0,Sn=null,xi(e,n,d,7));break;case 5:var y=null;switch(Pe.tag){case 26:y=Pe.memoizedState;case 5:case 27:var _=Pe;if(y?by(y):_.stateNode.complete){st=0,Sn=null;var D=_.sibling;if(D!==null)Pe=D;else{var P=_.return;P!==null?(Pe=P,Rc(P)):Pe=null}break t}}st=0,Sn=null,xi(e,n,d,5);break;case 6:st=0,Sn=null,xi(e,n,d,6);break;case 8:ff(),bt=6;break e;default:throw Error(i(462))}}Qb();break}catch(K){Rp(e,K)}while(!0);return Bs=yr=null,q.H=l,q.A=f,et=a,Pe!==null?0:(ct=null,He=0,Ko(),bt)}function Qb(){for(;Pe!==null&&!Dn();)Vp(Pe)}function Vp(e){var n=ap(e.alternate,e,Zs);e.memoizedProps=e.pendingProps,n===null?Rc(e):Pe=n}function Op(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Jg(a,n,n.pendingProps,n.type,void 0,He);break;case 11:n=Jg(a,n,n.pendingProps,n.type.render,n.ref,He);break;case 5:Sh(n);default:ip(a,n),n=Pe=Mm(n,Zs),n=ap(a,n,Zs)}e.memoizedProps=e.pendingProps,n===null?Rc(e):Pe=n}function xi(e,n,a,l){Bs=yr=null,Sh(n),li=null,xl=0;var f=n.return;try{if(kb(e,f,n,a,He)){bt=1,yc(e,Ln(a,e.current)),Pe=null;return}}catch(d){if(f!==null)throw Pe=f,d;bt=1,yc(e,Ln(a,e.current)),Pe=null;return}n.flags&32768?(Ye||l===1?e=!0:mi||(He&536870912)!==0?e=!1:(wa=e=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),kp(n,e)):Rc(n)}function Rc(e){var n=e;do{if((n.flags&32768)!==0){kp(n,wa);return}e=n.return;var a=Lb(n.alternate,n,Zs);if(a!==null){Pe=a;return}if(n=n.sibling,n!==null){Pe=n;return}Pe=n=e}while(n!==null);bt===0&&(bt=5)}function kp(e,n){do{var a=Pb(e.alternate,e);if(a!==null){a.flags&=32767,Pe=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Pe=e;return}Pe=e=a}while(e!==null);bt=6,Pe=null}function zp(e,n,a,l,f,d,y,_,D){e.cancelPendingCommit=null;do Dc();while(qt!==0);if((et&6)!==0)throw Error(i(327));if(n!==null){if(n===e.current)throw Error(i(177));if(d=n.lanes|n.childLanes,d|=eh,Fu(e,a,d,y,_,D),e===ct&&(Pe=ct=null,He=0),pi=n,Aa=e,Js=a,cf=d,uf=f,jp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Jb(ra,function(){return qp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=q.T,q.T=null,f=Z.p,Z.p=2,y=et,et|=4;try{Bb(e,n,a)}finally{et=y,Z.p=f,q.T=l}}qt=1,Up(),Lp(),Pp()}}function Up(){if(qt===1){qt=0;var e=Aa,n=pi,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var l=Z.p;Z.p=2;var f=et;et|=4;try{xp(n,e);var d=wf,y=Tm(e.containerInfo),_=d.focusedElem,D=d.selectionRange;if(y!==_&&_&&_.ownerDocument&&Nm(_.ownerDocument.documentElement,_)){if(D!==null&&Ku(_)){var P=D.start,K=D.end;if(K===void 0&&(K=P),"selectionStart"in _)_.selectionStart=P,_.selectionEnd=Math.min(K,_.value.length);else{var ee=_.ownerDocument||document,B=ee&&ee.defaultView||window;if(B.getSelection){var Y=B.getSelection(),xe=_.textContent.length,Se=Math.min(D.start,xe),ot=D.end===void 0?Se:Math.min(D.end,xe);!Y.extend&&Se>ot&&(y=ot,ot=Se,Se=y);var z=Em(_,Se),k=Em(_,ot);if(z&&k&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==k.node||Y.focusOffset!==k.offset)){var L=ee.createRange();L.setStart(z.node,z.offset),Y.removeAllRanges(),Se>ot?(Y.addRange(L),Y.extend(k.node,k.offset)):(L.setEnd(k.node,k.offset),Y.addRange(L))}}}}for(ee=[],Y=_;Y=Y.parentNode;)Y.nodeType===1&&ee.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ee.length;_++){var J=ee[_];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Hc=!!Tf,wf=Tf=null}finally{et=f,Z.p=l,q.T=a}}e.current=n,qt=2}}function Lp(){if(qt===2){qt=0;var e=Aa,n=pi,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var l=Z.p;Z.p=2;var f=et;et|=4;try{dp(e,n.alternate,n)}finally{et=f,Z.p=l,q.T=a}}qt=3}}function Pp(){if(qt===4||qt===3){qt=0,In();var e=Aa,n=pi,a=Js,l=jp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?qt=5:(qt=0,pi=Aa=null,Bp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Sa=null),Os(a),n=n.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Yn,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=q.T,f=Z.p,Z.p=2,q.T=null;try{for(var d=e.onRecoverableError,y=0;y<l.length;y++){var _=l[y];d(_.value,{componentStack:_.stack})}}finally{q.T=n,Z.p=f}}(Js&3)!==0&&Dc(),Ss(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===hf?Ol++:(Ol=0,hf=e):Ol=0,kl(0)}}function Bp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,pl(n)))}function Dc(){return Up(),Lp(),Pp(),qp()}function qp(){if(qt!==5)return!1;var e=Aa,n=cf;cf=0;var a=Os(Js),l=q.T,f=Z.p;try{Z.p=32>a?32:a,q.T=null,a=uf,uf=null;var d=Aa,y=Js;if(qt=0,pi=Aa=null,Js=0,(et&6)!==0)throw Error(i(331));var _=et;if(et|=4,Np(d.current),bp(d,d.current,y,a),et=_,kl(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Yn,d)}catch{}return!0}finally{Z.p=f,q.T=l,Bp(e,n)}}function Hp(e,n,a){n=Ln(a,n),n=qh(e.stateNode,n,2),e=_a(e,n,2),e!==null&&(er(e,2),Ss(e))}function at(e,n,a){if(e.tag===3)Hp(e,e,a);else for(;n!==null;){if(n.tag===3){Hp(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Sa===null||!Sa.has(l))){e=Ln(a,e),a=Gg(2),l=_a(n,a,2),l!==null&&(Fg(a,l,n,e),er(l,2),Ss(l));break}}n=n.return}}function mf(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Gb;var f=new Set;l.set(n,f)}else f=l.get(n),f===void 0&&(f=new Set,l.set(n,f));f.has(a)||(rf=!0,f.add(a),e=Kb.bind(null,e,n,a),n.then(e,e))}function Kb(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ct===e&&(He&a)===a&&(bt===4||bt===3&&(He&62914560)===He&&300>Bt()-wc?(et&2)===0&&yi(e,0):lf|=a,gi===He&&(gi=0)),Ss(e)}function Gp(e,n){n===0&&(n=So()),e=mr(e,n),e!==null&&(er(e,n),Ss(e))}function Xb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Gp(e,a)}function Zb(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(n),Gp(e,a)}function Jb(e,n){return Qe(e,n)}var Ic=null,vi=null,gf=!1,Mc=!1,pf=!1,Ra=0;function Ss(e){e!==vi&&e.next===null&&(vi===null?Ic=vi=e:vi=vi.next=e),Mc=!0,gf||(gf=!0,e_())}function kl(e,n){if(!pf&&Mc){pf=!0;do for(var a=!1,l=Ic;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var y=l.suspendedLanes,_=l.pingedLanes;d=(1<<31-Tt(42|e)+1)-1,d&=f&~(y&~_),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Qp(l,d))}else d=He,d=cs(l,l===ct?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Qn(l,d)||(a=!0,Qp(l,d));l=l.next}while(a);pf=!1}}function Wb(){Fp()}function Fp(){Mc=gf=!1;var e=0;Ra!==0&&u_()&&(e=Ra);for(var n=Bt(),a=null,l=Ic;l!==null;){var f=l.next,d=$p(l,n);d===0?(l.next=null,a===null?Ic=f:a.next=f,f===null&&(vi=a)):(a=l,(e!==0||(d&3)!==0)&&(Mc=!0)),l=f}qt!==0&&qt!==5||kl(e),Ra!==0&&(Ra=0)}function $p(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-Tt(d),_=1<<y,D=f[y];D===-1?((_&a)===0||(_&l)!==0)&&(f[y]=Gu(_,n)):D<=n&&(e.expiredLanes|=_),d&=~_}if(n=ct,a=He,a=cs(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(st===2||st===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Nt(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Qn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&Nt(l),Os(a)){case 2:case 8:a=$i;break;case 32:a=ra;break;case 268435456:a=Eo;break;default:a=ra}return l=Yp.bind(null,e),a=Qe(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&Nt(l),e.callbackPriority=2,e.callbackNode=null,2}function Yp(e,n){if(qt!==0&&qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Dc()&&e.callbackNode!==a)return null;var l=He;return l=cs(e,e===ct?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Ap(e,l,n),$p(e,Bt()),e.callbackNode!=null&&e.callbackNode===a?Yp.bind(null,e):null)}function Qp(e,n){if(Dc())return null;Ap(e,n,!0)}function e_(){f_(function(){(et&6)!==0?Qe(Fi,Wb):Fp()})}function yf(){if(Ra===0){var e=ai;e===0&&(e=ls,ls<<=1,(ls&261888)===0&&(ls=256)),Ra=e}return Ra}function Kp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Hr(""+e)}function Xp(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function t_(e,n,a,l,f){if(n==="submit"&&a&&a.stateNode===f){var d=Kp((f[Gt]||null).action),y=l.submitter;y&&(n=(n=y[Gt]||null)?Kp(n.formAction):y.getAttribute("formAction"),n!==null&&(d=n,y=null));var _=new bs("action","action",null,l,f);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ra!==0){var D=y?Xp(f,y):new FormData(f);kh(a,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(_.preventDefault(),D=y?Xp(f,y):new FormData(f),kh(a,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var xf=0;xf<Wu.length;xf++){var vf=Wu[xf],n_=vf.toLowerCase(),s_=vf[0].toUpperCase()+vf.slice(1);ns(n_,"on"+s_)}ns(Sm,"onAnimationEnd"),ns(Am,"onAnimationIteration"),ns(Cm,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(vb,"onTransitionRun"),ns(bb,"onTransitionStart"),ns(_b,"onTransitionCancel"),ns(Rm,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function Zp(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var y=l.length-1;0<=y;y--){var _=l[y],D=_.instance,P=_.currentTarget;if(_=_.listener,D!==d&&f.isPropagationStopped())break e;d=_,f.currentTarget=P;try{d(f)}catch(K){Qo(K)}f.currentTarget=null,d=D}else for(y=0;y<l.length;y++){if(_=l[y],D=_.instance,P=_.currentTarget,_=_.listener,D!==d&&f.isPropagationStopped())break e;d=_,f.currentTarget=P;try{d(f)}catch(K){Qo(K)}f.currentTarget=null,d=D}}}}function Be(e,n){var a=n[Ur];a===void 0&&(a=n[Ur]=new Set);var l=e+"__bubble";a.has(l)||(Jp(n,e,2,!1),a.add(l))}function bf(e,n,a){var l=0;n&&(l|=4),Jp(a,e,l,n)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function _f(e){if(!e[Vc]){e[Vc]=!0,Ki.forEach(function(a){a!=="selectionchange"&&(a_.has(a)||bf(a,!1,e),bf(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Vc]||(n[Vc]=!0,bf("selectionchange",!1,n))}}function Jp(e,n,a,l){switch(Sy(n)){case 2:var f=I_;break;case 8:f=M_;break;default:f=kf}a=f.bind(null,n,a,e),f=void 0,!ir||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(n,a,{capture:!0,passive:f}):e.addEventListener(n,a,!0):f!==void 0?e.addEventListener(n,a,{passive:f}):e.addEventListener(n,a,!1)}function Ef(e,n,a,l,f){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var _=l.stateNode.containerInfo;if(_===f)break;if(y===4)for(y=l.return;y!==null;){var D=y.tag;if((D===3||D===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;_!==null;){if(y=ds(_),y===null)return;if(D=y.tag,D===5||D===6||D===26||D===27){l=d=y;continue e}_=_.parentNode}}l=l.return}ha(function(){var P=d,K=On(a),ee=[];e:{var B=Dm.get(e);if(B!==void 0){var Y=bs,xe=e;switch(e){case"keypress":if(or(a)===0)break e;case"keydown":case"keyup":Y=Fo;break;case"focusin":xe="focus",Y=ur;break;case"focusout":xe="blur",Y=ur;break;case"beforeblur":case"afterblur":Y=ur;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=ko;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=g;break;case Sm:case Am:case Cm:Y=Uo;break;case Rm:Y=N;break;case"scroll":case"scrollend":Y=ll;break;case"wheel":Y=F;break;case"copy":case"cut":case"paste":Y=Lo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Us;break;case"toggle":case"beforetoggle":Y=ke}var Se=(n&4)!==0,ot=!Se&&(e==="scroll"||e==="scrollend"),z=Se?B!==null?B+"Capture":null:B;Se=[];for(var k=P,L;k!==null;){var J=k;if(L=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||L===null||z===null||(J=Jn(k,z),J!=null&&Se.push(Ul(k,J,L))),ot)break;k=k.return}0<Se.length&&(B=new Y(B,xe,null,a,K),ee.push({event:B,listeners:Se}))}}if((n&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",B&&a!==al&&(xe=a.relatedTarget||a.fromElement)&&(ds(xe)||xe[hs]))break e;if((Y||B)&&(B=K.window===K?K:(B=K.ownerDocument)?B.defaultView||B.parentWindow:window,Y?(xe=a.relatedTarget||a.toElement,Y=P,xe=xe?ds(xe):null,xe!==null&&(ot=h(xe),Se=xe.tag,xe!==ot||Se!==5&&Se!==27&&Se!==6)&&(xe=null)):(Y=null,xe=P),Y!==xe)){if(Se=ol,J="onMouseLeave",z="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(Se=Us,J="onPointerLeave",z="onPointerEnter",k="pointer"),ot=Y==null?B:_n(Y),L=xe==null?B:_n(xe),B=new Se(J,k+"leave",Y,a,K),B.target=ot,B.relatedTarget=L,J=null,ds(K)===P&&(Se=new Se(z,k+"enter",xe,a,K),Se.target=L,Se.relatedTarget=ot,J=Se),ot=J,Y&&xe)t:{for(Se=r_,z=Y,k=xe,L=0,J=z;J;J=Se(J))L++;J=0;for(var Ne=k;Ne;Ne=Se(Ne))J++;for(;0<L-J;)z=Se(z),L--;for(;0<J-L;)k=Se(k),J--;for(;L--;){if(z===k||k!==null&&z===k.alternate){Se=z;break t}z=Se(z),k=Se(k)}Se=null}else Se=null;Y!==null&&Wp(ee,B,Y,Se,!1),xe!==null&&ot!==null&&Wp(ee,ot,xe,Se,!0)}}e:{if(B=P?_n(P):window,Y=B.nodeName&&B.nodeName.toLowerCase(),Y==="select"||Y==="input"&&B.type==="file")var Ze=pm;else if(mm(B))if(ym)Ze=pb;else{Ze=mb;var _e=db}else Y=B.nodeName,!Y||Y.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?P&&qr(P.elementType)&&(Ze=pm):Ze=gb;if(Ze&&(Ze=Ze(e,P))){gm(ee,Ze,a,K);break e}_e&&_e(e,B,P),e==="focusout"&&P&&B.type==="number"&&P.memoizedProps.value!=null&&tl(B,"number",B.value)}switch(_e=P?_n(P):window,e){case"focusin":(mm(_e)||_e.contentEditable==="true")&&(Xr=_e,Xu=P,dl=null);break;case"focusout":dl=Xu=Xr=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,wm(ee,a,K);break;case"selectionchange":if(xb)break;case"keydown":case"keyup":wm(ee,a,K)}var Ue;if(We)e:{switch(e){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Kr?hr(e,a)&&(Ge="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ge="onCompositionStart");Ge&&(Ns&&a.locale!=="ko"&&(Kr||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Kr&&(Ue=il()):(vs=K,rl="value"in vs?vs.value:vs.textContent,Kr=!0)),_e=Oc(P,Ge),0<_e.length&&(Ge=new Es(Ge,e,null,a,K),ee.push({event:Ge,listeners:_e}),Ue?Ge.data=Ue:(Ue=Qr(a),Ue!==null&&(Ge.data=Ue)))),(Ue=zn?cb(e,a):ub(e,a))&&(Ge=Oc(P,"onBeforeInput"),0<Ge.length&&(_e=new Es("onBeforeInput","beforeinput",null,a,K),ee.push({event:_e,listeners:Ge}),_e.data=Ue)),t_(ee,e,P,a,K)}Zp(ee,n)})}function Ul(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Oc(e,n){for(var a=n+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Jn(e,a),f!=null&&l.unshift(Ul(e,f,d)),f=Jn(e,n),f!=null&&l.push(Ul(e,f,d))),e.tag===3)return l;e=e.return}return[]}function r_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wp(e,n,a,l,f){for(var d=n._reactName,y=[];a!==null&&a!==l;){var _=a,D=_.alternate,P=_.stateNode;if(_=_.tag,D!==null&&D===l)break;_!==5&&_!==26&&_!==27||P===null||(D=P,f?(P=Jn(a,d),P!=null&&y.unshift(Ul(a,P,D))):f||(P=Jn(a,d),P!=null&&y.push(Ul(a,P,D)))),a=a.return}y.length!==0&&e.push({event:n,listeners:y})}var i_=/\r\n?/g,l_=/\u0000|\uFFFD/g;function ey(e){return(typeof e=="string"?e:""+e).replace(i_,`
`).replace(l_,"")}function ty(e,n){return n=ey(n),ey(e)===n}function lt(e,n,a,l,f,d){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||hn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&hn(e,""+l);break;case"className":En(e,"class",l);break;case"tabIndex":En(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":En(e,a,l);break;case"style":sl(e,l,d);break;case"data":if(n!=="object"){En(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Hr(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&lt(e,n,"name",f.name,f,null),lt(e,n,"formEncType",f.formEncType,f,null),lt(e,n,"formMethod",f.formMethod,f,null),lt(e,n,"formTarget",f.formTarget,f,null)):(lt(e,n,"encType",f.encType,f,null),lt(e,n,"method",f.method,f,null),lt(e,n,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Hr(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Zn);break;case"onScroll":l!=null&&Be("scroll",e);break;case"onScrollEnd":l!=null&&Be("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Hr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Be("beforetoggle",e),Be("toggle",e),Pr(e,"popover",l);break;case"xlinkActuate":It(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":It(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":It(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":It(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":It(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":It(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":It(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":It(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":It(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Oo.get(a)||a,Pr(e,a,l))}}function Nf(e,n,a,l,f,d){switch(a){case"style":sl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof l=="string"?hn(e,l):(typeof l=="number"||typeof l=="bigint")&&hn(e,""+l);break;case"onScroll":l!=null&&Be("scroll",e);break;case"onScrollEnd":l!=null&&Be("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xi.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),n=a.slice(2,f?a.length-7:void 0),d=e[Gt]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,f);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Pr(e,a,l)}}}function Wt(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",e),Be("load",e);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:lt(e,n,d,y,a,null)}}f&&lt(e,n,"srcSet",a.srcSet,a,null),l&&lt(e,n,"src",a.src,a,null);return;case"input":Be("invalid",e);var _=d=y=f=null,D=null,P=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":f=K;break;case"type":y=K;break;case"checked":D=K;break;case"defaultChecked":P=K;break;case"value":d=K;break;case"defaultValue":_=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,n));break;default:lt(e,n,l,K,a,null)}}Io(e,d,_,D,P,y,f,!1);return;case"select":Be("invalid",e),l=y=d=null;for(f in a)if(a.hasOwnProperty(f)&&(_=a[f],_!=null))switch(f){case"value":d=_;break;case"defaultValue":y=_;break;case"multiple":l=_;default:lt(e,n,f,_,a,null)}n=d,a=y,e.multiple=!!l,n!=null?la(e,!!l,n,!1):a!=null&&la(e,!!l,a,!0);return;case"textarea":Be("invalid",e),d=f=l=null;for(y in a)if(a.hasOwnProperty(y)&&(_=a[y],_!=null))switch(y){case"value":l=_;break;case"defaultValue":f=_;break;case"children":d=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:lt(e,n,y,_,a,null)}oa(e,l,f,d);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:lt(e,n,D,l,a,null)}return;case"dialog":Be("beforetoggle",e),Be("toggle",e),Be("cancel",e),Be("close",e);break;case"iframe":case"object":Be("load",e);break;case"video":case"audio":for(l=0;l<zl.length;l++)Be(zl[l],e);break;case"image":Be("error",e),Be("load",e);break;case"details":Be("toggle",e);break;case"embed":case"source":case"link":Be("error",e),Be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:lt(e,n,P,l,a,null)}return;default:if(qr(n)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&Nf(e,n,K,l,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(l=a[_],l!=null&&lt(e,n,_,l,a,null))}function o_(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,y=null,_=null,D=null,P=null,K=null;for(Y in a){var ee=a[Y];if(a.hasOwnProperty(Y)&&ee!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty(Y)||lt(e,n,Y,null,l,ee)}}for(var B in l){var Y=l[B];if(ee=a[B],l.hasOwnProperty(B)&&(Y!=null||ee!=null))switch(B){case"type":d=Y;break;case"name":f=Y;break;case"checked":P=Y;break;case"defaultChecked":K=Y;break;case"value":y=Y;break;case"defaultValue":_=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,n));break;default:Y!==ee&&lt(e,n,B,Y,l,ee)}}Br(e,y,_,D,P,K,d,f);return;case"select":Y=y=_=B=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":Y=D;default:l.hasOwnProperty(d)||lt(e,n,d,null,l,D)}for(f in l)if(d=l[f],D=a[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":B=d;break;case"defaultValue":_=d;break;case"multiple":y=d;default:d!==D&&lt(e,n,f,d,l,D)}n=_,a=y,l=Y,B!=null?la(e,!!a,B,!1):!!l!=!!a&&(n!=null?la(e,!!a,n,!0):la(e,!!a,a?[]:"",!1));return;case"textarea":Y=B=null;for(_ in a)if(f=a[_],a.hasOwnProperty(_)&&f!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:lt(e,n,_,null,l,f)}for(y in l)if(f=l[y],d=a[y],l.hasOwnProperty(y)&&(f!=null||d!=null))switch(y){case"value":B=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==d&&lt(e,n,y,f,l,d)}Mo(e,B,Y);return;case"option":for(var xe in a)if(B=a[xe],a.hasOwnProperty(xe)&&B!=null&&!l.hasOwnProperty(xe))switch(xe){case"selected":e.selected=!1;break;default:lt(e,n,xe,null,l,B)}for(D in l)if(B=l[D],Y=a[D],l.hasOwnProperty(D)&&B!==Y&&(B!=null||Y!=null))switch(D){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:lt(e,n,D,B,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)B=a[Se],a.hasOwnProperty(Se)&&B!=null&&!l.hasOwnProperty(Se)&&lt(e,n,Se,null,l,B);for(P in l)if(B=l[P],Y=a[P],l.hasOwnProperty(P)&&B!==Y&&(B!=null||Y!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(137,n));break;default:lt(e,n,P,B,l,Y)}return;default:if(qr(n)){for(var ot in a)B=a[ot],a.hasOwnProperty(ot)&&B!==void 0&&!l.hasOwnProperty(ot)&&Nf(e,n,ot,void 0,l,B);for(K in l)B=l[K],Y=a[K],!l.hasOwnProperty(K)||B===Y||B===void 0&&Y===void 0||Nf(e,n,K,B,l,Y);return}}for(var z in a)B=a[z],a.hasOwnProperty(z)&&B!=null&&!l.hasOwnProperty(z)&&lt(e,n,z,null,l,B);for(ee in l)B=l[ee],Y=a[ee],!l.hasOwnProperty(ee)||B===Y||B==null&&Y==null||lt(e,n,ee,B,l,Y)}function ny(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function c_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,y=f.initiatorType,_=f.duration;if(d&&_&&ny(y)){for(y=0,_=f.responseEnd,l+=1;l<a.length;l++){var D=a[l],P=D.startTime;if(P>_)break;var K=D.transferSize,ee=D.initiatorType;K&&ny(ee)&&(D=D.responseEnd,y+=K*(D<_?1:(_-P)/(D-P)))}if(--l,n+=8*(d+y)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Tf=null,wf=null;function kc(e){return e.nodeType===9?e:e.ownerDocument}function sy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ay(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function jf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Sf=null;function u_(){var e=window.event;return e&&e.type==="popstate"?e===Sf?!1:(Sf=e,!0):(Sf=null,!1)}var ry=typeof setTimeout=="function"?setTimeout:void 0,h_=typeof clearTimeout=="function"?clearTimeout:void 0,iy=typeof Promise=="function"?Promise:void 0,f_=typeof queueMicrotask=="function"?queueMicrotask:typeof iy<"u"?function(e){return iy.resolve(null).then(e).catch(d_)}:ry;function d_(e){setTimeout(function(){throw e})}function Da(e){return e==="head"}function ly(e,n){var a=n,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),Ni(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ll(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ll(a);for(var d=a.firstChild;d;){var y=d.nextSibling,_=d.nodeName;d[fs]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&Ll(e.ownerDocument.body);a=f}while(a);Ni(n)}function oy(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Af(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Af(a),Lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function m_(e,n,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[fs])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Gn(e.nextSibling),e===null)break}return null}function g_(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Gn(e.nextSibling),e===null))return null;return e}function cy(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Gn(e.nextSibling),e===null))return null;return e}function Cf(e){return e.data==="$?"||e.data==="$~"}function Rf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function p_(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Gn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Df=null;function uy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Gn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function hy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function fy(e,n,a){switch(n=kc(a),e){case"html":if(e=n.documentElement,!e)throw Error(i(452));return e;case"head":if(e=n.head,!e)throw Error(i(453));return e;case"body":if(e=n.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Ll(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Lr(e)}var Fn=new Map,dy=new Set;function zc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ws=Z.d;Z.d={f:y_,r:x_,D:v_,C:b_,L:__,m:E_,X:T_,S:N_,M:w_};function y_(){var e=Ws.f(),n=Ac();return e||n}function x_(e){var n=Vn(e);n!==null&&n.tag===5&&n.type==="form"?Rg(n):Ws.r(e)}var bi=typeof document>"u"?null:document;function my(e,n,a){var l=bi;if(l&&typeof n=="string"&&n){var f=un(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),dy.has(f)||(dy.add(f),e={rel:e,crossOrigin:a,href:n},l.querySelector(f)===null&&(n=l.createElement("link"),Wt(n,"link",e),Dt(n),l.head.appendChild(n)))}}function v_(e){Ws.D(e),my("dns-prefetch",e,null)}function b_(e,n){Ws.C(e,n),my("preconnect",e,n)}function __(e,n,a){Ws.L(e,n,a);var l=bi;if(l&&e&&n){var f='link[rel="preload"][as="'+un(n)+'"]';n==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+un(a.imageSizes)+'"]')):f+='[href="'+un(e)+'"]';var d=f;switch(n){case"style":d=_i(e);break;case"script":d=Ei(e)}Fn.has(d)||(e=C({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Fn.set(d,e),l.querySelector(f)!==null||n==="style"&&l.querySelector(Pl(d))||n==="script"&&l.querySelector(Bl(d))||(n=l.createElement("link"),Wt(n,"link",e),Dt(n),l.head.appendChild(n)))}}function E_(e,n){Ws.m(e,n);var a=bi;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+un(l)+'"][href="'+un(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ei(e)}if(!Fn.has(d)&&(e=C({rel:"modulepreload",href:e},n),Fn.set(d,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(d)))return}l=a.createElement("link"),Wt(l,"link",e),Dt(l),a.head.appendChild(l)}}}function N_(e,n,a){Ws.S(e,n,a);var l=bi;if(l&&e){var f=ms(l).hoistableStyles,d=_i(e);n=n||"default";var y=f.get(d);if(!y){var _={loading:0,preload:null};if(y=l.querySelector(Pl(d)))_.loading=5;else{e=C({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Fn.get(d))&&If(e,a);var D=y=l.createElement("link");Dt(D),Wt(D,"link",e),D._p=new Promise(function(P,K){D.onload=P,D.onerror=K}),D.addEventListener("load",function(){_.loading|=1}),D.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Uc(y,n,l)}y={type:"stylesheet",instance:y,count:1,state:_},f.set(d,y)}}}function T_(e,n){Ws.X(e,n);var a=bi;if(a&&e){var l=ms(a).hoistableScripts,f=Ei(e),d=l.get(f);d||(d=a.querySelector(Bl(f)),d||(e=C({src:e,async:!0},n),(n=Fn.get(f))&&Mf(e,n),d=a.createElement("script"),Dt(d),Wt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function w_(e,n){Ws.M(e,n);var a=bi;if(a&&e){var l=ms(a).hoistableScripts,f=Ei(e),d=l.get(f);d||(d=a.querySelector(Bl(f)),d||(e=C({src:e,async:!0,type:"module"},n),(n=Fn.get(f))&&Mf(e,n),d=a.createElement("script"),Dt(d),Wt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function gy(e,n,a,l){var f=(f=ve.current)?zc(f):null;if(!f)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=_i(a.href),a=ms(f).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=_i(a.href);var d=ms(f).hoistableStyles,y=d.get(e);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=f.querySelector(Pl(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Fn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(e,a),d||j_(f,e,a,y.state))),n&&l===null)throw Error(i(528,""));return y}if(n&&l!==null)throw Error(i(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ei(a),a=ms(f).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function _i(e){return'href="'+un(e)+'"'}function Pl(e){return'link[rel="stylesheet"]['+e+"]"}function py(e){return C({},e,{"data-precedence":e.precedence,precedence:null})}function j_(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Wt(n,"link",a),Dt(n),e.head.appendChild(n))}function Ei(e){return'[src="'+un(e)+'"]'}function Bl(e){return"script[async]"+e}function yy(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+un(a.href)+'"]');if(l)return n.instance=l,Dt(l),l;var f=C({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Dt(l),Wt(l,"style",f),Uc(l,a.precedence,e),n.instance=l;case"stylesheet":f=_i(a.href);var d=e.querySelector(Pl(f));if(d)return n.state.loading|=4,n.instance=d,Dt(d),d;l=py(a),(f=Fn.get(f))&&If(l,f),d=(e.ownerDocument||e).createElement("link"),Dt(d);var y=d;return y._p=new Promise(function(_,D){y.onload=_,y.onerror=D}),Wt(d,"link",l),n.state.loading|=4,Uc(d,a.precedence,e),n.instance=d;case"script":return d=Ei(a.src),(f=e.querySelector(Bl(d)))?(n.instance=f,Dt(f),f):(l=a,(f=Fn.get(d))&&(l=C({},a),Mf(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Dt(f),Wt(f,"link",l),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Uc(l,a.precedence,e));return n.instance}function Uc(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,y=0;y<l.length;y++){var _=l[y];if(_.dataset.precedence===n)d=_;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function If(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Mf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Lc=null;function xy(e,n,a){if(Lc===null){var l=new Map,f=Lc=new Map;f.set(a,l)}else f=Lc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[fs]||d[Rt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(n)||"";y=e+y;var _=l.get(y);_?_.push(d):l.set(y,[d])}}return l}function vy(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function S_(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function by(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function A_(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=_i(l.href),d=n.querySelector(Pl(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Pc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=d,Dt(d);return}d=n.ownerDocument||n,l=py(l),(f=Fn.get(f))&&If(l,f),d=d.createElement("link"),Dt(d);var y=d;y._p=new Promise(function(_,D){y.onload=_,y.onerror=D}),Wt(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Pc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Vf=0;function C_(e,n){return e.stylesheets&&e.count===0&&qc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&qc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Vf===0&&(Vf=62500*c_());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&qc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Vf?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Pc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Bc=null;function qc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Bc=new Map,n.forEach(R_,e),Bc=null,Pc.call(e))}function R_(e,n){if(!(n.state.loading&4)){var a=Bc.get(e);if(a)var l=a.get(null);else{a=new Map,Bc.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var y=f[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}f=n.instance,y=f.getAttribute("data-precedence"),d=a.get(y)||l,d===l&&a.set(null,f),a.set(y,f),this.count++,l=Pc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var ql={$$typeof:de,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function D_(e,n,a,l,f,d,y,_,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.hiddenUpdates=us(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function _y(e,n,a,l,f,d,y,_,D,P,K,ee){return e=new D_(e,n,a,y,D,P,K,ee,_),n=1,d===!0&&(n|=24),d=Tn(3,null,null,n),e.current=d,d.stateNode=e,n=fh(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:n},ph(d),e}function Ey(e){return e?(e=Wr,e):Wr}function Ny(e,n,a,l,f,d){f=Ey(f),l.context===null?l.context=f:l.pendingContext=f,l=ba(n),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=_a(e,l,n),a!==null&&(pn(a,e,n),bl(a,e,n))}function Ty(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Of(e,n){Ty(e,n),(e=e.alternate)&&Ty(e,n)}function wy(e){if(e.tag===13||e.tag===31){var n=mr(e,67108864);n!==null&&pn(n,e,67108864),Of(e,67108864)}}function jy(e){if(e.tag===13||e.tag===31){var n=Cn();n=nr(n);var a=mr(e,n);a!==null&&pn(a,e,n),Of(e,n)}}var Hc=!0;function I_(e,n,a,l){var f=q.T;q.T=null;var d=Z.p;try{Z.p=2,kf(e,n,a,l)}finally{Z.p=d,q.T=f}}function M_(e,n,a,l){var f=q.T;q.T=null;var d=Z.p;try{Z.p=8,kf(e,n,a,l)}finally{Z.p=d,q.T=f}}function kf(e,n,a,l){if(Hc){var f=zf(l);if(f===null)Ef(e,n,l,Gc,a),Ay(e,l);else if(O_(f,e,n,a,l))l.stopPropagation();else if(Ay(e,l),n&4&&-1<V_.indexOf(e)){for(;f!==null;){var d=Vn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=os(d.pendingLanes);if(y!==0){var _=d;for(_.pendingLanes|=2,_.entangledLanes|=2;y;){var D=1<<31-Tt(y);_.entanglements[1]|=D,y&=~D}Ss(d),(et&6)===0&&(jc=Bt()+500,kl(0))}}break;case 31:case 13:_=mr(d,2),_!==null&&pn(_,d,2),Ac(),Of(d,2)}if(d=zf(l),d===null&&Ef(e,n,l,Gc,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Ef(e,n,l,null,a)}}function zf(e){return e=On(e),Uf(e)}var Gc=null;function Uf(e){if(Gc=null,e=ds(e),e!==null){var n=h(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=m(n),e!==null)return e;e=null}else if(a===31){if(e=p(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Gc=e,null}function Sy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ja()){case Fi:return 2;case $i:return 8;case ra:case Hu:return 32;case Eo:return 268435456;default:return 32}default:return 32}}var Lf=!1,Ia=null,Ma=null,Va=null,Hl=new Map,Gl=new Map,Oa=[],V_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ay(e,n){switch(e){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":Hl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(n.pointerId)}}function Fl(e,n,a,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},n!==null&&(n=Vn(n),n!==null&&wy(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function O_(e,n,a,l,f){switch(n){case"focusin":return Ia=Fl(Ia,e,n,a,l,f),!0;case"dragenter":return Ma=Fl(Ma,e,n,a,l,f),!0;case"mouseover":return Va=Fl(Va,e,n,a,l,f),!0;case"pointerover":var d=f.pointerId;return Hl.set(d,Fl(Hl.get(d)||null,e,n,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Gl.set(d,Fl(Gl.get(d)||null,e,n,a,l,f)),!0}return!1}function Cy(e){var n=ds(e.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=m(a),n!==null){e.blockedOn=n,Kn(e.priority,function(){jy(a)});return}}else if(n===31){if(n=p(a),n!==null){e.blockedOn=n,Kn(e.priority,function(){jy(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=zf(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);al=l,a.target.dispatchEvent(l),al=null}else return n=Vn(a),n!==null&&wy(n),e.blockedOn=a,!1;n.shift()}return!0}function Ry(e,n,a){Fc(e)&&a.delete(n)}function k_(){Lf=!1,Ia!==null&&Fc(Ia)&&(Ia=null),Ma!==null&&Fc(Ma)&&(Ma=null),Va!==null&&Fc(Va)&&(Va=null),Hl.forEach(Ry),Gl.forEach(Ry)}function $c(e,n){e.blockedOn===n&&(e.blockedOn=null,Lf||(Lf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,k_)))}var Yc=null;function Dy(e){Yc!==e&&(Yc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Yc===e&&(Yc=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],f=e[n+2];if(typeof l!="function"){if(Uf(l||a)===null)continue;break}var d=Vn(a);d!==null&&(e.splice(n,3),n-=3,kh(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Ni(e){function n(D){return $c(D,e)}Ia!==null&&$c(Ia,e),Ma!==null&&$c(Ma,e),Va!==null&&$c(Va,e),Hl.forEach(n),Gl.forEach(n);for(var a=0;a<Oa.length;a++){var l=Oa[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Oa.length&&(a=Oa[0],a.blockedOn===null);)Cy(a),a.blockedOn===null&&Oa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],y=f[Gt]||null;if(typeof d=="function")y||Dy(a);else if(y){var _=null;if(d&&d.hasAttribute("formAction")){if(f=d,y=d[Gt]||null)_=y.formAction;else if(Uf(f)!==null)continue}else _=y.action;typeof _=="function"?a[l+1]=_:(a.splice(l,3),l-=3),Dy(a)}}}function Iy(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Pf(e){this._internalRoot=e}Qc.prototype.render=Pf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));var a=n.current,l=Cn();Ny(a,l,e,n,null,null)},Qc.prototype.unmount=Pf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ny(e.current,2,null,e,null,null),Ac(),n[hs]=null}};function Qc(e){this._internalRoot=e}Qc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ao();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Oa.length&&n!==0&&n<Oa[a].priority;a++);Oa.splice(a,0,e),a===0&&Cy(e)}};var My=t.version;if(My!=="19.2.4")throw Error(i(527,My,"19.2.4"));Z.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=x(n),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var z_={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{Yn=Kc.inject(z_),Qt=Kc}catch{}}return Yl.createRoot=function(e,n){if(!c(e))throw Error(i(299));var a=!1,l="",f=Pg,d=Bg,y=qg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=_y(e,1,!1,null,null,a,l,null,f,d,y,Iy),e[hs]=n.current,_f(e),new Pf(n)},Yl.hydrateRoot=function(e,n,a){if(!c(e))throw Error(i(299));var l=!1,f="",d=Pg,y=Bg,_=qg,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=_y(e,1,!0,n,a??null,l,f,D,d,y,_,Iy),n.context=Ey(null),a=n.current,l=Cn(),l=nr(l),f=ba(l),f.callback=null,_a(a,f,l),a=l,n.current.lanes=a,er(n,a),Ss(n),e[hs]=n.current,_f(e),new Qc(n)},Yl.version="19.2.4",Yl}var Hy;function Y_(){if(Hy)return Hf.exports;Hy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Hf.exports=$_(),Hf.exports}var Q_=Y_();const K_=o0(Q_),ut={projects:["R72","3","A"],contractors:["",""],supervisors:[" "," "," "],locations:["","",""],goals:["","",""],processes:["","",""],topics:["","",""],cautions:["","",""],subcontractors:["","","",""]},X_={project:ut.projects[0],month:new Date().getMonth()+1,contractor:ut.contractors[0],date:new Date().toISOString().split("T")[0],startTime:"08:00",endTime:"08:30",location:ut.locations[0],instructor:ut.supervisors[0],goal:ut.goals[0],process:ut.processes[0],topic:ut.topics[0],caution:ut.cautions[0],photoUrl:null,signatures:[]},Z_={count:1,project:ut.projects[0],date:new Date().toISOString().split("T")[0],contractor:ut.contractors[0],startTime:"13:00",endTime:"14:00",location:ut.locations[0],gcAttendees:[{role:"",name:ut.supervisors[0]},{role:"",name:""},{role:"",name:ut.supervisors[0]},{role:"",name:ut.supervisors[1]},{role:"",name:""},{role:"",name:""},{role:"",name:""},{role:"",name:""}],subcontractorAttendees:[]},J_={year:new Date().getFullYear(),month:new Date().getMonth()+1,createdDate:new Date().toISOString().split("T")[0],project:ut.projects[0],location:ut.locations[1],author:ut.supervisors[0],trainingDate:"",trainingLeader:ut.supervisors[0],councilDate:"",councilLeader:"",patrolDate:"",processRows:[{id:"1",category:"",name:"",bars:[]},{id:"2",category:"",name:"",bars:[]},{id:"3",category:"",name:"",bars:[]},{id:"4",category:"",name:"",bars:[]},{id:"5",category:"",name:"",bars:[]},{id:"6",category:"",name:"",bars:[]},{id:"7",category:"",name:"",bars:[]},{id:"8",category:"",name:"",bars:[]},{id:"9",category:"",name:"",bars:[]},{id:"10",category:"()",name:"",bars:[]},{id:"11",category:"()",name:"",bars:[]}],predictions:["","","","",""],countermeasures:["","","","",""],inspectionItems:["","","","",""],safetyDuty:{},lastMonthReflection:""},Yf={project:ut.projects[0],director:ut.supervisors[0],furigana:"",name:"",birthEra:"Showa",birthYear:"",birthMonth:"",birthDay:"",gender:"Male",age:0,company:ut.subcontractors[0],subcontractorRank:"",experienceYears:10,experienceMonths:0,jobType:"",jobTypeOther:"",address:"",phone:"",emergencyContactName:"",emergencyContactRelation:"",emergencyContactPhone:"",bloodType:"A",bloodTypeRh:"Plus",healthCheckYear:new Date().getFullYear()-2018,healthCheckMonth:new Date().getMonth()+1,healthCheckDay:new Date().getDate(),kentaikyo:"Joined",qualifications:{vehicle_leveling:!1,vehicle_demolition:!1,mobile_crane:!1,slinging:!1,gas_welding:!1,earth_retaining:!1,excavation:!1,scaffolding:!1,formwork:!1,oxygen_deficiency:!1,rough_terrain:!1,arc_welding:!1,grinding_wheel:!1,low_voltage:!1,roller:!1,asbestos:!1,foreman:!1,otherText1:"",otherText2:"",otherText3:""},pledgeDateYear:new Date().getFullYear()-2018,pledgeDateMonth:new Date().getMonth()+1,pledgeDateDay:new Date().getDate(),signatureDataUrl:null},W_=()=>{};var Gy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=function(r){const t=[];let s=0;for(let i=0;i<r.length;i++){let c=r.charCodeAt(i);c<128?t[s++]=c:c<2048?(t[s++]=c>>6|192,t[s++]=c&63|128):(c&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(c=65536+((c&1023)<<10)+(r.charCodeAt(++i)&1023),t[s++]=c>>18|240,t[s++]=c>>12&63|128,t[s++]=c>>6&63|128,t[s++]=c&63|128):(t[s++]=c>>12|224,t[s++]=c>>6&63|128,t[s++]=c&63|128)}return t},e1=function(r){const t=[];let s=0,i=0;for(;s<r.length;){const c=r[s++];if(c<128)t[i++]=String.fromCharCode(c);else if(c>191&&c<224){const h=r[s++];t[i++]=String.fromCharCode((c&31)<<6|h&63)}else if(c>239&&c<365){const h=r[s++],m=r[s++],p=r[s++],v=((c&7)<<18|(h&63)<<12|(m&63)<<6|p&63)-65536;t[i++]=String.fromCharCode(55296+(v>>10)),t[i++]=String.fromCharCode(56320+(v&1023))}else{const h=r[s++],m=r[s++];t[i++]=String.fromCharCode((c&15)<<12|(h&63)<<6|m&63)}}return t.join("")},h0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let c=0;c<r.length;c+=3){const h=r[c],m=c+1<r.length,p=m?r[c+1]:0,v=c+2<r.length,x=v?r[c+2]:0,T=h>>2,C=(h&3)<<4|p>>4;let I=(p&15)<<2|x>>6,G=x&63;v||(G=64,m||(I=64)),i.push(s[T],s[C],s[I],s[G])}return i.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(u0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):e1(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let c=0;c<r.length;){const h=s[r.charAt(c++)],p=c<r.length?s[r.charAt(c)]:0;++c;const x=c<r.length?s[r.charAt(c)]:64;++c;const C=c<r.length?s[r.charAt(c)]:64;if(++c,h==null||p==null||x==null||C==null)throw new t1;const I=h<<2|p>>4;if(i.push(I),x!==64){const G=p<<4&240|x>>2;if(i.push(G),C!==64){const te=x<<6&192|C;i.push(te)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class t1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n1=function(r){const t=u0(r);return h0.encodeByteArray(t,!0)},lu=function(r){return n1(r).replace(/\./g,"")},s1=function(r){try{return h0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=()=>a1().__FIREBASE_DEFAULTS__,i1=()=>{if(typeof process>"u"||typeof Gy>"u")return;const r=Gy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},l1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&s1(r[1]);return t&&JSON.parse(t)},Ad=()=>{try{return W_()||r1()||i1()||l1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},o1=r=>{var t,s;return(s=(t=Ad())==null?void 0:t.emulatorHosts)==null?void 0:s[r]},c1=r=>{const t=o1(r);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),i]:[t.substring(0,s),i]},f0=()=>{var r;return(r=Ad())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,i)=>{s?this.reject(s):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function h1(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},i=t||"demo-project",c=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${i}`,aud:i,iat:c,exp:c+3600,auth_time:c,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[lu(JSON.stringify(s)),lu(JSON.stringify(m)),""].join(".")}const Wl={};function d1(){const r={prod:[],emulator:[]};for(const t of Object.keys(Wl))Wl[t]?r.emulator.push(t):r.prod.push(t);return r}function m1(r){let t=document.getElementById(r),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),s=!0),{created:s,element:t}}let Fy=!1;function g1(r,t){if(typeof window>"u"||typeof document>"u"||!Cd(window.location.host)||Wl[r]===t||Wl[r]||Fy)return;Wl[r]=t;function s(I){return`__firebase__banner__${I}`}const i="__firebase__banner",h=d1().prod.length>0;function m(){const I=document.getElementById(i);I&&I.remove()}function p(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function v(I,G){I.setAttribute("width","24"),I.setAttribute("id",G),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function x(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Fy=!0,m()},I}function T(I,G){I.setAttribute("id",G),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function C(){const I=m1(i),G=s("text"),te=document.getElementById(G)||document.createElement("span"),ie=s("learnmore"),X=document.getElementById(ie)||document.createElement("a"),ye=s("preprendIcon"),pe=document.getElementById(ye)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const de=I.element;p(de),T(X,ie);const be=x();v(pe,ye),de.append(pe,te,X,be),document.body.appendChild(de)}h?(te.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,te.innerText="Preview backend running in this workspace."),te.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y1(){var t;const r=(t=Ad())==null?void 0:t.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x1(){return!y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v1(){try{return typeof indexedDB=="object"}catch{return!1}}function b1(){return new Promise((r,t)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(i);c.onsuccess=()=>{c.result.close(),s||self.indexedDB.deleteDatabase(i),r(!0)},c.onupgradeneeded=()=>{s=!1},c.onerror=()=>{var h;t(((h=c.error)==null?void 0:h.message)||"")}}catch(s){t(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="FirebaseError";class Li extends Error{constructor(t,s,i){super(s),this.code=t,this.customData=i,this.name=_1,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d0.prototype.create)}}class d0{constructor(t,s,i){this.service=t,this.serviceName=s,this.errors=i}create(t,...s){const i=s[0]||{},c=`${this.service}/${t}`,h=this.errors[t],m=h?E1(h,i):"Error",p=`${this.serviceName}: ${m} (${c}).`;return new Li(c,p,i)}}function E1(r,t){return r.replace(N1,(s,i)=>{const c=t[i];return c!=null?String(c):`<${i}?>`})}const N1=/\{\$([^}]+)}/g;function ou(r,t){if(r===t)return!0;const s=Object.keys(r),i=Object.keys(t);for(const c of s){if(!i.includes(c))return!1;const h=r[c],m=t[c];if($y(h)&&$y(m)){if(!ou(h,m))return!1}else if(h!==m)return!1}for(const c of i)if(!s.includes(c))return!1;return!0}function $y(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(r){return r&&r._delegate?r._delegate:r}class ao{constructor(t,s,i){this.name=t,this.instanceFactory=s,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const i=new u1;if(this.instancesDeferred.set(s,i),this.isInitialized(s)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:s});c&&i.resolve(c)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(i)return null;throw c}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(j1(t))try{this.getOrInitializeService({instanceIdentifier:Sr})}catch{}for(const[s,i]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);try{const h=this.getOrInitializeService({instanceIdentifier:c});i.resolve(h)}catch{}}}}clearInstance(t=Sr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Sr){return this.instances.has(t)}getOptions(t=Sr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:i,options:s});for(const[h,m]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(h);i===p&&m.resolve(c)}return c}onInit(t,s){const i=this.normalizeInstanceIdentifier(s),c=this.onInitCallbacks.get(i)??new Set;c.add(t),this.onInitCallbacks.set(i,c);const h=this.instances.get(i);return h&&t(h,i),()=>{c.delete(t)}}invokeOnInitCallbacks(t,s){const i=this.onInitCallbacks.get(s);if(i)for(const c of i)try{c(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:w1(t),options:s}),this.instances.set(t,i),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Sr){return this.component?this.component.multipleInstances?t:Sr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function w1(r){return r===Sr?void 0:r}function j1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new T1(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Xe||(Xe={}));const A1={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},C1=Xe.INFO,R1={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},D1=(r,t,...s)=>{if(t<r.logLevel)return;const i=new Date().toISOString(),c=R1[t];if(c)console[c](`[${i}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class m0{constructor(t){this.name=t,this._logLevel=C1,this._logHandler=D1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Xe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?A1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...t),this._logHandler(this,Xe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...t),this._logHandler(this,Xe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...t),this._logHandler(this,Xe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...t),this._logHandler(this,Xe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...t),this._logHandler(this,Xe.ERROR,...t)}}const I1=(r,t)=>t.some(s=>r instanceof s);let Yy,Qy;function M1(){return Yy||(Yy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V1(){return Qy||(Qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g0=new WeakMap,ad=new WeakMap,p0=new WeakMap,Qf=new WeakMap,Rd=new WeakMap;function O1(r){const t=new Promise((s,i)=>{const c=()=>{r.removeEventListener("success",h),r.removeEventListener("error",m)},h=()=>{s(Ua(r.result)),c()},m=()=>{i(r.error),c()};r.addEventListener("success",h),r.addEventListener("error",m)});return t.then(s=>{s instanceof IDBCursor&&g0.set(s,r)}).catch(()=>{}),Rd.set(t,r),t}function k1(r){if(ad.has(r))return;const t=new Promise((s,i)=>{const c=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",m),r.removeEventListener("abort",m)},h=()=>{s(),c()},m=()=>{i(r.error||new DOMException("AbortError","AbortError")),c()};r.addEventListener("complete",h),r.addEventListener("error",m),r.addEventListener("abort",m)});ad.set(r,t)}let rd={get(r,t,s){if(r instanceof IDBTransaction){if(t==="done")return ad.get(r);if(t==="objectStoreNames")return r.objectStoreNames||p0.get(r);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Ua(r[t])},set(r,t,s){return r[t]=s,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function z1(r){rd=r(rd)}function U1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const i=r.call(Kf(this),t,...s);return p0.set(i,t.sort?t.sort():[t]),Ua(i)}:V1().includes(r)?function(...t){return r.apply(Kf(this),t),Ua(g0.get(this))}:function(...t){return Ua(r.apply(Kf(this),t))}}function L1(r){return typeof r=="function"?U1(r):(r instanceof IDBTransaction&&k1(r),I1(r,M1())?new Proxy(r,rd):r)}function Ua(r){if(r instanceof IDBRequest)return O1(r);if(Qf.has(r))return Qf.get(r);const t=L1(r);return t!==r&&(Qf.set(r,t),Rd.set(t,r)),t}const Kf=r=>Rd.get(r);function P1(r,t,{blocked:s,upgrade:i,blocking:c,terminated:h}={}){const m=indexedDB.open(r,t),p=Ua(m);return i&&m.addEventListener("upgradeneeded",v=>{i(Ua(m.result),v.oldVersion,v.newVersion,Ua(m.transaction),v)}),s&&m.addEventListener("blocked",v=>s(v.oldVersion,v.newVersion,v)),p.then(v=>{h&&v.addEventListener("close",()=>h()),c&&v.addEventListener("versionchange",x=>c(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const B1=["get","getKey","getAll","getAllKeys","count"],q1=["put","add","delete","clear"],Xf=new Map;function Ky(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Xf.get(t))return Xf.get(t);const s=t.replace(/FromIndex$/,""),i=t!==s,c=q1.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!(c||B1.includes(s)))return;const h=async function(m,...p){const v=this.transaction(m,c?"readwrite":"readonly");let x=v.store;return i&&(x=x.index(p.shift())),(await Promise.all([x[s](...p),c&&v.done]))[0]};return Xf.set(t,h),h}z1(r=>({...r,get:(t,s,i)=>Ky(t,s)||r.get(t,s,i),has:(t,s)=>!!Ky(t,s)||r.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(G1(s)){const i=s.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(s=>s).join(" ")}}function G1(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const id="@firebase/app",Xy="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=new m0("@firebase/app"),F1="@firebase/app-compat",$1="@firebase/analytics-compat",Y1="@firebase/analytics",Q1="@firebase/app-check-compat",K1="@firebase/app-check",X1="@firebase/auth",Z1="@firebase/auth-compat",J1="@firebase/database",W1="@firebase/data-connect",eE="@firebase/database-compat",tE="@firebase/functions",nE="@firebase/functions-compat",sE="@firebase/installations",aE="@firebase/installations-compat",rE="@firebase/messaging",iE="@firebase/messaging-compat",lE="@firebase/performance",oE="@firebase/performance-compat",cE="@firebase/remote-config",uE="@firebase/remote-config-compat",hE="@firebase/storage",fE="@firebase/storage-compat",dE="@firebase/firestore",mE="@firebase/ai",gE="@firebase/firestore-compat",pE="firebase",yE="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="[DEFAULT]",xE={[id]:"fire-core",[F1]:"fire-core-compat",[Y1]:"fire-analytics",[$1]:"fire-analytics-compat",[K1]:"fire-app-check",[Q1]:"fire-app-check-compat",[X1]:"fire-auth",[Z1]:"fire-auth-compat",[J1]:"fire-rtdb",[W1]:"fire-data-connect",[eE]:"fire-rtdb-compat",[tE]:"fire-fn",[nE]:"fire-fn-compat",[sE]:"fire-iid",[aE]:"fire-iid-compat",[rE]:"fire-fcm",[iE]:"fire-fcm-compat",[lE]:"fire-perf",[oE]:"fire-perf-compat",[cE]:"fire-rc",[uE]:"fire-rc-compat",[hE]:"fire-gcs",[fE]:"fire-gcs-compat",[dE]:"fire-fst",[gE]:"fire-fst-compat",[mE]:"fire-vertex","fire-js":"fire-js",[pE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Map,vE=new Map,od=new Map;function Zy(r,t){try{r.container.addComponent(t)}catch(s){na.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,s)}}function uu(r){const t=r.name;if(od.has(t))return na.debug(`There were multiple attempts to register component ${t}.`),!1;od.set(t,r);for(const s of cu.values())Zy(s,r);for(const s of vE.values())Zy(s,r);return!0}function bE(r,t){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(t)}function _E(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},La=new d0("app","Firebase",EE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t,s,i){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw La.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=yE;function y0(r,t={}){let s=r;typeof t!="object"&&(t={name:t});const i={name:ld,automaticDataCollectionEnabled:!0,...t},c=i.name;if(typeof c!="string"||!c)throw La.create("bad-app-name",{appName:String(c)});if(s||(s=f0()),!s)throw La.create("no-options");const h=cu.get(c);if(h){if(ou(s,h.options)&&ou(i,h.config))return h;throw La.create("duplicate-app",{appName:c})}const m=new S1(c);for(const v of od.values())m.addComponent(v);const p=new NE(s,i,m);return cu.set(c,p),p}function wE(r=ld){const t=cu.get(r);if(!t&&r===ld&&f0())return y0();if(!t)throw La.create("no-app",{appName:r});return t}function Ai(r,t,s){let i=xE[r]??r;s&&(i+=`-${s}`);const c=i.match(/\s|\//),h=t.match(/\s|\//);if(c||h){const m=[`Unable to register library "${i}" with version "${t}":`];c&&m.push(`library name "${i}" contains illegal characters (whitespace or "/")`),c&&h&&m.push("and"),h&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),na.warn(m.join(" "));return}uu(new ao(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="firebase-heartbeat-database",SE=1,ro="firebase-heartbeat-store";let Zf=null;function x0(){return Zf||(Zf=P1(jE,SE,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(ro)}catch(s){console.warn(s)}}}}).catch(r=>{throw La.create("idb-open",{originalErrorMessage:r.message})})),Zf}async function AE(r){try{const s=(await x0()).transaction(ro),i=await s.objectStore(ro).get(v0(r));return await s.done,i}catch(t){if(t instanceof Li)na.warn(t.message);else{const s=La.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});na.warn(s.message)}}}async function Jy(r,t){try{const i=(await x0()).transaction(ro,"readwrite");await i.objectStore(ro).put(t,v0(r)),await i.done}catch(s){if(s instanceof Li)na.warn(s.message);else{const i=La.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});na.warn(i.message)}}}function v0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=1024,RE=30;class DE{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new ME(s),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,s;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=Wy();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(m=>m.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:c}),this._heartbeatsCache.heartbeats.length>RE){const m=VE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){na.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Wy(),{heartbeatsToSend:i,unsentEntries:c}=IE(this._heartbeatsCache.heartbeats),h=lu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=s,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(s){return na.warn(s),""}}}function Wy(){return new Date().toISOString().substring(0,10)}function IE(r,t=CE){const s=[];let i=r.slice();for(const c of r){const h=s.find(m=>m.agent===c.agent);if(h){if(h.dates.push(c.date),ex(s)>t){h.dates.pop();break}}else if(s.push({agent:c.agent,dates:[c.date]}),ex(s)>t){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}class ME{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v1()?b1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await AE(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Jy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Jy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function ex(r){return lu(JSON.stringify({version:2,heartbeats:r})).length}function VE(r){if(r.length===0)return-1;let t=0,s=r[0].date;for(let i=1;i<r.length;i++)r[i].date<s&&(s=r[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(r){uu(new ao("platform-logger",t=>new H1(t),"PRIVATE")),uu(new ao("heartbeat",t=>new DE(t),"PRIVATE")),Ai(id,Xy,r),Ai(id,Xy,"esm2020"),Ai("fire-js","")}OE("");var kE="firebase",zE="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(kE,zE,"app");var tx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pa,b0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,w){function S(){}S.prototype=w.prototype,R.F=w.prototype,R.prototype=new S,R.prototype.constructor=R,R.D=function(M,j,V){for(var E=Array(arguments.length-2),me=2;me<arguments.length;me++)E[me-2]=arguments[me];return w.prototype[j].apply(M,E)}}function s(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,s),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(R,w,S){S||(S=0);const M=Array(16);if(typeof w=="string")for(var j=0;j<16;++j)M[j]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(j=0;j<16;++j)M[j]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=R.g[0],S=R.g[1],j=R.g[2];let V=R.g[3],E;E=w+(V^S&(j^V))+M[0]+3614090360&4294967295,w=S+(E<<7&4294967295|E>>>25),E=V+(j^w&(S^j))+M[1]+3905402710&4294967295,V=w+(E<<12&4294967295|E>>>20),E=j+(S^V&(w^S))+M[2]+606105819&4294967295,j=V+(E<<17&4294967295|E>>>15),E=S+(w^j&(V^w))+M[3]+3250441966&4294967295,S=j+(E<<22&4294967295|E>>>10),E=w+(V^S&(j^V))+M[4]+4118548399&4294967295,w=S+(E<<7&4294967295|E>>>25),E=V+(j^w&(S^j))+M[5]+1200080426&4294967295,V=w+(E<<12&4294967295|E>>>20),E=j+(S^V&(w^S))+M[6]+2821735955&4294967295,j=V+(E<<17&4294967295|E>>>15),E=S+(w^j&(V^w))+M[7]+4249261313&4294967295,S=j+(E<<22&4294967295|E>>>10),E=w+(V^S&(j^V))+M[8]+1770035416&4294967295,w=S+(E<<7&4294967295|E>>>25),E=V+(j^w&(S^j))+M[9]+2336552879&4294967295,V=w+(E<<12&4294967295|E>>>20),E=j+(S^V&(w^S))+M[10]+4294925233&4294967295,j=V+(E<<17&4294967295|E>>>15),E=S+(w^j&(V^w))+M[11]+2304563134&4294967295,S=j+(E<<22&4294967295|E>>>10),E=w+(V^S&(j^V))+M[12]+1804603682&4294967295,w=S+(E<<7&4294967295|E>>>25),E=V+(j^w&(S^j))+M[13]+4254626195&4294967295,V=w+(E<<12&4294967295|E>>>20),E=j+(S^V&(w^S))+M[14]+2792965006&4294967295,j=V+(E<<17&4294967295|E>>>15),E=S+(w^j&(V^w))+M[15]+1236535329&4294967295,S=j+(E<<22&4294967295|E>>>10),E=w+(j^V&(S^j))+M[1]+4129170786&4294967295,w=S+(E<<5&4294967295|E>>>27),E=V+(S^j&(w^S))+M[6]+3225465664&4294967295,V=w+(E<<9&4294967295|E>>>23),E=j+(w^S&(V^w))+M[11]+643717713&4294967295,j=V+(E<<14&4294967295|E>>>18),E=S+(V^w&(j^V))+M[0]+3921069994&4294967295,S=j+(E<<20&4294967295|E>>>12),E=w+(j^V&(S^j))+M[5]+3593408605&4294967295,w=S+(E<<5&4294967295|E>>>27),E=V+(S^j&(w^S))+M[10]+38016083&4294967295,V=w+(E<<9&4294967295|E>>>23),E=j+(w^S&(V^w))+M[15]+3634488961&4294967295,j=V+(E<<14&4294967295|E>>>18),E=S+(V^w&(j^V))+M[4]+3889429448&4294967295,S=j+(E<<20&4294967295|E>>>12),E=w+(j^V&(S^j))+M[9]+568446438&4294967295,w=S+(E<<5&4294967295|E>>>27),E=V+(S^j&(w^S))+M[14]+3275163606&4294967295,V=w+(E<<9&4294967295|E>>>23),E=j+(w^S&(V^w))+M[3]+4107603335&4294967295,j=V+(E<<14&4294967295|E>>>18),E=S+(V^w&(j^V))+M[8]+1163531501&4294967295,S=j+(E<<20&4294967295|E>>>12),E=w+(j^V&(S^j))+M[13]+2850285829&4294967295,w=S+(E<<5&4294967295|E>>>27),E=V+(S^j&(w^S))+M[2]+4243563512&4294967295,V=w+(E<<9&4294967295|E>>>23),E=j+(w^S&(V^w))+M[7]+1735328473&4294967295,j=V+(E<<14&4294967295|E>>>18),E=S+(V^w&(j^V))+M[12]+2368359562&4294967295,S=j+(E<<20&4294967295|E>>>12),E=w+(S^j^V)+M[5]+4294588738&4294967295,w=S+(E<<4&4294967295|E>>>28),E=V+(w^S^j)+M[8]+2272392833&4294967295,V=w+(E<<11&4294967295|E>>>21),E=j+(V^w^S)+M[11]+1839030562&4294967295,j=V+(E<<16&4294967295|E>>>16),E=S+(j^V^w)+M[14]+4259657740&4294967295,S=j+(E<<23&4294967295|E>>>9),E=w+(S^j^V)+M[1]+2763975236&4294967295,w=S+(E<<4&4294967295|E>>>28),E=V+(w^S^j)+M[4]+1272893353&4294967295,V=w+(E<<11&4294967295|E>>>21),E=j+(V^w^S)+M[7]+4139469664&4294967295,j=V+(E<<16&4294967295|E>>>16),E=S+(j^V^w)+M[10]+3200236656&4294967295,S=j+(E<<23&4294967295|E>>>9),E=w+(S^j^V)+M[13]+681279174&4294967295,w=S+(E<<4&4294967295|E>>>28),E=V+(w^S^j)+M[0]+3936430074&4294967295,V=w+(E<<11&4294967295|E>>>21),E=j+(V^w^S)+M[3]+3572445317&4294967295,j=V+(E<<16&4294967295|E>>>16),E=S+(j^V^w)+M[6]+76029189&4294967295,S=j+(E<<23&4294967295|E>>>9),E=w+(S^j^V)+M[9]+3654602809&4294967295,w=S+(E<<4&4294967295|E>>>28),E=V+(w^S^j)+M[12]+3873151461&4294967295,V=w+(E<<11&4294967295|E>>>21),E=j+(V^w^S)+M[15]+530742520&4294967295,j=V+(E<<16&4294967295|E>>>16),E=S+(j^V^w)+M[2]+3299628645&4294967295,S=j+(E<<23&4294967295|E>>>9),E=w+(j^(S|~V))+M[0]+4096336452&4294967295,w=S+(E<<6&4294967295|E>>>26),E=V+(S^(w|~j))+M[7]+1126891415&4294967295,V=w+(E<<10&4294967295|E>>>22),E=j+(w^(V|~S))+M[14]+2878612391&4294967295,j=V+(E<<15&4294967295|E>>>17),E=S+(V^(j|~w))+M[5]+4237533241&4294967295,S=j+(E<<21&4294967295|E>>>11),E=w+(j^(S|~V))+M[12]+1700485571&4294967295,w=S+(E<<6&4294967295|E>>>26),E=V+(S^(w|~j))+M[3]+2399980690&4294967295,V=w+(E<<10&4294967295|E>>>22),E=j+(w^(V|~S))+M[10]+4293915773&4294967295,j=V+(E<<15&4294967295|E>>>17),E=S+(V^(j|~w))+M[1]+2240044497&4294967295,S=j+(E<<21&4294967295|E>>>11),E=w+(j^(S|~V))+M[8]+1873313359&4294967295,w=S+(E<<6&4294967295|E>>>26),E=V+(S^(w|~j))+M[15]+4264355552&4294967295,V=w+(E<<10&4294967295|E>>>22),E=j+(w^(V|~S))+M[6]+2734768916&4294967295,j=V+(E<<15&4294967295|E>>>17),E=S+(V^(j|~w))+M[13]+1309151649&4294967295,S=j+(E<<21&4294967295|E>>>11),E=w+(j^(S|~V))+M[4]+4149444226&4294967295,w=S+(E<<6&4294967295|E>>>26),E=V+(S^(w|~j))+M[11]+3174756917&4294967295,V=w+(E<<10&4294967295|E>>>22),E=j+(w^(V|~S))+M[2]+718787259&4294967295,j=V+(E<<15&4294967295|E>>>17),E=S+(V^(j|~w))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(j+(E<<21&4294967295|E>>>11))&4294967295,R.g[2]=R.g[2]+j&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.v=function(R,w){w===void 0&&(w=R.length);const S=w-this.blockSize,M=this.C;let j=this.h,V=0;for(;V<w;){if(j==0)for(;V<=S;)c(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<w;)if(M[j++]=R.charCodeAt(V++),j==this.blockSize){c(this,M),j=0;break}}else for(;V<w;)if(M[j++]=R[V++],j==this.blockSize){c(this,M),j=0;break}}this.h=j,this.o+=w},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var S=R.length-8;S<R.length;++S)R[S]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,S=0;S<4;++S)for(let M=0;M<32;M+=8)R[w++]=this.g[S]>>>M&255;return R};function h(R,w){var S=p;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=w(R)}function m(R,w){this.h=w;const S=[];let M=!0;for(let j=R.length-1;j>=0;j--){const V=R[j]|0;M&&V==w||(S[j]=V,M=!1)}this.g=S}var p={};function v(R){return-128<=R&&R<128?h(R,function(w){return new m([w|0],w<0?-1:0)}):new m([R|0],R<0?-1:0)}function x(R){if(isNaN(R)||!isFinite(R))return C;if(R<0)return X(x(-R));const w=[];let S=1;for(let M=0;R>=S;M++)w[M]=R/S|0,S*=4294967296;return new m(w,0)}function T(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return X(T(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=x(Math.pow(w,8));let M=C;for(let V=0;V<R.length;V+=8){var j=Math.min(8,R.length-V);const E=parseInt(R.substring(V,V+j),w);j<8?(j=x(Math.pow(w,j)),M=M.j(j).add(x(E))):(M=M.j(S),M=M.add(x(E)))}return M}var C=v(0),I=v(1),G=v(16777216);r=m.prototype,r.m=function(){if(ie(this))return-X(this).m();let R=0,w=1;for(let S=0;S<this.g.length;S++){const M=this.i(S);R+=(M>=0?M:4294967296+M)*w,w*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(te(this))return"0";if(ie(this))return"-"+X(this).toString(R);const w=x(Math.pow(R,6));var S=this;let M="";for(;;){const j=be(S,w).g;S=ye(S,j.j(w));let V=((S.g.length>0?S.g[0]:S.h)>>>0).toString(R);if(S=j,te(S))return V+M;for(;V.length<6;)V="0"+V;M=V+M}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function te(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function ie(R){return R.h==-1}r.l=function(R){return R=ye(this,R),ie(R)?-1:te(R)?0:1};function X(R){const w=R.g.length,S=[];for(let M=0;M<w;M++)S[M]=~R.g[M];return new m(S,~R.h).add(I)}r.abs=function(){return ie(this)?X(this):this},r.add=function(R){const w=Math.max(this.g.length,R.g.length),S=[];let M=0;for(let j=0;j<=w;j++){let V=M+(this.i(j)&65535)+(R.i(j)&65535),E=(V>>>16)+(this.i(j)>>>16)+(R.i(j)>>>16);M=E>>>16,V&=65535,E&=65535,S[j]=E<<16|V}return new m(S,S[S.length-1]&-2147483648?-1:0)};function ye(R,w){return R.add(X(w))}r.j=function(R){if(te(this)||te(R))return C;if(ie(this))return ie(R)?X(this).j(X(R)):X(X(this).j(R));if(ie(R))return X(this.j(X(R)));if(this.l(G)<0&&R.l(G)<0)return x(this.m()*R.m());const w=this.g.length+R.g.length,S=[];for(var M=0;M<2*w;M++)S[M]=0;for(M=0;M<this.g.length;M++)for(let j=0;j<R.g.length;j++){const V=this.i(M)>>>16,E=this.i(M)&65535,me=R.i(j)>>>16,Oe=R.i(j)&65535;S[2*M+2*j]+=E*Oe,pe(S,2*M+2*j),S[2*M+2*j+1]+=V*Oe,pe(S,2*M+2*j+1),S[2*M+2*j+1]+=E*me,pe(S,2*M+2*j+1),S[2*M+2*j+2]+=V*me,pe(S,2*M+2*j+2)}for(R=0;R<w;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=w;R<2*w;R++)S[R]=0;return new m(S,0)};function pe(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function de(R,w){this.g=R,this.h=w}function be(R,w){if(te(w))throw Error("division by zero");if(te(R))return new de(C,C);if(ie(R))return w=be(X(R),w),new de(X(w.g),X(w.h));if(ie(w))return w=be(R,X(w)),new de(X(w.g),w.h);if(R.g.length>30){if(ie(R)||ie(w))throw Error("slowDivide_ only works with positive integers.");for(var S=I,M=w;M.l(R)<=0;)S=De(S),M=De(M);var j=we(S,1),V=we(M,1);for(M=we(M,2),S=we(S,2);!te(M);){var E=V.add(M);E.l(R)<=0&&(j=j.add(S),V=E),M=we(M,1),S=we(S,1)}return w=ye(R,j.j(w)),new de(j,w)}for(j=C;R.l(w)>=0;){for(S=Math.max(1,Math.floor(R.m()/w.m())),M=Math.ceil(Math.log(S)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),V=x(S),E=V.j(w);ie(E)||E.l(R)>0;)S-=M,V=x(S),E=V.j(w);te(V)&&(V=I),j=j.add(V),R=ye(R,E)}return new de(j,R)}r.B=function(R){return be(this,R).h},r.and=function(R){const w=Math.max(this.g.length,R.g.length),S=[];for(let M=0;M<w;M++)S[M]=this.i(M)&R.i(M);return new m(S,this.h&R.h)},r.or=function(R){const w=Math.max(this.g.length,R.g.length),S=[];for(let M=0;M<w;M++)S[M]=this.i(M)|R.i(M);return new m(S,this.h|R.h)},r.xor=function(R){const w=Math.max(this.g.length,R.g.length),S=[];for(let M=0;M<w;M++)S[M]=this.i(M)^R.i(M);return new m(S,this.h^R.h)};function De(R){const w=R.g.length+1,S=[];for(let M=0;M<w;M++)S[M]=R.i(M)<<1|R.i(M-1)>>>31;return new m(S,R.h)}function we(R,w){const S=w>>5;w%=32;const M=R.g.length-S,j=[];for(let V=0;V<M;V++)j[V]=w>0?R.i(V+S)>>>w|R.i(V+S+1)<<32-w:R.i(V+S);return new m(j,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,b0=i,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=x,m.fromString=T,Pa=m}).apply(typeof tx<"u"?tx:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _0,Kl,E0,tu,cd,N0,T0,w0;(function(){var r,t=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=s(this);function c(u,g){if(g)e:{var b=i;u=u.split(".");for(var N=0;N<u.length-1;N++){var U=u[N];if(!(U in b))break e;b=b[U]}u=u[u.length-1],N=b[u],g=g(N),g!=N&&g!=null&&t(b,u,{configurable:!0,writable:!0,value:g})}}c("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(u){return u||function(g){var b=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&b.push([N,g[N]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function v(u,g,b){return u.call.apply(u.bind,arguments)}function x(u,g,b){return x=v,x.apply(null,arguments)}function T(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function C(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(N,U,F){for(var ce=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ce[ke-2]=arguments[ke];return g.prototype[U].apply(N,ce)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function G(u){const g=u.length;if(g>0){const b=Array(g);for(let N=0;N<g;N++)b[N]=u[N];return b}return[]}function te(u,g){for(let N=1;N<arguments.length;N++){const U=arguments[N];var b=typeof U;if(b=b!="object"?b:U?Array.isArray(U)?"array":b:"null",b=="array"||b=="object"&&typeof U.length=="number"){b=u.length||0;const F=U.length||0;u.length=b+F;for(let ce=0;ce<F;ce++)u[b+ce]=U[ce]}else u.push(U)}}class ie{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function X(u){m.setTimeout(()=>{throw u},0)}function ye(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class pe{constructor(){this.h=this.g=null}add(g,b){const N=de.get();N.set(g,b),this.h?this.h.next=N:this.g=N,this.h=N}}var de=new ie(()=>new be,u=>u.reset());class be{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let De,we=!1,R=new pe,w=()=>{const u=Promise.resolve(void 0);De=()=>{u.then(S)}};function S(){for(var u;u=ye();){try{u.h.call(u.g)}catch(b){X(b)}var g=de;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}we=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};m.addEventListener("test",b,g),m.removeEventListener("test",b,g)}catch{}return u})();function E(u){return/^[\s\xa0]*$/.test(u)}function me(u,g){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}C(me,j),me.prototype.init=function(u,g){const b=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),q=0;function Z(u,g,b,N,U){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!N,this.ha=U,this.key=++q,this.da=this.fa=!1}function he(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ie(u,g,b){for(const N in u)g.call(b,u[N],N,u)}function Le(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function A(u){const g={};for(const b in u)g[b]=u[b];return g}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(u,g){let b,N;for(let U=1;U<arguments.length;U++){N=arguments[U];for(b in N)u[b]=N[b];for(let F=0;F<Q.length;F++)b=Q[F],Object.prototype.hasOwnProperty.call(N,b)&&(u[b]=N[b])}}function O(u){this.src=u,this.g={},this.h=0}O.prototype.add=function(u,g,b,N,U){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const ce=ve(u,g,N,U);return ce>-1?(g=u[ce],b||(g.fa=!1)):(g=new Z(g,this.src,F,!!N,U),g.fa=b,u.push(g)),g};function ne(u,g){const b=g.type;if(b in u.g){var N=u.g[b],U=Array.prototype.indexOf.call(N,g,void 0),F;(F=U>=0)&&Array.prototype.splice.call(N,U,1),F&&(he(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function ve(u,g,b,N){for(let U=0;U<u.length;++U){const F=u[U];if(!F.da&&F.listener==g&&F.capture==!!b&&F.ha==N)return U}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),$={};function ue(u,g,b,N,U){if(Array.isArray(g)){for(let F=0;F<g.length;F++)ue(u,g[F],b,N,U);return null}return b=Ee(b),u&&u[Oe]?u.J(g,b,p(N)?!!N.capture:!1,U):je(u,g,b,!1,N,U)}function je(u,g,b,N,U,F){if(!g)throw Error("Invalid event type");const ce=p(U)?!!U.capture:!!U;let ke=ae(u);if(ke||(u[oe]=ke=new O(u)),b=ke.add(g,b,N,ce,F),b.proxy)return b;if(N=qe(),b.proxy=N,N.src=u,N.listener=b,u.addEventListener)V||(U=ce),U===void 0&&(U=!1),u.addEventListener(g.toString(),N,U);else if(u.attachEvent)u.attachEvent(Et(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function qe(){function u(b){return g.call(u.src,u.listener,b)}const g=bn;return u}function xt(u,g,b,N,U){if(Array.isArray(g))for(var F=0;F<g.length;F++)xt(u,g[F],b,N,U);else N=p(N)?!!N.capture:!!N,b=Ee(b),u&&u[Oe]?(u=u.i,F=String(g).toString(),F in u.g&&(g=u.g[F],b=ve(g,b,N,U),b>-1&&(he(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[F],u.h--)))):u&&(u=ae(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ve(g,b,N,U)),(b=u>-1?g[u]:null)&&_t(b))}function _t(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Oe])ne(g.i,u);else{var b=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(b,N,u.capture):g.detachEvent?g.detachEvent(Et(b),N):g.addListener&&g.removeListener&&g.removeListener(N),(b=ae(g))?(ne(b,u),b.h==0&&(b.src=null,g[oe]=null)):he(u)}}}function Et(u){return u in $?$[u]:$[u]="on"+u}function bn(u,g){if(u.da)u=!0;else{g=new me(g,this);const b=u.listener,N=u.ha||u.src;u.fa&&_t(u),u=b.call(N,g)}return u}function ae(u){return u=u[oe],u instanceof O?u:null}var H="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ee(u){return typeof u=="function"?u:(u[H]||(u[H]=function(g){return u.handleEvent(g)}),u[H])}function Ae(){M.call(this),this.i=new O(this),this.M=this,this.G=null}C(Ae,M),Ae.prototype[Oe]=!0,Ae.prototype.removeEventListener=function(u,g,b,N){xt(this,u,g,b,N)};function Qe(u,g){var b,N=u.G;if(N)for(b=[];N;N=N.G)b.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new j(g,u);else if(g instanceof j)g.target=g.target||u;else{var U=g;g=new j(N,u),le(g,U)}U=!0;let F,ce;if(b)for(ce=b.length-1;ce>=0;ce--)F=g.g=b[ce],U=Nt(F,N,!0,g)&&U;if(F=g.g=u,U=Nt(F,N,!0,g)&&U,U=Nt(F,N,!1,g)&&U,b)for(ce=0;ce<b.length;ce++)F=g.g=b[ce],U=Nt(F,N,!1,g)&&U}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let N=0;N<b.length;N++)he(b[N]);delete u.g[g],u.h--}}this.G=null},Ae.prototype.J=function(u,g,b,N){return this.i.add(String(u),g,!1,b,N)},Ae.prototype.K=function(u,g,b,N){return this.i.add(String(u),g,!0,b,N)};function Nt(u,g,b,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let U=!0;for(let F=0;F<g.length;++F){const ce=g[F];if(ce&&!ce.da&&ce.capture==b){const ke=ce.listener,wt=ce.ha||ce.src;ce.fa&&ne(u.i,ce),U=ke.call(wt,N)!==!1&&U}}return U&&!N.defaultPrevented}function Dn(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:m.setTimeout(u,g||0)}function In(u){u.g=Dn(()=>{u.g=null,u.i&&(u.i=!1,In(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Bt extends M{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:In(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ja(u){M.call(this),this.h=u,this.g={}}C(Ja,M);var Fi=[];function $i(u){Ie(u.g,function(g,b){this.g.hasOwnProperty(b)&&_t(g)},u),u.g={}}Ja.prototype.N=function(){Ja.Z.N.call(this),$i(this)},Ja.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ra=m.JSON.stringify,Hu=m.JSON.parse,Eo=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function No(){}function To(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){j.call(this,"d")}C(Qt,j);function Mn(){j.call(this,"c")}C(Mn,j);var Tt={},wo=null;function zr(){return wo=wo||new Ae}Tt.Ia="serverreachability";function jo(u){j.call(this,Tt.Ia,u)}C(jo,j);function ls(u){const g=zr();Qe(g,new jo(g))}Tt.STAT_EVENT="statevent";function Wa(u,g){j.call(this,Tt.STAT_EVENT,u),this.stat=g}C(Wa,j);function Ct(u){const g=zr();Qe(g,new Wa(g,u))}Tt.Ja="timingevent";function os(u,g){j.call(this,Tt.Ja,u),this.size=g}C(os,j);function cs(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},g)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function Gu(u,g,b,N,U,F){u.info(function(){if(u.g)if(F){var ce="",ke=F.split("&");for(let We=0;We<ke.length;We++){var wt=ke[We].split("=");if(wt.length>1){const gt=wt[0];wt=wt[1];const zn=gt.split("_");ce=zn.length>=2&&zn[1]=="type"?ce+(gt+"="+wt+"&"):ce+(gt+"=redacted&")}}}else ce=null;else ce=F;return"XMLHTTP REQ ("+N+") [attempt "+U+"]: "+g+`
`+b+`
`+ce})}function So(u,g,b,N,U,F,ce){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+U+"]: "+g+`
`+b+`
`+F+" "+ce})}function us(u,g,b,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Fu(u,b)+(N?" "+N:"")})}function er(u,g){u.info(function(){return"TIMEOUT: "+g})}Qn.prototype.info=function(){};function Fu(u,g){if(!u.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var b=F[u];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var U=N[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ce=1;ce<N.length;ce++)N[ce]=""}}}}return ra(F)}catch{return g}}var tr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qi;function nr(){}C(nr,No),nr.prototype.g=function(){return new XMLHttpRequest},Qi=new nr;function Os(u){return encodeURIComponent(String(u))}function Ao(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function Kn(u,g,b,N){this.j=u,this.i=g,this.l=b,this.S=N||1,this.V=new Ja(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var Rt={},Gt={};function hs(u,g,b){u.M=1,u.A=sr(It(g)),u.u=b,u.R=!0,Ur(u,null)}function Ur(u,g){u.F=Date.now(),fs(u),u.B=It(u.A);var b=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),qr(b.i,"t",N),u.C=0,b=u.j.L,u.h=new Xn,u.g=Ho(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Bt(x(u.Y,u,u.g),u.P)),g=u.V,b=u.g,N=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Fi[0]=U.toString()),U=Fi);for(let F=0;F<U.length;F++){const ce=ue(b,U[F],N||g.handleEvent,!1,g.h||g);if(!ce)break;g.g[ce.key]=ce}g=u.J?A(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ls(),Gu(u.i,u.v,u.B,u.l,u.S,u.u)}Kn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Wn(u)==3?g.j():this.Y(u)},Kn.prototype.Y=function(u){try{if(u==this.g)e:{const ke=Wn(this.g),wt=this.g.ya(),We=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Kt(this.g)))){this.K||ke!=4||wt==7||(wt==8||We<=0?ls(3):ls(2)),ds(this);var g=this.g.ca();this.X=g;var b=$u(this);if(this.o=g==200,So(this.i,this.v,this.B,this.l,this.S,ke,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,U=this.g;if((N=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(N)){var F=N;break t}}F=null}if(u=F)us(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ms(this,u);else{this.o=!1,this.m=3,Ct(12),_n(this),Vn(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<b.length;)if(gt=Ro(this,b),gt==Gt){ke==4&&(this.m=4,Ct(14),u=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Rt){this.m=4,Ct(15),us(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else us(this.i,this.l,gt,null),ms(this,gt);if(Co(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||b.length!=0||this.h.h||(this.m=1,Ct(16),u=!1),this.o=this.o&&u,!u)us(this.i,this.l,b,"[Invalid Chunked Response]"),_n(this),Vn(this);else if(b.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),cl(ce),ce.P=!0,Ct(11))}}else us(this.i,this.l,b,null),ms(this,b);ke==4&&_n(this),this.o&&!this.K&&(ke==4?Lo(this.j,this):(this.o=!1,fs(this)))}else zs(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),_n(this),Vn(this)}}}catch{}finally{}};function $u(u){if(!Co(u))return u.g.la();const g=Kt(u.g);if(g==="")return"";let b="";const N=g.length,U=Wn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return _n(u),Vn(u),"";u.h.i=new m.TextDecoder}for(let F=0;F<N;F++)u.h.h=!0,b+=u.h.i.decode(g[F],{stream:!(U&&F==N-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Co(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ro(u,g){var b=u.C,N=g.indexOf(`
`,b);return N==-1?Gt:(b=Number(g.substring(b,N)),isNaN(b)?Rt:(N+=1,N+b>g.length?Gt:(g=g.slice(N,N+b),u.C=N+b,g)))}Kn.prototype.cancel=function(){this.K=!0,_n(this)};function fs(u){u.T=Date.now()+u.H,Lr(u,u.H)}function Lr(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=cs(x(u.aa,u),g)}function ds(u){u.D&&(m.clearTimeout(u.D),u.D=null)}Kn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(er(this.i,this.B),this.M!=2&&(ls(),Ct(17)),_n(this),this.m=2,Vn(this)):Lr(this,this.T-u)};function Vn(u){u.j.I==0||u.K||Lo(u.j,u)}function _n(u){ds(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,$i(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function ms(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||ps(b.h,u))){if(!u.L&&ps(b.h,u)&&b.I==3){try{var N=b.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var U=N;if(U[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Yr(b),da(b);else break e;ur(b),Ct(18)}}else b.xa=U[1],0<b.xa-b.K&&U[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=cs(x(b.Va,b),6e3));gs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Es(b,11)}else if((u.L||b.g==u)&&Yr(b),!E(g))for(U=b.Ba.g.parse(g),g=0;g<U.length;g++){let We=U[g];const gt=We[0];if(!(gt<=b.K))if(b.K=gt,We=We[1],b.I==2)if(We[0]=="c"){b.M=We[1],b.ba=We[2];const zn=We[3];zn!=null&&(b.ka=zn,b.j.info("VER="+b.ka));const Ns=We[4];Ns!=null&&(b.za=Ns,b.j.info("SVER="+b.za));const es=We[5];es!=null&&typeof es=="number"&&es>0&&(N=1.5*es,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const ts=u.g;if(ts){const hr=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hr){var F=N.h;F.g||hr.indexOf("spdy")==-1&&hr.indexOf("quic")==-1&&hr.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Zi(F,F.h),F.h=null))}if(N.G){const Qr=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Qr&&(N.wa=Qr,nt(N.J,N.G,Qr))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var ce=u;if(N.na=qo(N,N.L?N.ba:null,N.W),ce.L){Ji(N.h,ce);var ke=ce,wt=N.O;wt&&(ke.H=wt),ke.D&&(ds(ke),fs(ke)),N.g=ce}else zo(N);b.i.length>0&&_s(b)}else We[0]!="stop"&&We[0]!="close"||Es(b,7);else b.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Es(b,7):ll(b):We[0]!="noop"&&b.l&&b.l.qa(We),b.A=0)}}ls(4)}catch{}}var Dt=class{constructor(u,g){this.g=u,this.map=g}};function Ki(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xi(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function gs(u){return u.h?1:u.g?u.g.size:0}function ps(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Zi(u,g){u.g?u.g.add(g):u.h=g}function Ji(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ki.prototype.cancel=function(){if(this.i=Wi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Wi(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return G(u.i)}var Do=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pr(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const N=u[b].indexOf("=");let U,F=null;N>=0?(U=u[b].substring(0,N),F=u[b].substring(N+1)):U=u[b],g(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function En(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof En?(this.l=u.l,Ft(this,u.j),this.o=u.o,this.g=u.g,ia(this,u.u),this.h=u.h,el(this,Oo(u.i)),this.m=u.m):u&&(g=String(u).match(Do))?(this.l=!1,Ft(this,g[1]||"",!0),this.o=ys(g[2]||""),this.g=ys(g[3]||"",!0),ia(this,g[4]),this.h=ys(g[5]||"",!0),el(this,g[6]||"",!0),this.m=ys(g[7]||"")):(this.l=!1,this.i=new oa(null,this.l))}En.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(ar(g,Br,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ar(g,Br,!0),"@"),u.push(Os(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(ar(b,b.charAt(0)=="/"?tl:Io,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",ar(b,Mo)),u.join("")},En.prototype.resolve=function(u){const g=It(this);let b=!!u.j;b?Ft(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var N=u.h;if(b)ia(g,u.u);else if(b=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var U=g.h.lastIndexOf("/");U!=-1&&(N=g.h.slice(0,U+1)+N)}if(U=N,U==".."||U==".")N="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){N=U.lastIndexOf("/",0)==0,U=U.split("/");const F=[];for(let ce=0;ce<U.length;){const ke=U[ce++];ke=="."?N&&ce==U.length&&F.push(""):ke==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),N&&ce==U.length&&F.push("")):(F.push(ke),N=!0)}N=F.join("/")}else N=U}return b?g.h=N:b=u.i.toString()!=="",b?el(g,Oo(u.i)):b=!!u.m,b&&(g.m=u.m),g};function It(u){return new En(u)}function Ft(u,g,b){u.j=b?ys(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ia(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function el(u,g,b){g instanceof oa?(u.i=g,Hr(u.i,u.l)):(b||(g=ar(g,la)),u.i=new oa(g,u.l))}function nt(u,g,b){u.i.set(g,b)}function sr(u){return nt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ys(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ar(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,un),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function un(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Br=/[#\/\?@]/g,Io=/[#\?:]/g,tl=/[#\?]/g,la=/[#\?@]/g,Mo=/#/g;function oa(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function hn(u){u.g||(u.g=new Map,u.h=0,u.i&&Pr(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}r=oa.prototype,r.add=function(u,g){hn(this),this.i=null,u=ca(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Vo(u,g){hn(u),g=ca(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function nl(u,g){return hn(u),g=ca(u,g),u.g.has(g)}r.forEach=function(u,g){hn(this),this.g.forEach(function(b,N){b.forEach(function(U){u.call(g,U,N,this)},this)},this)};function sl(u,g){hn(u);let b=[];if(typeof g=="string")nl(u,g)&&(b=b.concat(u.g.get(ca(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}r.set=function(u,g){return hn(this),this.i=null,u=ca(this,u),nl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=sl(this,u),u.length>0?String(u[0]):g):g};function qr(u,g,b){Vo(u,g),b.length>0&&(u.i=null,u.g.set(ca(u,g),G(b)),u.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var b=g[N];const U=Os(b);b=sl(this,b);for(let F=0;F<b.length;F++){let ce=U;b[F]!==""&&(ce+="="+Os(b[F])),u.push(ce)}}return this.i=u.join("&")};function Oo(u){const g=new oa;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function ca(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Hr(u,g){g&&!u.j&&(hn(u),u.i=null,u.g.forEach(function(b,N){const U=N.toLowerCase();N!=U&&(Vo(this,N),qr(this,U,b))},u)),u.j=g}function Zn(u,g){const b=new Qn;if(m.Image){const N=new Image;N.onload=T(On,b,"TestLoadImage: loaded",!0,g,N),N.onerror=T(On,b,"TestLoadImage: error",!1,g,N),N.onabort=T(On,b,"TestLoadImage: abort",!1,g,N),N.ontimeout=T(On,b,"TestLoadImage: timeout",!1,g,N),m.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function al(u,g){const b=new Qn,N=new AbortController,U=setTimeout(()=>{N.abort(),On(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then(F=>{clearTimeout(U),F.ok?On(b,"TestPingServer: ok",!0,g):On(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),On(b,"TestPingServer: error",!1,g)})}function On(u,g,b,N,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),N(b)}catch{}}function ua(){this.g=new Eo}function xs(u){this.i=u.Sb||null,this.h=u.ab||!1}C(xs,No),xs.prototype.g=function(){return new rr(this.i,this.h)};function rr(u,g){Ae.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(rr,Ae),r=rr.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Jn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||m).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ha(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Gr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Gr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ha(this):Jn(this),this.readyState==3&&Gr(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ha(this))},r.Na=function(u){this.g&&(this.response=u,ha(this))},r.ga=function(){this.g&&ha(this)};function ha(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Jn(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function Jn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(rr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function kn(u){let g="";return Ie(u,function(b,N){g+=N,g+=":",g+=b,g+=`\r
`}),g}function ir(u,g,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=kn(b),typeof u=="string"?b!=null&&Os(b):nt(u,g,b))}function rt(u){Ae.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(rt,Ae);var vs=/^https?$/i,rl=["POST","PUT"];r=rt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qi.g(),this.g.onreadystatechange=I(x(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(F){lr(this,F);return}if(u=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var U in N)b.set(U,N[U]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())b.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(F=>F.toLowerCase()=="content-type"),U=m.FormData&&u instanceof m.FormData,!(Array.prototype.indexOf.call(rl,g,void 0)>=0)||N||U||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ce]of b)this.g.setRequestHeader(F,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){lr(this,F)}};function lr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,il(u),ks(u)}function il(u){u.A||(u.A=!0,Qe(u,"complete"),Qe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Qe(this,"complete"),Qe(this,"abort"),ks(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),rt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?or(this):this.Xa())},r.Xa=function(){or(this)};function or(u){if(u.h&&typeof h<"u"){if(u.v&&Wn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Qe(u,"readystatechange"),Wn(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var N;if(N=F===0){let ce=String(u.D).match(Do)[1]||null;!ce&&m.self&&m.self.location&&(ce=m.self.location.protocol.slice(0,-1)),N=!vs.test(ce?ce.toLowerCase():"")}b=N}if(b)Qe(u,"complete"),Qe(u,"success");else{u.o=6;try{var U=Wn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",il(u)}}finally{ks(u)}}}}function ks(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||Qe(u,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Wn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Hu(g)}};function Kt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zs(u){const g={};u=(u.g&&Wn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(E(u[N]))continue;var b=Ao(u[N]);const U=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const F=g[U]||[];g[U]=F,F.push(b)}Le(g,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function fa(u){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bs("baseRetryDelayMs",5e3,u),this.Za=bs("retryDelaySeedMs",1e4,u),this.Ta=bs("forwardChannelMaxRetries",2,u),this.va=bs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ki(u&&u.concurrentRequestLimit),this.Ba=new ua,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=fa.prototype,r.ka=8,r.I=1,r.connect=function(u,g,b,N){Ct(0),this.W=u,this.H=g||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=qo(this,null,this.W),_s(this)};function ll(u){if(Fr(u),u.I==3){var g=u.V++,b=It(u.J);if(nt(b,"SID",u.M),nt(b,"RID",g),nt(b,"TYPE","terminate"),cr(u,b),g=new Kn(u,u.j,g),g.M=2,g.A=sr(It(b)),b=!1,m.navigator&&m.navigator.sendBeacon)try{b=m.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&m.Image&&(new Image().src=g.A,b=!0),b||(g.g=Ho(g.j,null),g.g.ea(g.A)),g.F=Date.now(),fs(g)}Bo(u)}function da(u){u.g&&(cl(u),u.g.cancel(),u.g=null)}function Fr(u){da(u),u.v&&(m.clearTimeout(u.v),u.v=null),Yr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&m.clearTimeout(u.m),u.m=null)}function _s(u){if(!Xi(u.h)&&!u.m){u.m=!0;var g=u.Ea;De||w(),we||(De(),we=!0),R.add(g,u),u.D=0}}function $r(u,g){return gs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=cs(x(u.Ea,u,g),Po(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new Kn(this,this.j,u);let F=this.o;if(this.U&&(F?(F=A(F),le(F,this.U)):F=this.U),this.u!==null||this.R||(U.J=F,F=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=ko(this,U,g),b=It(this.J),nt(b,"RID",u),nt(b,"CVER",22),this.G&&nt(b,"X-HTTP-Session-Id",this.G),cr(this,b),F&&(this.R?g="headers="+Os(kn(F))+"&"+g:this.u&&ir(b,this.u,F)),Zi(this.h,U),this.Ra&&nt(b,"TYPE","init"),this.S?(nt(b,"$req",g),nt(b,"SID","null"),U.U=!0,hs(U,b,null)):hs(U,b,g),this.I=2}}else this.I==3&&(u?ol(this,u):this.i.length==0||Xi(this.h)||ol(this))};function ol(u,g){var b;g?b=g.l:b=u.V++;const N=It(u.J);nt(N,"SID",u.M),nt(N,"RID",b),nt(N,"AID",u.K),cr(u,N),u.u&&u.o&&ir(N,u.u,u.o),b=new Kn(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=ko(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Zi(u.h,b),hs(b,N,g)}function cr(u,g){u.H&&Ie(u.H,function(b,N){nt(g,N,b)}),u.l&&Ie({},function(b,N){nt(g,N,b)})}function ko(u,g,b){b=Math.min(u.i.length,b);const N=u.l?x(u.l.Ka,u.l,u):null;e:{var U=u.i;let ke=-1;for(;;){const wt=["count="+b];ke==-1?b>0?(ke=U[0].g,wt.push("ofs="+ke)):ke=0:wt.push("ofs="+ke);let We=!0;for(let gt=0;gt<b;gt++){var F=U[gt].g;const zn=U[gt].map;if(F-=ke,F<0)ke=Math.max(0,U[gt].g-100),We=!1;else try{F="req"+F+"_"||"";try{var ce=zn instanceof Map?zn:Object.entries(zn);for(const[Ns,es]of ce){let ts=es;p(es)&&(ts=ra(es)),wt.push(F+Ns+"="+encodeURIComponent(ts))}}catch(Ns){throw wt.push(F+"type="+encodeURIComponent("_badmap")),Ns}}catch{N&&N(zn)}}if(We){ce=wt.join("&");break e}}ce=void 0}return u=u.i.splice(0,b),g.G=u,ce}function zo(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;De||w(),we||(De(),we=!0),R.add(g,u),u.A=0}}function ur(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=cs(x(u.Da,u),Po(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Uo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=cs(x(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),da(this),Uo(this))};function cl(u){u.B!=null&&(m.clearTimeout(u.B),u.B=null)}function Uo(u){u.g=new Kn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=It(u.na);nt(g,"RID","rpc"),nt(g,"SID",u.M),nt(g,"AID",u.K),nt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&nt(g,"TO",u.ia),nt(g,"TYPE","xmlhttp"),cr(u,g),u.u&&u.o&&ir(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=sr(It(g)),b.u=null,b.R=!0,Ur(b,u)}r.Va=function(){this.C!=null&&(this.C=null,da(this),ur(this),Ct(19))};function Yr(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Lo(u,g){var b=null;if(u.g==g){Yr(u),cl(u),u.g=null;var N=2}else if(ps(u.h,g))b=g.G,Ji(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var U=u.D;N=zr(),Qe(N,new os(N,b)),_s(u)}else zo(u);else if(U=g.m,U==3||U==0&&g.X>0||!(N==1&&$r(u,g)||N==2&&ur(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),U){case 1:Es(u,5);break;case 4:Es(u,10);break;case 3:Es(u,6);break;default:Es(u,2)}}}function Po(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Es(u,g){if(u.j.info("Error code "+g),g==2){var b=x(u.bb,u),N=u.Ua;const U=!N;N=new En(N||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ft(N,"https"),sr(N),U?Zn(N.toString(),b):al(N.toString(),b)}else Ct(2);u.I=0,u.l&&u.l.pa(g),Bo(u),Fr(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Bo(u){if(u.I=0,u.ja=[],u.l){const g=Wi(u.h);(g.length!=0||u.i.length!=0)&&(te(u.ja,g),te(u.ja,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.oa()}}function qo(u,g,b){var N=b instanceof En?It(b):new En(b);if(N.g!="")g&&(N.g=g+"."+N.g),ia(N,N.u);else{var U=m.location;N=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;const F=new En(null);N&&Ft(F,N),g&&(F.g=g),U&&ia(F,U),b&&(F.h=b),N=F}return b=u.G,g=u.wa,b&&g&&nt(N,b,g),nt(N,"VER",u.ka),cr(u,N),N}function Ho(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new rt(new xs({ab:b})):new rt(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Go(){}r=Go.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ma(){}ma.prototype.g=function(u,g){return new on(u,g)};function on(u,g){Ae.call(this),this.g=new fa(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!E(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!E(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Us(this)}C(on,Ae),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){ll(this.g)},on.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=ra(u),u=b);g.i.push(new Dt(g.Ya++,u)),g.I==3&&_s(g)},on.prototype.N=function(){this.g.l=null,delete this.j,ll(this.g),delete this.g,on.Z.N.call(this)};function Fo(u){Qt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}C(Fo,Qt);function $o(){Mn.call(this),this.status=1}C($o,Mn);function Us(u){this.g=u}C(Us,Go),Us.prototype.ra=function(){Qe(this.g,"a")},Us.prototype.qa=function(u){Qe(this.g,new Fo(u))},Us.prototype.pa=function(u){Qe(this.g,new $o)},Us.prototype.oa=function(){Qe(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,w0=function(){return new ma},T0=function(){return zr()},N0=Tt,cd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,tu=tr,Yi.COMPLETE="complete",E0=Yi,To.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Ae.prototype.listen=Ae.prototype.J,Kl=To,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,_0=rt}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pi="12.9.0";function UE(r){Pi=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new m0("@firebase/firestore");function Ti(){return Rr.logLevel}function ge(r,...t){if(Rr.logLevel<=Xe.DEBUG){const s=t.map(Dd);Rr.debug(`Firestore (${Pi}): ${r}`,...s)}}function sa(r,...t){if(Rr.logLevel<=Xe.ERROR){const s=t.map(Dd);Rr.error(`Firestore (${Pi}): ${r}`,...s)}}function Dr(r,...t){if(Rr.logLevel<=Xe.WARN){const s=t.map(Dd);Rr.warn(`Firestore (${Pi}): ${r}`,...s)}}function Dd(r){if(typeof r=="string")return r;try{return(function(s){return JSON.stringify(s)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,t,s){let i="Unexpected state";typeof t=="string"?i=t:s=t,j0(r,i,s)}function j0(r,t,s){let i=`FIRESTORE (${Pi}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(s!==void 0)try{i+=" CONTEXT: "+JSON.stringify(s)}catch{i+=" CONTEXT: "+s}throw sa(i),new Error(i)}function tt(r,t,s,i){let c="Unexpected state";typeof s=="string"?c=s:i=s,r||j0(t,c,i)}function Ve(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Li{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.promise=new Promise(((t,s)=>{this.resolve=t,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class LE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable((()=>s(rn.UNAUTHENTICATED)))}shutdown(){}}class PE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class BE{constructor(t){this.t=t,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){tt(this.o===void 0,42304);let i=this.i;const c=v=>this.i!==i?(i=this.i,s(v)):Promise.resolve();let h=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new ea,t.enqueueRetryable((()=>c(this.currentUser)))};const m=()=>{const v=h;t.enqueueRetryable((async()=>{await v.promise,await c(this.currentUser)}))},p=v=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((v=>p(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new ea)}}),0),m()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((i=>this.i!==t?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(tt(typeof i.accessToken=="string",31837,{l:i}),new S0(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return tt(t===null||typeof t=="string",2055,{h:t}),new rn(t)}}class qE{constructor(t,s,i){this.P=t,this.T=s,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class HE{constructor(t,s,i){this.P=t,this.T=s,this.I=i}getToken(){return Promise.resolve(new qE(this.P,this.T,this.I))}start(t,s){t.enqueueRetryable((()=>s(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GE{constructor(t,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_E(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,s){tt(this.o===void 0,3512);const i=h=>{h.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const m=h.token!==this.m;return this.m=h.token,ge("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?s(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable((()=>i(h)))};const c=h=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>c(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?c(h):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((s=>s?(tt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new nx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let i=0;i<r;i++)s[i]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const c=FE(40);for(let h=0;h<c.length;++h)i.length<20&&c[h]<s&&(i+=t.charAt(c[h]%62))}return i}}function Fe(r,t){return r<t?-1:r>t?1:0}function ud(r,t){const s=Math.min(r.length,t.length);for(let i=0;i<s;i++){const c=r.charAt(i),h=t.charAt(i);if(c!==h)return Jf(c)===Jf(h)?Fe(c,h):Jf(c)?1:-1}return Fe(r.length,t.length)}const $E=55296,YE=57343;function Jf(r){const t=r.charCodeAt(0);return t>=$E&&t<=YE}function Mi(r,t,s){return r.length===t.length&&r.every(((i,c)=>s(i,t[c])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="__name__";class As{constructor(t,s,i){s===void 0?s=0:s>t.length&&Ce(637,{offset:s,range:t.length}),i===void 0?i=t.length-s:i>t.length-s&&Ce(1746,{length:i,range:t.length-s}),this.segments=t,this.offset=s,this.len=i}get length(){return this.len}isEqual(t){return As.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof As?t.forEach((i=>{s.push(i)})):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,i=this.limit();s<i;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const i=Math.min(t.length,s.length);for(let c=0;c<i;c++){const h=As.compareSegments(t.get(c),s.get(c));if(h!==0)return h}return Fe(t.length,s.length)}static compareSegments(t,s){const i=As.isNumericId(t),c=As.isNumericId(s);return i&&!c?-1:!i&&c?1:i&&c?As.extractNumericId(t).compare(As.extractNumericId(s)):ud(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Pa.fromString(t.substring(4,t.length-2))}}class ft extends As{construct(t,s,i){return new ft(t,s,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const i of t){if(i.indexOf("//")>=0)throw new fe(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);s.push(...i.split("/").filter((c=>c.length>0)))}return new ft(s)}static emptyPath(){return new ft([])}}const QE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends As{construct(t,s,i){return new tn(t,s,i)}static isValidIdentifier(t){return QE.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sx}static keyField(){return new tn([sx])}static fromServerFormat(t){const s=[];let i="",c=0;const h=()=>{if(i.length===0)throw new fe(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(i),i=""};let m=!1;for(;c<t.length;){const p=t[c];if(p==="\\"){if(c+1===t.length)throw new fe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[c+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new fe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=v,c+=2}else p==="`"?(m=!m,c++):p!=="."||m?(i+=p,c++):(h(),c++)}if(h(),m)throw new fe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new tn(s)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.path=t}static fromPath(t){return new Te(ft.fromString(t))}static fromName(t){return new Te(ft.fromString(t).popFirst(5))}static empty(){return new Te(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ft.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return ft.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Te(new ft(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(r,t,s){if(!s)throw new fe(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function KE(r,t,s,i){if(t===!0&&i===!0)throw new fe(W.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function ax(r){if(!Te.isDocumentKey(r))throw new fe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function rx(r){if(Te.isDocumentKey(r))throw new fe(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function C0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Nu(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function Ms(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new fe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Nu(r);throw new fe(W.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r,t){const s={typeString:r};return t&&(s.value=t),s}function go(r,t){if(!C0(r))throw new fe(W.INVALID_ARGUMENT,"JSON must be an object");let s;for(const i in t)if(t[i]){const c=t[i].typeString,h="value"in t[i]?{value:t[i].value}:void 0;if(!(i in r)){s=`JSON missing required field: '${i}'`;break}const m=r[i];if(c&&typeof m!==c){s=`JSON field '${i}' must be a ${c}.`;break}if(h!==void 0&&m!==h.value){s=`Expected '${i}' field to equal '${h.value}'`;break}}if(s)throw new fe(W.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=-62135596800,lx=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(t){return ht.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),i=Math.floor((t-1e3*s)*lx);return new ht(s,i)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new fe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new fe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<ix)throw new fe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lx}_compareTo(t){return this.seconds===t.seconds?Fe(this.nanoseconds,t.nanoseconds):Fe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(go(t,ht._jsonSchema))return new ht(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ix;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Lt("string",ht._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(t){return new Re(t)}static min(){return new Re(new ht(0,0))}static max(){return new Re(new ht(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=-1;function XE(r,t){const s=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,c=Re.fromTimestamp(i===1e9?new ht(s+1,0):new ht(s,i));return new qa(c,Te.empty(),t)}function ZE(r){return new qa(r.readTime,r.key,io)}class qa{constructor(t,s,i){this.readTime=t,this.documentKey=s,this.largestBatchId=i}static min(){return new qa(Re.min(),Te.empty(),io)}static max(){return new qa(Re.max(),Te.empty(),io)}}function JE(r,t){let s=r.readTime.compareTo(t.readTime);return s!==0?s:(s=Te.comparator(r.documentKey,t.documentKey),s!==0?s:Fe(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bi(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==WE)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new se(((i,c)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(i,c)},this.catchCallback=h=>{this.wrapFailure(s,h).next(i,c)}}))}toPromise(){return new Promise(((t,s)=>{this.next(t,s)}))}wrapUserFunction(t){try{const s=t();return s instanceof se?s:se.resolve(s)}catch(s){return se.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction((()=>t(s))):se.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction((()=>t(s))):se.reject(s)}static resolve(t){return new se(((s,i)=>{s(t)}))}static reject(t){return new se(((s,i)=>{i(t)}))}static waitFor(t){return new se(((s,i)=>{let c=0,h=0,m=!1;t.forEach((p=>{++c,p.next((()=>{++h,m&&h===c&&s()}),(v=>i(v)))})),m=!0,h===c&&s()}))}static or(t){let s=se.resolve(!1);for(const i of t)s=s.next((c=>c?se.resolve(c):i()));return s}static forEach(t,s){const i=[];return t.forEach(((c,h)=>{i.push(s.call(this,c,h))})),this.waitFor(i)}static mapArray(t,s){return new se(((i,c)=>{const h=t.length,m=new Array(h);let p=0;for(let v=0;v<h;v++){const x=v;s(t[x]).next((T=>{m[x]=T,++p,p===h&&i(m)}),(T=>c(T)))}}))}static doWhile(t,s){return new se(((i,c)=>{const h=()=>{t()===!0?s().next((()=>{h()}),c):i()};h()}))}}function tN(r){const t=r.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function qi(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>s.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Tu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=-1;function wu(r){return r==null}function hu(r){return r===0&&1/r==-1/0}function nN(r){return typeof r=="number"&&Number.isInteger(r)&&!hu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="";function sN(r){let t="";for(let s=0;s<r.length;s++)t.length>0&&(t=ox(t)),t=aN(r.get(s),t);return ox(t)}function aN(r,t){let s=t;const i=r.length;for(let c=0;c<i;c++){const h=r.charAt(c);switch(h){case"\0":s+="";break;case R0:s+="";break;default:s+=h}}return s}function ox(r){return r+R0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(r){let t=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t++;return t}function Xa(r,t){for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t(s,r[s])}function D0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t,s){this.comparator=t,this.root=s||en.EMPTY}insert(t,s){return new yt(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,en.BLACK,null,null))}remove(t){return new yt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,en.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}indexOf(t){let s=0,i=this.root;for(;!i.isEmpty();){const c=this.comparator(t,i.key);if(c===0)return s+i.left.size;c<0?i=i.left:(s+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((s,i)=>(t(s,i),!1)))}toString(){const t=[];return this.inorderTraversal(((s,i)=>(t.push(`${s}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Zc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Zc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Zc(this.root,t,this.comparator,!0)}}class Zc{constructor(t,s,i,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=s?i(t.key,s):1,s&&c&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class en{constructor(t,s,i,c,h){this.key=t,this.value=s,this.color=i??en.RED,this.left=c??en.EMPTY,this.right=h??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,i,c,h){return new en(t??this.key,s??this.value,i??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,i){let c=this;const h=i(t,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(t,s,i),null):h===0?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(t,s,i)),c.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let i,c=this;if(s(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,s),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),s(t,c.key)===0){if(c.right.isEmpty())return en.EMPTY;i=c.right.min(),c=c.copy(i.key,i.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,s))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ce(27949);return t+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(t,s,i,c,h){return this}insert(t,s,i){return new en(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.comparator=t,this.data=new yt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((s,i)=>(t(s),!1)))}forEachInRange(t,s){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const c=i.getNext();if(this.comparator(c.key,t[1])>=0)return;s(c.key)}}forEachWhile(t,s){let i;for(i=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new ux(this.data.getIterator())}getIteratorFrom(t){return new ux(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach((i=>{s=s.add(i)})),s}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const s=this.data.getIterator(),i=t.data.getIterator();for(;s.hasNext();){const c=s.getNext().key,h=i.getNext().key;if(this.comparator(c,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((s=>{t.push(s)})),t}toString(){const t=[];return this.forEach((s=>t.push(s))),"SortedSet("+t.toString()+")"}copy(t){const s=new Ht(this.comparator);return s.data=t,s}}class ux{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t){this.fields=t,t.sort(tn.comparator)}static empty(){return new Rn([])}unionWith(t){let s=new Ht(tn.comparator);for(const i of this.fields)s=s.add(i);for(const i of t)s=s.add(i);return new Rn(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return Mi(this.fields,t.fields,((s,i)=>s.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.binaryString=t}static fromBase64String(t){const s=(function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new I0("Invalid base64 string: "+h):h}})(t);return new nn(s)}static fromUint8Array(t){const s=(function(c){let h="";for(let m=0;m<c.length;++m)h+=String.fromCharCode(c[m]);return h})(t);return new nn(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const i=new Uint8Array(s.length);for(let c=0;c<s.length;c++)i[c]=s.charCodeAt(c);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Fe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const rN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(r){if(tt(!!r,39018),typeof r=="string"){let t=0;const s=rN.exec(r);if(tt(!!s,46558,{timestamp:r}),s[1]){let c=s[1];c=(c+"000000000").substr(0,9),t=Number(c)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:At(r.seconds),nanos:At(r.nanos)}}function At(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ga(r){return typeof r=="string"?nn.fromBase64String(r):nn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="server_timestamp",V0="__type__",O0="__previous_value__",k0="__local_write_time__";function Vd(r){var s,i;return((i=(((s=r==null?void 0:r.mapValue)==null?void 0:s.fields)||{})[V0])==null?void 0:i.stringValue)===M0}function ju(r){const t=r.mapValue.fields[O0];return Vd(t)?ju(t):t}function lo(r){const t=Ha(r.mapValue.fields[k0].timestampValue);return new ht(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(t,s,i,c,h,m,p,v,x,T,C){this.databaseId=t,this.appId=s,this.persistenceKey=i,this.host=c,this.ssl=h,this.forceLongPolling=m,this.autoDetectLongPolling=p,this.longPollingOptions=v,this.useFetchStreams=x,this.isUsingEmulator=T,this.apiKey=C}}const fu="(default)";class oo{constructor(t,s){this.projectId=t,this.database=s||fu}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===fu}isEqual(t){return t instanceof oo&&t.projectId===this.projectId&&t.database===this.database}}function lN(r,t){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new fe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(r.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="__type__",oN="__max__",Jc={mapValue:{}},U0="__vector__",du="value";function Fa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Vd(r)?4:uN(r)?9007199254740991:cN(r)?10:11:Ce(28295,{value:r})}function Vs(r,t){if(r===t)return!0;const s=Fa(r);if(s!==Fa(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return lo(r).isEqual(lo(t));case 3:return(function(c,h){if(typeof c.timestampValue=="string"&&typeof h.timestampValue=="string"&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const m=Ha(c.timestampValue),p=Ha(h.timestampValue);return m.seconds===p.seconds&&m.nanos===p.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(c,h){return Ga(c.bytesValue).isEqual(Ga(h.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(c,h){return At(c.geoPointValue.latitude)===At(h.geoPointValue.latitude)&&At(c.geoPointValue.longitude)===At(h.geoPointValue.longitude)})(r,t);case 2:return(function(c,h){if("integerValue"in c&&"integerValue"in h)return At(c.integerValue)===At(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const m=At(c.doubleValue),p=At(h.doubleValue);return m===p?hu(m)===hu(p):isNaN(m)&&isNaN(p)}return!1})(r,t);case 9:return Mi(r.arrayValue.values||[],t.arrayValue.values||[],Vs);case 10:case 11:return(function(c,h){const m=c.mapValue.fields||{},p=h.mapValue.fields||{};if(cx(m)!==cx(p))return!1;for(const v in m)if(m.hasOwnProperty(v)&&(p[v]===void 0||!Vs(m[v],p[v])))return!1;return!0})(r,t);default:return Ce(52216,{left:r})}}function co(r,t){return(r.values||[]).find((s=>Vs(s,t)))!==void 0}function Vi(r,t){if(r===t)return 0;const s=Fa(r),i=Fa(t);if(s!==i)return Fe(s,i);switch(s){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,t.booleanValue);case 2:return(function(h,m){const p=At(h.integerValue||h.doubleValue),v=At(m.integerValue||m.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1})(r,t);case 3:return hx(r.timestampValue,t.timestampValue);case 4:return hx(lo(r),lo(t));case 5:return ud(r.stringValue,t.stringValue);case 6:return(function(h,m){const p=Ga(h),v=Ga(m);return p.compareTo(v)})(r.bytesValue,t.bytesValue);case 7:return(function(h,m){const p=h.split("/"),v=m.split("/");for(let x=0;x<p.length&&x<v.length;x++){const T=Fe(p[x],v[x]);if(T!==0)return T}return Fe(p.length,v.length)})(r.referenceValue,t.referenceValue);case 8:return(function(h,m){const p=Fe(At(h.latitude),At(m.latitude));return p!==0?p:Fe(At(h.longitude),At(m.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return fx(r.arrayValue,t.arrayValue);case 10:return(function(h,m){var I,G,te,ie;const p=h.fields||{},v=m.fields||{},x=(I=p[du])==null?void 0:I.arrayValue,T=(G=v[du])==null?void 0:G.arrayValue,C=Fe(((te=x==null?void 0:x.values)==null?void 0:te.length)||0,((ie=T==null?void 0:T.values)==null?void 0:ie.length)||0);return C!==0?C:fx(x,T)})(r.mapValue,t.mapValue);case 11:return(function(h,m){if(h===Jc.mapValue&&m===Jc.mapValue)return 0;if(h===Jc.mapValue)return 1;if(m===Jc.mapValue)return-1;const p=h.fields||{},v=Object.keys(p),x=m.fields||{},T=Object.keys(x);v.sort(),T.sort();for(let C=0;C<v.length&&C<T.length;++C){const I=ud(v[C],T[C]);if(I!==0)return I;const G=Vi(p[v[C]],x[T[C]]);if(G!==0)return G}return Fe(v.length,T.length)})(r.mapValue,t.mapValue);default:throw Ce(23264,{he:s})}}function hx(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Fe(r,t);const s=Ha(r),i=Ha(t),c=Fe(s.seconds,i.seconds);return c!==0?c:Fe(s.nanos,i.nanos)}function fx(r,t){const s=r.values||[],i=t.values||[];for(let c=0;c<s.length&&c<i.length;++c){const h=Vi(s[c],i[c]);if(h)return h}return Fe(s.length,i.length)}function Oi(r){return hd(r)}function hd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(s){const i=Ha(s);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(s){return Ga(s).toBase64()})(r.bytesValue):"referenceValue"in r?(function(s){return Te.fromName(s).toString()})(r.referenceValue):"geoPointValue"in r?(function(s){return`geo(${s.latitude},${s.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(s){let i="[",c=!0;for(const h of s.values||[])c?c=!1:i+=",",i+=hd(h);return i+"]"})(r.arrayValue):"mapValue"in r?(function(s){const i=Object.keys(s.fields||{}).sort();let c="{",h=!0;for(const m of i)h?h=!1:c+=",",c+=`${m}:${hd(s.fields[m])}`;return c+"}"})(r.mapValue):Ce(61005,{value:r})}function nu(r){switch(Fa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ju(r);return t?16+nu(t):16;case 5:return 2*r.stringValue.length;case 6:return Ga(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((c,h)=>c+nu(h)),0)})(r.arrayValue);case 10:case 11:return(function(i){let c=0;return Xa(i.fields,((h,m)=>{c+=h.length+nu(m)})),c})(r.mapValue);default:throw Ce(13486,{value:r})}}function dx(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function fd(r){return!!r&&"integerValue"in r}function Od(r){return!!r&&"arrayValue"in r}function mx(r){return!!r&&"nullValue"in r}function gx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function su(r){return!!r&&"mapValue"in r}function cN(r){var s,i;return((i=(((s=r==null?void 0:r.mapValue)==null?void 0:s.fields)||{})[z0])==null?void 0:i.stringValue)===U0}function eo(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Xa(r.mapValue.fields,((s,i)=>t.mapValue.fields[s]=eo(i))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(r.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=eo(r.arrayValue.values[s]);return t}return{...r}}function uN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===oN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t){this.value=t}static empty(){return new xn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let i=0;i<t.length-1;++i)if(s=(s.mapValue.fields||{})[t.get(i)],!su(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=eo(s)}setAll(t){let s=tn.emptyPath(),i={},c=[];t.forEach(((m,p)=>{if(!s.isImmediateParentOf(p)){const v=this.getFieldsMap(s);this.applyChanges(v,i,c),i={},c=[],s=p.popLast()}m?i[p.lastSegment()]=eo(m):c.push(p.lastSegment())}));const h=this.getFieldsMap(s);this.applyChanges(h,i,c)}delete(t){const s=this.field(t.popLast());su(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return Vs(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let i=0;i<t.length;++i){let c=s.mapValue.fields[t.get(i)];su(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},s.mapValue.fields[t.get(i)]=c),s=c}return s.mapValue.fields}applyChanges(t,s,i){Xa(s,((c,h)=>t[c]=h));for(const c of i)delete t[c]}clone(){return new xn(eo(this.value))}}function L0(r){const t=[];return Xa(r.fields,((s,i)=>{const c=new tn([s]);if(su(i)){const h=L0(i.mapValue).fields;if(h.length===0)t.push(c);else for(const m of h)t.push(c.child(m))}else t.push(c)})),new Rn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t,s,i,c,h,m,p){this.key=t,this.documentType=s,this.version=i,this.readTime=c,this.createTime=h,this.data=m,this.documentState=p}static newInvalidDocument(t){return new ln(t,0,Re.min(),Re.min(),Re.min(),xn.empty(),0)}static newFoundDocument(t,s,i,c){return new ln(t,1,s,Re.min(),i,c,0)}static newNoDocument(t,s){return new ln(t,2,s,Re.min(),Re.min(),xn.empty(),0)}static newUnknownDocument(t,s){return new ln(t,3,s,Re.min(),Re.min(),xn.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ln&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t,s){this.position=t,this.inclusive=s}}function px(r,t,s){let i=0;for(let c=0;c<r.position.length;c++){const h=t[c],m=r.position[c];if(h.field.isKeyField()?i=Te.comparator(Te.fromName(m.referenceValue),s.key):i=Vi(m,s.data.field(h.field)),h.dir==="desc"&&(i*=-1),i!==0)break}return i}function yx(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let s=0;s<r.position.length;s++)if(!Vs(r.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(t,s="asc"){this.field=t,this.dir=s}}function hN(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{}class Ut extends P0{constructor(t,s,i){super(),this.field=t,this.op=s,this.value=i}static create(t,s,i){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,i):new dN(t,s,i):s==="array-contains"?new pN(t,i):s==="in"?new yN(t,i):s==="not-in"?new xN(t,i):s==="array-contains-any"?new vN(t,i):new Ut(t,s,i)}static createKeyFieldInFilter(t,s,i){return s==="in"?new mN(t,i):new gN(t,i)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Vi(s,this.value)):s!==null&&Fa(this.value)===Fa(s)&&this.matchesComparison(Vi(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class is extends P0{constructor(t,s){super(),this.filters=t,this.op=s,this.Pe=null}static create(t,s){return new is(t,s)}matches(t){return B0(this)?this.filters.find((s=>!s.matches(t)))===void 0:this.filters.find((s=>s.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,s)=>t.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function B0(r){return r.op==="and"}function q0(r){return fN(r)&&B0(r)}function fN(r){for(const t of r.filters)if(t instanceof is)return!1;return!0}function dd(r){if(r instanceof Ut)return r.field.canonicalString()+r.op.toString()+Oi(r.value);if(q0(r))return r.filters.map((t=>dd(t))).join(",");{const t=r.filters.map((s=>dd(s))).join(",");return`${r.op}(${t})`}}function H0(r,t){return r instanceof Ut?(function(i,c){return c instanceof Ut&&i.op===c.op&&i.field.isEqual(c.field)&&Vs(i.value,c.value)})(r,t):r instanceof is?(function(i,c){return c instanceof is&&i.op===c.op&&i.filters.length===c.filters.length?i.filters.reduce(((h,m,p)=>h&&H0(m,c.filters[p])),!0):!1})(r,t):void Ce(19439)}function G0(r){return r instanceof Ut?(function(s){return`${s.field.canonicalString()} ${s.op} ${Oi(s.value)}`})(r):r instanceof is?(function(s){return s.op.toString()+" {"+s.getFilters().map(G0).join(" ,")+"}"})(r):"Filter"}class dN extends Ut{constructor(t,s,i){super(t,s,i),this.key=Te.fromName(i.referenceValue)}matches(t){const s=Te.comparator(t.key,this.key);return this.matchesComparison(s)}}class mN extends Ut{constructor(t,s){super(t,"in",s),this.keys=F0("in",s)}matches(t){return this.keys.some((s=>s.isEqual(t.key)))}}class gN extends Ut{constructor(t,s){super(t,"not-in",s),this.keys=F0("not-in",s)}matches(t){return!this.keys.some((s=>s.isEqual(t.key)))}}function F0(r,t){var s;return(((s=t.arrayValue)==null?void 0:s.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class pN extends Ut{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return Od(s)&&co(s.arrayValue,this.value)}}class yN extends Ut{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&co(this.value.arrayValue,s)}}class xN extends Ut{constructor(t,s){super(t,"not-in",s)}matches(t){if(co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&s.nullValue===void 0&&!co(this.value.arrayValue,s)}}class vN extends Ut{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!Od(s)||!s.arrayValue.values)&&s.arrayValue.values.some((i=>co(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(t,s=null,i=[],c=[],h=null,m=null,p=null){this.path=t,this.collectionGroup=s,this.orderBy=i,this.filters=c,this.limit=h,this.startAt=m,this.endAt=p,this.Te=null}}function xx(r,t=null,s=[],i=[],c=null,h=null,m=null){return new bN(r,t,s,i,c,h,m)}function kd(r){const t=Ve(r);if(t.Te===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map((i=>dd(i))).join(","),s+="|ob:",s+=t.orderBy.map((i=>(function(h){return h.field.canonicalString()+h.dir})(i))).join(","),wu(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((i=>Oi(i))).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((i=>Oi(i))).join(",")),t.Te=s}return t.Te}function zd(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<r.orderBy.length;s++)if(!hN(r.orderBy[s],t.orderBy[s]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let s=0;s<r.filters.length;s++)if(!H0(r.filters[s],t.filters[s]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!yx(r.startAt,t.startAt)&&yx(r.endAt,t.endAt)}function md(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,s=null,i=[],c=[],h=null,m="F",p=null,v=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=i,this.filters=c,this.limit=h,this.limitType=m,this.startAt=p,this.endAt=v,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function _N(r,t,s,i,c,h,m,p){return new Hi(r,t,s,i,c,h,m,p)}function Ud(r){return new Hi(r)}function vx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function EN(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function $0(r){return r.collectionGroup!==null}function to(r){const t=Ve(r);if(t.Ie===null){t.Ie=[];const s=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),s.add(h.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let p=new Ht(tn.comparator);return m.filters.forEach((v=>{v.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(t).forEach((h=>{s.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new uo(h,i))})),s.has(tn.keyField().canonicalString())||t.Ie.push(new uo(tn.keyField(),i))}return t.Ie}function Cs(r){const t=Ve(r);return t.Ee||(t.Ee=NN(t,to(r))),t.Ee}function NN(r,t){if(r.limitType==="F")return xx(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((c=>{const h=c.dir==="desc"?"asc":"desc";return new uo(c.field,h)}));const s=r.endAt?new mu(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new mu(r.startAt.position,r.startAt.inclusive):null;return xx(r.path,r.collectionGroup,t,r.filters,r.limit,s,i)}}function gd(r,t){const s=r.filters.concat([t]);return new Hi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),s,r.limit,r.limitType,r.startAt,r.endAt)}function TN(r,t){const s=r.explicitOrderBy.concat([t]);return new Hi(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function pd(r,t,s){return new Hi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,s,r.startAt,r.endAt)}function Su(r,t){return zd(Cs(r),Cs(t))&&r.limitType===t.limitType}function Y0(r){return`${kd(Cs(r))}|lt:${r.limitType}`}function wi(r){return`Query(target=${(function(s){let i=s.path.canonicalString();return s.collectionGroup!==null&&(i+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(i+=`, filters: [${s.filters.map((c=>G0(c))).join(", ")}]`),wu(s.limit)||(i+=", limit: "+s.limit),s.orderBy.length>0&&(i+=`, orderBy: [${s.orderBy.map((c=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(c))).join(", ")}]`),s.startAt&&(i+=", startAt: ",i+=s.startAt.inclusive?"b:":"a:",i+=s.startAt.position.map((c=>Oi(c))).join(",")),s.endAt&&(i+=", endAt: ",i+=s.endAt.inclusive?"a:":"b:",i+=s.endAt.position.map((c=>Oi(c))).join(",")),`Target(${i})`})(Cs(r))}; limitType=${r.limitType})`}function Au(r,t){return t.isFoundDocument()&&(function(i,c){const h=c.key.path;return i.collectionGroup!==null?c.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(h):Te.isDocumentKey(i.path)?i.path.isEqual(h):i.path.isImmediateParentOf(h)})(r,t)&&(function(i,c){for(const h of to(i))if(!h.field.isKeyField()&&c.data.field(h.field)===null)return!1;return!0})(r,t)&&(function(i,c){for(const h of i.filters)if(!h.matches(c))return!1;return!0})(r,t)&&(function(i,c){return!(i.startAt&&!(function(m,p,v){const x=px(m,p,v);return m.inclusive?x<=0:x<0})(i.startAt,to(i),c)||i.endAt&&!(function(m,p,v){const x=px(m,p,v);return m.inclusive?x>=0:x>0})(i.endAt,to(i),c))})(r,t)}function wN(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Q0(r){return(t,s)=>{let i=!1;for(const c of to(r)){const h=jN(c,t,s);if(h!==0)return h;i=i||c.field.isKeyField()}return 0}}function jN(r,t,s){const i=r.field.isKeyField()?Te.comparator(t.key,s.key):(function(h,m,p){const v=m.data.field(h),x=p.data.field(h);return v!==null&&x!==null?Vi(v,x):Ce(42886)})(r.field,t,s);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),i=this.inner[s];if(i!==void 0){for(const[c,h]of i)if(this.equalsFn(c,t))return h}}has(t){return this.get(t)!==void 0}set(t,s){const i=this.mapKeyFn(t),c=this.inner[i];if(c===void 0)return this.inner[i]=[[t,s]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],t))return void(c[h]=[t,s]);c.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return!1;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],t))return i.length===1?delete this.inner[s]:i.splice(c,1),this.innerSize--,!0;return!1}forEach(t){Xa(this.inner,((s,i)=>{for(const[c,h]of i)t(c,h)}))}isEmpty(){return D0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new yt(Te.comparator);function aa(){return SN}const K0=new yt(Te.comparator);function Xl(...r){let t=K0;for(const s of r)t=t.insert(s.key,s);return t}function X0(r){let t=K0;return r.forEach(((s,i)=>t=t.insert(s,i.overlayedDocument))),t}function Ar(){return no()}function Z0(){return no()}function no(){return new Mr((r=>r.toString()),((r,t)=>r.isEqual(t)))}const AN=new yt(Te.comparator),CN=new Ht(Te.comparator);function $e(...r){let t=CN;for(const s of r)t=t.add(s);return t}const RN=new Ht(Fe);function DN(){return RN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(t)?"-0":t}}function J0(r){return{integerValue:""+r}}function IN(r,t){return nN(t)?J0(t):Ld(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(){this._=void 0}}function MN(r,t,s){return r instanceof gu?(function(c,h){const m={fields:{[V0]:{stringValue:M0},[k0]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&Vd(h)&&(h=ju(h)),h&&(m.fields[O0]=h),{mapValue:m}})(s,t):r instanceof ho?ev(r,t):r instanceof fo?tv(r,t):(function(c,h){const m=W0(c,h),p=bx(m)+bx(c.Ae);return fd(m)&&fd(c.Ae)?J0(p):Ld(c.serializer,p)})(r,t)}function VN(r,t,s){return r instanceof ho?ev(r,t):r instanceof fo?tv(r,t):s}function W0(r,t){return r instanceof pu?(function(i){return fd(i)||(function(h){return!!h&&"doubleValue"in h})(i)})(t)?t:{integerValue:0}:null}class gu extends Cu{}class ho extends Cu{constructor(t){super(),this.elements=t}}function ev(r,t){const s=nv(t);for(const i of r.elements)s.some((c=>Vs(c,i)))||s.push(i);return{arrayValue:{values:s}}}class fo extends Cu{constructor(t){super(),this.elements=t}}function tv(r,t){let s=nv(t);for(const i of r.elements)s=s.filter((c=>!Vs(c,i)));return{arrayValue:{values:s}}}class pu extends Cu{constructor(t,s){super(),this.serializer=t,this.Ae=s}}function bx(r){return At(r.integerValue||r.doubleValue)}function nv(r){return Od(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function ON(r,t){return r.field.isEqual(t.field)&&(function(i,c){return i instanceof ho&&c instanceof ho||i instanceof fo&&c instanceof fo?Mi(i.elements,c.elements,Vs):i instanceof pu&&c instanceof pu?Vs(i.Ae,c.Ae):i instanceof gu&&c instanceof gu})(r.transform,t.transform)}class kN{constructor(t,s){this.version=t,this.transformResults=s}}class vn{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new vn}static exists(t){return new vn(void 0,t)}static updateTime(t){return new vn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function au(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Ru{}function sv(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Du(r.key,vn.none()):new po(r.key,r.data,vn.none());{const s=r.data,i=xn.empty();let c=new Ht(tn.comparator);for(let h of t.fields)if(!c.has(h)){let m=s.field(h);m===null&&h.length>1&&(h=h.popLast(),m=s.field(h)),m===null?i.delete(h):i.set(h,m),c=c.add(h)}return new Za(r.key,i,new Rn(c.toArray()),vn.none())}}function zN(r,t,s){r instanceof po?(function(c,h,m){const p=c.value.clone(),v=Ex(c.fieldTransforms,h,m.transformResults);p.setAll(v),h.convertToFoundDocument(m.version,p).setHasCommittedMutations()})(r,t,s):r instanceof Za?(function(c,h,m){if(!au(c.precondition,h))return void h.convertToUnknownDocument(m.version);const p=Ex(c.fieldTransforms,h,m.transformResults),v=h.data;v.setAll(av(c)),v.setAll(p),h.convertToFoundDocument(m.version,v).setHasCommittedMutations()})(r,t,s):(function(c,h,m){h.convertToNoDocument(m.version).setHasCommittedMutations()})(0,t,s)}function so(r,t,s,i){return r instanceof po?(function(h,m,p,v){if(!au(h.precondition,m))return p;const x=h.value.clone(),T=Nx(h.fieldTransforms,v,m);return x.setAll(T),m.convertToFoundDocument(m.version,x).setHasLocalMutations(),null})(r,t,s,i):r instanceof Za?(function(h,m,p,v){if(!au(h.precondition,m))return p;const x=Nx(h.fieldTransforms,v,m),T=m.data;return T.setAll(av(h)),T.setAll(x),m.convertToFoundDocument(m.version,T).setHasLocalMutations(),p===null?null:p.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((C=>C.field)))})(r,t,s,i):(function(h,m,p){return au(h.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):p})(r,t,s)}function UN(r,t){let s=null;for(const i of r.fieldTransforms){const c=t.data.field(i.field),h=W0(i.transform,c||null);h!=null&&(s===null&&(s=xn.empty()),s.set(i.field,h))}return s||null}function _x(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(i,c){return i===void 0&&c===void 0||!(!i||!c)&&Mi(i,c,((h,m)=>ON(h,m)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class po extends Ru{constructor(t,s,i,c=[]){super(),this.key=t,this.value=s,this.precondition=i,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Za extends Ru{constructor(t,s,i,c,h=[]){super(),this.key=t,this.data=s,this.fieldMask=i,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function av(r){const t=new Map;return r.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const i=r.data.field(s);t.set(s,i)}})),t}function Ex(r,t,s){const i=new Map;tt(r.length===s.length,32656,{Ve:s.length,de:r.length});for(let c=0;c<s.length;c++){const h=r[c],m=h.transform,p=t.data.field(h.field);i.set(h.field,VN(m,p,s[c]))}return i}function Nx(r,t,s){const i=new Map;for(const c of r){const h=c.transform,m=s.data.field(c.field);i.set(c.field,MN(h,m,t))}return i}class Du extends Ru{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LN extends Ru{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(t,s,i,c){this.batchId=t,this.localWriteTime=s,this.baseMutations=i,this.mutations=c}applyToRemoteDocument(t,s){const i=s.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(t.key)&&zN(h,t,i[c])}}applyToLocalView(t,s){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(s=so(i,t,s,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(s=so(i,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const i=Z0();return this.mutations.forEach((c=>{const h=t.get(c.key),m=h.overlayedDocument;let p=this.applyToLocalView(m,h.mutatedFields);p=s.has(c.key)?null:p;const v=sv(m,p);v!==null&&i.set(c.key,v),m.isValidDocument()||m.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((t,s)=>t.add(s.key)),$e())}isEqual(t){return this.batchId===t.batchId&&Mi(this.mutations,t.mutations,((s,i)=>_x(s,i)))&&Mi(this.baseMutations,t.baseMutations,((s,i)=>_x(s,i)))}}class Pd{constructor(t,s,i,c){this.batch=t,this.commitVersion=s,this.mutationResults=i,this.docVersions=c}static from(t,s,i){tt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let c=(function(){return AN})();const h=t.mutations;for(let m=0;m<h.length;m++)c=c.insert(h[m].key,i[m].version);return new Pd(t,s,i,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,Ke;function HN(r){switch(r){case W.OK:return Ce(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Ce(15467,{code:r})}}function rv(r){if(r===void 0)return sa("GRPC error has no .code"),W.UNKNOWN;switch(r){case zt.OK:return W.OK;case zt.CANCELLED:return W.CANCELLED;case zt.UNKNOWN:return W.UNKNOWN;case zt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case zt.INTERNAL:return W.INTERNAL;case zt.UNAVAILABLE:return W.UNAVAILABLE;case zt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case zt.NOT_FOUND:return W.NOT_FOUND;case zt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case zt.ABORTED:return W.ABORTED;case zt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case zt.DATA_LOSS:return W.DATA_LOSS;default:return Ce(39323,{code:r})}}(Ke=zt||(zt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new Pa([4294967295,4294967295],0);function Tx(r){const t=GN().encode(r),s=new b0;return s.update(t),new Uint8Array(s.digest())}function wx(r){const t=new DataView(r.buffer),s=t.getUint32(0,!0),i=t.getUint32(4,!0),c=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new Pa([s,i],0),new Pa([c,h],0)]}class Bd{constructor(t,s,i){if(this.bitmap=t,this.padding=s,this.hashCount=i,s<0||s>=8)throw new Zl(`Invalid padding: ${s}`);if(i<0)throw new Zl(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${i}`);if(t.length===0&&s!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*t.length-s,this.pe=Pa.fromNumber(this.ge)}ye(t,s,i){let c=t.add(s.multiply(Pa.fromNumber(i)));return c.compare(FN)===1&&(c=new Pa([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const s=Tx(t),[i,c]=wx(s);for(let h=0;h<this.hashCount;h++){const m=this.ye(i,c,h);if(!this.we(m))return!1}return!0}static create(t,s,i){const c=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),m=new Bd(h,c,s);return i.forEach((p=>m.insert(p))),m}insert(t){if(this.ge===0)return;const s=Tx(t),[i,c]=wx(s);for(let h=0;h<this.hashCount;h++){const m=this.ye(i,c,h);this.be(m)}}be(t){const s=Math.floor(t/8),i=t%8;this.bitmap[s]|=1<<i}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(t,s,i,c,h){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=i,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,s,i){const c=new Map;return c.set(t,yo.createSynthesizedTargetChangeForCurrentChange(t,s,i)),new Iu(Re.min(),c,new yt(Fe),aa(),$e())}}class yo{constructor(t,s,i,c,h){this.resumeToken=t,this.current=s,this.addedDocuments=i,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,s,i){return new yo(i,s,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t,s,i,c){this.Se=t,this.removedTargetIds=s,this.key=i,this.De=c}}class iv{constructor(t,s){this.targetId=t,this.Ce=s}}class lv{constructor(t,s,i=nn.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=s,this.resumeToken=i,this.cause=c}}class jx{constructor(){this.ve=0,this.Fe=Sx(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=$e(),s=$e(),i=$e();return this.Fe.forEach(((c,h)=>{switch(h){case 0:t=t.add(c);break;case 2:s=s.add(c);break;case 1:i=i.add(c);break;default:Ce(38017,{changeType:h})}})),new yo(this.Me,this.xe,t,s,i)}Ke(){this.Oe=!1,this.Fe=Sx()}qe(t,s){this.Oe=!0,this.Fe=this.Fe.insert(t,s)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class $N{constructor(t){this.Ge=t,this.ze=new Map,this.je=aa(),this.He=Wc(),this.Je=Wc(),this.Ze=new yt(Fe)}Xe(t){for(const s of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(s,t.De):this.et(s,t.key,t.De);for(const s of t.removedTargetIds)this.et(s,t.key,t.De)}tt(t){this.forEachTarget(t,(s=>{const i=this.nt(s);switch(t.state){case 0:this.rt(s)&&i.Le(t.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(t.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(i.Qe(),i.Le(t.resumeToken));break;case 4:this.rt(s)&&(this.it(s),i.Le(t.resumeToken));break;default:Ce(56790,{state:t.state})}}))}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.ze.forEach(((i,c)=>{this.rt(c)&&s(c)}))}st(t){const s=t.targetId,i=t.Ce.count,c=this.ot(s);if(c){const h=c.target;if(md(h))if(i===0){const m=new Te(h.path);this.et(s,m,ln.newNoDocument(m,Re.min()))}else tt(i===1,20013,{expectedCount:i});else{const m=this._t(s);if(m!==i){const p=this.ut(t),v=p?this.ct(p,t,m):1;if(v!==0){this.it(s);const x=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,x)}}}}}ut(t){const s=t.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:i="",padding:c=0},hashCount:h=0}=s;let m,p;try{m=Ga(i).toUint8Array()}catch(v){if(v instanceof I0)return Dr("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{p=new Bd(m,c,h)}catch(v){return Dr(v instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return p.ge===0?null:p}ct(t,s,i){return s.Ce.count===i-this.Pt(t,s.targetId)?0:2}Pt(t,s){const i=this.Ge.getRemoteKeysForTarget(s);let c=0;return i.forEach((h=>{const m=this.Ge.ht(),p=`projects/${m.projectId}/databases/${m.database}/documents/${h.path.canonicalString()}`;t.mightContain(p)||(this.et(s,h,null),c++)})),c}Tt(t){const s=new Map;this.ze.forEach(((h,m)=>{const p=this.ot(m);if(p){if(h.current&&md(p.target)){const v=new Te(p.target.path);this.It(v).has(m)||this.Et(m,v)||this.et(m,v,ln.newNoDocument(v,t))}h.Be&&(s.set(m,h.ke()),h.Ke())}}));let i=$e();this.Je.forEach(((h,m)=>{let p=!0;m.forEachWhile((v=>{const x=this.ot(v);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(h))})),this.je.forEach(((h,m)=>m.setReadTime(t)));const c=new Iu(t,s,this.Ze,this.je,i);return this.je=aa(),this.He=Wc(),this.Je=Wc(),this.Ze=new yt(Fe),c}Ye(t,s){if(!this.rt(t))return;const i=this.Et(t,s.key)?2:0;this.nt(t).qe(s.key,i),this.je=this.je.insert(s.key,s),this.He=this.He.insert(s.key,this.It(s.key).add(t)),this.Je=this.Je.insert(s.key,this.Rt(s.key).add(t))}et(t,s,i){if(!this.rt(t))return;const c=this.nt(t);this.Et(t,s)?c.qe(s,1):c.Ue(s),this.Je=this.Je.insert(s,this.Rt(s).delete(t)),this.Je=this.Je.insert(s,this.Rt(s).add(t)),i&&(this.je=this.je.insert(s,i))}removeTarget(t){this.ze.delete(t)}_t(t){const s=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let s=this.ze.get(t);return s||(s=new jx,this.ze.set(t,s)),s}Rt(t){let s=this.Je.get(t);return s||(s=new Ht(Fe),this.Je=this.Je.insert(t,s)),s}It(t){let s=this.He.get(t);return s||(s=new Ht(Fe),this.He=this.He.insert(t,s)),s}rt(t){const s=this.ot(t)!==null;return s||ge("WatchChangeAggregator","Detected inactive target",t),s}ot(t){const s=this.ze.get(t);return s&&s.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new jx),this.Ge.getRemoteKeysForTarget(t).forEach((s=>{this.et(t,s,null)}))}Et(t,s){return this.Ge.getRemoteKeysForTarget(t).has(s)}}function Wc(){return new yt(Te.comparator)}function Sx(){return new yt(Te.comparator)}const YN={asc:"ASCENDING",desc:"DESCENDING"},QN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KN={and:"AND",or:"OR"};class XN{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function yd(r,t){return r.useProto3Json||wu(t)?t:{value:t}}function yu(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ov(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function ZN(r,t){return yu(r,t.toTimestamp())}function Rs(r){return tt(!!r,49232),Re.fromTimestamp((function(s){const i=Ha(s);return new ht(i.seconds,i.nanos)})(r))}function qd(r,t){return xd(r,t).canonicalString()}function xd(r,t){const s=(function(c){return new ft(["projects",c.projectId,"databases",c.database])})(r).child("documents");return t===void 0?s:s.child(t)}function cv(r){const t=ft.fromString(r);return tt(mv(t),10190,{key:t.toString()}),t}function vd(r,t){return qd(r.databaseId,t.path)}function Wf(r,t){const s=cv(t);if(s.get(1)!==r.databaseId.projectId)throw new fe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+r.databaseId.projectId);if(s.get(3)!==r.databaseId.database)throw new fe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+r.databaseId.database);return new Te(hv(s))}function uv(r,t){return qd(r.databaseId,t)}function JN(r){const t=cv(r);return t.length===4?ft.emptyPath():hv(t)}function bd(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function hv(r){return tt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ax(r,t,s){return{name:vd(r,t),fields:s.value.mapValue.fields}}function WN(r,t){let s;if("targetChange"in t){t.targetChange;const i=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Ce(39313,{state:x})})(t.targetChange.targetChangeType||"NO_CHANGE"),c=t.targetChange.targetIds||[],h=(function(x,T){return x.useProto3Json?(tt(T===void 0||typeof T=="string",58123),nn.fromBase64String(T||"")):(tt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),nn.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),m=t.targetChange.cause,p=m&&(function(x){const T=x.code===void 0?W.UNKNOWN:rv(x.code);return new fe(T,x.message||"")})(m);s=new lv(i,c,h,p||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const c=Wf(r,i.document.name),h=Rs(i.document.updateTime),m=i.document.createTime?Rs(i.document.createTime):Re.min(),p=new xn({mapValue:{fields:i.document.fields}}),v=ln.newFoundDocument(c,h,m,p),x=i.targetIds||[],T=i.removedTargetIds||[];s=new ru(x,T,v.key,v)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const c=Wf(r,i.document),h=i.readTime?Rs(i.readTime):Re.min(),m=ln.newNoDocument(c,h),p=i.removedTargetIds||[];s=new ru([],p,m.key,m)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const c=Wf(r,i.document),h=i.removedTargetIds||[];s=new ru([],h,c,null)}else{if(!("filter"in t))return Ce(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:c=0,unchangedNames:h}=i,m=new qN(c,h),p=i.targetId;s=new iv(p,m)}}return s}function eT(r,t){let s;if(t instanceof po)s={update:Ax(r,t.key,t.value)};else if(t instanceof Du)s={delete:vd(r,t.key)};else if(t instanceof Za)s={update:Ax(r,t.key,t.data),updateMask:cT(t.fieldMask)};else{if(!(t instanceof LN))return Ce(16599,{dt:t.type});s={verify:vd(r,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map((i=>(function(h,m){const p=m.transform;if(p instanceof gu)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ho)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof fo)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof pu)return{fieldPath:m.field.canonicalString(),increment:p.Ae};throw Ce(20930,{transform:m.transform})})(0,i)))),t.precondition.isNone||(s.currentDocument=(function(c,h){return h.updateTime!==void 0?{updateTime:ZN(c,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Ce(27497)})(r,t.precondition)),s}function tT(r,t){return r&&r.length>0?(tt(t!==void 0,14353),r.map((s=>(function(c,h){let m=c.updateTime?Rs(c.updateTime):Rs(h);return m.isEqual(Re.min())&&(m=Rs(h)),new kN(m,c.transformResults||[])})(s,t)))):[]}function nT(r,t){return{documents:[uv(r,t.path)]}}function sT(r,t){const s={structuredQuery:{}},i=t.path;let c;t.collectionGroup!==null?(c=i,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=i.popLast(),s.structuredQuery.from=[{collectionId:i.lastSegment()}]),s.parent=uv(r,c);const h=(function(x){if(x.length!==0)return dv(is.create(x,"and"))})(t.filters);h&&(s.structuredQuery.where=h);const m=(function(x){if(x.length!==0)return x.map((T=>(function(I){return{field:ji(I.field),direction:iT(I.dir)}})(T)))})(t.orderBy);m&&(s.structuredQuery.orderBy=m);const p=yd(r,t.limit);return p!==null&&(s.structuredQuery.limit=p),t.startAt&&(s.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(t.startAt)),t.endAt&&(s.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(t.endAt)),{ft:s,parent:c}}function aT(r){let t=JN(r.parent);const s=r.structuredQuery,i=s.from?s.from.length:0;let c=null;if(i>0){tt(i===1,65062);const T=s.from[0];T.allDescendants?c=T.collectionId:t=t.child(T.collectionId)}let h=[];s.where&&(h=(function(C){const I=fv(C);return I instanceof is&&q0(I)?I.getFilters():[I]})(s.where));let m=[];s.orderBy&&(m=(function(C){return C.map((I=>(function(te){return new uo(Si(te.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(te.direction))})(I)))})(s.orderBy));let p=null;s.limit&&(p=(function(C){let I;return I=typeof C=="object"?C.value:C,wu(I)?null:I})(s.limit));let v=null;s.startAt&&(v=(function(C){const I=!!C.before,G=C.values||[];return new mu(G,I)})(s.startAt));let x=null;return s.endAt&&(x=(function(C){const I=!C.before,G=C.values||[];return new mu(G,I)})(s.endAt)),_N(t,c,m,h,p,"F",v,x)}function rT(r,t){const s=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:c})}})(t.purpose);return s==null?null:{"goog-listen-tags":s}}function fv(r){return r.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const i=Si(s.unaryFilter.field);return Ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const c=Si(s.unaryFilter.field);return Ut.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Si(s.unaryFilter.field);return Ut.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Si(s.unaryFilter.field);return Ut.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(r):r.fieldFilter!==void 0?(function(s){return Ut.create(Si(s.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(s){return is.create(s.compositeFilter.filters.map((i=>fv(i))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(s.compositeFilter.op))})(r):Ce(30097,{filter:r})}function iT(r){return YN[r]}function lT(r){return QN[r]}function oT(r){return KN[r]}function ji(r){return{fieldPath:r.canonicalString()}}function Si(r){return tn.fromServerFormat(r.fieldPath)}function dv(r){return r instanceof Ut?(function(s){if(s.op==="=="){if(gx(s.value))return{unaryFilter:{field:ji(s.field),op:"IS_NAN"}};if(mx(s.value))return{unaryFilter:{field:ji(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(gx(s.value))return{unaryFilter:{field:ji(s.field),op:"IS_NOT_NAN"}};if(mx(s.value))return{unaryFilter:{field:ji(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ji(s.field),op:lT(s.op),value:s.value}}})(r):r instanceof is?(function(s){const i=s.getFilters().map((c=>dv(c)));return i.length===1?i[0]:{compositeFilter:{op:oT(s.op),filters:i}}})(r):Ce(54877,{filter:r})}function cT(r){const t=[];return r.fields.forEach((s=>t.push(s.canonicalString()))),{fieldPaths:t}}function mv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function gv(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,s,i,c,h=Re.min(),m=Re.min(),p=nn.EMPTY_BYTE_STRING,v=null){this.target=t,this.targetId=s,this.purpose=i,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=p,this.expectedCount=v}withSequenceNumber(t){return new za(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(t){this.yt=t}}function hT(r){const t=aT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?pd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.Sn=new dT}addToCollectionParentIndex(t,s){return this.Sn.add(s),se.resolve()}getCollectionParents(t,s){return se.resolve(this.Sn.getEntries(s))}addFieldIndex(t,s){return se.resolve()}deleteFieldIndex(t,s){return se.resolve()}deleteAllFieldIndexes(t){return se.resolve()}createTargetIndexes(t,s){return se.resolve()}getDocumentsMatchingTarget(t,s){return se.resolve(null)}getIndexType(t,s){return se.resolve(0)}getFieldIndexes(t,s){return se.resolve([])}getNextCollectionGroupToUpdate(t){return se.resolve(null)}getMinOffset(t,s){return se.resolve(qa.min())}getMinOffsetFromCollectionGroup(t,s){return se.resolve(qa.min())}updateCollectionGroup(t,s,i){return se.resolve()}updateIndexEntries(t,s){return se.resolve()}}class dT{constructor(){this.index={}}add(t){const s=t.lastSegment(),i=t.popLast(),c=this.index[s]||new Ht(ft.comparator),h=!c.has(i);return this.index[s]=c.add(i),h}has(t){const s=t.lastSegment(),i=t.popLast(),c=this.index[s];return c&&c.has(i)}getEntries(t){return(this.index[t]||new Ht(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pv=41943040;class yn{static withCacheSize(t){return new yn(t,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(pv,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new ki(0)}static ar(){return new ki(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="LruGarbageCollector",mT=1048576;function Dx([r,t],[s,i]){const c=Fe(r,s);return c===0?Fe(t,i):c}class gT{constructor(t){this.Pr=t,this.buffer=new Ht(Dx),this.Tr=0}Ir(){return++this.Tr}Er(t){const s=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(s);else{const i=this.buffer.last();Dx(s,i)<0&&(this.buffer=this.buffer.delete(i).add(s))}}get maxValue(){return this.buffer.last()[0]}}class pT{constructor(t,s,i){this.garbageCollector=t,this.asyncQueue=s,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){ge(Rx,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){qi(s)?ge(Rx,"Ignoring IndexedDB error during garbage collection: ",s):await Bi(s)}await this.Ar(3e5)}))}}class yT{constructor(t,s){this.Vr=t,this.params=s}calculateTargetCount(t,s){return this.Vr.dr(t).next((i=>Math.floor(s/100*i)))}nthSequenceNumber(t,s){if(s===0)return se.resolve(Tu.ce);const i=new gT(s);return this.Vr.forEachTarget(t,(c=>i.Er(c.sequenceNumber))).next((()=>this.Vr.mr(t,(c=>i.Er(c))))).next((()=>i.maxValue))}removeTargets(t,s,i){return this.Vr.removeTargets(t,s,i)}removeOrphanedDocuments(t,s){return this.Vr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Cx)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cx):this.gr(t,s)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,s){let i,c,h,m,p,v,x;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),c=this.params.maximumSequenceNumbersToCollect):c=C,m=Date.now(),this.nthSequenceNumber(t,c)))).next((C=>(i=C,p=Date.now(),this.removeTargets(t,i,s)))).next((C=>(h=C,v=Date.now(),this.removeOrphanedDocuments(t,i)))).next((C=>(x=Date.now(),Ti()<=Xe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-T}ms
	Determined least recently used ${c} in `+(p-m)+`ms
	Removed ${h} targets in `+(v-p)+`ms
	Removed ${C} documents in `+(x-v)+`ms
Total Duration: ${x-T}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:C}))))}}function xT(r,t){return new yT(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.changes=new Mr((t=>t.toString()),((t,s)=>t.isEqual(s))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,ln.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const i=this.changes.get(s);return i!==void 0?se.resolve(i):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(t,s,i,c){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=i,this.indexManager=c}getDocument(t,s){let i=null;return this.documentOverlayCache.getOverlay(t,s).next((c=>(i=c,this.remoteDocumentCache.getEntry(t,s)))).next((c=>(i!==null&&so(i.mutation,c,Rn.empty(),ht.now()),c)))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next((i=>this.getLocalViewOfDocuments(t,i,$e()).next((()=>i))))}getLocalViewOfDocuments(t,s,i=$e()){const c=Ar();return this.populateOverlays(t,c,s).next((()=>this.computeViews(t,s,c,i).next((h=>{let m=Xl();return h.forEach(((p,v)=>{m=m.insert(p,v.overlayedDocument)})),m}))))}getOverlayedDocuments(t,s){const i=Ar();return this.populateOverlays(t,i,s).next((()=>this.computeViews(t,s,i,$e())))}populateOverlays(t,s,i){const c=[];return i.forEach((h=>{s.has(h)||c.push(h)})),this.documentOverlayCache.getOverlays(t,c).next((h=>{h.forEach(((m,p)=>{s.set(m,p)}))}))}computeViews(t,s,i,c){let h=aa();const m=no(),p=(function(){return no()})();return s.forEach(((v,x)=>{const T=i.get(x.key);c.has(x.key)&&(T===void 0||T.mutation instanceof Za)?h=h.insert(x.key,x):T!==void 0?(m.set(x.key,T.mutation.getFieldMask()),so(T.mutation,x,T.mutation.getFieldMask(),ht.now())):m.set(x.key,Rn.empty())})),this.recalculateAndSaveOverlays(t,h).next((v=>(v.forEach(((x,T)=>m.set(x,T))),s.forEach(((x,T)=>p.set(x,new bT(T,m.get(x)??null)))),p)))}recalculateAndSaveOverlays(t,s){const i=no();let c=new yt(((m,p)=>m-p)),h=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next((m=>{for(const p of m)p.keys().forEach((v=>{const x=s.get(v);if(x===null)return;let T=i.get(v)||Rn.empty();T=p.applyToLocalView(x,T),i.set(v,T);const C=(c.get(p.batchId)||$e()).add(v);c=c.insert(p.batchId,C)}))})).next((()=>{const m=[],p=c.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),x=v.key,T=v.value,C=Z0();T.forEach((I=>{if(!h.has(I)){const G=sv(s.get(I),i.get(I));G!==null&&C.set(I,G),h=h.add(I)}})),m.push(this.documentOverlayCache.saveOverlays(t,x,C))}return se.waitFor(m)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,s,i,c){return EN(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):$0(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,i,c):this.getDocumentsMatchingCollectionQuery(t,s,i,c)}getNextDocuments(t,s,i,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,i,c).next((h=>{const m=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,i.largestBatchId,c-h.size):se.resolve(Ar());let p=io,v=h;return m.next((x=>se.forEach(x,((T,C)=>(p<C.largestBatchId&&(p=C.largestBatchId),h.get(T)?se.resolve():this.remoteDocumentCache.getEntry(t,T).next((I=>{v=v.insert(T,I)}))))).next((()=>this.populateOverlays(t,x,h))).next((()=>this.computeViews(t,v,x,$e()))).next((T=>({batchId:p,changes:X0(T)})))))}))}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new Te(s)).next((i=>{let c=Xl();return i.isFoundDocument()&&(c=c.insert(i.key,i)),c}))}getDocumentsMatchingCollectionGroupQuery(t,s,i,c){const h=s.collectionGroup;let m=Xl();return this.indexManager.getCollectionParents(t,h).next((p=>se.forEach(p,(v=>{const x=(function(C,I){return new Hi(I,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(s,v.child(h));return this.getDocumentsMatchingCollectionQuery(t,x,i,c).next((T=>{T.forEach(((C,I)=>{m=m.insert(C,I)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(t,s,i,c){let h;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,i.largestBatchId).next((m=>(h=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,i,h,c)))).next((m=>{h.forEach(((v,x)=>{const T=x.getKey();m.get(T)===null&&(m=m.insert(T,ln.newInvalidDocument(T)))}));let p=Xl();return m.forEach(((v,x)=>{const T=h.get(v);T!==void 0&&so(T.mutation,x,Rn.empty(),ht.now()),Au(s,x)&&(p=p.insert(v,x))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,s){return se.resolve(this.Nr.get(s))}saveBundleMetadata(t,s){return this.Nr.set(s.id,(function(c){return{id:c.id,version:c.version,createTime:Rs(c.createTime)}})(s)),se.resolve()}getNamedQuery(t,s){return se.resolve(this.Br.get(s))}saveNamedQuery(t,s){return this.Br.set(s.name,(function(c){return{name:c.name,query:hT(c.bundledQuery),readTime:Rs(c.readTime)}})(s)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.overlays=new yt(Te.comparator),this.Lr=new Map}getOverlay(t,s){return se.resolve(this.overlays.get(s))}getOverlays(t,s){const i=Ar();return se.forEach(s,(c=>this.getOverlay(t,c).next((h=>{h!==null&&i.set(c,h)})))).next((()=>i))}saveOverlays(t,s,i){return i.forEach(((c,h)=>{this.bt(t,s,h)})),se.resolve()}removeOverlaysForBatchId(t,s,i){const c=this.Lr.get(i);return c!==void 0&&(c.forEach((h=>this.overlays=this.overlays.remove(h))),this.Lr.delete(i)),se.resolve()}getOverlaysForCollection(t,s,i){const c=Ar(),h=s.length+1,m=new Te(s.child("")),p=this.overlays.getIteratorFrom(m);for(;p.hasNext();){const v=p.getNext().value,x=v.getKey();if(!s.isPrefixOf(x.path))break;x.path.length===h&&v.largestBatchId>i&&c.set(v.getKey(),v)}return se.resolve(c)}getOverlaysForCollectionGroup(t,s,i,c){let h=new yt(((x,T)=>x-T));const m=this.overlays.getIterator();for(;m.hasNext();){const x=m.getNext().value;if(x.getKey().getCollectionGroup()===s&&x.largestBatchId>i){let T=h.get(x.largestBatchId);T===null&&(T=Ar(),h=h.insert(x.largestBatchId,T)),T.set(x.getKey(),x)}}const p=Ar(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((x,T)=>p.set(x,T))),!(p.size()>=c)););return se.resolve(p)}bt(t,s,i){const c=this.overlays.get(i.key);if(c!==null){const m=this.Lr.get(c.largestBatchId).delete(i.key);this.Lr.set(c.largestBatchId,m)}this.overlays=this.overlays.insert(i.key,new BN(s,i));let h=this.Lr.get(s);h===void 0&&(h=$e(),this.Lr.set(s,h)),this.Lr.set(s,h.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(t){return se.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this.kr=new Ht(Yt.Kr),this.qr=new Ht(Yt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,s){const i=new Yt(t,s);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(t,s){t.forEach((i=>this.addReference(i,s)))}removeReference(t,s){this.Wr(new Yt(t,s))}Qr(t,s){t.forEach((i=>this.removeReference(i,s)))}Gr(t){const s=new Te(new ft([])),i=new Yt(s,t),c=new Yt(s,t+1),h=[];return this.qr.forEachInRange([i,c],(m=>{this.Wr(m),h.push(m.key)})),h}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const s=new Te(new ft([])),i=new Yt(s,t),c=new Yt(s,t+1);let h=$e();return this.qr.forEachInRange([i,c],(m=>{h=h.add(m.key)})),h}containsKey(t){const s=new Yt(t,0),i=this.kr.firstAfterOrEqual(s);return i!==null&&t.isEqual(i.key)}}class Yt{constructor(t,s){this.key=t,this.Hr=s}static Kr(t,s){return Te.comparator(t.key,s.key)||Fe(t.Hr,s.Hr)}static Ur(t,s){return Fe(t.Hr,s.Hr)||Te.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.Yn=1,this.Jr=new Ht(Yt.Kr)}checkEmpty(t){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,i,c){const h=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new PN(h,s,i,c);this.mutationQueue.push(m);for(const p of c)this.Jr=this.Jr.add(new Yt(p.key,h)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return se.resolve(m)}lookupMutationBatch(t,s){return se.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(t,s){const i=s+1,c=this.Xr(i),h=c<0?0:c;return se.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Md:this.Yn-1)}getAllMutationBatches(t){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const i=new Yt(s,0),c=new Yt(s,Number.POSITIVE_INFINITY),h=[];return this.Jr.forEachInRange([i,c],(m=>{const p=this.Zr(m.Hr);h.push(p)})),se.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,s){let i=new Ht(Fe);return s.forEach((c=>{const h=new Yt(c,0),m=new Yt(c,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([h,m],(p=>{i=i.add(p.Hr)}))})),se.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(t,s){const i=s.path,c=i.length+1;let h=i;Te.isDocumentKey(h)||(h=h.child(""));const m=new Yt(new Te(h),0);let p=new Ht(Fe);return this.Jr.forEachWhile((v=>{const x=v.key.path;return!!i.isPrefixOf(x)&&(x.length===c&&(p=p.add(v.Hr)),!0)}),m),se.resolve(this.Yr(p))}Yr(t){const s=[];return t.forEach((i=>{const c=this.Zr(i);c!==null&&s.push(c)})),s}removeMutationBatch(t,s){tt(this.ei(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return se.forEach(s.mutations,(c=>{const h=new Yt(c.key,s.batchId);return i=i.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)})).next((()=>{this.Jr=i}))}nr(t){}containsKey(t,s){const i=new Yt(s,0),c=this.Jr.firstAfterOrEqual(i);return se.resolve(s.isEqual(c&&c.key))}performConsistencyCheck(t){return this.mutationQueue.length,se.resolve()}ei(t,s){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const s=this.Xr(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(t){this.ti=t,this.docs=(function(){return new yt(Te.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const i=s.key,c=this.docs.get(i),h=c?c.size:0,m=this.ti(s);return this.docs=this.docs.insert(i,{document:s.mutableCopy(),size:m}),this.size+=m-h,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const i=this.docs.get(s);return se.resolve(i?i.document.mutableCopy():ln.newInvalidDocument(s))}getEntries(t,s){let i=aa();return s.forEach((c=>{const h=this.docs.get(c);i=i.insert(c,h?h.document.mutableCopy():ln.newInvalidDocument(c))})),se.resolve(i)}getDocumentsMatchingQuery(t,s,i,c){let h=aa();const m=s.path,p=new Te(m.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:x,value:{document:T}}=v.getNext();if(!m.isPrefixOf(x.path))break;x.path.length>m.length+1||JE(ZE(T),i)<=0||(c.has(T.key)||Au(s,T))&&(h=h.insert(T.key,T.mutableCopy()))}return se.resolve(h)}getAllFromCollectionGroup(t,s,i,c){Ce(9500)}ni(t,s){return se.forEach(this.docs,(i=>s(i)))}newChangeBuffer(t){return new ST(this)}getSize(t){return se.resolve(this.size)}}class ST extends vT{constructor(t){super(),this.Mr=t}applyChanges(t){const s=[];return this.changes.forEach(((i,c)=>{c.isValidDocument()?s.push(this.Mr.addEntry(t,c)):this.Mr.removeEntry(i)})),se.waitFor(s)}getFromCache(t,s){return this.Mr.getEntry(t,s)}getAllFromCache(t,s){return this.Mr.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(t){this.persistence=t,this.ri=new Mr((s=>kd(s)),zd),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new Hd,this.targetCount=0,this.oi=ki._r()}forEachTarget(t,s){return this.ri.forEach(((i,c)=>s(c))),se.resolve()}getLastRemoteSnapshotVersion(t){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return se.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(t,s,i){return i&&(this.lastRemoteSnapshotVersion=i),s>this.ii&&(this.ii=s),se.resolve()}lr(t){this.ri.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.oi=new ki(s),this.highestTargetId=s),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,s){return this.lr(s),this.targetCount+=1,se.resolve()}updateTargetData(t,s){return this.lr(s),se.resolve()}removeTargetData(t,s){return this.ri.delete(s.target),this.si.Gr(s.targetId),this.targetCount-=1,se.resolve()}removeTargets(t,s,i){let c=0;const h=[];return this.ri.forEach(((m,p)=>{p.sequenceNumber<=s&&i.get(p.targetId)===null&&(this.ri.delete(m),h.push(this.removeMatchingKeysForTargetId(t,p.targetId)),c++)})),se.waitFor(h).next((()=>c))}getTargetCount(t){return se.resolve(this.targetCount)}getTargetData(t,s){const i=this.ri.get(s)||null;return se.resolve(i)}addMatchingKeys(t,s,i){return this.si.$r(s,i),se.resolve()}removeMatchingKeys(t,s,i){this.si.Qr(s,i);const c=this.persistence.referenceDelegate,h=[];return c&&s.forEach((m=>{h.push(c.markPotentiallyOrphaned(t,m))})),se.waitFor(h)}removeMatchingKeysForTargetId(t,s){return this.si.Gr(s),se.resolve()}getMatchingKeysForTargetId(t,s){const i=this.si.jr(s);return se.resolve(i)}containsKey(t,s){return se.resolve(this.si.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(t,s){this._i={},this.overlays={},this.ai=new Tu(0),this.ui=!1,this.ui=!0,this.ci=new TT,this.referenceDelegate=t(this),this.li=new AT(this),this.indexManager=new fT,this.remoteDocumentCache=(function(c){return new jT(c)})((i=>this.referenceDelegate.hi(i))),this.serializer=new uT(s),this.Pi=new ET(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new NT,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let i=this._i[t.toKey()];return i||(i=new wT(s,this.referenceDelegate),this._i[t.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,s,i){ge("MemoryPersistence","Starting transaction:",t);const c=new CT(this.ai.next());return this.referenceDelegate.Ti(),i(c).next((h=>this.referenceDelegate.Ii(c).next((()=>h)))).toPromise().then((h=>(c.raiseOnCommittedEvent(),h)))}Ei(t,s){return se.or(Object.values(this._i).map((i=>()=>i.containsKey(t,s))))}}class CT extends eN{constructor(t){super(),this.currentSequenceNumber=t}}class Gd{constructor(t){this.persistence=t,this.Ri=new Hd,this.Ai=null}static Vi(t){return new Gd(t)}get di(){if(this.Ai)return this.Ai;throw Ce(60996)}addReference(t,s,i){return this.Ri.addReference(i,s),this.di.delete(i.toString()),se.resolve()}removeReference(t,s,i){return this.Ri.removeReference(i,s),this.di.add(i.toString()),se.resolve()}markPotentiallyOrphaned(t,s){return this.di.add(s.toString()),se.resolve()}removeTarget(t,s){this.Ri.Gr(s.targetId).forEach((c=>this.di.add(c.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,s.targetId).next((c=>{c.forEach((h=>this.di.add(h.toString())))})).next((()=>i.removeTargetData(t,s)))}Ti(){this.Ai=new Set}Ii(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(i=>{const c=Te.fromPath(i);return this.mi(t,c).next((h=>{h||s.removeEntry(c,Re.min())}))})).next((()=>(this.Ai=null,s.apply(t))))}updateLimboDocument(t,s){return this.mi(t,s).next((i=>{i?this.di.delete(s.toString()):this.di.add(s.toString())}))}hi(t){return 0}mi(t,s){return se.or([()=>se.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Ei(t,s)])}}class xu{constructor(t,s){this.persistence=t,this.fi=new Mr((i=>sN(i.path)),((i,c)=>i.isEqual(c))),this.garbageCollector=xT(this,s)}static Vi(t,s){return new xu(t,s)}Ti(){}Ii(t){return se.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}dr(t){const s=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>s.next((c=>i+c))))}pr(t){let s=0;return this.mr(t,(i=>{s++})).next((()=>s))}mr(t,s){return se.forEach(this.fi,((i,c)=>this.wr(t,i,c).next((h=>h?se.resolve():s(c)))))}removeTargets(t,s,i){return this.persistence.getTargetCache().removeTargets(t,s,i)}removeOrphanedDocuments(t,s){let i=0;const c=this.persistence.getRemoteDocumentCache(),h=c.newChangeBuffer();return c.ni(t,(m=>this.wr(t,m,s).next((p=>{p||(i++,h.removeEntry(m,Re.min()))})))).next((()=>h.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,s){return this.fi.set(s,t.currentSequenceNumber),se.resolve()}removeTarget(t,s){const i=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,s,i){return this.fi.set(i,t.currentSequenceNumber),se.resolve()}removeReference(t,s,i){return this.fi.set(i,t.currentSequenceNumber),se.resolve()}updateLimboDocument(t,s){return this.fi.set(s,t.currentSequenceNumber),se.resolve()}hi(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=nu(t.data.value)),s}wr(t,s,i){return se.or([()=>this.persistence.Ei(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const c=this.fi.get(s);return se.resolve(c!==void 0&&c>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(t,s,i,c){this.targetId=t,this.fromCache=s,this.Ts=i,this.Is=c}static Es(t,s){let i=$e(),c=$e();for(const h of s.docChanges)switch(h.type){case 0:i=i.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new Fd(t,s.fromCache,i,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return x1()?8:tN(p1())>0?6:4})()}initialize(t,s){this.fs=t,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(t,s,i,c){const h={result:null};return this.gs(t,s).next((m=>{h.result=m})).next((()=>{if(!h.result)return this.ps(t,s,c,i).next((m=>{h.result=m}))})).next((()=>{if(h.result)return;const m=new RT;return this.ys(t,s,m).next((p=>{if(h.result=p,this.As)return this.ws(t,s,m,p.size)}))})).next((()=>h.result))}ws(t,s,i,c){return i.documentReadCount<this.Vs?(Ti()<=Xe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",wi(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(Ti()<=Xe.DEBUG&&ge("QueryEngine","Query:",wi(s),"scans",i.documentReadCount,"local documents and returns",c,"documents as results."),i.documentReadCount>this.ds*c?(Ti()<=Xe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",wi(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Cs(s))):se.resolve())}gs(t,s){if(vx(s))return se.resolve(null);let i=Cs(s);return this.indexManager.getIndexType(t,i).next((c=>c===0?null:(s.limit!==null&&c===1&&(s=pd(s,null,"F"),i=Cs(s)),this.indexManager.getDocumentsMatchingTarget(t,i).next((h=>{const m=$e(...h);return this.fs.getDocuments(t,m).next((p=>this.indexManager.getMinOffset(t,i).next((v=>{const x=this.bs(s,p);return this.Ss(s,x,m,v.readTime)?this.gs(t,pd(s,null,"F")):this.Ds(t,x,s,v)}))))})))))}ps(t,s,i,c){return vx(s)||c.isEqual(Re.min())?se.resolve(null):this.fs.getDocuments(t,i).next((h=>{const m=this.bs(s,h);return this.Ss(s,m,i,c)?se.resolve(null):(Ti()<=Xe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),wi(s)),this.Ds(t,m,s,XE(c,io)).next((p=>p)))}))}bs(t,s){let i=new Ht(Q0(t));return s.forEach(((c,h)=>{Au(t,h)&&(i=i.add(h))})),i}Ss(t,s,i,c){if(t.limit===null)return!1;if(i.size!==s.size)return!0;const h=t.limitType==="F"?s.last():s.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}ys(t,s,i){return Ti()<=Xe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",wi(s)),this.fs.getDocumentsMatchingQuery(t,s,qa.min(),i)}Ds(t,s,i,c){return this.fs.getDocumentsMatchingQuery(t,i,c).next((h=>(s.forEach((m=>{h=h.insert(m.key,m)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="LocalStore",IT=3e8;class MT{constructor(t,s,i,c){this.persistence=t,this.Cs=s,this.serializer=c,this.vs=new yt(Fe),this.Fs=new Mr((h=>kd(h)),zd),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(i)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _T(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>t.collect(s,this.vs)))}}function VT(r,t,s,i){return new MT(r,t,s,i)}async function xv(r,t){const s=Ve(r);return await s.persistence.runTransaction("Handle user change","readonly",(i=>{let c;return s.mutationQueue.getAllMutationBatches(i).next((h=>(c=h,s.Os(t),s.mutationQueue.getAllMutationBatches(i)))).next((h=>{const m=[],p=[];let v=$e();for(const x of c){m.push(x.batchId);for(const T of x.mutations)v=v.add(T.key)}for(const x of h){p.push(x.batchId);for(const T of x.mutations)v=v.add(T.key)}return s.localDocuments.getDocuments(i,v).next((x=>({Ns:x,removedBatchIds:m,addedBatchIds:p})))}))}))}function OT(r,t){const s=Ve(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const c=t.batch.keys(),h=s.xs.newChangeBuffer({trackRemovals:!0});return(function(p,v,x,T){const C=x.batch,I=C.keys();let G=se.resolve();return I.forEach((te=>{G=G.next((()=>T.getEntry(v,te))).next((ie=>{const X=x.docVersions.get(te);tt(X!==null,48541),ie.version.compareTo(X)<0&&(C.applyToRemoteDocument(ie,x),ie.isValidDocument()&&(ie.setReadTime(x.commitVersion),T.addEntry(ie)))}))})),G.next((()=>p.mutationQueue.removeMutationBatch(v,C)))})(s,i,t,h).next((()=>h.apply(i))).next((()=>s.mutationQueue.performConsistencyCheck(i))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(i,c,t.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let v=$e();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(v=v.add(p.batch.mutations[x].key));return v})(t)))).next((()=>s.localDocuments.getDocuments(i,c)))}))}function vv(r){const t=Ve(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>t.li.getLastRemoteSnapshotVersion(s)))}function kT(r,t){const s=Ve(r),i=t.snapshotVersion;let c=s.vs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const m=s.xs.newChangeBuffer({trackRemovals:!0});c=s.vs;const p=[];t.targetChanges.forEach(((T,C)=>{const I=c.get(C);if(!I)return;p.push(s.li.removeMatchingKeys(h,T.removedDocuments,C).next((()=>s.li.addMatchingKeys(h,T.addedDocuments,C))));let G=I.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(C)!==null?G=G.withResumeToken(nn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,i)),c=c.insert(C,G),(function(ie,X,ye){return ie.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=IT?!0:ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0})(I,G,T)&&p.push(s.li.updateTargetData(h,G))}));let v=aa(),x=$e();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(h,T))})),p.push(zT(h,m,t.documentUpdates).next((T=>{v=T.Bs,x=T.Ls}))),!i.isEqual(Re.min())){const T=s.li.getLastRemoteSnapshotVersion(h).next((C=>s.li.setTargetsMetadata(h,h.currentSequenceNumber,i)));p.push(T)}return se.waitFor(p).next((()=>m.apply(h))).next((()=>s.localDocuments.getLocalViewOfDocuments(h,v,x))).next((()=>v))})).then((h=>(s.vs=c,h)))}function zT(r,t,s){let i=$e(),c=$e();return s.forEach((h=>i=i.add(h))),t.getEntries(r,i).next((h=>{let m=aa();return s.forEach(((p,v)=>{const x=h.get(p);v.isFoundDocument()!==x.isFoundDocument()&&(c=c.add(p)),v.isNoDocument()&&v.version.isEqual(Re.min())?(t.removeEntry(p,v.readTime),m=m.insert(p,v)):!x.isValidDocument()||v.version.compareTo(x.version)>0||v.version.compareTo(x.version)===0&&x.hasPendingWrites?(t.addEntry(v),m=m.insert(p,v)):ge($d,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",v.version)})),{Bs:m,Ls:c}}))}function UT(r,t){const s=Ve(r);return s.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Md),s.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function LT(r,t){const s=Ve(r);return s.persistence.runTransaction("Allocate target","readwrite",(i=>{let c;return s.li.getTargetData(i,t).next((h=>h?(c=h,se.resolve(c)):s.li.allocateTargetId(i).next((m=>(c=new za(t,m,"TargetPurposeListen",i.currentSequenceNumber),s.li.addTargetData(i,c).next((()=>c)))))))})).then((i=>{const c=s.vs.get(i.targetId);return(c===null||i.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(s.vs=s.vs.insert(i.targetId,i),s.Fs.set(t,i.targetId)),i}))}async function _d(r,t,s){const i=Ve(r),c=i.vs.get(t),h=s?"readwrite":"readwrite-primary";try{s||await i.persistence.runTransaction("Release target",h,(m=>i.persistence.referenceDelegate.removeTarget(m,c)))}catch(m){if(!qi(m))throw m;ge($d,`Failed to update sequence numbers for target ${t}: ${m}`)}i.vs=i.vs.remove(t),i.Fs.delete(c.target)}function Ix(r,t,s){const i=Ve(r);let c=Re.min(),h=$e();return i.persistence.runTransaction("Execute query","readwrite",(m=>(function(v,x,T){const C=Ve(v),I=C.Fs.get(T);return I!==void 0?se.resolve(C.vs.get(I)):C.li.getTargetData(x,T)})(i,m,Cs(t)).next((p=>{if(p)return c=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(m,p.targetId).next((v=>{h=v}))})).next((()=>i.Cs.getDocumentsMatchingQuery(m,t,s?c:Re.min(),s?h:$e()))).next((p=>(PT(i,wN(t),p),{documents:p,ks:h})))))}function PT(r,t,s){let i=r.Ms.get(t)||Re.min();s.forEach(((c,h)=>{h.readTime.compareTo(i)>0&&(i=h.readTime)})),r.Ms.set(t,i)}class Mx{constructor(){this.activeTargetIds=DN()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class BT{constructor(){this.vo=new Mx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,i){}addLocalQueryTarget(t,s=!0){return s&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,s,i){this.Fo[t]=s}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new Mx,Promise.resolve()}handleUserChange(t,s,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="ConnectivityMonitor";class Ox{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ge(Vx,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){ge(Vx,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu=null;function Ed(){return eu===null?eu=(function(){return 268435456+Math.round(2147483648*Math.random())})():eu++,"0x"+eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="RestConnection",HT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class GT{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.qo=s+"://"+t.host,this.Uo=`projects/${i}/databases/${c}`,this.$o=this.databaseId.database===fu?`project_id=${i}`:`project_id=${i}&database_id=${c}`}Wo(t,s,i,c,h){const m=Ed(),p=this.Qo(t,s.toUriEncodedString());ge(ed,`Sending RPC '${t}' ${m}:`,p,i);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(v,c,h);const{host:x}=new URL(p),T=Cd(x);return this.zo(t,p,v,i,T).then((C=>(ge(ed,`Received RPC '${t}' ${m}: `,C),C)),(C=>{throw Dr(ed,`RPC '${t}' ${m} failed with error: `,C,"url: ",p,"request:",i),C}))}jo(t,s,i,c,h,m){return this.Wo(t,s,i,c,h)}Go(t,s,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pi})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((c,h)=>t[h]=c)),i&&i.headers.forEach(((c,h)=>t[h]=c))}Qo(t,s){const i=HT[t];let c=`${this.qo}/v1/${s}:${i}`;return this.databaseInfo.apiKey&&(c=`${c}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),c}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection",Ql=(r,t,s)=>{r.listen(t,(i=>{try{s(i)}catch(c){setTimeout((()=>{throw c}),0)}}))};class Ci extends GT{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Ci.c_){const t=T0();Ql(t,N0.STAT_EVENT,(s=>{s.stat===cd.PROXY?ge(an,"STAT_EVENT: detected buffering proxy"):s.stat===cd.NOPROXY&&ge(an,"STAT_EVENT: detected no buffering proxy")})),Ci.c_=!0}}zo(t,s,i,c,h){const m=Ed();return new Promise(((p,v)=>{const x=new _0;x.setWithCredentials(!0),x.listenOnce(E0.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case tu.NO_ERROR:const C=x.getResponseJson();ge(an,`XHR for RPC '${t}' ${m} received:`,JSON.stringify(C)),p(C);break;case tu.TIMEOUT:ge(an,`RPC '${t}' ${m} timed out`),v(new fe(W.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:const I=x.getStatus();if(ge(an,`RPC '${t}' ${m} failed with status:`,I,"response text:",x.getResponseText()),I>0){let G=x.getResponseJson();Array.isArray(G)&&(G=G[0]);const te=G==null?void 0:G.error;if(te&&te.status&&te.message){const ie=(function(ye){const pe=ye.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(pe)>=0?pe:W.UNKNOWN})(te.status);v(new fe(ie,te.message))}else v(new fe(W.UNKNOWN,"Server responded with status "+x.getStatus()))}else v(new fe(W.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:t,streamId:m,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{ge(an,`RPC '${t}' ${m} completed.`)}}));const T=JSON.stringify(c);ge(an,`RPC '${t}' ${m} sending request:`,c),x.send(s,"POST",T,i,15)}))}T_(t,s,i){const c=Ed(),h=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,s,i),p.encodeInitMessageHeaders=!0;const x=h.join("");ge(an,`Creating RPC '${t}' stream ${c}: ${x}`,p);const T=m.createWebChannel(x,p);this.I_(T);let C=!1,I=!1;const G=new FT({Ho:te=>{I?ge(an,`Not sending because RPC '${t}' stream ${c} is closed:`,te):(C||(ge(an,`Opening RPC '${t}' stream ${c} transport.`),T.open(),C=!0),ge(an,`RPC '${t}' stream ${c} sending:`,te),T.send(te))},Jo:()=>T.close()});return Ql(T,Kl.EventType.OPEN,(()=>{I||(ge(an,`RPC '${t}' stream ${c} transport opened.`),G.i_())})),Ql(T,Kl.EventType.CLOSE,(()=>{I||(I=!0,ge(an,`RPC '${t}' stream ${c} transport closed`),G.o_(),this.E_(T))})),Ql(T,Kl.EventType.ERROR,(te=>{I||(I=!0,Dr(an,`RPC '${t}' stream ${c} transport errored. Name:`,te.name,"Message:",te.message),G.o_(new fe(W.UNAVAILABLE,"The operation could not be completed")))})),Ql(T,Kl.EventType.MESSAGE,(te=>{var ie;if(!I){const X=te.data[0];tt(!!X,16349);const ye=X,pe=(ye==null?void 0:ye.error)||((ie=ye[0])==null?void 0:ie.error);if(pe){ge(an,`RPC '${t}' stream ${c} received error:`,pe);const de=pe.status;let be=(function(R){const w=zt[R];if(w!==void 0)return rv(w)})(de),De=pe.message;de==="NOT_FOUND"&&De.includes("database")&&De.includes("does not exist")&&De.includes(this.databaseId.database)&&Dr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),be===void 0&&(be=W.INTERNAL,De="Unknown error status: "+de+" with message "+pe.message),I=!0,G.o_(new fe(be,De)),T.close()}else ge(an,`RPC '${t}' stream ${c} received:`,X),G.__(X)}})),Ci.u_(),setTimeout((()=>{G.s_()}),0),G}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((s=>s===t))}Go(t,s,i){super.Go(t,s,i),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return w0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(r){return new Ci(r)}function td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(r){return new XN(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci.c_=!1;class bv{constructor(t,s,i=1e3,c=1.5,h=6e4){this.Ci=t,this.timerId=s,this.R_=i,this.A_=c,this.V_=h,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const s=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),c=Math.max(0,s-i);c>0&&ge("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.d_} ms, delay with jitter: ${s} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="PersistentStream";class _v{constructor(t,s,i,c,h,m,p,v){this.Ci=t,this.b_=i,this.S_=c,this.connection=h,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bv(t,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,s){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():s&&s.code===W.RESOURCE_EXHAUSTED?(sa(s.toString()),sa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(s)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,c])=>{this.D_===s&&this.G_(i,c)}),(i=>{t((()=>{const c=new fe(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(c)}))}))}G_(t,s){const i=this.Q_(this.D_);this.stream=this.j_(t,s),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((c=>{i((()=>this.z_(c)))})),this.stream.onMessage((c=>{i((()=>++this.F_==1?this.H_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ge(kx,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return s=>{this.Ci.enqueueAndForget((()=>this.D_===t?s():(ge(kx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YT extends _v{constructor(t,s,i,c,h,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,i,c,m),this.serializer=h}j_(t,s){return this.connection.T_("Listen",t,s)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const s=WN(this.serializer,t),i=(function(h){if(!("targetChange"in h))return Re.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?Re.min():m.readTime?Rs(m.readTime):Re.min()})(t);return this.listener.J_(s,i)}Z_(t){const s={};s.database=bd(this.serializer),s.addTarget=(function(h,m){let p;const v=m.target;if(p=md(v)?{documents:nT(h,v)}:{query:sT(h,v).ft},p.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){p.resumeToken=ov(h,m.resumeToken);const x=yd(h,m.expectedCount);x!==null&&(p.expectedCount=x)}else if(m.snapshotVersion.compareTo(Re.min())>0){p.readTime=yu(h,m.snapshotVersion.toTimestamp());const x=yd(h,m.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,t);const i=rT(this.serializer,t);i&&(s.labels=i),this.K_(s)}X_(t){const s={};s.database=bd(this.serializer),s.removeTarget=t,this.K_(s)}}class QT extends _v{constructor(t,s,i,c,h,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,i,c,m),this.serializer=h}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,s){return this.connection.T_("Write",t,s)}H_(t){return tt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,tt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){tt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const s=tT(t.writeResults,t.commitTime),i=Rs(t.commitTime);return this.listener.na(i,s)}ra(){const t={};t.database=bd(this.serializer),this.K_(t)}ea(t){const s={streamToken:this.lastStreamToken,writes:t.map((i=>eT(this.serializer,i)))};this.K_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{}class XT extends KT{constructor(t,s,i,c){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=i,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new fe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,s,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Wo(t,xd(s,i),c,h,m))).catch((h=>{throw h.name==="FirebaseError"?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new fe(W.UNKNOWN,h.toString())}))}jo(t,s,i,c,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,p])=>this.connection.jo(t,xd(s,i),c,m,p,h))).catch((m=>{throw m.name==="FirebaseError"?(m.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new fe(W.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function ZT(r,t,s,i){return new XT(r,t,s,i)}class JT{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sa(s),this.aa=!1):ge("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="RemoteStore";class WT{constructor(t,s,i,c,h){this.localStore=t,this.datastore=s,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=h,this.Aa.Mo((m=>{i.enqueueAndForget((async()=>{Vr(this)&&(ge(Ir,"Restarting streams for network reachability change."),await(async function(v){const x=Ve(v);x.Ea.add(4),await xo(x),x.Va.set("Unknown"),x.Ea.delete(4),await Vu(x)})(this))}))})),this.Va=new JT(i,c)}}async function Vu(r){if(Vr(r))for(const t of r.Ra)await t(!0)}async function xo(r){for(const t of r.Ra)await t(!1)}function Ev(r,t){const s=Ve(r);s.Ia.has(t.targetId)||(s.Ia.set(t.targetId,t),Xd(s)?Kd(s):Gi(s).O_()&&Qd(s,t))}function Yd(r,t){const s=Ve(r),i=Gi(s);s.Ia.delete(t),i.O_()&&Nv(s,t),s.Ia.size===0&&(i.O_()?i.L_():Vr(s)&&s.Va.set("Unknown"))}function Qd(r,t){if(r.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Re.min())>0){const s=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Gi(r).Z_(t)}function Nv(r,t){r.da.$e(t),Gi(r).X_(t)}function Kd(r){r.da=new $N({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Gi(r).start(),r.Va.ua()}function Xd(r){return Vr(r)&&!Gi(r).x_()&&r.Ia.size>0}function Vr(r){return Ve(r).Ea.size===0}function Tv(r){r.da=void 0}async function e2(r){r.Va.set("Online")}async function t2(r){r.Ia.forEach(((t,s)=>{Qd(r,t)}))}async function n2(r,t){Tv(r),Xd(r)?(r.Va.ha(t),Kd(r)):r.Va.set("Unknown")}async function s2(r,t,s){if(r.Va.set("Online"),t instanceof lv&&t.state===2&&t.cause)try{await(async function(c,h){const m=h.cause;for(const p of h.targetIds)c.Ia.has(p)&&(await c.remoteSyncer.rejectListen(p,m),c.Ia.delete(p),c.da.removeTarget(p))})(r,t)}catch(i){ge(Ir,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await vu(r,i)}else if(t instanceof ru?r.da.Xe(t):t instanceof iv?r.da.st(t):r.da.tt(t),!s.isEqual(Re.min()))try{const i=await vv(r.localStore);s.compareTo(i)>=0&&await(function(h,m){const p=h.da.Tt(m);return p.targetChanges.forEach(((v,x)=>{if(v.resumeToken.approximateByteSize()>0){const T=h.Ia.get(x);T&&h.Ia.set(x,T.withResumeToken(v.resumeToken,m))}})),p.targetMismatches.forEach(((v,x)=>{const T=h.Ia.get(v);if(!T)return;h.Ia.set(v,T.withResumeToken(nn.EMPTY_BYTE_STRING,T.snapshotVersion)),Nv(h,v);const C=new za(T.target,v,x,T.sequenceNumber);Qd(h,C)})),h.remoteSyncer.applyRemoteEvent(p)})(r,s)}catch(i){ge(Ir,"Failed to raise snapshot:",i),await vu(r,i)}}async function vu(r,t,s){if(!qi(t))throw t;r.Ea.add(1),await xo(r),r.Va.set("Offline"),s||(s=()=>vv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(Ir,"Retrying IndexedDB access"),await s(),r.Ea.delete(1),await Vu(r)}))}function wv(r,t){return t().catch((s=>vu(r,s,t)))}async function Ou(r){const t=Ve(r),s=$a(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Md;for(;a2(t);)try{const c=await UT(t.localStore,i);if(c===null){t.Ta.length===0&&s.L_();break}i=c.batchId,r2(t,c)}catch(c){await vu(t,c)}jv(t)&&Sv(t)}function a2(r){return Vr(r)&&r.Ta.length<10}function r2(r,t){r.Ta.push(t);const s=$a(r);s.O_()&&s.Y_&&s.ea(t.mutations)}function jv(r){return Vr(r)&&!$a(r).x_()&&r.Ta.length>0}function Sv(r){$a(r).start()}async function i2(r){$a(r).ra()}async function l2(r){const t=$a(r);for(const s of r.Ta)t.ea(s.mutations)}async function o2(r,t,s){const i=r.Ta.shift(),c=Pd.from(i,t,s);await wv(r,(()=>r.remoteSyncer.applySuccessfulWrite(c))),await Ou(r)}async function c2(r,t){t&&$a(r).Y_&&await(async function(i,c){if((function(m){return HN(m)&&m!==W.ABORTED})(c.code)){const h=i.Ta.shift();$a(i).B_(),await wv(i,(()=>i.remoteSyncer.rejectFailedWrite(h.batchId,c))),await Ou(i)}})(r,t),jv(r)&&Sv(r)}async function zx(r,t){const s=Ve(r);s.asyncQueue.verifyOperationInProgress(),ge(Ir,"RemoteStore received new credentials");const i=Vr(s);s.Ea.add(3),await xo(s),i&&s.Va.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.Ea.delete(3),await Vu(s)}async function u2(r,t){const s=Ve(r);t?(s.Ea.delete(2),await Vu(s)):t||(s.Ea.add(2),await xo(s),s.Va.set("Unknown"))}function Gi(r){return r.ma||(r.ma=(function(s,i,c){const h=Ve(s);return h.sa(),new YT(i,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(r.datastore,r.asyncQueue,{Zo:e2.bind(null,r),Yo:t2.bind(null,r),t_:n2.bind(null,r),J_:s2.bind(null,r)}),r.Ra.push((async t=>{t?(r.ma.B_(),Xd(r)?Kd(r):r.Va.set("Unknown")):(await r.ma.stop(),Tv(r))}))),r.ma}function $a(r){return r.fa||(r.fa=(function(s,i,c){const h=Ve(s);return h.sa(),new QT(i,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:i2.bind(null,r),t_:c2.bind(null,r),ta:l2.bind(null,r),na:o2.bind(null,r)}),r.Ra.push((async t=>{t?(r.fa.B_(),await Ou(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(Ir,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t,s,i,c,h){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=i,this.op=c,this.removalCallback=h,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,s,i,c,h){const m=Date.now()+i,p=new Zd(t,s,m,c,h);return p.start(i),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(W.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jd(r,t){if(sa("AsyncQueue",`${t}: ${r}`),qi(r))return new fe(W.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{static emptySet(t){return new Ri(t.comparator)}constructor(t){this.comparator=t?(s,i)=>t(s,i)||Te.comparator(s.key,i.key):(s,i)=>Te.comparator(s.key,i.key),this.keyedMap=Xl(),this.sortedSet=new yt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((s,i)=>(t(s),!1)))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof Ri)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;s.hasNext();){const c=s.getNext().key,h=i.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach((s=>{t.push(s.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const i=new Ri;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=s,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.ga=new yt(Te.comparator)}track(t){const s=t.doc.key,i=this.ga.get(s);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(s,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(s,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(s,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(s):t.type===1&&i.type===2?this.ga=this.ga.insert(s,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):Ce(63341,{Vt:t,pa:i}):this.ga=this.ga.insert(s,t)}ya(){const t=[];return this.ga.inorderTraversal(((s,i)=>{t.push(i)})),t}}class zi{constructor(t,s,i,c,h,m,p,v,x){this.query=t,this.docs=s,this.oldDocs=i,this.docChanges=c,this.mutatedKeys=h,this.fromCache=m,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=x}static fromInitialDocuments(t,s,i,c,h){const m=[];return s.forEach((p=>{m.push({type:0,doc:p})})),new zi(t,s,Ri.emptySet(s),m,i,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Su(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,i=t.docChanges;if(s.length!==i.length)return!1;for(let c=0;c<s.length;c++)if(s[c].type!==i[c].type||!s[c].doc.isEqual(i[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class f2{constructor(){this.queries=Lx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,i){const c=Ve(s),h=c.queries;c.queries=Lx(),h.forEach(((m,p)=>{for(const v of p.ba)v.onError(i)}))})(this,new fe(W.ABORTED,"Firestore shutting down"))}}function Lx(){return new Mr((r=>Y0(r)),Su)}async function Av(r,t){const s=Ve(r);let i=3;const c=t.query;let h=s.queries.get(c);h?!h.Sa()&&t.Da()&&(i=2):(h=new h2,i=t.Da()?0:1);try{switch(i){case 0:h.wa=await s.onListen(c,!0);break;case 1:h.wa=await s.onListen(c,!1);break;case 2:await s.onFirstRemoteStoreListen(c)}}catch(m){const p=Jd(m,`Initialization of query '${wi(t.query)}' failed`);return void t.onError(p)}s.queries.set(c,h),h.ba.push(t),t.va(s.onlineState),h.wa&&t.Fa(h.wa)&&Wd(s)}async function Cv(r,t){const s=Ve(r),i=t.query;let c=3;const h=s.queries.get(i);if(h){const m=h.ba.indexOf(t);m>=0&&(h.ba.splice(m,1),h.ba.length===0?c=t.Da()?0:1:!h.Sa()&&t.Da()&&(c=2))}switch(c){case 0:return s.queries.delete(i),s.onUnlisten(i,!0);case 1:return s.queries.delete(i),s.onUnlisten(i,!1);case 2:return s.onLastRemoteStoreUnlisten(i);default:return}}function d2(r,t){const s=Ve(r);let i=!1;for(const c of t){const h=c.query,m=s.queries.get(h);if(m){for(const p of m.ba)p.Fa(c)&&(i=!0);m.wa=c}}i&&Wd(s)}function m2(r,t,s){const i=Ve(r),c=i.queries.get(t);if(c)for(const h of c.ba)h.onError(s);i.queries.delete(t)}function Wd(r){r.Ca.forEach((t=>{t.next()}))}var Nd,Px;(Px=Nd||(Nd={})).Ma="default",Px.Cache="cache";class Rv{constructor(t,s,i){this.query=t,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const c of t.docChanges)c.type!==3&&i.push(c);t=new zi(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),s=!0):this.La(t,this.onlineState)&&(this.ka(t),s=!0),this.Na=t,s}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),s=!0),s}La(t,s){if(!t.fromCache||!this.Da())return!0;const i=s!=="Offline";return(!this.options.Ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(t){t=zi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Nd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(t){this.key=t}}class Iv{constructor(t){this.key=t}}class g2{constructor(t,s){this.query=t,this.Za=s,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$e(),this.mutatedKeys=$e(),this.eu=Q0(t),this.tu=new Ri(this.eu)}get nu(){return this.Za}ru(t,s){const i=s?s.iu:new Ux,c=s?s.tu:this.tu;let h=s?s.mutatedKeys:this.mutatedKeys,m=c,p=!1;const v=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,x=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal(((T,C)=>{const I=c.get(T),G=Au(this.query,C)?C:null,te=!!I&&this.mutatedKeys.has(I.key),ie=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let X=!1;I&&G?I.data.isEqual(G.data)?te!==ie&&(i.track({type:3,doc:G}),X=!0):this.su(I,G)||(i.track({type:2,doc:G}),X=!0,(v&&this.eu(G,v)>0||x&&this.eu(G,x)<0)&&(p=!0)):!I&&G?(i.track({type:0,doc:G}),X=!0):I&&!G&&(i.track({type:1,doc:I}),X=!0,(v||x)&&(p=!0)),X&&(G?(m=m.add(G),h=ie?h.add(T):h.delete(T)):(m=m.delete(T),h=h.delete(T)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const T=this.query.limitType==="F"?m.last():m.first();m=m.delete(T.key),h=h.delete(T.key),i.track({type:1,doc:T})}return{tu:m,iu:i,Ss:p,mutatedKeys:h}}su(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,i,c){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const m=t.iu.ya();m.sort(((T,C)=>(function(G,te){const ie=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:X})}};return ie(G)-ie(te)})(T.type,C.type)||this.eu(T.doc,C.doc))),this.ou(i),c=c??!1;const p=s&&!c?this._u():[],v=this.Ya.size===0&&this.current&&!c?1:0,x=v!==this.Xa;return this.Xa=v,m.length!==0||x?{snapshot:new zi(this.query,t.tu,h,m,t.mutatedKeys,v===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ux,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((s=>this.Za=this.Za.add(s))),t.modifiedDocuments.forEach((s=>{})),t.removedDocuments.forEach((s=>this.Za=this.Za.delete(s))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=$e(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const s=[];return t.forEach((i=>{this.Ya.has(i)||s.push(new Iv(i))})),this.Ya.forEach((i=>{t.has(i)||s.push(new Dv(i))})),s}cu(t){this.Za=t.ks,this.Ya=$e();const s=this.ru(t.documents);return this.applyChanges(s,!0)}lu(){return zi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const em="SyncEngine";class p2{constructor(t,s,i){this.query=t,this.targetId=s,this.view=i}}class y2{constructor(t){this.key=t,this.hu=!1}}class x2{constructor(t,s,i,c,h,m){this.localStore=t,this.remoteStore=s,this.eventManager=i,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Mr((p=>Y0(p)),Su),this.Iu=new Map,this.Eu=new Set,this.Ru=new yt(Te.comparator),this.Au=new Map,this.Vu=new Hd,this.du={},this.mu=new Map,this.fu=ki.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function v2(r,t,s=!0){const i=Uv(r);let c;const h=i.Tu.get(t);return h?(i.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.lu()):c=await Mv(i,t,s,!0),c}async function b2(r,t){const s=Uv(r);await Mv(s,t,!0,!1)}async function Mv(r,t,s,i){const c=await LT(r.localStore,Cs(t)),h=c.targetId,m=r.sharedClientState.addLocalQueryTarget(h,s);let p;return i&&(p=await _2(r,t,h,m==="current",c.resumeToken)),r.isPrimaryClient&&s&&Ev(r.remoteStore,c),p}async function _2(r,t,s,i,c){r.pu=(C,I,G)=>(async function(ie,X,ye,pe){let de=X.view.ru(ye);de.Ss&&(de=await Ix(ie.localStore,X.query,!1).then((({documents:R})=>X.view.ru(R,de))));const be=pe&&pe.targetChanges.get(X.targetId),De=pe&&pe.targetMismatches.get(X.targetId)!=null,we=X.view.applyChanges(de,ie.isPrimaryClient,be,De);return qx(ie,X.targetId,we.au),we.snapshot})(r,C,I,G);const h=await Ix(r.localStore,t,!0),m=new g2(t,h.ks),p=m.ru(h.documents),v=yo.createSynthesizedTargetChangeForCurrentChange(s,i&&r.onlineState!=="Offline",c),x=m.applyChanges(p,r.isPrimaryClient,v);qx(r,s,x.au);const T=new p2(t,s,m);return r.Tu.set(t,T),r.Iu.has(s)?r.Iu.get(s).push(t):r.Iu.set(s,[t]),x.snapshot}async function E2(r,t,s){const i=Ve(r),c=i.Tu.get(t),h=i.Iu.get(c.targetId);if(h.length>1)return i.Iu.set(c.targetId,h.filter((m=>!Su(m,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(c.targetId),i.sharedClientState.isActiveQueryTarget(c.targetId)||await _d(i.localStore,c.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(c.targetId),s&&Yd(i.remoteStore,c.targetId),Td(i,c.targetId)})).catch(Bi)):(Td(i,c.targetId),await _d(i.localStore,c.targetId,!0))}async function N2(r,t){const s=Ve(r),i=s.Tu.get(t),c=s.Iu.get(i.targetId);s.isPrimaryClient&&c.length===1&&(s.sharedClientState.removeLocalQueryTarget(i.targetId),Yd(s.remoteStore,i.targetId))}async function T2(r,t,s){const i=D2(r);try{const c=await(function(m,p){const v=Ve(m),x=ht.now(),T=p.reduce(((G,te)=>G.add(te.key)),$e());let C,I;return v.persistence.runTransaction("Locally write mutations","readwrite",(G=>{let te=aa(),ie=$e();return v.xs.getEntries(G,T).next((X=>{te=X,te.forEach(((ye,pe)=>{pe.isValidDocument()||(ie=ie.add(ye))}))})).next((()=>v.localDocuments.getOverlayedDocuments(G,te))).next((X=>{C=X;const ye=[];for(const pe of p){const de=UN(pe,C.get(pe.key).overlayedDocument);de!=null&&ye.push(new Za(pe.key,de,L0(de.value.mapValue),vn.exists(!0)))}return v.mutationQueue.addMutationBatch(G,x,ye,p)})).next((X=>{I=X;const ye=X.applyToLocalDocumentSet(C,ie);return v.documentOverlayCache.saveOverlays(G,X.batchId,ye)}))})).then((()=>({batchId:I.batchId,changes:X0(C)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(c.batchId),(function(m,p,v){let x=m.du[m.currentUser.toKey()];x||(x=new yt(Fe)),x=x.insert(p,v),m.du[m.currentUser.toKey()]=x})(i,c.batchId,s),await vo(i,c.changes),await Ou(i.remoteStore)}catch(c){const h=Jd(c,"Failed to persist write");s.reject(h)}}async function Vv(r,t){const s=Ve(r);try{const i=await kT(s.localStore,t);t.targetChanges.forEach(((c,h)=>{const m=s.Au.get(h);m&&(tt(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?m.hu=!0:c.modifiedDocuments.size>0?tt(m.hu,14607):c.removedDocuments.size>0&&(tt(m.hu,42227),m.hu=!1))})),await vo(s,i,t)}catch(i){await Bi(i)}}function Bx(r,t,s){const i=Ve(r);if(i.isPrimaryClient&&s===0||!i.isPrimaryClient&&s===1){const c=[];i.Tu.forEach(((h,m)=>{const p=m.view.va(t);p.snapshot&&c.push(p.snapshot)})),(function(m,p){const v=Ve(m);v.onlineState=p;let x=!1;v.queries.forEach(((T,C)=>{for(const I of C.ba)I.va(p)&&(x=!0)})),x&&Wd(v)})(i.eventManager,t),c.length&&i.Pu.J_(c),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function w2(r,t,s){const i=Ve(r);i.sharedClientState.updateQueryState(t,"rejected",s);const c=i.Au.get(t),h=c&&c.key;if(h){let m=new yt(Te.comparator);m=m.insert(h,ln.newNoDocument(h,Re.min()));const p=$e().add(h),v=new Iu(Re.min(),new Map,new yt(Fe),m,p);await Vv(i,v),i.Ru=i.Ru.remove(h),i.Au.delete(t),tm(i)}else await _d(i.localStore,t,!1).then((()=>Td(i,t,s))).catch(Bi)}async function j2(r,t){const s=Ve(r),i=t.batch.batchId;try{const c=await OT(s.localStore,t);kv(s,i,null),Ov(s,i),s.sharedClientState.updateMutationState(i,"acknowledged"),await vo(s,c)}catch(c){await Bi(c)}}async function S2(r,t,s){const i=Ve(r);try{const c=await(function(m,p){const v=Ve(m);return v.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let T;return v.mutationQueue.lookupMutationBatch(x,p).next((C=>(tt(C!==null,37113),T=C.keys(),v.mutationQueue.removeMutationBatch(x,C)))).next((()=>v.mutationQueue.performConsistencyCheck(x))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(x,T,p))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,T))).next((()=>v.localDocuments.getDocuments(x,T)))}))})(i.localStore,t);kv(i,t,s),Ov(i,t),i.sharedClientState.updateMutationState(t,"rejected",s),await vo(i,c)}catch(c){await Bi(c)}}function Ov(r,t){(r.mu.get(t)||[]).forEach((s=>{s.resolve()})),r.mu.delete(t)}function kv(r,t,s){const i=Ve(r);let c=i.du[i.currentUser.toKey()];if(c){const h=c.get(t);h&&(s?h.reject(s):h.resolve(),c=c.remove(t)),i.du[i.currentUser.toKey()]=c}}function Td(r,t,s=null){r.sharedClientState.removeLocalQueryTarget(t);for(const i of r.Iu.get(t))r.Tu.delete(i),s&&r.Pu.yu(i,s);r.Iu.delete(t),r.isPrimaryClient&&r.Vu.Gr(t).forEach((i=>{r.Vu.containsKey(i)||zv(r,i)}))}function zv(r,t){r.Eu.delete(t.path.canonicalString());const s=r.Ru.get(t);s!==null&&(Yd(r.remoteStore,s),r.Ru=r.Ru.remove(t),r.Au.delete(s),tm(r))}function qx(r,t,s){for(const i of s)i instanceof Dv?(r.Vu.addReference(i.key,t),A2(r,i)):i instanceof Iv?(ge(em,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,t),r.Vu.containsKey(i.key)||zv(r,i.key)):Ce(19791,{wu:i})}function A2(r,t){const s=t.key,i=s.path.canonicalString();r.Ru.get(s)||r.Eu.has(i)||(ge(em,"New document in limbo: "+s),r.Eu.add(i),tm(r))}function tm(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const s=new Te(ft.fromString(t)),i=r.fu.next();r.Au.set(i,new y2(s)),r.Ru=r.Ru.insert(s,i),Ev(r.remoteStore,new za(Cs(Ud(s.path)),i,"TargetPurposeLimboResolution",Tu.ce))}}async function vo(r,t,s){const i=Ve(r),c=[],h=[],m=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,v)=>{m.push(i.pu(v,t,s).then((x=>{var T;if((x||s)&&i.isPrimaryClient){const C=x?!x.fromCache:(T=s==null?void 0:s.targetChanges.get(v.targetId))==null?void 0:T.current;i.sharedClientState.updateQueryState(v.targetId,C?"current":"not-current")}if(x){c.push(x);const C=Fd.Es(v.targetId,x);h.push(C)}})))})),await Promise.all(m),i.Pu.J_(c),await(async function(v,x){const T=Ve(v);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>se.forEach(x,(I=>se.forEach(I.Ts,(G=>T.persistence.referenceDelegate.addReference(C,I.targetId,G))).next((()=>se.forEach(I.Is,(G=>T.persistence.referenceDelegate.removeReference(C,I.targetId,G)))))))))}catch(C){if(!qi(C))throw C;ge($d,"Failed to update sequence numbers: "+C)}for(const C of x){const I=C.targetId;if(!C.fromCache){const G=T.vs.get(I),te=G.snapshotVersion,ie=G.withLastLimboFreeSnapshotVersion(te);T.vs=T.vs.insert(I,ie)}}})(i.localStore,h))}async function C2(r,t){const s=Ve(r);if(!s.currentUser.isEqual(t)){ge(em,"User change. New user:",t.toKey());const i=await xv(s.localStore,t);s.currentUser=t,(function(h,m){h.mu.forEach((p=>{p.forEach((v=>{v.reject(new fe(W.CANCELLED,m))}))})),h.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await vo(s,i.Ns)}}function R2(r,t){const s=Ve(r),i=s.Au.get(t);if(i&&i.hu)return $e().add(i.key);{let c=$e();const h=s.Iu.get(t);if(!h)return c;for(const m of h){const p=s.Tu.get(m);c=c.unionWith(p.view.nu)}return c}}function Uv(r){const t=Ve(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=R2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=w2.bind(null,t),t.Pu.J_=d2.bind(null,t.eventManager),t.Pu.yu=m2.bind(null,t.eventManager),t}function D2(r){const t=Ve(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=j2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=S2.bind(null,t),t}class bu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Mu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,s){return null}Mu(t,s){return null}vu(t){return VT(this.persistence,new DT,t.initialUser,this.serializer)}Cu(t){return new yv(Gd.Vi,this.serializer)}Du(t){return new BT}async terminate(){var t,s;(t=this.gcScheduler)==null||t.stop(),(s=this.indexBackfillerScheduler)==null||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bu.provider={build:()=>new bu};class I2 extends bu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,s){tt(this.persistence.referenceDelegate instanceof xu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new pT(i,t.asyncQueue,s)}Cu(t){const s=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new yv((i=>xu.Vi(i,s)),this.serializer)}}class wd{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Bx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=C2.bind(null,this.syncEngine),await u2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new f2})()}createDatastore(t){const s=Mu(t.databaseInfo.databaseId),i=$T(t.databaseInfo);return ZT(t.authCredentials,t.appCheckCredentials,i,s)}createRemoteStore(t){return(function(i,c,h,m,p){return new WT(i,c,h,m,p)})(this.localStore,this.datastore,t.asyncQueue,(s=>Bx(this.syncEngine,s,0)),(function(){return Ox.v()?new Ox:new qT})())}createSyncEngine(t,s){return(function(c,h,m,p,v,x,T){const C=new x2(c,h,m,p,v,x);return T&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await(async function(c){const h=Ve(c);ge(Ir,"RemoteStore shutting down."),h.Ea.add(5),await xo(h),h.Aa.shutdown(),h.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(s=this.eventManager)==null||s.terminate()}}wd.provider={build:()=>new wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):sa("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,s){setTimeout((()=>{this.muted||t(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="FirestoreClient";class M2{constructor(t,s,i,c,h){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=i,this._databaseInfo=c,this.user=rn.UNAUTHENTICATED,this.clientId=Id.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(i,(async m=>{ge(Ya,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(i,(m=>(ge(Ya,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const i=Jd(s,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function nd(r,t){r.asyncQueue.verifyOperationInProgress(),ge(Ya,"Initializing OfflineComponentProvider");const s=r.configuration;await t.initialize(s);let i=s.initialUser;r.setCredentialChangeListener((async c=>{i.isEqual(c)||(await xv(t.localStore,c),i=c)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function Hx(r,t){r.asyncQueue.verifyOperationInProgress();const s=await V2(r);ge(Ya,"Initializing OnlineComponentProvider"),await t.initialize(s,r.configuration),r.setCredentialChangeListener((i=>zx(t.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,c)=>zx(t.remoteStore,c))),r._onlineComponents=t}async function V2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(Ya,"Using user provided OfflineComponentProvider");try{await nd(r,r._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!(function(c){return c.name==="FirebaseError"?c.code===W.FAILED_PRECONDITION||c.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(s))throw s;Dr("Error using user provided cache. Falling back to memory cache: "+s),await nd(r,new bu)}}else ge(Ya,"Using default OfflineComponentProvider"),await nd(r,new I2(void 0));return r._offlineComponents}async function Pv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(Ya,"Using user provided OnlineComponentProvider"),await Hx(r,r._uninitializedComponentsProvider._online)):(ge(Ya,"Using default OnlineComponentProvider"),await Hx(r,new wd))),r._onlineComponents}function O2(r){return Pv(r).then((t=>t.syncEngine))}async function Bv(r){const t=await Pv(r),s=t.eventManager;return s.onListen=v2.bind(null,t.syncEngine),s.onUnlisten=E2.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=b2.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=N2.bind(null,t.syncEngine),s}function k2(r,t,s={}){const i=new ea;return r.asyncQueue.enqueueAndForget((async()=>(function(h,m,p,v,x){const T=new Lv({next:I=>{T.Nu(),m.enqueueAndForget((()=>Cv(h,C)));const G=I.docs.has(p);!G&&I.fromCache?x.reject(new fe(W.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&I.fromCache&&v&&v.source==="server"?x.reject(new fe(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(I)},error:I=>x.reject(I)}),C=new Rv(Ud(p.path),T,{includeMetadataChanges:!0,Ka:!0});return Av(h,C)})(await Bv(r),r.asyncQueue,t,s,i))),i.promise}function z2(r,t,s={}){const i=new ea;return r.asyncQueue.enqueueAndForget((async()=>(function(h,m,p,v,x){const T=new Lv({next:I=>{T.Nu(),m.enqueueAndForget((()=>Cv(h,C))),I.fromCache&&v.source==="server"?x.reject(new fe(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(I)},error:I=>x.reject(I)}),C=new Rv(p,T,{includeMetadataChanges:!0,Ka:!0});return Av(h,C)})(await Bv(r),r.asyncQueue,t,s,i))),i.promise}function U2(r,t){const s=new ea;return r.asyncQueue.enqueueAndForget((async()=>T2(await O2(r),t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="ComponentProvider",Gx=new Map;function P2(r,t,s,i,c){return new iN(r,t,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,qv(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="firestore.googleapis.com",Fx=!0;class $x{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new fe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hv,this.ssl=Fx}else this.host=t.host,this.ssl=t.ssl??Fx;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=pv;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<mT)throw new fe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qv(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,c){return i.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ku{constructor(t,s,i,c){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=i,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $x({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new fe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $x(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new LE;switch(i.type){case"firstParty":return new HE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const i=Gx.get(s);i&&(ge(L2,"Removing Datastore"),Gx.delete(s),i.terminate())})(this),Promise.resolve()}}function B2(r,t,s,i={}){var x;r=Ms(r,ku);const c=Cd(t),h=r._getSettings(),m={...h,emulatorOptions:r._getEmulatorOptions()},p=`${t}:${s}`;c&&(h1(`https://${p}`),g1("Firestore",!0)),h.host!==Hv&&h.host!==p&&Dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...h,host:p,ssl:c,emulatorOptions:i};if(!ou(v,m)&&(r._setSettings(v),i.mockUserToken)){let T,C;if(typeof i.mockUserToken=="string")T=i.mockUserToken,C=rn.MOCK_USER;else{T=f1(i.mockUserToken,(x=r._app)==null?void 0:x.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new fe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new rn(I)}r._authCredentials=new PE(new S0(T,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t,s,i){this.converter=s,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Or(this.firestore,t,this._query)}}class Pt{constructor(t,s,i){this.converter=s,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pt(this.firestore,t,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,s,i){if(go(s,Pt._jsonSchema))return new Pt(t,i||null,new Te(ft.fromString(s.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Lt("string",Pt._jsonSchemaVersion),referencePath:Lt("string")};class Ba extends Or{constructor(t,s,i){super(t,s,Ud(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pt(this.firestore,null,new Te(t))}withConverter(t){return new Ba(this.firestore,t,this._path)}}function nm(r,t,...s){if(r=Is(r),A0("collection","path",t),r instanceof ku){const i=ft.fromString(t,...s);return rx(i),new Ba(r,null,i)}{if(!(r instanceof Pt||r instanceof Ba))throw new fe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(t,...s));return rx(i),new Ba(r.firestore,null,i)}}function bo(r,t,...s){if(r=Is(r),arguments.length===1&&(t=Id.newId()),A0("doc","path",t),r instanceof ku){const i=ft.fromString(t,...s);return ax(i),new Pt(r,null,new Te(i))}{if(!(r instanceof Pt||r instanceof Ba))throw new fe(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ft.fromString(t,...s));return ax(i),new Pt(r.firestore,r instanceof Ba?r.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="AsyncQueue";class Qx{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bv(this,"async_queue_retry"),this._c=()=>{const i=td();i&&ge(Yx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const s=td();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const s=td();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!qi(t))throw t;ge(Yx,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const s=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,sa("INTERNAL UNHANDLED ERROR: ",Kx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=s,s}enqueueAfterDelay(t,s,i){this.uc(),this.oc.indexOf(t)>-1&&(s=0);const c=Zd.createAndSchedule(this,t,s,i,(h=>this.hc(h)));return this.tc.push(c),c}uc(){this.nc&&Ce(47125,{Pc:Kx(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const s of this.tc)if(s.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((s,i)=>s.targetTimeMs-i.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const s=this.tc.indexOf(t);this.tc.splice(s,1)}}function Kx(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class kr extends ku{constructor(t,s,i,c){super(t,s,i,c),this.type="firestore",this._queue=new Qx,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Qx(t),this._firestoreClient=void 0,await t}}}function q2(r,t){const s=typeof r=="object"?r:wE(),i=typeof r=="string"?r:fu,c=bE(s,"firestore").getImmediate({identifier:i});if(!c._initialized){const h=c1("firestore");h&&B2(c,...h)}return c}function zu(r){if(r._terminated)throw new fe(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||H2(r),r._firestoreClient}function H2(r){var i,c,h,m;const t=r._freezeSettings(),s=P2(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(c=r._app)==null?void 0:c.options.apiKey,t);r._componentsProvider||(h=t.localCache)!=null&&h._offlineComponentProvider&&((m=t.localCache)!=null&&m._onlineComponentProvider)&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new M2(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&(function(v){const x=v==null?void 0:v._online.build();return{_offline:v==null?void 0:v._offline.build(x),_online:x}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $n(nn.fromBase64String(t))}catch(s){throw new fe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new $n(nn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(go(t,$n._jsonSchema))return $n.fromBase64String(t.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:Lt("string",$n._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new fe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new fe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new fe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Fe(this._lat,t._lat)||Fe(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ds._jsonSchemaVersion}}static fromJSON(t){if(go(t,Ds._jsonSchema))return new Ds(t.latitude,t.longitude)}}Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:Lt("string",Ds._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(t){this._values=(t||[]).map((s=>s))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,c){if(i.length!==c.length)return!1;for(let h=0;h<i.length;++h)if(i[h]!==c[h])return!1;return!0})(this._values,t._values)}toJSON(){return{type:rs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(go(t,rs._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((s=>typeof s=="number")))return new rs(t.vectorValues);throw new fe(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rs._jsonSchemaVersion="firestore/vectorValue/1.0",rs._jsonSchema={type:Lt("string",rs._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=/^__.*__$/;class F2{constructor(t,s,i){this.data=t,this.fieldMask=s,this.fieldTransforms=i}toMutation(t,s){return this.fieldMask!==null?new Za(t,this.data,this.fieldMask,s,this.fieldTransforms):new po(t,this.data,s,this.fieldTransforms)}}class Gv{constructor(t,s,i){this.data=t,this.fieldMask=s,this.fieldTransforms=i}toMutation(t,s){return new Za(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function Fv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{dataSource:r})}}class rm{constructor(t,s,i,c,h,m){this.settings=t,this.databaseId=s,this.serializer=i,this.ignoreUndefinedProperties=c,h===void 0&&this.validatePath(),this.fieldTransforms=h||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new rm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var c;const s=(c=this.path)==null?void 0:c.child(t),i=this.contextWith({path:s,arrayElement:!1});return i.validatePathSegment(t),i}childContextForFieldPath(t){var c;const s=(c=this.path)==null?void 0:c.child(t),i=this.contextWith({path:s,arrayElement:!1});return i.validatePath(),i}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return _u(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((s=>t.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>t.isPrefixOf(s.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(Fv(this.dataSource)&&G2.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class $2{constructor(t,s,i){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=i||Mu(t)}createContext(t,s,i,c=!1){return new rm({dataSource:t,methodName:s,targetDoc:i,path:tn.emptyPath(),arrayElement:!1,hasConverter:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uu(r){const t=r._freezeSettings(),s=Mu(r._databaseId);return new $2(r._databaseId,!!t.ignoreUndefinedProperties,s)}function im(r,t,s,i,c,h={}){const m=r.createContext(h.merge||h.mergeFields?2:0,t,s,c);lm("Data must be an object, but it was:",m,i);const p=$v(i,m);let v,x;if(h.merge)v=new Rn(m.fieldMask),x=m.fieldTransforms;else if(h.mergeFields){const T=[];for(const C of h.mergeFields){const I=Ui(t,C,s);if(!m.contains(I))throw new fe(W.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Kv(T,I)||T.push(I)}v=new Rn(T),x=m.fieldTransforms.filter((C=>v.covers(C.field)))}else v=null,x=m.fieldTransforms;return new F2(new xn(p),v,x)}class Lu extends am{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Lu}}function Y2(r,t,s,i){const c=r.createContext(1,t,s);lm("Data must be an object, but it was:",c,i);const h=[],m=xn.empty();Xa(i,((v,x)=>{const T=Qv(t,v,s);x=Is(x);const C=c.childContextForFieldPath(T);if(x instanceof Lu)h.push(T);else{const I=_o(x,C);I!=null&&(h.push(T),m.set(T,I))}}));const p=new Rn(h);return new Gv(m,p,c.fieldTransforms)}function Q2(r,t,s,i,c,h){const m=r.createContext(1,t,s),p=[Ui(t,i,s)],v=[c];if(h.length%2!=0)throw new fe(W.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<h.length;I+=2)p.push(Ui(t,h[I])),v.push(h[I+1]);const x=[],T=xn.empty();for(let I=p.length-1;I>=0;--I)if(!Kv(x,p[I])){const G=p[I];let te=v[I];te=Is(te);const ie=m.childContextForFieldPath(G);if(te instanceof Lu)x.push(G);else{const X=_o(te,ie);X!=null&&(x.push(G),T.set(G,X))}}const C=new Rn(x);return new Gv(T,C,m.fieldTransforms)}function K2(r,t,s,i=!1){return _o(s,r.createContext(i?4:3,t))}function _o(r,t){if(Yv(r=Is(r)))return lm("Unsupported field value:",t,r),$v(r,t);if(r instanceof am)return(function(i,c){if(!Fv(c.dataSource))throw c.createError(`${i._methodName}() can only be used with update() and set()`);if(!c.path)throw c.createError(`${i._methodName}() is not currently supported inside arrays`);const h=i._toFieldTransform(c);h&&c.fieldTransforms.push(h)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(i,c){const h=[];let m=0;for(const p of i){let v=_o(p,c.childContextForArray(m));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),m++}return{arrayValue:{values:h}}})(r,t)}return(function(i,c){if((i=Is(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return IN(c.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const h=ht.fromDate(i);return{timestampValue:yu(c.serializer,h)}}if(i instanceof ht){const h=new ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yu(c.serializer,h)}}if(i instanceof Ds)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $n)return{bytesValue:ov(c.serializer,i._byteString)};if(i instanceof Pt){const h=c.databaseId,m=i.firestore._databaseId;if(!m.isEqual(h))throw c.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:qd(i.firestore._databaseId||c.databaseId,i._key.path)}}if(i instanceof rs)return(function(m,p){const v=m instanceof rs?m.toArray():m;return{mapValue:{fields:{[z0]:{stringValue:U0},[du]:{arrayValue:{values:v.map((T=>{if(typeof T!="number")throw p.createError("VectorValues must only contain numeric values.");return Ld(p.serializer,T)}))}}}}}})(i,c);if(gv(i))return i._toProto(c.serializer);throw c.createError(`Unsupported field value: ${Nu(i)}`)})(r,t)}function $v(r,t){const s={};return D0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xa(r,((i,c)=>{const h=_o(c,t.childContextForField(i));h!=null&&(s[i]=h)})),{mapValue:{fields:s}}}function Yv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ht||r instanceof Ds||r instanceof $n||r instanceof Pt||r instanceof am||r instanceof rs||gv(r))}function lm(r,t,s){if(!Yv(s)||!C0(s)){const i=Nu(s);throw i==="an object"?t.createError(r+" a custom object"):t.createError(r+" "+i)}}function Ui(r,t,s){if((t=Is(t))instanceof sm)return t._internalPath;if(typeof t=="string")return Qv(r,t);throw _u("Field path arguments must be of type string or ",r,!1,void 0,s)}const X2=new RegExp("[~\\*/\\[\\]]");function Qv(r,t,s){if(t.search(X2)>=0)throw _u(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,s);try{return new sm(...t.split("."))._internalPath}catch{throw _u(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,s)}}function _u(r,t,s,i,c){const h=i&&!i.isEmpty(),m=c!==void 0;let p=`Function ${t}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(h||m)&&(v+=" (found",h&&(v+=` in field ${i}`),m&&(v+=` in document ${c}`),v+=")"),new fe(W.INVALID_ARGUMENT,p+r+v)}function Kv(r,t){return r.some((s=>s.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{convertValue(t,s="none"){switch(Fa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return At(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(Ga(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw Ce(62114,{value:t})}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const i={};return Xa(t,((c,h)=>{i[c]=this.convertValue(h,s)})),i}convertVectorValue(t){var i,c,h;const s=(h=(c=(i=t.fields)==null?void 0:i[du].arrayValue)==null?void 0:c.values)==null?void 0:h.map((m=>At(m.doubleValue)));return new rs(s)}convertGeoPoint(t){return new Ds(At(t.latitude),At(t.longitude))}convertArray(t,s){return(t.values||[]).map((i=>this.convertValue(i,s)))}convertServerTimestamp(t,s){switch(s){case"previous":const i=ju(t);return i==null?null:this.convertValue(i,s);case"estimate":return this.convertTimestamp(lo(t));default:return null}}convertTimestamp(t){const s=Ha(t);return new ht(s.seconds,s.nanos)}convertDocumentKey(t,s){const i=ft.fromString(t);tt(mv(i),9688,{name:t});const c=new oo(i.get(1),i.get(3)),h=new Te(i.popFirst(5));return c.isEqual(s)||sa(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends Z2{constructor(t){super(),this.firestore=t}convertBytes(t){return new $n(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new Pt(this.firestore,null,s)}}const Xx="@firebase/firestore",Zx="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,s,i,c,h){this._firestore=t,this._userDataWriter=s,this._key=i,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new J2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const s=this._document.data.field(Ui("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class J2 extends Zv{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class om{}class Jv extends om{}function ew(r,t,...s){let i=[];t instanceof om&&i.push(t),i=i.concat(s),(function(h){const m=h.filter((v=>v instanceof um)).length,p=h.filter((v=>v instanceof cm)).length;if(m>1||m>0&&p>0)throw new fe(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const c of i)r=c._apply(r);return r}class cm extends Jv{constructor(t,s,i){super(),this._field=t,this._op=s,this._value=i,this.type="where"}static _create(t,s,i){return new cm(t,s,i)}_apply(t){const s=this._parse(t);return Wv(t._query,s),new Or(t.firestore,t.converter,gd(t._query,s))}_parse(t){const s=Uu(t.firestore);return(function(h,m,p,v,x,T,C){let I;if(x.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new fe(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Wx(C,T);const te=[];for(const ie of C)te.push(Jx(v,h,ie));I={arrayValue:{values:te}}}else I=Jx(v,h,C)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Wx(C,T),I=K2(p,m,C,T==="in"||T==="not-in");return Ut.create(x,T,I)})(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}class um extends om{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new um(t,s)}_parse(t){const s=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return s.length===1?s[0]:is.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:((function(c,h){let m=c;const p=h.getFlattenedFilters();for(const v of p)Wv(m,v),m=gd(m,v)})(t._query,s),new Or(t.firestore,t.converter,gd(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hm extends Jv{constructor(t,s){super(),this._field=t,this._direction=s,this.type="orderBy"}static _create(t,s){return new hm(t,s)}_apply(t){const s=(function(c,h,m){if(c.startAt!==null)throw new fe(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(c.endAt!==null)throw new fe(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uo(h,m)})(t._query,this._field,this._direction);return new Or(t.firestore,t.converter,TN(t._query,s))}}function tw(r,t="asc"){const s=t,i=Ui("orderBy",r);return hm._create(i,s)}function Jx(r,t,s){if(typeof(s=Is(s))=="string"){if(s==="")throw new fe(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$0(t)&&s.indexOf("/")!==-1)throw new fe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const i=t.path.child(ft.fromString(s));if(!Te.isDocumentKey(i))throw new fe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dx(r,new Te(i))}if(s instanceof Pt)return dx(r,s._key);throw new fe(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nu(s)}.`)}function Wx(r,t){if(!Array.isArray(r)||r.length===0)throw new fe(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Wv(r,t){const s=(function(c,h){for(const m of c)for(const p of m.getFlattenedFilters())if(h.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(s!==null)throw s===t.op?new fe(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new fe(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}function fm(r,t,s){let i;return i=r?s&&(s.merge||s.mergeFields)?r.toFirestore(t,s):r.toFirestore(t):t,i}class Jl{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Cr extends Zv{constructor(t,s,i,c,h,m){super(t,s,i,c,m),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const i=this._document.data.field(Ui("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,s={};return s.type=Cr._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Cr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cr._jsonSchema={type:Lt("string",Cr._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class iu extends Cr{data(t={}){return super.data(t)}}class Di{constructor(t,s,i,c){this._firestore=t,this._userDataWriter=s,this._snapshot=c,this.metadata=new Jl(c.hasPendingWrites,c.fromCache),this.query=i}get docs(){const t=[];return this.forEach((s=>t.push(s))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach((i=>{t.call(s,new iu(this._firestore,this._userDataWriter,i.key,i,new Jl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new fe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(c,h){if(c._snapshot.oldDocs.isEmpty()){let m=0;return c._snapshot.docChanges.map((p=>{const v=new iu(c._firestore,c._userDataWriter,p.doc.key,p.doc,new Jl(c._snapshot.mutatedKeys.has(p.doc.key),c._snapshot.fromCache),c.query.converter);return p.doc,{type:"added",doc:v,oldIndex:-1,newIndex:m++}}))}{let m=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((p=>h||p.type!==3)).map((p=>{const v=new iu(c._firestore,c._userDataWriter,p.doc.key,p.doc,new Jl(c._snapshot.mutatedKeys.has(p.doc.key),c._snapshot.fromCache),c.query.converter);let x=-1,T=-1;return p.type!==0&&(x=m.indexOf(p.doc.key),m=m.delete(p.doc.key)),p.type!==1&&(m=m.add(p.doc),T=m.indexOf(p.doc.key)),{type:nw(p.type),doc:v,oldIndex:x,newIndex:T}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Di._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Id.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],i=[],c=[];return this.docs.forEach((h=>{h._document!==null&&(s.push(h._document),i.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),c.push(h.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function nw(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di._jsonSchemaVersion="firestore/querySnapshot/1.0",Di._jsonSchema={type:Lt("string",Di._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t,s){this._firestore=t,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Uu(t)}set(t,s,i){this._verifyNotCommitted();const c=sd(t,this._firestore),h=fm(c.converter,s,i),m=im(this._dataReader,"WriteBatch.set",c._key,h,c.converter!==null,i);return this._mutations.push(m.toMutation(c._key,vn.none())),this}update(t,s,i,...c){this._verifyNotCommitted();const h=sd(t,this._firestore);let m;return m=typeof(s=Is(s))=="string"||s instanceof sm?Q2(this._dataReader,"WriteBatch.update",h._key,s,i,c):Y2(this._dataReader,"WriteBatch.update",h._key,s),this._mutations.push(m.toMutation(h._key,vn.exists(!0))),this}delete(t){this._verifyNotCommitted();const s=sd(t,this._firestore);return this._mutations=this._mutations.concat(new Du(s._key,vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sd(r,t){if((r=Is(r)).firestore!==t)throw new fe(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(r){r=Ms(r,Pt);const t=Ms(r.firestore,kr),s=zu(t);return k2(s,r._key).then((i=>lw(t,r,i)))}function eb(r){r=Ms(r,Or);const t=Ms(r.firestore,kr),s=zu(t),i=new Xv(t);return W2(r._query),z2(s,r._query).then((c=>new Di(t,i,r,c)))}function tb(r,t,s){r=Ms(r,Pt);const i=Ms(r.firestore,kr),c=fm(r.converter,t,s),h=Uu(i);return Pu(i,[im(h,"setDoc",r._key,c,r.converter!==null,s).toMutation(r._key,vn.none())])}function rw(r){return Pu(Ms(r.firestore,kr),[new Du(r._key,vn.none())])}function iw(r,t){const s=Ms(r.firestore,kr),i=bo(r),c=fm(r.converter,t),h=Uu(r.firestore);return Pu(s,[im(h,"addDoc",i._key,c,r.converter!==null,{}).toMutation(i._key,vn.exists(!1))]).then((()=>i))}function Pu(r,t){const s=zu(r);return U2(s,t)}function lw(r,t,s){const i=s.docs.get(t._key),c=new Xv(r);return new Cr(r,c,t._key,i,new Jl(s.hasPendingWrites,s.fromCache),t.converter)}function ow(r){return r=Ms(r,kr),zu(r),new sw(r,(t=>Pu(r,t)))}(function(t,s=!0){UE(TE),uu(new ao("firestore",((i,{instanceIdentifier:c,options:h})=>{const m=i.getProvider("app").getImmediate(),p=new kr(new BE(i.getProvider("auth-internal")),new GE(m,i.getProvider("app-check-internal")),lN(m,c),m);return h={useFetchStreams:s,...h},p._setSettings(h),p}),"PUBLIC").setMultipleInstances(!0)),Ai(Xx,Zx,t),Ai(Xx,Zx,"esm2020")})();const cw={apiKey:"AIzaSyCYT45WYMTTCpp3MDvUShT1yEwz-x9mYWQ",authDomain:"core-safe.firebaseapp.com",projectId:"core-safe",storageBucket:"core-safe.firebasestorage.app",messagingSenderId:"538945747105",appId:"1:538945747105:web:09373b659159a8b8c618e0"},uw=y0(cw),Qa=q2(uw),mo="drafts",nb="masterData",sb="general",jd=async()=>{try{const r=ew(nm(Qa,mo),tw("lastModified","desc"));return(await eb(r)).docs.map(s=>{const i=s.data();return{id:s.id,type:i.type,lastModified:i.lastModified instanceof ht?i.lastModified.toMillis():i.lastModified,data:i.data}})}catch(r){throw console.error(": ",r),r}},hw=async r=>{try{await rw(bo(Qa,mo,r))}catch(t){throw console.error(": ",t),t}},Ka=async(r,t,s)=>{try{const i={type:t,data:s,lastModified:ht.now()};return r?(await tb(bo(Qa,mo,r),i,{merge:!0}),r):(await iw(nm(Qa,mo),i)).id}catch(i){throw console.error(": ",i),i}},Bu=async()=>{try{const r=bo(Qa,nb,sb),t=await aw(r);return t.exists()?t.data():ut}catch(r){return console.error(": ",r),ut}},ta=async r=>{try{await tb(bo(Qa,nb,sb),r)}catch(t){throw console.error(": ",t),t}},fw=r=>new Promise((t,s)=>{const i=new FileReader;i.readAsDataURL(r),i.onload=c=>{var m;const h=new Image;h.src=(m=c.target)==null?void 0:m.result,h.onload=()=>{const p=document.createElement("canvas"),v=800,x=v/h.width;p.width=v,p.height=h.height*x;const T=p.getContext("2d");T==null||T.drawImage(h,0,0,p.width,p.height),t(p.toDataURL("image/jpeg",.7))},h.onerror=s},i.onerror=s}),qu=async r=>{try{const t=await eb(nm(Qa,mo)),s=ow(Qa);let i=0;t.forEach(c=>{const h=c.data();h.data&&h.data.project===r&&(s.delete(c.ref),i++)}),i>0&&await s.commit()}catch(t){throw console.error(": ",t),t}},ab=async r=>{try{return(await jd()).filter(i=>i.type==="SAFETY_PLAN"&&i.data.project===r)}catch(t){throw console.error(": ",t),t}},dm=({onSave:r,onClear:t,lineWidth:s=3.5,keepOpenOnSave:i=!1})=>{const[c,h]=re.useState(!1),m=re.useRef(null),p=re.useRef(null),[v,x]=re.useState(!1),[T,C]=re.useState(!1),[I,G]=re.useState(!1),[te,ie]=re.useState(!1),[X,ye]=re.useState({width:0,height:0}),[pe,de]=re.useState(!1);re.useEffect(()=>{const j=()=>{de(window.innerHeight>window.innerWidth)};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),re.useEffect(()=>{if(!c||!m.current)return;const j=setTimeout(()=>{(()=>{if(m.current){const E=window.devicePixelRatio||1,me=Math.floor(m.current.clientWidth*E),Oe=Math.floor(m.current.clientHeight*E);me>0&&Oe>0&&ye({width:me,height:Oe})}})()},300);return()=>clearTimeout(j)},[c,pe]),re.useEffect(()=>{if(!c||X.width===0)return;const j=p.current;if(j){const V=j.getContext("2d");V&&(V.lineWidth=s,V.lineCap="round",V.lineJoin="round",V.strokeStyle="#000")}},[X,c,s]);const be=j=>{const V=p.current;if(!V)return{x:0,y:0};const E=V.getBoundingClientRect(),me=j.clientX,Oe=j.clientY,q=me-E.left,Z=Oe-E.top;return pe?{x:Z/E.height*V.width,y:(1-q/E.width)*V.height}:{x:q/E.width*V.width,y:Z/E.height*V.height}},De=j=>{var me;if(te&&j.pointerType!=="pen")return;j.preventDefault(),j.stopPropagation(),x(!0),j.target.setPointerCapture(j.pointerId);const V=be(j),E=(me=p.current)==null?void 0:me.getContext("2d");E==null||E.beginPath(),E==null||E.moveTo(V.x,V.y)},we=j=>{var me;if(!v||te&&j.pointerType!=="pen")return;j.preventDefault(),j.stopPropagation();const V=be(j),E=(me=p.current)==null?void 0:me.getContext("2d");E==null||E.lineTo(V.x,V.y),E==null||E.stroke(),T||C(!0)},R=j=>{v&&(j.preventDefault(),x(!1),j.target.releasePointerCapture(j.pointerId))},w=()=>{const j=p.current,V=j==null?void 0:j.getContext("2d");j&&V&&V.clearRect(0,0,j.width,j.height),C(!1)},S=()=>{if(p.current&&T){const j=p.current,V=0,E=j.height*.25,me=j.width,Oe=j.height*.5,q=document.createElement("canvas");q.width=me,q.height=Oe;const Z=q.getContext("2d");Z&&(Z.drawImage(j,V,E,me,Oe,0,0,q.width,q.height),r(q.toDataURL("image/png"))),i?(w(),G(!0),setTimeout(()=>G(!1),2e3)):h(!1)}};if(!c)return o.jsxs("div",{onClick:()=>h(!0),className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-blue-50 hover:border-blue-300 bg-white text-gray-500 transition-all group",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-2 group-hover:bg-blue-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-pen-nib text-xl text-gray-400 group-hover:text-blue-500"})}),o.jsx("span",{className:"font-bold text-sm group-hover:text-blue-600",children:""})]});const M=pe?"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[100dvh] h-[100dvw] rotate-90 origin-center":"fixed inset-0 w-full h-full";return o.jsx("div",{className:"fixed inset-0 z-[100] bg-gray-900 bg-opacity-95 select-none touch-none",onContextMenu:j=>j.preventDefault(),style:{WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:o.jsxs("div",{className:`${M} bg-white flex flex-col overflow-hidden shadow-2xl relative select-none`,children:[I&&o.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[60] bg-gray-800 bg-opacity-90 text-white px-8 py-6 rounded-xl shadow-2xl animate-fade-in flex flex-col items-center backdrop-blur-sm pointer-events-none",children:[o.jsx("i",{className:"fa-solid fa-check-circle text-5xl text-green-400 mb-4"}),o.jsx("span",{className:"font-bold text-xl mb-1",children:""}),o.jsx("span",{className:"text-sm text-gray-300",children:""})]}),o.jsxs("div",{className:"bg-gray-100 flex-none border-b shadow-sm z-20 select-none",children:[o.jsxs("div",{className:"relative flex justify-between items-center px-4 py-4 border-b border-gray-200 bg-white min-h-[72px]",children:[o.jsx("button",{type:"button",onClick:()=>{h(!1),t()},className:"px-4 py-2 text-sm font-bold text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 border border-gray-300 z-10 relative",children:""}),o.jsxs("h3",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 font-bold text-lg text-gray-800 hidden sm:flex items-center justify-center pointer-events-none",children:[o.jsx("i",{className:"fa-solid fa-pen-nib mr-2 text-gray-500"}),""]}),o.jsxs("div",{className:"flex items-center gap-2 z-10 relative",children:[o.jsxs("button",{type:"button",onClick:w,className:"px-3 py-2 text-sm font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg flex items-center border border-red-200 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-eraser mr-1"})," ",o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"sm:hidden",children:""})]}),o.jsxs("button",{type:"button",onClick:S,disabled:!T,className:`px-4 py-2 text-sm font-bold rounded-lg flex items-center shadow-sm transition-colors ${T?"bg-blue-600 text-white active:scale-95 hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[o.jsx("i",{className:"fa-solid fa-check mr-1"})," "]})]})]}),o.jsxs("div",{className:"relative flex justify-end items-center px-4 py-3 bg-gray-50",children:[o.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-red-600 text-sm font-bold flex items-center pointer-events-none whitespace-nowrap",children:[o.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"sm:hidden",children:""})]}),o.jsxs("label",{className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-bold cursor-pointer transition-colors shadow-sm select-none border-2 z-10 relative bg-white
                  ${te?"bg-blue-600 text-white border-blue-700 hover:bg-blue-700":"bg-green-600 text-white border-green-700 hover:bg-green-700"}
                `,children:[o.jsx("input",{type:"checkbox",className:"hidden",checked:te,onChange:j=>ie(j.target.checked)}),o.jsx("i",{className:`fa-solid ${te?"fa-pen-fancy":"fa-hand-pointer"} text-lg`}),o.jsx("span",{children:te?"":""})]})]})]}),o.jsx("div",{className:"flex-1 min-h-0 bg-gray-50 p-2 sm:p-4 pb-8 sm:pb-8 flex flex-col select-none",children:o.jsxs("div",{ref:m,className:"flex-1 min-h-0 w-full bg-white border-2 border-gray-300 shadow-inner rounded-xl overflow-hidden touch-none relative select-none",children:[o.jsxs("div",{className:"absolute inset-0 flex flex-col pointer-events-none select-none",children:[o.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-b-2 border-dashed border-gray-400 flex items-end justify-center pb-1",children:o.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})}),o.jsx("div",{className:"h-[50%] w-full flex items-center justify-center bg-transparent",children:!T&&o.jsxs("div",{className:"text-center text-gray-200",children:[o.jsx("span",{className:"text-4xl sm:text-6xl font-bold mb-2 block",children:""}),o.jsx("span",{className:"text-xs sm:text-lg font-bold",children:""}),o.jsx("div",{className:"sm:hidden text-red-300 text-[10px] mt-1 font-bold",children:""})]})}),o.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-t-2 border-dashed border-gray-400 flex items-start justify-center pt-1",children:o.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})})]}),X.width>0&&o.jsx("canvas",{ref:p,width:X.width,height:X.height,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},className:"absolute inset-0 z-10 cursor-crosshair block touch-none select-none",onPointerDown:De,onPointerMove:we,onPointerUp:R,onPointerLeave:R,onContextMenu:j=>j.preventDefault()})]})})]})})},e0=({data:r})=>{const t=i=>{const c=i.length;return c>30?"text-xl":c>22?"text-2xl":c>15?"text-3xl":c>10?"text-4xl":"text-5xl"},s=(i,c,h)=>{const m=[];for(let p=0;p<h;p++){const v=c[p];m.push(o.jsxs("tr",{className:"h-20",children:[o.jsx("td",{className:"border border-black text-center text-xl font-bold",children:i+p+1}),o.jsx("td",{className:"border border-black px-4 text-lg",children:v?v.company:""}),o.jsx("td",{className:"border border-black px-2 text-center",children:v?o.jsx("img",{src:v.signatureDataUrl,alt:v.name,className:"h-16 w-auto max-w-full object-contain mx-auto"}):null})]},i+p))}return o.jsx("div",{className:"print-page p-[15mm] flex flex-col h-full justify-between",children:o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-center mb-4",children:[r.month,"  (",i+1,"",i+h,")"]}),o.jsxs("table",{className:"w-full border-collapse border-2 border-black",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"h-10",children:[o.jsx("th",{className:"border border-black bg-gray-100 py-1 w-20 text-lg",children:""}),o.jsx("th",{className:"border border-black bg-gray-100 py-1 w-1/3 text-lg",children:""}),o.jsx("th",{className:"border border-black bg-gray-100 py-1 text-lg",children:" ()"})]})}),o.jsx("tbody",{children:m})]}),o.jsx("div",{className:"mt-2 text-right text-sm",children:i===0&&r.signatures.length<=10?` ${r.signatures.length} `:i===10?` ${r.signatures.length} `:""})]})})};return o.jsxs("div",{className:"font-serif text-black leading-tight",children:[o.jsxs("div",{className:"print-page relative p-[20mm] flex flex-col justify-between items-center",children:[o.jsx("div",{className:"w-full text-center mt-24",children:o.jsx("h1",{className:`${t(r.project)} font-bold mb-4 leading-normal`,children:r.project})}),o.jsx("div",{className:"text-center my-auto",children:o.jsx("h2",{className:"text-4xl font-bold border-b-4 border-double border-black pb-2 px-10 inline-block",children:""})}),o.jsxs("div",{className:"text-center mb-20",children:[o.jsxs("p",{className:"text-4xl font-bold mb-16",children:[r.month," "]}),o.jsx("div",{className:"flex items-center justify-center gap-2",children:o.jsxs("span",{className:"font-bold text-xl italic",style:{fontFamily:"sans-serif"},children:[o.jsx("span",{className:"bg-red-600 text-white px-1 mr-1",children:"K"}),r.contractor]})})]})]}),o.jsx("div",{className:"print-page p-[15mm]",children:o.jsxs("div",{className:"border-2 border-black p-6 h-full",children:[o.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:""}),o.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-y-4 text-lg mb-8",children:[o.jsx("div",{className:"col-span-2 h-8"}),o.jsx("div",{className:"font-bold",children:""}),o.jsx("div",{children:new Date(r.date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}),o.jsx("div",{className:"font-bold",children:""}),o.jsx("div",{children:r.location}),o.jsx("div",{className:"font-bold",children:""}),o.jsxs("div",{children:[r.startTime,"  ",r.endTime," 15"]}),o.jsx("div",{className:"font-bold",children:""}),o.jsx("div",{children:r.instructor}),o.jsx("div",{className:"font-bold",children:""}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(1)"})," ",o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(2)"})," ",o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(3)"})," ",o.jsx("span",{children:r.topic})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(4)"})," ",o.jsx("span",{children:r.caution})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(5)"})," ",o.jsx("span",{children:"web"})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(6)"})," ",o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"mt-8",children:[o.jsx("h4",{className:"text-lg mb-4",children:""}),o.jsx("div",{className:"w-full h-[400px] border border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:r.photoUrl?o.jsx("img",{src:r.photoUrl,alt:"Evidence",className:"max-w-full max-h-full object-contain"}):o.jsx("div",{className:"text-gray-400",children:""})})]})]})}),s(0,r.signatures.slice(0,10),10),r.signatures.length>10&&s(10,r.signatures.slice(10,20),10)]})},t0=Symbol.for("constructDateFrom");function rb(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&t0 in r?r[t0](t):r instanceof Date?new r.constructor(t):new Date(t)}function ib(r,t){return rb(r,r)}function Ii(r,t){return ib(r).getDay()}function lb(r,t){const s=ib(r),i=s.getFullYear(),c=s.getMonth(),h=rb(s,0);return h.setFullYear(i,c+1,0),h.setHours(0,0,0,0),h.getDate()}const dw=["","","","","","",""],mw=r=>{const t=r.getFullYear(),s=r.getMonth()+1,i=r.getDate();if(s===1&&i===1||s===2&&i===11||s===2&&i===23||s===4&&i===29||s===5&&i===3||s===5&&i===4||s===5&&i===5||s===8&&i===11||s===11&&i===3||s===11&&i===23)return!0;const c=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),h=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&i===c||s===9&&i===h},Eu=({data:r})=>{const t="border-2 border-black",s="border border-black",i="bg-cyan-100",c=re.useMemo(()=>{const m=new Date(r.year,r.month-1,1),p=lb(m),v=[];for(let x=1;x<=p;x++){const T=new Date(r.year,r.month-1,x),C=Ii(T)===0,I=Ii(T)===6,G=mw(T);let te="",ie="";C||G?(te="text-red-600",ie="bg-red-50"):I&&(te="text-blue-600",ie="bg-blue-50"),v.push({date:x,dayOfWeek:dw[Ii(T)],colorClass:te,bgClass:ie})}return v},[r.year,r.month]),h=re.useMemo(()=>{const m=c.length,p=Math.floor(m/5),v=m%5;return Array.from({length:5}).map((x,T)=>p+(T<v?1:0))},[c.length]);return o.jsxs("div",{className:"bg-white w-full h-full flex flex-col font-serif text-black p-[10mm]",style:{width:"297mm",height:"210mm"},children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[o.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[o.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[o.jsxs("span",{className:"text-xl",children:[" ",r.year-2018,"  ",r.month," "]}),o.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),o.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),r.project]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),r.location]})]})]}),o.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[o.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",r.createdDate,""]}),o.jsxs("table",{className:`w-full ${t} text-[10px] border-collapse`,children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[15%]"}),o.jsx("col",{className:"w-[25%]"}),o.jsx("col",{className:"w-[35%]"}),o.jsx("col",{className:"w-[25%]"})]}),o.jsx("thead",{children:o.jsxs("tr",{className:i,children:[o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:r.trainingDate}),o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:r.trainingLeader})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:r.councilDate}),o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:r.councilLeader})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:r.patrolDate}),o.jsx("td",{className:`${s} bg-gray-100`}),o.jsx("td",{className:`${s} bg-gray-100`})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${s} bg-gray-100`}),o.jsx("td",{className:`${s} bg-gray-100`}),o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:r.author})]})]})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:o.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[35mm]"}),c.map(m=>o.jsx("col",{},m.date)),o.jsx("col",{className:"w-[10mm]"})]}),o.jsxs("thead",{children:[o.jsxs("tr",{className:"h-[8mm]",children:[o.jsx("th",{className:`${s} ${i} font-normal`,children:""}),o.jsx("th",{className:`${s} ${i}`,colSpan:c.length,children:o.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[o.jsx("span",{children:""}),o.jsx("span",{children:""}),o.jsx("span",{children:""})]})}),o.jsx("th",{className:`${s} ${i} font-normal`,rowSpan:4,children:""})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),o.jsxs("th",{className:`${s} font-normal text-center`,colSpan:c.length,children:[r.month,""]})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),c.map(m=>o.jsx("th",{className:`${s} font-normal text-center ${m.colorClass} ${m.bgClass}`,children:m.date},m.date))]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:" "}),c.map(m=>o.jsx("th",{className:`${s} font-normal text-center ${m.colorClass} ${m.bgClass}`,children:m.dayOfWeek},m.date))]})]}),o.jsxs("tbody",{children:[r.processRows.map(m=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${s} px-1 align-middle leading-none`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:m.category}),o.jsx("span",{className:"font-bold text-[9px] truncate",children:m.name})]})}),c.map(p=>{const v=m.bars.some(x=>p.date>=x.startDay&&p.date<=x.endDay);return o.jsx("td",{className:`${s} p-0 relative ${p.bgClass}`,children:v&&o.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"})},p.date)}),o.jsx("td",{className:`${s}`})]},m.id)),Array.from({length:Math.max(0,12-r.processRows.length)}).map((m,p)=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${s}`}),c.map(v=>o.jsx("td",{className:`${s} ${v.bgClass}`},v.date)),o.jsx("td",{className:`${s}`})]},`fill-${p}`))]}),o.jsxs("tfoot",{children:[o.jsxs("tr",{className:"h-[12mm]",children:[o.jsx("td",{className:`${s} ${i} text-center font-normal`,children:""}),h.map((m,p)=>o.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:r.predictions[p]},p)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[18mm]",children:[o.jsxs("td",{className:`${s} ${i} text-center font-normal leading-tight`,children:["",o.jsx("br",{}),""]}),h.map((m,p)=>o.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:r.countermeasures[p]},p)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${s} ${i} text-center font-normal leading-tight`,children:""}),h.map((m,p)=>o.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:r.inspectionItems[p]},p)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${s} ${i} text-center font-normal`,children:""}),c.map(m=>o.jsx("td",{className:`${s} p-0 text-center text-[8px]`,children:r.safetyDuty[m.date]},m.date)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${s} ${i} text-center font-normal`,children:""}),o.jsx("td",{colSpan:c.length+1,className:`${s} p-1 text-[10px]`,children:r.lastMonthReflection})]})]})]})})]})},n0=({isOpen:r,message:t,onConfirm:s,onCancel:i})=>r?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,gw=({title:r,items:t,onUpdate:s,onDeleteRequest:i})=>{const[c,h]=re.useState(""),m=()=>{c.trim()&&(s([...t,c.trim()]),h(""))};return o.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg bg-white shadow-sm break-inside-avoid",children:[o.jsxs("h3",{className:"font-bold mb-3 text-lg text-gray-800 border-b pb-2 flex justify-between items-center",children:[r,o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[t.length,""]})]}),o.jsxs("ul",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[t.map((p,v)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:p}),o.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),i(v,p)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},v)),t.length===0&&o.jsx("li",{className:"text-gray-400 text-sm italic text-center py-2",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm bg-white text-black outline-none",placeholder:"...",value:c,onChange:p=>h(p.target.value),onKeyDown:p=>p.key==="Enter"&&m()}),o.jsxs("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 whitespace-nowrap shadow-sm",children:[o.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})]})},pw={projects:"",contractors:"",supervisors:"",locations:"",goals:"",processes:"",topics:"",cautions:"",subcontractors:""},yw={BASIC:["projects","contractors","supervisors","locations","subcontractors"],TRAINING:["goals","processes","topics","cautions"]},xw=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[i,c]=re.useState(1),[h,m]=re.useState(r||X_),[p,v]=re.useState(t||null),[x,T]=re.useState(ut),[C,I]=re.useState(!1),[G,te]=re.useState(!1),[ie,X]=re.useState("idle"),[ye,pe]=re.useState(!1),[de,be]=re.useState(null),[De,we]=re.useState(1),[R,w]=re.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[S,M]=re.useState("BASIC"),[j,V]=re.useState(!1),[E,me]=re.useState([]),[Oe,q]=re.useState(null);re.useEffect(()=>{(async()=>{try{const Ee=await Bu();T(Ee)}catch(Ee){console.error("",Ee)}})()},[]),re.useEffect(()=>{if(!G)return;const H=()=>{const Qe=window.innerWidth-40;let Nt=1;Qe<794&&(Nt=Qe/794),we(Nt)};return window.addEventListener("resize",H),H(),()=>window.removeEventListener("resize",H)},[G]);const Z=(H,Ee)=>{m(Ae=>({...Ae,[H]:Ee})),X("idle"),pe(!0)},he=()=>c(H=>Math.min(H+1,3)),Ie=()=>c(H=>Math.max(H-1,1)),Le=async H=>{if(H.target.files&&H.target.files[0]){const Ee=await fw(H.target.files[0]);Z("photoUrl",Ee)}},A=async()=>{X("saving");try{const H=await Ka(p,"SAFETY_TRAINING",h);v(H),X("saved"),pe(!1),setTimeout(()=>X("idle"),2e3)}catch(H){console.error(H),alert(""),X("idle")}},Q=(H,Ee)=>{const Ae={id:Date.now().toString(),company:H,name:"Signed",signatureDataUrl:Ee};m(Qe=>({...Qe,signatures:[...Qe.signatures,Ae]})),X("idle"),pe(!0)},le=async()=>{X("saving");try{const H=await Ka(p,"SAFETY_TRAINING",h);v(H),X("saved"),pe(!1),setTimeout(()=>X("idle"),2e3);const Ee=await ab(h.project);if(Ee.length===0){alert(`${h.project}

`);return}me(Ee),V(!0)}catch{alert(""),X("idle")}},O=H=>{q(H.data),V(!1),te(!0)},ne=()=>{const H=document.title;document.title=`_${h.project}_${h.month}`,window.print(),document.title=H},ve=()=>{ye?w({isOpen:!0,message:`
`,onConfirm:()=>{w(H=>({...H,isOpen:!1})),s()}}):s()},oe=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 1: "}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:h.project,onChange:H=>Z("project",H.target.value),children:x.projects.map(H=>o.jsx("option",{value:H,children:H},H))})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:h.month,onChange:H=>Z("month",parseInt(H.target.value)),children:Array.from({length:12},(H,Ee)=>Ee+1).map(H=>o.jsxs("option",{value:H,children:[H,""]},H))})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:h.contractor,onChange:H=>Z("contractor",H.target.value),children:x.contractors.map(H=>o.jsx("option",{value:H,children:H},H))})]})]}),$=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 2: "}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("input",{type:"date",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.date,onChange:H=>Z("date",H.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.location,onChange:H=>Z("location",H.target.value),children:x.locations.map(H=>o.jsx("option",{value:H,children:H},H))})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("input",{type:"time",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.startTime,onChange:H=>Z("startTime",H.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("input",{type:"time",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.endTime,onChange:H=>Z("endTime",H.target.value)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.instructor,onChange:H=>Z("instructor",H.target.value),children:x.supervisors.map(H=>o.jsx("option",{value:H,children:H},H))})]}),o.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg space-y-4",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-2",children:""}),o.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 space-y-2 py-1",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(1)"}),o.jsx("span",{children:" ()"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(2)"}),o.jsx("span",{children:" ()"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(3)"}),o.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm appearance-none",value:h.topic,onChange:H=>Z("topic",H.target.value),children:x.topics.map(H=>o.jsx("option",{value:H,children:H},H))})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(4)"}),o.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm appearance-none",value:h.caution,onChange:H=>Z("caution",H.target.value),children:x.cautions.map(H=>o.jsx("option",{value:H,children:H},H))})]})]}),o.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 mt-2 space-y-2 py-1",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(5)"}),o.jsx("span",{children:"web ()"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(6)"}),o.jsx("span",{children:" ()"})]})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsxs("label",{className:"label font-bold flex justify-between text-gray-700",children:[o.jsx("span",{children:" ()"}),o.jsx("span",{className:"text-xs font-normal bg-red-100 text-red-600 px-2 rounded border border-red-200",children:""})]}),o.jsx("input",{type:"file",accept:"image/*",className:"w-full mt-2 text-sm text-gray-500",onChange:Le}),h.photoUrl&&o.jsx("div",{className:"mt-3",children:o.jsx("img",{src:h.photoUrl,alt:"preview",className:"h-40 w-full object-contain border bg-gray-50 rounded"})})]})]}),[ue,je]=re.useState("");re.useEffect(()=>{x.subcontractors.length>0&&!ue&&je(x.subcontractors[0])},[x.subcontractors,ue]);const[qe,xt]=re.useState(0),_t=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 3: "}),o.jsxs("div",{className:"bg-white p-6 shadow rounded-lg border border-gray-200",children:[o.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:""}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-50 text-lg text-black outline-none appearance-none",value:ue,onChange:H=>je(H.target.value),children:x.subcontractors.map(H=>o.jsx("option",{value:H,children:H},H))})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2 text-center",children:" ()"}),o.jsx("div",{className:"w-full",children:o.jsx(dm,{onSave:H=>{Q(ue,H)},onClear:()=>{},lineWidth:6,keepOpenOnSave:!0},qe)})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("h3",{className:"font-bold text-gray-700 mb-2",children:[" (",h.signatures.length,")"]}),o.jsxs("div",{className:"bg-white border rounded divide-y max-h-60 overflow-y-auto",children:[h.signatures.length===0&&o.jsx("div",{className:"p-4 text-center text-gray-400",children:""}),h.signatures.map((H,Ee)=>o.jsxs("div",{className:"p-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o.jsx("span",{className:"w-6 h-6 shrink-0 rounded-full bg-gray-200 text-xs flex items-center justify-center text-gray-700",children:Ee+1}),o.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-bold text-gray-700 truncate flex-1",children:H.company}),o.jsx("div",{className:"h-10 border border-gray-200 bg-gray-50 rounded cursor-pointer hover:border-blue-400 transition-colors flex items-center justify-center px-2 shrink-0",onClick:()=>be(H.signatureDataUrl),title:"",children:o.jsx("img",{src:H.signatureDataUrl,alt:"sig",className:"h-full object-contain"})})]})]}),o.jsx("button",{onClick:()=>{w({isOpen:!0,message:`${Ee+1}`,onConfirm:()=>{m(Ae=>({...Ae,signatures:Ae.signatures.filter(Qe=>Qe.id!==H.id)})),w(Ae=>({...Ae,isOpen:!1})),pe(!0)}})},className:"ml-3 text-red-400 hover:text-red-600 p-2 shrink-0",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},H.id))]})]})]}),Et=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),o.jsxs("div",{className:"flex gap-4 mb-6",children:[o.jsxs("button",{onClick:()=>M("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${S==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),o.jsxs("button",{onClick:()=>M("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${S==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-clipboard-check mr-2"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:yw[S].map(H=>{const Ee=H,Ae=pw[H]||H;return o.jsx(gw,{title:Ae,items:x[Ee],onUpdate:async Qe=>{const Nt={...x,[Ee]:Qe};T(Nt),await ta(Nt)},onDeleteRequest:(Qe,Nt)=>{w(H==="projects"?{isOpen:!0,message:`${Nt}



`,onConfirm:async()=>{await qu(Nt);const Dn=[...x[H]];Dn.splice(Qe,1);const In={...x,[H]:Dn};T(In),await ta(In),w(Bt=>({...Bt,isOpen:!1}))}}:{isOpen:!0,message:`${Nt}`,onConfirm:async()=>{const Dn=[...x[H]];Dn.splice(Qe,1);const In={...x,[H]:Dn};T(In),await ta(In),w(Bt=>({...Bt,isOpen:!1}))}})}},H)})})]}),bn=()=>o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>te(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500",children:""}),o.jsxs("button",{onClick:ne,className:"px-6 py-2 bg-green-600 rounded font-bold hover:bg-green-500 shadow-md flex items-center",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${De})`,transformOrigin:"top center"},children:o.jsx(e0,{data:h})}),Oe&&o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${De*.7})`,transformOrigin:"top center"},children:o.jsx(Eu,{data:Oe})})]})]}),ae=()=>j?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",h.project,""]}),o.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:E.map(H=>{const Ee=H.data;return o.jsxs("button",{onClick:()=>O(H),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-blue-800",children:[Ee.month," "]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(H.lastModified).toLocaleString("ja-JP")]})]}),o.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},H.id)})}),o.jsx("button",{onClick:()=>V(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null;return C?o.jsxs(o.Fragment,{children:[" ",Et()," ",o.jsx(n0,{isOpen:R.isOpen,message:R.message,onConfirm:R.onConfirm,onCancel:()=>w(H=>({...H,isOpen:!1}))})," "]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:ve,className:"text-white hover:text-gray-300",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-helmet-safety mr-2"}),""]})]}),o.jsxs("button",{onClick:()=>I(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),o.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[o.jsx("span",{className:i>=1?"text-blue-600":"",children:"STEP 1"}),o.jsx("span",{className:i>=2?"text-blue-600":"",children:"STEP 2"}),o.jsx("span",{className:i>=3?"text-blue-600":"",children:"STEP 3"})]}),o.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:o.jsx("div",{className:"bg-blue-600 h-full transition-all duration-300",style:{width:`${i*33.3}%`}})})]}),o.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg min-h-[60vh] max-w-3xl",children:[i===1&&oe(),i===2&&$(),i===3&&_t()]}),o.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:Ie,disabled:i===1,className:`px-4 py-3 rounded-lg font-bold ${i===1?"text-gray-300":"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,children:""}),o.jsxs("button",{onClick:A,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center transition-colors",children:[o.jsx("i",{className:`fa-solid ${ie==="saved"?"fa-check":"fa-save"} mr-2`}),ie==="saved"?"":""]})]}),i<3?o.jsxs("button",{onClick:he,className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-bold shadow hover:bg-blue-700 flex items-center",children:[" ",o.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):o.jsxs("button",{onClick:le,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),de&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>be(null),children:[o.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:o.jsx("img",{src:de,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),o.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),G&&bn(),ae(),o.jsx(n0,{isOpen:R.isOpen,message:R.message,onConfirm:R.onConfirm,onCancel:()=>w(H=>({...H,isOpen:!1}))}),o.jsxs("div",{className:"hidden print:block",children:[o.jsx(e0,{data:h}),Oe&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),o.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:o.jsx(Eu,{data:Oe})})]})]})]})},s0=({data:r})=>{var x,T,C,I,G,te,ie,X,ye,pe,de,be,De,we,R,w,S,M,j,V,E,me,Oe,q;const t="border border-black",s="bg-green-100 text-center font-bold py-1",i=Z=>{const he=new Date(Z);return`${he.getFullYear()}/${he.getMonth()+1}/${he.getDate()}`},c=Math.max(10,r.subcontractorAttendees.length),h=Array.from({length:c-r.subcontractorAttendees.length}),m=Z=>{const he=Z.length;return he>45?"text-lg":he>35?"text-xl":he>25?"text-2xl":he>15?"text-3xl":"text-4xl"},p=Z=>Z?Z===""?"":Z===""?"":Z:"",v=Z=>{const he=p(Z);if(!he)return"";const Ie=he.length;return Ie>10?"text-xs tracking-tighter":Ie>8?"text-sm":""};return o.jsxs("div",{className:"font-serif text-black leading-tight",children:[o.jsxs("div",{className:"print-page relative p-[25mm] flex flex-col justify-between items-center text-center",children:[o.jsxs("div",{className:"mt-16 text-3xl font-normal tracking-widest",children:["",r.count,""]}),o.jsx("div",{className:"mt-20 px-4 w-full flex items-center justify-center min-h-[4rem]",children:o.jsx("h1",{className:`${m(r.project)} font-normal mb-4 leading-normal whitespace-nowrap`,children:r.project})}),o.jsx("div",{className:"my-auto",children:o.jsx("h2",{className:"text-5xl font-normal tracking-[0.2em] leading-loose",children:"      "})}),o.jsxs("div",{className:"mb-24 w-full",children:[o.jsxs("div",{className:"text-2xl mb-16",children:[" ",i(r.date)]}),o.jsx("div",{className:"flex items-center justify-center gap-3",children:o.jsxs("span",{className:"font-bold text-2xl italic flex items-center",style:{fontFamily:"sans-serif"},children:[o.jsx("span",{className:"bg-red-600 text-white px-2 py-0.5 mr-2 skew-x-[-12deg] inline-block",children:"K"}),r.contractor]})})]})]}),o.jsxs("div",{className:"print-page p-[30mm] flex flex-col items-center",children:[o.jsx("div",{className:"mt-20 mb-24 border-b-2 border-black px-12 pb-2",children:o.jsx("h2",{className:"text-4xl font-normal tracking-[0.2em] ml-2",children:""})}),o.jsxs("div",{className:"w-full max-w-lg space-y-12 text-2xl",children:[o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"1"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"2"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"3"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"4"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"5"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"6"}),o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"print-page p-[20mm]",children:[o.jsxs("div",{className:"flex justify-between items-end mb-4 px-2",children:[o.jsxs("div",{className:"text-xl font-bold",children:[" ",r.count," "]}),o.jsx("h3",{className:"text-2xl font-bold text-center flex-1",children:""}),o.jsx("div",{className:"w-16"})," "]}),o.jsx("table",{className:`w-full border-collapse mb-6 ${t}`,children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{className:`${t} p-2 w-32 text-center`,children:"   "}),o.jsx("td",{className:`${t} p-2`,children:" "})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${t} p-2 text-center`,children:"   "}),o.jsx("td",{className:`${t} p-2`,children:i(r.date)})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${t} p-2 text-center`,children:""}),o.jsx("td",{className:`${t} p-2`,children:r.location})]})]})}),o.jsx("div",{className:"mb-6",children:o.jsxs("table",{className:`w-full border-collapse ${t}`,children:[o.jsxs("thead",{children:[o.jsx("tr",{children:o.jsx("th",{className:`${t} ${s}`,colSpan:4,children:""})}),o.jsxs("tr",{children:[o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""})]})]}),o.jsxs("tbody",{children:[o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${v((x=r.gcAttendees[0])==null?void 0:x.role)}`,children:p((T=r.gcAttendees[0])==null?void 0:T.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(C=r.gcAttendees[0])==null?void 0:C.name}),o.jsx("td",{className:`${t} px-2 align-middle ${v((I=r.gcAttendees[1])==null?void 0:I.role)}`,children:p((G=r.gcAttendees[1])==null?void 0:G.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(te=r.gcAttendees[1])==null?void 0:te.name})]}),o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${v((ie=r.gcAttendees[2])==null?void 0:ie.role)}`,children:p((X=r.gcAttendees[2])==null?void 0:X.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(ye=r.gcAttendees[2])==null?void 0:ye.name}),o.jsx("td",{className:`${t} px-2 align-middle ${v((pe=r.gcAttendees[3])==null?void 0:pe.role)}`,children:p((de=r.gcAttendees[3])==null?void 0:de.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(be=r.gcAttendees[3])==null?void 0:be.name})]}),o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${v((De=r.gcAttendees[4])==null?void 0:De.role)}`,children:p((we=r.gcAttendees[4])==null?void 0:we.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(R=r.gcAttendees[4])==null?void 0:R.name}),o.jsx("td",{className:`${t} px-2 align-middle ${v((w=r.gcAttendees[5])==null?void 0:w.role)}`,children:p((S=r.gcAttendees[5])==null?void 0:S.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(M=r.gcAttendees[5])==null?void 0:M.name})]}),o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${v((j=r.gcAttendees[6])==null?void 0:j.role)}`,children:p((V=r.gcAttendees[6])==null?void 0:V.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(E=r.gcAttendees[6])==null?void 0:E.name}),o.jsx("td",{className:`${t} px-2 align-middle ${v((me=r.gcAttendees[7])==null?void 0:me.role)}`,children:p((Oe=r.gcAttendees[7])==null?void 0:Oe.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(q=r.gcAttendees[7])==null?void 0:q.name})]})]})]})}),o.jsx("div",{children:o.jsxs("table",{className:`w-full border-collapse ${t}`,children:[o.jsxs("thead",{children:[o.jsx("tr",{children:o.jsx("th",{className:`${t} ${s}`,colSpan:3,children:"              "})}),o.jsxs("tr",{children:[o.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:"     "}),o.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""})]})]}),o.jsxs("tbody",{children:[r.subcontractorAttendees.map(Z=>o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle`,children:Z.company}),o.jsx("td",{className:`${t} px-2 align-middle`,children:Z.role}),o.jsx("td",{className:`${t} px-2 align-middle text-center`,children:Z.signatureDataUrl?o.jsx("img",{src:Z.signatureDataUrl,alt:Z.name,className:"h-10 mx-auto object-contain"}):Z.name})]},Z.id)),h.map((Z,he)=>o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t}`}),o.jsx("td",{className:`${t}`}),o.jsx("td",{className:`${t}`})]},`blank-${he}`))]})]})})]})]})},a0=({isOpen:r,message:t,onConfirm:s,onCancel:i})=>r?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,vw=({title:r,items:t,onUpdate:s,onDeleteRequest:i})=>{const[c,h]=re.useState(""),m=()=>{c.trim()&&(s([...t,c.trim()]),h(""))};return o.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg bg-white shadow-sm break-inside-avoid",children:[o.jsxs("h3",{className:"font-bold mb-3 text-lg text-gray-800 border-b pb-2 flex justify-between items-center",children:[r,o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[t.length,""]})]}),o.jsxs("ul",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[t.map((p,v)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:p}),o.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),i(v,p)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},v)),t.length===0&&o.jsx("li",{className:"text-gray-400 text-sm italic text-center py-2",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm bg-white text-black focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"...",value:c,onChange:p=>h(p.target.value),onKeyDown:p=>p.key==="Enter"&&m()}),o.jsxs("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 whitespace-nowrap shadow-sm transition-colors",children:[o.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})]})},bw={projects:"",contractors:"",supervisors:"",locations:"",goals:"",processes:"",topics:"",cautions:"",subcontractors:""},_w={BASIC:["projects","contractors","supervisors","locations","subcontractors"],TRAINING:["goals","processes","topics","cautions"]},Ew=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[i,c]=re.useState(1),[h,m]=re.useState(r||Z_),[p,v]=re.useState(t||null),[x,T]=re.useState(ut),[C,I]=re.useState(!1),[G,te]=re.useState(!1),[ie,X]=re.useState("idle"),[ye,pe]=re.useState(1),[de,be]=re.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[De,we]=re.useState(!1),[R,w]=re.useState(null),[S,M]=re.useState(""),[j,V]=re.useState(""),[E,me]=re.useState(0),[Oe,q]=re.useState("BASIC"),[Z,he]=re.useState(!1),[Ie,Le]=re.useState([]),[A,Q]=re.useState(null);re.useEffect(()=>{(async()=>{try{const H=await Bu();T(H),H.subcontractors.length>0&&M(H.subcontractors[0])}catch(H){console.error("",H)}})()},[]),re.useEffect(()=>{x.subcontractors.length>0&&!x.subcontractors.includes(S)&&S!==""&&M(x.subcontractors[0])},[x.subcontractors,S]),re.useEffect(()=>{if(!G)return;const ae=()=>{const Ae=window.innerWidth-40;pe(Ae<794?Ae/794:1)};return window.addEventListener("resize",ae),ae(),()=>window.removeEventListener("resize",ae)},[G]);const le=(ae,H)=>{m(Ee=>({...Ee,[ae]:H})),X("idle"),we(!0)},O=(ae,H,Ee)=>{const Ae=[...h.gcAttendees];Ae[ae]||(Ae[ae]={role:"",name:""}),Ae[ae][H]=Ee,le("gcAttendees",Ae)},ne=ae=>{const H={id:Date.now().toString(),company:S,role:j,name:"Signed",signatureDataUrl:ae};m(Ee=>({...Ee,subcontractorAttendees:[...Ee.subcontractorAttendees,H]})),me(Ee=>Ee+1),X("idle"),we(!0)},ve=async()=>{X("saving");try{const ae=await Ka(p,"DISASTER_COUNCIL",h);v(ae),X("saved"),we(!1),setTimeout(()=>X("idle"),2e3)}catch(ae){console.error(ae),alert(""),X("idle")}},oe=async()=>{X("saving");try{const ae=await Ka(p,"DISASTER_COUNCIL",h);v(ae),X("saved"),we(!1),setTimeout(()=>X("idle"),2e3);const H=await ab(h.project);if(H.length===0){alert(`${h.project}

`);return}Le(H),he(!0)}catch{alert(""),X("idle")}},$=ae=>{Q(ae.data),he(!1),te(!0)},ue=()=>{const H=new Date(h.date).getMonth()+1,Ee=document.title;document.title=`_${h.project}_${H}`,window.print(),document.title=Ee},je=()=>{De?be({isOpen:!0,message:`
`,onConfirm:()=>{be(ae=>({...ae,isOpen:!1})),s()}}):s()},qe=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),o.jsxs("div",{className:"flex gap-4 mb-6",children:[o.jsxs("button",{onClick:()=>q("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${Oe==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),o.jsxs("button",{onClick:()=>q("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${Oe==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-clipboard-check mr-2"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:_w[Oe].map(ae=>{const H=bw[ae]||ae;return o.jsx(vw,{title:H,items:x[ae],onUpdate:async Ee=>{const Ae={...x,[ae]:Ee};T(Ae),await ta(Ae)},onDeleteRequest:(Ee,Ae)=>{const Qe=ae==="projects"?`${Ae}



`:`${Ae}`;be({isOpen:!0,message:Qe,onConfirm:async()=>{ae==="projects"&&await qu(Ae);const Nt=[...x[ae]];Nt.splice(Ee,1);const Dn={...x,[ae]:Nt};T(Dn),await ta(Dn),be(In=>({...In,isOpen:!1}))}})}},ae)})})]}),xt=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 1: "}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-gray-600",children:""}),o.jsx("select",{className:"w-24 p-2 border border-gray-300 rounded text-center text-lg bg-white",value:h.count,onChange:ae=>le("count",parseInt(ae.target.value)||0),children:Array.from({length:100},(ae,H)=>H+1).map(ae=>o.jsx("option",{value:ae,children:ae},ae))}),o.jsx("span",{className:"text-gray-600",children:""})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white",value:h.project,onChange:ae=>le("project",ae.target.value),children:x.projects.map(ae=>o.jsx("option",{value:ae,children:ae},ae))})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("input",{type:"date",className:"w-full p-3 border border-gray-300 rounded-lg bg-white",value:h.date,onChange:ae=>le("date",ae.target.value)})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white",value:h.contractor,onChange:ae=>le("contractor",ae.target.value),children:x.contractors.map(ae=>o.jsx("option",{value:ae,children:ae},ae))})]})]}),_t=()=>o.jsxs("div",{className:"space-y-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 2: "}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-3",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded bg-white",value:h.location,onChange:ae=>le("location",ae.target.value),children:x.locations.map(ae=>o.jsx("option",{value:ae,children:ae},ae))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500",children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"time",className:"p-2 border rounded",value:h.startTime,onChange:ae=>le("startTime",ae.target.value)}),o.jsx("span",{children:""}),o.jsx("input",{type:"time",className:"p-2 border rounded",value:h.endTime,onChange:ae=>le("endTime",ae.target.value)})]})]})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-3 border-b pb-1",children:""}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.gcAttendees.map((ae,H)=>o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{type:"text",placeholder:"",className:"w-1/3 p-2 border border-gray-300 rounded text-sm bg-gray-50",value:ae.role,onChange:Ee=>O(H,"role",Ee.target.value)}),o.jsxs("select",{className:"flex-1 p-2 border border-gray-300 rounded text-sm",value:ae.name,onChange:Ee=>O(H,"name",Ee.target.value),children:[o.jsx("option",{value:"",children:"()"}),x.supervisors.map(Ee=>o.jsx("option",{value:Ee,children:Ee},Ee))]})]},H))})]}),o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-3 border-b pb-1",children:""}),o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded",value:S,onChange:ae=>M(ae.target.value),children:x.subcontractors.map(ae=>o.jsx("option",{value:ae,children:ae},ae))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded",value:j,onChange:ae=>V(ae.target.value)})]})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 text-center",children:" ()"}),o.jsx(dm,{onSave:ne,onClear:()=>{},lineWidth:6},E)]})]}),o.jsx("div",{className:"divide-y border rounded max-h-48 overflow-y-auto",children:h.subcontractorAttendees.map((ae,H)=>o.jsxs("div",{className:"p-2 flex justify-between items-center bg-white",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-bold",children:ae.company}),o.jsx("div",{className:"text-xs text-gray-500",children:ae.role})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 cursor-pointer hover:opacity-80 transition-opacity border border-transparent hover:border-blue-300 rounded px-1",onClick:()=>w(ae.signatureDataUrl),title:"",children:o.jsx("img",{src:ae.signatureDataUrl,alt:"sig",className:"h-full object-contain"})}),o.jsx("button",{onClick:()=>{const Ee=h.subcontractorAttendees.filter(Ae=>Ae.id!==ae.id);le("subcontractorAttendees",Ee)},className:"text-red-400 hover:text-red-600",children:o.jsx("i",{className:"fa-solid fa-trash"})})]})]},ae.id))})]})]}),Et=()=>o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>te(!1),className:"px-4 py-2 bg-gray-600 rounded",children:""}),o.jsxs("button",{onClick:ue,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${ye})`,transformOrigin:"top center"},children:o.jsx(s0,{data:h})}),A&&o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${ye*.7})`,transformOrigin:"top center"},children:o.jsx(Eu,{data:A})})]})]}),bn=()=>Z?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",h.project,""]}),o.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:Ie.map(ae=>{const H=ae.data;return o.jsxs("button",{onClick:()=>$(ae),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-blue-800",children:[H.month," "]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(ae.lastModified).toLocaleString("ja-JP")]})]}),o.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},ae.id)})}),o.jsx("button",{onClick:()=>he(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null;return C?o.jsxs(o.Fragment,{children:[" ",qe()," ",o.jsx(a0,{isOpen:de.isOpen,message:de.message,onConfirm:de.onConfirm,onCancel:()=>be(ae=>({...ae,isOpen:!1}))})," "]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:je,className:"text-white hover:text-gray-300",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-users-rectangle mr-2"}),""]})]}),o.jsxs("button",{onClick:()=>I(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),o.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[o.jsx("span",{className:i>=1?"text-green-600":"",children:"STEP 1"}),o.jsx("span",{className:i>=2?"text-green-600":"",children:"STEP 2"})]}),o.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:o.jsx("div",{className:"bg-green-600 h-full transition-all duration-300",style:{width:`${i*50}%`}})})]}),o.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg min-h-[60vh] max-w-3xl",children:[i===1&&xt(),i===2&&_t()]}),o.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-md z-20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>c(ae=>Math.max(1,ae-1)),disabled:i===1,className:`px-4 py-3 rounded-lg font-bold ${i===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),o.jsxs("button",{onClick:ve,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center",children:[o.jsx("i",{className:`fa-solid ${ie==="saved"?"fa-check":"fa-save"} mr-2`}),ie==="saved"?"":""]})]}),i===1?o.jsxs("button",{onClick:()=>c(2),className:"px-8 py-3 bg-green-600 text-white rounded-lg font-bold shadow hover:bg-green-700 flex items-center",children:[" ",o.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):o.jsxs("button",{onClick:oe,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),R&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>w(null),children:[o.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:o.jsx("img",{src:R,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),o.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),G&&Et(),bn(),o.jsx(a0,{isOpen:de.isOpen,message:de.message,onConfirm:de.onConfirm,onCancel:()=>be({...de,isOpen:!1})}),o.jsxs("div",{className:"hidden print:block",children:[o.jsx(s0,{data:h}),A&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),o.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:o.jsx(Eu,{data:A})})]})]})]})},r0=({isOpen:r,message:t,onConfirm:s,onCancel:i})=>r?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,Nw=({title:r,items:t,onUpdate:s,onDeleteRequest:i})=>{const[c,h]=re.useState(""),m=()=>{c.trim()&&(s([...t,c.trim()]),h(""))};return o.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg bg-white shadow-sm break-inside-avoid",children:[o.jsxs("h3",{className:"font-bold mb-3 text-lg text-gray-800 border-b pb-2 flex justify-between items-center",children:[r,o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[t.length,""]})]}),o.jsx("ul",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:t.map((p,v)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:p}),o.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),i(v,p)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},v))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm outline-none",placeholder:"...",value:c,onChange:p=>h(p.target.value),onKeyDown:p=>p.key==="Enter"&&m()}),o.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700 whitespace-nowrap",children:o.jsx("i",{className:"fa-solid fa-plus"})})]})]})},Tw={projects:"",supervisors:"",locations:""},ww={BASIC:["projects","contractors","supervisors","locations","subcontractors"],TRAINING:["goals","processes","topics","cautions"]},jw=["","","","","","",""],Sw=r=>{const t=r.getFullYear(),s=r.getMonth()+1,i=r.getDate();if(s===1&&i===1||s===2&&i===11||s===2&&i===23||s===4&&i===29||s===5&&i===3||s===5&&i===4||s===5&&i===5||s===8&&i===11||s===11&&i===3||s===11&&i===23)return!0;const c=(p,v,x)=>{const T=new Date(p,v-1,1).getDay();return 1+(T===1?0:(8-T)%7)+(x-1)*7};if(s===1&&i===c(t,1,2)||s===7&&i===c(t,7,3)||s===9&&i===c(t,9,3)||s===10&&i===c(t,10,2))return!0;const h=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),m=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&i===h||s===9&&i===m},Aw=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[i,c]=re.useState(r||J_),[h,m]=re.useState(t||null),[p,v]=re.useState(ut),[x,T]=re.useState(!1),[C,I]=re.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[G,te]=re.useState(!1),[ie,X]=re.useState(null),[ye,pe]=re.useState(null),[de,be]=re.useState("idle"),[De,we]=re.useState(1),[R,w]=re.useState(!1),[S,M]=re.useState("BASIC");re.useEffect(()=>{(async()=>{try{const $=await Bu();v($)}catch($){console.error("",$)}})()},[]),re.useEffect(()=>{const oe=()=>{let _t=(window.innerWidth-40)/1122.6599999999999;_t>1.2&&(_t=1.2),we(_t)};return window.addEventListener("resize",oe),oe(),()=>window.removeEventListener("resize",oe)},[]);const j=re.useMemo(()=>{const oe=new Date(i.year,i.month-1,1),$=lb(oe),ue=[];for(let je=1;je<=$;je++){const qe=new Date(i.year,i.month-1,je),xt=Ii(qe)===0,_t=Ii(qe)===6,Et=Sw(qe);let bn="",ae="";xt||Et?(bn="text-red-600",ae="bg-red-50"):_t&&(bn="text-blue-600",ae="bg-blue-50"),ue.push({date:je,dayOfWeek:jw[Ii(qe)],colorClass:bn,bgClass:ae})}return ue},[i.year,i.month]),V=re.useMemo(()=>{const oe=j.length,$=Math.floor(oe/5),ue=oe%5;return Array.from({length:5}).map((je,qe)=>$+(qe<ue?1:0))},[j.length]),E=oe=>{c($=>({...$,...oe})),be("idle"),w(!0)},me=async()=>{be("saving");try{const oe=await Ka(h,"SAFETY_PLAN",i);m(oe),be("saved"),w(!1),setTimeout(()=>be("idle"),2e3)}catch(oe){console.error(oe),alert(""),be("idle")}},Oe=async()=>{be("saving");try{const oe=await Ka(h,"SAFETY_PLAN",i);m(oe),be("saved"),w(!1),setTimeout(()=>be("idle"),2e3),setTimeout(()=>window.print(),100)}catch{alert(""),be("idle")}},q=()=>{R?I({isOpen:!0,message:`
`,onConfirm:()=>{I(oe=>({...oe,isOpen:!1})),s()}}):s()},Z=(oe,$)=>{if(ie===null)X(oe),pe($);else if(ie!==oe)X(oe),pe($);else{if(ye!==null){const ue=Math.min(ye,$),je=Math.max(ye,$),qe=i.processRows.map(xt=>{if(xt.id===oe){const _t=xt.bars.filter(Et=>Et.endDay<ue||Et.startDay>je);return{...xt,bars:[..._t,{startDay:ue,endDay:je}]}}return xt});E({processRows:qe})}X(null),pe(null)}},he=(oe,$)=>{const ue=i.processRows.find(je=>je.id===oe);return ue?ue.bars.some(je=>$>=je.startDay&&$<=je.endDay):!1},Ie=(oe,$)=>ie!==oe||ye===null?!1:$===ye,Le="border-2 border-black",A="border border-black",Q="bg-cyan-100",le="w-full h-full bg-transparent outline-none text-center font-serif",O="w-full h-full bg-transparent outline-none text-center appearance-none font-serif text-center-last",ne=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>T(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),o.jsxs("div",{className:"flex gap-4 mb-6",children:[o.jsxs("button",{onClick:()=>M("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${S==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),o.jsxs("button",{onClick:()=>M("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${S==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-clipboard-check mr-2"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:ww[S].map(oe=>{const $=Tw[oe]||oe;return o.jsx(Nw,{title:$,items:p[oe],onUpdate:async ue=>{const je={...p,[oe]:ue};v(je),await ta(je)},onDeleteRequest:(ue,je)=>{const qe=oe==="projects"?`${je}



`:`${je}`;I({isOpen:!0,message:qe,onConfirm:async()=>{oe==="projects"&&await qu(je);const xt=[...p[oe]];xt.splice(ue,1);const _t={...p,[oe]:xt};v(_t),await ta(_t),I(Et=>({...Et,isOpen:!1}))}})}},oe)})})]}),ve=(oe=!1)=>o.jsxs("div",{className:"p-[10mm] w-full h-full flex flex-col font-serif",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[o.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[o.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsx("select",{className:"w-12 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:i.year-2018,onChange:$=>E({year:2018+parseInt($.target.value||"0")}),children:Array.from({length:30},($,ue)=>ue+1).map($=>o.jsx("option",{value:$,children:$},$))}),o.jsx("span",{className:"text-xl mr-4",children:""}),o.jsx("select",{className:"w-10 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:i.month,onChange:$=>E({month:parseInt($.target.value||"0")}),children:Array.from({length:12},($,ue)=>ue+1).map($=>o.jsx("option",{value:$,children:$},$))}),o.jsx("span",{className:"text-xl mr-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),o.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),o.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[300px] max-w-[500px]",value:i.project,onChange:$=>E({project:$.target.value}),children:p.projects.map($=>o.jsx("option",{value:$,children:$},$))})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),o.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[200px]",value:i.location,onChange:$=>E({location:$.target.value}),children:p.locations.map($=>o.jsx("option",{value:$,children:$},$))})]})]})]}),o.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[o.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",o.jsx("input",{type:"date",className:"bg-transparent text-[10px] w-24 text-right font-serif",value:i.createdDate,onChange:$=>E({createdDate:$.target.value})}),""]}),o.jsxs("table",{className:`w-full ${Le} text-[10px] border-collapse`,children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[15%]"}),o.jsx("col",{className:"w-[25%]"}),o.jsx("col",{className:"w-[35%]"}),o.jsx("col",{className:"w-[25%]"})]}),o.jsx("thead",{children:o.jsxs("tr",{className:Q,children:[o.jsx("th",{className:`${A} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${A} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${A} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${A} py-0.5 font-normal`,children:""})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{className:`${A} text-center`,children:""}),o.jsx("td",{className:`${A}`,children:o.jsx("input",{type:"date",className:le,value:i.trainingDate,onChange:$=>E({trainingDate:$.target.value})})}),o.jsx("td",{className:`${A} text-center`,children:""}),o.jsx("td",{className:`${A}`,children:o.jsx("select",{className:O,value:i.trainingLeader,onChange:$=>E({trainingLeader:$.target.value}),children:p.supervisors.map($=>o.jsx("option",{value:$,children:$},$))})})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${A} text-center`,children:""}),o.jsx("td",{className:`${A}`,children:o.jsx("input",{type:"date",className:le,value:i.councilDate,onChange:$=>E({councilDate:$.target.value})})}),o.jsx("td",{className:`${A} text-center`,children:""}),o.jsx("td",{className:`${A}`,children:o.jsx("select",{className:O,value:i.councilLeader,onChange:$=>E({councilLeader:$.target.value}),children:p.supervisors.map($=>o.jsx("option",{value:$,children:$},$))})})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${A} text-center`,children:""}),o.jsx("td",{className:`${A}`,children:o.jsx("input",{type:"date",className:le,value:i.patrolDate,onChange:$=>E({patrolDate:$.target.value})})}),o.jsx("td",{className:`${A} bg-gray-100`}),o.jsx("td",{className:`${A} bg-gray-100`})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${A} bg-gray-100`}),o.jsx("td",{className:`${A} bg-gray-100`}),o.jsx("td",{className:`${A} text-center`,children:""}),o.jsx("td",{className:`${A}`,children:o.jsx("select",{className:O,value:i.author,onChange:$=>E({author:$.target.value}),children:p.supervisors.map($=>o.jsx("option",{value:$,children:$},$))})})]})]})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:o.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[35mm]"}),j.map($=>o.jsx("col",{},$.date)),o.jsx("col",{className:"w-[10mm]"})]}),o.jsxs("thead",{children:[o.jsxs("tr",{className:"h-[8mm]",children:[o.jsx("th",{className:`${A} ${Q} font-normal`,children:""}),o.jsx("th",{className:`${A} ${Q}`,colSpan:j.length,children:o.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[o.jsx("span",{children:""}),o.jsx("span",{children:""}),o.jsx("span",{children:""})]})}),o.jsx("th",{className:`${A} ${Q} font-normal`,rowSpan:4,children:""})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${A} bg-gray-50 font-normal`,children:""}),o.jsxs("th",{className:`${A} font-normal text-center`,colSpan:j.length,children:[i.month,""]})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${A} bg-gray-50 font-normal`,children:""}),j.map($=>o.jsx("th",{className:`${A} font-normal text-center ${$.colorClass} ${$.bgClass}`,children:$.date},$.date))]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${A} bg-gray-50 font-normal`,children:" "}),j.map($=>o.jsx("th",{className:`${A} font-normal text-center ${$.colorClass} ${$.bgClass}`,children:$.dayOfWeek},$.date))]})]}),o.jsxs("tbody",{children:[i.processRows.map($=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${A} px-1 align-middle leading-none`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:$.category}),o.jsx("span",{className:"font-bold text-[9px] truncate",children:$.name})]})}),j.map(ue=>{const je=he($.id,ue.date),qe=Ie($.id,ue.date);return o.jsxs("td",{className:`${A} p-0 relative cursor-pointer hover:bg-yellow-50 ${ue.bgClass}`,onClick:()=>!oe&&Z($.id,ue.date),children:[je&&o.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"}),qe&&o.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-300 opacity-50"})]},ue.date)}),o.jsx("td",{className:`${A}`})]},$.id)),Array.from({length:Math.max(0,12-i.processRows.length)}).map(($,ue)=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${A}`}),j.map(je=>o.jsx("td",{className:`${A} ${je.bgClass}`},je.date)),o.jsx("td",{className:`${A}`})]},`fill-${ue}`))]}),o.jsxs("tfoot",{children:[o.jsxs("tr",{className:"h-[12mm]",children:[o.jsx("td",{className:`${A} ${Q} text-center font-normal`,children:""}),V.map(($,ue)=>o.jsx("td",{colSpan:$,className:`${A} align-top p-0`,children:o.jsxs("select",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1 appearance-none",value:i.predictions[ue]||"",onChange:je=>{const qe=[...i.predictions];qe[ue]=je.target.value,E({predictions:qe})},children:[o.jsx("option",{value:"",children:"-"}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})},ue)),o.jsx("td",{className:`${A}`})]}),o.jsxs("tr",{className:"h-[18mm]",children:[o.jsxs("td",{className:`${A} ${Q} text-center font-normal leading-tight`,children:["",o.jsx("br",{}),""]}),V.map(($,ue)=>o.jsx("td",{colSpan:$,className:`${A} align-top p-0`,children:o.jsx("textarea",{className:"w-full h-full bg-transparent text-[9px] outline-none resize-none p-1 leading-tight",value:i.countermeasures[ue]||"",onChange:je=>{const qe=[...i.countermeasures];qe[ue]=je.target.value,E({countermeasures:qe})}})},ue)),o.jsx("td",{className:`${A}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${A} ${Q} text-center font-normal leading-tight`,children:""}),V.map(($,ue)=>o.jsx("td",{colSpan:$,className:`${A} align-top p-0`,children:o.jsx("input",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1",value:i.inspectionItems[ue]||"",onChange:je=>{const qe=[...i.inspectionItems];qe[ue]=je.target.value,E({inspectionItems:qe})}})},ue)),o.jsx("td",{className:`${A}`})]}),o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${A} ${Q} text-center font-normal`,children:""}),j.map($=>o.jsx("td",{className:`${A} p-0 text-center`,children:o.jsx("input",{className:"w-full h-full text-[8px] text-center bg-transparent outline-none p-0",value:i.safetyDuty[$.date]||"",onChange:ue=>E({safetyDuty:{...i.safetyDuty,[$.date]:ue.target.value}})})},$.date)),o.jsx("td",{className:`${A}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${A} ${Q} text-center font-normal`,children:""}),o.jsx("td",{colSpan:j.length+1,className:`${A} p-0`,children:o.jsx("textarea",{className:"w-full h-full p-1 text-[10px] bg-transparent outline-none resize-none leading-tight",value:i.lastMonthReflection,onChange:$=>E({lastMonthReflection:$.target.value})})})]})]})]})})]});return x?o.jsxs(o.Fragment,{children:[ne(),o.jsx(r0,{isOpen:C.isOpen,message:C.message,onConfirm:C.onConfirm,onCancel:()=>I(oe=>({...oe,isOpen:!1}))})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen bg-gray-50 flex flex-col",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-30 flex justify-between items-center shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:q,className:"text-white hover:text-gray-300 transition-colors",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-clipboard-list mr-2"}),""]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:me,className:"px-4 py-2 rounded font-bold border border-blue-400 text-white bg-blue-600 hover:bg-blue-500 flex items-center text-sm transition-colors shadow-sm",children:[o.jsx("i",{className:`fa-solid ${de==="saved"?"fa-check":"fa-save"} mr-2`}),de==="saved"?"":de==="saving"?"...":""]}),o.jsxs("button",{onClick:()=>te(!0),className:"px-4 py-2 bg-cyan-600 text-white rounded font-bold hover:bg-cyan-500 flex items-center text-sm transition-colors shadow-sm",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]}),o.jsxs("button",{onClick:()=>T(!0),className:"text-xs bg-slate-700 px-3 py-2 rounded hover:bg-slate-600 transition-colors ml-2 shadow-sm",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]})]}),o.jsx("main",{className:"flex-1 overflow-auto p-4 bg-gray-100 flex justify-center",children:o.jsx("div",{className:"bg-white shadow-xl origin-top",style:{width:"297mm",minHeight:"210mm"},children:ve(!1)})})]}),G&&o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-95 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"}),""]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>te(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500 transition-colors",children:""}),o.jsxs("button",{onClick:Oe,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center hover:bg-green-500 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-8 flex justify-center items-start bg-gray-800",children:o.jsx("div",{style:{width:"297mm",transform:`scale(${De})`,transformOrigin:"top center",marginBottom:`${(De-1)*100}%`},children:o.jsx("div",{className:"bg-white shadow-2xl",children:ve(!0)})})})]}),o.jsxs("div",{className:"hidden print:block",children:[o.jsx("style",{children:"@media print { @page { size: landscape; } }"}),o.jsx("div",{className:"print-page-landscape",children:ve(!0)})]}),o.jsx(r0,{isOpen:C.isOpen,message:C.message,onConfirm:C.onConfirm,onCancel:()=>I({...C,isOpen:!1})})]})},i0=({data:r})=>{if(!r)return null;const t=r.qualifications||{},s="border-b border-r border-black",i=({checked:h,label:m})=>o.jsxs("div",{className:"flex items-center text-[11px] leading-tight mb-0.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 border border-black flex items-center justify-center mr-1.5 text-[10px] shrink-0 font-sans",children:h?"":""}),o.jsx("span",{className:"whitespace-nowrap",children:m})]}),c=["","","","","","",""];return o.jsx("div",{className:"font-serif text-black leading-tight bg-white relative",children:o.jsxs("div",{className:"print-page p-[12mm] flex flex-col box-border",style:{height:"297mm",width:"210mm"},children:[o.jsx("h1",{className:"text-3xl font-bold text-center mb-6 tracking-[0.5em] shrink-0",children:""}),o.jsxs("div",{className:"w-full border-2 border-black flex-1 flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[64px]",children:[o.jsxs("div",{className:`w-24 ${s} bg-gray-50 flex flex-col justify-center items-center p-1`,children:[o.jsx("span",{className:"text-[10px] mb-1",children:""}),o.jsx("span",{className:"font-bold text-base",children:""})]}),o.jsxs("div",{className:`w-64 ${s} p-1 flex flex-col justify-center`,children:[o.jsx("div",{className:"text-xs text-center w-full mb-0.5",children:r.furigana}),o.jsx("div",{className:"text-xl text-center font-bold",children:r.name})]}),o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold text-sm text-center`,children:""}),o.jsx("div",{className:`flex-1 ${s} flex items-center justify-center p-1`,children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsxs("div",{className:"flex flex-col text-[10px] leading-none mr-1 gap-1",children:[o.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${r.birthEra==="Showa"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""}),o.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${r.birthEra==="Heisei"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""})]}),o.jsx("span",{className:"text-lg font-bold",children:r.birthYear}),o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"text-lg font-bold",children:r.birthMonth}),o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"text-lg font-bold",children:r.birthDay}),o.jsx("span",{className:"text-xs",children:""})]})}),o.jsxs("div",{className:"w-24 border-b border-black flex flex-col items-center justify-center p-1",children:[o.jsxs("div",{className:"flex gap-3 mb-1 text-sm",children:[o.jsx("span",{className:r.gender==="Male"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""}),o.jsx("span",{children:""}),o.jsx("span",{className:r.gender==="Female"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""})]}),o.jsxs("div",{className:"flex items-end gap-0.5",children:[o.jsx("span",{className:"text-lg font-bold",children:r.age}),o.jsx("span",{className:"text-[10px]",children:""})]})]})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsx("div",{className:`flex-1 ${s} px-3 flex items-center`,children:o.jsx("span",{className:"text-base font-bold",children:r.company})}),o.jsxs("div",{className:`w-32 ${s} flex items-center justify-center p-1 text-[11px]`,children:["( ",o.jsx("span",{className:"w-6 text-center text-base font-bold",children:r.subcontractorRank})," ) "]}),o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsxs("div",{className:"w-40 border-b border-black flex items-center justify-center p-1",children:[o.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:r.experienceYears}),o.jsx("span",{className:"text-xs mr-2",children:""}),o.jsx("span",{className:"text-lg font-bold w-5 text-right mr-1",children:r.experienceMonths}),o.jsx("span",{className:"text-xs",children:""})]})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsx("div",{className:"flex-1 border-b border-black px-2 flex items-center text-sm",children:o.jsxs("div",{className:"flex flex-nowrap items-center w-full",children:[c.map((h,m)=>o.jsx(c0.Fragment,{children:o.jsxs("div",{className:"flex items-center whitespace-nowrap",children:[o.jsx("span",{className:`px-1 ${r.jobType===h?"border border-black rounded-full font-bold":""}`,children:h}),m<c.length-1&&o.jsx("span",{className:"text-gray-400 mx-1",children:""})]})},h)),o.jsxs("div",{className:"flex items-center whitespace-nowrap ml-1",children:[o.jsx("span",{children:""}),o.jsx("span",{className:"inline-block min-w-[100px] text-center px-1 italic",children:r.jobType===""?r.jobTypeOther:""}),o.jsx("span",{children:""})]})]})})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsx("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:r.address}),o.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[o.jsx("span",{children:""}),o.jsx("span",{children:""})]}),o.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:r.phone})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm text-center leading-none`,children:""}),o.jsx("div",{className:`w-12 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-[10px]`,children:""}),o.jsx("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:r.emergencyContactName}),o.jsx("div",{className:`w-12 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-[10px]`,children:""}),o.jsx("div",{className:`w-20 ${s} flex items-center justify-center text-sm`,children:r.emergencyContactRelation}),o.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[o.jsx("span",{children:""}),o.jsx("span",{children:""})]}),o.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:r.emergencyContactPhone})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsxs("div",{className:`flex-1 ${s} p-1 flex items-center justify-center gap-2`,children:[o.jsx("span",{className:"text-lg font-bold w-6 text-center",children:r.bloodType}),o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"ml-4 text-xs font-bold",children:"  "}),o.jsx("span",{className:"w-10 text-center border-b border-black text-lg font-bold",children:r.bloodTypeRh==="Plus"?"+":r.bloodTypeRh==="Minus"?"-":""}),o.jsx("span",{className:"text-xs font-bold",children:" "})]}),o.jsx("div",{className:`w-32 ${s} bg-gray-50 flex items-center justify-center font-bold text-[10px] p-1 text-center leading-tight`,children:""}),o.jsxs("div",{className:"w-64 border-b border-black p-1 flex items-center justify-center",children:[o.jsx("span",{className:"text-xs mr-1",children:""}),o.jsx("span",{className:"text-lg font-bold w-8 text-right mr-1",children:r.healthCheckYear}),o.jsx("span",{className:"text-xs mr-2",children:""}),o.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:r.healthCheckMonth}),o.jsx("span",{className:"text-xs mr-2",children:""}),o.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:r.healthCheckDay}),o.jsx("span",{className:"text-xs",children:""})]})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[o.jsx("div",{className:`w-1/2 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsxs("div",{className:"w-1/2 border-b border-black flex items-center justify-center gap-10 p-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:r.kentaikyo==="Joined"&&o.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),o.jsx("span",{className:`text-sm ${r.kentaikyo==="Joined"?"font-bold":""}`,children:""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:r.kentaikyo==="NotJoined"&&o.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),o.jsx("span",{className:`text-sm ${r.kentaikyo==="NotJoined"?"font-bold":""}`,children:""})]})]})]}),o.jsxs("div",{className:"p-4 flex-1 flex flex-col border-b border-black",children:[o.jsx("div",{className:"font-bold text-xs mb-3",children:""}),o.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2",children:[o.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx(i,{checked:t.vehicle_leveling,label:""}),o.jsx(i,{checked:t.vehicle_demolition,label:""}),o.jsx(i,{checked:t.mobile_crane,label:""}),o.jsx(i,{checked:t.slinging,label:""}),o.jsx(i,{checked:t.gas_welding,label:""}),o.jsx(i,{checked:t.earth_retaining,label:""}),o.jsx(i,{checked:t.excavation,label:""}),o.jsx(i,{checked:t.scaffolding,label:""}),o.jsx(i,{checked:t.formwork,label:""}),o.jsx(i,{checked:t.oxygen_deficiency,label:""}),o.jsx(i,{checked:t.rough_terrain,label:""})]})]}),o.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2 pl-2",children:[o.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx(i,{checked:t.arc_welding,label:""}),o.jsx(i,{checked:t.grinding_wheel,label:""}),o.jsx(i,{checked:t.low_voltage,label:""}),o.jsx(i,{checked:t.roller,label:""}),o.jsx(i,{checked:t.asbestos,label:""})]})]}),o.jsxs("div",{className:"flex flex-col pl-2",children:[o.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),o.jsx(i,{checked:t.foreman,label:""}),o.jsxs("div",{className:"mt-auto pt-2",children:[o.jsx("div",{className:"text-[9px] font-bold mb-1 text-gray-600",children:""}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText1}),o.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText2}),o.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText3})]})]})]})]})]}),o.jsxs("div",{className:"p-3 bg-gray-50 flex-1 flex flex-col justify-between shrink-0 h-[180px]",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-sm mb-2 flex items-center",children:[o.jsx("span",{className:"w-1 h-4 bg-black mr-2"}),""]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-4 pl-2 text-[9px] leading-tight mb-2",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]})]}),o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]})]})]})]}),o.jsxs("div",{className:"flex justify-between items-end px-1 mt-auto",children:[o.jsxs("div",{className:"w-[50%] space-y-2",children:[o.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[o.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5",children:""}),o.jsx("span",{className:"flex-1 text-[10px] font-bold truncate px-1",children:r.project})]}),o.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[o.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5",children:""}),o.jsx("span",{className:"flex-1 text-sm font-bold text-center",children:r.director}),o.jsx("span",{className:"text-[9px] ml-1 mb-0.5",children:""})]})]}),o.jsxs("div",{className:"w-[45%] flex flex-col items-end",children:[o.jsxs("div",{className:"flex justify-center items-baseline mb-1 text-[10px] font-bold w-full",children:[o.jsx("span",{className:"mr-1",children:""}),o.jsx("span",{className:"text-base w-6 text-center border-b border-black mx-0.5",children:r.pledgeDateYear}),o.jsx("span",{children:""}),o.jsx("span",{className:"text-base w-5 text-center border-b border-black mx-0.5",children:r.pledgeDateMonth}),o.jsx("span",{children:""}),o.jsx("span",{className:"text-base w-5 text-center border-b border-black mx-0.5",children:r.pledgeDateDay}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex w-full items-end border-2 border-black bg-white h-[50px] relative",children:[o.jsx("span",{className:"absolute left-1 top-1 text-[9px] font-bold text-gray-400",children:""}),o.jsx("div",{className:"flex-1 h-full flex items-center justify-center p-1",children:r.signatureDataUrl?o.jsx("img",{src:r.signatureDataUrl,alt:"Signature",className:"max-h-full max-w-full object-contain"}):o.jsx("span",{className:"text-gray-200 text-[9px]",children:"()"})})]})]})]})]})]})]})})},Cw=r=>{if(!r)return Yf;const t={...Yf.qualifications,...r.qualifications||{}};return{...Yf,...r,qualifications:t}},l0=({isOpen:r,message:t,onConfirm:s,onCancel:i})=>r?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,Rw=({title:r,items:t,onUpdate:s,onDeleteRequest:i})=>{const[c,h]=re.useState(""),m=()=>{c.trim()&&(s([...t,c.trim()]),h(""))};return o.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg bg-white shadow-sm break-inside-avoid",children:[o.jsxs("h3",{className:"font-bold mb-3 text-lg text-gray-800 border-b pb-2 flex justify-between items-center",children:[r,o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[t.length,""]})]}),o.jsxs("ul",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[t.map((p,v)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:p}),o.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),i(v,p)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},v)),t.length===0&&o.jsx("li",{className:"text-gray-400 text-sm italic text-center py-2",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm bg-white text-black focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"...",value:c,onChange:p=>h(p.target.value),onKeyDown:p=>p.key==="Enter"&&m()}),o.jsxs("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 whitespace-nowrap shadow-sm transition-colors",children:[o.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})]})},Dw={projects:"",supervisors:"",subcontractors:""},Iw={BASIC:["projects","contractors","supervisors","locations","subcontractors"],TRAINING:["goals","processes","topics","cautions"]},Mw=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[i,c]=re.useState(1),[h,m]=re.useState(Cw(r)),[p,v]=re.useState(t||null),[x,T]=re.useState(ut),[C,I]=re.useState(!1),[G,te]=re.useState(!1),[ie,X]=re.useState("idle"),[ye,pe]=re.useState(1),[de,be]=re.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[De,we]=re.useState(!1),[R,w]=re.useState(0),[S,M]=re.useState(null),[j,V]=re.useState("BASIC");re.useEffect(()=>{(async()=>{try{const ne=await Bu();T(ne)}catch(ne){console.error("",ne)}})()},[]),re.useEffect(()=>{if(!G)return;const O=()=>{const oe=window.innerWidth-40;pe(oe<794?oe/794:1)};return window.addEventListener("resize",O),O(),()=>window.removeEventListener("resize",O)},[G]),re.useEffect(()=>{const ne=(()=>{if(h.birthYear===""||h.birthMonth===""||h.birthDay==="")return h.age;let ve=0;if(h.birthEra==="Showa"?ve=1925+h.birthYear:h.birthEra==="Heisei"&&(ve=1988+h.birthYear),ve===0)return h.age;const oe=new Date,$=new Date(ve,h.birthMonth-1,h.birthDay);let ue=oe.getFullYear()-$.getFullYear();const je=oe.getMonth()-$.getMonth();return(je<0||je===0&&oe.getDate()<$.getDate())&&ue--,Math.max(0,ue)})();ne!==h.age&&h.birthYear!==""&&h.birthMonth!==""&&h.birthDay!==""&&m(ve=>({...ve,age:ne}))},[h.birthEra,h.birthYear,h.birthMonth,h.birthDay]);const E=O=>{m(ne=>({...ne,...O})),X("idle"),we(!0)},me=(O,ne)=>{m(ve=>({...ve,qualifications:{...ve.qualifications,[O]:ne}})),X("idle"),we(!0)},Oe=async()=>{X("saving");try{const O=await Ka(p,"NEWCOMER_SURVEY",h);v(O),X("saved"),we(!1),setTimeout(()=>X("idle"),2e3)}catch(O){console.error(O),alert(""),X("idle")}},q=async()=>{X("saving");try{const O=await Ka(p,"NEWCOMER_SURVEY",h);v(O),X("saved"),we(!1),setTimeout(()=>X("idle"),2e3);const ne=document.title,ve=`_${h.company||""}_${h.name||""}`;document.title=ve,window.print(),document.title=ne}catch{alert(""),X("idle")}},Z=()=>{De?be({isOpen:!0,message:`
`,onConfirm:()=>{be(O=>({...O,isOpen:!1})),s()}}):s()},he=O=>{E({signatureDataUrl:O}),w(ne=>ne+1)},Ie=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 1: "}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded border border-purple-100 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"col-span-1 md:col-span-2 text-sm text-purple-700 font-bold mb-1",children:[o.jsx("i",{className:"fa-solid fa-circle-info mr-1"}),""]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-purple-300 rounded bg-white font-bold",value:h.project,onChange:O=>E({project:O.target.value}),children:x.projects.map(O=>o.jsx("option",{value:O,children:O},O))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-purple-300 rounded bg-white",value:h.director,onChange:O=>E({director:O.target.value}),children:x.supervisors.map(O=>o.jsx("option",{value:O,children:O},O))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded mb-2",placeholder:"",value:h.name,onChange:O=>E({name:O.target.value})}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:h.furigana,onChange:O=>E({furigana:O.target.value})})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[o.jsxs("select",{className:"p-2 border rounded",value:h.birthEra,onChange:O=>E({birthEra:O.target.value}),children:[o.jsx("option",{value:"Showa",children:""}),o.jsx("option",{value:"Heisei",children:""})]}),o.jsx("input",{type:"number",className:"w-14 p-2 border rounded text-center",value:h.birthYear,onChange:O=>E({birthYear:O.target.value===""?"":parseInt(O.target.value)}),placeholder:""}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.birthMonth,onChange:O=>E({birthMonth:O.target.value===""?"":parseInt(O.target.value)}),placeholder:""}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.birthDay,onChange:O=>E({birthDay:O.target.value===""?"":parseInt(O.target.value)}),placeholder:""}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsxs("div",{className:"flex gap-2 border p-1 rounded bg-white",children:[o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:h.gender==="Male",onChange:()=>E({gender:"Male"})}),""]}),o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:h.gender==="Female",onChange:()=>E({gender:"Female"})}),""]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",className:"w-16 p-2 border rounded text-center bg-gray-100",readOnly:!0,value:h.age}),o.jsx("span",{children:""})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsx("select",{className:"w-full p-2 border rounded mb-2",value:h.company,onChange:O=>E({company:O.target.value}),children:x.subcontractors.map(O=>o.jsx("option",{value:O,children:O},O))}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{children:"("}),o.jsx("input",{type:"text",className:"w-10 border-b text-center",value:h.subcontractorRank,onChange:O=>E({subcontractorRank:O.target.value})}),o.jsx("span",{children:") "})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("input",{type:"number",className:"w-16 p-2 border rounded text-center",value:h.experienceYears,onChange:O=>E({experienceYears:parseInt(O.target.value)})}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-16 p-2 border rounded text-center",value:h.experienceMonths,onChange:O=>E({experienceMonths:parseInt(O.target.value)})}),o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"w-1/2 p-2 border rounded",value:h.jobType,onChange:O=>E({jobType:O.target.value}),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]}),h.jobType===""&&o.jsx("input",{type:"text",className:"flex-1 p-2 border rounded",placeholder:"",value:h.jobTypeOther,onChange:O=>E({jobTypeOther:O.target.value})})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded mb-2",placeholder:"",value:h.address,onChange:O=>E({address:O.target.value})}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:h.phone,onChange:O=>E({phone:O.target.value})})]}),o.jsxs("div",{className:"form-control bg-gray-50 p-3 rounded",children:[o.jsx("label",{className:"label font-bold text-gray-700 mb-2 block",children:""}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:h.emergencyContactName,onChange:O=>E({emergencyContactName:O.target.value})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),o.jsxs("select",{className:"w-full p-2 border rounded bg-white",value:h.emergencyContactRelation,onChange:O=>E({emergencyContactRelation:O.target.value}),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"090-0000-0000",value:h.emergencyContactPhone,onChange:O=>E({emergencyContactPhone:O.target.value})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"p-2 border rounded",value:h.bloodType,onChange:O=>E({bloodType:O.target.value}),children:[o.jsx("option",{value:"A",children:"A"}),o.jsx("option",{value:"B",children:"B"}),o.jsx("option",{value:"O",children:"O"}),o.jsx("option",{value:"AB",children:"AB"})]}),o.jsx("span",{className:"self-center",children:""}),o.jsx("span",{className:"self-center ml-2",children:"RH"}),o.jsxs("select",{className:"p-2 border rounded",value:h.bloodTypeRh,onChange:O=>E({bloodTypeRh:O.target.value}),children:[o.jsx("option",{value:"Plus",children:"+"}),o.jsx("option",{value:"Minus",children:"-"})]})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsxs("div",{className:"flex gap-1 items-center",children:[o.jsx("input",{type:"number",className:"w-14 p-2 border rounded text-center",value:h.healthCheckYear,onChange:O=>E({healthCheckYear:parseInt(O.target.value)})}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.healthCheckMonth,onChange:O=>E({healthCheckMonth:parseInt(O.target.value)})}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.healthCheckDay,onChange:O=>E({healthCheckDay:parseInt(O.target.value)})}),o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex gap-4 mt-1",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-2 border rounded shadow-sm",children:[o.jsx("input",{type:"radio",checked:h.kentaikyo==="Joined",onChange:()=>E({kentaikyo:"Joined"})}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-2 border rounded shadow-sm",children:[o.jsx("input",{type:"radio",checked:h.kentaikyo==="NotJoined",onChange:()=>E({kentaikyo:"NotJoined"})}),""]})]})]})]}),Le=()=>{const O=h.qualifications||{};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 2: "}),o.jsx("p",{className:"text-sm text-gray-500",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold border-b mb-3",children:""}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.vehicle_leveling,onChange:ne=>me("vehicle_leveling",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.vehicle_demolition,onChange:ne=>me("vehicle_demolition",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.mobile_crane,onChange:ne=>me("mobile_crane",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.slinging,onChange:ne=>me("slinging",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.gas_welding,onChange:ne=>me("gas_welding",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.earth_retaining,onChange:ne=>me("earth_retaining",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.excavation,onChange:ne=>me("excavation",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.scaffolding,onChange:ne=>me("scaffolding",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.formwork,onChange:ne=>me("formwork",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.oxygen_deficiency,onChange:ne=>me("oxygen_deficiency",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.rough_terrain,onChange:ne=>me("rough_terrain",ne.target.checked)}),""]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold border-b mb-3",children:""}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.arc_welding,onChange:ne=>me("arc_welding",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.grinding_wheel,onChange:ne=>me("grinding_wheel",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.low_voltage,onChange:ne=>me("low_voltage",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.roller,onChange:ne=>me("roller",ne.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:O.asbestos,onChange:ne=>me("asbestos",ne.target.checked)}),""]})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold border-b mb-3",children:""}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-4",children:[o.jsx("input",{type:"checkbox",checked:O.foreman,onChange:ne=>me("foreman",ne.target.checked)}),""]}),o.jsx("div",{className:"text-sm font-bold mb-2",children:""}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:O.otherText1,onChange:ne=>me("otherText1",ne.target.value)}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:O.otherText2,onChange:ne=>me("otherText2",ne.target.value)}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:O.otherText3,onChange:ne=>me("otherText3",ne.target.value)})]})]})]})]})]})},A=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 3: "}),o.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border leading-relaxed text-gray-800",children:[o.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:""}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-6",children:[o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""})]}),o.jsxs("div",{className:"bg-white p-4 rounded border text-center",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-bold mr-2",children:" ()"}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.pledgeDateYear,onChange:O=>E({pledgeDateYear:parseInt(O.target.value)})}),"",o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.pledgeDateMonth,onChange:O=>E({pledgeDateMonth:parseInt(O.target.value)})}),"",o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.pledgeDateDay,onChange:O=>E({pledgeDateDay:parseInt(O.target.value)})}),""]}),o.jsx("label",{className:"block font-bold text-gray-700 mb-2",children:""}),o.jsx("div",{className:"mx-auto w-full max-w-sm",children:o.jsx(dm,{onSave:he,onClear:()=>{E({signatureDataUrl:null})},lineWidth:6},R)}),h.signatureDataUrl&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-xs text-green-600 font-bold mb-1",children:""}),o.jsx("div",{className:"cursor-pointer hover:opacity-80 transition-opacity inline-block border border-transparent hover:border-blue-300 rounded p-1",onClick:()=>M(h.signatureDataUrl),title:"",children:o.jsx("img",{src:h.signatureDataUrl,alt:"Signature",className:"h-10 mx-auto border"})})]})]})]})]}),Q=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),o.jsxs("div",{className:"flex gap-4 mb-6",children:[o.jsxs("button",{onClick:()=>V("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${j==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),o.jsxs("button",{onClick:()=>V("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${j==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-clipboard-check mr-2"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:Iw[j].map(O=>{const ne=O,ve=Dw[O]||O;return o.jsx(Rw,{title:ve,items:x[ne],onUpdate:async oe=>{const $={...x,[ne]:oe};T($),await ta($)},onDeleteRequest:(oe,$)=>{const ue=O==="projects"?`${$}



`:`${$}`;be({isOpen:!0,message:ue,onConfirm:async()=>{O==="projects"&&await qu($);const je=[...x[O]];je.splice(oe,1);const qe={...x,[O]:je};T(qe),await ta(qe),be(xt=>({...xt,isOpen:!1}))}})}},O)})})]}),le=()=>o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>te(!1),className:"px-4 py-2 bg-gray-600 rounded",children:""}),o.jsxs("button",{onClick:q,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 flex justify-center",children:o.jsx("div",{style:{width:"794px",transform:`scale(${ye})`,transformOrigin:"top center",marginBottom:`${(ye-1)*100}%`},children:o.jsx(i0,{data:h})})})]});return C?o.jsxs(o.Fragment,{children:[" ",Q()," ",o.jsx(l0,{isOpen:de.isOpen,message:de.message,onConfirm:de.onConfirm,onCancel:()=>be(O=>({...O,isOpen:!1}))})," "]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:Z,className:"text-white hover:text-gray-300",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-person-circle-question mr-2"}),""]})]}),o.jsxs("button",{onClick:()=>I(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),o.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[o.jsx("span",{className:i>=1?"text-purple-600":"",children:""}),o.jsx("span",{className:i>=2?"text-purple-600":"",children:""}),o.jsx("span",{className:i>=3?"text-purple-600":"",children:""})]}),o.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:o.jsx("div",{className:"bg-purple-600 h-full transition-all duration-300",style:{width:`${i*33.3}%`}})})]}),o.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg min-h-[60vh] max-w-3xl",children:[i===1&&Ie(),i===2&&Le(),i===3&&A()]}),o.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-md z-20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>c(O=>Math.max(1,O-1)),disabled:i===1,className:`px-4 py-3 rounded-lg font-bold ${i===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),o.jsxs("button",{onClick:Oe,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center",children:[o.jsx("i",{className:`fa-solid ${ie==="saved"?"fa-check":"fa-save"} mr-2`}),ie==="saved"?"":""]})]}),i<3?o.jsxs("button",{onClick:()=>c(O=>O+1),className:"px-8 py-3 bg-purple-600 text-white rounded-lg font-bold shadow hover:bg-purple-700 flex items-center",children:[" ",o.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):o.jsxs("button",{onClick:()=>te(!0),className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),S&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>M(null),children:[o.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:o.jsx("img",{src:S,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),o.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),G&&le(),o.jsx(l0,{isOpen:de.isOpen,message:de.message,onConfirm:de.onConfirm,onCancel:()=>be({...de,isOpen:!1})}),o.jsx("div",{className:"hidden print:block",children:o.jsx(i0,{data:h})})]})},Vw=({isOpen:r,message:t,onConfirm:s,onCancel:i})=>r?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,Ow=()=>{const[r,t]=re.useState("HOME"),[s,i]=re.useState(!1),[c,h]=re.useState(null),[m,p]=re.useState([]),[v,x]=re.useState(null),[T,C]=re.useState(!1),[I,G]=re.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[te,ie]=re.useState(void 0),[X,ye]=re.useState(null);re.useEffect(()=>{s&&((async()=>{C(!0);try{const w=await jd();p(w)}catch(w){console.error("Failed to load drafts",w),alert("")}finally{C(!1)}})(),x(null))},[s]);const pe=R=>{h(R),i(!0)},de=()=>{c&&(ie(void 0),ye(null),t(c),i(!1))},be=R=>{ie(R.data),ye(R.id),t(R.type),i(!1)},De=R=>{G({isOpen:!0,message:"",onConfirm:async()=>{try{await hw(R);const w=await jd();p(w),v&&c&&w.filter(M=>M.type===c&&(M.data.project||"")===v).length===0&&x(null),G(S=>({...S,isOpen:!1}))}catch(w){console.error("Failed to delete draft",w),alert("")}}})};if(r==="SAFETY_TRAINING")return o.jsx(xw,{initialData:te,initialDraftId:X,onBackToMenu:()=>t("HOME")});if(r==="DISASTER_COUNCIL")return o.jsx(Ew,{initialData:te,initialDraftId:X,onBackToMenu:()=>t("HOME")});if(r==="SAFETY_PLAN")return o.jsx(Aw,{initialData:te,initialDraftId:X,onBackToMenu:()=>t("HOME")});if(r==="NEWCOMER_SURVEY")return o.jsx(Mw,{initialData:te,initialDraftId:X,onBackToMenu:()=>t("HOME")});const we=()=>{if(!s||!c)return null;const R=m.filter(S=>S.type===c),w={};return R.forEach(S=>{const M=S.data.project||"";w[M]||(w[M]=[]),w[M].push(S)}),o.jsx("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full overflow-hidden flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"bg-gray-800 text-white p-4 flex justify-between items-center shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[v&&o.jsx("button",{onClick:()=>x(null),className:"mr-1 text-gray-300 hover:text-white",children:o.jsx("i",{className:"fa-solid fa-arrow-left"})}),o.jsx("h3",{className:"font-bold text-lg",children:v?"":""})]}),o.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white",children:o.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:T?o.jsxs("div",{className:"flex justify-center items-center py-10",children:[o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-3 text-gray-500",children:"..."})]}):v?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded border text-sm text-gray-600 mb-4",children:[o.jsx("i",{className:"fa-solid fa-building mr-2"}),v]}),o.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-2 uppercase tracking-wide",children:""}),o.jsx("div",{className:"space-y-3",children:w[v].map(S=>o.jsxs("div",{className:"border rounded-lg p-3 hover:bg-blue-50 transition-colors flex justify-between items-center group bg-white shadow-sm",children:[o.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>be(S),children:[o.jsxs("div",{className:"font-bold text-blue-800 text-lg",children:[o.jsx("i",{className:"fa-regular fa-calendar-check mr-2"}),S.type==="SAFETY_TRAINING"?`${S.data.month}`:S.type==="DISASTER_COUNCIL"?`${S.data.count}`:S.type==="NEWCOMER_SURVEY"?S.data.name||"":`${S.data.month} `]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1 pl-7",children:[": ",new Date(S.lastModified).toLocaleString("ja-JP")]})]}),o.jsx("button",{onClick:M=>{M.stopPropagation(),De(S.id)},className:"ml-3 p-3 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-50 transition-colors",title:"",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},S.id))})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-8",children:o.jsxs("button",{onClick:de,className:"w-full py-4 bg-blue-600 text-white rounded-lg font-bold shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition-transform transform hover:scale-[1.01]",children:[o.jsx("i",{className:"fa-solid fa-file-circle-plus text-xl"}),""]})}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-3 uppercase tracking-wide",children:""}),Object.keys(w).length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 bg-gray-50 rounded-lg",children:""}):o.jsx("div",{className:"space-y-3",children:Object.entries(w).map(([S,M])=>o.jsxs("button",{onClick:()=>x(S),className:"w-full text-left border rounded-lg p-4 hover:bg-blue-50 transition-colors flex justify-between items-center group shadow-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-gray-800 text-sm mb-1",children:S}),o.jsxs("div",{className:"text-xs text-gray-500",children:[o.jsx("i",{className:"fa-regular fa-folder-open mr-1"}),M.length," "]})]}),o.jsx("i",{className:"fa-solid fa-chevron-right text-gray-300 group-hover:text-blue-400"})]},S))})]})]})})]})})};return o.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-gray-800",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-6 shadow-md text-center",children:[o.jsxs("h1",{className:"text-2xl font-bold tracking-wide",children:[o.jsx("i",{className:"fa-solid fa-building-shield mr-2"}),""]}),o.jsx("p",{className:"text-slate-400 text-sm mt-2",children:""})]}),o.jsxs("main",{className:"max-w-4xl mx-auto p-6 mt-8",children:[o.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-700 border-l-4 border-slate-800 pl-3",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("button",{onClick:()=>pe("SAFETY_TRAINING"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-blue-600 group",children:[o.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-helmet-safety text-4xl text-blue-600"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),o.jsxs("button",{onClick:()=>pe("DISASTER_COUNCIL"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-green-600 group",children:[o.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-green-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-users-rectangle text-4xl text-green-600"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),o.jsxs("button",{onClick:()=>pe("SAFETY_PLAN"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-orange-500 group",children:[o.jsx("div",{className:"w-20 h-20 bg-orange-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-orange-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-clipboard-list text-4xl text-orange-500"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),o.jsxs("button",{onClick:()=>pe("NEWCOMER_SURVEY"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-purple-600 group",children:[o.jsx("div",{className:"w-20 h-20 bg-purple-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-person-circle-question text-4xl text-purple-600"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]})]})]}),o.jsx("footer",{className:"mt-12 text-center text-gray-400 text-sm pb-8",children:" 2024 Safety Reporting App"}),we(),o.jsx(Vw,{isOpen:I.isOpen,message:I.message,onConfirm:I.onConfirm,onCancel:()=>G(R=>({...R,isOpen:!1}))})]})},ob=document.getElementById("root");if(!ob)throw new Error("Could not find root element to mount to");const kw=K_.createRoot(ob);kw.render(o.jsx(c0.StrictMode,{children:o.jsx(Ow,{})}));
