(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function w0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yd={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function d1(){if(Hy)return Jl;Hy=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(i,c,u){var m=null;if(u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),"key"in c){u={};for(var x in c)x!=="key"&&(u[x]=c[x])}else u=c;return c=u.ref,{$$typeof:r,type:i,key:m,ref:c!==void 0?c:null,props:u}}return Jl.Fragment=t,Jl.jsx=s,Jl.jsxs=s,Jl}var Gy;function f1(){return Gy||(Gy=1,Yd.exports=d1()),Yd.exports}var l=f1(),Qd={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function m1(){if(Fy)return Le;Fy=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.iterator;function z(C){return C===null||typeof C!="object"?null:(C=j&&C[j]||C["@@iterator"],typeof C=="function"?C:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,P={};function ge(C,Y,ue){this.props=C,this.context=Y,this.refs=P,this.updater=ue||L}ge.prototype.isReactComponent={},ge.prototype.setState=function(C,Y){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,Y,"setState")},ge.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function ce(){}ce.prototype=ge.prototype;function te(C,Y,ue){this.props=C,this.context=Y,this.refs=P,this.updater=ue||L}var he=te.prototype=new ce;he.constructor=te,Z(he,ge.prototype),he.isPureReactComponent=!0;var Se=Array.isArray;function Me(){}var D={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function M(C,Y,ue){var pe=ue.ref;return{$$typeof:r,type:C,key:Y,ref:pe!==void 0?pe:null,props:ue}}function V(C,Y){return M(C.type,Y,C.props)}function T(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function I(C){var Y={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ue){return Y[ue]})}var S=/\/+/g;function ve(C,Y){return typeof C=="object"&&C!==null&&C.key!=null?I(""+C.key):Y.toString(36)}function xe(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Me,Me):(C.status="pending",C.then(function(Y){C.status==="pending"&&(C.status="fulfilled",C.value=Y)},function(Y){C.status==="pending"&&(C.status="rejected",C.reason=Y)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function G(C,Y,ue,pe,oe){var Te=typeof C;(Te==="undefined"||Te==="boolean")&&(C=null);var ke=!1;if(C===null)ke=!0;else switch(Te){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(C.$$typeof){case r:case t:ke=!0;break;case v:return ke=C._init,G(ke(C._payload),Y,ue,pe,oe)}}if(ke)return oe=oe(C),ke=pe===""?"."+ve(C,0):pe,Se(oe)?(ue="",ke!=null&&(ue=ke.replace(S,"$&/")+"/"),G(oe,Y,ue,"",function(Tt){return Tt})):oe!=null&&(T(oe)&&(oe=V(oe,ue+(oe.key==null||C&&C.key===oe.key?"":(""+oe.key).replace(S,"$&/")+"/")+ke)),Y.push(oe)),1;ke=0;var tt=pe===""?".":pe+":";if(Se(C))for(var Ce=0;Ce<C.length;Ce++)pe=C[Ce],Te=tt+ve(pe,Ce),ke+=G(pe,Y,ue,Te,oe);else if(Ce=z(C),typeof Ce=="function")for(C=Ce.call(C),Ce=0;!(pe=C.next()).done;)pe=pe.value,Te=tt+ve(pe,Ce++),ke+=G(pe,Y,ue,Te,oe);else if(Te==="object"){if(typeof C.then=="function")return G(xe(C),Y,ue,pe,oe);throw Y=String(C),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ke}function $(C,Y,ue){if(C==null)return C;var pe=[],oe=0;return G(C,pe,"","",function(Te){return Y.call(ue,Te,oe++)}),pe}function de(C){if(C._status===-1){var Y=C._result;Y=Y(),Y.then(function(ue){(C._status===0||C._status===-1)&&(C._status=1,C._result=ue)},function(ue){(C._status===0||C._status===-1)&&(C._status=2,C._result=ue)}),C._status===-1&&(C._status=0,C._result=Y)}if(C._status===1)return C._result.default;throw C._result}var _e=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Ue={map:$,forEach:function(C,Y,ue){$(C,function(){Y.apply(this,arguments)},ue)},count:function(C){var Y=0;return $(C,function(){Y++}),Y},toArray:function(C){return $(C,function(Y){return Y})||[]},only:function(C){if(!T(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Le.Activity=N,Le.Children=Ue,Le.Component=ge,Le.Fragment=s,Le.Profiler=c,Le.PureComponent=te,Le.StrictMode=i,Le.Suspense=p,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Le.__COMPILER_RUNTIME={__proto__:null,c:function(C){return D.H.useMemoCache(C)}},Le.cache=function(C){return function(){return C.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(C,Y,ue){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var pe=Z({},C.props),oe=C.key;if(Y!=null)for(Te in Y.key!==void 0&&(oe=""+Y.key),Y)!A.call(Y,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&Y.ref===void 0||(pe[Te]=Y[Te]);var Te=arguments.length-2;if(Te===1)pe.children=ue;else if(1<Te){for(var ke=Array(Te),tt=0;tt<Te;tt++)ke[tt]=arguments[tt+2];pe.children=ke}return M(C.type,oe,pe)},Le.createContext=function(C){return C={$$typeof:m,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Le.createElement=function(C,Y,ue){var pe,oe={},Te=null;if(Y!=null)for(pe in Y.key!==void 0&&(Te=""+Y.key),Y)A.call(Y,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(oe[pe]=Y[pe]);var ke=arguments.length-2;if(ke===1)oe.children=ue;else if(1<ke){for(var tt=Array(ke),Ce=0;Ce<ke;Ce++)tt[Ce]=arguments[Ce+2];oe.children=tt}if(C&&C.defaultProps)for(pe in ke=C.defaultProps,ke)oe[pe]===void 0&&(oe[pe]=ke[pe]);return M(C,Te,oe)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(C){return{$$typeof:x,render:C}},Le.isValidElement=T,Le.lazy=function(C){return{$$typeof:v,_payload:{_status:-1,_result:C},_init:de}},Le.memo=function(C,Y){return{$$typeof:g,type:C,compare:Y===void 0?null:Y}},Le.startTransition=function(C){var Y=D.T,ue={};D.T=ue;try{var pe=C(),oe=D.S;oe!==null&&oe(ue,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Me,_e)}catch(Te){_e(Te)}finally{Y!==null&&ue.types!==null&&(Y.types=ue.types),D.T=Y}},Le.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Le.use=function(C){return D.H.use(C)},Le.useActionState=function(C,Y,ue){return D.H.useActionState(C,Y,ue)},Le.useCallback=function(C,Y){return D.H.useCallback(C,Y)},Le.useContext=function(C){return D.H.useContext(C)},Le.useDebugValue=function(){},Le.useDeferredValue=function(C,Y){return D.H.useDeferredValue(C,Y)},Le.useEffect=function(C,Y){return D.H.useEffect(C,Y)},Le.useEffectEvent=function(C){return D.H.useEffectEvent(C)},Le.useId=function(){return D.H.useId()},Le.useImperativeHandle=function(C,Y,ue){return D.H.useImperativeHandle(C,Y,ue)},Le.useInsertionEffect=function(C,Y){return D.H.useInsertionEffect(C,Y)},Le.useLayoutEffect=function(C,Y){return D.H.useLayoutEffect(C,Y)},Le.useMemo=function(C,Y){return D.H.useMemo(C,Y)},Le.useOptimistic=function(C,Y){return D.H.useOptimistic(C,Y)},Le.useReducer=function(C,Y,ue){return D.H.useReducer(C,Y,ue)},Le.useRef=function(C){return D.H.useRef(C)},Le.useState=function(C){return D.H.useState(C)},Le.useSyncExternalStore=function(C,Y,ue){return D.H.useSyncExternalStore(C,Y,ue)},Le.useTransition=function(){return D.H.useTransition()},Le.version="19.2.4",Le}var $y;function kf(){return $y||($y=1,Qd.exports=m1()),Qd.exports}var W=kf();const Dt=w0(W);var Kd={exports:{}},Wl={},Xd={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function g1(){return Yy||(Yy=1,(function(r){function t(G,$){var de=G.length;G.push($);e:for(;0<de;){var _e=de-1>>>1,Ue=G[_e];if(0<c(Ue,$))G[_e]=$,G[de]=Ue,de=_e;else break e}}function s(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var $=G[0],de=G.pop();if(de!==$){G[0]=de;e:for(var _e=0,Ue=G.length,C=Ue>>>1;_e<C;){var Y=2*(_e+1)-1,ue=G[Y],pe=Y+1,oe=G[pe];if(0>c(ue,de))pe<Ue&&0>c(oe,ue)?(G[_e]=oe,G[pe]=de,_e=pe):(G[_e]=ue,G[Y]=de,_e=Y);else if(pe<Ue&&0>c(oe,de))G[_e]=oe,G[pe]=de,_e=pe;else break e}}return $}function c(G,$){var de=G.sortIndex-$.sortIndex;return de!==0?de:G.id-$.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var m=Date,x=m.now();r.unstable_now=function(){return m.now()-x}}var p=[],g=[],v=1,N=null,j=3,z=!1,L=!1,Z=!1,P=!1,ge=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function he(G){for(var $=s(g);$!==null;){if($.callback===null)i(g);else if($.startTime<=G)i(g),$.sortIndex=$.expirationTime,t(p,$);else break;$=s(g)}}function Se(G){if(Z=!1,he(G),!L)if(s(p)!==null)L=!0,Me||(Me=!0,I());else{var $=s(g);$!==null&&xe(Se,$.startTime-G)}}var Me=!1,D=-1,A=5,M=-1;function V(){return P?!0:!(r.unstable_now()-M<A)}function T(){if(P=!1,Me){var G=r.unstable_now();M=G;var $=!0;try{e:{L=!1,Z&&(Z=!1,ce(D),D=-1),z=!0;var de=j;try{t:{for(he(G),N=s(p);N!==null&&!(N.expirationTime>G&&V());){var _e=N.callback;if(typeof _e=="function"){N.callback=null,j=N.priorityLevel;var Ue=_e(N.expirationTime<=G);if(G=r.unstable_now(),typeof Ue=="function"){N.callback=Ue,he(G),$=!0;break t}N===s(p)&&i(p),he(G)}else i(p);N=s(p)}if(N!==null)$=!0;else{var C=s(g);C!==null&&xe(Se,C.startTime-G),$=!1}}break e}finally{N=null,j=de,z=!1}$=void 0}}finally{$?I():Me=!1}}}var I;if(typeof te=="function")I=function(){te(T)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,ve=S.port2;S.port1.onmessage=T,I=function(){ve.postMessage(null)}}else I=function(){ge(T,0)};function xe(G,$){D=ge(function(){G(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return j},r.unstable_next=function(G){switch(j){case 1:case 2:case 3:var $=3;break;default:$=j}var de=j;j=$;try{return G()}finally{j=de}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(G,$){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var de=j;j=G;try{return $()}finally{j=de}},r.unstable_scheduleCallback=function(G,$,de){var _e=r.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?_e+de:_e):de=_e,G){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=de+Ue,G={id:v++,callback:$,priorityLevel:G,startTime:de,expirationTime:Ue,sortIndex:-1},de>_e?(G.sortIndex=de,t(g,G),s(p)===null&&G===s(g)&&(Z?(ce(D),D=-1):Z=!0,xe(Se,de-_e))):(G.sortIndex=Ue,t(p,G),L||z||(L=!0,Me||(Me=!0,I()))),G},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(G){var $=j;return function(){var de=j;j=$;try{return G.apply(this,arguments)}finally{j=de}}}})(Zd)),Zd}var Qy;function p1(){return Qy||(Qy=1,Xd.exports=g1()),Xd.exports}var Jd={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function y1(){if(Ky)return cn;Ky=1;var r=kf();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,g,v){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:N==null?null:""+N,children:p,containerInfo:g,implementation:v}}var m=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(p,g,null,v)},cn.flushSync=function(p){var g=m.T,v=i.p;try{if(m.T=null,i.p=2,p)return p()}finally{m.T=g,i.p=v,i.d.f()}},cn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},cn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},cn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,N=x(v,g.crossOrigin),j=typeof g.integrity=="string"?g.integrity:void 0,z=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:N,integrity:j,fetchPriority:z}):v==="script"&&i.d.X(p,{crossOrigin:N,integrity:j,fetchPriority:z,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},cn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=x(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},cn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,N=x(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:N,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},cn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=x(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},cn.requestFormReset=function(p){i.d.r(p)},cn.unstable_batchedUpdates=function(p,g){return p(g)},cn.useFormState=function(p,g,v){return m.H.useFormState(p,g,v)},cn.useFormStatus=function(){return m.H.useHostTransitionStatus()},cn.version="19.2.4",cn}var Xy;function x1(){if(Xy)return Jd.exports;Xy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Jd.exports=y1(),Jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function b1(){if(Zy)return Wl;Zy=1;var r=p1(),t=kf(),s=x1();function i(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function m(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function x(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(i(188))}function g(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(i(188));return n!==e?null:e}for(var a=e,o=n;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return p(d),e;if(f===o)return p(d),n;f=f.sibling}throw Error(i(188))}if(a.return!==o.return)a=d,o=f;else{for(var b=!1,E=d.child;E;){if(E===a){b=!0,a=d,o=f;break}if(E===o){b=!0,o=d,a=f;break}E=E.sibling}if(!b){for(E=f.child;E;){if(E===a){b=!0,a=f,o=d;break}if(E===o){b=!0,o=f,a=d;break}E=E.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==o)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:n}function v(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=v(e),n!==null)return n;e=e.sibling}return null}var N=Object.assign,j=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),te=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=T&&e[T]||e["@@iterator"],typeof e=="function"?e:null)}var S=Symbol.for("react.client.reference");function ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===S?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case ge:return"Profiler";case P:return"StrictMode";case Se:return"Suspense";case Me:return"SuspenseList";case M:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case te:return e.displayName||"Context";case ce:return(e._context.displayName||"Context")+".Consumer";case he:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return n=e.displayName||null,n!==null?n:ve(e.type)||"Memo";case A:n=e._payload,e=e._init;try{return ve(e(n))}catch{}}return null}var xe=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},_e=[],Ue=-1;function C(e){return{current:e}}function Y(e){0>Ue||(e.current=_e[Ue],_e[Ue]=null,Ue--)}function ue(e,n){Ue++,_e[Ue]=e.current,e.current=n}var pe=C(null),oe=C(null),Te=C(null),ke=C(null);function tt(e,n){switch(ue(Te,n),ue(oe,e),ue(pe,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?dy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=dy(n),e=fy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(pe),ue(pe,e)}function Ce(){Y(pe),Y(oe),Y(Te)}function Tt(e){e.memoizedState!==null&&ue(ke,e);var n=pe.current,a=fy(n,e.type);n!==a&&(ue(oe,e),ue(pe,a))}function Ee(e){oe.current===e&&(Y(pe),Y(oe)),ke.current===e&&(Y(ke),Ql._currentValue=de)}var J,Ae;function Ve(e){if(J===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);J=n&&n[1]||"",Ae=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+e+Ae}var R=!1;function ne(e,n){if(!e||R)return"";R=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var F=X}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(X){F=X}e.call(ie.prototype)}}else{try{throw Error()}catch(X){F=X}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&F&&typeof X.stack=="string")return[X.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),b=f[0],E=f[1];if(b&&E){var O=b.split(`
`),H=E.split(`
`);for(d=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;if(o===O.length||d===H.length)for(o=O.length-1,d=H.length-1;1<=o&&0<=d&&O[o]!==H[d];)d--;for(;1<=o&&0<=d;o--,d--)if(O[o]!==H[d]){if(o!==1||d!==1)do if(o--,d--,0>d||O[o]!==H[d]){var ee=`
`+O[o].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=o&&0<=d);break}}}finally{R=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ve(a):""}function He(e,n){switch(e.tag){case 26:case 27:case 5:return Ve(e.type);case 16:return Ve("Lazy");case 13:return e.child!==n&&n!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return ne(e.type,!1);case 11:return ne(e.type.render,!1);case 1:return ne(e.type,!0);case 31:return Ve("Activity");default:return""}}function se(e){try{var n="",a=null;do n+=He(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var me=Object.prototype.hasOwnProperty,Q=r.unstable_scheduleCallback,we=r.unstable_cancelCallback,it=r.unstable_shouldYield,fn=r.unstable_requestPaint,Jt=r.unstable_now,nr=r.unstable_getCurrentPriorityLevel,Zi=r.unstable_ImmediatePriority,Ji=r.unstable_UserBlockingPriority,ca=r.unstable_NormalPriority,Xu=r.unstable_LowPriority,Co=r.unstable_IdlePriority,Ro=r.log,Do=r.unstable_setDisableYieldValue,Zn=null,Wt=null;function zn(e){if(typeof Ro=="function"&&Do(e),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Zn,e)}catch{}}var St=Math.clz32?Math.clz32:Io,Mo=Math.log,qr=Math.LN2;function Io(e){return e>>>=0,e===0?32:31-(Mo(e)/qr|0)|0}var ds=256,sr=262144,Ot=4194304;function fs(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ms(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var d=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?d=fs(o):(b&=E,b!==0?d=fs(b):a||(a=E&~e,a!==0&&(d=fs(a))))):(E=o&~f,E!==0?d=fs(E):b!==0?d=fs(b):a||(a=o&~e,a!==0&&(d=fs(a)))),d===0?0:n!==0&&n!==d&&(n&f)===0&&(f=d&-d,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:d}function Jn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Zu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oo(){var e=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),e}function gs(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function ar(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ju(e,n,a,o,d,f){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,O=e.expirationTimes,H=e.hiddenUpdates;for(a=b&~a;0<a;){var ee=31-St(a),ie=1<<ee;E[ee]=0,O[ee]=-1;var F=H[ee];if(F!==null)for(H[ee]=null,ee=0;ee<F.length;ee++){var X=F[ee];X!==null&&(X.lane&=-536870913)}a&=~ie}o!==0&&rr(e,o,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~n))}function rr(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-St(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Wi(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-St(a),d=1<<o;d&n|e[o]&n&&(e[o]|=n),a&=~d}}function el(e,n){var a=n&-n;return a=(a&42)!==0?1:ir(a),(a&(e.suspendedLanes|n))!==0?0:a}function ir(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ps(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Vo(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:ky(e.type))}function Wn(e,n){var a=$.p;try{return $.p=e,n()}finally{$.p=a}}var es=Math.random().toString(36).slice(2),Vt="__reactFiber$"+es,Qt="__reactProps$"+es,ps="__reactContainer$"+es,Hr="__reactEvents$"+es,Wu="__reactListeners$"+es,ko="__reactHandles$"+es,zo="__reactResources$"+es,ys="__reactMarker$"+es;function Gr(e){delete e[Vt],delete e[Qt],delete e[Hr],delete e[Wu],delete e[ko]}function xs(e){var n=e[Vt];if(n)return n;for(var a=e.parentNode;a;){if(n=a[ps]||a[Vt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=vy(e);e!==null;){if(a=e[Vt])return a;e=vy(e)}return n}e=a,a=e.parentNode}return null}function Un(e){if(e=e[Vt]||e[ps]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Tn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(i(33))}function bs(e){var n=e[zo];return n||(n=e[zo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function kt(e){e[ys]=!0}var tl=new Set,nl={};function vs(e,n){_s(e,n),_s(e+"Capture",n)}function _s(e,n){for(nl[e]=n,e=0;e<n.length;e++)tl.add(n[e])}var sl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),al={},rl={};function Uo(e){return me.call(rl,e)?!0:me.call(al,e)?!1:sl.test(e)?rl[e]=!0:(al[e]=!0,!1)}function Fr(e,n,a){if(Uo(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Sn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function zt(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function Kt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ua(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function il(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(b){a=""+b,f.call(this,b)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ot(e){if(!e._valueTracker){var n=ua(e)?"checked":"value";e._valueTracker=il(e,n,""+e[n])}}function lr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=ua(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function Ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var or=/[\n"\\]/g;function pn(e){return e.replace(or,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function $r(e,n,a,o,d,f,b,E){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),n!=null?b==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Kt(n)):e.value!==""+Kt(n)&&(e.value=""+Kt(n)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),n!=null?ll(e,b,Kt(n)):a!=null?ll(e,b,Kt(a)):o!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Kt(E):e.removeAttribute("name")}function Lo(e,n,a,o,d,f,b,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){ot(e);return}a=a!=null?""+Kt(a):"",n=n!=null?""+Kt(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),ot(e)}function ll(e,n,a){n==="number"&&Ns(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ha(e,n,a,o){if(e=e.options,n){n={};for(var d=0;d<a.length;d++)n["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=n.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Kt(a),n=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function Po(e,n,a){if(n!=null&&(n=""+Kt(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Kt(a):""}function da(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(i(92));if(xe(o)){if(1<o.length)throw Error(i(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Kt(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),ot(e)}function yn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Bo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ol(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||Bo.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function cl(e,n,a){if(n!=null&&typeof n!="object")throw Error(i(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in n)o=n[d],n.hasOwnProperty(d)&&a[d]!==o&&ol(e,d,o)}else for(var f in n)n.hasOwnProperty(f)&&ol(e,f,n[f])}function Yr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qr(e){return fa.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ts(){}var ul=null;function Ln(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ma=null,Es=null;function cr(e){var n=Un(e);if(n&&(e=n.stateNode)){var a=e[Qt]||null;e:switch(e=n.stateNode,n.type){case"input":if($r(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var d=o[Qt]||null;if(!d)throw Error(i(90));$r(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&lr(o)}break e;case"textarea":Po(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&ha(e,!!a.multiple,n,!1)}}}var Kr=!1;function ga(e,n,a){if(Kr)return e(n,a);Kr=!0;try{var o=e(n);return o}finally{if(Kr=!1,(ma!==null||Es!==null)&&(Vc(),ma&&(n=ma,e=Es,Es=ma=null,cr(n),e)))for(n=0;n<e.length;n++)cr(e[n])}}function ns(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Qt]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,n,typeof a));return a}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ur=!1;if(Pn)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){ur=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{ur=!1}var ws=null,hl=null,hr=null;function dl(){if(hr)return hr;var e,n=hl,a=n.length,o,d="value"in ws?ws.value:ws.textContent,f=d.length;for(e=0;e<a&&n[e]===d[e];e++);var b=a-e;for(o=1;o<=b&&n[a-o]===d[f-o];o++);return hr=d.slice(e,1<o?1-o:void 0)}function dr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Bs(){return!0}function ss(){return!1}function en(e){function n(a,o,d,f,b){this._reactName=a,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Bs:ss,this.isPropagationStopped=ss,this}return N(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),n}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=en(qs),pa=N({},qs,{view:0,detail:0}),fl=en(pa),ya,Xr,Ts,Zr=N({},pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ts&&(Ts&&e.type==="mousemove"?(ya=e.screenX-Ts.screenX,Xr=e.screenY-Ts.screenY):Xr=ya=0,Ts=e),ya)},movementY:function(e){return"movementY"in e?e.movementY:Xr}}),ml=en(Zr),fr=N({},Zr,{dataTransfer:0}),Ho=en(fr),Go=N({},pa,{relatedTarget:0}),mr=en(Go),gl=N({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Fo=en(gl),Jr=N({},qs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$o=en(Jr),Yo=N({},qs,{data:0}),Ss=en(Yo),Qo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Xo[e])?!!n[e]:!1}function xa(){return Zo}var mn=N({},pa,{key:function(e){if(e.key){var n=Qo[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=dr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ko[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xa,charCode:function(e){return e.type==="keypress"?dr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jo=en(mn),Wo=N({},Zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hs=en(Wo),h=N({},pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xa}),y=en(h),_=N({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=en(_),B=N({},Zr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K=en(B),fe=N({},qs,{newState:0,oldState:0}),Be=en(fe),At=[9,13,27,32],at=Pn&&"CompositionEvent"in window,vt=null;Pn&&"documentMode"in document&&(vt=document.documentMode);var Bn=Pn&&"TextEvent"in window&&!vt,As=Pn&&(!at||vt&&8<vt&&11>=vt),as=" ",rs=!1;function gr(e,n){switch(e){case"keyup":return At.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ei=!1;function kv(e,n){switch(e){case"compositionend":return Wr(n);case"keypress":return n.which!==32?null:(rs=!0,as);case"textInput":return e=n.data,e===as&&rs?null:e;default:return null}}function zv(e,n){if(ei)return e==="compositionend"||!at&&gr(e,n)?(e=dl(),hr=hl=ws=null,ei=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return As&&n.locale!=="ko"?null:n.data;default:return null}}var Uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Uv[e.type]:n==="textarea"}function wm(e,n,a,o){ma?Es?Es.push(o):Es=[o]:ma=o,n=qc(n,"onChange"),0<n.length&&(a=new js("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var pl=null,yl=null;function Lv(e){iy(e,0)}function ec(e){var n=Tn(e);if(lr(n))return e}function jm(e,n){if(e==="change")return n}var Tm=!1;if(Pn){var eh;if(Pn){var th="oninput"in document;if(!th){var Sm=document.createElement("div");Sm.setAttribute("oninput","return;"),th=typeof Sm.oninput=="function"}eh=th}else eh=!1;Tm=eh&&(!document.documentMode||9<document.documentMode)}function Am(){pl&&(pl.detachEvent("onpropertychange",Cm),yl=pl=null)}function Cm(e){if(e.propertyName==="value"&&ec(yl)){var n=[];wm(n,yl,e,Ln(e)),ga(Lv,n)}}function Pv(e,n,a){e==="focusin"?(Am(),pl=n,yl=a,pl.attachEvent("onpropertychange",Cm)):e==="focusout"&&Am()}function Bv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ec(yl)}function qv(e,n){if(e==="click")return ec(n)}function Hv(e,n){if(e==="input"||e==="change")return ec(n)}function Gv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var An=typeof Object.is=="function"?Object.is:Gv;function xl(e,n){if(An(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!me.call(n,d)||!An(e[d],n[d]))return!1}return!0}function Rm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dm(e,n){var a=Rm(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rm(a)}}function Mm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Mm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Im(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ns(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Ns(e.document)}return n}function nh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Fv=Pn&&"documentMode"in document&&11>=document.documentMode,ti=null,sh=null,bl=null,ah=!1;function Om(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ah||ti==null||ti!==Ns(o)||(o=ti,"selectionStart"in o&&nh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),bl&&xl(bl,o)||(bl=o,o=qc(sh,"onSelect"),0<o.length&&(n=new js("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=ti)))}function pr(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var ni={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionrun:pr("Transition","TransitionRun"),transitionstart:pr("Transition","TransitionStart"),transitioncancel:pr("Transition","TransitionCancel"),transitionend:pr("Transition","TransitionEnd")},rh={},Vm={};Pn&&(Vm=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function yr(e){if(rh[e])return rh[e];if(!ni[e])return e;var n=ni[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Vm)return rh[e]=n[a];return e}var km=yr("animationend"),zm=yr("animationiteration"),Um=yr("animationstart"),$v=yr("transitionrun"),Yv=yr("transitionstart"),Qv=yr("transitioncancel"),Lm=yr("transitionend"),Pm=new Map,ih="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ih.push("scrollEnd");function is(e,n){Pm.set(e,n),vs(n,[e])}var tc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},qn=[],si=0,lh=0;function nc(){for(var e=si,n=lh=si=0;n<e;){var a=qn[n];qn[n++]=null;var o=qn[n];qn[n++]=null;var d=qn[n];qn[n++]=null;var f=qn[n];if(qn[n++]=null,o!==null&&d!==null){var b=o.pending;b===null?d.next=d:(d.next=b.next,b.next=d),o.pending=d}f!==0&&Bm(a,d,f)}}function sc(e,n,a,o){qn[si++]=e,qn[si++]=n,qn[si++]=a,qn[si++]=o,lh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function oh(e,n,a,o){return sc(e,n,a,o),ac(e)}function xr(e,n){return sc(e,null,null,n),ac(e)}function Bm(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var d=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&n!==null&&(d=31-St(a),e=f.hiddenUpdates,o=e[d],o===null?e[d]=[n]:o.push(n),n.lane=a|536870912),f):null}function ac(e){if(50<Bl)throw Bl=0,yd=null,Error(i(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ai={};function Kv(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(e,n,a,o){return new Kv(e,n,a,o)}function ch(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gs(e,n){var a=e.alternate;return a===null?(a=Cn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function qm(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function rc(e,n,a,o,d,f){var b=0;if(o=e,typeof e=="function")ch(e)&&(b=1);else if(typeof e=="string")b=e1(e,a,pe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case M:return e=Cn(31,a,n,d),e.elementType=M,e.lanes=f,e;case Z:return br(a.children,d,f,n);case P:b=8,d|=24;break;case ge:return e=Cn(12,a,n,d|2),e.elementType=ge,e.lanes=f,e;case Se:return e=Cn(13,a,n,d),e.elementType=Se,e.lanes=f,e;case Me:return e=Cn(19,a,n,d),e.elementType=Me,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case te:b=10;break e;case ce:b=9;break e;case he:b=11;break e;case D:b=14;break e;case A:b=16,o=null;break e}b=29,a=Error(i(130,e===null?"null":typeof e,"")),o=null}return n=Cn(b,a,n,d),n.elementType=e,n.type=o,n.lanes=f,n}function br(e,n,a,o){return e=Cn(7,e,o,n),e.lanes=a,e}function uh(e,n,a){return e=Cn(6,e,null,n),e.lanes=a,e}function Hm(e){var n=Cn(18,null,null,0);return n.stateNode=e,n}function hh(e,n,a){return n=Cn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Gm=new WeakMap;function Hn(e,n){if(typeof e=="object"&&e!==null){var a=Gm.get(e);return a!==void 0?a:(n={value:e,source:n,stack:se(n)},Gm.set(e,n),n)}return{value:e,source:n,stack:se(n)}}var ri=[],ii=0,ic=null,vl=0,Gn=[],Fn=0,ba=null,Cs=1,Rs="";function Fs(e,n){ri[ii++]=vl,ri[ii++]=ic,ic=e,vl=n}function Fm(e,n,a){Gn[Fn++]=Cs,Gn[Fn++]=Rs,Gn[Fn++]=ba,ba=e;var o=Cs;e=Rs;var d=32-St(o)-1;o&=~(1<<d),a+=1;var f=32-St(n)+d;if(30<f){var b=d-d%5;f=(o&(1<<b)-1).toString(32),o>>=b,d-=b,Cs=1<<32-St(n)+d|a<<d|o,Rs=f+e}else Cs=1<<f|a<<d|o,Rs=e}function dh(e){e.return!==null&&(Fs(e,1),Fm(e,1,0))}function fh(e){for(;e===ic;)ic=ri[--ii],ri[ii]=null,vl=ri[--ii],ri[ii]=null;for(;e===ba;)ba=Gn[--Fn],Gn[Fn]=null,Rs=Gn[--Fn],Gn[Fn]=null,Cs=Gn[--Fn],Gn[Fn]=null}function $m(e,n){Gn[Fn++]=Cs,Gn[Fn++]=Rs,Gn[Fn++]=ba,Cs=n.id,Rs=n.overflow,ba=e}var tn=null,xt=null,Je=!1,va=null,$n=!1,mh=Error(i(519));function _a(e){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(Hn(n,e)),mh}function Ym(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Vt]=e,n[Qt]=o,a){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(a=0;a<Hl.length;a++)$e(Hl[a],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":$e("invalid",n),Lo(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":$e("invalid",n);break;case"textarea":$e("invalid",n),da(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||uy(n.textContent,a)?(o.popover!=null&&($e("beforetoggle",n),$e("toggle",n)),o.onScroll!=null&&$e("scroll",n),o.onScrollEnd!=null&&$e("scrollend",n),o.onClick!=null&&(n.onclick=ts),n=!0):n=!1,n||_a(e,!0)}function Qm(e){for(tn=e.return;tn;)switch(tn.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:tn=tn.return}}function li(e){if(e!==tn)return!1;if(!Je)return Qm(e),Je=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Md(e.type,e.memoizedProps)),a=!a),a&&xt&&_a(e),Qm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));xt=by(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));xt=by(e)}else n===27?(n=xt,Va(e.type)?(e=zd,zd=null,xt=e):xt=n):xt=tn?Qn(e.stateNode.nextSibling):null;return!0}function vr(){xt=tn=null,Je=!1}function gh(){var e=va;return e!==null&&(_n===null?_n=e:_n.push.apply(_n,e),va=null),e}function _l(e){va===null?va=[e]:va.push(e)}var ph=C(null),_r=null,$s=null;function Na(e,n,a){ue(ph,n._currentValue),n._currentValue=a}function Ys(e){e._currentValue=ph.current,Y(ph)}function yh(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function xh(e,n,a,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var b=d.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=d;for(var O=0;O<n.length;O++)if(E.context===n[O]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),yh(f.return,a,e),o||(b=null);break e}f=E.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(i(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),yh(b,a,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function oi(e,n,a,o){e=null;for(var d=n,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var E=d.type;An(d.pendingProps.value,b.value)||(e!==null?e.push(E):e=[E])}}else if(d===ke.current){if(b=d.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Ql):e=[Ql])}d=d.return}e!==null&&xh(n,e,a,o),n.flags|=262144}function lc(e){for(e=e.firstContext;e!==null;){if(!An(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Nr(e){_r=e,$s=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function nn(e){return Km(_r,e)}function oc(e,n){return _r===null&&Nr(e),Km(e,n)}function Km(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},$s===null){if(e===null)throw Error(i(308));$s=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else $s=$s.next=n;return a}var Xv=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Zv=r.unstable_scheduleCallback,Jv=r.unstable_NormalPriority,Ut={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bh(){return{controller:new Xv,data:new Map,refCount:0}}function Nl(e){e.refCount--,e.refCount===0&&Zv(Jv,function(){e.controller.abort()})}var El=null,vh=0,ci=0,ui=null;function Wv(e,n){if(El===null){var a=El=[];vh=0,ci=Ed(),ui={status:"pending",value:void 0,then:function(o){a.push(o)}}}return vh++,n.then(Xm,Xm),n}function Xm(){if(--vh===0&&El!==null){ui!==null&&(ui.status="fulfilled");var e=El;El=null,ci=0,ui=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function e_(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var d=0;d<a.length;d++)(0,a[d])(n)},function(d){for(o.status="rejected",o.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),o}var Zm=G.S;G.S=function(e,n){Op=Jt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Wv(e,n),Zm!==null&&Zm(e,n)};var Er=C(null);function _h(){var e=Er.current;return e!==null?e:gt.pooledCache}function cc(e,n){n===null?ue(Er,Er.current):ue(Er,n.pool)}function Jm(){var e=_h();return e===null?null:{parent:Ut._currentValue,pool:e}}var hi=Error(i(460)),Nh=Error(i(474)),uc=Error(i(542)),hc={then:function(){}};function Wm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function eg(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(ts,ts),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ng(e),e;default:if(typeof n.status=="string")n.then(ts,ts);else{if(e=gt,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=o}},function(o){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ng(e),e}throw jr=n,hi}}function wr(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(jr=a,hi):a}}var jr=null;function tg(){if(jr===null)throw Error(i(459));var e=jr;return jr=null,e}function ng(e){if(e===hi||e===uc)throw Error(i(483))}var di=null,wl=0;function dc(e){var n=wl;return wl+=1,di===null&&(di=[]),eg(di,e,n)}function jl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function fc(e,n){throw n.$$typeof===j?Error(i(525)):(e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function sg(e){function n(U,k){if(e){var q=U.deletions;q===null?(U.deletions=[k],U.flags|=16):q.push(k)}}function a(U,k){if(!e)return null;for(;k!==null;)n(U,k),k=k.sibling;return null}function o(U){for(var k=new Map;U!==null;)U.key!==null?k.set(U.key,U):k.set(U.index,U),U=U.sibling;return k}function d(U,k){return U=Gs(U,k),U.index=0,U.sibling=null,U}function f(U,k,q){return U.index=q,e?(q=U.alternate,q!==null?(q=q.index,q<k?(U.flags|=67108866,k):q):(U.flags|=67108866,k)):(U.flags|=1048576,k)}function b(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function E(U,k,q,ae){return k===null||k.tag!==6?(k=uh(q,U.mode,ae),k.return=U,k):(k=d(k,q),k.return=U,k)}function O(U,k,q,ae){var Re=q.type;return Re===Z?ee(U,k,q.props.children,ae,q.key):k!==null&&(k.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&wr(Re)===k.type)?(k=d(k,q.props),jl(k,q),k.return=U,k):(k=rc(q.type,q.key,q.props,null,U.mode,ae),jl(k,q),k.return=U,k)}function H(U,k,q,ae){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=hh(q,U.mode,ae),k.return=U,k):(k=d(k,q.children||[]),k.return=U,k)}function ee(U,k,q,ae,Re){return k===null||k.tag!==7?(k=br(q,U.mode,ae,Re),k.return=U,k):(k=d(k,q),k.return=U,k)}function ie(U,k,q){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=uh(""+k,U.mode,q),k.return=U,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case z:return q=rc(k.type,k.key,k.props,null,U.mode,q),jl(q,k),q.return=U,q;case L:return k=hh(k,U.mode,q),k.return=U,k;case A:return k=wr(k),ie(U,k,q)}if(xe(k)||I(k))return k=br(k,U.mode,q,null),k.return=U,k;if(typeof k.then=="function")return ie(U,dc(k),q);if(k.$$typeof===te)return ie(U,oc(U,k),q);fc(U,k)}return null}function F(U,k,q,ae){var Re=k!==null?k.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Re!==null?null:E(U,k,""+q,ae);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case z:return q.key===Re?O(U,k,q,ae):null;case L:return q.key===Re?H(U,k,q,ae):null;case A:return q=wr(q),F(U,k,q,ae)}if(xe(q)||I(q))return Re!==null?null:ee(U,k,q,ae,null);if(typeof q.then=="function")return F(U,k,dc(q),ae);if(q.$$typeof===te)return F(U,k,oc(U,q),ae);fc(U,q)}return null}function X(U,k,q,ae,Re){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return U=U.get(q)||null,E(k,U,""+ae,Re);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case z:return U=U.get(ae.key===null?q:ae.key)||null,O(k,U,ae,Re);case L:return U=U.get(ae.key===null?q:ae.key)||null,H(k,U,ae,Re);case A:return ae=wr(ae),X(U,k,q,ae,Re)}if(xe(ae)||I(ae))return U=U.get(q)||null,ee(k,U,ae,Re,null);if(typeof ae.then=="function")return X(U,k,q,dc(ae),Re);if(ae.$$typeof===te)return X(U,k,q,oc(k,ae),Re);fc(k,ae)}return null}function Ne(U,k,q,ae){for(var Re=null,nt=null,je=k,Ge=k=0,Ke=null;je!==null&&Ge<q.length;Ge++){je.index>Ge?(Ke=je,je=null):Ke=je.sibling;var st=F(U,je,q[Ge],ae);if(st===null){je===null&&(je=Ke);break}e&&je&&st.alternate===null&&n(U,je),k=f(st,k,Ge),nt===null?Re=st:nt.sibling=st,nt=st,je=Ke}if(Ge===q.length)return a(U,je),Je&&Fs(U,Ge),Re;if(je===null){for(;Ge<q.length;Ge++)je=ie(U,q[Ge],ae),je!==null&&(k=f(je,k,Ge),nt===null?Re=je:nt.sibling=je,nt=je);return Je&&Fs(U,Ge),Re}for(je=o(je);Ge<q.length;Ge++)Ke=X(je,U,Ge,q[Ge],ae),Ke!==null&&(e&&Ke.alternate!==null&&je.delete(Ke.key===null?Ge:Ke.key),k=f(Ke,k,Ge),nt===null?Re=Ke:nt.sibling=Ke,nt=Ke);return e&&je.forEach(function(Pa){return n(U,Pa)}),Je&&Fs(U,Ge),Re}function Ie(U,k,q,ae){if(q==null)throw Error(i(151));for(var Re=null,nt=null,je=k,Ge=k=0,Ke=null,st=q.next();je!==null&&!st.done;Ge++,st=q.next()){je.index>Ge?(Ke=je,je=null):Ke=je.sibling;var Pa=F(U,je,st.value,ae);if(Pa===null){je===null&&(je=Ke);break}e&&je&&Pa.alternate===null&&n(U,je),k=f(Pa,k,Ge),nt===null?Re=Pa:nt.sibling=Pa,nt=Pa,je=Ke}if(st.done)return a(U,je),Je&&Fs(U,Ge),Re;if(je===null){for(;!st.done;Ge++,st=q.next())st=ie(U,st.value,ae),st!==null&&(k=f(st,k,Ge),nt===null?Re=st:nt.sibling=st,nt=st);return Je&&Fs(U,Ge),Re}for(je=o(je);!st.done;Ge++,st=q.next())st=X(je,U,Ge,st.value,ae),st!==null&&(e&&st.alternate!==null&&je.delete(st.key===null?Ge:st.key),k=f(st,k,Ge),nt===null?Re=st:nt.sibling=st,nt=st);return e&&je.forEach(function(h1){return n(U,h1)}),Je&&Fs(U,Ge),Re}function mt(U,k,q,ae){if(typeof q=="object"&&q!==null&&q.type===Z&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case z:e:{for(var Re=q.key;k!==null;){if(k.key===Re){if(Re=q.type,Re===Z){if(k.tag===7){a(U,k.sibling),ae=d(k,q.props.children),ae.return=U,U=ae;break e}}else if(k.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&wr(Re)===k.type){a(U,k.sibling),ae=d(k,q.props),jl(ae,q),ae.return=U,U=ae;break e}a(U,k);break}else n(U,k);k=k.sibling}q.type===Z?(ae=br(q.props.children,U.mode,ae,q.key),ae.return=U,U=ae):(ae=rc(q.type,q.key,q.props,null,U.mode,ae),jl(ae,q),ae.return=U,U=ae)}return b(U);case L:e:{for(Re=q.key;k!==null;){if(k.key===Re)if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){a(U,k.sibling),ae=d(k,q.children||[]),ae.return=U,U=ae;break e}else{a(U,k);break}else n(U,k);k=k.sibling}ae=hh(q,U.mode,ae),ae.return=U,U=ae}return b(U);case A:return q=wr(q),mt(U,k,q,ae)}if(xe(q))return Ne(U,k,q,ae);if(I(q)){if(Re=I(q),typeof Re!="function")throw Error(i(150));return q=Re.call(q),Ie(U,k,q,ae)}if(typeof q.then=="function")return mt(U,k,dc(q),ae);if(q.$$typeof===te)return mt(U,k,oc(U,q),ae);fc(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,k!==null&&k.tag===6?(a(U,k.sibling),ae=d(k,q),ae.return=U,U=ae):(a(U,k),ae=uh(q,U.mode,ae),ae.return=U,U=ae),b(U)):a(U,k)}return function(U,k,q,ae){try{wl=0;var Re=mt(U,k,q,ae);return di=null,Re}catch(je){if(je===hi||je===uc)throw je;var nt=Cn(29,je,null,U.mode);return nt.lanes=ae,nt.return=U,nt}finally{}}}var Tr=sg(!0),ag=sg(!1),Ea=!1;function Eh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ja(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(rt&2)!==0){var d=o.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),o.pending=n,n=ac(e),Bm(e,null,a),n}return sc(e,o,n,a),ac(e)}function Tl(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Wi(e,a)}}function jh(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?d=f=n:f=f.next=n}else d=f=n;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Th=!1;function Sl(){if(Th){var e=ui;if(e!==null)throw e}}function Al(e,n,a,o){Th=!1;var d=e.updateQueue;Ea=!1;var f=d.firstBaseUpdate,b=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var O=E,H=O.next;O.next=null,b===null?f=H:b.next=H,b=O;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,E=ee.lastBaseUpdate,E!==b&&(E===null?ee.firstBaseUpdate=H:E.next=H,ee.lastBaseUpdate=O))}if(f!==null){var ie=d.baseState;b=0,ee=H=O=null,E=f;do{var F=E.lane&-536870913,X=F!==E.lane;if(X?(Qe&F)===F:(o&F)===F){F!==0&&F===ci&&(Th=!0),ee!==null&&(ee=ee.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ne=e,Ie=E;F=n;var mt=a;switch(Ie.tag){case 1:if(Ne=Ie.payload,typeof Ne=="function"){ie=Ne.call(mt,ie,F);break e}ie=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ie.payload,F=typeof Ne=="function"?Ne.call(mt,ie,F):Ne,F==null)break e;ie=N({},ie,F);break e;case 2:Ea=!0}}F=E.callback,F!==null&&(e.flags|=64,X&&(e.flags|=8192),X=d.callbacks,X===null?d.callbacks=[F]:X.push(F))}else X={lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ee===null?(H=ee=X,O=ie):ee=ee.next=X,b|=F;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;X=E,E=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);ee===null&&(O=ie),d.baseState=O,d.firstBaseUpdate=H,d.lastBaseUpdate=ee,f===null&&(d.shared.lanes=0),Ra|=b,e.lanes=b,e.memoizedState=ie}}function rg(e,n){if(typeof e!="function")throw Error(i(191,e));e.call(n)}function ig(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)rg(a[e],n)}var fi=C(null),mc=C(0);function lg(e,n){e=na,ue(mc,e),ue(fi,n),na=e|n.baseLanes}function Sh(){ue(mc,na),ue(fi,fi.current)}function Ah(){na=mc.current,Y(fi),Y(mc)}var Rn=C(null),Yn=null;function Ta(e){var n=e.alternate;ue(Ct,Ct.current&1),ue(Rn,e),Yn===null&&(n===null||fi.current!==null||n.memoizedState!==null)&&(Yn=e)}function Ch(e){ue(Ct,Ct.current),ue(Rn,e),Yn===null&&(Yn=e)}function og(e){e.tag===22?(ue(Ct,Ct.current),ue(Rn,e),Yn===null&&(Yn=e)):Sa()}function Sa(){ue(Ct,Ct.current),ue(Rn,Rn.current)}function Dn(e){Y(Rn),Yn===e&&(Yn=null),Y(Ct)}var Ct=C(0);function gc(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vd(a)||kd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Qs=0,qe=null,dt=null,Lt=null,pc=!1,mi=!1,Sr=!1,yc=0,Cl=0,gi=null,t_=0;function Et(){throw Error(i(321))}function Rh(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!An(e[a],n[a]))return!1;return!0}function Dh(e,n,a,o,d,f){return Qs=f,qe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,G.H=e===null||e.memoizedState===null?Fg:$h,Sr=!1,f=a(o,d),Sr=!1,mi&&(f=ug(n,a,o,d)),cg(e),f}function cg(e){G.H=Ml;var n=dt!==null&&dt.next!==null;if(Qs=0,Lt=dt=qe=null,pc=!1,Cl=0,gi=null,n)throw Error(i(300));e===null||Pt||(e=e.dependencies,e!==null&&lc(e)&&(Pt=!0))}function ug(e,n,a,o){qe=e;var d=0;do{if(mi&&(gi=null),Cl=0,mi=!1,25<=d)throw Error(i(301));if(d+=1,Lt=dt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=$g,f=n(a,o)}while(mi);return f}function n_(){var e=G.H,n=e.useState()[0];return n=typeof n.then=="function"?Rl(n):n,e=e.useState()[0],(dt!==null?dt.memoizedState:null)!==e&&(qe.flags|=1024),n}function Mh(){var e=yc!==0;return yc=0,e}function Ih(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Oh(e){if(pc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}pc=!1}Qs=0,Lt=dt=qe=null,mi=!1,Cl=yc=0,gi=null}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?qe.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function Rt(){if(dt===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var n=Lt===null?qe.memoizedState:Lt.next;if(n!==null)Lt=n,dt=e;else{if(e===null)throw qe.alternate===null?Error(i(467)):Error(i(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Lt===null?qe.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(e){var n=Cl;return Cl+=1,gi===null&&(gi=[]),e=eg(gi,e,n),n=qe,(Lt===null?n.memoizedState:Lt.next)===null&&(n=n.alternate,G.H=n===null||n.memoizedState===null?Fg:$h),e}function bc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Rl(e);if(e.$$typeof===te)return nn(e)}throw Error(i(438,String(e)))}function Vh(e){var n=null,a=qe.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=qe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=xc(),qe.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=V;return n.index++,a}function Ks(e,n){return typeof n=="function"?n(e):n}function vc(e){var n=Rt();return kh(n,dt,e)}function kh(e,n,a){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var d=e.baseQueue,f=o.pending;if(f!==null){if(d!==null){var b=d.next;d.next=f.next,f.next=b}n.baseQueue=d=f,o.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{n=d.next;var E=b=null,O=null,H=n,ee=!1;do{var ie=H.lane&-536870913;if(ie!==H.lane?(Qe&ie)===ie:(Qs&ie)===ie){var F=H.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ie===ci&&(ee=!0);else if((Qs&F)===F){H=H.next,F===ci&&(ee=!0);continue}else ie={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(E=O=ie,b=f):O=O.next=ie,qe.lanes|=F,Ra|=F;ie=H.action,Sr&&a(f,ie),f=H.hasEagerState?H.eagerState:a(f,ie)}else F={lane:ie,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(E=O=F,b=f):O=O.next=F,qe.lanes|=ie,Ra|=ie;H=H.next}while(H!==null&&H!==n);if(O===null?b=f:O.next=E,!An(f,e.memoizedState)&&(Pt=!0,ee&&(a=ui,a!==null)))throw a;e.memoizedState=f,e.baseState=b,e.baseQueue=O,o.lastRenderedState=f}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function zh(e){var n=Rt(),a=n.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var o=a.dispatch,d=a.pending,f=n.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do f=e(f,b.action),b=b.next;while(b!==d);An(f,n.memoizedState)||(Pt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function hg(e,n,a){var o=qe,d=Rt(),f=Je;if(f){if(a===void 0)throw Error(i(407));a=a()}else a=n();var b=!An((dt||d).memoizedState,a);if(b&&(d.memoizedState=a,Pt=!0),d=d.queue,Ph(mg.bind(null,o,d,e),[e]),d.getSnapshot!==n||b||Lt!==null&&Lt.memoizedState.tag&1){if(o.flags|=2048,pi(9,{destroy:void 0},fg.bind(null,o,d,a,n),null),gt===null)throw Error(i(349));f||(Qs&127)!==0||dg(o,n,a)}return a}function dg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=qe.updateQueue,n===null?(n=xc(),qe.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function fg(e,n,a,o){n.value=a,n.getSnapshot=o,gg(n)&&pg(e)}function mg(e,n,a){return a(function(){gg(n)&&pg(e)})}function gg(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!An(e,a)}catch{return!0}}function pg(e){var n=xr(e,2);n!==null&&Nn(n,e,2)}function Uh(e){var n=gn();if(typeof e=="function"){var a=e;if(e=a(),Sr){zn(!0);try{a()}finally{zn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:e},n}function yg(e,n,a,o){return e.baseState=a,kh(e,dt,typeof o=="function"?o:Ks)}function s_(e,n,a,o,d){if(Ec(e))throw Error(i(485));if(e=n.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};G.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,xg(n,f)):(f.next=a.next,n.pending=a.next=f)}}function xg(e,n){var a=n.action,o=n.payload,d=e.state;if(n.isTransition){var f=G.T,b={};G.T=b;try{var E=a(d,o),O=G.S;O!==null&&O(b,E),bg(e,n,E)}catch(H){Lh(e,n,H)}finally{f!==null&&b.types!==null&&(f.types=b.types),G.T=f}}else try{f=a(d,o),bg(e,n,f)}catch(H){Lh(e,n,H)}}function bg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){vg(e,n,o)},function(o){return Lh(e,n,o)}):vg(e,n,a)}function vg(e,n,a){n.status="fulfilled",n.value=a,_g(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,xg(e,a)))}function Lh(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,_g(n),n=n.next;while(n!==o)}e.action=null}function _g(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Ng(e,n){return n}function Eg(e,n){if(Je){var a=gt.formState;if(a!==null){e:{var o=qe;if(Je){if(xt){t:{for(var d=xt,f=$n;d.nodeType!==8;){if(!f){d=null;break t}if(d=Qn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){xt=Qn(d.nextSibling),o=d.data==="F!";break e}}_a(o)}o=!1}o&&(n=a[0])}}return a=gn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ng,lastRenderedState:n},a.queue=o,a=qg.bind(null,qe,o),o.dispatch=a,o=Uh(!1),f=Fh.bind(null,qe,!1,o.queue),o=gn(),d={state:n,dispatch:null,action:e,pending:null},o.queue=d,a=s_.bind(null,qe,d,f,a),d.dispatch=a,o.memoizedState=e,[n,a,!1]}function wg(e){var n=Rt();return jg(n,dt,e)}function jg(e,n,a){if(n=kh(e,n,Ng)[0],e=vc(Ks)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Rl(n)}catch(b){throw b===hi?uc:b}else o=n;n=Rt();var d=n.queue,f=d.dispatch;return a!==n.memoizedState&&(qe.flags|=2048,pi(9,{destroy:void 0},a_.bind(null,d,a),null)),[o,f,e]}function a_(e,n){e.action=n}function Tg(e){var n=Rt(),a=dt;if(a!==null)return jg(n,a,e);Rt(),n=n.memoizedState,a=Rt();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function pi(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=qe.updateQueue,n===null&&(n=xc(),qe.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Sg(){return Rt().memoizedState}function _c(e,n,a,o){var d=gn();qe.flags|=e,d.memoizedState=pi(1|n,{destroy:void 0},a,o===void 0?null:o)}function Nc(e,n,a,o){var d=Rt();o=o===void 0?null:o;var f=d.memoizedState.inst;dt!==null&&o!==null&&Rh(o,dt.memoizedState.deps)?d.memoizedState=pi(n,f,a,o):(qe.flags|=e,d.memoizedState=pi(1|n,f,a,o))}function Ag(e,n){_c(8390656,8,e,n)}function Ph(e,n){Nc(2048,8,e,n)}function r_(e){qe.flags|=4;var n=qe.updateQueue;if(n===null)n=xc(),qe.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Cg(e){var n=Rt().memoizedState;return r_({ref:n,nextImpl:e}),function(){if((rt&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Rg(e,n){return Nc(4,2,e,n)}function Dg(e,n){return Nc(4,4,e,n)}function Mg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Ig(e,n,a){a=a!=null?a.concat([e]):null,Nc(4,4,Mg.bind(null,n,e),a)}function Bh(){}function Og(e,n){var a=Rt();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Rh(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Vg(e,n){var a=Rt();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Rh(n,o[1]))return o[0];if(o=e(),Sr){zn(!0);try{e()}finally{zn(!1)}}return a.memoizedState=[o,n],o}function qh(e,n,a){return a===void 0||(Qs&1073741824)!==0&&(Qe&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=kp(),qe.lanes|=e,Ra|=e,a)}function kg(e,n,a,o){return An(a,n)?a:fi.current!==null?(e=qh(e,a,o),An(e,n)||(Pt=!0),e):(Qs&42)===0||(Qs&1073741824)!==0&&(Qe&261930)===0?(Pt=!0,e.memoizedState=a):(e=kp(),qe.lanes|=e,Ra|=e,n)}function zg(e,n,a,o,d){var f=$.p;$.p=f!==0&&8>f?f:8;var b=G.T,E={};G.T=E,Fh(e,!1,n,a);try{var O=d(),H=G.S;if(H!==null&&H(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ee=e_(O,o);Dl(e,n,ee,On(e))}else Dl(e,n,o,On(e))}catch(ie){Dl(e,n,{then:function(){},status:"rejected",reason:ie},On())}finally{$.p=f,b!==null&&E.types!==null&&(b.types=E.types),G.T=b}}function i_(){}function Hh(e,n,a,o){if(e.tag!==5)throw Error(i(476));var d=Ug(e).queue;zg(e,d,n,de,a===null?i_:function(){return Lg(e),a(o)})}function Ug(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:de},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Lg(e){var n=Ug(e);n.next===null&&(n=e.alternate.memoizedState),Dl(e,n.next.queue,{},On())}function Gh(){return nn(Ql)}function Pg(){return Rt().memoizedState}function Bg(){return Rt().memoizedState}function l_(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=On();e=wa(a);var o=ja(n,e,a);o!==null&&(Nn(o,n,a),Tl(o,n,a)),n={cache:bh()},e.payload=n;return}n=n.return}}function o_(e,n,a){var o=On();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ec(e)?Hg(n,a):(a=oh(e,n,a,o),a!==null&&(Nn(a,e,o),Gg(a,n,o)))}function qg(e,n,a){var o=On();Dl(e,n,a,o)}function Dl(e,n,a,o){var d={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ec(e))Hg(n,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var b=n.lastRenderedState,E=f(b,a);if(d.hasEagerState=!0,d.eagerState=E,An(E,b))return sc(e,n,d,0),gt===null&&nc(),!1}catch{}finally{}if(a=oh(e,n,d,o),a!==null)return Nn(a,e,o),Gg(a,n,o),!0}return!1}function Fh(e,n,a,o){if(o={lane:2,revertLane:Ed(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ec(e)){if(n)throw Error(i(479))}else n=oh(e,a,o,2),n!==null&&Nn(n,e,2)}function Ec(e){var n=e.alternate;return e===qe||n!==null&&n===qe}function Hg(e,n){mi=pc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Gg(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Wi(e,a)}}var Ml={readContext:nn,use:bc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Ml.useEffectEvent=Et;var Fg={readContext:nn,use:bc,useCallback:function(e,n){return gn().memoizedState=[e,n===void 0?null:n],e},useContext:nn,useEffect:Ag,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,_c(4194308,4,Mg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return _c(4194308,4,e,n)},useInsertionEffect:function(e,n){_c(4,2,e,n)},useMemo:function(e,n){var a=gn();n=n===void 0?null:n;var o=e();if(Sr){zn(!0);try{e()}finally{zn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=gn();if(a!==void 0){var d=a(n);if(Sr){zn(!0);try{a(n)}finally{zn(!1)}}}else d=n;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=o_.bind(null,qe,e),[o.memoizedState,e]},useRef:function(e){var n=gn();return e={current:e},n.memoizedState=e},useState:function(e){e=Uh(e);var n=e.queue,a=qg.bind(null,qe,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Bh,useDeferredValue:function(e,n){var a=gn();return qh(a,e,n)},useTransition:function(){var e=Uh(!1);return e=zg.bind(null,qe,e.queue,!0,!1),gn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=qe,d=gn();if(Je){if(a===void 0)throw Error(i(407));a=a()}else{if(a=n(),gt===null)throw Error(i(349));(Qe&127)!==0||dg(o,n,a)}d.memoizedState=a;var f={value:a,getSnapshot:n};return d.queue=f,Ag(mg.bind(null,o,f,e),[e]),o.flags|=2048,pi(9,{destroy:void 0},fg.bind(null,o,f,a,n),null),a},useId:function(){var e=gn(),n=gt.identifierPrefix;if(Je){var a=Rs,o=Cs;a=(o&~(1<<32-St(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=yc++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=t_++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Gh,useFormState:Eg,useActionState:Eg,useOptimistic:function(e){var n=gn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Fh.bind(null,qe,!0,a),a.dispatch=n,[e,n]},useMemoCache:Vh,useCacheRefresh:function(){return gn().memoizedState=l_.bind(null,qe)},useEffectEvent:function(e){var n=gn(),a={impl:e};return n.memoizedState=a,function(){if((rt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},$h={readContext:nn,use:bc,useCallback:Og,useContext:nn,useEffect:Ph,useImperativeHandle:Ig,useInsertionEffect:Rg,useLayoutEffect:Dg,useMemo:Vg,useReducer:vc,useRef:Sg,useState:function(){return vc(Ks)},useDebugValue:Bh,useDeferredValue:function(e,n){var a=Rt();return kg(a,dt.memoizedState,e,n)},useTransition:function(){var e=vc(Ks)[0],n=Rt().memoizedState;return[typeof e=="boolean"?e:Rl(e),n]},useSyncExternalStore:hg,useId:Pg,useHostTransitionStatus:Gh,useFormState:wg,useActionState:wg,useOptimistic:function(e,n){var a=Rt();return yg(a,dt,e,n)},useMemoCache:Vh,useCacheRefresh:Bg};$h.useEffectEvent=Cg;var $g={readContext:nn,use:bc,useCallback:Og,useContext:nn,useEffect:Ph,useImperativeHandle:Ig,useInsertionEffect:Rg,useLayoutEffect:Dg,useMemo:Vg,useReducer:zh,useRef:Sg,useState:function(){return zh(Ks)},useDebugValue:Bh,useDeferredValue:function(e,n){var a=Rt();return dt===null?qh(a,e,n):kg(a,dt.memoizedState,e,n)},useTransition:function(){var e=zh(Ks)[0],n=Rt().memoizedState;return[typeof e=="boolean"?e:Rl(e),n]},useSyncExternalStore:hg,useId:Pg,useHostTransitionStatus:Gh,useFormState:Tg,useActionState:Tg,useOptimistic:function(e,n){var a=Rt();return dt!==null?yg(a,dt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Vh,useCacheRefresh:Bg};$g.useEffectEvent=Cg;function Yh(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:N({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Qh={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=On(),d=wa(o);d.payload=n,a!=null&&(d.callback=a),n=ja(e,d,o),n!==null&&(Nn(n,e,o),Tl(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=On(),d=wa(o);d.tag=1,d.payload=n,a!=null&&(d.callback=a),n=ja(e,d,o),n!==null&&(Nn(n,e,o),Tl(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=On(),o=wa(a);o.tag=2,n!=null&&(o.callback=n),n=ja(e,o,a),n!==null&&(Nn(n,e,a),Tl(n,e,a))}};function Yg(e,n,a,o,d,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,b):n.prototype&&n.prototype.isPureReactComponent?!xl(a,o)||!xl(d,f):!0}function Qg(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Qh.enqueueReplaceState(n,n.state,null)}function Ar(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=N({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function Kg(e){tc(e)}function Xg(e){console.error(e)}function Zg(e){tc(e)}function wc(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Jg(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Kh(e,n,a){return a=wa(a),a.tag=3,a.payload={element:null},a.callback=function(){wc(e,n)},a}function Wg(e){return e=wa(e),e.tag=3,e}function ep(e,n,a,o){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;e.payload=function(){return d(f)},e.callback=function(){Jg(n,a,o)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Jg(n,a,o),typeof d!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function c_(e,n,a,o,d){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&oi(n,a,d,!0),a=Rn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?kc():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,o===hc?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),vd(e,o,d)),!1;case 22:return a.flags|=65536,o===hc?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),vd(e,o,d)),!1}throw Error(i(435,a.tag))}return vd(e,o,d),kc(),!1}if(Je)return n=Rn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,o!==mh&&(e=Error(i(422),{cause:o}),_l(Hn(e,a)))):(o!==mh&&(n=Error(i(423),{cause:o}),_l(Hn(n,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Hn(o,a),d=Kh(e.stateNode,o,d),jh(e,d),wt!==4&&(wt=2)),!1;var f=Error(i(520),{cause:o});if(f=Hn(f,a),Pl===null?Pl=[f]:Pl.push(f),wt!==4&&(wt=2),n===null)return!0;o=Hn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Kh(a.stateNode,o,e),jh(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Da===null||!Da.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Wg(d),ep(d,e,a,o),jh(a,d),!1}a=a.return}while(a!==null);return!1}var Xh=Error(i(461)),Pt=!1;function sn(e,n,a,o){n.child=e===null?ag(n,null,a,o):Tr(n,e.child,a,o)}function tp(e,n,a,o,d){a=a.render;var f=n.ref;if("ref"in o){var b={};for(var E in o)E!=="ref"&&(b[E]=o[E])}else b=o;return Nr(n),o=Dh(e,n,a,b,f,d),E=Mh(),e!==null&&!Pt?(Ih(e,n,d),Xs(e,n,d)):(Je&&E&&dh(n),n.flags|=1,sn(e,n,o,d),n.child)}function np(e,n,a,o,d){if(e===null){var f=a.type;return typeof f=="function"&&!ch(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,sp(e,n,f,o,d)):(e=rc(a.type,null,o,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!ad(e,d)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:xl,a(b,o)&&e.ref===n.ref)return Xs(e,n,d)}return n.flags|=1,e=Gs(f,o),e.ref=n.ref,e.return=n,n.child=e}function sp(e,n,a,o,d){if(e!==null){var f=e.memoizedProps;if(xl(f,o)&&e.ref===n.ref)if(Pt=!1,n.pendingProps=o=f,ad(e,d))(e.flags&131072)!==0&&(Pt=!0);else return n.lanes=e.lanes,Xs(e,n,d)}return Zh(e,n,a,o,d)}function ap(e,n,a,o){var d=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,e!==null){for(o=n.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~f}else o=0,n.child=null;return rp(e,n,f,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&cc(n,f!==null?f.cachePool:null),f!==null?lg(n,f):Sh(),og(n);else return o=n.lanes=536870912,rp(e,n,f!==null?f.baseLanes|a:a,a,o)}else f!==null?(cc(n,f.cachePool),lg(n,f),Sa(),n.memoizedState=null):(e!==null&&cc(n,null),Sh(),Sa());return sn(e,n,d,a),n.child}function Il(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function rp(e,n,a,o,d){var f=_h();return f=f===null?null:{parent:Ut._currentValue,pool:f},n.memoizedState={baseLanes:a,cachePool:f},e!==null&&cc(n,null),Sh(),og(n),e!==null&&oi(e,n,o,!0),n.childLanes=d,null}function jc(e,n){return n=Sc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function ip(e,n,a){return Tr(n,e.child,null,a),e=jc(n,n.pendingProps),e.flags|=2,Dn(n),n.memoizedState=null,e}function u_(e,n,a){var o=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Je){if(o.mode==="hidden")return e=jc(n,o),n.lanes=536870912,Il(null,e);if(Ch(n),(e=xt)?(e=xy(e,$n),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Cs,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},a=Hm(e),a.return=n,n.child=a,tn=n,xt=null)):e=null,e===null)throw _a(n);return n.lanes=536870912,null}return jc(n,o)}var f=e.memoizedState;if(f!==null){var b=f.dehydrated;if(Ch(n),d)if(n.flags&256)n.flags&=-257,n=ip(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(i(558));else if(Pt||oi(e,n,a,!1),d=(a&e.childLanes)!==0,Pt||d){if(o=gt,o!==null&&(b=el(o,a),b!==0&&b!==f.retryLane))throw f.retryLane=b,xr(e,b),Nn(o,e,b),Xh;kc(),n=ip(e,n,a)}else e=f.treeContext,xt=Qn(b.nextSibling),tn=n,Je=!0,va=null,$n=!1,e!==null&&$m(n,e),n=jc(n,o),n.flags|=4096;return n}return e=Gs(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Tc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Zh(e,n,a,o,d){return Nr(n),a=Dh(e,n,a,o,void 0,d),o=Mh(),e!==null&&!Pt?(Ih(e,n,d),Xs(e,n,d)):(Je&&o&&dh(n),n.flags|=1,sn(e,n,a,d),n.child)}function lp(e,n,a,o,d,f){return Nr(n),n.updateQueue=null,a=ug(n,o,a,d),cg(e),o=Mh(),e!==null&&!Pt?(Ih(e,n,f),Xs(e,n,f)):(Je&&o&&dh(n),n.flags|=1,sn(e,n,a,f),n.child)}function op(e,n,a,o,d){if(Nr(n),n.stateNode===null){var f=ai,b=a.contextType;typeof b=="object"&&b!==null&&(f=nn(b)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Qh,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Eh(n),b=a.contextType,f.context=typeof b=="object"&&b!==null?nn(b):ai,f.state=n.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Yh(n,a,b,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Qh.enqueueReplaceState(f,f.state,null),Al(n,o,f,d),Sl(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,O=Ar(a,E);f.props=O;var H=f.context,ee=a.contextType;b=ai,typeof ee=="object"&&ee!==null&&(b=nn(ee));var ie=a.getDerivedStateFromProps;ee=typeof ie=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,ee||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||H!==b)&&Qg(n,f,o,b),Ea=!1;var F=n.memoizedState;f.state=F,Al(n,o,f,d),Sl(),H=n.memoizedState,E||F!==H||Ea?(typeof ie=="function"&&(Yh(n,a,ie,o),H=n.memoizedState),(O=Ea||Yg(n,a,O,o,F,H,b))?(ee||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=H),f.props=o,f.state=H,f.context=b,o=O):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,wh(e,n),b=n.memoizedProps,ee=Ar(a,b),f.props=ee,ie=n.pendingProps,F=f.context,H=a.contextType,O=ai,typeof H=="object"&&H!==null&&(O=nn(H)),E=a.getDerivedStateFromProps,(H=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==ie||F!==O)&&Qg(n,f,o,O),Ea=!1,F=n.memoizedState,f.state=F,Al(n,o,f,d),Sl();var X=n.memoizedState;b!==ie||F!==X||Ea||e!==null&&e.dependencies!==null&&lc(e.dependencies)?(typeof E=="function"&&(Yh(n,a,E,o),X=n.memoizedState),(ee=Ea||Yg(n,a,ee,o,F,X,O)||e!==null&&e.dependencies!==null&&lc(e.dependencies))?(H||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,X,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,X,O)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=X),f.props=o,f.state=X,f.context=O,o=ee):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&F===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Tc(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=Tr(n,e.child,null,d),n.child=Tr(n,null,a,d)):sn(e,n,a,d),n.memoizedState=f.state,e=n.child):e=Xs(e,n,d),e}function cp(e,n,a,o){return vr(),n.flags|=256,sn(e,n,a,o),n.child}var Jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wh(e){return{baseLanes:e,cachePool:Jm()}}function ed(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=In),e}function up(e,n,a){var o=n.pendingProps,d=!1,f=(n.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(Ct.current&2)!==0),b&&(d=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,e===null){if(Je){if(d?Ta(n):Sa(),(e=xt)?(e=xy(e,$n),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Cs,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},a=Hm(e),a.return=n,n.child=a,tn=n,xt=null)):e=null,e===null)throw _a(n);return kd(e)?n.lanes=32:n.lanes=536870912,null}var E=o.children;return o=o.fallback,d?(Sa(),d=n.mode,E=Sc({mode:"hidden",children:E},d),o=br(o,d,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,o=n.child,o.memoizedState=Wh(a),o.childLanes=ed(e,b,a),n.memoizedState=Jh,Il(null,o)):(Ta(n),td(n,E))}var O=e.memoizedState;if(O!==null&&(E=O.dehydrated,E!==null)){if(f)n.flags&256?(Ta(n),n.flags&=-257,n=nd(e,n,a)):n.memoizedState!==null?(Sa(),n.child=e.child,n.flags|=128,n=null):(Sa(),E=o.fallback,d=n.mode,o=Sc({mode:"visible",children:o.children},d),E=br(E,d,a,null),E.flags|=2,o.return=n,E.return=n,o.sibling=E,n.child=o,Tr(n,e.child,null,a),o=n.child,o.memoizedState=Wh(a),o.childLanes=ed(e,b,a),n.memoizedState=Jh,n=Il(null,o));else if(Ta(n),kd(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var H=b.dgst;b=H,o=Error(i(419)),o.stack="",o.digest=b,_l({value:o,source:null,stack:null}),n=nd(e,n,a)}else if(Pt||oi(e,n,a,!1),b=(a&e.childLanes)!==0,Pt||b){if(b=gt,b!==null&&(o=el(b,a),o!==0&&o!==O.retryLane))throw O.retryLane=o,xr(e,o),Nn(b,e,o),Xh;Vd(E)||kc(),n=nd(e,n,a)}else Vd(E)?(n.flags|=192,n.child=e.child,n=null):(e=O.treeContext,xt=Qn(E.nextSibling),tn=n,Je=!0,va=null,$n=!1,e!==null&&$m(n,e),n=td(n,o.children),n.flags|=4096);return n}return d?(Sa(),E=o.fallback,d=n.mode,O=e.child,H=O.sibling,o=Gs(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,H!==null?E=Gs(H,E):(E=br(E,d,a,null),E.flags|=2),E.return=n,o.return=n,o.sibling=E,n.child=o,Il(null,o),o=n.child,E=e.child.memoizedState,E===null?E=Wh(a):(d=E.cachePool,d!==null?(O=Ut._currentValue,d=d.parent!==O?{parent:O,pool:O}:d):d=Jm(),E={baseLanes:E.baseLanes|a,cachePool:d}),o.memoizedState=E,o.childLanes=ed(e,b,a),n.memoizedState=Jh,Il(e.child,o)):(Ta(n),a=e.child,e=a.sibling,a=Gs(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(b=n.deletions,b===null?(n.deletions=[e],n.flags|=16):b.push(e)),n.child=a,n.memoizedState=null,a)}function td(e,n){return n=Sc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Sc(e,n){return e=Cn(22,e,null,n),e.lanes=0,e}function nd(e,n,a){return Tr(n,e.child,null,a),e=td(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function hp(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),yh(e.return,n,a)}function sd(e,n,a,o,d,f){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d,treeForkCount:f}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=a,b.tailMode=d,b.treeForkCount=f)}function dp(e,n,a){var o=n.pendingProps,d=o.revealOrder,f=o.tail;o=o.children;var b=Ct.current,E=(b&2)!==0;if(E?(b=b&1|2,n.flags|=128):b&=1,ue(Ct,b),sn(e,n,o,a),o=Je?vl:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hp(e,a,n);else if(e.tag===19)hp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=n.child,d=null;a!==null;)e=a.alternate,e!==null&&gc(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=n.child,n.child=null):(d=a.sibling,a.sibling=null),sd(n,!1,d,a,f,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&gc(e)===null){n.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}sd(n,!0,a,null,f,o);break;case"together":sd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Xs(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Ra|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(oi(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,a=Gs(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Gs(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function ad(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&lc(e)))}function h_(e,n,a){switch(n.tag){case 3:tt(n,n.stateNode.containerInfo),Na(n,Ut,e.memoizedState.cache),vr();break;case 27:case 5:Tt(n);break;case 4:tt(n,n.stateNode.containerInfo);break;case 10:Na(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ch(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ta(n),n.flags|=128,null):(a&n.child.childLanes)!==0?up(e,n,a):(Ta(n),e=Xs(e,n,a),e!==null?e.sibling:null);Ta(n);break;case 19:var d=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(oi(e,n,a,!1),o=(a&n.childLanes)!==0),d){if(o)return dp(e,n,a);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ue(Ct,Ct.current),o)break;return null;case 22:return n.lanes=0,ap(e,n,a,n.pendingProps);case 24:Na(n,Ut,e.memoizedState.cache)}return Xs(e,n,a)}function fp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Pt=!0;else{if(!ad(e,a)&&(n.flags&128)===0)return Pt=!1,h_(e,n,a);Pt=(e.flags&131072)!==0}else Pt=!1,Je&&(n.flags&1048576)!==0&&Fm(n,vl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=wr(n.elementType),n.type=e,typeof e=="function")ch(e)?(o=Ar(e,o),n.tag=1,n=op(null,n,e,o,a)):(n.tag=0,n=Zh(null,n,e,o,a));else{if(e!=null){var d=e.$$typeof;if(d===he){n.tag=11,n=tp(null,n,e,o,a);break e}else if(d===D){n.tag=14,n=np(null,n,e,o,a);break e}}throw n=ve(e)||e,Error(i(306,n,""))}}return n;case 0:return Zh(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,d=Ar(o,n.pendingProps),op(e,n,o,d,a);case 3:e:{if(tt(n,n.stateNode.containerInfo),e===null)throw Error(i(387));o=n.pendingProps;var f=n.memoizedState;d=f.element,wh(e,n),Al(n,o,null,a);var b=n.memoizedState;if(o=b.cache,Na(n,Ut,o),o!==f.cache&&xh(n,[Ut],a,!0),Sl(),o=b.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=cp(e,n,o,a);break e}else if(o!==d){d=Hn(Error(i(424)),n),_l(d),n=cp(e,n,o,a);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(xt=Qn(e.firstChild),tn=n,Je=!0,va=null,$n=!0,a=ag(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(vr(),o===d){n=Xs(e,n,a);break e}sn(e,n,o,a)}n=n.child}return n;case 26:return Tc(e,n),e===null?(a=wy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Je||(a=n.type,e=n.pendingProps,o=Hc(Te.current).createElement(a),o[Vt]=n,o[Qt]=e,an(o,a,e),kt(o),n.stateNode=o):n.memoizedState=wy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Tt(n),e===null&&Je&&(o=n.stateNode=_y(n.type,n.pendingProps,Te.current),tn=n,$n=!0,d=xt,Va(n.type)?(zd=d,xt=Qn(o.firstChild)):xt=d),sn(e,n,n.pendingProps.children,a),Tc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Je&&((d=o=xt)&&(o=B_(o,n.type,n.pendingProps,$n),o!==null?(n.stateNode=o,tn=n,xt=Qn(o.firstChild),$n=!1,d=!0):d=!1),d||_a(n)),Tt(n),d=n.type,f=n.pendingProps,b=e!==null?e.memoizedProps:null,o=f.children,Md(d,f)?o=null:b!==null&&Md(d,b)&&(n.flags|=32),n.memoizedState!==null&&(d=Dh(e,n,n_,null,null,a),Ql._currentValue=d),Tc(e,n),sn(e,n,o,a),n.child;case 6:return e===null&&Je&&((e=a=xt)&&(a=q_(a,n.pendingProps,$n),a!==null?(n.stateNode=a,tn=n,xt=null,e=!0):e=!1),e||_a(n)),null;case 13:return up(e,n,a);case 4:return tt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Tr(n,null,o,a):sn(e,n,o,a),n.child;case 11:return tp(e,n,n.type,n.pendingProps,a);case 7:return sn(e,n,n.pendingProps,a),n.child;case 8:return sn(e,n,n.pendingProps.children,a),n.child;case 12:return sn(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,Na(n,n.type,o.value),sn(e,n,o.children,a),n.child;case 9:return d=n.type._context,o=n.pendingProps.children,Nr(n),d=nn(d),o=o(d),n.flags|=1,sn(e,n,o,a),n.child;case 14:return np(e,n,n.type,n.pendingProps,a);case 15:return sp(e,n,n.type,n.pendingProps,a);case 19:return dp(e,n,a);case 31:return u_(e,n,a);case 22:return ap(e,n,a,n.pendingProps);case 24:return Nr(n),o=nn(Ut),e===null?(d=_h(),d===null&&(d=gt,f=bh(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),n.memoizedState={parent:o,cache:d},Eh(n),Na(n,Ut,d)):((e.lanes&a)!==0&&(wh(e,n),Al(n,null,null,a),Sl()),d=e.memoizedState,f=n.memoizedState,d.parent!==o?(d={parent:o,cache:o},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),Na(n,Ut,o)):(o=f.cache,Na(n,Ut,o),o!==d.cache&&xh(n,[Ut],a,!0))),sn(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Zs(e){e.flags|=4}function rd(e,n,a,o,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Pp())e.flags|=8192;else throw jr=hc,Nh}else e.flags&=-16777217}function mp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Cy(n))if(Pp())e.flags|=8192;else throw jr=hc,Nh}function Ac(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Oo():536870912,e.lanes|=n,vi|=n)}function Ol(e,n){if(!Je)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function bt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function d_(e,n,a){var o=n.pendingProps;switch(fh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(n),null;case 1:return bt(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Ys(Ut),Ce(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(li(n)?Zs(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gh())),bt(n),null;case 26:var d=n.type,f=n.memoizedState;return e===null?(Zs(n),f!==null?(bt(n),mp(n,f)):(bt(n),rd(n,d,null,o,a))):f?f!==e.memoizedState?(Zs(n),bt(n),mp(n,f)):(bt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Zs(n),bt(n),rd(n,d,e,o,a)),null;case 27:if(Ee(n),a=Te.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Zs(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return bt(n),null}e=pe.current,li(n)?Ym(n):(e=_y(d,o,a),n.stateNode=e,Zs(n))}return bt(n),null;case 5:if(Ee(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Zs(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return bt(n),null}if(f=pe.current,li(n))Ym(n);else{var b=Hc(Te.current);switch(f){case 1:f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=b.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?b.createElement(d,{is:o.is}):b.createElement(d)}}f[Vt]=n,f[Qt]=o;e:for(b=n.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===n)break e;for(;b.sibling===null;){if(b.return===null||b.return===n)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}n.stateNode=f;e:switch(an(f,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Zs(n)}}return bt(n),rd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Zs(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(e=Te.current,li(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,d=tn,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[Vt]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||uy(e.nodeValue,a)),e||_a(n,!0)}else e=Hc(e).createTextNode(o),e[Vt]=n,n.stateNode=e}return bt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=li(n),a!==null){if(e===null){if(!o)throw Error(i(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Vt]=n}else vr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;bt(n),e=!1}else a=gh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Dn(n),n):(Dn(n),null);if((n.flags&128)!==0)throw Error(i(558))}return bt(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=li(n),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Vt]=n}else vr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;bt(n),d=!1}else d=gh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Dn(n),n):(Dn(n),null)}return Dn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),Ac(n,n.updateQueue),bt(n),null);case 4:return Ce(),e===null&&Sd(n.stateNode.containerInfo),bt(n),null;case 10:return Ys(n.type),bt(n),null;case 19:if(Y(Ct),o=n.memoizedState,o===null)return bt(n),null;if(d=(n.flags&128)!==0,f=o.rendering,f===null)if(d)Ol(o,!1);else{if(wt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=gc(e),f!==null){for(n.flags|=128,Ol(o,!1),e=f.updateQueue,n.updateQueue=e,Ac(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)qm(a,e),a=a.sibling;return ue(Ct,Ct.current&1|2),Je&&Fs(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&Jt()>Ic&&(n.flags|=128,d=!0,Ol(o,!1),n.lanes=4194304)}else{if(!d)if(e=gc(f),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,Ac(n,e),Ol(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Je)return bt(n),null}else 2*Jt()-o.renderingStartTime>Ic&&a!==536870912&&(n.flags|=128,d=!0,Ol(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Jt(),e.sibling=null,a=Ct.current,ue(Ct,d?a&1|2:a&1),Je&&Fs(n,o.treeForkCount),e):(bt(n),null);case 22:case 23:return Dn(n),Ah(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(bt(n),n.subtreeFlags&6&&(n.flags|=8192)):bt(n),a=n.updateQueue,a!==null&&Ac(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&Y(Er),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Ys(Ut),bt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function f_(e,n){switch(fh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ys(Ut),Ce(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ee(n),null;case 31:if(n.memoizedState!==null){if(Dn(n),n.alternate===null)throw Error(i(340));vr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Dn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));vr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Y(Ct),null;case 4:return Ce(),null;case 10:return Ys(n.type),null;case 22:case 23:return Dn(n),Ah(),e!==null&&Y(Er),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Ys(Ut),null;case 25:return null;default:return null}}function gp(e,n){switch(fh(n),n.tag){case 3:Ys(Ut),Ce();break;case 26:case 27:case 5:Ee(n);break;case 4:Ce();break;case 31:n.memoizedState!==null&&Dn(n);break;case 13:Dn(n);break;case 19:Y(Ct);break;case 10:Ys(n.type);break;case 22:case 23:Dn(n),Ah(),e!==null&&Y(Er);break;case 24:Ys(Ut)}}function Vl(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var d=o.next;a=d;do{if((a.tag&e)===e){o=void 0;var f=a.create,b=a.inst;o=f(),b.destroy=o}a=a.next}while(a!==d)}}catch(E){ut(n,n.return,E)}}function Aa(e,n,a){try{var o=n.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var f=d.next;o=f;do{if((o.tag&e)===e){var b=o.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,d=n;var O=a,H=E;try{H()}catch(ee){ut(d,O,ee)}}}o=o.next}while(o!==f)}}catch(ee){ut(n,n.return,ee)}}function pp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{ig(n,a)}catch(o){ut(e,e.return,o)}}}function yp(e,n,a){a.props=Ar(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ut(e,n,o)}}function kl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(d){ut(e,n,d)}}function Ds(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(d){ut(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ut(e,n,d)}else a.current=null}function xp(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(d){ut(e,e.return,d)}}function id(e,n,a){try{var o=e.stateNode;V_(o,e.type,a,n),o[Qt]=n}catch(d){ut(e,e.return,d)}}function bp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Va(e.type)||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Va(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function od(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ts));else if(o!==4&&(o===27&&Va(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(od(e,n,a),e=e.sibling;e!==null;)od(e,n,a),e=e.sibling}function Cc(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&Va(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Cc(e,n,a),e=e.sibling;e!==null;)Cc(e,n,a),e=e.sibling}function vp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);an(n,o,a),n[Vt]=e,n[Qt]=a}catch(f){ut(e,e.return,f)}}var Js=!1,Bt=!1,cd=!1,_p=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function m_(e,n){if(e=e.containerInfo,Rd=Xc,e=Im(e),nh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,E=-1,O=-1,H=0,ee=0,ie=e,F=null;t:for(;;){for(var X;ie!==a||d!==0&&ie.nodeType!==3||(E=b+d),ie!==f||o!==0&&ie.nodeType!==3||(O=b+o),ie.nodeType===3&&(b+=ie.nodeValue.length),(X=ie.firstChild)!==null;)F=ie,ie=X;for(;;){if(ie===e)break t;if(F===a&&++H===d&&(E=b),F===f&&++ee===o&&(O=b),(X=ie.nextSibling)!==null)break;ie=F,F=ie.parentNode}ie=X}a=E===-1||O===-1?null:{start:E,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:e,selectionRange:a},Xc=!1,Xt=n;Xt!==null;)if(n=Xt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Xt=e;else for(;Xt!==null;){switch(n=Xt,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,d=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Ne=Ar(a.type,d);e=o.getSnapshotBeforeUpdate(Ne,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Ie){ut(a,a.return,Ie)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Od(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=n.sibling,e!==null){e.return=n.return,Xt=e;break}Xt=n.return}}function Np(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ea(e,a),o&4&&Vl(5,a);break;case 1:if(ea(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(b){ut(a,a.return,b)}else{var d=Ar(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(b){ut(a,a.return,b)}}o&64&&pp(a),o&512&&kl(a,a.return);break;case 3:if(ea(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{ig(e,n)}catch(b){ut(a,a.return,b)}}break;case 27:n===null&&o&4&&vp(a);case 26:case 5:ea(e,a),n===null&&o&4&&xp(a),o&512&&kl(a,a.return);break;case 12:ea(e,a);break;case 31:ea(e,a),o&4&&jp(e,a);break;case 13:ea(e,a),o&4&&Tp(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=E_.bind(null,a),H_(e,a))));break;case 22:if(o=a.memoizedState!==null||Js,!o){n=n!==null&&n.memoizedState!==null||Bt,d=Js;var f=Bt;Js=o,(Bt=n)&&!f?ta(e,a,(a.subtreeFlags&8772)!==0):ea(e,a),Js=d,Bt=f}break;case 30:break;default:ea(e,a)}}function Ep(e){var n=e.alternate;n!==null&&(e.alternate=null,Ep(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Gr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _t=null,xn=!1;function Ws(e,n,a){for(a=a.child;a!==null;)wp(e,n,a),a=a.sibling}function wp(e,n,a){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Zn,a)}catch{}switch(a.tag){case 26:Bt||Ds(a,n),Ws(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Bt||Ds(a,n);var o=_t,d=xn;Va(a.type)&&(_t=a.stateNode,xn=!1),Ws(e,n,a),Fl(a.stateNode),_t=o,xn=d;break;case 5:Bt||Ds(a,n);case 6:if(o=_t,d=xn,_t=null,Ws(e,n,a),_t=o,xn=d,_t!==null)if(xn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(a.stateNode)}catch(f){ut(a,n,f)}else try{_t.removeChild(a.stateNode)}catch(f){ut(a,n,f)}break;case 18:_t!==null&&(xn?(e=_t,py(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ai(e)):py(_t,a.stateNode));break;case 4:o=_t,d=xn,_t=a.stateNode.containerInfo,xn=!0,Ws(e,n,a),_t=o,xn=d;break;case 0:case 11:case 14:case 15:Aa(2,a,n),Bt||Aa(4,a,n),Ws(e,n,a);break;case 1:Bt||(Ds(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&yp(a,n,o)),Ws(e,n,a);break;case 21:Ws(e,n,a);break;case 22:Bt=(o=Bt)||a.memoizedState!==null,Ws(e,n,a),Bt=o;break;default:Ws(e,n,a)}}function jp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ai(e)}catch(a){ut(n,n.return,a)}}}function Tp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ai(e)}catch(a){ut(n,n.return,a)}}function g_(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new _p),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new _p),n;default:throw Error(i(435,e.tag))}}function Rc(e,n){var a=g_(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var d=w_.bind(null,e,o);o.then(d,d)}})}function bn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o],f=e,b=n,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Va(E.type)){_t=E.stateNode,xn=!1;break e}break;case 5:_t=E.stateNode,xn=!1;break e;case 3:case 4:_t=E.stateNode.containerInfo,xn=!0;break e}E=E.return}if(_t===null)throw Error(i(160));wp(f,b,d),_t=null,xn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Sp(n,e),n=n.sibling}var ls=null;function Sp(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:bn(n,e),vn(e),o&4&&(Aa(3,e,e.return),Vl(3,e),Aa(5,e,e.return));break;case 1:bn(n,e),vn(e),o&512&&(Bt||a===null||Ds(a,a.return)),o&64&&Js&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var d=ls;if(bn(n,e),vn(e),o&512&&(Bt||a===null||Ds(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":f=d.getElementsByTagName("title")[0],(!f||f[ys]||f[Vt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(o),d.head.insertBefore(f,d.querySelector("head > title"))),an(f,o,a),f[Vt]=e,kt(f),o=f;break e;case"link":var b=Sy("link","href",d).get(o+(a.href||""));if(b){for(var E=0;E<b.length;E++)if(f=b[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(E,1);break t}}f=d.createElement(o),an(f,o,a),d.head.appendChild(f);break;case"meta":if(b=Sy("meta","content",d).get(o+(a.content||""))){for(E=0;E<b.length;E++)if(f=b[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(E,1);break t}}f=d.createElement(o),an(f,o,a),d.head.appendChild(f);break;default:throw Error(i(468,o))}f[Vt]=e,kt(f),o=f}e.stateNode=o}else Ay(d,e.type,e.stateNode);else e.stateNode=Ty(d,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?Ay(d,e.type,e.stateNode):Ty(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&id(e,e.memoizedProps,a.memoizedProps)}break;case 27:bn(n,e),vn(e),o&512&&(Bt||a===null||Ds(a,a.return)),a!==null&&o&4&&id(e,e.memoizedProps,a.memoizedProps);break;case 5:if(bn(n,e),vn(e),o&512&&(Bt||a===null||Ds(a,a.return)),e.flags&32){d=e.stateNode;try{yn(d,"")}catch(Ne){ut(e,e.return,Ne)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,id(e,d,a!==null?a.memoizedProps:d)),o&1024&&(cd=!0);break;case 6:if(bn(n,e),vn(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(Ne){ut(e,e.return,Ne)}}break;case 3:if($c=null,d=ls,ls=Gc(n.containerInfo),bn(n,e),ls=d,vn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ai(n.containerInfo)}catch(Ne){ut(e,e.return,Ne)}cd&&(cd=!1,Ap(e));break;case 4:o=ls,ls=Gc(e.stateNode.containerInfo),bn(n,e),vn(e),ls=o;break;case 12:bn(n,e),vn(e);break;case 31:bn(n,e),vn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Rc(e,o)));break;case 13:bn(n,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Mc=Jt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Rc(e,o)));break;case 22:d=e.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,H=Js,ee=Bt;if(Js=H||d,Bt=ee||O,bn(n,e),Bt=ee,Js=H,vn(e),o&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(a===null||O||Js||Bt||Cr(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){O=a=n;try{if(f=O.stateNode,d)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=O.stateNode;var ie=O.memoizedProps.style,F=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;E.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Ne){ut(O,O.return,Ne)}}}else if(n.tag===6){if(a===null){O=n;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(Ne){ut(O,O.return,Ne)}}}else if(n.tag===18){if(a===null){O=n;try{var X=O.stateNode;d?yy(X,!0):yy(O.stateNode,!1)}catch(Ne){ut(O,O.return,Ne)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Rc(e,a))));break;case 19:bn(n,e),vn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Rc(e,o)));break;case 30:break;case 21:break;default:bn(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(bp(o)){a=o;break}o=o.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,f=ld(e);Cc(e,f,d);break;case 5:var b=a.stateNode;a.flags&32&&(yn(b,""),a.flags&=-33);var E=ld(e);Cc(e,E,b);break;case 3:case 4:var O=a.stateNode.containerInfo,H=ld(e);od(e,H,O);break;default:throw Error(i(161))}}catch(ee){ut(e,e.return,ee)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ap(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Ap(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ea(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Np(e,n.alternate,n),n=n.sibling}function Cr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Aa(4,n,n.return),Cr(n);break;case 1:Ds(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&yp(n,n.return,a),Cr(n);break;case 27:Fl(n.stateNode);case 26:case 5:Ds(n,n.return),Cr(n);break;case 22:n.memoizedState===null&&Cr(n);break;case 30:Cr(n);break;default:Cr(n)}e=e.sibling}}function ta(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,d=e,f=n,b=f.flags;switch(f.tag){case 0:case 11:case 15:ta(d,f,a),Vl(4,f);break;case 1:if(ta(d,f,a),o=f,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(H){ut(o,o.return,H)}if(o=f,d=o.updateQueue,d!==null){var E=o.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)rg(O[d],E)}catch(H){ut(o,o.return,H)}}a&&b&64&&pp(f),kl(f,f.return);break;case 27:vp(f);case 26:case 5:ta(d,f,a),a&&o===null&&b&4&&xp(f),kl(f,f.return);break;case 12:ta(d,f,a);break;case 31:ta(d,f,a),a&&b&4&&jp(d,f);break;case 13:ta(d,f,a),a&&b&4&&Tp(d,f);break;case 22:f.memoizedState===null&&ta(d,f,a),kl(f,f.return);break;case 30:break;default:ta(d,f,a)}n=n.sibling}}function ud(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Nl(a))}function hd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Nl(e))}function os(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Cp(e,n,a,o),n=n.sibling}function Cp(e,n,a,o){var d=n.flags;switch(n.tag){case 0:case 11:case 15:os(e,n,a,o),d&2048&&Vl(9,n);break;case 1:os(e,n,a,o);break;case 3:os(e,n,a,o),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Nl(e)));break;case 12:if(d&2048){os(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,b=f.id,E=f.onPostCommit;typeof E=="function"&&E(b,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){ut(n,n.return,O)}}else os(e,n,a,o);break;case 31:os(e,n,a,o);break;case 13:os(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,b=n.alternate,n.memoizedState!==null?f._visibility&2?os(e,n,a,o):zl(e,n):f._visibility&2?os(e,n,a,o):(f._visibility|=2,yi(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),d&2048&&ud(b,n);break;case 24:os(e,n,a,o),d&2048&&hd(n.alternate,n);break;default:os(e,n,a,o)}}function yi(e,n,a,o,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,b=n,E=a,O=o,H=b.flags;switch(b.tag){case 0:case 11:case 15:yi(f,b,E,O,d),Vl(8,b);break;case 23:break;case 22:var ee=b.stateNode;b.memoizedState!==null?ee._visibility&2?yi(f,b,E,O,d):zl(f,b):(ee._visibility|=2,yi(f,b,E,O,d)),d&&H&2048&&ud(b.alternate,b);break;case 24:yi(f,b,E,O,d),d&&H&2048&&hd(b.alternate,b);break;default:yi(f,b,E,O,d)}n=n.sibling}}function zl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,d=o.flags;switch(o.tag){case 22:zl(a,o),d&2048&&ud(o.alternate,o);break;case 24:zl(a,o),d&2048&&hd(o.alternate,o);break;default:zl(a,o)}n=n.sibling}}var Ul=8192;function xi(e,n,a){if(e.subtreeFlags&Ul)for(e=e.child;e!==null;)Rp(e,n,a),e=e.sibling}function Rp(e,n,a){switch(e.tag){case 26:xi(e,n,a),e.flags&Ul&&e.memoizedState!==null&&t1(a,ls,e.memoizedState,e.memoizedProps);break;case 5:xi(e,n,a);break;case 3:case 4:var o=ls;ls=Gc(e.stateNode.containerInfo),xi(e,n,a),ls=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Ul,Ul=16777216,xi(e,n,a),Ul=o):xi(e,n,a));break;default:xi(e,n,a)}}function Dp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ll(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Xt=o,Ip(o,e)}Dp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Mp(e),e=e.sibling}function Mp(e){switch(e.tag){case 0:case 11:case 15:Ll(e),e.flags&2048&&Aa(9,e,e.return);break;case 3:Ll(e);break;case 12:Ll(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Dc(e)):Ll(e);break;default:Ll(e)}}function Dc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Xt=o,Ip(o,e)}Dp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Aa(8,n,n.return),Dc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Dc(n));break;default:Dc(n)}e=e.sibling}}function Ip(e,n){for(;Xt!==null;){var a=Xt;switch(a.tag){case 0:case 11:case 15:Aa(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Nl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Xt=o;else e:for(a=e;Xt!==null;){o=Xt;var d=o.sibling,f=o.return;if(Ep(o),o===a){Xt=null;break e}if(d!==null){d.return=f,Xt=d;break e}Xt=f}}}var p_={getCacheForType:function(e){var n=nn(Ut),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return nn(Ut).controller.signal}},y_=typeof WeakMap=="function"?WeakMap:Map,rt=0,gt=null,Fe=null,Qe=0,ct=0,Mn=null,Ca=!1,bi=!1,dd=!1,na=0,wt=0,Ra=0,Rr=0,fd=0,In=0,vi=0,Pl=null,_n=null,md=!1,Mc=0,Op=0,Ic=1/0,Oc=null,Da=null,$t=0,Ma=null,_i=null,sa=0,gd=0,pd=null,Vp=null,Bl=0,yd=null;function On(){return(rt&2)!==0&&Qe!==0?Qe&-Qe:G.T!==null?Ed():Vo()}function kp(){if(In===0)if((Qe&536870912)===0||Je){var e=sr;sr<<=1,(sr&3932160)===0&&(sr=262144),In=e}else In=536870912;return e=Rn.current,e!==null&&(e.flags|=32),In}function Nn(e,n,a){(e===gt&&(ct===2||ct===9)||e.cancelPendingCommit!==null)&&(Ni(e,0),Ia(e,Qe,In,!1)),ar(e,a),((rt&2)===0||e!==gt)&&(e===gt&&((rt&2)===0&&(Rr|=a),wt===4&&Ia(e,Qe,In,!1)),Ms(e))}function zp(e,n,a){if((rt&6)!==0)throw Error(i(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Jn(e,n),d=o?v_(e,n):bd(e,n,!0),f=o;do{if(d===0){bi&&!o&&Ia(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!x_(a)){d=bd(e,n,!1),f=!1;continue}if(d===2){if(f=n,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;e:{var E=e;d=Pl;var O=E.current.memoizedState.isDehydrated;if(O&&(Ni(E,b).flags|=256),b=bd(E,b,!1),b!==2){if(dd&&!O){E.errorRecoveryDisabledLanes|=f,Rr|=f,d=4;break e}f=_n,_n=d,f!==null&&(_n===null?_n=f:_n.push.apply(_n,f))}d=b}if(f=!1,d!==2)continue}}if(d===1){Ni(e,0),Ia(e,n,0,!0);break}e:{switch(o=e,f=d,f){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:Ia(o,n,In,!Ca);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(d=Mc+300-Jt(),10<d)){if(Ia(o,n,In,!Ca),ms(o,0,!0)!==0)break e;sa=n,o.timeoutHandle=my(Up.bind(null,o,a,_n,Oc,md,n,In,Rr,vi,Ca,f,"Throttled",-0,0),d);break e}Up(o,a,_n,Oc,md,n,In,Rr,vi,Ca,f,null,-0,0)}}break}while(!0);Ms(e)}function Up(e,n,a,o,d,f,b,E,O,H,ee,ie,F,X){if(e.timeoutHandle=-1,ie=n.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ts},Rp(n,f,ie);var Ne=(f&62914560)===f?Mc-Jt():(f&4194048)===f?Op-Jt():0;if(Ne=n1(ie,Ne),Ne!==null){sa=f,e.cancelPendingCommit=Ne($p.bind(null,e,n,f,a,o,d,b,E,O,ee,ie,null,F,X)),Ia(e,f,b,!H);return}}$p(e,n,f,a,o,d,b,E,O)}function x_(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var d=a[o],f=d.getSnapshot;d=d.value;try{if(!An(f(),d))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ia(e,n,a,o){n&=~fd,n&=~Rr,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var d=n;0<d;){var f=31-St(d),b=1<<f;o[f]=-1,d&=~b}a!==0&&rr(e,a,n)}function Vc(){return(rt&6)===0?(ql(0),!1):!0}function xd(){if(Fe!==null){if(ct===0)var e=Fe.return;else e=Fe,$s=_r=null,Oh(e),di=null,wl=0,e=Fe;for(;e!==null;)gp(e.alternate,e),e=e.return;Fe=null}}function Ni(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,U_(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),sa=0,xd(),gt=e,Fe=a=Gs(e.current,null),Qe=n,ct=0,Mn=null,Ca=!1,bi=Jn(e,n),dd=!1,vi=In=fd=Rr=Ra=wt=0,_n=Pl=null,md=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var d=31-St(o),f=1<<d;n|=e[d],o&=~f}return na=n,nc(),a}function Lp(e,n){qe=null,G.H=Ml,n===hi||n===uc?(n=tg(),ct=3):n===Nh?(n=tg(),ct=4):ct=n===Xh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Mn=n,Fe===null&&(wt=1,wc(e,Hn(n,e.current)))}function Pp(){var e=Rn.current;return e===null?!0:(Qe&4194048)===Qe?Yn===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?e===Yn:!1}function Bp(){var e=G.H;return G.H=Ml,e===null?Ml:e}function qp(){var e=G.A;return G.A=p_,e}function kc(){wt=4,Ca||(Qe&4194048)!==Qe&&Rn.current!==null||(bi=!0),(Ra&134217727)===0&&(Rr&134217727)===0||gt===null||Ia(gt,Qe,In,!1)}function bd(e,n,a){var o=rt;rt|=2;var d=Bp(),f=qp();(gt!==e||Qe!==n)&&(Oc=null,Ni(e,n)),n=!1;var b=wt;e:do try{if(ct!==0&&Fe!==null){var E=Fe,O=Mn;switch(ct){case 8:xd(),b=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(n=!0);var H=ct;if(ct=0,Mn=null,Ei(e,E,O,H),a&&bi){b=0;break e}break;default:H=ct,ct=0,Mn=null,Ei(e,E,O,H)}}b_(),b=wt;break}catch(ee){Lp(e,ee)}while(!0);return n&&e.shellSuspendCounter++,$s=_r=null,rt=o,G.H=d,G.A=f,Fe===null&&(gt=null,Qe=0,nc()),b}function b_(){for(;Fe!==null;)Hp(Fe)}function v_(e,n){var a=rt;rt|=2;var o=Bp(),d=qp();gt!==e||Qe!==n?(Oc=null,Ic=Jt()+500,Ni(e,n)):bi=Jn(e,n);e:do try{if(ct!==0&&Fe!==null){n=Fe;var f=Mn;t:switch(ct){case 1:ct=0,Mn=null,Ei(e,n,f,1);break;case 2:case 9:if(Wm(f)){ct=0,Mn=null,Gp(n);break}n=function(){ct!==2&&ct!==9||gt!==e||(ct=7),Ms(e)},f.then(n,n);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Wm(f)?(ct=0,Mn=null,Gp(n)):(ct=0,Mn=null,Ei(e,n,f,7));break;case 5:var b=null;switch(Fe.tag){case 26:b=Fe.memoizedState;case 5:case 27:var E=Fe;if(b?Cy(b):E.stateNode.complete){ct=0,Mn=null;var O=E.sibling;if(O!==null)Fe=O;else{var H=E.return;H!==null?(Fe=H,zc(H)):Fe=null}break t}}ct=0,Mn=null,Ei(e,n,f,5);break;case 6:ct=0,Mn=null,Ei(e,n,f,6);break;case 8:xd(),wt=6;break e;default:throw Error(i(462))}}__();break}catch(ee){Lp(e,ee)}while(!0);return $s=_r=null,G.H=o,G.A=d,rt=a,Fe!==null?0:(gt=null,Qe=0,nc(),wt)}function __(){for(;Fe!==null&&!it();)Hp(Fe)}function Hp(e){var n=fp(e.alternate,e,na);e.memoizedProps=e.pendingProps,n===null?zc(e):Fe=n}function Gp(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=lp(a,n,n.pendingProps,n.type,void 0,Qe);break;case 11:n=lp(a,n,n.pendingProps,n.type.render,n.ref,Qe);break;case 5:Oh(n);default:gp(a,n),n=Fe=qm(n,na),n=fp(a,n,na)}e.memoizedProps=e.pendingProps,n===null?zc(e):Fe=n}function Ei(e,n,a,o){$s=_r=null,Oh(n),di=null,wl=0;var d=n.return;try{if(c_(e,d,n,a,Qe)){wt=1,wc(e,Hn(a,e.current)),Fe=null;return}}catch(f){if(d!==null)throw Fe=d,f;wt=1,wc(e,Hn(a,e.current)),Fe=null;return}n.flags&32768?(Je||o===1?e=!0:bi||(Qe&536870912)!==0?e=!1:(Ca=e=!0,(o===2||o===9||o===3||o===6)&&(o=Rn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Fp(n,e)):zc(n)}function zc(e){var n=e;do{if((n.flags&32768)!==0){Fp(n,Ca);return}e=n.return;var a=d_(n.alternate,n,na);if(a!==null){Fe=a;return}if(n=n.sibling,n!==null){Fe=n;return}Fe=n=e}while(n!==null);wt===0&&(wt=5)}function Fp(e,n){do{var a=f_(e.alternate,e);if(a!==null){a.flags&=32767,Fe=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Fe=e;return}Fe=e=a}while(e!==null);wt=6,Fe=null}function $p(e,n,a,o,d,f,b,E,O){e.cancelPendingCommit=null;do Uc();while($t!==0);if((rt&6)!==0)throw Error(i(327));if(n!==null){if(n===e.current)throw Error(i(177));if(f=n.lanes|n.childLanes,f|=lh,Ju(e,a,f,b,E,O),e===gt&&(Fe=gt=null,Qe=0),_i=n,Ma=e,sa=a,gd=f,pd=d,Vp=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,j_(ca,function(){return Zp(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,d=$.p,$.p=2,b=rt,rt|=4;try{m_(e,n,a)}finally{rt=b,$.p=d,G.T=o}}$t=1,Yp(),Qp(),Kp()}}function Yp(){if($t===1){$t=0;var e=Ma,n=_i,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=$.p;$.p=2;var d=rt;rt|=4;try{Sp(n,e);var f=Dd,b=Im(e.containerInfo),E=f.focusedElem,O=f.selectionRange;if(b!==E&&E&&E.ownerDocument&&Mm(E.ownerDocument.documentElement,E)){if(O!==null&&nh(E)){var H=O.start,ee=O.end;if(ee===void 0&&(ee=H),"selectionStart"in E)E.selectionStart=H,E.selectionEnd=Math.min(ee,E.value.length);else{var ie=E.ownerDocument||document,F=ie&&ie.defaultView||window;if(F.getSelection){var X=F.getSelection(),Ne=E.textContent.length,Ie=Math.min(O.start,Ne),mt=O.end===void 0?Ie:Math.min(O.end,Ne);!X.extend&&Ie>mt&&(b=mt,mt=Ie,Ie=b);var U=Dm(E,Ie),k=Dm(E,mt);if(U&&k&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==k.node||X.focusOffset!==k.offset)){var q=ie.createRange();q.setStart(U.node,U.offset),X.removeAllRanges(),Ie>mt?(X.addRange(q),X.extend(k.node,k.offset)):(q.setEnd(k.node,k.offset),X.addRange(q))}}}}for(ie=[],X=E;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ie.length;E++){var ae=ie[E];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Xc=!!Rd,Dd=Rd=null}finally{rt=d,$.p=o,G.T=a}}e.current=n,$t=2}}function Qp(){if($t===2){$t=0;var e=Ma,n=_i,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=$.p;$.p=2;var d=rt;rt|=4;try{Np(e,n.alternate,n)}finally{rt=d,$.p=o,G.T=a}}$t=3}}function Kp(){if($t===4||$t===3){$t=0,fn();var e=Ma,n=_i,a=sa,o=Vp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?$t=5:($t=0,_i=Ma=null,Xp(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Da=null),Ps(a),n=n.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Zn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=G.T,d=$.p,$.p=2,G.T=null;try{for(var f=e.onRecoverableError,b=0;b<o.length;b++){var E=o[b];f(E.value,{componentStack:E.stack})}}finally{G.T=n,$.p=d}}(sa&3)!==0&&Uc(),Ms(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===yd?Bl++:(Bl=0,yd=e):Bl=0,ql(0)}}function Xp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Nl(n)))}function Uc(){return Yp(),Qp(),Kp(),Zp()}function Zp(){if($t!==5)return!1;var e=Ma,n=gd;gd=0;var a=Ps(sa),o=G.T,d=$.p;try{$.p=32>a?32:a,G.T=null,a=pd,pd=null;var f=Ma,b=sa;if($t=0,_i=Ma=null,sa=0,(rt&6)!==0)throw Error(i(331));var E=rt;if(rt|=4,Mp(f.current),Cp(f,f.current,b,a),rt=E,ql(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Zn,f)}catch{}return!0}finally{$.p=d,G.T=o,Xp(e,n)}}function Jp(e,n,a){n=Hn(a,n),n=Kh(e.stateNode,n,2),e=ja(e,n,2),e!==null&&(ar(e,2),Ms(e))}function ut(e,n,a){if(e.tag===3)Jp(e,e,a);else for(;n!==null;){if(n.tag===3){Jp(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Da===null||!Da.has(o))){e=Hn(a,e),a=Wg(2),o=ja(n,a,2),o!==null&&(ep(a,o,n,e),ar(o,2),Ms(o));break}}n=n.return}}function vd(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new y_;var d=new Set;o.set(n,d)}else d=o.get(n),d===void 0&&(d=new Set,o.set(n,d));d.has(a)||(dd=!0,d.add(a),e=N_.bind(null,e,n,a),n.then(e,e))}function N_(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,gt===e&&(Qe&a)===a&&(wt===4||wt===3&&(Qe&62914560)===Qe&&300>Jt()-Mc?(rt&2)===0&&Ni(e,0):fd|=a,vi===Qe&&(vi=0)),Ms(e)}function Wp(e,n){n===0&&(n=Oo()),e=xr(e,n),e!==null&&(ar(e,n),Ms(e))}function E_(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Wp(e,a)}function w_(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),Wp(e,a)}function j_(e,n){return Q(e,n)}var Lc=null,wi=null,_d=!1,Pc=!1,Nd=!1,Oa=0;function Ms(e){e!==wi&&e.next===null&&(wi===null?Lc=wi=e:wi=wi.next=e),Pc=!0,_d||(_d=!0,S_())}function ql(e,n){if(!Nd&&Pc){Nd=!0;do for(var a=!1,o=Lc;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var f=0;else{var b=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-St(42|e)+1)-1,f&=d&~(b&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,sy(o,f))}else f=Qe,f=ms(o,o===gt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Jn(o,f)||(a=!0,sy(o,f));o=o.next}while(a);Nd=!1}}function T_(){ey()}function ey(){Pc=_d=!1;var e=0;Oa!==0&&z_()&&(e=Oa);for(var n=Jt(),a=null,o=Lc;o!==null;){var d=o.next,f=ty(o,n);f===0?(o.next=null,a===null?Lc=d:a.next=d,d===null&&(wi=a)):(a=o,(e!==0||(f&3)!==0)&&(Pc=!0)),o=d}$t!==0&&$t!==5||ql(e),Oa!==0&&(Oa=0)}function ty(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-St(f),E=1<<b,O=d[b];O===-1?((E&a)===0||(E&o)!==0)&&(d[b]=Zu(E,n)):O<=n&&(e.expiredLanes|=E),f&=~E}if(n=gt,a=Qe,a=ms(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(ct===2||ct===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&we(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Jn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&we(o),Ps(a)){case 2:case 8:a=Ji;break;case 32:a=ca;break;case 268435456:a=Co;break;default:a=ca}return o=ny.bind(null,e),a=Q(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&we(o),e.callbackPriority=2,e.callbackNode=null,2}function ny(e,n){if($t!==0&&$t!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Uc()&&e.callbackNode!==a)return null;var o=Qe;return o=ms(e,e===gt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(zp(e,o,n),ty(e,Jt()),e.callbackNode!=null&&e.callbackNode===a?ny.bind(null,e):null)}function sy(e,n){if(Uc())return null;zp(e,n,!0)}function S_(){L_(function(){(rt&6)!==0?Q(Zi,T_):ey()})}function Ed(){if(Oa===0){var e=ci;e===0&&(e=ds,ds<<=1,(ds&261888)===0&&(ds=256)),Oa=e}return Oa}function ay(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qr(""+e)}function ry(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function A_(e,n,a,o,d){if(n==="submit"&&a&&a.stateNode===d){var f=ay((d[Qt]||null).action),b=o.submitter;b&&(n=(n=b[Qt]||null)?ay(n.formAction):b.getAttribute("formAction"),n!==null&&(f=n,b=null));var E=new js("action","action",null,o,d);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Oa!==0){var O=b?ry(d,b):new FormData(d);Hh(a,{pending:!0,data:O,method:d.method,action:f},null,O)}}else typeof f=="function"&&(E.preventDefault(),O=b?ry(d,b):new FormData(d),Hh(a,{pending:!0,data:O,method:d.method,action:f},f,O))},currentTarget:d}]})}}for(var wd=0;wd<ih.length;wd++){var jd=ih[wd],C_=jd.toLowerCase(),R_=jd[0].toUpperCase()+jd.slice(1);is(C_,"on"+R_)}is(km,"onAnimationEnd"),is(zm,"onAnimationIteration"),is(Um,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is($v,"onTransitionRun"),is(Yv,"onTransitionStart"),is(Qv,"onTransitionCancel"),is(Lm,"onTransitionEnd"),_s("onMouseEnter",["mouseout","mouseover"]),_s("onMouseLeave",["mouseout","mouseover"]),_s("onPointerEnter",["pointerout","pointerover"]),_s("onPointerLeave",["pointerout","pointerover"]),vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vs("onBeforeInput",["compositionend","keypress","textInput","paste"]),vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hl));function iy(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],d=o.event;o=o.listeners;e:{var f=void 0;if(n)for(var b=o.length-1;0<=b;b--){var E=o[b],O=E.instance,H=E.currentTarget;if(E=E.listener,O!==f&&d.isPropagationStopped())break e;f=E,d.currentTarget=H;try{f(d)}catch(ee){tc(ee)}d.currentTarget=null,f=O}else for(b=0;b<o.length;b++){if(E=o[b],O=E.instance,H=E.currentTarget,E=E.listener,O!==f&&d.isPropagationStopped())break e;f=E,d.currentTarget=H;try{f(d)}catch(ee){tc(ee)}d.currentTarget=null,f=O}}}}function $e(e,n){var a=n[Hr];a===void 0&&(a=n[Hr]=new Set);var o=e+"__bubble";a.has(o)||(ly(n,e,2,!1),a.add(o))}function Td(e,n,a){var o=0;n&&(o|=4),ly(a,e,o,n)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Sd(e){if(!e[Bc]){e[Bc]=!0,tl.forEach(function(a){a!=="selectionchange"&&(D_.has(a)||Td(a,!1,e),Td(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Bc]||(n[Bc]=!0,Td("selectionchange",!1,n))}}function ly(e,n,a,o){switch(ky(n)){case 2:var d=r1;break;case 8:d=i1;break;default:d=qd}a=d.bind(null,n,a,e),d=void 0,!ur||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(n,a,{capture:!0,passive:d}):e.addEventListener(n,a,!0):d!==void 0?e.addEventListener(n,a,{passive:d}):e.addEventListener(n,a,!1)}function Ad(e,n,a,o,d){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var E=o.stateNode.containerInfo;if(E===d)break;if(b===4)for(b=o.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;E!==null;){if(b=xs(E),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){o=f=b;continue e}E=E.parentNode}}o=o.return}ga(function(){var H=f,ee=Ln(a),ie=[];e:{var F=Pm.get(e);if(F!==void 0){var X=js,Ne=e;switch(e){case"keypress":if(dr(a)===0)break e;case"keydown":case"keyup":X=Jo;break;case"focusin":Ne="focus",X=mr;break;case"focusout":Ne="blur",X=mr;break;case"beforeblur":case"afterblur":X=mr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Ho;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case km:case zm:case Um:X=Fo;break;case Lm:X=w;break;case"scroll":case"scrollend":X=fl;break;case"wheel":X=K;break;case"copy":case"cut":case"paste":X=$o;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Hs;break;case"toggle":case"beforetoggle":X=Be}var Ie=(n&4)!==0,mt=!Ie&&(e==="scroll"||e==="scrollend"),U=Ie?F!==null?F+"Capture":null:F;Ie=[];for(var k=H,q;k!==null;){var ae=k;if(q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||q===null||U===null||(ae=ns(k,U),ae!=null&&Ie.push(Gl(k,ae,q))),mt)break;k=k.return}0<Ie.length&&(F=new X(F,Ne,null,a,ee),ie.push({event:F,listeners:Ie}))}}if((n&7)===0){e:{if(F=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",F&&a!==ul&&(Ne=a.relatedTarget||a.fromElement)&&(xs(Ne)||Ne[ps]))break e;if((X||F)&&(F=ee.window===ee?ee:(F=ee.ownerDocument)?F.defaultView||F.parentWindow:window,X?(Ne=a.relatedTarget||a.toElement,X=H,Ne=Ne?xs(Ne):null,Ne!==null&&(mt=u(Ne),Ie=Ne.tag,Ne!==mt||Ie!==5&&Ie!==27&&Ie!==6)&&(Ne=null)):(X=null,Ne=H),X!==Ne)){if(Ie=ml,ae="onMouseLeave",U="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(Ie=Hs,ae="onPointerLeave",U="onPointerEnter",k="pointer"),mt=X==null?F:Tn(X),q=Ne==null?F:Tn(Ne),F=new Ie(ae,k+"leave",X,a,ee),F.target=mt,F.relatedTarget=q,ae=null,xs(ee)===H&&(Ie=new Ie(U,k+"enter",Ne,a,ee),Ie.target=q,Ie.relatedTarget=mt,ae=Ie),mt=ae,X&&Ne)t:{for(Ie=M_,U=X,k=Ne,q=0,ae=U;ae;ae=Ie(ae))q++;ae=0;for(var Re=k;Re;Re=Ie(Re))ae++;for(;0<q-ae;)U=Ie(U),q--;for(;0<ae-q;)k=Ie(k),ae--;for(;q--;){if(U===k||k!==null&&U===k.alternate){Ie=U;break t}U=Ie(U),k=Ie(k)}Ie=null}else Ie=null;X!==null&&oy(ie,F,X,Ie,!1),Ne!==null&&mt!==null&&oy(ie,mt,Ne,Ie,!0)}}e:{if(F=H?Tn(H):window,X=F.nodeName&&F.nodeName.toLowerCase(),X==="select"||X==="input"&&F.type==="file")var nt=jm;else if(Em(F))if(Tm)nt=Hv;else{nt=Bv;var je=Pv}else X=F.nodeName,!X||X.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&Yr(H.elementType)&&(nt=jm):nt=qv;if(nt&&(nt=nt(e,H))){wm(ie,nt,a,ee);break e}je&&je(e,F,H),e==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&ll(F,"number",F.value)}switch(je=H?Tn(H):window,e){case"focusin":(Em(je)||je.contentEditable==="true")&&(ti=je,sh=H,bl=null);break;case"focusout":bl=sh=ti=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,Om(ie,a,ee);break;case"selectionchange":if(Fv)break;case"keydown":case"keyup":Om(ie,a,ee)}var Ge;if(at)e:{switch(e){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else ei?gr(e,a)&&(Ke="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ke="onCompositionStart");Ke&&(As&&a.locale!=="ko"&&(ei||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&ei&&(Ge=dl()):(ws=ee,hl="value"in ws?ws.value:ws.textContent,ei=!0)),je=qc(H,Ke),0<je.length&&(Ke=new Ss(Ke,e,null,a,ee),ie.push({event:Ke,listeners:je}),Ge?Ke.data=Ge:(Ge=Wr(a),Ge!==null&&(Ke.data=Ge)))),(Ge=Bn?kv(e,a):zv(e,a))&&(Ke=qc(H,"onBeforeInput"),0<Ke.length&&(je=new Ss("onBeforeInput","beforeinput",null,a,ee),ie.push({event:je,listeners:Ke}),je.data=Ge)),A_(ie,e,H,a,ee)}iy(ie,n)})}function Gl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function qc(e,n){for(var a=n+"Capture",o=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=ns(e,a),d!=null&&o.unshift(Gl(e,d,f)),d=ns(e,n),d!=null&&o.push(Gl(e,d,f))),e.tag===3)return o;e=e.return}return[]}function M_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function oy(e,n,a,o,d){for(var f=n._reactName,b=[];a!==null&&a!==o;){var E=a,O=E.alternate,H=E.stateNode;if(E=E.tag,O!==null&&O===o)break;E!==5&&E!==26&&E!==27||H===null||(O=H,d?(H=ns(a,f),H!=null&&b.unshift(Gl(a,H,O))):d||(H=ns(a,f),H!=null&&b.push(Gl(a,H,O)))),a=a.return}b.length!==0&&e.push({event:n,listeners:b})}var I_=/\r\n?/g,O_=/\u0000|\uFFFD/g;function cy(e){return(typeof e=="string"?e:""+e).replace(I_,`
`).replace(O_,"")}function uy(e,n){return n=cy(n),cy(e)===n}function ft(e,n,a,o,d,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||yn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&yn(e,""+o);break;case"className":Sn(e,"class",o);break;case"tabIndex":Sn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(e,a,o);break;case"style":cl(e,o,f);break;case"data":if(n!=="object"){Sn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Qr(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&ft(e,n,"name",d.name,d,null),ft(e,n,"formEncType",d.formEncType,d,null),ft(e,n,"formMethod",d.formMethod,d,null),ft(e,n,"formTarget",d.formTarget,d,null)):(ft(e,n,"encType",d.encType,d,null),ft(e,n,"method",d.method,d,null),ft(e,n,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Qr(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=ts);break;case"onScroll":o!=null&&$e("scroll",e);break;case"onScrollEnd":o!=null&&$e("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Qr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":$e("beforetoggle",e),$e("toggle",e),Fr(e,"popover",o);break;case"xlinkActuate":zt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":zt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":zt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":zt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":zt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":zt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":zt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":zt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":zt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Fr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qo.get(a)||a,Fr(e,a,o))}}function Cd(e,n,a,o,d,f){switch(a){case"style":cl(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof o=="string"?yn(e,o):(typeof o=="number"||typeof o=="bigint")&&yn(e,""+o);break;case"onScroll":o!=null&&$e("scroll",e);break;case"onScrollEnd":o!=null&&$e("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),n=a.slice(2,d?a.length-7:void 0),f=e[Qt]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,d),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,d);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Fr(e,a,o)}}}function an(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",e),$e("load",e);var o=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ft(e,n,f,b,a,null)}}d&&ft(e,n,"srcSet",a.srcSet,a,null),o&&ft(e,n,"src",a.src,a,null);return;case"input":$e("invalid",e);var E=f=b=d=null,O=null,H=null;for(o in a)if(a.hasOwnProperty(o)){var ee=a[o];if(ee!=null)switch(o){case"name":d=ee;break;case"type":b=ee;break;case"checked":O=ee;break;case"defaultChecked":H=ee;break;case"value":f=ee;break;case"defaultValue":E=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,n));break;default:ft(e,n,o,ee,a,null)}}Lo(e,f,E,O,H,b,d,!1);return;case"select":$e("invalid",e),o=b=f=null;for(d in a)if(a.hasOwnProperty(d)&&(E=a[d],E!=null))switch(d){case"value":f=E;break;case"defaultValue":b=E;break;case"multiple":o=E;default:ft(e,n,d,E,a,null)}n=f,a=b,e.multiple=!!o,n!=null?ha(e,!!o,n,!1):a!=null&&ha(e,!!o,a,!0);return;case"textarea":$e("invalid",e),f=d=o=null;for(b in a)if(a.hasOwnProperty(b)&&(E=a[b],E!=null))switch(b){case"value":o=E;break;case"defaultValue":d=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:ft(e,n,b,E,a,null)}da(e,o,d,f);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(o=a[O],o!=null))switch(O){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ft(e,n,O,o,a,null)}return;case"dialog":$e("beforetoggle",e),$e("toggle",e),$e("cancel",e),$e("close",e);break;case"iframe":case"object":$e("load",e);break;case"video":case"audio":for(o=0;o<Hl.length;o++)$e(Hl[o],e);break;case"image":$e("error",e),$e("load",e);break;case"details":$e("toggle",e);break;case"embed":case"source":case"link":$e("error",e),$e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(o=a[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ft(e,n,H,o,a,null)}return;default:if(Yr(n)){for(ee in a)a.hasOwnProperty(ee)&&(o=a[ee],o!==void 0&&Cd(e,n,ee,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&ft(e,n,E,o,a,null))}function V_(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,b=null,E=null,O=null,H=null,ee=null;for(X in a){var ie=a[X];if(a.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=ie;default:o.hasOwnProperty(X)||ft(e,n,X,null,o,ie)}}for(var F in o){var X=o[F];if(ie=a[F],o.hasOwnProperty(F)&&(X!=null||ie!=null))switch(F){case"type":f=X;break;case"name":d=X;break;case"checked":H=X;break;case"defaultChecked":ee=X;break;case"value":b=X;break;case"defaultValue":E=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,n));break;default:X!==ie&&ft(e,n,F,X,o,ie)}}$r(e,b,E,O,H,ee,f,d);return;case"select":X=b=E=F=null;for(f in a)if(O=a[f],a.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":X=O;default:o.hasOwnProperty(f)||ft(e,n,f,null,o,O)}for(d in o)if(f=o[d],O=a[d],o.hasOwnProperty(d)&&(f!=null||O!=null))switch(d){case"value":F=f;break;case"defaultValue":E=f;break;case"multiple":b=f;default:f!==O&&ft(e,n,d,f,o,O)}n=E,a=b,o=X,F!=null?ha(e,!!a,F,!1):!!o!=!!a&&(n!=null?ha(e,!!a,n,!0):ha(e,!!a,a?[]:"",!1));return;case"textarea":X=F=null;for(E in a)if(d=a[E],a.hasOwnProperty(E)&&d!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ft(e,n,E,null,o,d)}for(b in o)if(d=o[b],f=a[b],o.hasOwnProperty(b)&&(d!=null||f!=null))switch(b){case"value":F=d;break;case"defaultValue":X=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==f&&ft(e,n,b,d,o,f)}Po(e,F,X);return;case"option":for(var Ne in a)if(F=a[Ne],a.hasOwnProperty(Ne)&&F!=null&&!o.hasOwnProperty(Ne))switch(Ne){case"selected":e.selected=!1;break;default:ft(e,n,Ne,null,o,F)}for(O in o)if(F=o[O],X=a[O],o.hasOwnProperty(O)&&F!==X&&(F!=null||X!=null))switch(O){case"selected":e.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:ft(e,n,O,F,o,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)F=a[Ie],a.hasOwnProperty(Ie)&&F!=null&&!o.hasOwnProperty(Ie)&&ft(e,n,Ie,null,o,F);for(H in o)if(F=o[H],X=a[H],o.hasOwnProperty(H)&&F!==X&&(F!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,n));break;default:ft(e,n,H,F,o,X)}return;default:if(Yr(n)){for(var mt in a)F=a[mt],a.hasOwnProperty(mt)&&F!==void 0&&!o.hasOwnProperty(mt)&&Cd(e,n,mt,void 0,o,F);for(ee in o)F=o[ee],X=a[ee],!o.hasOwnProperty(ee)||F===X||F===void 0&&X===void 0||Cd(e,n,ee,F,o,X);return}}for(var U in a)F=a[U],a.hasOwnProperty(U)&&F!=null&&!o.hasOwnProperty(U)&&ft(e,n,U,null,o,F);for(ie in o)F=o[ie],X=a[ie],!o.hasOwnProperty(ie)||F===X||F==null&&X==null||ft(e,n,ie,F,o,X)}function hy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var d=a[o],f=d.transferSize,b=d.initiatorType,E=d.duration;if(f&&E&&hy(b)){for(b=0,E=d.responseEnd,o+=1;o<a.length;o++){var O=a[o],H=O.startTime;if(H>E)break;var ee=O.transferSize,ie=O.initiatorType;ee&&hy(ie)&&(O=O.responseEnd,b+=ee*(O<E?1:(E-H)/(O-H)))}if(--o,n+=8*(f+b)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Rd=null,Dd=null;function Hc(e){return e.nodeType===9?e:e.ownerDocument}function dy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Md(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Id=null;function z_(){var e=window.event;return e&&e.type==="popstate"?e===Id?!1:(Id=e,!0):(Id=null,!1)}var my=typeof setTimeout=="function"?setTimeout:void 0,U_=typeof clearTimeout=="function"?clearTimeout:void 0,gy=typeof Promise=="function"?Promise:void 0,L_=typeof queueMicrotask=="function"?queueMicrotask:typeof gy<"u"?function(e){return gy.resolve(null).then(e).catch(P_)}:my;function P_(e){setTimeout(function(){throw e})}function Va(e){return e==="head"}function py(e,n){var a=n,o=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(d),Ai(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Fl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Fl(a);for(var f=a.firstChild;f;){var b=f.nextSibling,E=f.nodeName;f[ys]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=b}}else a==="body"&&Fl(e.ownerDocument.body);a=d}while(a);Ai(n)}function yy(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Od(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Od(a),Gr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function B_(e,n,a,o){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ys])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Qn(e.nextSibling),e===null)break}return null}function q_(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qn(e.nextSibling),e===null))return null;return e}function xy(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Qn(e.nextSibling),e===null))return null;return e}function Vd(e){return e.data==="$?"||e.data==="$~"}function kd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function H_(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Qn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var zd=null;function by(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Qn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function vy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function _y(e,n,a){switch(n=Hc(a),e){case"html":if(e=n.documentElement,!e)throw Error(i(452));return e;case"head":if(e=n.head,!e)throw Error(i(453));return e;case"body":if(e=n.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Fl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Gr(e)}var Kn=new Map,Ny=new Set;function Gc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var aa=$.d;$.d={f:G_,r:F_,D:$_,C:Y_,L:Q_,m:K_,X:Z_,S:X_,M:J_};function G_(){var e=aa.f(),n=Vc();return e||n}function F_(e){var n=Un(e);n!==null&&n.tag===5&&n.type==="form"?Lg(n):aa.r(e)}var ji=typeof document>"u"?null:document;function Ey(e,n,a){var o=ji;if(o&&typeof n=="string"&&n){var d=pn(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Ny.has(d)||(Ny.add(d),e={rel:e,crossOrigin:a,href:n},o.querySelector(d)===null&&(n=o.createElement("link"),an(n,"link",e),kt(n),o.head.appendChild(n)))}}function $_(e){aa.D(e),Ey("dns-prefetch",e,null)}function Y_(e,n){aa.C(e,n),Ey("preconnect",e,n)}function Q_(e,n,a){aa.L(e,n,a);var o=ji;if(o&&e&&n){var d='link[rel="preload"][as="'+pn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+pn(a.imageSizes)+'"]')):d+='[href="'+pn(e)+'"]';var f=d;switch(n){case"style":f=Ti(e);break;case"script":f=Si(e)}Kn.has(f)||(e=N({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Kn.set(f,e),o.querySelector(d)!==null||n==="style"&&o.querySelector($l(f))||n==="script"&&o.querySelector(Yl(f))||(n=o.createElement("link"),an(n,"link",e),kt(n),o.head.appendChild(n)))}}function K_(e,n){aa.m(e,n);var a=ji;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+pn(o)+'"][href="'+pn(e)+'"]',f=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Si(e)}if(!Kn.has(f)&&(e=N({rel:"modulepreload",href:e},n),Kn.set(f,e),a.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Yl(f)))return}o=a.createElement("link"),an(o,"link",e),kt(o),a.head.appendChild(o)}}}function X_(e,n,a){aa.S(e,n,a);var o=ji;if(o&&e){var d=bs(o).hoistableStyles,f=Ti(e);n=n||"default";var b=d.get(f);if(!b){var E={loading:0,preload:null};if(b=o.querySelector($l(f)))E.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Kn.get(f))&&Ud(e,a);var O=b=o.createElement("link");kt(O),an(O,"link",e),O._p=new Promise(function(H,ee){O.onload=H,O.onerror=ee}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Fc(b,n,o)}b={type:"stylesheet",instance:b,count:1,state:E},d.set(f,b)}}}function Z_(e,n){aa.X(e,n);var a=ji;if(a&&e){var o=bs(a).hoistableScripts,d=Si(e),f=o.get(d);f||(f=a.querySelector(Yl(d)),f||(e=N({src:e,async:!0},n),(n=Kn.get(d))&&Ld(e,n),f=a.createElement("script"),kt(f),an(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function J_(e,n){aa.M(e,n);var a=ji;if(a&&e){var o=bs(a).hoistableScripts,d=Si(e),f=o.get(d);f||(f=a.querySelector(Yl(d)),f||(e=N({src:e,async:!0,type:"module"},n),(n=Kn.get(d))&&Ld(e,n),f=a.createElement("script"),kt(f),an(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function wy(e,n,a,o){var d=(d=Te.current)?Gc(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ti(a.href),a=bs(d).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ti(a.href);var f=bs(d).hoistableStyles,b=f.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=d.querySelector($l(e)))&&!f._p&&(b.instance=f,b.state.loading=5),Kn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(e,a),f||W_(d,e,a,b.state))),n&&o===null)throw Error(i(528,""));return b}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Si(a),a=bs(d).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Ti(e){return'href="'+pn(e)+'"'}function $l(e){return'link[rel="stylesheet"]['+e+"]"}function jy(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function W_(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),an(n,"link",a),kt(n),e.head.appendChild(n))}function Si(e){return'[src="'+pn(e)+'"]'}function Yl(e){return"script[async]"+e}function Ty(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+pn(a.href)+'"]');if(o)return n.instance=o,kt(o),o;var d=N({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),kt(o),an(o,"style",d),Fc(o,a.precedence,e),n.instance=o;case"stylesheet":d=Ti(a.href);var f=e.querySelector($l(d));if(f)return n.state.loading|=4,n.instance=f,kt(f),f;o=jy(a),(d=Kn.get(d))&&Ud(o,d),f=(e.ownerDocument||e).createElement("link"),kt(f);var b=f;return b._p=new Promise(function(E,O){b.onload=E,b.onerror=O}),an(f,"link",o),n.state.loading|=4,Fc(f,a.precedence,e),n.instance=f;case"script":return f=Si(a.src),(d=e.querySelector(Yl(f)))?(n.instance=d,kt(d),d):(o=a,(d=Kn.get(f))&&(o=N({},a),Ld(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),kt(d),an(d,"link",o),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Fc(o,a.precedence,e));return n.instance}function Fc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,f=d,b=0;b<o.length;b++){var E=o[b];if(E.dataset.precedence===n)f=E;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Ld(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var $c=null;function Sy(e,n,a){if($c===null){var o=new Map,d=$c=new Map;d.set(a,o)}else d=$c,o=d.get(a),o||(o=new Map,d.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var f=a[d];if(!(f[ys]||f[Vt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(n)||"";b=e+b;var E=o.get(b);E?E.push(f):o.set(b,[f])}}return o}function Ay(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function e1(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Cy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function t1(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Ti(o.href),f=n.querySelector($l(d));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Yc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=f,kt(f);return}f=n.ownerDocument||n,o=jy(o),(d=Kn.get(d))&&Ud(o,d),f=f.createElement("link"),kt(f);var b=f;b._p=new Promise(function(E,O){b.onload=E,b.onerror=O}),an(f,"link",o),a.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Yc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Pd=0;function n1(e,n){return e.stylesheets&&e.count===0&&Kc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&Kc(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&Pd===0&&(Pd=62500*k_());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Kc(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Pd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Yc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qc=null;function Kc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qc=new Map,n.forEach(s1,e),Qc=null,Yc.call(e))}function s1(e,n){if(!(n.state.loading&4)){var a=Qc.get(e);if(a)var o=a.get(null);else{a=new Map,Qc.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var b=d[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),o=b)}o&&a.set(null,o)}d=n.instance,b=d.getAttribute("data-precedence"),f=a.get(b)||o,f===o&&a.set(null,d),a.set(b,d),this.count++,o=Yc.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Ql={$$typeof:te,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function a1(e,n,a,o,d,f,b,E,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gs(0),this.hiddenUpdates=gs(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Ry(e,n,a,o,d,f,b,E,O,H,ee,ie){return e=new a1(e,n,a,b,O,H,ee,ie,E),n=1,f===!0&&(n|=24),f=Cn(3,null,null,n),e.current=f,f.stateNode=e,n=bh(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},Eh(f),e}function Dy(e){return e?(e=ai,e):ai}function My(e,n,a,o,d,f){d=Dy(d),o.context===null?o.context=d:o.pendingContext=d,o=wa(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=ja(e,o,n),a!==null&&(Nn(a,e,n),Tl(a,e,n))}function Iy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Bd(e,n){Iy(e,n),(e=e.alternate)&&Iy(e,n)}function Oy(e){if(e.tag===13||e.tag===31){var n=xr(e,67108864);n!==null&&Nn(n,e,67108864),Bd(e,67108864)}}function Vy(e){if(e.tag===13||e.tag===31){var n=On();n=ir(n);var a=xr(e,n);a!==null&&Nn(a,e,n),Bd(e,n)}}var Xc=!0;function r1(e,n,a,o){var d=G.T;G.T=null;var f=$.p;try{$.p=2,qd(e,n,a,o)}finally{$.p=f,G.T=d}}function i1(e,n,a,o){var d=G.T;G.T=null;var f=$.p;try{$.p=8,qd(e,n,a,o)}finally{$.p=f,G.T=d}}function qd(e,n,a,o){if(Xc){var d=Hd(o);if(d===null)Ad(e,n,o,Zc,a),zy(e,o);else if(o1(d,e,n,a,o))o.stopPropagation();else if(zy(e,o),n&4&&-1<l1.indexOf(e)){for(;d!==null;){var f=Un(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=fs(f.pendingLanes);if(b!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var O=1<<31-St(b);E.entanglements[1]|=O,b&=~O}Ms(f),(rt&6)===0&&(Ic=Jt()+500,ql(0))}}break;case 31:case 13:E=xr(f,2),E!==null&&Nn(E,f,2),Vc(),Bd(f,2)}if(f=Hd(o),f===null&&Ad(e,n,o,Zc,a),f===d)break;d=f}d!==null&&o.stopPropagation()}else Ad(e,n,o,null,a)}}function Hd(e){return e=Ln(e),Gd(e)}var Zc=null;function Gd(e){if(Zc=null,e=xs(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=m(n),e!==null)return e;e=null}else if(a===31){if(e=x(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Zc=e,null}function ky(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nr()){case Zi:return 2;case Ji:return 8;case ca:case Xu:return 32;case Co:return 268435456;default:return 32}default:return 32}}var Fd=!1,ka=null,za=null,Ua=null,Kl=new Map,Xl=new Map,La=[],l1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zy(e,n){switch(e){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ua=null;break;case"pointerover":case"pointerout":Kl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(n.pointerId)}}function Zl(e,n,a,o,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},n!==null&&(n=Un(n),n!==null&&Oy(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function o1(e,n,a,o,d){switch(n){case"focusin":return ka=Zl(ka,e,n,a,o,d),!0;case"dragenter":return za=Zl(za,e,n,a,o,d),!0;case"mouseover":return Ua=Zl(Ua,e,n,a,o,d),!0;case"pointerover":var f=d.pointerId;return Kl.set(f,Zl(Kl.get(f)||null,e,n,a,o,d)),!0;case"gotpointercapture":return f=d.pointerId,Xl.set(f,Zl(Xl.get(f)||null,e,n,a,o,d)),!0}return!1}function Uy(e){var n=xs(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=m(a),n!==null){e.blockedOn=n,Wn(e.priority,function(){Vy(a)});return}}else if(n===31){if(n=x(a),n!==null){e.blockedOn=n,Wn(e.priority,function(){Vy(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Hd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);ul=o,a.target.dispatchEvent(o),ul=null}else return n=Un(a),n!==null&&Oy(n),e.blockedOn=a,!1;n.shift()}return!0}function Ly(e,n,a){Jc(e)&&a.delete(n)}function c1(){Fd=!1,ka!==null&&Jc(ka)&&(ka=null),za!==null&&Jc(za)&&(za=null),Ua!==null&&Jc(Ua)&&(Ua=null),Kl.forEach(Ly),Xl.forEach(Ly)}function Wc(e,n){e.blockedOn===n&&(e.blockedOn=null,Fd||(Fd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,c1)))}var eu=null;function Py(e){eu!==e&&(eu=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){eu===e&&(eu=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],d=e[n+2];if(typeof o!="function"){if(Gd(o||a)===null)continue;break}var f=Un(a);f!==null&&(e.splice(n,3),n-=3,Hh(f,{pending:!0,data:d,method:a.method,action:o},o,d))}}))}function Ai(e){function n(O){return Wc(O,e)}ka!==null&&Wc(ka,e),za!==null&&Wc(za,e),Ua!==null&&Wc(Ua,e),Kl.forEach(n),Xl.forEach(n);for(var a=0;a<La.length;a++){var o=La[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<La.length&&(a=La[0],a.blockedOn===null);)Uy(a),a.blockedOn===null&&La.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var d=a[o],f=a[o+1],b=d[Qt]||null;if(typeof f=="function")b||Py(a);else if(b){var E=null;if(f&&f.hasAttribute("formAction")){if(d=f,b=f[Qt]||null)E=b.formAction;else if(Gd(d)!==null)continue}else E=b.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),Py(a)}}}function By(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function $d(e){this._internalRoot=e}tu.prototype.render=$d.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));var a=n.current,o=On();My(a,o,e,n,null,null)},tu.prototype.unmount=$d.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;My(e.current,2,null,e,null,null),Vc(),n[ps]=null}};function tu(e){this._internalRoot=e}tu.prototype.unstable_scheduleHydration=function(e){if(e){var n=Vo();e={blockedOn:null,target:e,priority:n};for(var a=0;a<La.length&&n!==0&&n<La[a].priority;a++);La.splice(a,0,e),a===0&&Uy(e)}};var qy=t.version;if(qy!=="19.2.4")throw Error(i(527,qy,"19.2.4"));$.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(n),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var u1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{Zn=nu.inject(u1),Wt=nu}catch{}}return Wl.createRoot=function(e,n){if(!c(e))throw Error(i(299));var a=!1,o="",d=Kg,f=Xg,b=Zg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError)),n=Ry(e,1,!1,null,null,a,o,null,d,f,b,By),e[ps]=n.current,Sd(e),new $d(n)},Wl.hydrateRoot=function(e,n,a){if(!c(e))throw Error(i(299));var o=!1,d="",f=Kg,b=Xg,E=Zg,O=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),n=Ry(e,1,!0,n,a??null,o,d,O,f,b,E,By),n.context=Dy(null),a=n.current,o=On(),o=ir(o),d=wa(o),d.callback=null,ja(a,d,o),a=o,n.current.lanes=a,ar(n,a),Ms(n),e[ps]=n.current,Sd(e),new tu(n)},Wl.version="19.2.4",Wl}var Jy;function v1(){if(Jy)return Kd.exports;Jy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Kd.exports=b1(),Kd.exports}var _1=v1();const N1=w0(_1);var E1=Object.defineProperty,mu=Object.getOwnPropertySymbols,j0=Object.prototype.hasOwnProperty,T0=Object.prototype.propertyIsEnumerable,Wy=(r,t,s)=>t in r?E1(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,hf=(r,t)=>{for(var s in t||(t={}))j0.call(t,s)&&Wy(r,s,t[s]);if(mu)for(var s of mu(t))T0.call(t,s)&&Wy(r,s,t[s]);return r},df=(r,t)=>{var s={};for(var i in r)j0.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&mu)for(var i of mu(r))t.indexOf(i)<0&&T0.call(r,i)&&(s[i]=r[i]);return s};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Or;(r=>{const t=class Ye{constructor(p,g,v,N){if(this.version=p,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],p<Ye.MIN_VERSION||p>Ye.MAX_VERSION)throw new RangeError("Version value out of range");if(N<-1||N>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let j=[];for(let L=0;L<this.size;L++)j.push(!1);for(let L=0;L<this.size;L++)this.modules.push(j.slice()),this.isFunction.push(j.slice());this.drawFunctionPatterns();const z=this.addEccAndInterleave(v);if(this.drawCodewords(z),N==-1){let L=1e9;for(let Z=0;Z<8;Z++){this.applyMask(Z),this.drawFormatBits(Z);const P=this.getPenaltyScore();P<L&&(N=Z,L=P),this.applyMask(Z)}}c(0<=N&&N<=7),this.mask=N,this.applyMask(N),this.drawFormatBits(N),this.isFunction=[]}static encodeText(p,g){const v=r.QrSegment.makeSegments(p);return Ye.encodeSegments(v,g)}static encodeBinary(p,g){const v=r.QrSegment.makeBytes(p);return Ye.encodeSegments([v],g)}static encodeSegments(p,g,v=1,N=40,j=-1,z=!0){if(!(Ye.MIN_VERSION<=v&&v<=N&&N<=Ye.MAX_VERSION)||j<-1||j>7)throw new RangeError("Invalid value");let L,Z;for(L=v;;L++){const te=Ye.getNumDataCodewords(L,g)*8,he=m.getTotalBits(p,L);if(he<=te){Z=he;break}if(L>=N)throw new RangeError("Data too long")}for(const te of[Ye.Ecc.MEDIUM,Ye.Ecc.QUARTILE,Ye.Ecc.HIGH])z&&Z<=Ye.getNumDataCodewords(L,te)*8&&(g=te);let P=[];for(const te of p){s(te.mode.modeBits,4,P),s(te.numChars,te.mode.numCharCountBits(L),P);for(const he of te.getData())P.push(he)}c(P.length==Z);const ge=Ye.getNumDataCodewords(L,g)*8;c(P.length<=ge),s(0,Math.min(4,ge-P.length),P),s(0,(8-P.length%8)%8,P),c(P.length%8==0);for(let te=236;P.length<ge;te^=253)s(te,8,P);let ce=[];for(;ce.length*8<P.length;)ce.push(0);return P.forEach((te,he)=>ce[he>>>3]|=te<<7-(he&7)),new Ye(L,g,ce,j)}getModule(p,g){return 0<=p&&p<this.size&&0<=g&&g<this.size&&this.modules[g][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),g=p.length;for(let v=0;v<g;v++)for(let N=0;N<g;N++)v==0&&N==0||v==0&&N==g-1||v==g-1&&N==0||this.drawAlignmentPattern(p[v],p[N]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const g=this.errorCorrectionLevel.formatBits<<3|p;let v=g;for(let j=0;j<10;j++)v=v<<1^(v>>>9)*1335;const N=(g<<10|v)^21522;c(N>>>15==0);for(let j=0;j<=5;j++)this.setFunctionModule(8,j,i(N,j));this.setFunctionModule(8,7,i(N,6)),this.setFunctionModule(8,8,i(N,7)),this.setFunctionModule(7,8,i(N,8));for(let j=9;j<15;j++)this.setFunctionModule(14-j,8,i(N,j));for(let j=0;j<8;j++)this.setFunctionModule(this.size-1-j,8,i(N,j));for(let j=8;j<15;j++)this.setFunctionModule(8,this.size-15+j,i(N,j));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let v=0;v<12;v++)p=p<<1^(p>>>11)*7973;const g=this.version<<12|p;c(g>>>18==0);for(let v=0;v<18;v++){const N=i(g,v),j=this.size-11+v%3,z=Math.floor(v/3);this.setFunctionModule(j,z,N),this.setFunctionModule(z,j,N)}}drawFinderPattern(p,g){for(let v=-4;v<=4;v++)for(let N=-4;N<=4;N++){const j=Math.max(Math.abs(N),Math.abs(v)),z=p+N,L=g+v;0<=z&&z<this.size&&0<=L&&L<this.size&&this.setFunctionModule(z,L,j!=2&&j!=4)}}drawAlignmentPattern(p,g){for(let v=-2;v<=2;v++)for(let N=-2;N<=2;N++)this.setFunctionModule(p+N,g+v,Math.max(Math.abs(N),Math.abs(v))!=1)}setFunctionModule(p,g,v){this.modules[g][p]=v,this.isFunction[g][p]=!0}addEccAndInterleave(p){const g=this.version,v=this.errorCorrectionLevel;if(p.length!=Ye.getNumDataCodewords(g,v))throw new RangeError("Invalid argument");const N=Ye.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][g],j=Ye.ECC_CODEWORDS_PER_BLOCK[v.ordinal][g],z=Math.floor(Ye.getNumRawDataModules(g)/8),L=N-z%N,Z=Math.floor(z/N);let P=[];const ge=Ye.reedSolomonComputeDivisor(j);for(let te=0,he=0;te<N;te++){let Se=p.slice(he,he+Z-j+(te<L?0:1));he+=Se.length;const Me=Ye.reedSolomonComputeRemainder(Se,ge);te<L&&Se.push(0),P.push(Se.concat(Me))}let ce=[];for(let te=0;te<P[0].length;te++)P.forEach((he,Se)=>{(te!=Z-j||Se>=L)&&ce.push(he[te])});return c(ce.length==z),ce}drawCodewords(p){if(p.length!=Math.floor(Ye.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let N=0;N<this.size;N++)for(let j=0;j<2;j++){const z=v-j,Z=(v+1&2)==0?this.size-1-N:N;!this.isFunction[Z][z]&&g<p.length*8&&(this.modules[Z][z]=i(p[g>>>3],7-(g&7)),g++)}}c(g==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let v=0;v<this.size;v++){let N;switch(p){case 0:N=(v+g)%2==0;break;case 1:N=g%2==0;break;case 2:N=v%3==0;break;case 3:N=(v+g)%3==0;break;case 4:N=(Math.floor(v/3)+Math.floor(g/2))%2==0;break;case 5:N=v*g%2+v*g%3==0;break;case 6:N=(v*g%2+v*g%3)%2==0;break;case 7:N=((v+g)%2+v*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][v]&&N&&(this.modules[g][v]=!this.modules[g][v])}}getPenaltyScore(){let p=0;for(let j=0;j<this.size;j++){let z=!1,L=0,Z=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[j][P]==z?(L++,L==5?p+=Ye.PENALTY_N1:L>5&&p++):(this.finderPenaltyAddHistory(L,Z),z||(p+=this.finderPenaltyCountPatterns(Z)*Ye.PENALTY_N3),z=this.modules[j][P],L=1);p+=this.finderPenaltyTerminateAndCount(z,L,Z)*Ye.PENALTY_N3}for(let j=0;j<this.size;j++){let z=!1,L=0,Z=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[P][j]==z?(L++,L==5?p+=Ye.PENALTY_N1:L>5&&p++):(this.finderPenaltyAddHistory(L,Z),z||(p+=this.finderPenaltyCountPatterns(Z)*Ye.PENALTY_N3),z=this.modules[P][j],L=1);p+=this.finderPenaltyTerminateAndCount(z,L,Z)*Ye.PENALTY_N3}for(let j=0;j<this.size-1;j++)for(let z=0;z<this.size-1;z++){const L=this.modules[j][z];L==this.modules[j][z+1]&&L==this.modules[j+1][z]&&L==this.modules[j+1][z+1]&&(p+=Ye.PENALTY_N2)}let g=0;for(const j of this.modules)g=j.reduce((z,L)=>z+(L?1:0),g);const v=this.size*this.size,N=Math.ceil(Math.abs(g*20-v*10)/v)-1;return c(0<=N&&N<=9),p+=N*Ye.PENALTY_N4,c(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let v=[6];for(let N=this.size-7;v.length<p;N-=g)v.splice(1,0,N);return v}}static getNumRawDataModules(p){if(p<Ye.MIN_VERSION||p>Ye.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*p+128)*p+64;if(p>=2){const v=Math.floor(p/7)+2;g-=(25*v-10)*v-55,p>=7&&(g-=36)}return c(208<=g&&g<=29648),g}static getNumDataCodewords(p,g){return Math.floor(Ye.getNumRawDataModules(p)/8)-Ye.ECC_CODEWORDS_PER_BLOCK[g.ordinal][p]*Ye.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let g=[];for(let N=0;N<p-1;N++)g.push(0);g.push(1);let v=1;for(let N=0;N<p;N++){for(let j=0;j<g.length;j++)g[j]=Ye.reedSolomonMultiply(g[j],v),j+1<g.length&&(g[j]^=g[j+1]);v=Ye.reedSolomonMultiply(v,2)}return g}static reedSolomonComputeRemainder(p,g){let v=g.map(N=>0);for(const N of p){const j=N^v.shift();v.push(0),g.forEach((z,L)=>v[L]^=Ye.reedSolomonMultiply(z,j))}return v}static reedSolomonMultiply(p,g){if(p>>>8||g>>>8)throw new RangeError("Byte out of range");let v=0;for(let N=7;N>=0;N--)v=v<<1^(v>>>7)*285,v^=(g>>>N&1)*p;return c(v>>>8==0),v}finderPenaltyCountPatterns(p){const g=p[1];c(g<=this.size*3);const v=g>0&&p[2]==g&&p[3]==g*3&&p[4]==g&&p[5]==g;return(v&&p[0]>=g*4&&p[6]>=g?1:0)+(v&&p[6]>=g*4&&p[0]>=g?1:0)}finderPenaltyTerminateAndCount(p,g,v){return p&&(this.finderPenaltyAddHistory(g,v),g=0),g+=this.size,this.finderPenaltyAddHistory(g,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(p,g){g[0]==0&&(p+=this.size),g.pop(),g.unshift(p)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=t;function s(x,p,g){if(p<0||p>31||x>>>p)throw new RangeError("Value out of range");for(let v=p-1;v>=0;v--)g.push(x>>>v&1)}function i(x,p){return(x>>>p&1)!=0}function c(x){if(!x)throw new Error("Assertion error")}const u=class jt{constructor(p,g,v){if(this.mode=p,this.numChars=g,this.bitData=v,g<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(p){let g=[];for(const v of p)s(v,8,g);return new jt(jt.Mode.BYTE,p.length,g)}static makeNumeric(p){if(!jt.isNumeric(p))throw new RangeError("String contains non-numeric characters");let g=[];for(let v=0;v<p.length;){const N=Math.min(p.length-v,3);s(parseInt(p.substring(v,v+N),10),N*3+1,g),v+=N}return new jt(jt.Mode.NUMERIC,p.length,g)}static makeAlphanumeric(p){if(!jt.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],v;for(v=0;v+2<=p.length;v+=2){let N=jt.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v))*45;N+=jt.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v+1)),s(N,11,g)}return v<p.length&&s(jt.ALPHANUMERIC_CHARSET.indexOf(p.charAt(v)),6,g),new jt(jt.Mode.ALPHANUMERIC,p.length,g)}static makeSegments(p){return p==""?[]:jt.isNumeric(p)?[jt.makeNumeric(p)]:jt.isAlphanumeric(p)?[jt.makeAlphanumeric(p)]:[jt.makeBytes(jt.toUtf8ByteArray(p))]}static makeEci(p){let g=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)s(p,8,g);else if(p<16384)s(2,2,g),s(p,14,g);else if(p<1e6)s(6,3,g),s(p,21,g);else throw new RangeError("ECI assignment value out of range");return new jt(jt.Mode.ECI,0,g)}static isNumeric(p){return jt.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return jt.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,g){let v=0;for(const N of p){const j=N.mode.numCharCountBits(g);if(N.numChars>=1<<j)return 1/0;v+=4+j+N.bitData.length}return v}static toUtf8ByteArray(p){p=encodeURI(p);let g=[];for(let v=0;v<p.length;v++)p.charAt(v)!="%"?g.push(p.charCodeAt(v)):(g.push(parseInt(p.substring(v+1,v+3),16)),v+=2);return g}};u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let m=u;r.QrSegment=u})(Or||(Or={}));(r=>{(t=>{const s=class{constructor(c,u){this.ordinal=c,this.formatBits=u}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),t.Ecc=s})(r.QrCode||(r.QrCode={}))})(Or||(Or={}));(r=>{(t=>{const s=class{constructor(c,u){this.modeBits=c,this.numBitsCharCount=u}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),t.Mode=s})(r.QrSegment||(r.QrSegment={}))})(Or||(Or={}));var Ii=Or;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var w1={L:Ii.QrCode.Ecc.LOW,M:Ii.QrCode.Ecc.MEDIUM,Q:Ii.QrCode.Ecc.QUARTILE,H:Ii.QrCode.Ecc.HIGH},S0=128,A0="L",C0="#FFFFFF",R0="#000000",D0=!1,M0=1,j1=4,T1=0,S1=.1;function I0(r,t=0){const s=[];return r.forEach(function(i,c){let u=null;i.forEach(function(m,x){if(!m&&u!==null){s.push(`M${u+t} ${c+t}h${x-u}v1H${u+t}z`),u=null;return}if(x===i.length-1){if(!m)return;u===null?s.push(`M${x+t},${c+t} h1v1H${x+t}z`):s.push(`M${u+t},${c+t} h${x+1-u}v1H${u+t}z`);return}m&&u===null&&(u=x)})}),s.join("")}function O0(r,t){return r.slice().map((s,i)=>i<t.y||i>=t.y+t.h?s:s.map((c,u)=>u<t.x||u>=t.x+t.w?c:!1))}function A1(r,t,s,i){if(i==null)return null;const c=r.length+s*2,u=Math.floor(t*S1),m=c/t,x=(i.width||u)*m,p=(i.height||u)*m,g=i.x==null?r.length/2-x/2:i.x*m,v=i.y==null?r.length/2-p/2:i.y*m,N=i.opacity==null?1:i.opacity;let j=null;if(i.excavate){let L=Math.floor(g),Z=Math.floor(v),P=Math.ceil(x+g-L),ge=Math.ceil(p+v-Z);j={x:L,y:Z,w:P,h:ge}}const z=i.crossOrigin;return{x:g,y:v,h:p,w:x,excavation:j,opacity:N,crossOrigin:z}}function C1(r,t){return t!=null?Math.max(Math.floor(t),0):r?j1:T1}function V0({value:r,level:t,minVersion:s,includeMargin:i,marginSize:c,imageSettings:u,size:m,boostLevel:x}){let p=Dt.useMemo(()=>{const L=(Array.isArray(r)?r:[r]).reduce((Z,P)=>(Z.push(...Ii.QrSegment.makeSegments(P)),Z),[]);return Ii.QrCode.encodeSegments(L,w1[t],s,void 0,void 0,x)},[r,t,s,x]);const{cells:g,margin:v,numCells:N,calculatedImageSettings:j}=Dt.useMemo(()=>{let z=p.getModules();const L=C1(i,c),Z=z.length+L*2,P=A1(z,m,L,u);return{cells:z,margin:L,numCells:Z,calculatedImageSettings:P}},[p,m,u,i,c]);return{qrcode:p,margin:v,cells:g,numCells:N,calculatedImageSettings:j}}var R1=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),k0=Dt.forwardRef(function(t,s){const i=t,{value:c,size:u=S0,level:m=A0,bgColor:x=C0,fgColor:p=R0,includeMargin:g=D0,minVersion:v=M0,boostLevel:N,marginSize:j,imageSettings:z}=i,Z=df(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:P}=Z,ge=df(Z,["style"]),ce=z==null?void 0:z.src,te=Dt.useRef(null),he=Dt.useRef(null),Se=Dt.useCallback(ve=>{te.current=ve,typeof s=="function"?s(ve):s&&(s.current=ve)},[s]),[Me,D]=Dt.useState(!1),{margin:A,cells:M,numCells:V,calculatedImageSettings:T}=V0({value:c,level:m,minVersion:v,boostLevel:N,includeMargin:g,marginSize:j,imageSettings:z,size:u});Dt.useEffect(()=>{if(te.current!=null){const ve=te.current,xe=ve.getContext("2d");if(!xe)return;let G=M;const $=he.current,de=T!=null&&$!==null&&$.complete&&$.naturalHeight!==0&&$.naturalWidth!==0;de&&T.excavation!=null&&(G=O0(M,T.excavation));const _e=window.devicePixelRatio||1;ve.height=ve.width=u*_e;const Ue=u/V*_e;xe.scale(Ue,Ue),xe.fillStyle=x,xe.fillRect(0,0,V,V),xe.fillStyle=p,R1?xe.fill(new Path2D(I0(G,A))):M.forEach(function(C,Y){C.forEach(function(ue,pe){ue&&xe.fillRect(pe+A,Y+A,1,1)})}),T&&(xe.globalAlpha=T.opacity),de&&xe.drawImage($,T.x+A,T.y+A,T.w,T.h)}}),Dt.useEffect(()=>{D(!1)},[ce]);const I=hf({height:u,width:u},P);let S=null;return ce!=null&&(S=Dt.createElement("img",{src:ce,key:ce,style:{display:"none"},onLoad:()=>{D(!0)},ref:he,crossOrigin:T==null?void 0:T.crossOrigin})),Dt.createElement(Dt.Fragment,null,Dt.createElement("canvas",hf({style:I,height:u,width:u,ref:Se,role:"img"},ge)),S)});k0.displayName="QRCodeCanvas";var D1=Dt.forwardRef(function(t,s){const i=t,{value:c,size:u=S0,level:m=A0,bgColor:x=C0,fgColor:p=R0,includeMargin:g=D0,minVersion:v=M0,boostLevel:N,title:j,marginSize:z,imageSettings:L}=i,Z=df(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:P,cells:ge,numCells:ce,calculatedImageSettings:te}=V0({value:c,level:m,minVersion:v,boostLevel:N,includeMargin:g,marginSize:z,imageSettings:L,size:u});let he=ge,Se=null;L!=null&&te!=null&&(te.excavation!=null&&(he=O0(ge,te.excavation)),Se=Dt.createElement("image",{href:L.src,height:te.h,width:te.w,x:te.x+P,y:te.y+P,preserveAspectRatio:"none",opacity:te.opacity,crossOrigin:te.crossOrigin}));const Me=I0(he,P);return Dt.createElement("svg",hf({height:u,width:u,viewBox:`0 0 ${ce} ${ce}`,ref:s,role:"img"},Z),!!j&&Dt.createElement("title",null,j),Dt.createElement("path",{fill:x,d:`M0,0 h${ce}v${ce}H0z`,shapeRendering:"crispEdges"}),Dt.createElement("path",{fill:p,d:Me,shapeRendering:"crispEdges"}),Se)});D1.displayName="QRCodeSVG";const Mt={projects:[""],workplaces:[""],contractors:[""],subcontractors:[""],supervisors:[" "],locations:[""],goals:[""],processes:[""],topics:[""],cautions:[""],roles:[""],jobTypes:["","","",""],predictions:[""],countermeasures:[""]},M1={project:Mt.projects[0],month:new Date().getMonth()+1,contractor:Mt.contractors[0],date:new Date().toISOString().split("T")[0],location:Mt.locations[0],startTime:"08:00",endTime:"08:30",instructor:Mt.supervisors[0],topic:Mt.topics[0],goal:Mt.goals[0],process:Mt.processes[0],caution:Mt.cautions[0],photoUrl:null,signatures:[]},I1={count:1,project:Mt.projects[0],date:new Date().toISOString().split("T")[0],contractor:Mt.contractors[0],startTime:"13:00",endTime:"14:00",location:Mt.locations[0],gcAttendees:Array(8).fill({role:"",name:""}),subcontractorAttendees:[]},O1={year:new Date().getFullYear(),month:new Date().getMonth()+1,createdDate:new Date().toISOString().split("T")[0],project:Mt.projects[0],location:Mt.locations[0],author:Mt.supervisors[0],trainingDate:"",trainingLeader:Mt.supervisors[0],councilDate:"",councilLeader:"",patrolDate:"",processRows:[],predictions:Array(5).fill(""),countermeasures:Array(5).fill(""),inspectionItems:Array(5).fill(""),safetyDuty:{},lastMonthReflection:""},Wd={project:"",director:"",furiganaSei:"",furiganaMei:"",nameSei:"",nameMei:"",birthEra:"Heisei",birthYear:"",birthMonth:"",birthDay:"",gender:"Male",age:0,company:"",subcontractorRank:"",experienceYears:null,experienceMonths:null,jobType:"",jobTypeOther:"",address:"",phone:"",emergencyContactSei:"",emergencyContactMei:"",emergencyContactRelation:"",emergencyContactPhone:"",bloodType:"A",bloodTypeRh:"Unknown",healthCheckYear:null,healthCheckMonth:null,healthCheckDay:null,kentaikyo:"Joined",qualifications:{vehicle_leveling:!1,vehicle_demolition:!1,mobile_crane:!1,slinging:!1,gas_welding:!1,earth_retaining:!1,excavation:!1,scaffolding:!1,formwork:!1,oxygen_deficiency:!1,rough_terrain:!1,arc_welding:!1,grinding_wheel:!1,low_voltage:!1,roller:!1,asbestos:!1,foreman:!1,license_regular:!1,license_large:!1,license_large_special:!1,license_towing:!1,otherText1:"",otherText2:"",otherText3:""},pledgeDateYear:null,pledgeDateMonth:null,pledgeDateDay:null,signatureDataUrl:null},V1=()=>{};var ex={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=function(r){const t=[];let s=0;for(let i=0;i<r.length;i++){let c=r.charCodeAt(i);c<128?t[s++]=c:c<2048?(t[s++]=c>>6|192,t[s++]=c&63|128):(c&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(c=65536+((c&1023)<<10)+(r.charCodeAt(++i)&1023),t[s++]=c>>18|240,t[s++]=c>>12&63|128,t[s++]=c>>6&63|128,t[s++]=c&63|128):(t[s++]=c>>12|224,t[s++]=c>>6&63|128,t[s++]=c&63|128)}return t},k1=function(r){const t=[];let s=0,i=0;for(;s<r.length;){const c=r[s++];if(c<128)t[i++]=String.fromCharCode(c);else if(c>191&&c<224){const u=r[s++];t[i++]=String.fromCharCode((c&31)<<6|u&63)}else if(c>239&&c<365){const u=r[s++],m=r[s++],x=r[s++],p=((c&7)<<18|(u&63)<<12|(m&63)<<6|x&63)-65536;t[i++]=String.fromCharCode(55296+(p>>10)),t[i++]=String.fromCharCode(56320+(p&1023))}else{const u=r[s++],m=r[s++];t[i++]=String.fromCharCode((c&15)<<12|(u&63)<<6|m&63)}}return t.join("")},U0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let c=0;c<r.length;c+=3){const u=r[c],m=c+1<r.length,x=m?r[c+1]:0,p=c+2<r.length,g=p?r[c+2]:0,v=u>>2,N=(u&3)<<4|x>>4;let j=(x&15)<<2|g>>6,z=g&63;p||(z=64,m||(j=64)),i.push(s[v],s[N],s[j],s[z])}return i.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(z0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):k1(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let c=0;c<r.length;){const u=s[r.charAt(c++)],x=c<r.length?s[r.charAt(c)]:0;++c;const g=c<r.length?s[r.charAt(c)]:64;++c;const N=c<r.length?s[r.charAt(c)]:64;if(++c,u==null||x==null||g==null||N==null)throw new z1;const j=u<<2|x>>4;if(i.push(j),g!==64){const z=x<<4&240|g>>2;if(i.push(z),N!==64){const L=g<<6&192|N;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class z1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U1=function(r){const t=z0(r);return U0.encodeByteArray(t,!0)},gu=function(r){return U1(r).replace(/\./g,"")},L1=function(r){try{return U0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=()=>P1().__FIREBASE_DEFAULTS__,q1=()=>{if(typeof process>"u"||typeof ex>"u")return;const r=ex.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},H1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&L1(r[1]);return t&&JSON.parse(t)},zf=()=>{try{return V1()||B1()||q1()||H1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},G1=r=>{var t,s;return(s=(t=zf())==null?void 0:t.emulatorHosts)==null?void 0:s[r]},F1=r=>{const t=G1(r);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),i]:[t.substring(0,s),i]},L0=()=>{var r;return(r=zf())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,i)=>{s?this.reject(s):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Y1(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},i=t||"demo-project",c=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${i}`,aud:i,iat:c,exp:c+3600,auth_time:c,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[gu(JSON.stringify(s)),gu(JSON.stringify(m)),""].join(".")}const ro={};function K1(){const r={prod:[],emulator:[]};for(const t of Object.keys(ro))ro[t]?r.emulator.push(t):r.prod.push(t);return r}function X1(r){let t=document.getElementById(r),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),s=!0),{created:s,element:t}}let tx=!1;function Z1(r,t){if(typeof window>"u"||typeof document>"u"||!Uf(window.location.host)||ro[r]===t||ro[r]||tx)return;ro[r]=t;function s(j){return`__firebase__banner__${j}`}const i="__firebase__banner",u=K1().prod.length>0;function m(){const j=document.getElementById(i);j&&j.remove()}function x(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function p(j,z){j.setAttribute("width","24"),j.setAttribute("id",z),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function g(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{tx=!0,m()},j}function v(j,z){j.setAttribute("id",z),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function N(){const j=X1(i),z=s("text"),L=document.getElementById(z)||document.createElement("span"),Z=s("learnmore"),P=document.getElementById(Z)||document.createElement("a"),ge=s("preprendIcon"),ce=document.getElementById(ge)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const te=j.element;x(te),v(P,Z);const he=g();p(ce,ge),te.append(ce,L,P,he),document.body.appendChild(te)}u?(L.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W1(){var t;const r=(t=zf())==null?void 0:t.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eN(){return!W1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tN(){try{return typeof indexedDB=="object"}catch{return!1}}function nN(){return new Promise((r,t)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(i);c.onsuccess=()=>{c.result.close(),s||self.indexedDB.deleteDatabase(i),r(!0)},c.onupgradeneeded=()=>{s=!1},c.onerror=()=>{var u;t(((u=c.error)==null?void 0:u.message)||"")}}catch(s){t(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="FirebaseError";class Fi extends Error{constructor(t,s,i){super(s),this.code=t,this.customData=i,this.name=sN,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,P0.prototype.create)}}class P0{constructor(t,s,i){this.service=t,this.serviceName=s,this.errors=i}create(t,...s){const i=s[0]||{},c=`${this.service}/${t}`,u=this.errors[t],m=u?aN(u,i):"Error",x=`${this.serviceName}: ${m} (${c}).`;return new Fi(c,x,i)}}function aN(r,t){return r.replace(rN,(s,i)=>{const c=t[i];return c!=null?String(c):`<${i}?>`})}const rN=/\{\$([^}]+)}/g;function pu(r,t){if(r===t)return!0;const s=Object.keys(r),i=Object.keys(t);for(const c of s){if(!i.includes(c))return!1;const u=r[c],m=t[c];if(nx(u)&&nx(m)){if(!pu(u,m))return!1}else if(u!==m)return!1}for(const c of i)if(!s.includes(c))return!1;return!0}function nx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(r){return r&&r._delegate?r._delegate:r}class uo{constructor(t,s,i){this.name=t,this.instanceFactory=s,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const i=new $1;if(this.instancesDeferred.set(s,i),this.isInitialized(s)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:s});c&&i.resolve(c)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(i)return null;throw c}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(oN(t))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[s,i]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:c});i.resolve(u)}catch{}}}}clearInstance(t=Dr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Dr){return this.instances.has(t)}getOptions(t=Dr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:i,options:s});for(const[u,m]of this.instancesDeferred.entries()){const x=this.normalizeInstanceIdentifier(u);i===x&&m.resolve(c)}return c}onInit(t,s){const i=this.normalizeInstanceIdentifier(s),c=this.onInitCallbacks.get(i)??new Set;c.add(t),this.onInitCallbacks.set(i,c);const u=this.instances.get(i);return u&&t(u,i),()=>{c.delete(t)}}invokeOnInitCallbacks(t,s){const i=this.onInitCallbacks.get(s);if(i)for(const c of i)try{c(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lN(t),options:s}),this.instances.set(t,i),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Dr){return this.component?this.component.multipleInstances?t:Dr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lN(r){return r===Dr?void 0:r}function oN(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new iN(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(et||(et={}));const uN={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},hN=et.INFO,dN={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},fN=(r,t,...s)=>{if(t<r.logLevel)return;const i=new Date().toISOString(),c=dN[t];if(c)console[c](`[${i}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class B0{constructor(t){this.name=t,this._logLevel=hN,this._logHandler=fN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?uN[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...t),this._logHandler(this,et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...t),this._logHandler(this,et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,et.INFO,...t),this._logHandler(this,et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,et.WARN,...t),this._logHandler(this,et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...t),this._logHandler(this,et.ERROR,...t)}}const mN=(r,t)=>t.some(s=>r instanceof s);let sx,ax;function gN(){return sx||(sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pN(){return ax||(ax=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const q0=new WeakMap,ff=new WeakMap,H0=new WeakMap,ef=new WeakMap,Lf=new WeakMap;function yN(r){const t=new Promise((s,i)=>{const c=()=>{r.removeEventListener("success",u),r.removeEventListener("error",m)},u=()=>{s(qa(r.result)),c()},m=()=>{i(r.error),c()};r.addEventListener("success",u),r.addEventListener("error",m)});return t.then(s=>{s instanceof IDBCursor&&q0.set(s,r)}).catch(()=>{}),Lf.set(t,r),t}function xN(r){if(ff.has(r))return;const t=new Promise((s,i)=>{const c=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",m),r.removeEventListener("abort",m)},u=()=>{s(),c()},m=()=>{i(r.error||new DOMException("AbortError","AbortError")),c()};r.addEventListener("complete",u),r.addEventListener("error",m),r.addEventListener("abort",m)});ff.set(r,t)}let mf={get(r,t,s){if(r instanceof IDBTransaction){if(t==="done")return ff.get(r);if(t==="objectStoreNames")return r.objectStoreNames||H0.get(r);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return qa(r[t])},set(r,t,s){return r[t]=s,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function bN(r){mf=r(mf)}function vN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const i=r.call(tf(this),t,...s);return H0.set(i,t.sort?t.sort():[t]),qa(i)}:pN().includes(r)?function(...t){return r.apply(tf(this),t),qa(q0.get(this))}:function(...t){return qa(r.apply(tf(this),t))}}function _N(r){return typeof r=="function"?vN(r):(r instanceof IDBTransaction&&xN(r),mN(r,gN())?new Proxy(r,mf):r)}function qa(r){if(r instanceof IDBRequest)return yN(r);if(ef.has(r))return ef.get(r);const t=_N(r);return t!==r&&(ef.set(r,t),Lf.set(t,r)),t}const tf=r=>Lf.get(r);function NN(r,t,{blocked:s,upgrade:i,blocking:c,terminated:u}={}){const m=indexedDB.open(r,t),x=qa(m);return i&&m.addEventListener("upgradeneeded",p=>{i(qa(m.result),p.oldVersion,p.newVersion,qa(m.transaction),p)}),s&&m.addEventListener("blocked",p=>s(p.oldVersion,p.newVersion,p)),x.then(p=>{u&&p.addEventListener("close",()=>u()),c&&p.addEventListener("versionchange",g=>c(g.oldVersion,g.newVersion,g))}).catch(()=>{}),x}const EN=["get","getKey","getAll","getAllKeys","count"],wN=["put","add","delete","clear"],nf=new Map;function rx(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(nf.get(t))return nf.get(t);const s=t.replace(/FromIndex$/,""),i=t!==s,c=wN.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!(c||EN.includes(s)))return;const u=async function(m,...x){const p=this.transaction(m,c?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(x.shift())),(await Promise.all([g[s](...x),c&&p.done]))[0]};return nf.set(t,u),u}bN(r=>({...r,get:(t,s,i)=>rx(t,s)||r.get(t,s,i),has:(t,s)=>!!rx(t,s)||r.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(TN(s)){const i=s.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(s=>s).join(" ")}}function TN(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const gf="@firebase/app",ix="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new B0("@firebase/app"),SN="@firebase/app-compat",AN="@firebase/analytics-compat",CN="@firebase/analytics",RN="@firebase/app-check-compat",DN="@firebase/app-check",MN="@firebase/auth",IN="@firebase/auth-compat",ON="@firebase/database",VN="@firebase/data-connect",kN="@firebase/database-compat",zN="@firebase/functions",UN="@firebase/functions-compat",LN="@firebase/installations",PN="@firebase/installations-compat",BN="@firebase/messaging",qN="@firebase/messaging-compat",HN="@firebase/performance",GN="@firebase/performance-compat",FN="@firebase/remote-config",$N="@firebase/remote-config-compat",YN="@firebase/storage",QN="@firebase/storage-compat",KN="@firebase/firestore",XN="@firebase/ai",ZN="@firebase/firestore-compat",JN="firebase",WN="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="[DEFAULT]",eE={[gf]:"fire-core",[SN]:"fire-core-compat",[CN]:"fire-analytics",[AN]:"fire-analytics-compat",[DN]:"fire-app-check",[RN]:"fire-app-check-compat",[MN]:"fire-auth",[IN]:"fire-auth-compat",[ON]:"fire-rtdb",[VN]:"fire-data-connect",[kN]:"fire-rtdb-compat",[zN]:"fire-fn",[UN]:"fire-fn-compat",[LN]:"fire-iid",[PN]:"fire-iid-compat",[BN]:"fire-fcm",[qN]:"fire-fcm-compat",[HN]:"fire-perf",[GN]:"fire-perf-compat",[FN]:"fire-rc",[$N]:"fire-rc-compat",[YN]:"fire-gcs",[QN]:"fire-gcs-compat",[KN]:"fire-fst",[ZN]:"fire-fst-compat",[XN]:"fire-vertex","fire-js":"fire-js",[JN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=new Map,tE=new Map,yf=new Map;function lx(r,t){try{r.container.addComponent(t)}catch(s){ia.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,s)}}function xu(r){const t=r.name;if(yf.has(t))return ia.debug(`There were multiple attempts to register component ${t}.`),!1;yf.set(t,r);for(const s of yu.values())lx(s,r);for(const s of tE.values())lx(s,r);return!0}function nE(r,t){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(t)}function sE(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ha=new P0("app","Firebase",aE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(t,s,i){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ha.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=WN;function G0(r,t={}){let s=r;typeof t!="object"&&(t={name:t});const i={name:pf,automaticDataCollectionEnabled:!0,...t},c=i.name;if(typeof c!="string"||!c)throw Ha.create("bad-app-name",{appName:String(c)});if(s||(s=L0()),!s)throw Ha.create("no-options");const u=yu.get(c);if(u){if(pu(s,u.options)&&pu(i,u.config))return u;throw Ha.create("duplicate-app",{appName:c})}const m=new cN(c);for(const p of yf.values())m.addComponent(p);const x=new rE(s,i,m);return yu.set(c,x),x}function lE(r=pf){const t=yu.get(r);if(!t&&r===pf&&L0())return G0();if(!t)throw Ha.create("no-app",{appName:r});return t}function Oi(r,t,s){let i=eE[r]??r;s&&(i+=`-${s}`);const c=i.match(/\s|\//),u=t.match(/\s|\//);if(c||u){const m=[`Unable to register library "${i}" with version "${t}":`];c&&m.push(`library name "${i}" contains illegal characters (whitespace or "/")`),c&&u&&m.push("and"),u&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ia.warn(m.join(" "));return}xu(new uo(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firebase-heartbeat-database",cE=1,ho="firebase-heartbeat-store";let sf=null;function F0(){return sf||(sf=NN(oE,cE,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(ho)}catch(s){console.warn(s)}}}}).catch(r=>{throw Ha.create("idb-open",{originalErrorMessage:r.message})})),sf}async function uE(r){try{const s=(await F0()).transaction(ho),i=await s.objectStore(ho).get($0(r));return await s.done,i}catch(t){if(t instanceof Fi)ia.warn(t.message);else{const s=Ha.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ia.warn(s.message)}}}async function ox(r,t){try{const i=(await F0()).transaction(ho,"readwrite");await i.objectStore(ho).put(t,$0(r)),await i.done}catch(s){if(s instanceof Fi)ia.warn(s.message);else{const i=Ha.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});ia.warn(i.message)}}}function $0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=1024,dE=30;class fE{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new gE(s),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,s;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=cx();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(m=>m.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:c}),this._heartbeatsCache.heartbeats.length>dE){const m=pE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ia.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=cx(),{heartbeatsToSend:i,unsentEntries:c}=mE(this._heartbeatsCache.heartbeats),u=gu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=s,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(s){return ia.warn(s),""}}}function cx(){return new Date().toISOString().substring(0,10)}function mE(r,t=hE){const s=[];let i=r.slice();for(const c of r){const u=s.find(m=>m.agent===c.agent);if(u){if(u.dates.push(c.date),ux(s)>t){u.dates.pop();break}}else if(s.push({agent:c.agent,dates:[c.date]}),ux(s)>t){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}class gE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tN()?nN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await uE(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return ox(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return ox(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function ux(r){return gu(JSON.stringify({version:2,heartbeats:r})).length}function pE(r){if(r.length===0)return-1;let t=0,s=r[0].date;for(let i=1;i<r.length;i++)r[i].date<s&&(s=r[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(r){xu(new uo("platform-logger",t=>new jN(t),"PRIVATE")),xu(new uo("heartbeat",t=>new fE(t),"PRIVATE")),Oi(gf,ix,r),Oi(gf,ix,"esm2020"),Oi("fire-js","")}yE("");var xE="firebase",bE="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi(xE,bE,"app");var hx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ga,Y0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,A){function M(){}M.prototype=A.prototype,D.F=A.prototype,D.prototype=new M,D.prototype.constructor=D,D.D=function(V,T,I){for(var S=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)S[ve-2]=arguments[ve];return A.prototype[T].apply(V,S)}}function s(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,s),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(D,A,M){M||(M=0);const V=Array(16);if(typeof A=="string")for(var T=0;T<16;++T)V[T]=A.charCodeAt(M++)|A.charCodeAt(M++)<<8|A.charCodeAt(M++)<<16|A.charCodeAt(M++)<<24;else for(T=0;T<16;++T)V[T]=A[M++]|A[M++]<<8|A[M++]<<16|A[M++]<<24;A=D.g[0],M=D.g[1],T=D.g[2];let I=D.g[3],S;S=A+(I^M&(T^I))+V[0]+3614090360&4294967295,A=M+(S<<7&4294967295|S>>>25),S=I+(T^A&(M^T))+V[1]+3905402710&4294967295,I=A+(S<<12&4294967295|S>>>20),S=T+(M^I&(A^M))+V[2]+606105819&4294967295,T=I+(S<<17&4294967295|S>>>15),S=M+(A^T&(I^A))+V[3]+3250441966&4294967295,M=T+(S<<22&4294967295|S>>>10),S=A+(I^M&(T^I))+V[4]+4118548399&4294967295,A=M+(S<<7&4294967295|S>>>25),S=I+(T^A&(M^T))+V[5]+1200080426&4294967295,I=A+(S<<12&4294967295|S>>>20),S=T+(M^I&(A^M))+V[6]+2821735955&4294967295,T=I+(S<<17&4294967295|S>>>15),S=M+(A^T&(I^A))+V[7]+4249261313&4294967295,M=T+(S<<22&4294967295|S>>>10),S=A+(I^M&(T^I))+V[8]+1770035416&4294967295,A=M+(S<<7&4294967295|S>>>25),S=I+(T^A&(M^T))+V[9]+2336552879&4294967295,I=A+(S<<12&4294967295|S>>>20),S=T+(M^I&(A^M))+V[10]+4294925233&4294967295,T=I+(S<<17&4294967295|S>>>15),S=M+(A^T&(I^A))+V[11]+2304563134&4294967295,M=T+(S<<22&4294967295|S>>>10),S=A+(I^M&(T^I))+V[12]+1804603682&4294967295,A=M+(S<<7&4294967295|S>>>25),S=I+(T^A&(M^T))+V[13]+4254626195&4294967295,I=A+(S<<12&4294967295|S>>>20),S=T+(M^I&(A^M))+V[14]+2792965006&4294967295,T=I+(S<<17&4294967295|S>>>15),S=M+(A^T&(I^A))+V[15]+1236535329&4294967295,M=T+(S<<22&4294967295|S>>>10),S=A+(T^I&(M^T))+V[1]+4129170786&4294967295,A=M+(S<<5&4294967295|S>>>27),S=I+(M^T&(A^M))+V[6]+3225465664&4294967295,I=A+(S<<9&4294967295|S>>>23),S=T+(A^M&(I^A))+V[11]+643717713&4294967295,T=I+(S<<14&4294967295|S>>>18),S=M+(I^A&(T^I))+V[0]+3921069994&4294967295,M=T+(S<<20&4294967295|S>>>12),S=A+(T^I&(M^T))+V[5]+3593408605&4294967295,A=M+(S<<5&4294967295|S>>>27),S=I+(M^T&(A^M))+V[10]+38016083&4294967295,I=A+(S<<9&4294967295|S>>>23),S=T+(A^M&(I^A))+V[15]+3634488961&4294967295,T=I+(S<<14&4294967295|S>>>18),S=M+(I^A&(T^I))+V[4]+3889429448&4294967295,M=T+(S<<20&4294967295|S>>>12),S=A+(T^I&(M^T))+V[9]+568446438&4294967295,A=M+(S<<5&4294967295|S>>>27),S=I+(M^T&(A^M))+V[14]+3275163606&4294967295,I=A+(S<<9&4294967295|S>>>23),S=T+(A^M&(I^A))+V[3]+4107603335&4294967295,T=I+(S<<14&4294967295|S>>>18),S=M+(I^A&(T^I))+V[8]+1163531501&4294967295,M=T+(S<<20&4294967295|S>>>12),S=A+(T^I&(M^T))+V[13]+2850285829&4294967295,A=M+(S<<5&4294967295|S>>>27),S=I+(M^T&(A^M))+V[2]+4243563512&4294967295,I=A+(S<<9&4294967295|S>>>23),S=T+(A^M&(I^A))+V[7]+1735328473&4294967295,T=I+(S<<14&4294967295|S>>>18),S=M+(I^A&(T^I))+V[12]+2368359562&4294967295,M=T+(S<<20&4294967295|S>>>12),S=A+(M^T^I)+V[5]+4294588738&4294967295,A=M+(S<<4&4294967295|S>>>28),S=I+(A^M^T)+V[8]+2272392833&4294967295,I=A+(S<<11&4294967295|S>>>21),S=T+(I^A^M)+V[11]+1839030562&4294967295,T=I+(S<<16&4294967295|S>>>16),S=M+(T^I^A)+V[14]+4259657740&4294967295,M=T+(S<<23&4294967295|S>>>9),S=A+(M^T^I)+V[1]+2763975236&4294967295,A=M+(S<<4&4294967295|S>>>28),S=I+(A^M^T)+V[4]+1272893353&4294967295,I=A+(S<<11&4294967295|S>>>21),S=T+(I^A^M)+V[7]+4139469664&4294967295,T=I+(S<<16&4294967295|S>>>16),S=M+(T^I^A)+V[10]+3200236656&4294967295,M=T+(S<<23&4294967295|S>>>9),S=A+(M^T^I)+V[13]+681279174&4294967295,A=M+(S<<4&4294967295|S>>>28),S=I+(A^M^T)+V[0]+3936430074&4294967295,I=A+(S<<11&4294967295|S>>>21),S=T+(I^A^M)+V[3]+3572445317&4294967295,T=I+(S<<16&4294967295|S>>>16),S=M+(T^I^A)+V[6]+76029189&4294967295,M=T+(S<<23&4294967295|S>>>9),S=A+(M^T^I)+V[9]+3654602809&4294967295,A=M+(S<<4&4294967295|S>>>28),S=I+(A^M^T)+V[12]+3873151461&4294967295,I=A+(S<<11&4294967295|S>>>21),S=T+(I^A^M)+V[15]+530742520&4294967295,T=I+(S<<16&4294967295|S>>>16),S=M+(T^I^A)+V[2]+3299628645&4294967295,M=T+(S<<23&4294967295|S>>>9),S=A+(T^(M|~I))+V[0]+4096336452&4294967295,A=M+(S<<6&4294967295|S>>>26),S=I+(M^(A|~T))+V[7]+1126891415&4294967295,I=A+(S<<10&4294967295|S>>>22),S=T+(A^(I|~M))+V[14]+2878612391&4294967295,T=I+(S<<15&4294967295|S>>>17),S=M+(I^(T|~A))+V[5]+4237533241&4294967295,M=T+(S<<21&4294967295|S>>>11),S=A+(T^(M|~I))+V[12]+1700485571&4294967295,A=M+(S<<6&4294967295|S>>>26),S=I+(M^(A|~T))+V[3]+2399980690&4294967295,I=A+(S<<10&4294967295|S>>>22),S=T+(A^(I|~M))+V[10]+4293915773&4294967295,T=I+(S<<15&4294967295|S>>>17),S=M+(I^(T|~A))+V[1]+2240044497&4294967295,M=T+(S<<21&4294967295|S>>>11),S=A+(T^(M|~I))+V[8]+1873313359&4294967295,A=M+(S<<6&4294967295|S>>>26),S=I+(M^(A|~T))+V[15]+4264355552&4294967295,I=A+(S<<10&4294967295|S>>>22),S=T+(A^(I|~M))+V[6]+2734768916&4294967295,T=I+(S<<15&4294967295|S>>>17),S=M+(I^(T|~A))+V[13]+1309151649&4294967295,M=T+(S<<21&4294967295|S>>>11),S=A+(T^(M|~I))+V[4]+4149444226&4294967295,A=M+(S<<6&4294967295|S>>>26),S=I+(M^(A|~T))+V[11]+3174756917&4294967295,I=A+(S<<10&4294967295|S>>>22),S=T+(A^(I|~M))+V[2]+718787259&4294967295,T=I+(S<<15&4294967295|S>>>17),S=M+(I^(T|~A))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(T+(S<<21&4294967295|S>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+I&4294967295}i.prototype.v=function(D,A){A===void 0&&(A=D.length);const M=A-this.blockSize,V=this.C;let T=this.h,I=0;for(;I<A;){if(T==0)for(;I<=M;)c(this,D,I),I+=this.blockSize;if(typeof D=="string"){for(;I<A;)if(V[T++]=D.charCodeAt(I++),T==this.blockSize){c(this,V),T=0;break}}else for(;I<A;)if(V[T++]=D[I++],T==this.blockSize){c(this,V),T=0;break}}this.h=T,this.o+=A},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var M=D.length-8;M<D.length;++M)D[M]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,M=0;M<4;++M)for(let V=0;V<32;V+=8)D[A++]=this.g[M]>>>V&255;return D};function u(D,A){var M=x;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=A(D)}function m(D,A){this.h=A;const M=[];let V=!0;for(let T=D.length-1;T>=0;T--){const I=D[T]|0;V&&I==A||(M[T]=I,V=!1)}this.g=M}var x={};function p(D){return-128<=D&&D<128?u(D,function(A){return new m([A|0],A<0?-1:0)}):new m([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return N;if(D<0)return P(g(-D));const A=[];let M=1;for(let V=0;D>=M;V++)A[V]=D/M|0,M*=4294967296;return new m(A,0)}function v(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return P(v(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=g(Math.pow(A,8));let V=N;for(let I=0;I<D.length;I+=8){var T=Math.min(8,D.length-I);const S=parseInt(D.substring(I,I+T),A);T<8?(T=g(Math.pow(A,T)),V=V.j(T).add(g(S))):(V=V.j(M),V=V.add(g(S)))}return V}var N=p(0),j=p(1),z=p(16777216);r=m.prototype,r.m=function(){if(Z(this))return-P(this).m();let D=0,A=1;for(let M=0;M<this.g.length;M++){const V=this.i(M);D+=(V>=0?V:4294967296+V)*A,A*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(L(this))return"0";if(Z(this))return"-"+P(this).toString(D);const A=g(Math.pow(D,6));var M=this;let V="";for(;;){const T=he(M,A).g;M=ge(M,T.j(A));let I=((M.g.length>0?M.g[0]:M.h)>>>0).toString(D);if(M=T,L(M))return I+V;for(;I.length<6;)I="0"+I;V=I+V}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function L(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function Z(D){return D.h==-1}r.l=function(D){return D=ge(this,D),Z(D)?-1:L(D)?0:1};function P(D){const A=D.g.length,M=[];for(let V=0;V<A;V++)M[V]=~D.g[V];return new m(M,~D.h).add(j)}r.abs=function(){return Z(this)?P(this):this},r.add=function(D){const A=Math.max(this.g.length,D.g.length),M=[];let V=0;for(let T=0;T<=A;T++){let I=V+(this.i(T)&65535)+(D.i(T)&65535),S=(I>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);V=S>>>16,I&=65535,S&=65535,M[T]=S<<16|I}return new m(M,M[M.length-1]&-2147483648?-1:0)};function ge(D,A){return D.add(P(A))}r.j=function(D){if(L(this)||L(D))return N;if(Z(this))return Z(D)?P(this).j(P(D)):P(P(this).j(D));if(Z(D))return P(this.j(P(D)));if(this.l(z)<0&&D.l(z)<0)return g(this.m()*D.m());const A=this.g.length+D.g.length,M=[];for(var V=0;V<2*A;V++)M[V]=0;for(V=0;V<this.g.length;V++)for(let T=0;T<D.g.length;T++){const I=this.i(V)>>>16,S=this.i(V)&65535,ve=D.i(T)>>>16,xe=D.i(T)&65535;M[2*V+2*T]+=S*xe,ce(M,2*V+2*T),M[2*V+2*T+1]+=I*xe,ce(M,2*V+2*T+1),M[2*V+2*T+1]+=S*ve,ce(M,2*V+2*T+1),M[2*V+2*T+2]+=I*ve,ce(M,2*V+2*T+2)}for(D=0;D<A;D++)M[D]=M[2*D+1]<<16|M[2*D];for(D=A;D<2*A;D++)M[D]=0;return new m(M,0)};function ce(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function te(D,A){this.g=D,this.h=A}function he(D,A){if(L(A))throw Error("division by zero");if(L(D))return new te(N,N);if(Z(D))return A=he(P(D),A),new te(P(A.g),P(A.h));if(Z(A))return A=he(D,P(A)),new te(P(A.g),A.h);if(D.g.length>30){if(Z(D)||Z(A))throw Error("slowDivide_ only works with positive integers.");for(var M=j,V=A;V.l(D)<=0;)M=Se(M),V=Se(V);var T=Me(M,1),I=Me(V,1);for(V=Me(V,2),M=Me(M,2);!L(V);){var S=I.add(V);S.l(D)<=0&&(T=T.add(M),I=S),V=Me(V,1),M=Me(M,1)}return A=ge(D,T.j(A)),new te(T,A)}for(T=N;D.l(A)>=0;){for(M=Math.max(1,Math.floor(D.m()/A.m())),V=Math.ceil(Math.log(M)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),I=g(M),S=I.j(A);Z(S)||S.l(D)>0;)M-=V,I=g(M),S=I.j(A);L(I)&&(I=j),T=T.add(I),D=ge(D,S)}return new te(T,D)}r.B=function(D){return he(this,D).h},r.and=function(D){const A=Math.max(this.g.length,D.g.length),M=[];for(let V=0;V<A;V++)M[V]=this.i(V)&D.i(V);return new m(M,this.h&D.h)},r.or=function(D){const A=Math.max(this.g.length,D.g.length),M=[];for(let V=0;V<A;V++)M[V]=this.i(V)|D.i(V);return new m(M,this.h|D.h)},r.xor=function(D){const A=Math.max(this.g.length,D.g.length),M=[];for(let V=0;V<A;V++)M[V]=this.i(V)^D.i(V);return new m(M,this.h^D.h)};function Se(D){const A=D.g.length+1,M=[];for(let V=0;V<A;V++)M[V]=D.i(V)<<1|D.i(V-1)>>>31;return new m(M,D.h)}function Me(D,A){const M=A>>5;A%=32;const V=D.g.length-M,T=[];for(let I=0;I<V;I++)T[I]=A>0?D.i(I+M)>>>A|D.i(I+M+1)<<32-A:D.i(I+M);return new m(T,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Y0=i,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=g,m.fromString=v,Ga=m}).apply(typeof hx<"u"?hx:typeof self<"u"?self:typeof window<"u"?window:{});var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q0,to,K0,ou,xf,X0,Z0,J0;(function(){var r,t=Object.defineProperty;function s(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof su=="object"&&su];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=s(this);function c(h,y){if(y)e:{var _=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var B=h[w];if(!(B in _))break e;_=_[B]}h=h[h.length-1],w=_[h],y=y(w),y!=w&&y!=null&&t(_,h,{configurable:!0,writable:!0,value:y})}}c("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(h){return h||function(y){var _=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&_.push([w,y[w]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},m=this||self;function x(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,_){return h.call.apply(h.bind,arguments)}function g(h,y,_){return g=p,g.apply(null,arguments)}function v(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function N(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(w,B,K){for(var fe=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)fe[Be-2]=arguments[Be];return y.prototype[B].apply(w,fe)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function z(h){const y=h.length;if(y>0){const _=Array(y);for(let w=0;w<y;w++)_[w]=h[w];return _}return[]}function L(h,y){for(let w=1;w<arguments.length;w++){const B=arguments[w];var _=typeof B;if(_=_!="object"?_:B?Array.isArray(B)?"array":_:"null",_=="array"||_=="object"&&typeof B.length=="number"){_=h.length||0;const K=B.length||0;h.length=_+K;for(let fe=0;fe<K;fe++)h[_+fe]=B[fe]}else h.push(B)}}class Z{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function P(h){m.setTimeout(()=>{throw h},0)}function ge(){var h=D;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,_){const w=te.get();w.set(y,_),this.h?this.h.next=w:this.g=w,this.h=w}}var te=new Z(()=>new he,h=>h.reset());class he{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,Me=!1,D=new ce,A=()=>{const h=Promise.resolve(void 0);Se=()=>{h.then(M)}};function M(){for(var h;h=ge();){try{h.h.call(h.g)}catch(_){P(_)}var y=te;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Me=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};m.addEventListener("test",_,y),m.removeEventListener("test",_,y)}catch{}return h})();function S(h){return/^[\s\xa0]*$/.test(h)}function ve(h,y){T.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}N(ve,T),ve.prototype.init=function(h,y){const _=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),G=0;function $(h,y,_,w,B){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!w,this.ha=B,this.key=++G,this.da=this.fa=!1}function de(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _e(h,y,_){for(const w in h)y.call(_,h[w],w,h)}function Ue(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function C(h){const y={};for(const _ in h)y[_]=h[_];return y}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,y){let _,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(_ in w)h[_]=w[_];for(let K=0;K<Y.length;K++)_=Y[K],Object.prototype.hasOwnProperty.call(w,_)&&(h[_]=w[_])}}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,y,_,w,B){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const fe=Te(h,y,w,B);return fe>-1?(y=h[fe],_||(y.fa=!1)):(y=new $(y,this.src,K,!!w,B),y.fa=_,h.push(y)),y};function oe(h,y){const _=y.type;if(_ in h.g){var w=h.g[_],B=Array.prototype.indexOf.call(w,y,void 0),K;(K=B>=0)&&Array.prototype.splice.call(w,B,1),K&&(de(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Te(h,y,_,w){for(let B=0;B<h.length;++B){const K=h[B];if(!K.da&&K.listener==y&&K.capture==!!_&&K.ha==w)return B}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),tt={};function Ce(h,y,_,w,B){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Ce(h,y[K],_,w,B);return null}return _=se(_),h&&h[xe]?h.J(y,_,x(w)?!!w.capture:!1,B):Tt(h,y,_,!1,w,B)}function Tt(h,y,_,w,B,K){if(!y)throw Error("Invalid event type");const fe=x(B)?!!B.capture:!!B;let Be=ne(h);if(Be||(h[ke]=Be=new pe(h)),_=Be.add(y,_,w,fe,K),_.proxy)return _;if(w=Ee(),_.proxy=w,w.src=h,w.listener=_,h.addEventListener)I||(B=fe),B===void 0&&(B=!1),h.addEventListener(y.toString(),w,B);else if(h.attachEvent)h.attachEvent(Ve(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ee(){function h(_){return y.call(h.src,h.listener,_)}const y=R;return h}function J(h,y,_,w,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)J(h,y[K],_,w,B);else w=x(w)?!!w.capture:!!w,_=se(_),h&&h[xe]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],_=Te(y,_,w,B),_>-1&&(de(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=ne(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Te(y,_,w,B)),(_=h>-1?y[h]:null)&&Ae(_))}function Ae(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[xe])oe(y.i,h);else{var _=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(_,w,h.capture):y.detachEvent?y.detachEvent(Ve(_),w):y.addListener&&y.removeListener&&y.removeListener(w),(_=ne(y))?(oe(_,h),_.h==0&&(_.src=null,y[ke]=null)):de(h)}}}function Ve(h){return h in tt?tt[h]:tt[h]="on"+h}function R(h,y){if(h.da)h=!0;else{y=new ve(y,this);const _=h.listener,w=h.ha||h.src;h.fa&&Ae(h),h=_.call(w,y)}return h}function ne(h){return h=h[ke],h instanceof pe?h:null}var He="__closure_events_fn_"+(Math.random()*1e9>>>0);function se(h){return typeof h=="function"?h:(h[He]||(h[He]=function(y){return h.handleEvent(y)}),h[He])}function me(){V.call(this),this.i=new pe(this),this.M=this,this.G=null}N(me,V),me.prototype[xe]=!0,me.prototype.removeEventListener=function(h,y,_,w){J(this,h,y,_,w)};function Q(h,y){var _,w=h.G;if(w)for(_=[];w;w=w.G)_.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new T(y,h);else if(y instanceof T)y.target=y.target||h;else{var B=y;y=new T(w,h),ue(y,B)}B=!0;let K,fe;if(_)for(fe=_.length-1;fe>=0;fe--)K=y.g=_[fe],B=we(K,w,!0,y)&&B;if(K=y.g=h,B=we(K,w,!0,y)&&B,B=we(K,w,!1,y)&&B,_)for(fe=0;fe<_.length;fe++)K=y.g=_[fe],B=we(K,w,!1,y)&&B}me.prototype.N=function(){if(me.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let w=0;w<_.length;w++)de(_[w]);delete h.g[y],h.h--}}this.G=null},me.prototype.J=function(h,y,_,w){return this.i.add(String(h),y,!1,_,w)},me.prototype.K=function(h,y,_,w){return this.i.add(String(h),y,!0,_,w)};function we(h,y,_,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let K=0;K<y.length;++K){const fe=y[K];if(fe&&!fe.da&&fe.capture==_){const Be=fe.listener,At=fe.ha||fe.src;fe.fa&&oe(h.i,fe),B=Be.call(At,w)!==!1&&B}}return B&&!w.defaultPrevented}function it(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:m.setTimeout(h,y||0)}function fn(h){h.g=it(()=>{h.g=null,h.i&&(h.i=!1,fn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Jt extends V{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:fn(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nr(h){V.call(this),this.h=h,this.g={}}N(nr,V);var Zi=[];function Ji(h){_e(h.g,function(y,_){this.g.hasOwnProperty(_)&&Ae(y)},h),h.g={}}nr.prototype.N=function(){nr.Z.N.call(this),Ji(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ca=m.JSON.stringify,Xu=m.JSON.parse,Co=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Ro(){}function Do(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){T.call(this,"d")}N(Wt,T);function zn(){T.call(this,"c")}N(zn,T);var St={},Mo=null;function qr(){return Mo=Mo||new me}St.Ia="serverreachability";function Io(h){T.call(this,St.Ia,h)}N(Io,T);function ds(h){const y=qr();Q(y,new Io(y))}St.STAT_EVENT="statevent";function sr(h,y){T.call(this,St.STAT_EVENT,h),this.stat=y}N(sr,T);function Ot(h){const y=qr();Q(y,new sr(y,h))}St.Ja="timingevent";function fs(h,y){T.call(this,St.Ja,h),this.size=y}N(fs,T);function ms(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},y)}function Jn(){this.g=!0}Jn.prototype.ua=function(){this.g=!1};function Zu(h,y,_,w,B,K){h.info(function(){if(h.g)if(K){var fe="",Be=K.split("&");for(let at=0;at<Be.length;at++){var At=Be[at].split("=");if(At.length>1){const vt=At[0];At=At[1];const Bn=vt.split("_");fe=Bn.length>=2&&Bn[1]=="type"?fe+(vt+"="+At+"&"):fe+(vt+"=redacted&")}}}else fe=null;else fe=K;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+y+`
`+_+`
`+fe})}function Oo(h,y,_,w,B,K,fe){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+y+`
`+_+`
`+K+" "+fe})}function gs(h,y,_,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ju(h,_)+(w?" "+w:"")})}function ar(h,y){h.info(function(){return"TIMEOUT: "+y})}Jn.prototype.info=function(){};function Ju(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var _=K[h];if(!(_.length<2)){var w=_[1];if(Array.isArray(w)&&!(w.length<1)){var B=w[0];if(B!="noop"&&B!="stop"&&B!="close")for(let fe=1;fe<w.length;fe++)w[fe]=""}}}}return ca(K)}catch{return y}}var rr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},el;function ir(){}N(ir,Ro),ir.prototype.g=function(){return new XMLHttpRequest},el=new ir;function Ps(h){return encodeURIComponent(String(h))}function Vo(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function Wn(h,y,_,w){this.j=h,this.i=y,this.l=_,this.S=w||1,this.V=new nr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}var Vt={},Qt={};function ps(h,y,_){h.M=1,h.A=lr(zt(y)),h.u=_,h.R=!0,Hr(h,null)}function Hr(h,y){h.F=Date.now(),ys(h),h.B=zt(h.A);var _=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Yr(_.i,"t",w),h.C=0,_=h.j.L,h.h=new es,h.g=Xo(h.j,_?y:null,!h.u),h.P>0&&(h.O=new Jt(g(h.Y,h,h.g),h.P)),y=h.V,_=h.g,w=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(Zi[0]=B.toString()),B=Zi);for(let K=0;K<B.length;K++){const fe=Ce(_,B[K],w||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=h.J?C(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ds(),Zu(h.i,h.v,h.B,h.l,h.S,h.u)}Wn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ss(h)==3?y.j():this.Y(h)},Wn.prototype.Y=function(h){try{if(h==this.g)e:{const Be=ss(this.g),At=this.g.ya(),at=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||Be!=4||At==7||(At==8||at<=0?ds(3):ds(2)),xs(this);var y=this.g.ca();this.X=y;var _=Wu(this);if(this.o=y==200,Oo(this.i,this.v,this.B,this.l,this.S,Be,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,B=this.g;if((w=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(w)){var K=w;break t}}K=null}if(h=K)gs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bs(this,h);else{this.o=!1,this.m=3,Ot(12),Tn(this),Un(this);break e}}if(this.R){h=!0;let vt;for(;!this.K&&this.C<_.length;)if(vt=zo(this,_),vt==Qt){Be==4&&(this.m=4,Ot(14),h=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Vt){this.m=4,Ot(15),gs(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else gs(this.i,this.l,vt,null),bs(this,vt);if(ko(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||_.length!=0||this.h.h||(this.m=1,Ot(16),h=!1),this.o=this.o&&h,!h)gs(this.i,this.l,_,"[Invalid Chunked Response]"),Tn(this),Un(this);else if(_.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),gl(fe),fe.P=!0,Ot(11))}}else gs(this.i,this.l,_,null),bs(this,_);Be==4&&Tn(this),this.o&&!this.K&&(Be==4?$o(this.j,this):(this.o=!1,ys(this)))}else qs(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Tn(this),Un(this)}}}catch{}finally{}};function Wu(h){if(!ko(h))return h.g.la();const y=en(h.g);if(y==="")return"";let _="";const w=y.length,B=ss(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Tn(h),Un(h),"";h.h.i=new m.TextDecoder}for(let K=0;K<w;K++)h.h.h=!0,_+=h.h.i.decode(y[K],{stream:!(B&&K==w-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function ko(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function zo(h,y){var _=h.C,w=y.indexOf(`
`,_);return w==-1?Qt:(_=Number(y.substring(_,w)),isNaN(_)?Vt:(w+=1,w+_>y.length?Qt:(y=y.slice(w,w+_),h.C=w+_,y)))}Wn.prototype.cancel=function(){this.K=!0,Tn(this)};function ys(h){h.T=Date.now()+h.H,Gr(h,h.H)}function Gr(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ms(g(h.aa,h),y)}function xs(h){h.D&&(m.clearTimeout(h.D),h.D=null)}Wn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ar(this.i,this.B),this.M!=2&&(ds(),Ot(17)),Tn(this),this.m=2,Un(this)):Gr(this,this.T-h)};function Un(h){h.j.I==0||h.K||$o(h.j,h)}function Tn(h){xs(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Ji(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function bs(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||_s(_.h,h))){if(!h.L&&_s(_.h,h)&&_.I==3){try{var w=_.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Jr(_),ya(_);else break e;mr(_),Ot(18)}}else _.xa=B[1],0<_.xa-_.K&&B[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ms(g(_.Va,_),6e3));vs(_.h)<=1&&_.ta&&(_.ta=void 0)}else Ss(_,11)}else if((h.L||_.g==h)&&Jr(_),!S(y))for(B=_.Ba.g.parse(y),y=0;y<B.length;y++){let at=B[y];const vt=at[0];if(!(vt<=_.K))if(_.K=vt,at=at[1],_.I==2)if(at[0]=="c"){_.M=at[1],_.ba=at[2];const Bn=at[3];Bn!=null&&(_.ka=Bn,_.j.info("VER="+_.ka));const As=at[4];As!=null&&(_.za=As,_.j.info("SVER="+_.za));const as=at[5];as!=null&&typeof as=="number"&&as>0&&(w=1.5*as,_.O=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const rs=h.g;if(rs){const gr=rs.g?rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gr){var K=w.h;K.g||gr.indexOf("spdy")==-1&&gr.indexOf("quic")==-1&&gr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(sl(K,K.h),K.h=null))}if(w.G){const Wr=rs.g?rs.g.getResponseHeader("X-HTTP-Session-Id"):null;Wr&&(w.wa=Wr,ot(w.J,w.G,Wr))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),w=_;var fe=h;if(w.na=Ko(w,w.L?w.ba:null,w.W),fe.L){al(w.h,fe);var Be=fe,At=w.O;At&&(Be.H=At),Be.D&&(xs(Be),ys(Be)),w.g=fe}else Go(w);_.i.length>0&&Ts(_)}else at[0]!="stop"&&at[0]!="close"||Ss(_,7);else _.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Ss(_,7):fl(_):at[0]!="noop"&&_.l&&_.l.qa(at),_.A=0)}}ds(4)}catch{}}var kt=class{constructor(h,y){this.g=h,this.map=y}};function tl(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vs(h){return h.h?1:h.g?h.g.size:0}function _s(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function sl(h,y){h.g?h.g.add(y):h.h=y}function al(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}tl.prototype.cancel=function(){if(this.i=rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function rl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return z(h.i)}var Uo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fr(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const w=h[_].indexOf("=");let B,K=null;w>=0?(B=h[_].substring(0,w),K=h[_].substring(w+1)):B=h[_],y(B,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Sn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Sn?(this.l=h.l,Kt(this,h.j),this.o=h.o,this.g=h.g,ua(this,h.u),this.h=h.h,il(this,qo(h.i)),this.m=h.m):h&&(y=String(h).match(Uo))?(this.l=!1,Kt(this,y[1]||"",!0),this.o=Ns(y[2]||""),this.g=Ns(y[3]||"",!0),ua(this,y[4]),this.h=Ns(y[5]||"",!0),il(this,y[6]||"",!0),this.m=Ns(y[7]||"")):(this.l=!1,this.i=new da(null,this.l))}Sn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(or(y,$r,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(or(y,$r,!0),"@"),h.push(Ps(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(or(_,_.charAt(0)=="/"?ll:Lo,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",or(_,Po)),h.join("")},Sn.prototype.resolve=function(h){const y=zt(this);let _=!!h.j;_?Kt(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var w=h.h;if(_)ua(y,h.u);else if(_=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var B=y.h.lastIndexOf("/");B!=-1&&(w=y.h.slice(0,B+1)+w)}if(B=w,B==".."||B==".")w="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){w=B.lastIndexOf("/",0)==0,B=B.split("/");const K=[];for(let fe=0;fe<B.length;){const Be=B[fe++];Be=="."?w&&fe==B.length&&K.push(""):Be==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),w&&fe==B.length&&K.push("")):(K.push(Be),w=!0)}w=K.join("/")}else w=B}return _?y.h=w:_=h.i.toString()!=="",_?il(y,qo(h.i)):_=!!h.m,_&&(y.m=h.m),y};function zt(h){return new Sn(h)}function Kt(h,y,_){h.j=_?Ns(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ua(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function il(h,y,_){y instanceof da?(h.i=y,Qr(h.i,h.l)):(_||(y=or(y,ha)),h.i=new da(y,h.l))}function ot(h,y,_){h.i.set(y,_)}function lr(h){return ot(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ns(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function or(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,pn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function pn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var $r=/[#\/\?@]/g,Lo=/[#\?:]/g,ll=/[#\?]/g,ha=/[#\?@]/g,Po=/#/g;function da(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function yn(h){h.g||(h.g=new Map,h.h=0,h.i&&Fr(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=da.prototype,r.add=function(h,y){yn(this),this.i=null,h=fa(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Bo(h,y){yn(h),y=fa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function ol(h,y){return yn(h),y=fa(h,y),h.g.has(y)}r.forEach=function(h,y){yn(this),this.g.forEach(function(_,w){_.forEach(function(B){h.call(y,B,w,this)},this)},this)};function cl(h,y){yn(h);let _=[];if(typeof y=="string")ol(h,y)&&(_=_.concat(h.g.get(fa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}r.set=function(h,y){return yn(this),this.i=null,h=fa(this,h),ol(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=cl(this,h),h.length>0?String(h[0]):y):y};function Yr(h,y,_){Bo(h,y),_.length>0&&(h.i=null,h.g.set(fa(h,y),z(_)),h.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var _=y[w];const B=Ps(_);_=cl(this,_);for(let K=0;K<_.length;K++){let fe=B;_[K]!==""&&(fe+="="+Ps(_[K])),h.push(fe)}}return this.i=h.join("&")};function qo(h){const y=new da;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function fa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Qr(h,y){y&&!h.j&&(yn(h),h.i=null,h.g.forEach(function(_,w){const B=w.toLowerCase();w!=B&&(Bo(this,w),Yr(this,B,_))},h)),h.j=y}function ts(h,y){const _=new Jn;if(m.Image){const w=new Image;w.onload=v(Ln,_,"TestLoadImage: loaded",!0,y,w),w.onerror=v(Ln,_,"TestLoadImage: error",!1,y,w),w.onabort=v(Ln,_,"TestLoadImage: abort",!1,y,w),w.ontimeout=v(Ln,_,"TestLoadImage: timeout",!1,y,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function ul(h,y){const _=new Jn,w=new AbortController,B=setTimeout(()=>{w.abort(),Ln(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(K=>{clearTimeout(B),K.ok?Ln(_,"TestPingServer: ok",!0,y):Ln(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Ln(_,"TestPingServer: error",!1,y)})}function Ln(h,y,_,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(_)}catch{}}function ma(){this.g=new Co}function Es(h){this.i=h.Sb||null,this.h=h.ab||!1}N(Es,Ro),Es.prototype.g=function(){return new cr(this.i,this.h)};function cr(h,y){me.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}N(cr,me),r=cr.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ns(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||m).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ga(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ns(this)),this.g&&(this.readyState=3,ns(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ga(this):ns(this),this.readyState==3&&Kr(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,ga(this))},r.Na=function(h){this.g&&(this.response=h,ga(this))},r.ga=function(){this.g&&ga(this)};function ga(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ns(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function ns(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(cr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Pn(h){let y="";return _e(h,function(_,w){y+=w,y+=":",y+=_,y+=`\r
`}),y}function ur(h,y,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=Pn(_),typeof h=="string"?_!=null&&Ps(_):ot(h,y,_))}function ht(h){me.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}N(ht,me);var ws=/^https?$/i,hl=["POST","PUT"];r=ht.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():el.g(),this.g.onreadystatechange=j(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){hr(this,K);return}if(h=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)_.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())_.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),B=m.FormData&&h instanceof m.FormData,!(Array.prototype.indexOf.call(hl,y,void 0)>=0)||w||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,fe]of _)this.g.setRequestHeader(K,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){hr(this,K)}};function hr(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,dl(h),Bs(h)}function dl(h){h.A||(h.A=!0,Q(h,"complete"),Q(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Q(this,"complete"),Q(this,"abort"),Bs(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bs(this,!0)),ht.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?dr(this):this.Xa())},r.Xa=function(){dr(this)};function dr(h){if(h.h&&typeof u<"u"){if(h.v&&ss(h)==4)setTimeout(h.Ca.bind(h),0);else if(Q(h,"readystatechange"),ss(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var w;if(w=K===0){let fe=String(h.D).match(Uo)[1]||null;!fe&&m.self&&m.self.location&&(fe=m.self.location.protocol.slice(0,-1)),w=!ws.test(fe?fe.toLowerCase():"")}_=w}if(_)Q(h,"complete"),Q(h,"success");else{h.o=6;try{var B=ss(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",dl(h)}}finally{Bs(h)}}}}function Bs(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||Q(h,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ss(h){return h.g?h.g.readyState:0}r.ca=function(){try{return ss(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Xu(y)}};function en(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(h){const y={};h=(h.g&&ss(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(S(h[w]))continue;var _=Vo(h[w]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=y[B]||[];y[B]=K,K.push(_)}Ue(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function js(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function pa(h){this.za=0,this.i=[],this.j=new Jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=js("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=js("baseRetryDelayMs",5e3,h),this.Za=js("retryDelaySeedMs",1e4,h),this.Ta=js("forwardChannelMaxRetries",2,h),this.va=js("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new tl(h&&h.concurrentRequestLimit),this.Ba=new ma,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=pa.prototype,r.ka=8,r.I=1,r.connect=function(h,y,_,w){Ot(0),this.W=h,this.H=y||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.J=Ko(this,null,this.W),Ts(this)};function fl(h){if(Xr(h),h.I==3){var y=h.V++,_=zt(h.J);if(ot(_,"SID",h.M),ot(_,"RID",y),ot(_,"TYPE","terminate"),fr(h,_),y=new Wn(h,h.j,y),y.M=2,y.A=lr(zt(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&m.Image&&(new Image().src=y.A,_=!0),_||(y.g=Xo(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ys(y)}Qo(h)}function ya(h){h.g&&(gl(h),h.g.cancel(),h.g=null)}function Xr(h){ya(h),h.v&&(m.clearTimeout(h.v),h.v=null),Jr(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&m.clearTimeout(h.m),h.m=null)}function Ts(h){if(!nl(h.h)&&!h.m){h.m=!0;var y=h.Ea;Se||A(),Me||(Se(),Me=!0),D.add(y,h),h.D=0}}function Zr(h,y){return vs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ms(g(h.Ea,h,y),Yo(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new Wn(this,this.j,h);let K=this.o;if(this.U&&(K?(K=C(K),ue(K,this.U)):K=this.U),this.u!==null||this.R||(B.J=K,K=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Ho(this,B,y),_=zt(this.J),ot(_,"RID",h),ot(_,"CVER",22),this.G&&ot(_,"X-HTTP-Session-Id",this.G),fr(this,_),K&&(this.R?y="headers="+Ps(Pn(K))+"&"+y:this.u&&ur(_,this.u,K)),sl(this.h,B),this.Ra&&ot(_,"TYPE","init"),this.S?(ot(_,"$req",y),ot(_,"SID","null"),B.U=!0,ps(B,_,null)):ps(B,_,y),this.I=2}}else this.I==3&&(h?ml(this,h):this.i.length==0||nl(this.h)||ml(this))};function ml(h,y){var _;y?_=y.l:_=h.V++;const w=zt(h.J);ot(w,"SID",h.M),ot(w,"RID",_),ot(w,"AID",h.K),fr(h,w),h.u&&h.o&&ur(w,h.u,h.o),_=new Wn(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ho(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),sl(h.h,_),ps(_,w,y)}function fr(h,y){h.H&&_e(h.H,function(_,w){ot(y,w,_)}),h.l&&_e({},function(_,w){ot(y,w,_)})}function Ho(h,y,_){_=Math.min(h.i.length,_);const w=h.l?g(h.l.Ka,h.l,h):null;e:{var B=h.i;let Be=-1;for(;;){const At=["count="+_];Be==-1?_>0?(Be=B[0].g,At.push("ofs="+Be)):Be=0:At.push("ofs="+Be);let at=!0;for(let vt=0;vt<_;vt++){var K=B[vt].g;const Bn=B[vt].map;if(K-=Be,K<0)Be=Math.max(0,B[vt].g-100),at=!1;else try{K="req"+K+"_"||"";try{var fe=Bn instanceof Map?Bn:Object.entries(Bn);for(const[As,as]of fe){let rs=as;x(as)&&(rs=ca(as)),At.push(K+As+"="+encodeURIComponent(rs))}}catch(As){throw At.push(K+"type="+encodeURIComponent("_badmap")),As}}catch{w&&w(Bn)}}if(at){fe=At.join("&");break e}}fe=void 0}return h=h.i.splice(0,_),y.G=h,fe}function Go(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Se||A(),Me||(Se(),Me=!0),D.add(y,h),h.A=0}}function mr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ms(g(h.Da,h),Yo(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Fo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ms(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),ya(this),Fo(this))};function gl(h){h.B!=null&&(m.clearTimeout(h.B),h.B=null)}function Fo(h){h.g=new Wn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=zt(h.na);ot(y,"RID","rpc"),ot(y,"SID",h.M),ot(y,"AID",h.K),ot(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&ot(y,"TO",h.ia),ot(y,"TYPE","xmlhttp"),fr(h,y),h.u&&h.o&&ur(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=lr(zt(y)),_.u=null,_.R=!0,Hr(_,h)}r.Va=function(){this.C!=null&&(this.C=null,ya(this),mr(this),Ot(19))};function Jr(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function $o(h,y){var _=null;if(h.g==y){Jr(h),gl(h),h.g=null;var w=2}else if(_s(h.h,y))_=y.G,al(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;w=qr(),Q(w,new fs(w,_)),Ts(h)}else Go(h);else if(B=y.m,B==3||B==0&&y.X>0||!(w==1&&Zr(h,y)||w==2&&mr(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),B){case 1:Ss(h,5);break;case 4:Ss(h,10);break;case 3:Ss(h,6);break;default:Ss(h,2)}}}function Yo(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function Ss(h,y){if(h.j.info("Error code "+y),y==2){var _=g(h.bb,h),w=h.Ua;const B=!w;w=new Sn(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Kt(w,"https"),lr(w),B?ts(w.toString(),_):ul(w.toString(),_)}else Ot(2);h.I=0,h.l&&h.l.pa(y),Qo(h),Xr(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Qo(h){if(h.I=0,h.ja=[],h.l){const y=rl(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ja,y),L(h.ja,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.oa()}}function Ko(h,y,_){var w=_ instanceof Sn?zt(_):new Sn(_);if(w.g!="")y&&(w.g=y+"."+w.g),ua(w,w.u);else{var B=m.location;w=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const K=new Sn(null);w&&Kt(K,w),y&&(K.g=y),B&&ua(K,B),_&&(K.h=_),w=K}return _=h.G,y=h.wa,_&&y&&ot(w,_,y),ot(w,"VER",h.ka),fr(h,w),w}function Xo(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ht(new Es({ab:_})):new ht(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zo(){}r=Zo.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function xa(){}xa.prototype.g=function(h,y){return new mn(h,y)};function mn(h,y){me.call(this),this.g=new pa(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!S(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!S(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Hs(this)}N(mn,me),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){fl(this.g)},mn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=ca(h),h=_);y.i.push(new kt(y.Ya++,h)),y.I==3&&Ts(y)},mn.prototype.N=function(){this.g.l=null,delete this.j,fl(this.g),delete this.g,mn.Z.N.call(this)};function Jo(h){Wt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}N(Jo,Wt);function Wo(){zn.call(this),this.status=1}N(Wo,zn);function Hs(h){this.g=h}N(Hs,Zo),Hs.prototype.ra=function(){Q(this.g,"a")},Hs.prototype.qa=function(h){Q(this.g,new Jo(h))},Hs.prototype.pa=function(h){Q(this.g,new Wo)},Hs.prototype.oa=function(){Q(this.g,"b")},xa.prototype.createWebChannel=xa.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,J0=function(){return new xa},Z0=function(){return qr()},X0=St,xf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rr.NO_ERROR=0,rr.TIMEOUT=8,rr.HTTP_ERROR=6,ou=rr,Wi.COMPLETE="complete",K0=Wi,Do.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",me.prototype.listen=me.prototype.J,to=Do,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,Q0=ht}).apply(typeof su<"u"?su:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i="12.9.0";function vE(r){$i=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new B0("@firebase/firestore");function Ci(){return Vr.logLevel}function be(r,...t){if(Vr.logLevel<=et.DEBUG){const s=t.map(Pf);Vr.debug(`Firestore (${$i}): ${r}`,...s)}}function la(r,...t){if(Vr.logLevel<=et.ERROR){const s=t.map(Pf);Vr.error(`Firestore (${$i}): ${r}`,...s)}}function kr(r,...t){if(Vr.logLevel<=et.WARN){const s=t.map(Pf);Vr.warn(`Firestore (${$i}): ${r}`,...s)}}function Pf(r){if(typeof r=="string")return r;try{return(function(s){return JSON.stringify(s)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(r,t,s){let i="Unexpected state";typeof t=="string"?i=t:s=t,W0(r,i,s)}function W0(r,t,s){let i=`FIRESTORE (${$i}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(s!==void 0)try{i+=" CONTEXT: "+JSON.stringify(s)}catch{i+=" CONTEXT: "+s}throw la(i),new Error(i)}function lt(r,t,s,i){let c="Unexpected state";typeof s=="string"?c=s:i=s,r||W0(t,c,i)}function Pe(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Fi{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.promise=new Promise(((t,s)=>{this.resolve=t,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class _E{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable((()=>s(hn.UNAUTHENTICATED)))}shutdown(){}}class NE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class EE{constructor(t){this.t=t,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){lt(this.o===void 0,42304);let i=this.i;const c=p=>this.i!==i?(i=this.i,s(p)):Promise.resolve();let u=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ra,t.enqueueRetryable((()=>c(this.currentUser)))};const m=()=>{const p=u;t.enqueueRetryable((async()=>{await p.promise,await c(this.currentUser)}))},x=p=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((p=>x(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?x(p):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ra)}}),0),m()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((i=>this.i!==t?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string",31837,{l:i}),new eb(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return lt(t===null||typeof t=="string",2055,{h:t}),new hn(t)}}class wE{constructor(t,s,i){this.P=t,this.T=s,this.I=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class jE{constructor(t,s,i){this.P=t,this.T=s,this.I=i}getToken(){return Promise.resolve(new wE(this.P,this.T,this.I))}start(t,s){t.enqueueRetryable((()=>s(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TE{constructor(t,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sE(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,s){lt(this.o===void 0,3512);const i=u=>{u.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const m=u.token!==this.m;return this.m=u.token,be("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?s(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>i(u)))};const c=u=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>c(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?c(u):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new dx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((s=>s?(lt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new dx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let i=0;i<r;i++)s[i]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const c=SE(40);for(let u=0;u<c.length;++u)i.length<20&&c[u]<s&&(i+=t.charAt(c[u]%62))}return i}}function Xe(r,t){return r<t?-1:r>t?1:0}function bf(r,t){const s=Math.min(r.length,t.length);for(let i=0;i<s;i++){const c=r.charAt(i),u=t.charAt(i);if(c!==u)return af(c)===af(u)?Xe(c,u):af(c)?1:-1}return Xe(r.length,t.length)}const AE=55296,CE=57343;function af(r){const t=r.charCodeAt(0);return t>=AE&&t<=CE}function Li(r,t,s){return r.length===t.length&&r.every(((i,c)=>s(i,t[c])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="__name__";class Is{constructor(t,s,i){s===void 0?s=0:s>t.length&&Oe(637,{offset:s,range:t.length}),i===void 0?i=t.length-s:i>t.length-s&&Oe(1746,{length:i,range:t.length-s}),this.segments=t,this.offset=s,this.len=i}get length(){return this.len}isEqual(t){return Is.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof Is?t.forEach((i=>{s.push(i)})):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,i=this.limit();s<i;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const i=Math.min(t.length,s.length);for(let c=0;c<i;c++){const u=Is.compareSegments(t.get(c),s.get(c));if(u!==0)return u}return Xe(t.length,s.length)}static compareSegments(t,s){const i=Is.isNumericId(t),c=Is.isNumericId(s);return i&&!c?-1:!i&&c?1:i&&c?Is.extractNumericId(t).compare(Is.extractNumericId(s)):bf(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ga.fromString(t.substring(4,t.length-2))}}class yt extends Is{construct(t,s,i){return new yt(t,s,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const i of t){if(i.indexOf("//")>=0)throw new ye(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);s.push(...i.split("/").filter((c=>c.length>0)))}return new yt(s)}static emptyPath(){return new yt([])}}const RE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Is{construct(t,s,i){return new ln(t,s,i)}static isValidIdentifier(t){return RE.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fx}static keyField(){return new ln([fx])}static fromServerFormat(t){const s=[];let i="",c=0;const u=()=>{if(i.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(i),i=""};let m=!1;for(;c<t.length;){const x=t[c];if(x==="\\"){if(c+1===t.length)throw new ye(re.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[c+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ye(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,c+=2}else x==="`"?(m=!m,c++):x!=="."||m?(i+=x,c++):(u(),c++)}if(u(),m)throw new ye(re.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ln(s)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.path=t}static fromPath(t){return new De(yt.fromString(t))}static fromName(t){return new De(yt.fromString(t).popFirst(5))}static empty(){return new De(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&yt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return yt.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new De(new yt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(r,t,s){if(!s)throw new ye(re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function DE(r,t,s,i){if(t===!0&&i===!0)throw new ye(re.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function mx(r){if(!De.isDocumentKey(r))throw new ye(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function gx(r){if(De.isDocumentKey(r))throw new ye(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function nb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Du(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Oe(12329,{type:typeof r})}function Us(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ye(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Du(r);throw new ye(re.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(r,t){const s={typeString:r};return t&&(s.value=t),s}function No(r,t){if(!nb(r))throw new ye(re.INVALID_ARGUMENT,"JSON must be an object");let s;for(const i in t)if(t[i]){const c=t[i].typeString,u="value"in t[i]?{value:t[i].value}:void 0;if(!(i in r)){s=`JSON missing required field: '${i}'`;break}const m=r[i];if(c&&typeof m!==c){s=`JSON field '${i}' must be a ${c}.`;break}if(u!==void 0&&m!==u.value){s=`Expected '${i}' field to equal '${u.value}'`;break}}if(s)throw new ye(re.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=-62135596800,yx=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(t){return pt.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),i=Math.floor((t-1e3*s)*yx);return new pt(s,i)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new ye(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<px)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ye(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yx}_compareTo(t){return this.seconds===t.seconds?Xe(this.nanoseconds,t.nanoseconds):Xe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(No(t,pt._jsonSchema))return new pt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-px;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Gt("string",pt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(t){return new ze(t)}static min(){return new ze(new pt(0,0))}static max(){return new ze(new pt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=-1;function ME(r,t){const s=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,c=ze.fromTimestamp(i===1e9?new pt(s+1,0):new pt(s,i));return new $a(c,De.empty(),t)}function IE(r){return new $a(r.readTime,r.key,fo)}class $a{constructor(t,s,i){this.readTime=t,this.documentKey=s,this.largestBatchId=i}static min(){return new $a(ze.min(),De.empty(),fo)}static max(){return new $a(ze.max(),De.empty(),fo)}}function OE(r,t){let s=r.readTime.compareTo(t.readTime);return s!==0?s:(s=De.comparator(r.documentKey,t.documentKey),s!==0?s:Xe(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==VE)throw r;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new le(((i,c)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(i,c)},this.catchCallback=u=>{this.wrapFailure(s,u).next(i,c)}}))}toPromise(){return new Promise(((t,s)=>{this.next(t,s)}))}wrapUserFunction(t){try{const s=t();return s instanceof le?s:le.resolve(s)}catch(s){return le.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction((()=>t(s))):le.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction((()=>t(s))):le.reject(s)}static resolve(t){return new le(((s,i)=>{s(t)}))}static reject(t){return new le(((s,i)=>{i(t)}))}static waitFor(t){return new le(((s,i)=>{let c=0,u=0,m=!1;t.forEach((x=>{++c,x.next((()=>{++u,m&&u===c&&s()}),(p=>i(p)))})),m=!0,u===c&&s()}))}static or(t){let s=le.resolve(!1);for(const i of t)s=s.next((c=>c?le.resolve(c):i()));return s}static forEach(t,s){const i=[];return t.forEach(((c,u)=>{i.push(s.call(this,c,u))})),this.waitFor(i)}static mapArray(t,s){return new le(((i,c)=>{const u=t.length,m=new Array(u);let x=0;for(let p=0;p<u;p++){const g=p;s(t[g]).next((v=>{m[g]=v,++x,x===u&&i(m)}),(v=>c(v)))}}))}static doWhile(t,s){return new le(((i,c)=>{const u=()=>{t()===!0?s().next((()=>{u()}),c):i()};u()}))}}function zE(r){const t=r.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Qi(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>s.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Mu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=-1;function Iu(r){return r==null}function bu(r){return r===0&&1/r==-1/0}function UE(r){return typeof r=="number"&&Number.isInteger(r)&&!bu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="";function LE(r){let t="";for(let s=0;s<r.length;s++)t.length>0&&(t=xx(t)),t=PE(r.get(s),t);return xx(t)}function PE(r,t){let s=t;const i=r.length;for(let c=0;c<i;c++){const u=r.charAt(c);switch(u){case"\0":s+="";break;case sb:s+="";break;default:s+=u}}return s}function xx(r){return r+sb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(r){let t=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t++;return t}function er(r,t){for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t(s,r[s])}function ab(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(t,s){this.comparator=t,this.root=s||rn.EMPTY}insert(t,s){return new Nt(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(t){return new Nt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,rn.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}indexOf(t){let s=0,i=this.root;for(;!i.isEmpty();){const c=this.comparator(t,i.key);if(c===0)return s+i.left.size;c<0?i=i.left:(s+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((s,i)=>(t(s,i),!1)))}toString(){const t=[];return this.inorderTraversal(((s,i)=>(t.push(`${s}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new au(this.root,t,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new au(this.root,t,this.comparator,!0)}}class au{constructor(t,s,i,c){this.isReverse=c,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=s?i(t.key,s):1,s&&c&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class rn{constructor(t,s,i,c,u){this.key=t,this.value=s,this.color=i??rn.RED,this.left=c??rn.EMPTY,this.right=u??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,i,c,u){return new rn(t??this.key,s??this.value,i??this.color,c??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,i){let c=this;const u=i(t,c.key);return c=u<0?c.copy(null,null,null,c.left.insert(t,s,i),null):u===0?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(t,s,i)),c.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let i,c=this;if(s(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,s),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),s(t,c.key)===0){if(c.right.isEmpty())return rn.EMPTY;i=c.right.min(),c=c.copy(i.key,i.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,s))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Oe(27949);return t+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(t,s,i,c,u){return this}insert(t,s,i){return new rn(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t){this.comparator=t,this.data=new Nt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((s,i)=>(t(s),!1)))}forEachInRange(t,s){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const c=i.getNext();if(this.comparator(c.key,t[1])>=0)return;s(c.key)}}forEachWhile(t,s){let i;for(i=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new vx(this.data.getIterator())}getIteratorFrom(t){return new vx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach((i=>{s=s.add(i)})),s}isEqual(t){if(!(t instanceof Yt)||this.size!==t.size)return!1;const s=this.data.getIterator(),i=t.data.getIterator();for(;s.hasNext();){const c=s.getNext().key,u=i.getNext().key;if(this.comparator(c,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((s=>{t.push(s)})),t}toString(){const t=[];return this.forEach((s=>t.push(s))),"SortedSet("+t.toString()+")"}copy(t){const s=new Yt(this.comparator);return s.data=t,s}}class vx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.fields=t,t.sort(ln.comparator)}static empty(){return new Vn([])}unionWith(t){let s=new Yt(ln.comparator);for(const i of this.fields)s=s.add(i);for(const i of t)s=s.add(i);return new Vn(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return Li(this.fields,t.fields,((s,i)=>s.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.binaryString=t}static fromBase64String(t){const s=(function(c){try{return atob(c)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new rb("Invalid base64 string: "+u):u}})(t);return new on(s)}static fromUint8Array(t){const s=(function(c){let u="";for(let m=0;m<c.length;++m)u+=String.fromCharCode(c[m]);return u})(t);return new on(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const i=new Uint8Array(s.length);for(let c=0;c<s.length;c++)i[c]=s.charCodeAt(c);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}on.EMPTY_BYTE_STRING=new on("");const BE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ya(r){if(lt(!!r,39018),typeof r=="string"){let t=0;const s=BE.exec(r);if(lt(!!s,46558,{timestamp:r}),s[1]){let c=s[1];c=(c+"000000000").substr(0,9),t=Number(c)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:It(r.seconds),nanos:It(r.nanos)}}function It(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qa(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="server_timestamp",lb="__type__",ob="__previous_value__",cb="__local_write_time__";function Hf(r){var s,i;return((i=(((s=r==null?void 0:r.mapValue)==null?void 0:s.fields)||{})[lb])==null?void 0:i.stringValue)===ib}function Ou(r){const t=r.mapValue.fields[ob];return Hf(t)?Ou(t):t}function mo(r){const t=Ya(r.mapValue.fields[cb].timestampValue);return new pt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(t,s,i,c,u,m,x,p,g,v,N){this.databaseId=t,this.appId=s,this.persistenceKey=i,this.host=c,this.ssl=u,this.forceLongPolling=m,this.autoDetectLongPolling=x,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=N}}const vu="(default)";class go{constructor(t,s){this.projectId=t,this.database=s||vu}static empty(){return new go("","")}get isDefaultDatabase(){return this.database===vu}isEqual(t){return t instanceof go&&t.projectId===this.projectId&&t.database===this.database}}function HE(r,t){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ye(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new go(r.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="__type__",GE="__max__",ru={mapValue:{}},hb="__vector__",_u="value";function Ka(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Hf(r)?4:$E(r)?9007199254740991:FE(r)?10:11:Oe(28295,{value:r})}function Ls(r,t){if(r===t)return!0;const s=Ka(r);if(s!==Ka(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return mo(r).isEqual(mo(t));case 3:return(function(c,u){if(typeof c.timestampValue=="string"&&typeof u.timestampValue=="string"&&c.timestampValue.length===u.timestampValue.length)return c.timestampValue===u.timestampValue;const m=Ya(c.timestampValue),x=Ya(u.timestampValue);return m.seconds===x.seconds&&m.nanos===x.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(c,u){return Qa(c.bytesValue).isEqual(Qa(u.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(c,u){return It(c.geoPointValue.latitude)===It(u.geoPointValue.latitude)&&It(c.geoPointValue.longitude)===It(u.geoPointValue.longitude)})(r,t);case 2:return(function(c,u){if("integerValue"in c&&"integerValue"in u)return It(c.integerValue)===It(u.integerValue);if("doubleValue"in c&&"doubleValue"in u){const m=It(c.doubleValue),x=It(u.doubleValue);return m===x?bu(m)===bu(x):isNaN(m)&&isNaN(x)}return!1})(r,t);case 9:return Li(r.arrayValue.values||[],t.arrayValue.values||[],Ls);case 10:case 11:return(function(c,u){const m=c.mapValue.fields||{},x=u.mapValue.fields||{};if(bx(m)!==bx(x))return!1;for(const p in m)if(m.hasOwnProperty(p)&&(x[p]===void 0||!Ls(m[p],x[p])))return!1;return!0})(r,t);default:return Oe(52216,{left:r})}}function po(r,t){return(r.values||[]).find((s=>Ls(s,t)))!==void 0}function Pi(r,t){if(r===t)return 0;const s=Ka(r),i=Ka(t);if(s!==i)return Xe(s,i);switch(s){case 0:case 9007199254740991:return 0;case 1:return Xe(r.booleanValue,t.booleanValue);case 2:return(function(u,m){const x=It(u.integerValue||u.doubleValue),p=It(m.integerValue||m.doubleValue);return x<p?-1:x>p?1:x===p?0:isNaN(x)?isNaN(p)?0:-1:1})(r,t);case 3:return _x(r.timestampValue,t.timestampValue);case 4:return _x(mo(r),mo(t));case 5:return bf(r.stringValue,t.stringValue);case 6:return(function(u,m){const x=Qa(u),p=Qa(m);return x.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(u,m){const x=u.split("/"),p=m.split("/");for(let g=0;g<x.length&&g<p.length;g++){const v=Xe(x[g],p[g]);if(v!==0)return v}return Xe(x.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(u,m){const x=Xe(It(u.latitude),It(m.latitude));return x!==0?x:Xe(It(u.longitude),It(m.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Nx(r.arrayValue,t.arrayValue);case 10:return(function(u,m){var j,z,L,Z;const x=u.fields||{},p=m.fields||{},g=(j=x[_u])==null?void 0:j.arrayValue,v=(z=p[_u])==null?void 0:z.arrayValue,N=Xe(((L=g==null?void 0:g.values)==null?void 0:L.length)||0,((Z=v==null?void 0:v.values)==null?void 0:Z.length)||0);return N!==0?N:Nx(g,v)})(r.mapValue,t.mapValue);case 11:return(function(u,m){if(u===ru.mapValue&&m===ru.mapValue)return 0;if(u===ru.mapValue)return 1;if(m===ru.mapValue)return-1;const x=u.fields||{},p=Object.keys(x),g=m.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let N=0;N<p.length&&N<v.length;++N){const j=bf(p[N],v[N]);if(j!==0)return j;const z=Pi(x[p[N]],g[v[N]]);if(z!==0)return z}return Xe(p.length,v.length)})(r.mapValue,t.mapValue);default:throw Oe(23264,{he:s})}}function _x(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Xe(r,t);const s=Ya(r),i=Ya(t),c=Xe(s.seconds,i.seconds);return c!==0?c:Xe(s.nanos,i.nanos)}function Nx(r,t){const s=r.values||[],i=t.values||[];for(let c=0;c<s.length&&c<i.length;++c){const u=Pi(s[c],i[c]);if(u)return u}return Xe(s.length,i.length)}function Bi(r){return vf(r)}function vf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(s){const i=Ya(s);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(s){return Qa(s).toBase64()})(r.bytesValue):"referenceValue"in r?(function(s){return De.fromName(s).toString()})(r.referenceValue):"geoPointValue"in r?(function(s){return`geo(${s.latitude},${s.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(s){let i="[",c=!0;for(const u of s.values||[])c?c=!1:i+=",",i+=vf(u);return i+"]"})(r.arrayValue):"mapValue"in r?(function(s){const i=Object.keys(s.fields||{}).sort();let c="{",u=!0;for(const m of i)u?u=!1:c+=",",c+=`${m}:${vf(s.fields[m])}`;return c+"}"})(r.mapValue):Oe(61005,{value:r})}function cu(r){switch(Ka(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ou(r);return t?16+cu(t):16;case 5:return 2*r.stringValue.length;case 6:return Qa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((c,u)=>c+cu(u)),0)})(r.arrayValue);case 10:case 11:return(function(i){let c=0;return er(i.fields,((u,m)=>{c+=u.length+cu(m)})),c})(r.mapValue);default:throw Oe(13486,{value:r})}}function Ex(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function _f(r){return!!r&&"integerValue"in r}function Gf(r){return!!r&&"arrayValue"in r}function wx(r){return!!r&&"nullValue"in r}function jx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function uu(r){return!!r&&"mapValue"in r}function FE(r){var s,i;return((i=(((s=r==null?void 0:r.mapValue)==null?void 0:s.fields)||{})[ub])==null?void 0:i.stringValue)===hb}function io(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return er(r.mapValue.fields,((s,i)=>t.mapValue.fields[s]=io(i))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(r.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=io(r.arrayValue.values[s]);return t}return{...r}}function $E(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===GE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.value=t}static empty(){return new wn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let i=0;i<t.length-1;++i)if(s=(s.mapValue.fields||{})[t.get(i)],!uu(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=io(s)}setAll(t){let s=ln.emptyPath(),i={},c=[];t.forEach(((m,x)=>{if(!s.isImmediateParentOf(x)){const p=this.getFieldsMap(s);this.applyChanges(p,i,c),i={},c=[],s=x.popLast()}m?i[x.lastSegment()]=io(m):c.push(x.lastSegment())}));const u=this.getFieldsMap(s);this.applyChanges(u,i,c)}delete(t){const s=this.field(t.popLast());uu(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return Ls(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let i=0;i<t.length;++i){let c=s.mapValue.fields[t.get(i)];uu(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},s.mapValue.fields[t.get(i)]=c),s=c}return s.mapValue.fields}applyChanges(t,s,i){er(s,((c,u)=>t[c]=u));for(const c of i)delete t[c]}clone(){return new wn(io(this.value))}}function db(r){const t=[];return er(r.fields,((s,i)=>{const c=new ln([s]);if(uu(i)){const u=db(i.mapValue).fields;if(u.length===0)t.push(c);else for(const m of u)t.push(c.child(m))}else t.push(c)})),new Vn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t,s,i,c,u,m,x){this.key=t,this.documentType=s,this.version=i,this.readTime=c,this.createTime=u,this.data=m,this.documentState=x}static newInvalidDocument(t){return new dn(t,0,ze.min(),ze.min(),ze.min(),wn.empty(),0)}static newFoundDocument(t,s,i,c){return new dn(t,1,s,ze.min(),i,c,0)}static newNoDocument(t,s){return new dn(t,2,s,ze.min(),ze.min(),wn.empty(),0)}static newUnknownDocument(t,s){return new dn(t,3,s,ze.min(),ze.min(),wn.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof dn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,s){this.position=t,this.inclusive=s}}function Tx(r,t,s){let i=0;for(let c=0;c<r.position.length;c++){const u=t[c],m=r.position[c];if(u.field.isKeyField()?i=De.comparator(De.fromName(m.referenceValue),s.key):i=Pi(m,s.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Sx(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let s=0;s<r.position.length;s++)if(!Ls(r.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,s="asc"){this.field=t,this.dir=s}}function YE(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{}class Ht extends fb{constructor(t,s,i){super(),this.field=t,this.op=s,this.value=i}static create(t,s,i){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,i):new KE(t,s,i):s==="array-contains"?new JE(t,i):s==="in"?new WE(t,i):s==="not-in"?new ew(t,i):s==="array-contains-any"?new tw(t,i):new Ht(t,s,i)}static createKeyFieldInFilter(t,s,i){return s==="in"?new XE(t,i):new ZE(t,i)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Pi(s,this.value)):s!==null&&Ka(this.value)===Ka(s)&&this.matchesComparison(Pi(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hs extends fb{constructor(t,s){super(),this.filters=t,this.op=s,this.Pe=null}static create(t,s){return new hs(t,s)}matches(t){return mb(this)?this.filters.find((s=>!s.matches(t)))===void 0:this.filters.find((s=>s.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,s)=>t.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mb(r){return r.op==="and"}function gb(r){return QE(r)&&mb(r)}function QE(r){for(const t of r.filters)if(t instanceof hs)return!1;return!0}function Nf(r){if(r instanceof Ht)return r.field.canonicalString()+r.op.toString()+Bi(r.value);if(gb(r))return r.filters.map((t=>Nf(t))).join(",");{const t=r.filters.map((s=>Nf(s))).join(",");return`${r.op}(${t})`}}function pb(r,t){return r instanceof Ht?(function(i,c){return c instanceof Ht&&i.op===c.op&&i.field.isEqual(c.field)&&Ls(i.value,c.value)})(r,t):r instanceof hs?(function(i,c){return c instanceof hs&&i.op===c.op&&i.filters.length===c.filters.length?i.filters.reduce(((u,m,x)=>u&&pb(m,c.filters[x])),!0):!1})(r,t):void Oe(19439)}function yb(r){return r instanceof Ht?(function(s){return`${s.field.canonicalString()} ${s.op} ${Bi(s.value)}`})(r):r instanceof hs?(function(s){return s.op.toString()+" {"+s.getFilters().map(yb).join(" ,")+"}"})(r):"Filter"}class KE extends Ht{constructor(t,s,i){super(t,s,i),this.key=De.fromName(i.referenceValue)}matches(t){const s=De.comparator(t.key,this.key);return this.matchesComparison(s)}}class XE extends Ht{constructor(t,s){super(t,"in",s),this.keys=xb("in",s)}matches(t){return this.keys.some((s=>s.isEqual(t.key)))}}class ZE extends Ht{constructor(t,s){super(t,"not-in",s),this.keys=xb("not-in",s)}matches(t){return!this.keys.some((s=>s.isEqual(t.key)))}}function xb(r,t){var s;return(((s=t.arrayValue)==null?void 0:s.values)||[]).map((i=>De.fromName(i.referenceValue)))}class JE extends Ht{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return Gf(s)&&po(s.arrayValue,this.value)}}class WE extends Ht{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&po(this.value.arrayValue,s)}}class ew extends Ht{constructor(t,s){super(t,"not-in",s)}matches(t){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&s.nullValue===void 0&&!po(this.value.arrayValue,s)}}class tw extends Ht{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!Gf(s)||!s.arrayValue.values)&&s.arrayValue.values.some((i=>po(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(t,s=null,i=[],c=[],u=null,m=null,x=null){this.path=t,this.collectionGroup=s,this.orderBy=i,this.filters=c,this.limit=u,this.startAt=m,this.endAt=x,this.Te=null}}function Ax(r,t=null,s=[],i=[],c=null,u=null,m=null){return new nw(r,t,s,i,c,u,m)}function Ff(r){const t=Pe(r);if(t.Te===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map((i=>Nf(i))).join(","),s+="|ob:",s+=t.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Iu(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((i=>Bi(i))).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((i=>Bi(i))).join(",")),t.Te=s}return t.Te}function $f(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<r.orderBy.length;s++)if(!YE(r.orderBy[s],t.orderBy[s]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let s=0;s<r.filters.length;s++)if(!pb(r.filters[s],t.filters[s]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Sx(r.startAt,t.startAt)&&Sx(r.endAt,t.endAt)}function Ef(r){return De.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,s=null,i=[],c=[],u=null,m="F",x=null,p=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=i,this.filters=c,this.limit=u,this.limitType=m,this.startAt=x,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function sw(r,t,s,i,c,u,m,x){return new Ki(r,t,s,i,c,u,m,x)}function Yf(r){return new Ki(r)}function Cx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function aw(r){return De.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function bb(r){return r.collectionGroup!==null}function lo(r){const t=Pe(r);if(t.Ie===null){t.Ie=[];const s=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),s.add(u.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let x=new Yt(ln.comparator);return m.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(x=x.add(g.field))}))})),x})(t).forEach((u=>{s.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new yo(u,i))})),s.has(ln.keyField().canonicalString())||t.Ie.push(new yo(ln.keyField(),i))}return t.Ie}function Os(r){const t=Pe(r);return t.Ee||(t.Ee=rw(t,lo(r))),t.Ee}function rw(r,t){if(r.limitType==="F")return Ax(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((c=>{const u=c.dir==="desc"?"asc":"desc";return new yo(c.field,u)}));const s=r.endAt?new Nu(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Nu(r.startAt.position,r.startAt.inclusive):null;return Ax(r.path,r.collectionGroup,t,r.filters,r.limit,s,i)}}function wf(r,t){const s=r.filters.concat([t]);return new Ki(r.path,r.collectionGroup,r.explicitOrderBy.slice(),s,r.limit,r.limitType,r.startAt,r.endAt)}function iw(r,t){const s=r.explicitOrderBy.concat([t]);return new Ki(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function jf(r,t,s){return new Ki(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,s,r.startAt,r.endAt)}function Vu(r,t){return $f(Os(r),Os(t))&&r.limitType===t.limitType}function vb(r){return`${Ff(Os(r))}|lt:${r.limitType}`}function Ri(r){return`Query(target=${(function(s){let i=s.path.canonicalString();return s.collectionGroup!==null&&(i+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(i+=`, filters: [${s.filters.map((c=>yb(c))).join(", ")}]`),Iu(s.limit)||(i+=", limit: "+s.limit),s.orderBy.length>0&&(i+=`, orderBy: [${s.orderBy.map((c=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(c))).join(", ")}]`),s.startAt&&(i+=", startAt: ",i+=s.startAt.inclusive?"b:":"a:",i+=s.startAt.position.map((c=>Bi(c))).join(",")),s.endAt&&(i+=", endAt: ",i+=s.endAt.inclusive?"a:":"b:",i+=s.endAt.position.map((c=>Bi(c))).join(",")),`Target(${i})`})(Os(r))}; limitType=${r.limitType})`}function ku(r,t){return t.isFoundDocument()&&(function(i,c){const u=c.key.path;return i.collectionGroup!==null?c.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):De.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(r,t)&&(function(i,c){for(const u of lo(i))if(!u.field.isKeyField()&&c.data.field(u.field)===null)return!1;return!0})(r,t)&&(function(i,c){for(const u of i.filters)if(!u.matches(c))return!1;return!0})(r,t)&&(function(i,c){return!(i.startAt&&!(function(m,x,p){const g=Tx(m,x,p);return m.inclusive?g<=0:g<0})(i.startAt,lo(i),c)||i.endAt&&!(function(m,x,p){const g=Tx(m,x,p);return m.inclusive?g>=0:g>0})(i.endAt,lo(i),c))})(r,t)}function lw(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function _b(r){return(t,s)=>{let i=!1;for(const c of lo(r)){const u=ow(c,t,s);if(u!==0)return u;i=i||c.field.isKeyField()}return 0}}function ow(r,t,s){const i=r.field.isKeyField()?De.comparator(t.key,s.key):(function(u,m,x){const p=m.data.field(u),g=x.data.field(u);return p!==null&&g!==null?Pi(p,g):Oe(42886)})(r.field,t,s);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Oe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),i=this.inner[s];if(i!==void 0){for(const[c,u]of i)if(this.equalsFn(c,t))return u}}has(t){return this.get(t)!==void 0}set(t,s){const i=this.mapKeyFn(t),c=this.inner[i];if(c===void 0)return this.inner[i]=[[t,s]],void this.innerSize++;for(let u=0;u<c.length;u++)if(this.equalsFn(c[u][0],t))return void(c[u]=[t,s]);c.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return!1;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],t))return i.length===1?delete this.inner[s]:i.splice(c,1),this.innerSize--,!0;return!1}forEach(t){er(this.inner,((s,i)=>{for(const[c,u]of i)t(c,u)}))}isEmpty(){return ab(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new Nt(De.comparator);function oa(){return cw}const Nb=new Nt(De.comparator);function no(...r){let t=Nb;for(const s of r)t=t.insert(s.key,s);return t}function Eb(r){let t=Nb;return r.forEach(((s,i)=>t=t.insert(s,i.overlayedDocument))),t}function Mr(){return oo()}function wb(){return oo()}function oo(){return new Ur((r=>r.toString()),((r,t)=>r.isEqual(t)))}const uw=new Nt(De.comparator),hw=new Yt(De.comparator);function Ze(...r){let t=hw;for(const s of r)t=t.add(s);return t}const dw=new Yt(Xe);function fw(){return dw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(t)?"-0":t}}function jb(r){return{integerValue:""+r}}function mw(r,t){return UE(t)?jb(t):Qf(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this._=void 0}}function gw(r,t,s){return r instanceof Eu?(function(c,u){const m={fields:{[lb]:{stringValue:ib},[cb]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return u&&Hf(u)&&(u=Ou(u)),u&&(m.fields[ob]=u),{mapValue:m}})(s,t):r instanceof xo?Sb(r,t):r instanceof bo?Ab(r,t):(function(c,u){const m=Tb(c,u),x=Rx(m)+Rx(c.Ae);return _f(m)&&_f(c.Ae)?jb(x):Qf(c.serializer,x)})(r,t)}function pw(r,t,s){return r instanceof xo?Sb(r,t):r instanceof bo?Ab(r,t):s}function Tb(r,t){return r instanceof wu?(function(i){return _f(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(t)?t:{integerValue:0}:null}class Eu extends zu{}class xo extends zu{constructor(t){super(),this.elements=t}}function Sb(r,t){const s=Cb(t);for(const i of r.elements)s.some((c=>Ls(c,i)))||s.push(i);return{arrayValue:{values:s}}}class bo extends zu{constructor(t){super(),this.elements=t}}function Ab(r,t){let s=Cb(t);for(const i of r.elements)s=s.filter((c=>!Ls(c,i)));return{arrayValue:{values:s}}}class wu extends zu{constructor(t,s){super(),this.serializer=t,this.Ae=s}}function Rx(r){return It(r.integerValue||r.doubleValue)}function Cb(r){return Gf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function yw(r,t){return r.field.isEqual(t.field)&&(function(i,c){return i instanceof xo&&c instanceof xo||i instanceof bo&&c instanceof bo?Li(i.elements,c.elements,Ls):i instanceof wu&&c instanceof wu?Ls(i.Ae,c.Ae):i instanceof Eu&&c instanceof Eu})(r.transform,t.transform)}class xw{constructor(t,s){this.version=t,this.transformResults=s}}class jn{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new jn}static exists(t){return new jn(void 0,t)}static updateTime(t){return new jn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hu(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Uu{}function Rb(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Lu(r.key,jn.none()):new Eo(r.key,r.data,jn.none());{const s=r.data,i=wn.empty();let c=new Yt(ln.comparator);for(let u of t.fields)if(!c.has(u)){let m=s.field(u);m===null&&u.length>1&&(u=u.popLast(),m=s.field(u)),m===null?i.delete(u):i.set(u,m),c=c.add(u)}return new tr(r.key,i,new Vn(c.toArray()),jn.none())}}function bw(r,t,s){r instanceof Eo?(function(c,u,m){const x=c.value.clone(),p=Mx(c.fieldTransforms,u,m.transformResults);x.setAll(p),u.convertToFoundDocument(m.version,x).setHasCommittedMutations()})(r,t,s):r instanceof tr?(function(c,u,m){if(!hu(c.precondition,u))return void u.convertToUnknownDocument(m.version);const x=Mx(c.fieldTransforms,u,m.transformResults),p=u.data;p.setAll(Db(c)),p.setAll(x),u.convertToFoundDocument(m.version,p).setHasCommittedMutations()})(r,t,s):(function(c,u,m){u.convertToNoDocument(m.version).setHasCommittedMutations()})(0,t,s)}function co(r,t,s,i){return r instanceof Eo?(function(u,m,x,p){if(!hu(u.precondition,m))return x;const g=u.value.clone(),v=Ix(u.fieldTransforms,p,m);return g.setAll(v),m.convertToFoundDocument(m.version,g).setHasLocalMutations(),null})(r,t,s,i):r instanceof tr?(function(u,m,x,p){if(!hu(u.precondition,m))return x;const g=Ix(u.fieldTransforms,p,m),v=m.data;return v.setAll(Db(u)),v.setAll(g),m.convertToFoundDocument(m.version,v).setHasLocalMutations(),x===null?null:x.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((N=>N.field)))})(r,t,s,i):(function(u,m,x){return hu(u.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):x})(r,t,s)}function vw(r,t){let s=null;for(const i of r.fieldTransforms){const c=t.data.field(i.field),u=Tb(i.transform,c||null);u!=null&&(s===null&&(s=wn.empty()),s.set(i.field,u))}return s||null}function Dx(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(i,c){return i===void 0&&c===void 0||!(!i||!c)&&Li(i,c,((u,m)=>yw(u,m)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Eo extends Uu{constructor(t,s,i,c=[]){super(),this.key=t,this.value=s,this.precondition=i,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class tr extends Uu{constructor(t,s,i,c,u=[]){super(),this.key=t,this.data=s,this.fieldMask=i,this.precondition=c,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Db(r){const t=new Map;return r.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const i=r.data.field(s);t.set(s,i)}})),t}function Mx(r,t,s){const i=new Map;lt(r.length===s.length,32656,{Ve:s.length,de:r.length});for(let c=0;c<s.length;c++){const u=r[c],m=u.transform,x=t.data.field(u.field);i.set(u.field,pw(m,x,s[c]))}return i}function Ix(r,t,s){const i=new Map;for(const c of r){const u=c.transform,m=s.data.field(c.field);i.set(c.field,gw(u,m,t))}return i}class Lu extends Uu{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _w extends Uu{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t,s,i,c){this.batchId=t,this.localWriteTime=s,this.baseMutations=i,this.mutations=c}applyToRemoteDocument(t,s){const i=s.mutationResults;for(let c=0;c<this.mutations.length;c++){const u=this.mutations[c];u.key.isEqual(t.key)&&bw(u,t,i[c])}}applyToLocalView(t,s){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(s=co(i,t,s,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(s=co(i,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const i=wb();return this.mutations.forEach((c=>{const u=t.get(c.key),m=u.overlayedDocument;let x=this.applyToLocalView(m,u.mutatedFields);x=s.has(c.key)?null:x;const p=Rb(m,x);p!==null&&i.set(c.key,p),m.isValidDocument()||m.convertToNoDocument(ze.min())})),i}keys(){return this.mutations.reduce(((t,s)=>t.add(s.key)),Ze())}isEqual(t){return this.batchId===t.batchId&&Li(this.mutations,t.mutations,((s,i)=>Dx(s,i)))&&Li(this.baseMutations,t.baseMutations,((s,i)=>Dx(s,i)))}}class Kf{constructor(t,s,i,c){this.batch=t,this.commitVersion=s,this.mutationResults=i,this.docVersions=c}static from(t,s,i){lt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let c=(function(){return uw})();const u=t.mutations;for(let m=0;m<u.length;m++)c=c.insert(u[m].key,i[m].version);return new Kf(t,s,i,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,We;function jw(r){switch(r){case re.OK:return Oe(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Oe(15467,{code:r})}}function Mb(r){if(r===void 0)return la("GRPC error has no .code"),re.UNKNOWN;switch(r){case qt.OK:return re.OK;case qt.CANCELLED:return re.CANCELLED;case qt.UNKNOWN:return re.UNKNOWN;case qt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case qt.INTERNAL:return re.INTERNAL;case qt.UNAVAILABLE:return re.UNAVAILABLE;case qt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case qt.NOT_FOUND:return re.NOT_FOUND;case qt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case qt.ABORTED:return re.ABORTED;case qt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case qt.DATA_LOSS:return re.DATA_LOSS;default:return Oe(39323,{code:r})}}(We=qt||(qt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Ga([4294967295,4294967295],0);function Ox(r){const t=Tw().encode(r),s=new Y0;return s.update(t),new Uint8Array(s.digest())}function Vx(r){const t=new DataView(r.buffer),s=t.getUint32(0,!0),i=t.getUint32(4,!0),c=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Ga([s,i],0),new Ga([c,u],0)]}class Xf{constructor(t,s,i){if(this.bitmap=t,this.padding=s,this.hashCount=i,s<0||s>=8)throw new so(`Invalid padding: ${s}`);if(i<0)throw new so(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new so(`Invalid hash count: ${i}`);if(t.length===0&&s!==0)throw new so(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*t.length-s,this.pe=Ga.fromNumber(this.ge)}ye(t,s,i){let c=t.add(s.multiply(Ga.fromNumber(i)));return c.compare(Sw)===1&&(c=new Ga([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const s=Ox(t),[i,c]=Vx(s);for(let u=0;u<this.hashCount;u++){const m=this.ye(i,c,u);if(!this.we(m))return!1}return!0}static create(t,s,i){const c=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),m=new Xf(u,c,s);return i.forEach((x=>m.insert(x))),m}insert(t){if(this.ge===0)return;const s=Ox(t),[i,c]=Vx(s);for(let u=0;u<this.hashCount;u++){const m=this.ye(i,c,u);this.be(m)}}be(t){const s=Math.floor(t/8),i=t%8;this.bitmap[s]|=1<<i}}class so extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t,s,i,c,u){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=i,this.documentUpdates=c,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,s,i){const c=new Map;return c.set(t,wo.createSynthesizedTargetChangeForCurrentChange(t,s,i)),new Pu(ze.min(),c,new Nt(Xe),oa(),Ze())}}class wo{constructor(t,s,i,c,u){this.resumeToken=t,this.current=s,this.addedDocuments=i,this.modifiedDocuments=c,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,s,i){return new wo(i,s,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t,s,i,c){this.Se=t,this.removedTargetIds=s,this.key=i,this.De=c}}class Ib{constructor(t,s){this.targetId=t,this.Ce=s}}class Ob{constructor(t,s,i=on.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=s,this.resumeToken=i,this.cause=c}}class kx{constructor(){this.ve=0,this.Fe=zx(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ze(),s=Ze(),i=Ze();return this.Fe.forEach(((c,u)=>{switch(u){case 0:t=t.add(c);break;case 2:s=s.add(c);break;case 1:i=i.add(c);break;default:Oe(38017,{changeType:u})}})),new wo(this.Me,this.xe,t,s,i)}Ke(){this.Oe=!1,this.Fe=zx()}qe(t,s){this.Oe=!0,this.Fe=this.Fe.insert(t,s)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Aw{constructor(t){this.Ge=t,this.ze=new Map,this.je=oa(),this.He=iu(),this.Je=iu(),this.Ze=new Nt(Xe)}Xe(t){for(const s of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(s,t.De):this.et(s,t.key,t.De);for(const s of t.removedTargetIds)this.et(s,t.key,t.De)}tt(t){this.forEachTarget(t,(s=>{const i=this.nt(s);switch(t.state){case 0:this.rt(s)&&i.Le(t.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(t.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(i.Qe(),i.Le(t.resumeToken));break;case 4:this.rt(s)&&(this.it(s),i.Le(t.resumeToken));break;default:Oe(56790,{state:t.state})}}))}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.ze.forEach(((i,c)=>{this.rt(c)&&s(c)}))}st(t){const s=t.targetId,i=t.Ce.count,c=this.ot(s);if(c){const u=c.target;if(Ef(u))if(i===0){const m=new De(u.path);this.et(s,m,dn.newNoDocument(m,ze.min()))}else lt(i===1,20013,{expectedCount:i});else{const m=this._t(s);if(m!==i){const x=this.ut(t),p=x?this.ct(x,t,m):1;if(p!==0){this.it(s);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,g)}}}}}ut(t){const s=t.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:i="",padding:c=0},hashCount:u=0}=s;let m,x;try{m=Qa(i).toUint8Array()}catch(p){if(p instanceof rb)return kr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{x=new Xf(m,c,u)}catch(p){return kr(p instanceof so?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return x.ge===0?null:x}ct(t,s,i){return s.Ce.count===i-this.Pt(t,s.targetId)?0:2}Pt(t,s){const i=this.Ge.getRemoteKeysForTarget(s);let c=0;return i.forEach((u=>{const m=this.Ge.ht(),x=`projects/${m.projectId}/databases/${m.database}/documents/${u.path.canonicalString()}`;t.mightContain(x)||(this.et(s,u,null),c++)})),c}Tt(t){const s=new Map;this.ze.forEach(((u,m)=>{const x=this.ot(m);if(x){if(u.current&&Ef(x.target)){const p=new De(x.target.path);this.It(p).has(m)||this.Et(m,p)||this.et(m,p,dn.newNoDocument(p,t))}u.Be&&(s.set(m,u.ke()),u.Ke())}}));let i=Ze();this.Je.forEach(((u,m)=>{let x=!0;m.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(x=!1,!1)})),x&&(i=i.add(u))})),this.je.forEach(((u,m)=>m.setReadTime(t)));const c=new Pu(t,s,this.Ze,this.je,i);return this.je=oa(),this.He=iu(),this.Je=iu(),this.Ze=new Nt(Xe),c}Ye(t,s){if(!this.rt(t))return;const i=this.Et(t,s.key)?2:0;this.nt(t).qe(s.key,i),this.je=this.je.insert(s.key,s),this.He=this.He.insert(s.key,this.It(s.key).add(t)),this.Je=this.Je.insert(s.key,this.Rt(s.key).add(t))}et(t,s,i){if(!this.rt(t))return;const c=this.nt(t);this.Et(t,s)?c.qe(s,1):c.Ue(s),this.Je=this.Je.insert(s,this.Rt(s).delete(t)),this.Je=this.Je.insert(s,this.Rt(s).add(t)),i&&(this.je=this.je.insert(s,i))}removeTarget(t){this.ze.delete(t)}_t(t){const s=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let s=this.ze.get(t);return s||(s=new kx,this.ze.set(t,s)),s}Rt(t){let s=this.Je.get(t);return s||(s=new Yt(Xe),this.Je=this.Je.insert(t,s)),s}It(t){let s=this.He.get(t);return s||(s=new Yt(Xe),this.He=this.He.insert(t,s)),s}rt(t){const s=this.ot(t)!==null;return s||be("WatchChangeAggregator","Detected inactive target",t),s}ot(t){const s=this.ze.get(t);return s&&s.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new kx),this.Ge.getRemoteKeysForTarget(t).forEach((s=>{this.et(t,s,null)}))}Et(t,s){return this.Ge.getRemoteKeysForTarget(t).has(s)}}function iu(){return new Nt(De.comparator)}function zx(){return new Nt(De.comparator)}const Cw={asc:"ASCENDING",desc:"DESCENDING"},Rw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dw={and:"AND",or:"OR"};class Mw{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function Tf(r,t){return r.useProto3Json||Iu(t)?t:{value:t}}function ju(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vb(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function Iw(r,t){return ju(r,t.toTimestamp())}function Vs(r){return lt(!!r,49232),ze.fromTimestamp((function(s){const i=Ya(s);return new pt(i.seconds,i.nanos)})(r))}function Zf(r,t){return Sf(r,t).canonicalString()}function Sf(r,t){const s=(function(c){return new yt(["projects",c.projectId,"databases",c.database])})(r).child("documents");return t===void 0?s:s.child(t)}function kb(r){const t=yt.fromString(r);return lt(Bb(t),10190,{key:t.toString()}),t}function Af(r,t){return Zf(r.databaseId,t.path)}function rf(r,t){const s=kb(t);if(s.get(1)!==r.databaseId.projectId)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+r.databaseId.projectId);if(s.get(3)!==r.databaseId.database)throw new ye(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+r.databaseId.database);return new De(Ub(s))}function zb(r,t){return Zf(r.databaseId,t)}function Ow(r){const t=kb(r);return t.length===4?yt.emptyPath():Ub(t)}function Cf(r){return new yt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Ub(r){return lt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ux(r,t,s){return{name:Af(r,t),fields:s.value.mapValue.fields}}function Vw(r,t){let s;if("targetChange"in t){t.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Oe(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),c=t.targetChange.targetIds||[],u=(function(g,v){return g.useProto3Json?(lt(v===void 0||typeof v=="string",58123),on.fromBase64String(v||"")):(lt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),on.fromUint8Array(v||new Uint8Array))})(r,t.targetChange.resumeToken),m=t.targetChange.cause,x=m&&(function(g){const v=g.code===void 0?re.UNKNOWN:Mb(g.code);return new ye(v,g.message||"")})(m);s=new Ob(i,c,u,x||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const c=rf(r,i.document.name),u=Vs(i.document.updateTime),m=i.document.createTime?Vs(i.document.createTime):ze.min(),x=new wn({mapValue:{fields:i.document.fields}}),p=dn.newFoundDocument(c,u,m,x),g=i.targetIds||[],v=i.removedTargetIds||[];s=new du(g,v,p.key,p)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const c=rf(r,i.document),u=i.readTime?Vs(i.readTime):ze.min(),m=dn.newNoDocument(c,u),x=i.removedTargetIds||[];s=new du([],x,m.key,m)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const c=rf(r,i.document),u=i.removedTargetIds||[];s=new du([],u,c,null)}else{if(!("filter"in t))return Oe(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:c=0,unchangedNames:u}=i,m=new ww(c,u),x=i.targetId;s=new Ib(x,m)}}return s}function kw(r,t){let s;if(t instanceof Eo)s={update:Ux(r,t.key,t.value)};else if(t instanceof Lu)s={delete:Af(r,t.key)};else if(t instanceof tr)s={update:Ux(r,t.key,t.data),updateMask:Fw(t.fieldMask)};else{if(!(t instanceof _w))return Oe(16599,{dt:t.type});s={verify:Af(r,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map((i=>(function(u,m){const x=m.transform;if(x instanceof Eu)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(x instanceof xo)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:x.elements}};if(x instanceof bo)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:x.elements}};if(x instanceof wu)return{fieldPath:m.field.canonicalString(),increment:x.Ae};throw Oe(20930,{transform:m.transform})})(0,i)))),t.precondition.isNone||(s.currentDocument=(function(c,u){return u.updateTime!==void 0?{updateTime:Iw(c,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Oe(27497)})(r,t.precondition)),s}function zw(r,t){return r&&r.length>0?(lt(t!==void 0,14353),r.map((s=>(function(c,u){let m=c.updateTime?Vs(c.updateTime):Vs(u);return m.isEqual(ze.min())&&(m=Vs(u)),new xw(m,c.transformResults||[])})(s,t)))):[]}function Uw(r,t){return{documents:[zb(r,t.path)]}}function Lw(r,t){const s={structuredQuery:{}},i=t.path;let c;t.collectionGroup!==null?(c=i,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=i.popLast(),s.structuredQuery.from=[{collectionId:i.lastSegment()}]),s.parent=zb(r,c);const u=(function(g){if(g.length!==0)return Pb(hs.create(g,"and"))})(t.filters);u&&(s.structuredQuery.where=u);const m=(function(g){if(g.length!==0)return g.map((v=>(function(j){return{field:Di(j.field),direction:qw(j.dir)}})(v)))})(t.orderBy);m&&(s.structuredQuery.orderBy=m);const x=Tf(r,t.limit);return x!==null&&(s.structuredQuery.limit=x),t.startAt&&(s.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(s.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:s,parent:c}}function Pw(r){let t=Ow(r.parent);const s=r.structuredQuery,i=s.from?s.from.length:0;let c=null;if(i>0){lt(i===1,65062);const v=s.from[0];v.allDescendants?c=v.collectionId:t=t.child(v.collectionId)}let u=[];s.where&&(u=(function(N){const j=Lb(N);return j instanceof hs&&gb(j)?j.getFilters():[j]})(s.where));let m=[];s.orderBy&&(m=(function(N){return N.map((j=>(function(L){return new yo(Mi(L.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(j)))})(s.orderBy));let x=null;s.limit&&(x=(function(N){let j;return j=typeof N=="object"?N.value:N,Iu(j)?null:j})(s.limit));let p=null;s.startAt&&(p=(function(N){const j=!!N.before,z=N.values||[];return new Nu(z,j)})(s.startAt));let g=null;return s.endAt&&(g=(function(N){const j=!N.before,z=N.values||[];return new Nu(z,j)})(s.endAt)),sw(t,c,m,u,x,"F",p,g)}function Bw(r,t){const s=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:c})}})(t.purpose);return s==null?null:{"goog-listen-tags":s}}function Lb(r){return r.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const i=Mi(s.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const c=Mi(s.unaryFilter.field);return Ht.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Mi(s.unaryFilter.field);return Ht.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Mi(s.unaryFilter.field);return Ht.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(r):r.fieldFilter!==void 0?(function(s){return Ht.create(Mi(s.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(s){return hs.create(s.compositeFilter.filters.map((i=>Lb(i))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(s.compositeFilter.op))})(r):Oe(30097,{filter:r})}function qw(r){return Cw[r]}function Hw(r){return Rw[r]}function Gw(r){return Dw[r]}function Di(r){return{fieldPath:r.canonicalString()}}function Mi(r){return ln.fromServerFormat(r.fieldPath)}function Pb(r){return r instanceof Ht?(function(s){if(s.op==="=="){if(jx(s.value))return{unaryFilter:{field:Di(s.field),op:"IS_NAN"}};if(wx(s.value))return{unaryFilter:{field:Di(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(jx(s.value))return{unaryFilter:{field:Di(s.field),op:"IS_NOT_NAN"}};if(wx(s.value))return{unaryFilter:{field:Di(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Di(s.field),op:Hw(s.op),value:s.value}}})(r):r instanceof hs?(function(s){const i=s.getFilters().map((c=>Pb(c)));return i.length===1?i[0]:{compositeFilter:{op:Gw(s.op),filters:i}}})(r):Oe(54877,{filter:r})}function Fw(r){const t=[];return r.fields.forEach((s=>t.push(s.canonicalString()))),{fieldPaths:t}}function Bb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function qb(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t,s,i,c,u=ze.min(),m=ze.min(),x=on.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=s,this.purpose=i,this.sequenceNumber=c,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=x,this.expectedCount=p}withSequenceNumber(t){return new Ba(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t){this.yt=t}}function Yw(r){const t=Pw({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?jf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.Sn=new Kw}addToCollectionParentIndex(t,s){return this.Sn.add(s),le.resolve()}getCollectionParents(t,s){return le.resolve(this.Sn.getEntries(s))}addFieldIndex(t,s){return le.resolve()}deleteFieldIndex(t,s){return le.resolve()}deleteAllFieldIndexes(t){return le.resolve()}createTargetIndexes(t,s){return le.resolve()}getDocumentsMatchingTarget(t,s){return le.resolve(null)}getIndexType(t,s){return le.resolve(0)}getFieldIndexes(t,s){return le.resolve([])}getNextCollectionGroupToUpdate(t){return le.resolve(null)}getMinOffset(t,s){return le.resolve($a.min())}getMinOffsetFromCollectionGroup(t,s){return le.resolve($a.min())}updateCollectionGroup(t,s,i){return le.resolve()}updateIndexEntries(t,s){return le.resolve()}}class Kw{constructor(){this.index={}}add(t){const s=t.lastSegment(),i=t.popLast(),c=this.index[s]||new Yt(yt.comparator),u=!c.has(i);return this.index[s]=c.add(i),u}has(t){const s=t.lastSegment(),i=t.popLast(),c=this.index[s];return c&&c.has(i)}getEntries(t){return(this.index[t]||new Yt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hb=41943040;class En{static withCacheSize(t){return new En(t,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(Hb,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new qi(0)}static ar(){return new qi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="LruGarbageCollector",Xw=1048576;function Bx([r,t],[s,i]){const c=Xe(r,s);return c===0?Xe(t,i):c}class Zw{constructor(t){this.Pr=t,this.buffer=new Yt(Bx),this.Tr=0}Ir(){return++this.Tr}Er(t){const s=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(s);else{const i=this.buffer.last();Bx(s,i)<0&&(this.buffer=this.buffer.delete(i).add(s))}}get maxValue(){return this.buffer.last()[0]}}class Jw{constructor(t,s,i){this.garbageCollector=t,this.asyncQueue=s,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){be(Px,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Qi(s)?be(Px,"Ignoring IndexedDB error during garbage collection: ",s):await Yi(s)}await this.Ar(3e5)}))}}class Ww{constructor(t,s){this.Vr=t,this.params=s}calculateTargetCount(t,s){return this.Vr.dr(t).next((i=>Math.floor(s/100*i)))}nthSequenceNumber(t,s){if(s===0)return le.resolve(Mu.ce);const i=new Zw(s);return this.Vr.forEachTarget(t,(c=>i.Er(c.sequenceNumber))).next((()=>this.Vr.mr(t,(c=>i.Er(c))))).next((()=>i.maxValue))}removeTargets(t,s,i){return this.Vr.removeTargets(t,s,i)}removeOrphanedDocuments(t,s){return this.Vr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Lx)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lx):this.gr(t,s)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,s){let i,c,u,m,x,p,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((N=>(N>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),c=this.params.maximumSequenceNumbersToCollect):c=N,m=Date.now(),this.nthSequenceNumber(t,c)))).next((N=>(i=N,x=Date.now(),this.removeTargets(t,i,s)))).next((N=>(u=N,p=Date.now(),this.removeOrphanedDocuments(t,i)))).next((N=>(g=Date.now(),Ci()<=et.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-v}ms
	Determined least recently used ${c} in `+(x-m)+`ms
	Removed ${u} targets in `+(p-x)+`ms
	Removed ${N} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:u,documentsRemoved:N}))))}}function e2(r,t){return new Ww(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.changes=new Ur((t=>t.toString()),((t,s)=>t.isEqual(s))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,dn.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const i=this.changes.get(s);return i!==void 0?le.resolve(i):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(t,s,i,c){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=i,this.indexManager=c}getDocument(t,s){let i=null;return this.documentOverlayCache.getOverlay(t,s).next((c=>(i=c,this.remoteDocumentCache.getEntry(t,s)))).next((c=>(i!==null&&co(i.mutation,c,Vn.empty(),pt.now()),c)))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next((i=>this.getLocalViewOfDocuments(t,i,Ze()).next((()=>i))))}getLocalViewOfDocuments(t,s,i=Ze()){const c=Mr();return this.populateOverlays(t,c,s).next((()=>this.computeViews(t,s,c,i).next((u=>{let m=no();return u.forEach(((x,p)=>{m=m.insert(x,p.overlayedDocument)})),m}))))}getOverlayedDocuments(t,s){const i=Mr();return this.populateOverlays(t,i,s).next((()=>this.computeViews(t,s,i,Ze())))}populateOverlays(t,s,i){const c=[];return i.forEach((u=>{s.has(u)||c.push(u)})),this.documentOverlayCache.getOverlays(t,c).next((u=>{u.forEach(((m,x)=>{s.set(m,x)}))}))}computeViews(t,s,i,c){let u=oa();const m=oo(),x=(function(){return oo()})();return s.forEach(((p,g)=>{const v=i.get(g.key);c.has(g.key)&&(v===void 0||v.mutation instanceof tr)?u=u.insert(g.key,g):v!==void 0?(m.set(g.key,v.mutation.getFieldMask()),co(v.mutation,g,v.mutation.getFieldMask(),pt.now())):m.set(g.key,Vn.empty())})),this.recalculateAndSaveOverlays(t,u).next((p=>(p.forEach(((g,v)=>m.set(g,v))),s.forEach(((g,v)=>x.set(g,new n2(v,m.get(g)??null)))),x)))}recalculateAndSaveOverlays(t,s){const i=oo();let c=new Nt(((m,x)=>m-x)),u=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next((m=>{for(const x of m)x.keys().forEach((p=>{const g=s.get(p);if(g===null)return;let v=i.get(p)||Vn.empty();v=x.applyToLocalView(g,v),i.set(p,v);const N=(c.get(x.batchId)||Ze()).add(p);c=c.insert(x.batchId,N)}))})).next((()=>{const m=[],x=c.getReverseIterator();for(;x.hasNext();){const p=x.getNext(),g=p.key,v=p.value,N=wb();v.forEach((j=>{if(!u.has(j)){const z=Rb(s.get(j),i.get(j));z!==null&&N.set(j,z),u=u.add(j)}})),m.push(this.documentOverlayCache.saveOverlays(t,g,N))}return le.waitFor(m)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,s,i,c){return aw(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):bb(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,i,c):this.getDocumentsMatchingCollectionQuery(t,s,i,c)}getNextDocuments(t,s,i,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,i,c).next((u=>{const m=c-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,i.largestBatchId,c-u.size):le.resolve(Mr());let x=fo,p=u;return m.next((g=>le.forEach(g,((v,N)=>(x<N.largestBatchId&&(x=N.largestBatchId),u.get(v)?le.resolve():this.remoteDocumentCache.getEntry(t,v).next((j=>{p=p.insert(v,j)}))))).next((()=>this.populateOverlays(t,g,u))).next((()=>this.computeViews(t,p,g,Ze()))).next((v=>({batchId:x,changes:Eb(v)})))))}))}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new De(s)).next((i=>{let c=no();return i.isFoundDocument()&&(c=c.insert(i.key,i)),c}))}getDocumentsMatchingCollectionGroupQuery(t,s,i,c){const u=s.collectionGroup;let m=no();return this.indexManager.getCollectionParents(t,u).next((x=>le.forEach(x,(p=>{const g=(function(N,j){return new Ki(j,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)})(s,p.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,i,c).next((v=>{v.forEach(((N,j)=>{m=m.insert(N,j)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(t,s,i,c){let u;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,i.largestBatchId).next((m=>(u=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,i,u,c)))).next((m=>{u.forEach(((p,g)=>{const v=g.getKey();m.get(v)===null&&(m=m.insert(v,dn.newInvalidDocument(v)))}));let x=no();return m.forEach(((p,g)=>{const v=u.get(p);v!==void 0&&co(v.mutation,g,Vn.empty(),pt.now()),ku(s,g)&&(x=x.insert(p,g))})),x}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,s){return le.resolve(this.Nr.get(s))}saveBundleMetadata(t,s){return this.Nr.set(s.id,(function(c){return{id:c.id,version:c.version,createTime:Vs(c.createTime)}})(s)),le.resolve()}getNamedQuery(t,s){return le.resolve(this.Br.get(s))}saveNamedQuery(t,s){return this.Br.set(s.name,(function(c){return{name:c.name,query:Yw(c.bundledQuery),readTime:Vs(c.readTime)}})(s)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.overlays=new Nt(De.comparator),this.Lr=new Map}getOverlay(t,s){return le.resolve(this.overlays.get(s))}getOverlays(t,s){const i=Mr();return le.forEach(s,(c=>this.getOverlay(t,c).next((u=>{u!==null&&i.set(c,u)})))).next((()=>i))}saveOverlays(t,s,i){return i.forEach(((c,u)=>{this.bt(t,s,u)})),le.resolve()}removeOverlaysForBatchId(t,s,i){const c=this.Lr.get(i);return c!==void 0&&(c.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),le.resolve()}getOverlaysForCollection(t,s,i){const c=Mr(),u=s.length+1,m=new De(s.child("")),x=this.overlays.getIteratorFrom(m);for(;x.hasNext();){const p=x.getNext().value,g=p.getKey();if(!s.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>i&&c.set(p.getKey(),p)}return le.resolve(c)}getOverlaysForCollectionGroup(t,s,i,c){let u=new Nt(((g,v)=>g-v));const m=this.overlays.getIterator();for(;m.hasNext();){const g=m.getNext().value;if(g.getKey().getCollectionGroup()===s&&g.largestBatchId>i){let v=u.get(g.largestBatchId);v===null&&(v=Mr(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const x=Mr(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>x.set(g,v))),!(x.size()>=c)););return le.resolve(x)}bt(t,s,i){const c=this.overlays.get(i.key);if(c!==null){const m=this.Lr.get(c.largestBatchId).delete(i.key);this.Lr.set(c.largestBatchId,m)}this.overlays=this.overlays.insert(i.key,new Ew(s,i));let u=this.Lr.get(s);u===void 0&&(u=Ze(),this.Lr.set(s,u)),this.Lr.set(s,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(t){return le.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this.kr=new Yt(Zt.Kr),this.qr=new Yt(Zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,s){const i=new Zt(t,s);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(t,s){t.forEach((i=>this.addReference(i,s)))}removeReference(t,s){this.Wr(new Zt(t,s))}Qr(t,s){t.forEach((i=>this.removeReference(i,s)))}Gr(t){const s=new De(new yt([])),i=new Zt(s,t),c=new Zt(s,t+1),u=[];return this.qr.forEachInRange([i,c],(m=>{this.Wr(m),u.push(m.key)})),u}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const s=new De(new yt([])),i=new Zt(s,t),c=new Zt(s,t+1);let u=Ze();return this.qr.forEachInRange([i,c],(m=>{u=u.add(m.key)})),u}containsKey(t){const s=new Zt(t,0),i=this.kr.firstAfterOrEqual(s);return i!==null&&t.isEqual(i.key)}}class Zt{constructor(t,s){this.key=t,this.Hr=s}static Kr(t,s){return De.comparator(t.key,s.key)||Xe(t.Hr,s.Hr)}static Ur(t,s){return Xe(t.Hr,s.Hr)||De.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.Yn=1,this.Jr=new Yt(Zt.Kr)}checkEmpty(t){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,i,c){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new Nw(u,s,i,c);this.mutationQueue.push(m);for(const x of c)this.Jr=this.Jr.add(new Zt(x.key,u)),this.indexManager.addToCollectionParentIndex(t,x.key.path.popLast());return le.resolve(m)}lookupMutationBatch(t,s){return le.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(t,s){const i=s+1,c=this.Xr(i),u=c<0?0:c;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?qf:this.Yn-1)}getAllMutationBatches(t){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const i=new Zt(s,0),c=new Zt(s,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,c],(m=>{const x=this.Zr(m.Hr);u.push(x)})),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,s){let i=new Yt(Xe);return s.forEach((c=>{const u=new Zt(c,0),m=new Zt(c,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,m],(x=>{i=i.add(x.Hr)}))})),le.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(t,s){const i=s.path,c=i.length+1;let u=i;De.isDocumentKey(u)||(u=u.child(""));const m=new Zt(new De(u),0);let x=new Yt(Xe);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===c&&(x=x.add(p.Hr)),!0)}),m),le.resolve(this.Yr(x))}Yr(t){const s=[];return t.forEach((i=>{const c=this.Zr(i);c!==null&&s.push(c)})),s}removeMutationBatch(t,s){lt(this.ei(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return le.forEach(s.mutations,(c=>{const u=new Zt(c.key,s.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)})).next((()=>{this.Jr=i}))}nr(t){}containsKey(t,s){const i=new Zt(s,0),c=this.Jr.firstAfterOrEqual(i);return le.resolve(s.isEqual(c&&c.key))}performConsistencyCheck(t){return this.mutationQueue.length,le.resolve()}ei(t,s){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const s=this.Xr(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t){this.ti=t,this.docs=(function(){return new Nt(De.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const i=s.key,c=this.docs.get(i),u=c?c.size:0,m=this.ti(s);return this.docs=this.docs.insert(i,{document:s.mutableCopy(),size:m}),this.size+=m-u,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const i=this.docs.get(s);return le.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(s))}getEntries(t,s){let i=oa();return s.forEach((c=>{const u=this.docs.get(c);i=i.insert(c,u?u.document.mutableCopy():dn.newInvalidDocument(c))})),le.resolve(i)}getDocumentsMatchingQuery(t,s,i,c){let u=oa();const m=s.path,x=new De(m.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(x);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!m.isPrefixOf(g.path))break;g.path.length>m.length+1||OE(IE(v),i)<=0||(c.has(v.key)||ku(s,v))&&(u=u.insert(v.key,v.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(t,s,i,c){Oe(9500)}ni(t,s){return le.forEach(this.docs,(i=>s(i)))}newChangeBuffer(t){return new c2(this)}getSize(t){return le.resolve(this.size)}}class c2 extends t2{constructor(t){super(),this.Mr=t}applyChanges(t){const s=[];return this.changes.forEach(((i,c)=>{c.isValidDocument()?s.push(this.Mr.addEntry(t,c)):this.Mr.removeEntry(i)})),le.waitFor(s)}getFromCache(t,s){return this.Mr.getEntry(t,s)}getAllFromCache(t,s){return this.Mr.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(t){this.persistence=t,this.ri=new Ur((s=>Ff(s)),$f),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.ii=0,this.si=new Jf,this.targetCount=0,this.oi=qi._r()}forEachTarget(t,s){return this.ri.forEach(((i,c)=>s(c))),le.resolve()}getLastRemoteSnapshotVersion(t){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return le.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(t,s,i){return i&&(this.lastRemoteSnapshotVersion=i),s>this.ii&&(this.ii=s),le.resolve()}lr(t){this.ri.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.oi=new qi(s),this.highestTargetId=s),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,s){return this.lr(s),this.targetCount+=1,le.resolve()}updateTargetData(t,s){return this.lr(s),le.resolve()}removeTargetData(t,s){return this.ri.delete(s.target),this.si.Gr(s.targetId),this.targetCount-=1,le.resolve()}removeTargets(t,s,i){let c=0;const u=[];return this.ri.forEach(((m,x)=>{x.sequenceNumber<=s&&i.get(x.targetId)===null&&(this.ri.delete(m),u.push(this.removeMatchingKeysForTargetId(t,x.targetId)),c++)})),le.waitFor(u).next((()=>c))}getTargetCount(t){return le.resolve(this.targetCount)}getTargetData(t,s){const i=this.ri.get(s)||null;return le.resolve(i)}addMatchingKeys(t,s,i){return this.si.$r(s,i),le.resolve()}removeMatchingKeys(t,s,i){this.si.Qr(s,i);const c=this.persistence.referenceDelegate,u=[];return c&&s.forEach((m=>{u.push(c.markPotentiallyOrphaned(t,m))})),le.waitFor(u)}removeMatchingKeysForTargetId(t,s){return this.si.Gr(s),le.resolve()}getMatchingKeysForTargetId(t,s){const i=this.si.jr(s);return le.resolve(i)}containsKey(t,s){return le.resolve(this.si.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t,s){this._i={},this.overlays={},this.ai=new Mu(0),this.ui=!1,this.ui=!0,this.ci=new i2,this.referenceDelegate=t(this),this.li=new u2(this),this.indexManager=new Qw,this.remoteDocumentCache=(function(c){return new o2(c)})((i=>this.referenceDelegate.hi(i))),this.serializer=new $w(s),this.Pi=new a2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new r2,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let i=this._i[t.toKey()];return i||(i=new l2(s,this.referenceDelegate),this._i[t.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,s,i){be("MemoryPersistence","Starting transaction:",t);const c=new h2(this.ai.next());return this.referenceDelegate.Ti(),i(c).next((u=>this.referenceDelegate.Ii(c).next((()=>u)))).toPromise().then((u=>(c.raiseOnCommittedEvent(),u)))}Ei(t,s){return le.or(Object.values(this._i).map((i=>()=>i.containsKey(t,s))))}}class h2 extends kE{constructor(t){super(),this.currentSequenceNumber=t}}class Wf{constructor(t){this.persistence=t,this.Ri=new Jf,this.Ai=null}static Vi(t){return new Wf(t)}get di(){if(this.Ai)return this.Ai;throw Oe(60996)}addReference(t,s,i){return this.Ri.addReference(i,s),this.di.delete(i.toString()),le.resolve()}removeReference(t,s,i){return this.Ri.removeReference(i,s),this.di.add(i.toString()),le.resolve()}markPotentiallyOrphaned(t,s){return this.di.add(s.toString()),le.resolve()}removeTarget(t,s){this.Ri.Gr(s.targetId).forEach((c=>this.di.add(c.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,s.targetId).next((c=>{c.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(t,s)))}Ti(){this.Ai=new Set}Ii(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.di,(i=>{const c=De.fromPath(i);return this.mi(t,c).next((u=>{u||s.removeEntry(c,ze.min())}))})).next((()=>(this.Ai=null,s.apply(t))))}updateLimboDocument(t,s){return this.mi(t,s).next((i=>{i?this.di.delete(s.toString()):this.di.add(s.toString())}))}hi(t){return 0}mi(t,s){return le.or([()=>le.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Ei(t,s)])}}class Tu{constructor(t,s){this.persistence=t,this.fi=new Ur((i=>LE(i.path)),((i,c)=>i.isEqual(c))),this.garbageCollector=e2(this,s)}static Vi(t,s){return new Tu(t,s)}Ti(){}Ii(t){return le.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}dr(t){const s=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>s.next((c=>i+c))))}pr(t){let s=0;return this.mr(t,(i=>{s++})).next((()=>s))}mr(t,s){return le.forEach(this.fi,((i,c)=>this.wr(t,i,c).next((u=>u?le.resolve():s(c)))))}removeTargets(t,s,i){return this.persistence.getTargetCache().removeTargets(t,s,i)}removeOrphanedDocuments(t,s){let i=0;const c=this.persistence.getRemoteDocumentCache(),u=c.newChangeBuffer();return c.ni(t,(m=>this.wr(t,m,s).next((x=>{x||(i++,u.removeEntry(m,ze.min()))})))).next((()=>u.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,s){return this.fi.set(s,t.currentSequenceNumber),le.resolve()}removeTarget(t,s){const i=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,s,i){return this.fi.set(i,t.currentSequenceNumber),le.resolve()}removeReference(t,s,i){return this.fi.set(i,t.currentSequenceNumber),le.resolve()}updateLimboDocument(t,s){return this.fi.set(s,t.currentSequenceNumber),le.resolve()}hi(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=cu(t.data.value)),s}wr(t,s,i){return le.or([()=>this.persistence.Ei(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const c=this.fi.get(s);return le.resolve(c!==void 0&&c>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(t,s,i,c){this.targetId=t,this.fromCache=s,this.Ts=i,this.Is=c}static Es(t,s){let i=Ze(),c=Ze();for(const u of s.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:c=c.add(u.doc.key)}return new em(t,s.fromCache,i,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return eN()?8:zE(J1())>0?6:4})()}initialize(t,s){this.fs=t,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(t,s,i,c){const u={result:null};return this.gs(t,s).next((m=>{u.result=m})).next((()=>{if(!u.result)return this.ps(t,s,c,i).next((m=>{u.result=m}))})).next((()=>{if(u.result)return;const m=new d2;return this.ys(t,s,m).next((x=>{if(u.result=x,this.As)return this.ws(t,s,m,x.size)}))})).next((()=>u.result))}ws(t,s,i,c){return i.documentReadCount<this.Vs?(Ci()<=et.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",Ri(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(Ci()<=et.DEBUG&&be("QueryEngine","Query:",Ri(s),"scans",i.documentReadCount,"local documents and returns",c,"documents as results."),i.documentReadCount>this.ds*c?(Ci()<=et.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",Ri(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Os(s))):le.resolve())}gs(t,s){if(Cx(s))return le.resolve(null);let i=Os(s);return this.indexManager.getIndexType(t,i).next((c=>c===0?null:(s.limit!==null&&c===1&&(s=jf(s,null,"F"),i=Os(s)),this.indexManager.getDocumentsMatchingTarget(t,i).next((u=>{const m=Ze(...u);return this.fs.getDocuments(t,m).next((x=>this.indexManager.getMinOffset(t,i).next((p=>{const g=this.bs(s,x);return this.Ss(s,g,m,p.readTime)?this.gs(t,jf(s,null,"F")):this.Ds(t,g,s,p)}))))})))))}ps(t,s,i,c){return Cx(s)||c.isEqual(ze.min())?le.resolve(null):this.fs.getDocuments(t,i).next((u=>{const m=this.bs(s,u);return this.Ss(s,m,i,c)?le.resolve(null):(Ci()<=et.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Ri(s)),this.Ds(t,m,s,ME(c,fo)).next((x=>x)))}))}bs(t,s){let i=new Yt(_b(t));return s.forEach(((c,u)=>{ku(t,u)&&(i=i.add(u))})),i}Ss(t,s,i,c){if(t.limit===null)return!1;if(i.size!==s.size)return!0;const u=t.limitType==="F"?s.last():s.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(c)>0)}ys(t,s,i){return Ci()<=et.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Ri(s)),this.fs.getDocumentsMatchingQuery(t,s,$a.min(),i)}Ds(t,s,i,c){return this.fs.getDocumentsMatchingQuery(t,i,c).next((u=>(s.forEach((m=>{u=u.insert(m.key,m)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="LocalStore",m2=3e8;class g2{constructor(t,s,i,c){this.persistence=t,this.Cs=s,this.serializer=c,this.vs=new Nt(Xe),this.Fs=new Ur((u=>Ff(u)),$f),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(i)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new s2(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>t.collect(s,this.vs)))}}function p2(r,t,s,i){return new g2(r,t,s,i)}async function Fb(r,t){const s=Pe(r);return await s.persistence.runTransaction("Handle user change","readonly",(i=>{let c;return s.mutationQueue.getAllMutationBatches(i).next((u=>(c=u,s.Os(t),s.mutationQueue.getAllMutationBatches(i)))).next((u=>{const m=[],x=[];let p=Ze();for(const g of c){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of u){x.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return s.localDocuments.getDocuments(i,p).next((g=>({Ns:g,removedBatchIds:m,addedBatchIds:x})))}))}))}function y2(r,t){const s=Pe(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const c=t.batch.keys(),u=s.xs.newChangeBuffer({trackRemovals:!0});return(function(x,p,g,v){const N=g.batch,j=N.keys();let z=le.resolve();return j.forEach((L=>{z=z.next((()=>v.getEntry(p,L))).next((Z=>{const P=g.docVersions.get(L);lt(P!==null,48541),Z.version.compareTo(P)<0&&(N.applyToRemoteDocument(Z,g),Z.isValidDocument()&&(Z.setReadTime(g.commitVersion),v.addEntry(Z)))}))})),z.next((()=>x.mutationQueue.removeMutationBatch(p,N)))})(s,i,t,u).next((()=>u.apply(i))).next((()=>s.mutationQueue.performConsistencyCheck(i))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(i,c,t.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(x){let p=Ze();for(let g=0;g<x.mutationResults.length;++g)x.mutationResults[g].transformResults.length>0&&(p=p.add(x.batch.mutations[g].key));return p})(t)))).next((()=>s.localDocuments.getDocuments(i,c)))}))}function $b(r){const t=Pe(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>t.li.getLastRemoteSnapshotVersion(s)))}function x2(r,t){const s=Pe(r),i=t.snapshotVersion;let c=s.vs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const m=s.xs.newChangeBuffer({trackRemovals:!0});c=s.vs;const x=[];t.targetChanges.forEach(((v,N)=>{const j=c.get(N);if(!j)return;x.push(s.li.removeMatchingKeys(u,v.removedDocuments,N).next((()=>s.li.addMatchingKeys(u,v.addedDocuments,N))));let z=j.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(N)!==null?z=z.withResumeToken(on.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):v.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(v.resumeToken,i)),c=c.insert(N,z),(function(Z,P,ge){return Z.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=m2?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0})(j,z,v)&&x.push(s.li.updateTargetData(u,z))}));let p=oa(),g=Ze();if(t.documentUpdates.forEach((v=>{t.resolvedLimboDocuments.has(v)&&x.push(s.persistence.referenceDelegate.updateLimboDocument(u,v))})),x.push(b2(u,m,t.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!i.isEqual(ze.min())){const v=s.li.getLastRemoteSnapshotVersion(u).next((N=>s.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));x.push(v)}return le.waitFor(x).next((()=>m.apply(u))).next((()=>s.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(s.vs=c,u)))}function b2(r,t,s){let i=Ze(),c=Ze();return s.forEach((u=>i=i.add(u))),t.getEntries(r,i).next((u=>{let m=oa();return s.forEach(((x,p)=>{const g=u.get(x);p.isFoundDocument()!==g.isFoundDocument()&&(c=c.add(x)),p.isNoDocument()&&p.version.isEqual(ze.min())?(t.removeEntry(x,p.readTime),m=m.insert(x,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(p),m=m.insert(x,p)):be(tm,"Ignoring outdated watch update for ",x,". Current version:",g.version," Watch version:",p.version)})),{Bs:m,Ls:c}}))}function v2(r,t){const s=Pe(r);return s.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=qf),s.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function _2(r,t){const s=Pe(r);return s.persistence.runTransaction("Allocate target","readwrite",(i=>{let c;return s.li.getTargetData(i,t).next((u=>u?(c=u,le.resolve(c)):s.li.allocateTargetId(i).next((m=>(c=new Ba(t,m,"TargetPurposeListen",i.currentSequenceNumber),s.li.addTargetData(i,c).next((()=>c)))))))})).then((i=>{const c=s.vs.get(i.targetId);return(c===null||i.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(s.vs=s.vs.insert(i.targetId,i),s.Fs.set(t,i.targetId)),i}))}async function Rf(r,t,s){const i=Pe(r),c=i.vs.get(t),u=s?"readwrite":"readwrite-primary";try{s||await i.persistence.runTransaction("Release target",u,(m=>i.persistence.referenceDelegate.removeTarget(m,c)))}catch(m){if(!Qi(m))throw m;be(tm,`Failed to update sequence numbers for target ${t}: ${m}`)}i.vs=i.vs.remove(t),i.Fs.delete(c.target)}function qx(r,t,s){const i=Pe(r);let c=ze.min(),u=Ze();return i.persistence.runTransaction("Execute query","readwrite",(m=>(function(p,g,v){const N=Pe(p),j=N.Fs.get(v);return j!==void 0?le.resolve(N.vs.get(j)):N.li.getTargetData(g,v)})(i,m,Os(t)).next((x=>{if(x)return c=x.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(m,x.targetId).next((p=>{u=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(m,t,s?c:ze.min(),s?u:Ze()))).next((x=>(N2(i,lw(t),x),{documents:x,ks:u})))))}function N2(r,t,s){let i=r.Ms.get(t)||ze.min();s.forEach(((c,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),r.Ms.set(t,i)}class Hx{constructor(){this.activeTargetIds=fw()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class E2{constructor(){this.vo=new Hx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,i){}addLocalQueryTarget(t,s=!0){return s&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,s,i){this.Fo[t]=s}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new Hx,Promise.resolve()}handleUserChange(t,s,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="ConnectivityMonitor";class Fx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){be(Gx,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){be(Gx,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu=null;function Df(){return lu===null?lu=(function(){return 268435456+Math.round(2147483648*Math.random())})():lu++,"0x"+lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="RestConnection",j2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class T2{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.qo=s+"://"+t.host,this.Uo=`projects/${i}/databases/${c}`,this.$o=this.databaseId.database===vu?`project_id=${i}`:`project_id=${i}&database_id=${c}`}Wo(t,s,i,c,u){const m=Df(),x=this.Qo(t,s.toUriEncodedString());be(lf,`Sending RPC '${t}' ${m}:`,x,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,c,u);const{host:g}=new URL(x),v=Uf(g);return this.zo(t,x,p,i,v).then((N=>(be(lf,`Received RPC '${t}' ${m}: `,N),N)),(N=>{throw kr(lf,`RPC '${t}' ${m} failed with error: `,N,"url: ",x,"request:",i),N}))}jo(t,s,i,c,u,m){return this.Wo(t,s,i,c,u)}Go(t,s,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$i})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((c,u)=>t[u]=c)),i&&i.headers.forEach(((c,u)=>t[u]=c))}Qo(t,s){const i=j2[t];let c=`${this.qo}/v1/${s}:${i}`;return this.databaseInfo.apiKey&&(c=`${c}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),c}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection",eo=(r,t,s)=>{r.listen(t,(i=>{try{s(i)}catch(c){setTimeout((()=>{throw c}),0)}}))};class Vi extends T2{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Vi.c_){const t=Z0();eo(t,X0.STAT_EVENT,(s=>{s.stat===xf.PROXY?be(un,"STAT_EVENT: detected buffering proxy"):s.stat===xf.NOPROXY&&be(un,"STAT_EVENT: detected no buffering proxy")})),Vi.c_=!0}}zo(t,s,i,c,u){const m=Df();return new Promise(((x,p)=>{const g=new Q0;g.setWithCredentials(!0),g.listenOnce(K0.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ou.NO_ERROR:const N=g.getResponseJson();be(un,`XHR for RPC '${t}' ${m} received:`,JSON.stringify(N)),x(N);break;case ou.TIMEOUT:be(un,`RPC '${t}' ${m} timed out`),p(new ye(re.DEADLINE_EXCEEDED,"Request time out"));break;case ou.HTTP_ERROR:const j=g.getStatus();if(be(un,`RPC '${t}' ${m} failed with status:`,j,"response text:",g.getResponseText()),j>0){let z=g.getResponseJson();Array.isArray(z)&&(z=z[0]);const L=z==null?void 0:z.error;if(L&&L.status&&L.message){const Z=(function(ge){const ce=ge.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ce)>=0?ce:re.UNKNOWN})(L.status);p(new ye(Z,L.message))}else p(new ye(re.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ye(re.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:t,streamId:m,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{be(un,`RPC '${t}' ${m} completed.`)}}));const v=JSON.stringify(c);be(un,`RPC '${t}' ${m} sending request:`,c),g.send(s,"POST",v,i,15)}))}T_(t,s,i){const c=Df(),u=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=this.createWebChannelTransport(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(x.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(x.useFetchStreams=!0),this.Go(x.initMessageHeaders,s,i),x.encodeInitMessageHeaders=!0;const g=u.join("");be(un,`Creating RPC '${t}' stream ${c}: ${g}`,x);const v=m.createWebChannel(g,x);this.I_(v);let N=!1,j=!1;const z=new S2({Ho:L=>{j?be(un,`Not sending because RPC '${t}' stream ${c} is closed:`,L):(N||(be(un,`Opening RPC '${t}' stream ${c} transport.`),v.open(),N=!0),be(un,`RPC '${t}' stream ${c} sending:`,L),v.send(L))},Jo:()=>v.close()});return eo(v,to.EventType.OPEN,(()=>{j||(be(un,`RPC '${t}' stream ${c} transport opened.`),z.i_())})),eo(v,to.EventType.CLOSE,(()=>{j||(j=!0,be(un,`RPC '${t}' stream ${c} transport closed`),z.o_(),this.E_(v))})),eo(v,to.EventType.ERROR,(L=>{j||(j=!0,kr(un,`RPC '${t}' stream ${c} transport errored. Name:`,L.name,"Message:",L.message),z.o_(new ye(re.UNAVAILABLE,"The operation could not be completed")))})),eo(v,to.EventType.MESSAGE,(L=>{var Z;if(!j){const P=L.data[0];lt(!!P,16349);const ge=P,ce=(ge==null?void 0:ge.error)||((Z=ge[0])==null?void 0:Z.error);if(ce){be(un,`RPC '${t}' stream ${c} received error:`,ce);const te=ce.status;let he=(function(D){const A=qt[D];if(A!==void 0)return Mb(A)})(te),Se=ce.message;te==="NOT_FOUND"&&Se.includes("database")&&Se.includes("does not exist")&&Se.includes(this.databaseId.database)&&kr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),he===void 0&&(he=re.INTERNAL,Se="Unknown error status: "+te+" with message "+ce.message),j=!0,z.o_(new ye(he,Se)),v.close()}else be(un,`RPC '${t}' stream ${c} received:`,P),z.__(P)}})),Vi.u_(),setTimeout((()=>{z.s_()}),0),z}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((s=>s===t))}Go(t,s,i){super.Go(t,s,i),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return J0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(r){return new Vi(r)}function of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(r){return new Mw(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi.c_=!1;class Yb{constructor(t,s,i=1e3,c=1.5,u=6e4){this.Ci=t,this.timerId=s,this.R_=i,this.A_=c,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const s=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),c=Math.max(0,s-i);c>0&&be("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.d_} ms, delay with jitter: ${s} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="PersistentStream";class Qb{constructor(t,s,i,c,u,m,x,p){this.Ci=t,this.b_=i,this.S_=c,this.connection=u,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=x,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yb(t,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,s){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():s&&s.code===re.RESOURCE_EXHAUSTED?(la(s.toString()),la("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(s)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,c])=>{this.D_===s&&this.G_(i,c)}),(i=>{t((()=>{const c=new ye(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(c)}))}))}G_(t,s){const i=this.Q_(this.D_);this.stream=this.j_(t,s),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((c=>{i((()=>this.z_(c)))})),this.stream.onMessage((c=>{i((()=>++this.F_==1?this.H_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return be($x,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return s=>{this.Ci.enqueueAndForget((()=>this.D_===t?s():(be($x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class C2 extends Qb{constructor(t,s,i,c,u,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,i,c,m),this.serializer=u}j_(t,s){return this.connection.T_("Listen",t,s)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const s=Vw(this.serializer,t),i=(function(u){if(!("targetChange"in u))return ze.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?ze.min():m.readTime?Vs(m.readTime):ze.min()})(t);return this.listener.J_(s,i)}Z_(t){const s={};s.database=Cf(this.serializer),s.addTarget=(function(u,m){let x;const p=m.target;if(x=Ef(p)?{documents:Uw(u,p)}:{query:Lw(u,p).ft},x.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){x.resumeToken=Vb(u,m.resumeToken);const g=Tf(u,m.expectedCount);g!==null&&(x.expectedCount=g)}else if(m.snapshotVersion.compareTo(ze.min())>0){x.readTime=ju(u,m.snapshotVersion.toTimestamp());const g=Tf(u,m.expectedCount);g!==null&&(x.expectedCount=g)}return x})(this.serializer,t);const i=Bw(this.serializer,t);i&&(s.labels=i),this.K_(s)}X_(t){const s={};s.database=Cf(this.serializer),s.removeTarget=t,this.K_(s)}}class R2 extends Qb{constructor(t,s,i,c,u,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,i,c,m),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,s){return this.connection.T_("Write",t,s)}H_(t){return lt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,lt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){lt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const s=zw(t.writeResults,t.commitTime),i=Vs(t.commitTime);return this.listener.na(i,s)}ra(){const t={};t.database=Cf(this.serializer),this.K_(t)}ea(t){const s={streamToken:this.lastStreamToken,writes:t.map((i=>kw(this.serializer,i)))};this.K_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{}class M2 extends D2{constructor(t,s,i,c){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=i,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,s,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.Wo(t,Sf(s,i),c,u,m))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(re.UNKNOWN,u.toString())}))}jo(t,s,i,c,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,x])=>this.connection.jo(t,Sf(s,i),c,m,x,u))).catch((m=>{throw m.name==="FirebaseError"?(m.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new ye(re.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function I2(r,t,s,i){return new M2(r,t,s,i)}class O2{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(la(s),this.aa=!1):be("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="RemoteStore";class V2{constructor(t,s,i,c,u){this.localStore=t,this.datastore=s,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((m=>{i.enqueueAndForget((async()=>{Lr(this)&&(be(zr,"Restarting streams for network reachability change."),await(async function(p){const g=Pe(p);g.Ea.add(4),await jo(g),g.Va.set("Unknown"),g.Ea.delete(4),await qu(g)})(this))}))})),this.Va=new O2(i,c)}}async function qu(r){if(Lr(r))for(const t of r.Ra)await t(!0)}async function jo(r){for(const t of r.Ra)await t(!1)}function Kb(r,t){const s=Pe(r);s.Ia.has(t.targetId)||(s.Ia.set(t.targetId,t),rm(s)?am(s):Xi(s).O_()&&sm(s,t))}function nm(r,t){const s=Pe(r),i=Xi(s);s.Ia.delete(t),i.O_()&&Xb(s,t),s.Ia.size===0&&(i.O_()?i.L_():Lr(s)&&s.Va.set("Unknown"))}function sm(r,t){if(r.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ze.min())>0){const s=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Xi(r).Z_(t)}function Xb(r,t){r.da.$e(t),Xi(r).X_(t)}function am(r){r.da=new Aw({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Xi(r).start(),r.Va.ua()}function rm(r){return Lr(r)&&!Xi(r).x_()&&r.Ia.size>0}function Lr(r){return Pe(r).Ea.size===0}function Zb(r){r.da=void 0}async function k2(r){r.Va.set("Online")}async function z2(r){r.Ia.forEach(((t,s)=>{sm(r,t)}))}async function U2(r,t){Zb(r),rm(r)?(r.Va.ha(t),am(r)):r.Va.set("Unknown")}async function L2(r,t,s){if(r.Va.set("Online"),t instanceof Ob&&t.state===2&&t.cause)try{await(async function(c,u){const m=u.cause;for(const x of u.targetIds)c.Ia.has(x)&&(await c.remoteSyncer.rejectListen(x,m),c.Ia.delete(x),c.da.removeTarget(x))})(r,t)}catch(i){be(zr,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Su(r,i)}else if(t instanceof du?r.da.Xe(t):t instanceof Ib?r.da.st(t):r.da.tt(t),!s.isEqual(ze.min()))try{const i=await $b(r.localStore);s.compareTo(i)>=0&&await(function(u,m){const x=u.da.Tt(m);return x.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(g);v&&u.Ia.set(g,v.withResumeToken(p.resumeToken,m))}})),x.targetMismatches.forEach(((p,g)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(on.EMPTY_BYTE_STRING,v.snapshotVersion)),Xb(u,p);const N=new Ba(v.target,p,g,v.sequenceNumber);sm(u,N)})),u.remoteSyncer.applyRemoteEvent(x)})(r,s)}catch(i){be(zr,"Failed to raise snapshot:",i),await Su(r,i)}}async function Su(r,t,s){if(!Qi(t))throw t;r.Ea.add(1),await jo(r),r.Va.set("Offline"),s||(s=()=>$b(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{be(zr,"Retrying IndexedDB access"),await s(),r.Ea.delete(1),await qu(r)}))}function Jb(r,t){return t().catch((s=>Su(r,s,t)))}async function Hu(r){const t=Pe(r),s=Xa(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:qf;for(;P2(t);)try{const c=await v2(t.localStore,i);if(c===null){t.Ta.length===0&&s.L_();break}i=c.batchId,B2(t,c)}catch(c){await Su(t,c)}Wb(t)&&ev(t)}function P2(r){return Lr(r)&&r.Ta.length<10}function B2(r,t){r.Ta.push(t);const s=Xa(r);s.O_()&&s.Y_&&s.ea(t.mutations)}function Wb(r){return Lr(r)&&!Xa(r).x_()&&r.Ta.length>0}function ev(r){Xa(r).start()}async function q2(r){Xa(r).ra()}async function H2(r){const t=Xa(r);for(const s of r.Ta)t.ea(s.mutations)}async function G2(r,t,s){const i=r.Ta.shift(),c=Kf.from(i,t,s);await Jb(r,(()=>r.remoteSyncer.applySuccessfulWrite(c))),await Hu(r)}async function F2(r,t){t&&Xa(r).Y_&&await(async function(i,c){if((function(m){return jw(m)&&m!==re.ABORTED})(c.code)){const u=i.Ta.shift();Xa(i).B_(),await Jb(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,c))),await Hu(i)}})(r,t),Wb(r)&&ev(r)}async function Yx(r,t){const s=Pe(r);s.asyncQueue.verifyOperationInProgress(),be(zr,"RemoteStore received new credentials");const i=Lr(s);s.Ea.add(3),await jo(s),i&&s.Va.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.Ea.delete(3),await qu(s)}async function $2(r,t){const s=Pe(r);t?(s.Ea.delete(2),await qu(s)):t||(s.Ea.add(2),await jo(s),s.Va.set("Unknown"))}function Xi(r){return r.ma||(r.ma=(function(s,i,c){const u=Pe(s);return u.sa(),new C2(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,c)})(r.datastore,r.asyncQueue,{Zo:k2.bind(null,r),Yo:z2.bind(null,r),t_:U2.bind(null,r),J_:L2.bind(null,r)}),r.Ra.push((async t=>{t?(r.ma.B_(),rm(r)?am(r):r.Va.set("Unknown")):(await r.ma.stop(),Zb(r))}))),r.ma}function Xa(r){return r.fa||(r.fa=(function(s,i,c){const u=Pe(s);return u.sa(),new R2(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,c)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:q2.bind(null,r),t_:F2.bind(null,r),ta:H2.bind(null,r),na:G2.bind(null,r)}),r.Ra.push((async t=>{t?(r.fa.B_(),await Hu(r)):(await r.fa.stop(),r.Ta.length>0&&(be(zr,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(t,s,i,c,u){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=i,this.op=c,this.removalCallback=u,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,s,i,c,u){const m=Date.now()+i,x=new im(t,s,m,c,u);return x.start(i),x}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(re.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lm(r,t){if(la("AsyncQueue",`${t}: ${r}`),Qi(r))return new ye(re.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{static emptySet(t){return new ki(t.comparator)}constructor(t){this.comparator=t?(s,i)=>t(s,i)||De.comparator(s.key,i.key):(s,i)=>De.comparator(s.key,i.key),this.keyedMap=no(),this.sortedSet=new Nt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((s,i)=>(t(s),!1)))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof ki)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;s.hasNext();){const c=s.getNext().key,u=i.getNext().key;if(!c.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((s=>{t.push(s.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const i=new ki;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=s,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.ga=new Nt(De.comparator)}track(t){const s=t.doc.key,i=this.ga.get(s);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(s,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(s,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(s,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(s):t.type===1&&i.type===2?this.ga=this.ga.insert(s,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):Oe(63341,{Vt:t,pa:i}):this.ga=this.ga.insert(s,t)}ya(){const t=[];return this.ga.inorderTraversal(((s,i)=>{t.push(i)})),t}}class Hi{constructor(t,s,i,c,u,m,x,p,g){this.query=t,this.docs=s,this.oldDocs=i,this.docChanges=c,this.mutatedKeys=u,this.fromCache=m,this.syncStateChanged=x,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(t,s,i,c,u){const m=[];return s.forEach((x=>{m.push({type:0,doc:x})})),new Hi(t,s,ki.emptySet(s),m,i,c,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,i=t.docChanges;if(s.length!==i.length)return!1;for(let c=0;c<s.length;c++)if(s[c].type!==i[c].type||!s[c].doc.isEqual(i[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class Q2{constructor(){this.queries=Kx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,i){const c=Pe(s),u=c.queries;c.queries=Kx(),u.forEach(((m,x)=>{for(const p of x.ba)p.onError(i)}))})(this,new ye(re.ABORTED,"Firestore shutting down"))}}function Kx(){return new Ur((r=>vb(r)),Vu)}async function tv(r,t){const s=Pe(r);let i=3;const c=t.query;let u=s.queries.get(c);u?!u.Sa()&&t.Da()&&(i=2):(u=new Y2,i=t.Da()?0:1);try{switch(i){case 0:u.wa=await s.onListen(c,!0);break;case 1:u.wa=await s.onListen(c,!1);break;case 2:await s.onFirstRemoteStoreListen(c)}}catch(m){const x=lm(m,`Initialization of query '${Ri(t.query)}' failed`);return void t.onError(x)}s.queries.set(c,u),u.ba.push(t),t.va(s.onlineState),u.wa&&t.Fa(u.wa)&&om(s)}async function nv(r,t){const s=Pe(r),i=t.query;let c=3;const u=s.queries.get(i);if(u){const m=u.ba.indexOf(t);m>=0&&(u.ba.splice(m,1),u.ba.length===0?c=t.Da()?0:1:!u.Sa()&&t.Da()&&(c=2))}switch(c){case 0:return s.queries.delete(i),s.onUnlisten(i,!0);case 1:return s.queries.delete(i),s.onUnlisten(i,!1);case 2:return s.onLastRemoteStoreUnlisten(i);default:return}}function K2(r,t){const s=Pe(r);let i=!1;for(const c of t){const u=c.query,m=s.queries.get(u);if(m){for(const x of m.ba)x.Fa(c)&&(i=!0);m.wa=c}}i&&om(s)}function X2(r,t,s){const i=Pe(r),c=i.queries.get(t);if(c)for(const u of c.ba)u.onError(s);i.queries.delete(t)}function om(r){r.Ca.forEach((t=>{t.next()}))}var Mf,Xx;(Xx=Mf||(Mf={})).Ma="default",Xx.Cache="cache";class sv{constructor(t,s,i){this.query=t,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const c of t.docChanges)c.type!==3&&i.push(c);t=new Hi(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),s=!0):this.La(t,this.onlineState)&&(this.ka(t),s=!0),this.Na=t,s}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),s=!0),s}La(t,s){if(!t.fromCache||!this.Da())return!0;const i=s!=="Offline";return(!this.options.Ka||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(t){t=Hi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t){this.key=t}}class rv{constructor(t){this.key=t}}class Z2{constructor(t,s){this.query=t,this.Za=s,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.eu=_b(t),this.tu=new ki(this.eu)}get nu(){return this.Za}ru(t,s){const i=s?s.iu:new Qx,c=s?s.tu:this.tu;let u=s?s.mutatedKeys:this.mutatedKeys,m=c,x=!1;const p=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,g=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal(((v,N)=>{const j=c.get(v),z=ku(this.query,N)?N:null,L=!!j&&this.mutatedKeys.has(j.key),Z=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let P=!1;j&&z?j.data.isEqual(z.data)?L!==Z&&(i.track({type:3,doc:z}),P=!0):this.su(j,z)||(i.track({type:2,doc:z}),P=!0,(p&&this.eu(z,p)>0||g&&this.eu(z,g)<0)&&(x=!0)):!j&&z?(i.track({type:0,doc:z}),P=!0):j&&!z&&(i.track({type:1,doc:j}),P=!0,(p||g)&&(x=!0)),P&&(z?(m=m.add(z),u=Z?u.add(v):u.delete(v)):(m=m.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const v=this.query.limitType==="F"?m.last():m.first();m=m.delete(v.key),u=u.delete(v.key),i.track({type:1,doc:v})}return{tu:m,iu:i,Ss:x,mutatedKeys:u}}su(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,i,c){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const m=t.iu.ya();m.sort(((v,N)=>(function(z,L){const Z=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Vt:P})}};return Z(z)-Z(L)})(v.type,N.type)||this.eu(v.doc,N.doc))),this.ou(i),c=c??!1;const x=s&&!c?this._u():[],p=this.Ya.size===0&&this.current&&!c?1:0,g=p!==this.Xa;return this.Xa=p,m.length!==0||g?{snapshot:new Hi(this.query,t.tu,u,m,t.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:x}:{au:x}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((s=>this.Za=this.Za.add(s))),t.modifiedDocuments.forEach((s=>{})),t.removedDocuments.forEach((s=>this.Za=this.Za.delete(s))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const s=[];return t.forEach((i=>{this.Ya.has(i)||s.push(new rv(i))})),this.Ya.forEach((i=>{t.has(i)||s.push(new av(i))})),s}cu(t){this.Za=t.ks,this.Ya=Ze();const s=this.ru(t.documents);return this.applyChanges(s,!0)}lu(){return Hi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const cm="SyncEngine";class J2{constructor(t,s,i){this.query=t,this.targetId=s,this.view=i}}class W2{constructor(t){this.key=t,this.hu=!1}}class ej{constructor(t,s,i,c,u,m){this.localStore=t,this.remoteStore=s,this.eventManager=i,this.sharedClientState=c,this.currentUser=u,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Ur((x=>vb(x)),Vu),this.Iu=new Map,this.Eu=new Set,this.Ru=new Nt(De.comparator),this.Au=new Map,this.Vu=new Jf,this.du={},this.mu=new Map,this.fu=qi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tj(r,t,s=!0){const i=hv(r);let c;const u=i.Tu.get(t);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),c=u.view.lu()):c=await iv(i,t,s,!0),c}async function nj(r,t){const s=hv(r);await iv(s,t,!0,!1)}async function iv(r,t,s,i){const c=await _2(r.localStore,Os(t)),u=c.targetId,m=r.sharedClientState.addLocalQueryTarget(u,s);let x;return i&&(x=await sj(r,t,u,m==="current",c.resumeToken)),r.isPrimaryClient&&s&&Kb(r.remoteStore,c),x}async function sj(r,t,s,i,c){r.pu=(N,j,z)=>(async function(Z,P,ge,ce){let te=P.view.ru(ge);te.Ss&&(te=await qx(Z.localStore,P.query,!1).then((({documents:D})=>P.view.ru(D,te))));const he=ce&&ce.targetChanges.get(P.targetId),Se=ce&&ce.targetMismatches.get(P.targetId)!=null,Me=P.view.applyChanges(te,Z.isPrimaryClient,he,Se);return Jx(Z,P.targetId,Me.au),Me.snapshot})(r,N,j,z);const u=await qx(r.localStore,t,!0),m=new Z2(t,u.ks),x=m.ru(u.documents),p=wo.createSynthesizedTargetChangeForCurrentChange(s,i&&r.onlineState!=="Offline",c),g=m.applyChanges(x,r.isPrimaryClient,p);Jx(r,s,g.au);const v=new J2(t,s,m);return r.Tu.set(t,v),r.Iu.has(s)?r.Iu.get(s).push(t):r.Iu.set(s,[t]),g.snapshot}async function aj(r,t,s){const i=Pe(r),c=i.Tu.get(t),u=i.Iu.get(c.targetId);if(u.length>1)return i.Iu.set(c.targetId,u.filter((m=>!Vu(m,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(c.targetId),i.sharedClientState.isActiveQueryTarget(c.targetId)||await Rf(i.localStore,c.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(c.targetId),s&&nm(i.remoteStore,c.targetId),If(i,c.targetId)})).catch(Yi)):(If(i,c.targetId),await Rf(i.localStore,c.targetId,!0))}async function rj(r,t){const s=Pe(r),i=s.Tu.get(t),c=s.Iu.get(i.targetId);s.isPrimaryClient&&c.length===1&&(s.sharedClientState.removeLocalQueryTarget(i.targetId),nm(s.remoteStore,i.targetId))}async function ij(r,t,s){const i=fj(r);try{const c=await(function(m,x){const p=Pe(m),g=pt.now(),v=x.reduce(((z,L)=>z.add(L.key)),Ze());let N,j;return p.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let L=oa(),Z=Ze();return p.xs.getEntries(z,v).next((P=>{L=P,L.forEach(((ge,ce)=>{ce.isValidDocument()||(Z=Z.add(ge))}))})).next((()=>p.localDocuments.getOverlayedDocuments(z,L))).next((P=>{N=P;const ge=[];for(const ce of x){const te=vw(ce,N.get(ce.key).overlayedDocument);te!=null&&ge.push(new tr(ce.key,te,db(te.value.mapValue),jn.exists(!0)))}return p.mutationQueue.addMutationBatch(z,g,ge,x)})).next((P=>{j=P;const ge=P.applyToLocalDocumentSet(N,Z);return p.documentOverlayCache.saveOverlays(z,P.batchId,ge)}))})).then((()=>({batchId:j.batchId,changes:Eb(N)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(c.batchId),(function(m,x,p){let g=m.du[m.currentUser.toKey()];g||(g=new Nt(Xe)),g=g.insert(x,p),m.du[m.currentUser.toKey()]=g})(i,c.batchId,s),await To(i,c.changes),await Hu(i.remoteStore)}catch(c){const u=lm(c,"Failed to persist write");s.reject(u)}}async function lv(r,t){const s=Pe(r);try{const i=await x2(s.localStore,t);t.targetChanges.forEach(((c,u)=>{const m=s.Au.get(u);m&&(lt(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?m.hu=!0:c.modifiedDocuments.size>0?lt(m.hu,14607):c.removedDocuments.size>0&&(lt(m.hu,42227),m.hu=!1))})),await To(s,i,t)}catch(i){await Yi(i)}}function Zx(r,t,s){const i=Pe(r);if(i.isPrimaryClient&&s===0||!i.isPrimaryClient&&s===1){const c=[];i.Tu.forEach(((u,m)=>{const x=m.view.va(t);x.snapshot&&c.push(x.snapshot)})),(function(m,x){const p=Pe(m);p.onlineState=x;let g=!1;p.queries.forEach(((v,N)=>{for(const j of N.ba)j.va(x)&&(g=!0)})),g&&om(p)})(i.eventManager,t),c.length&&i.Pu.J_(c),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function lj(r,t,s){const i=Pe(r);i.sharedClientState.updateQueryState(t,"rejected",s);const c=i.Au.get(t),u=c&&c.key;if(u){let m=new Nt(De.comparator);m=m.insert(u,dn.newNoDocument(u,ze.min()));const x=Ze().add(u),p=new Pu(ze.min(),new Map,new Nt(Xe),m,x);await lv(i,p),i.Ru=i.Ru.remove(u),i.Au.delete(t),um(i)}else await Rf(i.localStore,t,!1).then((()=>If(i,t,s))).catch(Yi)}async function oj(r,t){const s=Pe(r),i=t.batch.batchId;try{const c=await y2(s.localStore,t);cv(s,i,null),ov(s,i),s.sharedClientState.updateMutationState(i,"acknowledged"),await To(s,c)}catch(c){await Yi(c)}}async function cj(r,t,s){const i=Pe(r);try{const c=await(function(m,x){const p=Pe(m);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,x).next((N=>(lt(N!==null,37113),v=N.keys(),p.mutationQueue.removeMutationBatch(g,N)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,x))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,t);cv(i,t,s),ov(i,t),i.sharedClientState.updateMutationState(t,"rejected",s),await To(i,c)}catch(c){await Yi(c)}}function ov(r,t){(r.mu.get(t)||[]).forEach((s=>{s.resolve()})),r.mu.delete(t)}function cv(r,t,s){const i=Pe(r);let c=i.du[i.currentUser.toKey()];if(c){const u=c.get(t);u&&(s?u.reject(s):u.resolve(),c=c.remove(t)),i.du[i.currentUser.toKey()]=c}}function If(r,t,s=null){r.sharedClientState.removeLocalQueryTarget(t);for(const i of r.Iu.get(t))r.Tu.delete(i),s&&r.Pu.yu(i,s);r.Iu.delete(t),r.isPrimaryClient&&r.Vu.Gr(t).forEach((i=>{r.Vu.containsKey(i)||uv(r,i)}))}function uv(r,t){r.Eu.delete(t.path.canonicalString());const s=r.Ru.get(t);s!==null&&(nm(r.remoteStore,s),r.Ru=r.Ru.remove(t),r.Au.delete(s),um(r))}function Jx(r,t,s){for(const i of s)i instanceof av?(r.Vu.addReference(i.key,t),uj(r,i)):i instanceof rv?(be(cm,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,t),r.Vu.containsKey(i.key)||uv(r,i.key)):Oe(19791,{wu:i})}function uj(r,t){const s=t.key,i=s.path.canonicalString();r.Ru.get(s)||r.Eu.has(i)||(be(cm,"New document in limbo: "+s),r.Eu.add(i),um(r))}function um(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const s=new De(yt.fromString(t)),i=r.fu.next();r.Au.set(i,new W2(s)),r.Ru=r.Ru.insert(s,i),Kb(r.remoteStore,new Ba(Os(Yf(s.path)),i,"TargetPurposeLimboResolution",Mu.ce))}}async function To(r,t,s){const i=Pe(r),c=[],u=[],m=[];i.Tu.isEmpty()||(i.Tu.forEach(((x,p)=>{m.push(i.pu(p,t,s).then((g=>{var v;if((g||s)&&i.isPrimaryClient){const N=g?!g.fromCache:(v=s==null?void 0:s.targetChanges.get(p.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,N?"current":"not-current")}if(g){c.push(g);const N=em.Es(p.targetId,g);u.push(N)}})))})),await Promise.all(m),i.Pu.J_(c),await(async function(p,g){const v=Pe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(N=>le.forEach(g,(j=>le.forEach(j.Ts,(z=>v.persistence.referenceDelegate.addReference(N,j.targetId,z))).next((()=>le.forEach(j.Is,(z=>v.persistence.referenceDelegate.removeReference(N,j.targetId,z)))))))))}catch(N){if(!Qi(N))throw N;be(tm,"Failed to update sequence numbers: "+N)}for(const N of g){const j=N.targetId;if(!N.fromCache){const z=v.vs.get(j),L=z.snapshotVersion,Z=z.withLastLimboFreeSnapshotVersion(L);v.vs=v.vs.insert(j,Z)}}})(i.localStore,u))}async function hj(r,t){const s=Pe(r);if(!s.currentUser.isEqual(t)){be(cm,"User change. New user:",t.toKey());const i=await Fb(s.localStore,t);s.currentUser=t,(function(u,m){u.mu.forEach((x=>{x.forEach((p=>{p.reject(new ye(re.CANCELLED,m))}))})),u.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await To(s,i.Ns)}}function dj(r,t){const s=Pe(r),i=s.Au.get(t);if(i&&i.hu)return Ze().add(i.key);{let c=Ze();const u=s.Iu.get(t);if(!u)return c;for(const m of u){const x=s.Tu.get(m);c=c.unionWith(x.view.nu)}return c}}function hv(r){const t=Pe(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=lv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dj.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lj.bind(null,t),t.Pu.J_=K2.bind(null,t.eventManager),t.Pu.yu=X2.bind(null,t.eventManager),t}function fj(r){const t=Pe(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=oj.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cj.bind(null,t),t}class Au{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Bu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,s){return null}Mu(t,s){return null}vu(t){return p2(this.persistence,new f2,t.initialUser,this.serializer)}Cu(t){return new Gb(Wf.Vi,this.serializer)}Du(t){return new E2}async terminate(){var t,s;(t=this.gcScheduler)==null||t.stop(),(s=this.indexBackfillerScheduler)==null||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Au.provider={build:()=>new Au};class mj extends Au{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,s){lt(this.persistence.referenceDelegate instanceof Tu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Jw(i,t.asyncQueue,s)}Cu(t){const s=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Gb((i=>Tu.Vi(i,s)),this.serializer)}}class Of{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Zx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hj.bind(null,this.syncEngine),await $2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Q2})()}createDatastore(t){const s=Bu(t.databaseInfo.databaseId),i=A2(t.databaseInfo);return I2(t.authCredentials,t.appCheckCredentials,i,s)}createRemoteStore(t){return(function(i,c,u,m,x){return new V2(i,c,u,m,x)})(this.localStore,this.datastore,t.asyncQueue,(s=>Zx(this.syncEngine,s,0)),(function(){return Fx.v()?new Fx:new w2})())}createSyncEngine(t,s){return(function(c,u,m,x,p,g,v){const N=new ej(c,u,m,x,p,g);return v&&(N.gu=!0),N})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await(async function(c){const u=Pe(c);be(zr,"RemoteStore shutting down."),u.Ea.add(5),await jo(u),u.Aa.shutdown(),u.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(s=this.eventManager)==null||s.terminate()}}Of.provider={build:()=>new Of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):la("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,s){setTimeout((()=>{this.muted||t(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="FirestoreClient";class gj{constructor(t,s,i,c,u){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=i,this._databaseInfo=c,this.user=hn.UNAUTHENTICATED,this.clientId=Bf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async m=>{be(Za,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(i,(m=>(be(Za,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const i=lm(s,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function cf(r,t){r.asyncQueue.verifyOperationInProgress(),be(Za,"Initializing OfflineComponentProvider");const s=r.configuration;await t.initialize(s);let i=s.initialUser;r.setCredentialChangeListener((async c=>{i.isEqual(c)||(await Fb(t.localStore,c),i=c)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function Wx(r,t){r.asyncQueue.verifyOperationInProgress();const s=await pj(r);be(Za,"Initializing OnlineComponentProvider"),await t.initialize(s,r.configuration),r.setCredentialChangeListener((i=>Yx(t.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,c)=>Yx(t.remoteStore,c))),r._onlineComponents=t}async function pj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){be(Za,"Using user provided OfflineComponentProvider");try{await cf(r,r._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!(function(c){return c.name==="FirebaseError"?c.code===re.FAILED_PRECONDITION||c.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(s))throw s;kr("Error using user provided cache. Falling back to memory cache: "+s),await cf(r,new Au)}}else be(Za,"Using default OfflineComponentProvider"),await cf(r,new mj(void 0));return r._offlineComponents}async function fv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(be(Za,"Using user provided OnlineComponentProvider"),await Wx(r,r._uninitializedComponentsProvider._online)):(be(Za,"Using default OnlineComponentProvider"),await Wx(r,new Of))),r._onlineComponents}function yj(r){return fv(r).then((t=>t.syncEngine))}async function mv(r){const t=await fv(r),s=t.eventManager;return s.onListen=tj.bind(null,t.syncEngine),s.onUnlisten=aj.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=nj.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=rj.bind(null,t.syncEngine),s}function xj(r,t,s={}){const i=new ra;return r.asyncQueue.enqueueAndForget((async()=>(function(u,m,x,p,g){const v=new dv({next:j=>{v.Nu(),m.enqueueAndForget((()=>nv(u,N)));const z=j.docs.has(x);!z&&j.fromCache?g.reject(new ye(re.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&j.fromCache&&p&&p.source==="server"?g.reject(new ye(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(j)},error:j=>g.reject(j)}),N=new sv(Yf(x.path),v,{includeMetadataChanges:!0,Ka:!0});return tv(u,N)})(await mv(r),r.asyncQueue,t,s,i))),i.promise}function bj(r,t,s={}){const i=new ra;return r.asyncQueue.enqueueAndForget((async()=>(function(u,m,x,p,g){const v=new dv({next:j=>{v.Nu(),m.enqueueAndForget((()=>nv(u,N))),j.fromCache&&p.source==="server"?g.reject(new ye(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(j)},error:j=>g.reject(j)}),N=new sv(x,v,{includeMetadataChanges:!0,Ka:!0});return tv(u,N)})(await mv(r),r.asyncQueue,t,s,i))),i.promise}function vj(r,t){const s=new ra;return r.asyncQueue.enqueueAndForget((async()=>ij(await yj(r),t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="ComponentProvider",e0=new Map;function Nj(r,t,s,i,c){return new qE(r,t,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,gv(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="firestore.googleapis.com",t0=!0;class n0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ye(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pv,this.ssl=t0}else this.host=t.host,this.ssl=t.ssl??t0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Hb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Xw)throw new ye(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}DE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gv(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,c){return i.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Gu{constructor(t,s,i,c){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=i,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ye(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new _E;switch(i.type){case"firstParty":return new jE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const i=e0.get(s);i&&(be(_j,"Removing Datastore"),e0.delete(s),i.terminate())})(this),Promise.resolve()}}function Ej(r,t,s,i={}){var g;r=Us(r,Gu);const c=Uf(t),u=r._getSettings(),m={...u,emulatorOptions:r._getEmulatorOptions()},x=`${t}:${s}`;c&&(Y1(`https://${x}`),Z1("Firestore",!0)),u.host!==pv&&u.host!==x&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:x,ssl:c,emulatorOptions:i};if(!pu(p,m)&&(r._setSettings(p),i.mockUserToken)){let v,N;if(typeof i.mockUserToken=="string")v=i.mockUserToken,N=hn.MOCK_USER;else{v=Q1(i.mockUserToken,(g=r._app)==null?void 0:g.options.projectId);const j=i.mockUserToken.sub||i.mockUserToken.user_id;if(!j)throw new ye(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new hn(j)}r._authCredentials=new NE(new eb(v,N))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t,s,i){this.converter=s,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Pr(this.firestore,t,this._query)}}class Ft{constructor(t,s,i){this.converter=s,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ft(this.firestore,t,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,s,i){if(No(s,Ft._jsonSchema))return new Ft(t,i||null,new De(yt.fromString(s.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Gt("string",Ft._jsonSchemaVersion),referencePath:Gt("string")};class Fa extends Pr{constructor(t,s,i){super(t,s,Yf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ft(this.firestore,null,new De(t))}withConverter(t){return new Fa(this.firestore,t,this._path)}}function hm(r,t,...s){if(r=zs(r),tb("collection","path",t),r instanceof Gu){const i=yt.fromString(t,...s);return gx(i),new Fa(r,null,i)}{if(!(r instanceof Ft||r instanceof Fa))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(yt.fromString(t,...s));return gx(i),new Fa(r.firestore,null,i)}}function So(r,t,...s){if(r=zs(r),arguments.length===1&&(t=Bf.newId()),tb("doc","path",t),r instanceof Gu){const i=yt.fromString(t,...s);return mx(i),new Ft(r,null,new De(i))}{if(!(r instanceof Ft||r instanceof Fa))throw new ye(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(yt.fromString(t,...s));return mx(i),new Ft(r.firestore,r instanceof Fa?r.converter:null,new De(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="AsyncQueue";class a0{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yb(this,"async_queue_retry"),this._c=()=>{const i=of();i&&be(s0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const s=of();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const s=of();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new ra;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Qi(t))throw t;be(s0,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const s=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,la("INTERNAL UNHANDLED ERROR: ",r0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=s,s}enqueueAfterDelay(t,s,i){this.uc(),this.oc.indexOf(t)>-1&&(s=0);const c=im.createAndSchedule(this,t,s,i,(u=>this.hc(u)));return this.tc.push(c),c}uc(){this.nc&&Oe(47125,{Pc:r0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const s of this.tc)if(s.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((s,i)=>s.targetTimeMs-i.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const s=this.tc.indexOf(t);this.tc.splice(s,1)}}function r0(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class Br extends Gu{constructor(t,s,i,c){super(t,s,i,c),this.type="firestore",this._queue=new a0,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new a0(t),this._firestoreClient=void 0,await t}}}function wj(r,t){const s=typeof r=="object"?r:lE(),i=typeof r=="string"?r:vu,c=nE(s,"firestore").getImmediate({identifier:i});if(!c._initialized){const u=F1("firestore");u&&Ej(c,...u)}return c}function Fu(r){if(r._terminated)throw new ye(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||jj(r),r._firestoreClient}function jj(r){var i,c,u,m;const t=r._freezeSettings(),s=Nj(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(c=r._app)==null?void 0:c.options.apiKey,t);r._componentsProvider||(u=t.localCache)!=null&&u._offlineComponentProvider&&((m=t.localCache)!=null&&m._onlineComponentProvider)&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new gj(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Xn(on.fromBase64String(t))}catch(s){throw new ye(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new Xn(on.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(No(t,Xn._jsonSchema))return Xn.fromBase64String(t.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Gt("string",Xn._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new ye(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new ye(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new ye(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Xe(this._lat,t._lat)||Xe(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ks._jsonSchemaVersion}}static fromJSON(t){if(No(t,ks._jsonSchema))return new ks(t.latitude,t.longitude)}}ks._jsonSchemaVersion="firestore/geoPoint/1.0",ks._jsonSchema={type:Gt("string",ks._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t){this._values=(t||[]).map((s=>s))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,c){if(i.length!==c.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==c[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(No(t,us._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((s=>typeof s=="number")))return new us(t.vectorValues);throw new ye(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}us._jsonSchemaVersion="firestore/vectorValue/1.0",us._jsonSchema={type:Gt("string",us._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=/^__.*__$/;class Sj{constructor(t,s,i){this.data=t,this.fieldMask=s,this.fieldTransforms=i}toMutation(t,s){return this.fieldMask!==null?new tr(t,this.data,this.fieldMask,s,this.fieldTransforms):new Eo(t,this.data,s,this.fieldTransforms)}}class yv{constructor(t,s,i){this.data=t,this.fieldMask=s,this.fieldTransforms=i}toMutation(t,s){return new tr(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function xv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{dataSource:r})}}class mm{constructor(t,s,i,c,u,m){this.settings=t,this.databaseId=s,this.serializer=i,this.ignoreUndefinedProperties=c,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new mm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var c;const s=(c=this.path)==null?void 0:c.child(t),i=this.contextWith({path:s,arrayElement:!1});return i.validatePathSegment(t),i}childContextForFieldPath(t){var c;const s=(c=this.path)==null?void 0:c.child(t),i=this.contextWith({path:s,arrayElement:!1});return i.validatePath(),i}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Cu(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((s=>t.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>t.isPrefixOf(s.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(xv(this.dataSource)&&Tj.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class Aj{constructor(t,s,i){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=i||Bu(t)}createContext(t,s,i,c=!1){return new mm({dataSource:t,methodName:s,targetDoc:i,path:ln.emptyPath(),arrayElement:!1,hasConverter:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $u(r){const t=r._freezeSettings(),s=Bu(r._databaseId);return new Aj(r._databaseId,!!t.ignoreUndefinedProperties,s)}function gm(r,t,s,i,c,u={}){const m=r.createContext(u.merge||u.mergeFields?2:0,t,s,c);pm("Data must be an object, but it was:",m,i);const x=bv(i,m);let p,g;if(u.merge)p=new Vn(m.fieldMask),g=m.fieldTransforms;else if(u.mergeFields){const v=[];for(const N of u.mergeFields){const j=Gi(t,N,s);if(!m.contains(j))throw new ye(re.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);Nv(v,j)||v.push(j)}p=new Vn(v),g=m.fieldTransforms.filter((N=>p.covers(N.field)))}else p=null,g=m.fieldTransforms;return new Sj(new wn(x),p,g)}class Yu extends fm{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Yu}}function Cj(r,t,s,i){const c=r.createContext(1,t,s);pm("Data must be an object, but it was:",c,i);const u=[],m=wn.empty();er(i,((p,g)=>{const v=_v(t,p,s);g=zs(g);const N=c.childContextForFieldPath(v);if(g instanceof Yu)u.push(v);else{const j=Ao(g,N);j!=null&&(u.push(v),m.set(v,j))}}));const x=new Vn(u);return new yv(m,x,c.fieldTransforms)}function Rj(r,t,s,i,c,u){const m=r.createContext(1,t,s),x=[Gi(t,i,s)],p=[c];if(u.length%2!=0)throw new ye(re.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)x.push(Gi(t,u[j])),p.push(u[j+1]);const g=[],v=wn.empty();for(let j=x.length-1;j>=0;--j)if(!Nv(g,x[j])){const z=x[j];let L=p[j];L=zs(L);const Z=m.childContextForFieldPath(z);if(L instanceof Yu)g.push(z);else{const P=Ao(L,Z);P!=null&&(g.push(z),v.set(z,P))}}const N=new Vn(g);return new yv(v,N,m.fieldTransforms)}function Dj(r,t,s,i=!1){return Ao(s,r.createContext(i?4:3,t))}function Ao(r,t){if(vv(r=zs(r)))return pm("Unsupported field value:",t,r),bv(r,t);if(r instanceof fm)return(function(i,c){if(!xv(c.dataSource))throw c.createError(`${i._methodName}() can only be used with update() and set()`);if(!c.path)throw c.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(c);u&&c.fieldTransforms.push(u)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(i,c){const u=[];let m=0;for(const x of i){let p=Ao(x,c.childContextForArray(m));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),m++}return{arrayValue:{values:u}}})(r,t)}return(function(i,c){if((i=zs(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return mw(c.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=pt.fromDate(i);return{timestampValue:ju(c.serializer,u)}}if(i instanceof pt){const u=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ju(c.serializer,u)}}if(i instanceof ks)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xn)return{bytesValue:Vb(c.serializer,i._byteString)};if(i instanceof Ft){const u=c.databaseId,m=i.firestore._databaseId;if(!m.isEqual(u))throw c.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Zf(i.firestore._databaseId||c.databaseId,i._key.path)}}if(i instanceof us)return(function(m,x){const p=m instanceof us?m.toArray():m;return{mapValue:{fields:{[ub]:{stringValue:hb},[_u]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw x.createError("VectorValues must only contain numeric values.");return Qf(x.serializer,v)}))}}}}}})(i,c);if(qb(i))return i._toProto(c.serializer);throw c.createError(`Unsupported field value: ${Du(i)}`)})(r,t)}function bv(r,t){const s={};return ab(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):er(r,((i,c)=>{const u=Ao(c,t.childContextForField(i));u!=null&&(s[i]=u)})),{mapValue:{fields:s}}}function vv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof pt||r instanceof ks||r instanceof Xn||r instanceof Ft||r instanceof fm||r instanceof us||qb(r))}function pm(r,t,s){if(!vv(s)||!nb(s)){const i=Du(s);throw i==="an object"?t.createError(r+" a custom object"):t.createError(r+" "+i)}}function Gi(r,t,s){if((t=zs(t))instanceof dm)return t._internalPath;if(typeof t=="string")return _v(r,t);throw Cu("Field path arguments must be of type string or ",r,!1,void 0,s)}const Mj=new RegExp("[~\\*/\\[\\]]");function _v(r,t,s){if(t.search(Mj)>=0)throw Cu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,s);try{return new dm(...t.split("."))._internalPath}catch{throw Cu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,s)}}function Cu(r,t,s,i,c){const u=i&&!i.isEmpty(),m=c!==void 0;let x=`Function ${t}() called with invalid data`;s&&(x+=" (via `toFirestore()`)"),x+=". ";let p="";return(u||m)&&(p+=" (found",u&&(p+=` in field ${i}`),m&&(p+=` in document ${c}`),p+=")"),new ye(re.INVALID_ARGUMENT,x+r+p)}function Nv(r,t){return r.some((s=>s.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{convertValue(t,s="none"){switch(Ka(t)){case 0:return null;case 1:return t.booleanValue;case 2:return It(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(Qa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw Oe(62114,{value:t})}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const i={};return er(t,((c,u)=>{i[c]=this.convertValue(u,s)})),i}convertVectorValue(t){var i,c,u;const s=(u=(c=(i=t.fields)==null?void 0:i[_u].arrayValue)==null?void 0:c.values)==null?void 0:u.map((m=>It(m.doubleValue)));return new us(s)}convertGeoPoint(t){return new ks(It(t.latitude),It(t.longitude))}convertArray(t,s){return(t.values||[]).map((i=>this.convertValue(i,s)))}convertServerTimestamp(t,s){switch(s){case"previous":const i=Ou(t);return i==null?null:this.convertValue(i,s);case"estimate":return this.convertTimestamp(mo(t));default:return null}}convertTimestamp(t){const s=Ya(t);return new pt(s.seconds,s.nanos)}convertDocumentKey(t,s){const i=yt.fromString(t);lt(Bb(i),9688,{name:t});const c=new go(i.get(1),i.get(3)),u=new De(i.popFirst(5));return c.isEqual(s)||la(`Document ${u} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends Ij{constructor(t){super(),this.firestore=t}convertBytes(t){return new Xn(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new Ft(this.firestore,null,s)}}const i0="@firebase/firestore",l0="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(t,s,i,c,u){this._firestore=t,this._userDataWriter=s,this._key=i,this._document=c,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Oj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const s=this._document.data.field(Gi("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class Oj extends wv{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ym{}class jv extends ym{}function kj(r,t,...s){let i=[];t instanceof ym&&i.push(t),i=i.concat(s),(function(u){const m=u.filter((p=>p instanceof bm)).length,x=u.filter((p=>p instanceof xm)).length;if(m>1||m>0&&x>0)throw new ye(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const c of i)r=c._apply(r);return r}class xm extends jv{constructor(t,s,i){super(),this._field=t,this._op=s,this._value=i,this.type="where"}static _create(t,s,i){return new xm(t,s,i)}_apply(t){const s=this._parse(t);return Tv(t._query,s),new Pr(t.firestore,t.converter,wf(t._query,s))}_parse(t){const s=$u(t.firestore);return(function(u,m,x,p,g,v,N){let j;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){c0(N,v);const L=[];for(const Z of N)L.push(o0(p,u,Z));j={arrayValue:{values:L}}}else j=o0(p,u,N)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||c0(N,v),j=Dj(x,m,N,v==="in"||v==="not-in");return Ht.create(g,v,j)})(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}class bm extends ym{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new bm(t,s)}_parse(t){const s=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return s.length===1?s[0]:hs.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:((function(c,u){let m=c;const x=u.getFlattenedFilters();for(const p of x)Tv(m,p),m=wf(m,p)})(t._query,s),new Pr(t.firestore,t.converter,wf(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vm extends jv{constructor(t,s){super(),this._field=t,this._direction=s,this.type="orderBy"}static _create(t,s){return new vm(t,s)}_apply(t){const s=(function(c,u,m){if(c.startAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(c.endAt!==null)throw new ye(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yo(u,m)})(t._query,this._field,this._direction);return new Pr(t.firestore,t.converter,iw(t._query,s))}}function zj(r,t="asc"){const s=t,i=Gi("orderBy",r);return vm._create(i,s)}function o0(r,t,s){if(typeof(s=zs(s))=="string"){if(s==="")throw new ye(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bb(t)&&s.indexOf("/")!==-1)throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const i=t.path.child(yt.fromString(s));if(!De.isDocumentKey(i))throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ex(r,new De(i))}if(s instanceof Ft)return Ex(r,s._key);throw new ye(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Du(s)}.`)}function c0(r,t){if(!Array.isArray(r)||r.length===0)throw new ye(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Tv(r,t){const s=(function(c,u){for(const m of c)for(const x of m.getFlattenedFilters())if(u.indexOf(x.op)>=0)return x.op;return null})(r.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(s!==null)throw s===t.op?new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ye(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}function _m(r,t,s){let i;return i=r?s&&(s.merge||s.mergeFields)?r.toFirestore(t,s):r.toFirestore(t):t,i}class ao{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ir extends wv{constructor(t,s,i,c,u,m){super(t,s,i,c,m),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const i=this._document.data.field(Gi("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,s={};return s.type=Ir._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Ir._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ir._jsonSchema={type:Gt("string",Ir._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class fu extends Ir{data(t={}){return super.data(t)}}class zi{constructor(t,s,i,c){this._firestore=t,this._userDataWriter=s,this._snapshot=c,this.metadata=new ao(c.hasPendingWrites,c.fromCache),this.query=i}get docs(){const t=[];return this.forEach((s=>t.push(s))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach((i=>{t.call(s,new fu(this._firestore,this._userDataWriter,i.key,i,new ao(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new ye(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(c,u){if(c._snapshot.oldDocs.isEmpty()){let m=0;return c._snapshot.docChanges.map((x=>{const p=new fu(c._firestore,c._userDataWriter,x.doc.key,x.doc,new ao(c._snapshot.mutatedKeys.has(x.doc.key),c._snapshot.fromCache),c.query.converter);return x.doc,{type:"added",doc:p,oldIndex:-1,newIndex:m++}}))}{let m=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((x=>u||x.type!==3)).map((x=>{const p=new fu(c._firestore,c._userDataWriter,x.doc.key,x.doc,new ao(c._snapshot.mutatedKeys.has(x.doc.key),c._snapshot.fromCache),c.query.converter);let g=-1,v=-1;return x.type!==0&&(g=m.indexOf(x.doc.key),m=m.delete(x.doc.key)),x.type!==1&&(m=m.add(x.doc),v=m.indexOf(x.doc.key)),{type:Uj(x.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=zi._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Bf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],i=[],c=[];return this.docs.forEach((u=>{u._document!==null&&(s.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),c.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Uj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi._jsonSchemaVersion="firestore/querySnapshot/1.0",zi._jsonSchema={type:Gt("string",zi._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(t,s){this._firestore=t,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=$u(t)}set(t,s,i){this._verifyNotCommitted();const c=uf(t,this._firestore),u=_m(c.converter,s,i),m=gm(this._dataReader,"WriteBatch.set",c._key,u,c.converter!==null,i);return this._mutations.push(m.toMutation(c._key,jn.none())),this}update(t,s,i,...c){this._verifyNotCommitted();const u=uf(t,this._firestore);let m;return m=typeof(s=zs(s))=="string"||s instanceof dm?Rj(this._dataReader,"WriteBatch.update",u._key,s,i,c):Cj(this._dataReader,"WriteBatch.update",u._key,s),this._mutations.push(m.toMutation(u._key,jn.exists(!0))),this}delete(t){this._verifyNotCommitted();const s=uf(t,this._firestore);return this._mutations=this._mutations.concat(new Lu(s._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uf(r,t){if((r=zs(r)).firestore!==t)throw new ye(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(r){r=Us(r,Ft);const t=Us(r.firestore,Br),s=Fu(t);return xj(s,r._key).then((i=>Hj(t,r,i)))}function Sv(r){r=Us(r,Pr);const t=Us(r.firestore,Br),s=Fu(t),i=new Ev(t);return Vj(r._query),bj(s,r._query).then((c=>new zi(t,i,r,c)))}function Av(r,t,s){r=Us(r,Ft);const i=Us(r.firestore,Br),c=_m(r.converter,t,s),u=$u(i);return Qu(i,[gm(u,"setDoc",r._key,c,r.converter!==null,s).toMutation(r._key,jn.none())])}function Bj(r){return Qu(Us(r.firestore,Br),[new Lu(r._key,jn.none())])}function qj(r,t){const s=Us(r.firestore,Br),i=So(r),c=_m(r.converter,t),u=$u(r.firestore);return Qu(s,[gm(u,"addDoc",i._key,c,r.converter!==null,{}).toMutation(i._key,jn.exists(!1))]).then((()=>i))}function Qu(r,t){const s=Fu(r);return vj(s,t)}function Hj(r,t,s){const i=s.docs.get(t._key),c=new Ev(r);return new Ir(r,c,t._key,i,new ao(s.hasPendingWrites,s.fromCache),t.converter)}function Gj(r){return r=Us(r,Br),Fu(r),new Lj(r,(t=>Qu(r,t)))}(function(t,s=!0){vE(iE),xu(new uo("firestore",((i,{instanceIdentifier:c,options:u})=>{const m=i.getProvider("app").getImmediate(),x=new Br(new EE(i.getProvider("auth-internal")),new TE(m,i.getProvider("app-check-internal")),HE(m,c),m);return u={useFetchStreams:s,...u},x._setSettings(u),x}),"PUBLIC").setMultipleInstances(!0)),Oi(i0,l0,t),Oi(i0,l0,"esm2020")})();const Fj={apiKey:"AIzaSyCYT45WYMTTCpp3MDvUShT1yEwz-x9mYWQ",authDomain:"core-safe.firebaseapp.com",projectId:"core-safe",storageBucket:"core-safe.firebasestorage.app",messagingSenderId:"538945747105",appId:"1:538945747105:web:09373b659159a8b8c618e0"},$j=G0(Fj),Ja=wj($j),vo="drafts",Cv="masterData",Rv="general",Vf=async()=>{try{const r=kj(hm(Ja,vo),zj("lastModified","desc"));return(await Sv(r)).docs.map(s=>{const i=s.data();return{id:s.id,type:i.type,lastModified:i.lastModified instanceof pt?i.lastModified.toMillis():i.lastModified,data:i.data}})}catch(r){throw console.error(": ",r),r}},Yj=async r=>{try{await Bj(So(Ja,vo,r))}catch(t){throw console.error(": ",t),t}},Wa=async(r,t,s)=>{try{const i={type:t,data:s,lastModified:pt.now()};return r?(await Av(So(Ja,vo,r),i,{merge:!0}),r):(await qj(hm(Ja,vo),i)).id}catch(i){throw console.error(": ",i),i}},Ku=async()=>{try{const r=So(Ja,Cv,Rv),t=await Pj(r);return t.exists()?t.data():Mt}catch(r){return console.error(": ",r),Mt}},kn=async r=>{try{await Av(So(Ja,Cv,Rv),r)}catch(t){throw console.error(": ",t),t}},Qj=r=>new Promise((t,s)=>{const i=new FileReader;i.readAsDataURL(r),i.onload=c=>{var m;const u=new Image;u.src=(m=c.target)==null?void 0:m.result,u.onload=()=>{const x=document.createElement("canvas"),p=800,g=p/u.width;x.width=p,x.height=u.height*g;const v=x.getContext("2d");v==null||v.drawImage(u,0,0,x.width,x.height),t(x.toDataURL("image/jpeg",.7))},u.onerror=s},i.onerror=s}),_o=async r=>{try{const t=await Sv(hm(Ja,vo)),s=Gj(Ja);let i=0;t.forEach(c=>{const u=c.data();u.data&&u.data.project===r&&(s.delete(c.ref),i++)}),i>0&&await s.commit()}catch(t){throw console.error(": ",t),t}},Dv=async r=>{try{return(await Vf()).filter(i=>i.type==="SAFETY_PLAN"&&i.data.project===r)}catch(t){throw console.error(": ",t),t}},Nm=({onSave:r,onClear:t,lineWidth:s=3.5,keepOpenOnSave:i=!1})=>{const[c,u]=W.useState(!1),m=W.useRef(null),x=W.useRef(null),[p,g]=W.useState(!1),[v,N]=W.useState(!1),[j,z]=W.useState(!1),[L,Z]=W.useState(!1),[P,ge]=W.useState({width:0,height:0}),[ce,te]=W.useState(!1);W.useEffect(()=>{const T=()=>{te(window.innerHeight>window.innerWidth)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),W.useEffect(()=>{if(!c||!m.current)return;const T=setTimeout(()=>{(()=>{if(m.current){const S=window.devicePixelRatio||1,ve=Math.floor(m.current.clientWidth*S),xe=Math.floor(m.current.clientHeight*S);ve>0&&xe>0&&ge({width:ve,height:xe})}})()},300);return()=>clearTimeout(T)},[c,ce]),W.useEffect(()=>{if(!c||P.width===0)return;const T=x.current;if(T){const I=T.getContext("2d");I&&(I.lineWidth=s,I.lineCap="round",I.lineJoin="round",I.strokeStyle="#000")}},[P,c,s]);const he=T=>{const I=x.current;if(!I)return{x:0,y:0};const S=I.getBoundingClientRect(),ve=T.clientX,xe=T.clientY,G=ve-S.left,$=xe-S.top;return ce?{x:$/S.height*I.width,y:(1-G/S.width)*I.height}:{x:G/S.width*I.width,y:$/S.height*I.height}},Se=T=>{var ve;if(L&&T.pointerType!=="pen")return;T.preventDefault(),T.stopPropagation(),g(!0),T.target.setPointerCapture(T.pointerId);const I=he(T),S=(ve=x.current)==null?void 0:ve.getContext("2d");S==null||S.beginPath(),S==null||S.moveTo(I.x,I.y)},Me=T=>{var ve;if(!p||L&&T.pointerType!=="pen")return;T.preventDefault(),T.stopPropagation();const I=he(T),S=(ve=x.current)==null?void 0:ve.getContext("2d");S==null||S.lineTo(I.x,I.y),S==null||S.stroke(),v||N(!0)},D=T=>{p&&(T.preventDefault(),g(!1),T.target.releasePointerCapture(T.pointerId))},A=()=>{const T=x.current,I=T==null?void 0:T.getContext("2d");T&&I&&I.clearRect(0,0,T.width,T.height),N(!1)},M=()=>{if(x.current&&v){const T=x.current,I=0,S=T.height*.25,ve=T.width,xe=T.height*.5,G=document.createElement("canvas");G.width=ve,G.height=xe;const $=G.getContext("2d");$&&($.drawImage(T,I,S,ve,xe,0,0,G.width,G.height),r(G.toDataURL("image/png"))),i?(A(),z(!0),setTimeout(()=>z(!1),2e3)):u(!1)}};if(!c)return l.jsxs("div",{onClick:()=>u(!0),className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-blue-50 hover:border-blue-300 bg-white text-gray-500 transition-all group",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-2 group-hover:bg-blue-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-pen-nib text-xl text-gray-400 group-hover:text-blue-500"})}),l.jsx("span",{className:"font-bold text-sm group-hover:text-blue-600",children:""})]});const V=ce?"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[100dvh] h-[100dvw] rotate-90 origin-center":"fixed inset-0 w-full h-full";return l.jsx("div",{className:"fixed inset-0 z-[100] bg-gray-900 bg-opacity-95 select-none touch-none",onContextMenu:T=>T.preventDefault(),style:{WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:l.jsxs("div",{className:`${V} bg-white flex flex-col overflow-hidden shadow-2xl relative select-none`,children:[j&&l.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[60] bg-gray-800 bg-opacity-90 text-white px-8 py-6 rounded-xl shadow-2xl animate-fade-in flex flex-col items-center backdrop-blur-sm pointer-events-none",children:[l.jsx("i",{className:"fa-solid fa-check-circle text-5xl text-green-400 mb-4"}),l.jsx("span",{className:"font-bold text-xl mb-1",children:""}),l.jsx("span",{className:"text-sm text-gray-300",children:""})]}),l.jsxs("div",{className:"bg-gray-100 flex-none border-b shadow-sm z-20 select-none",children:[l.jsxs("div",{className:"relative flex justify-between items-center px-4 py-4 border-b border-gray-200 bg-white min-h-[72px]",children:[l.jsx("button",{type:"button",onClick:()=>{u(!1),t()},className:"px-4 py-2 text-sm font-bold text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 border border-gray-300 z-10 relative",children:""}),l.jsxs("h3",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 font-bold text-lg text-gray-800 hidden sm:flex items-center justify-center pointer-events-none",children:[l.jsx("i",{className:"fa-solid fa-pen-nib mr-2 text-gray-500"}),""]}),l.jsxs("div",{className:"flex items-center gap-2 z-10 relative",children:[l.jsxs("button",{type:"button",onClick:A,className:"px-3 py-2 text-sm font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg flex items-center border border-red-200 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-eraser mr-1"})," ",l.jsx("span",{className:"hidden sm:inline",children:""}),l.jsx("span",{className:"sm:hidden",children:""})]}),l.jsxs("button",{type:"button",onClick:M,disabled:!v,className:`px-4 py-2 text-sm font-bold rounded-lg flex items-center shadow-sm transition-colors ${v?"bg-blue-600 text-white active:scale-95 hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[l.jsx("i",{className:"fa-solid fa-check mr-1"})," "]})]})]}),l.jsxs("div",{className:"relative flex justify-end items-center px-4 py-3 bg-gray-50",children:[l.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-red-600 text-sm font-bold flex items-center pointer-events-none whitespace-nowrap",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),l.jsx("span",{className:"hidden sm:inline",children:""}),l.jsx("span",{className:"sm:hidden",children:""})]}),l.jsxs("label",{className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-bold cursor-pointer transition-colors shadow-sm select-none border-2 z-10 relative bg-white
                  ${L?"bg-blue-600 text-white border-blue-700 hover:bg-blue-700":"bg-green-600 text-white border-green-700 hover:bg-green-700"}
                `,children:[l.jsx("input",{type:"checkbox",className:"hidden",checked:L,onChange:T=>Z(T.target.checked)}),l.jsx("i",{className:`fa-solid ${L?"fa-pen-fancy":"fa-hand-pointer"} text-lg`}),l.jsx("span",{children:L?"":""})]})]})]}),l.jsx("div",{className:"flex-1 min-h-0 bg-gray-50 p-2 sm:p-4 pb-8 sm:pb-8 flex flex-col select-none",children:l.jsxs("div",{ref:m,className:"flex-1 min-h-0 w-full bg-white border-2 border-gray-300 shadow-inner rounded-xl overflow-hidden touch-none relative select-none",children:[l.jsxs("div",{className:"absolute inset-0 flex flex-col pointer-events-none select-none",children:[l.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-b-2 border-dashed border-gray-400 flex items-end justify-center pb-1",children:l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})}),l.jsx("div",{className:"h-[50%] w-full flex items-center justify-center bg-transparent",children:!v&&l.jsxs("div",{className:"text-center text-gray-200",children:[l.jsx("span",{className:"text-4xl sm:text-6xl font-bold mb-2 block",children:""}),l.jsx("span",{className:"text-xs sm:text-lg font-bold",children:""}),l.jsx("div",{className:"sm:hidden text-red-300 text-[10px] mt-1 font-bold",children:""})]})}),l.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-t-2 border-dashed border-gray-400 flex items-start justify-center pt-1",children:l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})})]}),P.width>0&&l.jsx("canvas",{ref:x,width:P.width,height:P.height,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},className:"absolute inset-0 z-10 cursor-crosshair block touch-none select-none",onPointerDown:Se,onPointerMove:Me,onPointerUp:D,onPointerLeave:D,onContextMenu:T=>T.preventDefault()})]})})]})})},u0=({data:r})=>{const t=i=>{if(!i)return"text-5xl";const c=i.length;return c>40?"text-[10px]":c>30?"text-base":c>22?"text-xl":c>15?"text-2xl":c>10?"text-4xl":"text-5xl"},s=(i,c,u)=>{const m=[];for(let x=0;x<u;x++){const p=c[x];m.push(l.jsxs("tr",{className:"h-20",children:[l.jsx("td",{className:"border border-black text-center text-xl font-bold",children:i+x+1}),l.jsx("td",{className:"border border-black px-4 text-lg",children:p?p.company:""}),l.jsx("td",{className:"border border-black px-2 text-center",children:p?l.jsx("img",{src:p.signatureDataUrl,alt:p.name,className:"h-16 w-auto max-w-full object-contain mx-auto"}):null})]},i+x))}return l.jsx("div",{className:"print-page p-[15mm] flex flex-col h-full justify-between",children:l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-bold text-center mb-4",children:[r.month," "]}),l.jsxs("table",{className:"w-full border-collapse border-2 border-black",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"h-10",children:[l.jsx("th",{className:"border border-black bg-gray-100 py-1 w-20 text-lg",children:""}),l.jsx("th",{className:"border border-black bg-gray-100 py-1 w-1/3 text-lg",children:""}),l.jsx("th",{className:"border border-black bg-gray-100 py-1 text-lg",children:" ()"})]})}),l.jsx("tbody",{children:m})]}),l.jsx("div",{className:"mt-2 text-right text-sm",children:i===0&&r.signatures.length<=10?` ${r.signatures.length} `:i===10?` ${r.signatures.length} `:""})]})})};return l.jsxs("div",{className:"font-serif text-black leading-tight",children:[l.jsxs("div",{className:"print-page relative p-[20mm] flex flex-col justify-between items-center",children:[l.jsx("div",{className:"w-full text-center mt-24",children:l.jsx("h1",{className:`${t(r.project)} font-bold mb-4 leading-normal whitespace-nowrap overflow-hidden text-ellipsis px-4`,children:r.project})}),l.jsx("div",{className:"text-center my-auto",children:l.jsx("h2",{className:"text-4xl font-bold border-b-4 border-double border-black pb-2 px-10 inline-block",children:""})}),l.jsxs("div",{className:"text-center mb-20",children:[l.jsxs("p",{className:"text-4xl font-bold mb-16",children:[r.month," "]}),l.jsx("div",{className:"flex items-center justify-center gap-2",children:l.jsx("span",{className:"font-bold text-xl italic",style:{fontFamily:"sans-serif"},children:r.contractor})})]})]}),l.jsx("div",{className:"print-page p-[15mm]",children:l.jsxs("div",{className:"border-2 border-black p-6 h-full",children:[l.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:""}),l.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-y-4 text-lg mb-8",children:[l.jsx("div",{className:"col-span-2 h-8"}),l.jsx("div",{className:"font-bold",children:""}),l.jsx("div",{children:new Date(r.date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}),l.jsx("div",{className:"font-bold",children:""}),l.jsx("div",{children:r.location}),l.jsx("div",{className:"font-bold",children:""}),l.jsxs("div",{children:[r.startTime,"  ",r.endTime," 15"]}),l.jsx("div",{className:"font-bold",children:""}),l.jsx("div",{children:r.instructor}),l.jsx("div",{className:"font-bold",children:""}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(1)"})," ",l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(2)"})," ",l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(3)"})," ",l.jsx("span",{children:r.topic})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(4)"})," ",l.jsx("span",{children:r.caution})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(5)"})," ",l.jsx("span",{children:"web"})]}),l.jsxs("div",{className:"flex",children:[l.jsx("span",{className:"w-8",children:"(6)"})," ",l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"mt-8",children:[l.jsx("h4",{className:"text-lg mb-4",children:""}),l.jsx("div",{className:"w-full h-[400px] border border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:r.photoUrl?l.jsx("img",{src:r.photoUrl,alt:"Evidence",className:"max-w-full max-h-full object-contain"}):l.jsx("div",{className:"text-gray-400",children:""})})]})]})}),s(0,r.signatures.slice(0,10),10),r.signatures.length>10&&s(10,r.signatures.slice(10,20),10)]})},h0=Symbol.for("constructDateFrom");function Mv(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&h0 in r?r[h0](t):r instanceof Date?new r.constructor(t):new Date(t)}function Iv(r,t){return Mv(r,r)}function Ui(r,t){return Iv(r).getDay()}function Ov(r,t){const s=Iv(r),i=s.getFullYear(),c=s.getMonth(),u=Mv(s,0);return u.setFullYear(i,c+1,0),u.setHours(0,0,0,0),u.getDate()}const Kj=["","","","","","",""],Xj=r=>{const t=r.getFullYear(),s=r.getMonth()+1,i=r.getDate();if(s===1&&i===1||s===2&&i===11||s===2&&i===23||s===4&&i===29||s===5&&i===3||s===5&&i===4||s===5&&i===5||s===8&&i===11||s===11&&i===3||s===11&&i===23)return!0;const c=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),u=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&i===c||s===9&&i===u},Ru=({data:r})=>{const t="border-2 border-black",s="border border-black",i="bg-cyan-100",c=W.useMemo(()=>{const m=new Date(r.year,r.month-1,1),x=Ov(m),p=[];for(let g=1;g<=x;g++){const v=new Date(r.year,r.month-1,g),N=Ui(v)===0,j=Ui(v)===6,z=Xj(v);let L="",Z="";N||z?(L="text-red-600",Z="bg-red-50"):j&&(L="text-blue-600",Z="bg-blue-50"),p.push({date:g,dayOfWeek:Kj[Ui(v)],colorClass:L,bgClass:Z})}return p},[r.year,r.month]),u=W.useMemo(()=>{const m=c.length,x=Math.floor(m/5),p=m%5;return Array.from({length:5}).map((g,v)=>x+(v<p?1:0))},[c.length]);return l.jsxs("div",{className:"bg-white w-full h-full flex flex-col font-serif text-black p-[10mm]",style:{width:"297mm",height:"210mm"},children:[l.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[l.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[l.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[l.jsxs("span",{className:"text-xl",children:[" ",r.year-2018,"  ",r.month," "]}),l.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),l.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),r.project]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),r.location]})]})]}),l.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[l.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",r.createdDate,""]}),l.jsxs("table",{className:`w-full ${t} text-[10px] border-collapse`,children:[l.jsxs("colgroup",{children:[l.jsx("col",{className:"w-[15%]"}),l.jsx("col",{className:"w-[25%]"}),l.jsx("col",{className:"w-[35%]"}),l.jsx("col",{className:"w-[25%]"})]}),l.jsx("thead",{children:l.jsxs("tr",{className:i,children:[l.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${s} py-0.5 font-normal`,children:""})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.trainingDate}),l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.trainingLeader})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.councilDate}),l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.councilLeader})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.patrolDate}),l.jsx("td",{className:`${s} bg-gray-100`}),l.jsx("td",{className:`${s} bg-gray-100`})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${s} bg-gray-100`}),l.jsx("td",{className:`${s} bg-gray-100`}),l.jsx("td",{className:`${s} text-center`,children:""}),l.jsx("td",{className:`${s} text-center`,children:r.author})]})]})]})]})]}),l.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:l.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[l.jsxs("colgroup",{children:[l.jsx("col",{className:"w-[35mm]"}),c.map(m=>l.jsx("col",{},m.date)),l.jsx("col",{className:"w-[10mm]"})]}),l.jsxs("thead",{children:[l.jsxs("tr",{className:"h-[8mm]",children:[l.jsx("th",{className:`${s} ${i} font-normal`,children:""}),l.jsx("th",{className:`${s} ${i}`,colSpan:c.length,children:l.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[l.jsx("span",{children:""}),l.jsx("span",{children:""}),l.jsx("span",{children:""})]})}),l.jsx("th",{className:`${s} ${i} font-normal`,rowSpan:4,children:""})]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),l.jsxs("th",{className:`${s} font-normal text-center`,colSpan:c.length,children:[r.month,""]})]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),c.map(m=>l.jsx("th",{className:`${s} font-normal text-center ${m.colorClass} ${m.bgClass}`,children:m.date},m.date))]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:" "}),c.map(m=>l.jsx("th",{className:`${s} font-normal text-center ${m.colorClass} ${m.bgClass}`,children:m.dayOfWeek},m.date))]})]}),l.jsxs("tbody",{children:[r.processRows.map(m=>l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${s} px-1 align-middle leading-none`,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:m.category}),l.jsx("span",{className:"font-bold text-[9px] truncate",children:m.name})]})}),c.map(x=>{const p=m.bars.some(g=>x.date>=g.startDay&&x.date<=g.endDay);return l.jsx("td",{className:`${s} p-0 relative ${x.bgClass}`,children:p&&l.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"})},x.date)}),l.jsx("td",{className:`${s}`})]},m.id)),Array.from({length:Math.max(0,12-r.processRows.length)}).map((m,x)=>l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${s}`}),c.map(p=>l.jsx("td",{className:`${s} ${p.bgClass}`},p.date)),l.jsx("td",{className:`${s}`})]},`fill-${x}`))]}),l.jsxs("tfoot",{children:[l.jsxs("tr",{className:"h-[12mm]",children:[l.jsx("td",{className:`${s} ${i} text-center font-normal`,children:""}),u.map((m,x)=>l.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:r.predictions[x]},x)),l.jsx("td",{className:`${s}`})]}),l.jsxs("tr",{className:"h-[18mm]",children:[l.jsxs("td",{className:`${s} ${i} text-center font-normal leading-tight`,children:["",l.jsx("br",{}),""]}),u.map((m,x)=>l.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:r.countermeasures[x]},x)),l.jsx("td",{className:`${s}`})]}),l.jsxs("tr",{className:"h-[10mm]",children:[l.jsx("td",{className:`${s} ${i} text-center font-normal leading-tight`,children:""}),u.map((m,x)=>l.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:r.inspectionItems[x]},x)),l.jsx("td",{className:`${s}`})]}),l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${s} ${i} text-center font-normal`,children:""}),c.map(m=>l.jsx("td",{className:`${s} p-0 text-center text-[8px]`,children:r.safetyDuty[m.date]},m.date)),l.jsx("td",{className:`${s}`})]}),l.jsxs("tr",{className:"h-[10mm]",children:[l.jsx("td",{className:`${s} ${i} text-center font-normal`,children:""}),l.jsx("td",{colSpan:c.length+1,className:`${s} p-1 text-[10px]`,children:r.lastMonthReflection})]})]})]})})]})},d0=({isOpen:r,message:t,onConfirm:s,onCancel:i})=>r?l.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),l.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,Zj=({isOpen:r,projectName:t,onConfirm:s,onCancel:i})=>{const[c,u]=W.useState(""),[m,x]=W.useState("");if(W.useEffect(()=>{r&&(u(""),x(""))},[r]),!r)return null;const p=()=>{c==="4043"?s():x("")};return l.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6 animate-fade-in border-l-8 border-red-600",children:[l.jsxs("h3",{className:"text-xl font-bold text-red-600 mb-4 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),""]}),l.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["",t,""]}),l.jsxs("div",{className:"bg-red-50 p-3 rounded mb-4 text-sm text-red-800 leading-relaxed",children:[l.jsx("strong",{children:""}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{className:"font-bold underline text-red-600 text-base",children:""}),l.jsx("br",{}),""]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" (4043)"}),l.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 outline-none text-lg tracking-widest",placeholder:"PASS",value:c,onChange:g=>u(g.target.value)}),m&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 font-bold",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),m]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),l.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold shadow-md",children:""})]})]})})},Jj=({title:r,items:t,onUpdate:s,onDeleteRequest:i,onBack:c})=>{const[u,m]=W.useState(""),x=t||[],p=()=>{u.trim()&&(s([...x,u.trim()]),m(""))};return l.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[l.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:l.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),l.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[r," ",l.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[x.length,""]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsxs("ul",{className:"space-y-2",children:[x.map((g,v)=>l.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[l.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:g}),l.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),i(v,g)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},v)),x.length===0&&l.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),l.jsx("div",{className:"p-4 border-t bg-gray-50",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:u,onChange:g=>m(g.target.value),onKeyDown:g=>g.key==="Enter"&&p()}),l.jsxs("button",{onClick:p,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[l.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},f0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},Wj={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["roles","topics","jobTypes","goals","predictions","countermeasures"]},eT=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[i,c]=W.useState(1),[u,m]=W.useState(r||M1),[x,p]=W.useState(t||null),[g,v]=W.useState(Mt),[N,j]=W.useState(!1),[z,L]=W.useState(!1),[Z,P]=W.useState("idle"),[ge,ce]=W.useState(!1),[te,he]=W.useState(null),[Se,Me]=W.useState(1),[D,A]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[M,V]=W.useState(!1),[T,I]=W.useState([]),[S,ve]=W.useState(null),[xe,G]=W.useState("BASIC"),[$,de]=W.useState(null),[_e,Ue]=W.useState(null);W.useEffect(()=>{(async()=>{try{const we=await Ku();v(we)}catch(we){console.error("",we)}})()},[]),W.useEffect(()=>{if(!z)return;const Q=()=>{const fn=window.innerWidth-40;Me(fn<794?fn/794:1)};return window.addEventListener("resize",Q),Q(),()=>window.removeEventListener("resize",Q)},[z]),W.useEffect(()=>{u.contractor!==""&&C("contractor","")},[u.contractor]);const C=(Q,we)=>{m(it=>({...it,[Q]:we})),P("idle"),ce(!0)},Y=()=>c(Q=>Math.min(Q+1,3)),ue=async Q=>{if(Q.target.files&&Q.target.files[0]){const we=await Qj(Q.target.files[0]);C("photoUrl",we)}},pe=async()=>{P("saving");try{const Q=await Wa(x,"SAFETY_TRAINING",u);p(Q),P("saved"),ce(!1),setTimeout(()=>P("idle"),2e3)}catch(Q){console.error(Q),alert(""),P("idle")}},oe=(Q,we)=>{const it={id:Date.now().toString(),company:Q,name:"Signed",signatureDataUrl:we};m(fn=>({...fn,signatures:[...fn.signatures,it]})),P("idle"),ce(!0)},Te=async()=>{P("saving");try{const Q=await Wa(x,"SAFETY_TRAINING",u);p(Q),P("saved"),ce(!1),setTimeout(()=>P("idle"),2e3);const we=await Dv(u.project);if(we.length===0){alert(`${u.project}

`);return}I(we),V(!0)}catch{alert(""),P("idle")}},ke=Q=>{ve(Q.data),V(!1),L(!0)},tt=()=>{const Q=document.title;document.title=`_${u.project}_${u.month}`,window.print(),document.title=Q},Ce=()=>{ge?A({isOpen:!0,message:`
`,onConfirm:()=>{A(Q=>({...Q,isOpen:!1})),s()}}):s()},Tt=()=>l.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[l.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),l.jsxs("button",{onClick:()=>{j(!1),de(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[l.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),$?l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(Jj,{title:f0[$],items:g[$],onBack:()=>de(null),onUpdate:async Q=>{const we={...g,[$]:Q};v(we),await kn(we)},onDeleteRequest:(Q,we)=>{$==="projects"?Ue({index:Q,name:we}):A({isOpen:!0,message:`${we}`,onConfirm:async()=>{const it=[...g[$]];it.splice(Q,1);const fn={...g,[$]:it};v(fn),await kn(fn),A(Jt=>({...Jt,isOpen:!1}))}})}})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-4 mb-6 shrink-0",children:[l.jsxs("button",{onClick:()=>G("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${xe==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),l.jsxs("button",{onClick:()=>G("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${xe==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-list-check mr-2"}),""]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:Wj[xe].map(Q=>{const we=g[Q]||[];return l.jsxs("button",{onClick:()=>de(Q),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:f0[Q]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[we.length," "]})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:l.jsx("i",{className:"fa-solid fa-chevron-right"})})]},Q)})})]})]}),Ee=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 1: "}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:u.project,onChange:Q=>C("project",Q.target.value),children:g.projects.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:u.month,onChange:Q=>C("month",parseInt(Q.target.value)),children:Array.from({length:12},(Q,we)=>we+1).map(Q=>l.jsxs("option",{value:Q,children:[Q,""]},Q))})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("input",{type:"text",className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 text-black outline-none cursor-not-allowed font-bold",value:"",readOnly:!0})]})]}),J=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 2: "}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("input",{type:"date",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.date,onChange:Q=>C("date",Q.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.location,onChange:Q=>C("location",Q.target.value),children:g.locations.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("input",{type:"time",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.startTime,onChange:Q=>C("startTime",Q.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("input",{type:"time",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.endTime,onChange:Q=>C("endTime",Q.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:u.instructor,onChange:Q=>C("instructor",Q.target.value),children:g.supervisors.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]}),l.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg space-y-4",children:[l.jsx("h3",{className:"font-bold text-gray-700 mb-2",children:""}),l.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 space-y-2 py-1",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"font-bold w-8",children:"(1)"}),l.jsx("span",{children:" ()"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"font-bold w-8",children:"(2)"}),l.jsx("span",{children:" ()"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(3)"}),l.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm appearance-none",value:u.topic,onChange:Q=>C("topic",Q.target.value),children:g.topics.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(4)"}),l.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm appearance-none",value:u.caution,onChange:Q=>C("caution",Q.target.value),children:g.topics.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]})]}),l.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 mt-2 space-y-2 py-1",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"font-bold w-8",children:"(5)"}),l.jsx("span",{children:"web ()"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"font-bold w-8",children:"(6)"}),l.jsx("span",{children:" ()"})]})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold flex justify-between text-gray-700",children:l.jsxs("span",{children:[" ()",l.jsx("span",{className:"text-red-500 text-sm ml-1 font-bold",children:""})]})}),l.jsx("input",{type:"file",accept:"image/*",className:"w-full mt-2 text-sm text-gray-500",onChange:ue}),u.photoUrl&&l.jsx("div",{className:"mt-3",children:l.jsx("img",{src:u.photoUrl,alt:"preview",className:"h-40 w-full object-contain border bg-gray-50 rounded"})})]})]}),[Ae,Ve]=W.useState("");W.useEffect(()=>{g.contractors.length>0&&!Ae&&Ve(g.contractors[0])},[g.contractors,Ae]);const[R,ne]=W.useState(0),He=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 3: "}),l.jsxs("div",{className:"bg-white p-6 shadow rounded-lg border border-gray-200",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:""}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-50 text-lg text-black outline-none appearance-none",value:Ae,onChange:Q=>Ve(Q.target.value),children:g.contractors.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]}),l.jsxs("div",{className:"mb-2",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2 text-center",children:" ()"}),l.jsx("div",{className:"w-full",children:l.jsx(Nm,{onSave:Q=>{oe(Ae,Q)},onClear:()=>{},lineWidth:6,keepOpenOnSave:!0},R)})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("h3",{className:"font-bold text-gray-700 mb-2",children:[" (",u.signatures.length,")"]}),l.jsxs("div",{className:"bg-white border rounded divide-y max-h-60 overflow-y-auto",children:[u.signatures.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-400",children:""}),u.signatures.map((Q,we)=>l.jsxs("div",{className:"p-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l.jsx("span",{className:"w-6 h-6 shrink-0 rounded-full bg-gray-200 text-xs flex items-center justify-center text-gray-700",children:we+1}),l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-bold text-gray-700 truncate flex-1",children:Q.company}),l.jsx("div",{className:"h-10 border border-gray-200 bg-gray-50 rounded cursor-pointer hover:border-blue-400 transition-colors flex items-center justify-center px-2 shrink-0",onClick:()=>he(Q.signatureDataUrl),title:"",children:l.jsx("img",{src:Q.signatureDataUrl,alt:"sig",className:"h-full object-contain"})})]})]}),l.jsx("button",{onClick:()=>{A({isOpen:!0,message:`${we+1}`,onConfirm:()=>{m(it=>({...it,signatures:it.signatures.filter(fn=>fn.id!==Q.id)})),A(it=>({...it,isOpen:!1})),ce(!0)}})},className:"ml-3 text-red-400 hover:text-red-600 p-2 shrink-0",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},Q.id))]})]})]}),se=()=>l.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[l.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500",children:""}),l.jsxs("button",{onClick:tt,className:"px-6 py-2 bg-green-600 rounded font-bold hover:bg-green-500 shadow-md flex items-center",children:[l.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[l.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${Se})`,transformOrigin:"top center"},children:l.jsx(u0,{data:u})}),S&&l.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${Se*.7})`,transformOrigin:"top center"},children:l.jsx(Ru,{data:S})})]})]}),me=()=>M?l.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",u.project,""]}),l.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:T.map(Q=>{const we=Q.data;return l.jsxs("button",{onClick:()=>ke(Q),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-bold text-blue-800",children:[we.month," "]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(Q.lastModified).toLocaleString("ja-JP")]})]}),l.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},Q.id)})}),l.jsx("button",{onClick:()=>V(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null;return N?l.jsxs(l.Fragment,{children:[Tt(),l.jsx(d0,{isOpen:D.isOpen,message:D.message,onConfirm:D.onConfirm,onCancel:()=>A(Q=>({...Q,isOpen:!1}))}),_e&&l.jsx(Zj,{isOpen:!!_e,projectName:_e.name,onCancel:()=>Ue(null),onConfirm:async()=>{const Q=[...g.projects];Q.splice(_e.index,1),await _o(_e.name);const we={...g,projects:Q};v(we),await kn(we),Ue(null)}})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:Ce,className:"text-white hover:text-gray-300",children:l.jsx("i",{className:"fa-solid fa-house"})}),l.jsxs("h1",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-helmet-safety mr-2"}),""]})]}),l.jsxs("button",{onClick:()=>j(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),l.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[l.jsx("span",{className:i>=1?"text-blue-600":"",children:"STEP 1"}),l.jsx("span",{className:i>=2?"text-blue-600":"",children:"STEP 2"}),l.jsx("span",{className:i>=3?"text-blue-600":"",children:"STEP 3"})]}),l.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"bg-blue-600 h-full transition-all duration-300",style:{width:`${i*33.3}%`}})})]}),l.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg min-h-[60vh] max-w-3xl",children:[i===1&&Ee(),i===2&&J(),i===3&&He()]}),l.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>c(Q=>Math.max(1,Q-1)),disabled:i===1,className:`px-4 py-3 rounded-lg font-bold ${i===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),l.jsxs("button",{onClick:pe,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center",children:[l.jsx("i",{className:`fa-solid ${Z==="saved"?"fa-check":"fa-save"} mr-2`}),Z==="saved"?"":""]})]}),i<3?l.jsxs("button",{onClick:Y,className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-bold shadow hover:bg-blue-700 flex items-center",children:[" ",l.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):l.jsxs("button",{onClick:Te,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),te&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>he(null),children:[l.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:l.jsx("img",{src:te,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),l.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),z&&se(),me(),l.jsx(d0,{isOpen:D.isOpen,message:D.message,onConfirm:D.onConfirm,onCancel:()=>A({...D,isOpen:!1})}),l.jsxs("div",{className:"hidden print:block",children:[l.jsx(u0,{data:u}),S&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),l.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:l.jsx(Ru,{data:S})})]})]})]})},m0=({data:r})=>{var g,v,N,j,z,L,Z,P,ge,ce,te,he,Se,Me,D,A,M,V,T,I,S,ve,xe,G;const t="border border-black",s="bg-green-100 text-center font-bold py-1",i=$=>{const de=new Date($);return`${de.getFullYear()}/${de.getMonth()+1}/${de.getDate()}`},c=Math.max(7,r.subcontractorAttendees.length),u=Array.from({length:c-r.subcontractorAttendees.length}),m=$=>{const de=$.length;return de>45?"text-lg":de>35?"text-xl":de>25?"text-2xl":de>15?"text-3xl":"text-4xl"},x=$=>$?$===""?"":$===""?"":$:"",p=$=>{const de=x($);if(!de)return"";const _e=de.length;return _e>10?"text-xs tracking-tighter":_e>8?"text-sm":""};return l.jsxs("div",{className:"font-serif text-black leading-tight bg-white",children:[l.jsxs("div",{className:"print-page relative p-[25mm] flex flex-col justify-between items-center text-center page-break-after-always",children:[l.jsxs("div",{className:"mt-16 text-3xl font-normal tracking-widest",children:["",r.count,""]}),l.jsx("div",{className:"mt-20 px-4 w-full flex items-center justify-center min-h-[4rem]",children:l.jsx("h1",{className:`${m(r.project)} font-normal mb-4 leading-normal whitespace-nowrap`,children:r.project})}),l.jsx("div",{className:"my-auto",children:l.jsx("h2",{className:"text-5xl font-normal tracking-[0.2em] leading-loose",children:"      "})}),l.jsxs("div",{className:"mb-24 w-full",children:[l.jsxs("div",{className:"text-2xl mb-16",children:[" ",i(r.date)]}),l.jsx("div",{className:"flex items-center justify-center gap-3",children:l.jsx("span",{className:"font-bold text-2xl",children:r.contractor})})]})]}),l.jsxs("div",{className:"print-page p-[30mm] flex flex-col items-center page-break-after-always",children:[l.jsx("div",{className:"mt-20 mb-24 border-b-2 border-black px-12 pb-2",children:l.jsx("h2",{className:"text-4xl font-normal tracking-[0.2em] ml-2",children:""})}),l.jsxs("div",{className:"w-full max-w-lg space-y-12 text-2xl",children:[l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"1"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"2"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"3"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"4"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"5"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"6"}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"print-page p-[20mm]",children:[l.jsxs("div",{className:"flex justify-between items-end mb-4 px-2",children:[l.jsxs("div",{className:"text-xl font-bold",children:[" ",r.count," "]}),l.jsx("h3",{className:"text-2xl font-bold text-center flex-1",children:""}),l.jsx("div",{className:"w-16"})," "]}),l.jsx("table",{className:`w-full border-collapse mb-6 ${t}`,children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:`${t} p-2 w-32 text-center`,children:"   "}),l.jsx("td",{className:`${t} p-2`,children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${t} p-2 text-center`,children:"   "}),l.jsx("td",{className:`${t} p-2`,children:i(r.date)})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${t} p-2 text-center`,children:""}),l.jsx("td",{className:`${t} p-2`,children:r.location})]})]})}),l.jsx("div",{className:"mb-6",children:l.jsxs("table",{className:`w-full border-collapse ${t}`,children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{className:`${t} ${s}`,colSpan:4,children:""})}),l.jsxs("tr",{children:[l.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),l.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),l.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),l.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""})]})]}),l.jsxs("tbody",{children:[l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle ${p((g=r.gcAttendees[0])==null?void 0:g.role)}`,children:x((v=r.gcAttendees[0])==null?void 0:v.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(N=r.gcAttendees[0])==null?void 0:N.name}),l.jsx("td",{className:`${t} px-2 align-middle ${p((j=r.gcAttendees[1])==null?void 0:j.role)}`,children:x((z=r.gcAttendees[1])==null?void 0:z.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(L=r.gcAttendees[1])==null?void 0:L.name})]}),l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle ${p((Z=r.gcAttendees[2])==null?void 0:Z.role)}`,children:x((P=r.gcAttendees[2])==null?void 0:P.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(ge=r.gcAttendees[2])==null?void 0:ge.name}),l.jsx("td",{className:`${t} px-2 align-middle ${p((ce=r.gcAttendees[3])==null?void 0:ce.role)}`,children:x((te=r.gcAttendees[3])==null?void 0:te.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(he=r.gcAttendees[3])==null?void 0:he.name})]}),l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle ${p((Se=r.gcAttendees[4])==null?void 0:Se.role)}`,children:x((Me=r.gcAttendees[4])==null?void 0:Me.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(D=r.gcAttendees[4])==null?void 0:D.name}),l.jsx("td",{className:`${t} px-2 align-middle ${p((A=r.gcAttendees[5])==null?void 0:A.role)}`,children:x((M=r.gcAttendees[5])==null?void 0:M.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(V=r.gcAttendees[5])==null?void 0:V.name})]}),l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle ${p((T=r.gcAttendees[6])==null?void 0:T.role)}`,children:x((I=r.gcAttendees[6])==null?void 0:I.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(S=r.gcAttendees[6])==null?void 0:S.name}),l.jsx("td",{className:`${t} px-2 align-middle ${p((ve=r.gcAttendees[7])==null?void 0:ve.role)}`,children:x((xe=r.gcAttendees[7])==null?void 0:xe.role)}),l.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(G=r.gcAttendees[7])==null?void 0:G.name})]})]})]})}),l.jsx("div",{children:l.jsxs("table",{className:`w-full border-collapse ${t}`,children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{className:`${t} ${s}`,colSpan:3,children:"              "})}),l.jsxs("tr",{children:[l.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""}),l.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:"     "}),l.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""})]})]}),l.jsxs("tbody",{children:[r.subcontractorAttendees.map($=>l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t} px-2 align-middle`,children:$.company}),l.jsx("td",{className:`${t} px-2 align-middle`,children:$.role}),l.jsx("td",{className:`${t} px-2 align-middle text-center`,children:$.signatureDataUrl?l.jsx("img",{src:$.signatureDataUrl,alt:$.name,className:"h-10 mx-auto object-contain"}):$.name})]},$.id)),u.map(($,de)=>l.jsxs("tr",{className:"h-12",children:[l.jsx("td",{className:`${t}`}),l.jsx("td",{className:`${t}`}),l.jsx("td",{className:`${t}`})]},`blank-${de}`))]})]})})]})]})},g0=({isOpen:r,message:t,onConfirm:s,onCancel:i})=>r?l.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),l.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,tT=({isOpen:r,projectName:t,onConfirm:s,onCancel:i})=>{const[c,u]=W.useState(""),[m,x]=W.useState("");if(W.useEffect(()=>{r&&(u(""),x(""))},[r]),!r)return null;const p=()=>{c==="4043"?s():x("")};return l.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6 animate-fade-in border-l-8 border-red-600",children:[l.jsxs("h3",{className:"text-xl font-bold text-red-600 mb-4 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),""]}),l.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["",t,""]}),l.jsxs("div",{className:"bg-red-50 p-3 rounded mb-4 text-sm text-red-800 leading-relaxed",children:[l.jsx("strong",{children:""}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{className:"font-bold underline text-red-600 text-base",children:""}),l.jsx("br",{}),""]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" (4043)"}),l.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 outline-none text-lg tracking-widest",placeholder:"PASS",value:c,onChange:g=>u(g.target.value)}),m&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 font-bold",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),m]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),l.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold shadow-md",children:""})]})]})})},nT=({title:r,items:t,onUpdate:s,onDeleteRequest:i,onBack:c})=>{const[u,m]=W.useState(""),x=t||[],p=()=>{u.trim()&&(s([...x,u.trim()]),m(""))};return l.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[l.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:l.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),l.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[r," ",l.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[x.length,""]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsxs("ul",{className:"space-y-2",children:[x.map((g,v)=>l.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[l.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:g}),l.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),i(v,g)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},v)),x.length===0&&l.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),l.jsx("div",{className:"p-4 border-t bg-gray-50",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:u,onChange:g=>m(g.target.value),onKeyDown:g=>g.key==="Enter"&&p()}),l.jsxs("button",{onClick:p,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[l.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},p0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},sT={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["roles","topics","jobTypes","goals","predictions","countermeasures"]},y0=["","","",""],aT=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[i,c]=W.useState(1),[u,m]=W.useState(r||I1),[x,p]=W.useState(t||null),[g,v]=W.useState(Mt),[N,j]=W.useState(!1),[z,L]=W.useState(!1),[Z,P]=W.useState("idle"),[ge,ce]=W.useState(1),[te,he]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[Se,Me]=W.useState(!1),[D,A]=W.useState(!1),[M,V]=W.useState([]),[T,I]=W.useState(null),[S,ve]=W.useState("BASIC"),[xe,G]=W.useState(null),[$,de]=W.useState(null);W.useEffect(()=>{(async()=>{try{const me=await Ku();v(me),me.contractors.length>0&&Ee(me.contractors[0]),me.roles.length>0&&Ce(me.roles[0])}catch(me){console.error("",me)}})()},[]),W.useEffect(()=>{if(!z)return;const se=()=>{const we=window.innerWidth-40;ce(we<794?we/794:1)};return window.addEventListener("resize",se),se(),()=>window.removeEventListener("resize",se)},[z]),W.useEffect(()=>{u.contractor!==""&&_e({contractor:""})},[u.contractor]),W.useEffect(()=>{let se=!1;const me=[...u.gcAttendees];for(;me.length<8;)me.push({role:"",name:""}),se=!0;y0.forEach((Q,we)=>{me[we].role!==Q&&(me[we]={...me[we],role:Q},se=!0)}),se&&_e({gcAttendees:me})},[u.gcAttendees]);const _e=se=>{m(me=>({...me,...se})),P("idle"),Me(!0)},Ue=async()=>{P("saving");try{const se=await Wa(x,"DISASTER_COUNCIL",u);p(se),P("saved"),Me(!1),setTimeout(()=>P("idle"),2e3)}catch(se){console.error(se),alert(""),P("idle")}},C=async()=>{P("saving");try{const se=await Wa(x,"DISASTER_COUNCIL",u);p(se),P("saved"),Me(!1),setTimeout(()=>P("idle"),2e3);const me=await Dv(u.project);if(me.length===0){alert(`${u.project}

`);return}V(me),A(!0)}catch{alert(""),P("idle")}},Y=se=>{I(se.data),A(!1),L(!0)},ue=()=>{const se=document.title;document.title=`_${u.project}_${u.count}`,window.print(),document.title=se},pe=()=>{Se?he({isOpen:!0,message:`
`,onConfirm:()=>{he(se=>({...se,isOpen:!1})),s()}}):s()},oe=()=>l.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[l.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),l.jsxs("button",{onClick:()=>{j(!1),G(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[l.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),xe?l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(nT,{title:p0[xe],items:g[xe],onBack:()=>G(null),onUpdate:async se=>{const me={...g,[xe]:se};v(me),await kn(me)},onDeleteRequest:(se,me)=>{xe==="projects"?de({index:se,name:me}):he({isOpen:!0,message:`${me}`,onConfirm:async()=>{const Q=[...g[xe]];Q.splice(se,1);const we={...g,[xe]:Q};v(we),await kn(we),he(it=>({...it,isOpen:!1}))}})}})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-4 mb-6 shrink-0",children:[l.jsxs("button",{onClick:()=>ve("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${S==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),l.jsxs("button",{onClick:()=>ve("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${S==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-list-check mr-2"}),""]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:sT[S].map(se=>{const me=g[se]||[];return l.jsxs("button",{onClick:()=>G(se),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:p0[se]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[me.length," "]})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:l.jsx("i",{className:"fa-solid fa-chevron-right"})})]},se)})})]})]}),Te=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 1: "}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:u.project,onChange:se=>_e({project:se.target.value}),children:g.projects.map(se=>l.jsx("option",{value:se,children:se},se))})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"mr-2",children:""}),l.jsx("input",{type:"number",className:"w-20 p-3 border border-gray-300 rounded-lg text-center",value:u.count,onChange:se=>_e({count:parseInt(se.target.value)})}),l.jsx("span",{className:"ml-2",children:""})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("input",{type:"date",className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:u.date,onChange:se=>_e({date:se.target.value})})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:u.location,onChange:se=>_e({location:se.target.value}),children:g.locations.map(se=>l.jsx("option",{value:se,children:se},se))})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("input",{type:"time",className:"w-full p-3 border border-gray-300 rounded-lg",value:u.startTime,onChange:se=>_e({startTime:se.target.value})})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("input",{type:"time",className:"w-full p-3 border border-gray-300 rounded-lg",value:u.endTime,onChange:se=>_e({endTime:se.target.value})})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("input",{type:"text",className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 text-black outline-none cursor-not-allowed font-bold",value:"",readOnly:!0})]})]}),ke=(se,me,Q)=>{const we=[...u.gcAttendees];we[se]||(we[se]={role:"",name:""}),we[se]={...we[se],[me]:Q},_e({gcAttendees:we})},[tt,Ce]=W.useState(""),[Tt,Ee]=W.useState(""),[J,Ae]=W.useState(0);W.useEffect(()=>{g.contractors.length>0&&!Tt&&Ee(g.contractors[0])},[g.contractors,Tt]),W.useEffect(()=>{g.roles.length>0&&!tt&&Ce(g.roles[0])},[g.roles,tt]);const Ve=se=>{if(!Tt||!tt)return;const me={id:Date.now().toString(),company:Tt,role:tt,name:"",signatureDataUrl:se};_e({subcontractorAttendees:[...u.subcontractorAttendees,me]}),Ae(Q=>Q+1)},R=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 2: "}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsx("h3",{className:"font-bold text-gray-700 mb-3",children:" "}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:Array.from({length:8}).map((se,me)=>{var Q,we;return l.jsxs("div",{className:"flex items-center gap-2",children:[me<4?l.jsx("span",{className:"w-40 h-10 flex items-center justify-center text-xs font-bold bg-gray-50 px-2 border rounded text-gray-700",children:y0[me]}):l.jsxs("select",{className:"w-40 h-10 text-xs font-bold bg-white px-2 border rounded text-center outline-none appearance-none",value:((Q=u.gcAttendees[me])==null?void 0:Q.role)||"",onChange:it=>ke(me,"role",it.target.value),children:[l.jsx("option",{value:"",children:"()"}),g.roles.map(it=>l.jsx("option",{value:it,children:it},it))]}),l.jsxs("select",{className:"flex-1 h-10 p-2 border rounded text-sm bg-white text-black outline-none appearance-none",value:((we=u.gcAttendees[me])==null?void 0:we.name)||"",onChange:it=>ke(me,"name",it.target.value),children:[l.jsx("option",{value:"",children:""}),g.supervisors.map(it=>l.jsx("option",{value:it,children:it},it))]})]},me)})})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[l.jsx("h3",{className:"font-bold text-gray-700 mb-3 text-center",children:" "}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500",children:""}),l.jsx("select",{className:"w-full p-2 border rounded bg-white text-black outline-none appearance-none",value:Tt,onChange:se=>Ee(se.target.value),children:g.contractors.map(se=>l.jsx("option",{value:se,children:se},se))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-gray-500",children:""}),l.jsx("select",{className:"w-full p-2 border rounded bg-white text-black outline-none appearance-none",value:tt,onChange:se=>Ce(se.target.value),children:g.roles.map(se=>l.jsx("option",{value:se,children:se},se))})]})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:""}),l.jsx("div",{className:"border border-gray-300 rounded",children:l.jsx(Nm,{onSave:se=>Ve(se),onClear:()=>{},lineWidth:4,keepOpenOnSave:!0},J)})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-bold text-gray-700 mb-2",children:[" (",u.subcontractorAttendees.length,")"]}),l.jsxs("div",{className:"space-y-2",children:[u.subcontractorAttendees.map(se=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border rounded shadow-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm",children:se.company}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:se.role}),se.signatureDataUrl&&l.jsx("img",{src:se.signatureDataUrl,alt:"sig",className:"h-6 object-contain border border-gray-200 bg-white"})]})]}),l.jsx("button",{onClick:()=>_e({subcontractorAttendees:u.subcontractorAttendees.filter(me=>me.id!==se.id)}),className:"text-red-400 hover:text-red-600",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},se.id)),u.subcontractorAttendees.length===0&&l.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:""})]})]})]}),ne=()=>D?l.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",u.project,""]}),l.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:M.map(se=>{const me=se.data;return l.jsxs("button",{onClick:()=>Y(se),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-bold text-blue-800",children:[me.month," "]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(se.lastModified).toLocaleString("ja-JP")]})]}),l.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},se.id)})}),l.jsx("button",{onClick:()=>A(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null,He=()=>z?l.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[l.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500",children:""}),l.jsxs("button",{onClick:ue,className:"px-6 py-2 bg-green-600 rounded font-bold hover:bg-green-500 shadow-md flex items-center",children:[l.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[l.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${ge})`,transformOrigin:"top center"},children:l.jsx(m0,{data:u})}),T&&l.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${ge*.7})`,transformOrigin:"top center"},children:l.jsx(Ru,{data:T})})]})]}):null;return N?l.jsxs(l.Fragment,{children:[oe(),l.jsx(g0,{isOpen:te.isOpen,message:te.message,onConfirm:te.onConfirm,onCancel:()=>he(se=>({...se,isOpen:!1}))}),$&&l.jsx(tT,{isOpen:!!$,projectName:$.name,onCancel:()=>de(null),onConfirm:async()=>{const se=[...g.projects];se.splice($.index,1),await _o($.name);const me={...g,projects:se};v(me),await kn(me),de(null)}})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:pe,className:"text-white hover:text-gray-300",children:l.jsx("i",{className:"fa-solid fa-house"})}),l.jsxs("h1",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-people-group mr-2"}),""]})]}),l.jsxs("button",{onClick:()=>j(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),l.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[l.jsx("span",{className:i>=1?"text-green-600":"",children:"STEP 1"}),l.jsx("span",{className:i>=2?"text-green-600":"",children:"STEP 2"})]}),l.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"bg-green-600 h-full transition-all duration-300",style:{width:`${i*50}%`}})})]}),l.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg min-h-[60vh] max-w-3xl",children:[i===1&&Te(),i===2&&R()]}),l.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>c(se=>Math.max(1,se-1)),disabled:i===1,className:`px-4 py-3 rounded-lg font-bold ${i===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),l.jsxs("button",{onClick:Ue,className:"px-4 py-3 rounded-lg font-bold border border-green-200 text-green-600 bg-green-50 hover:bg-green-100 flex items-center",children:[l.jsx("i",{className:`fa-solid ${Z==="saved"?"fa-check":"fa-save"} mr-2`}),Z==="saved"?"":""]})]}),i<2?l.jsxs("button",{onClick:()=>c(2),className:"px-8 py-3 bg-green-600 text-white rounded-lg font-bold shadow hover:bg-green-700 flex items-center",children:[" ",l.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):l.jsxs("button",{onClick:C,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),z&&He(),ne(),l.jsx(g0,{isOpen:te.isOpen,message:te.message,onConfirm:te.onConfirm,onCancel:()=>he({...te,isOpen:!1})}),l.jsxs("div",{className:"hidden print:block",children:[l.jsx(m0,{data:u}),T&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),l.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:l.jsx(Ru,{data:T})})]})]})]})},x0=({isOpen:r,message:t,onConfirm:s,onCancel:i})=>r?l.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),l.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,b0=({isOpen:r,projectName:t,onConfirm:s,onCancel:i})=>{const[c,u]=W.useState(""),[m,x]=W.useState("");if(W.useEffect(()=>{r&&(u(""),x(""))},[r]),!r)return null;const p=()=>{c==="4043"?s():x("")};return l.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6 animate-fade-in border-l-8 border-red-600",children:[l.jsxs("h3",{className:"text-xl font-bold text-red-600 mb-4 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),""]}),l.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["",t,""]}),l.jsxs("div",{className:"bg-red-50 p-3 rounded mb-4 text-sm text-red-800 leading-relaxed",children:[l.jsx("strong",{children:""}),l.jsx("br",{}),"",l.jsx("br",{}),l.jsx("span",{className:"font-bold underline text-red-600 text-base",children:""}),l.jsx("br",{}),""]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" (4043)"}),l.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 outline-none text-lg tracking-widest",placeholder:"PASS",value:c,onChange:g=>u(g.target.value)}),m&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 font-bold",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),m]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),l.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold shadow-md",children:""})]})]})})},rT=({title:r,items:t,onUpdate:s,onDeleteRequest:i,onBack:c})=>{const[u,m]=W.useState(""),x=()=>{u.trim()&&(s([...t,u.trim()]),m(""))};return l.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[l.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:l.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),l.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[r," ",l.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[t.length,""]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsxs("ul",{className:"space-y-2",children:[t.map((p,g)=>l.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[l.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:p}),l.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),i(g,p)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},g)),t.length===0&&l.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),l.jsx("div",{className:"p-4 border-t bg-gray-50",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:u,onChange:p=>m(p.target.value),onKeyDown:p=>p.key==="Enter"&&x()}),l.jsxs("button",{onClick:x,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[l.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},v0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},iT={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["roles","topics","jobTypes","goals","predictions","countermeasures"]},lT=["","","","","","",""],oT=r=>{const t=r.getFullYear(),s=r.getMonth()+1,i=r.getDate();if(s===1&&i===1||s===2&&i===11||s===2&&i===23||s===4&&i===29||s===5&&i===3||s===5&&i===4||s===5&&i===5||s===8&&i===11||s===11&&i===3||s===11&&i===23)return!0;const c=(x,p,g)=>{const v=new Date(x,p-1,1).getDay();return 1+(v===1?0:(8-v)%7)+(g-1)*7};if(s===1&&i===c(t,1,2)||s===7&&i===c(t,7,3)||s===9&&i===c(t,9,3)||s===10&&i===c(t,10,2))return!0;const u=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),m=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&i===u||s===9&&i===m},cT=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[i,c]=W.useState(r||O1),[u,m]=W.useState(t||null),[x,p]=W.useState(Mt),[g,v]=W.useState(!1),[N,j]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[z,L]=W.useState(!1),[Z,P]=W.useState(null),[ge,ce]=W.useState(null),[te,he]=W.useState("idle"),[Se,Me]=W.useState(1),[D,A]=W.useState(!1),[M,V]=W.useState("BASIC"),[T,I]=W.useState(null),[S,ve]=W.useState(null);W.useEffect(()=>{(async()=>{try{const J=await Ku();p(J)}catch(J){console.error("",J)}})()},[]),W.useEffect(()=>{const Ee=()=>{let He=(window.innerWidth-40)/1122.6599999999999;He>1.2&&(He=1.2),Me(He)};return window.addEventListener("resize",Ee),Ee(),()=>window.removeEventListener("resize",Ee)},[]);const xe=W.useMemo(()=>{const Ee=new Date(i.year,i.month-1,1),J=Ov(Ee),Ae=[];for(let Ve=1;Ve<=J;Ve++){const R=new Date(i.year,i.month-1,Ve),ne=Ui(R)===0,He=Ui(R)===6,se=oT(R);let me="",Q="";ne||se?(me="text-red-600",Q="bg-red-50"):He&&(me="text-blue-600",Q="bg-blue-50"),Ae.push({date:Ve,dayOfWeek:lT[Ui(R)],colorClass:me,bgClass:Q})}return Ae},[i.year,i.month]),G=W.useMemo(()=>{const Ee=xe.length,J=Math.floor(Ee/5),Ae=Ee%5;return Array.from({length:5}).map((Ve,R)=>J+(R<Ae?1:0))},[xe.length]),$=Ee=>{c(J=>({...J,...Ee})),he("idle"),A(!0)},de=async()=>{he("saving");try{const Ee=await Wa(u,"SAFETY_PLAN",i);m(Ee),he("saved"),A(!1),setTimeout(()=>he("idle"),2e3)}catch(Ee){console.error(Ee),alert(""),he("idle")}},_e=async()=>{he("saving");try{const Ee=await Wa(u,"SAFETY_PLAN",i);m(Ee),he("saved"),A(!1),setTimeout(()=>he("idle"),2e3),setTimeout(()=>window.print(),100)}catch{alert(""),he("idle")}},Ue=()=>{D?j({isOpen:!0,message:`
`,onConfirm:()=>{j(Ee=>({...Ee,isOpen:!1})),s()}}):s()},C=(Ee,J)=>{if(Z===null)P(Ee),ce(J);else if(Z!==Ee)P(Ee),ce(J);else{if(ge!==null){const Ae=Math.min(ge,J),Ve=Math.max(ge,J),R=i.processRows.map(ne=>{if(ne.id===Ee){const He=ne.bars.filter(se=>se.endDay<Ae||se.startDay>Ve);return{...ne,bars:[...He,{startDay:Ae,endDay:Ve}]}}return ne});$({processRows:R})}P(null),ce(null)}},Y=(Ee,J)=>{const Ae=i.processRows.find(Ve=>Ve.id===Ee);return Ae?Ae.bars.some(Ve=>J>=Ve.startDay&&J<=Ve.endDay):!1},ue=(Ee,J)=>Z!==Ee||ge===null?!1:J===ge,pe="border-2 border-black",oe="border border-black",Te="bg-cyan-100",ke="w-full h-full bg-transparent outline-none text-center font-serif",tt="w-full h-full bg-transparent outline-none text-center appearance-none font-serif text-center-last",Ce=()=>l.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[l.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),l.jsxs("button",{onClick:()=>{v(!1),I(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[l.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),T?l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(rT,{title:v0[T],items:x[T],onBack:()=>I(null),onUpdate:async Ee=>{const J={...x,[T]:Ee};p(J),await kn(J)},onDeleteRequest:(Ee,J)=>{T==="projects"?ve({index:Ee,name:J}):j({isOpen:!0,message:`${J}`,onConfirm:async()=>{const Ae=[...x[T]];Ae.splice(Ee,1);const Ve={...x,[T]:Ae};p(Ve),await kn(Ve),j(R=>({...R,isOpen:!1}))}})}})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-4 mb-6 shrink-0",children:[l.jsxs("button",{onClick:()=>V("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${M==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),l.jsxs("button",{onClick:()=>V("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${M==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-list-check mr-2"}),""]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:iT[M].map(Ee=>{const J=x[Ee]||[];return l.jsxs("button",{onClick:()=>I(Ee),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:v0[Ee]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[J.length," "]})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:l.jsx("i",{className:"fa-solid fa-chevron-right"})})]},Ee)})})]})]}),Tt=(Ee=!1)=>l.jsxs("div",{className:"p-[10mm] w-full h-full flex flex-col font-serif",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[l.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[l.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("select",{className:"w-12 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:i.year-2018,onChange:J=>$({year:2018+parseInt(J.target.value||"0")}),children:Array.from({length:30},(J,Ae)=>Ae+1).map(J=>l.jsx("option",{value:J,children:J},J))}),l.jsx("span",{className:"text-xl mr-4",children:""}),l.jsx("select",{className:"w-10 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:i.month,onChange:J=>$({month:parseInt(J.target.value||"0")}),children:Array.from({length:12},(J,Ae)=>Ae+1).map(J=>l.jsx("option",{value:J,children:J},J))}),l.jsx("span",{className:"text-xl mr-2",children:""}),l.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),l.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),l.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[300px] max-w-[500px]",value:i.project,onChange:J=>$({project:J.target.value}),children:x.projects.map(J=>l.jsx("option",{value:J,children:J},J))})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),l.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[200px]",value:i.location,onChange:J=>$({location:J.target.value}),children:x.locations.map(J=>l.jsx("option",{value:J,children:J},J))})]})]})]}),l.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[l.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",l.jsx("input",{type:"date",className:"bg-transparent text-[10px] w-24 text-right font-serif",value:i.createdDate,onChange:J=>$({createdDate:J.target.value})}),""]}),l.jsxs("table",{className:`w-full ${pe} text-[10px] border-collapse`,children:[l.jsxs("colgroup",{children:[l.jsx("col",{className:"w-[15%]"}),l.jsx("col",{className:"w-[25%]"}),l.jsx("col",{className:"w-[35%]"}),l.jsx("col",{className:"w-[25%]"})]}),l.jsx("thead",{children:l.jsxs("tr",{className:Te,children:[l.jsx("th",{className:`${oe} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${oe} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${oe} py-0.5 font-normal`,children:""}),l.jsx("th",{className:`${oe} py-0.5 font-normal`,children:""})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:`${oe} text-center`,children:""}),l.jsx("td",{className:`${oe}`,children:l.jsx("input",{type:"date",className:ke,value:i.trainingDate,onChange:J=>$({trainingDate:J.target.value})})}),l.jsx("td",{className:`${oe} text-center`,children:""}),l.jsx("td",{className:`${oe}`,children:l.jsx("select",{className:tt,value:i.trainingLeader,onChange:J=>$({trainingLeader:J.target.value}),children:x.supervisors.map(J=>l.jsx("option",{value:J,children:J},J))})})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${oe} text-center`,children:""}),l.jsx("td",{className:`${oe}`,children:l.jsx("input",{type:"date",className:ke,value:i.councilDate,onChange:J=>$({councilDate:J.target.value})})}),l.jsx("td",{className:`${oe} text-center`,children:""}),l.jsx("td",{className:`${oe}`,children:l.jsx("select",{className:tt,value:i.councilLeader,onChange:J=>$({councilLeader:J.target.value}),children:x.supervisors.map(J=>l.jsx("option",{value:J,children:J},J))})})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${oe} text-center`,children:""}),l.jsx("td",{className:`${oe}`,children:l.jsx("input",{type:"date",className:ke,value:i.patrolDate,onChange:J=>$({patrolDate:J.target.value})})}),l.jsx("td",{className:`${oe} bg-gray-100`}),l.jsx("td",{className:`${oe} bg-gray-100`})]}),l.jsxs("tr",{children:[l.jsx("td",{className:`${oe} bg-gray-100`}),l.jsx("td",{className:`${oe} bg-gray-100`}),l.jsx("td",{className:`${oe} text-center`,children:""}),l.jsx("td",{className:`${oe}`,children:l.jsx("select",{className:tt,value:i.author,onChange:J=>$({author:J.target.value}),children:x.supervisors.map(J=>l.jsx("option",{value:J,children:J},J))})})]})]})]})]})]}),l.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:l.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[l.jsxs("colgroup",{children:[l.jsx("col",{className:"w-[35mm]"}),xe.map(J=>l.jsx("col",{},J.date)),l.jsx("col",{className:"w-[10mm]"})]}),l.jsxs("thead",{children:[l.jsxs("tr",{className:"h-[8mm]",children:[l.jsx("th",{className:`${oe} ${Te} font-normal`,children:""}),l.jsx("th",{className:`${oe} ${Te}`,colSpan:xe.length,children:l.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[l.jsx("span",{children:""}),l.jsx("span",{children:""}),l.jsx("span",{children:""})]})}),l.jsx("th",{className:`${oe} ${Te} font-normal`,rowSpan:4,children:""})]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${oe} bg-gray-50 font-normal`,children:""}),l.jsxs("th",{className:`${oe} font-normal text-center`,colSpan:xe.length,children:[i.month,""]})]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${oe} bg-gray-50 font-normal`,children:""}),xe.map(J=>l.jsx("th",{className:`${oe} font-normal text-center ${J.colorClass} ${J.bgClass}`,children:J.date},J.date))]}),l.jsxs("tr",{className:"h-[5mm]",children:[l.jsx("th",{className:`${oe} bg-gray-50 font-normal`,children:" "}),xe.map(J=>l.jsx("th",{className:`${oe} font-normal text-center ${J.colorClass} ${J.bgClass}`,children:J.dayOfWeek},J.date))]})]}),l.jsxs("tbody",{children:[i.processRows.map(J=>l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${oe} px-1 align-middle leading-none`,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:J.category}),l.jsx("span",{className:"font-bold text-[9px] truncate",children:J.name})]})}),xe.map(Ae=>{const Ve=Y(J.id,Ae.date),R=ue(J.id,Ae.date);return l.jsxs("td",{className:`${oe} p-0 relative cursor-pointer hover:bg-yellow-50 ${Ae.bgClass}`,onClick:()=>!Ee&&C(J.id,Ae.date),children:[Ve&&l.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"}),R&&l.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-300 opacity-50"})]},Ae.date)}),l.jsx("td",{className:`${oe}`})]},J.id)),Array.from({length:Math.max(0,12-i.processRows.length)}).map((J,Ae)=>l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${oe}`}),xe.map(Ve=>l.jsx("td",{className:`${oe} ${Ve.bgClass}`},Ve.date)),l.jsx("td",{className:`${oe}`})]},`fill-${Ae}`))]}),l.jsxs("tfoot",{children:[l.jsxs("tr",{className:"h-[12mm]",children:[l.jsx("td",{className:`${oe} ${Te} text-center font-normal`,children:""}),G.map((J,Ae)=>l.jsx("td",{colSpan:J,className:`${oe} align-top p-0`,children:l.jsxs("select",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1 appearance-none",value:i.predictions[Ae]||"",onChange:Ve=>{const R=[...i.predictions];R[Ae]=Ve.target.value,$({predictions:R})},children:[l.jsx("option",{value:"",children:"-"}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""})]})},Ae)),l.jsx("td",{className:`${oe}`})]}),l.jsxs("tr",{className:"h-[18mm]",children:[l.jsxs("td",{className:`${oe} ${Te} text-center font-normal leading-tight`,children:["",l.jsx("br",{}),""]}),G.map((J,Ae)=>l.jsx("td",{colSpan:J,className:`${oe} align-top p-0`,children:l.jsx("textarea",{className:"w-full h-full bg-transparent text-[9px] outline-none resize-none p-1 leading-tight",value:i.countermeasures[Ae]||"",onChange:Ve=>{const R=[...i.countermeasures];R[Ae]=Ve.target.value,$({countermeasures:R})}})},Ae)),l.jsx("td",{className:`${oe}`})]}),l.jsxs("tr",{className:"h-[10mm]",children:[l.jsx("td",{className:`${oe} ${Te} text-center font-normal leading-tight`,children:""}),G.map((J,Ae)=>l.jsx("td",{colSpan:J,className:`${oe} align-top p-0`,children:l.jsx("input",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1",value:i.inspectionItems[Ae]||"",onChange:Ve=>{const R=[...i.inspectionItems];R[Ae]=Ve.target.value,$({inspectionItems:R})}})},Ae)),l.jsx("td",{className:`${oe}`})]}),l.jsxs("tr",{className:"h-[6mm]",children:[l.jsx("td",{className:`${oe} ${Te} text-center font-normal`,children:""}),xe.map(J=>l.jsx("td",{className:`${oe} p-0 text-center`,children:l.jsx("input",{className:"w-full h-full text-[8px] text-center bg-transparent outline-none p-0",value:i.safetyDuty[J.date]||"",onChange:Ae=>$({safetyDuty:{...i.safetyDuty,[J.date]:Ae.target.value}})})},J.date)),l.jsx("td",{className:`${oe}`})]}),l.jsxs("tr",{className:"h-[10mm]",children:[l.jsx("td",{className:`${oe} ${Te} text-center font-normal`,children:""}),l.jsx("td",{colSpan:xe.length+1,className:`${oe} p-0`,children:l.jsx("textarea",{className:"w-full h-full p-1 text-[10px] bg-transparent outline-none resize-none leading-tight",value:i.lastMonthReflection,onChange:J=>$({lastMonthReflection:J.target.value})})})]})]})]})})]});return g?l.jsxs(l.Fragment,{children:[Ce(),l.jsx(x0,{isOpen:N.isOpen,message:N.message,onConfirm:N.onConfirm,onCancel:()=>j({...N,isOpen:!1})}),S&&l.jsx(b0,{isOpen:!!S,projectName:S.name,onCancel:()=>ve(null),onConfirm:async()=>{const Ee=[...x.projects];Ee.splice(S.index,1),await _o(S.name);const J={...x,projects:Ee};p(J),await kn(J),ve(null)}})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-print min-h-screen bg-gray-50 flex flex-col",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-30 flex justify-between items-center shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:Ue,className:"text-white hover:text-gray-300 transition-colors",children:l.jsx("i",{className:"fa-solid fa-house"})}),l.jsxs("h1",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-clipboard-list mr-2"}),""]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:de,className:"px-4 py-2 rounded font-bold border border-blue-400 text-white bg-blue-600 hover:bg-blue-500 flex items-center text-sm transition-colors shadow-sm",children:[l.jsx("i",{className:`fa-solid ${te==="saved"?"fa-check":"fa-save"} mr-2`}),te==="saved"?"":""]}),l.jsxs("button",{onClick:()=>L(!0),className:"px-4 py-2 bg-cyan-600 text-white rounded font-bold hover:bg-cyan-500 flex items-center text-sm transition-colors shadow-sm",children:[l.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]}),l.jsxs("button",{onClick:()=>v(!0),className:"text-xs bg-slate-700 px-3 py-2 rounded hover:bg-slate-600 transition-colors ml-2 shadow-sm",children:[l.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]})]}),l.jsx("main",{className:"flex-1 overflow-auto p-4 bg-gray-100 flex justify-center",children:l.jsx("div",{className:"bg-white shadow-xl origin-top",style:{width:"297mm",minHeight:"210mm"},children:Tt(!1)})})]}),z&&l.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-95 flex flex-col no-print",children:[l.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-eye mr-2"}),""]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500 transition-colors",children:""}),l.jsxs("button",{onClick:_e,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center hover:bg-green-500 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-8 flex justify-center items-start bg-gray-800",children:l.jsx("div",{style:{width:"297mm",transform:`scale(${Se})`,transformOrigin:"top center",marginBottom:`${(Se-1)*100}%`},children:l.jsx("div",{className:"bg-white shadow-2xl",children:Tt(!0)})})})]}),l.jsxs("div",{className:"hidden print:block",children:[l.jsx("style",{children:"@media print { @page { size: landscape; } }"}),l.jsx("div",{className:"print-page-landscape",children:Tt(!0)})]}),l.jsx(x0,{isOpen:N.isOpen,message:N.message,onConfirm:N.onConfirm,onCancel:()=>j({...N,isOpen:!1})}),S&&l.jsx(b0,{isOpen:!!S,projectName:S.name,onCancel:()=>ve(null),onConfirm:async()=>{const Ee=[...x.projects];Ee.splice(S.index,1),await _o(S.name);const J={...x,projects:Ee};p(J),await kn(J),ve(null)}})]})},uT=r=>{if(!r)return"text-[10px]";const t=r.length;return t>40?"text-[6px]":t>30?"text-[7px]":t>20?"text-[8px]":"text-[10px]"},_0=({data:r})=>{if(!r)return null;const t=r.qualifications||{},s="border-b border-r border-black",i=({checked:u,label:m})=>l.jsxs("div",{className:"flex items-center text-[10px] leading-tight mb-0.5",children:[l.jsx("div",{className:`w-3.5 h-3.5 border border-black flex items-center justify-center mr-1.5 text-[10px] shrink-0 font-sans ${u?"font-bold":""}`,children:u?"":""}),l.jsx("span",{className:"whitespace-nowrap",children:m})]}),c=["","","","","","",""];return l.jsx("div",{className:"font-serif text-black leading-tight bg-white relative",children:l.jsxs("div",{className:"print-page p-[12mm] flex flex-col box-border",style:{height:"297mm",width:"210mm"},children:[l.jsx("h1",{className:"text-3xl font-bold text-center mb-6 tracking-[0.5em] shrink-0",children:""}),l.jsxs("div",{className:"w-full border-2 border-black flex-1 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[64px]",children:[l.jsxs("div",{className:`w-24 ${s} bg-gray-50 flex flex-col justify-center items-center p-1`,children:[l.jsx("span",{className:"text-[10px] mb-1",children:""}),l.jsx("span",{className:"font-bold text-base",children:""})]}),l.jsxs("div",{className:`w-64 ${s} p-1 flex flex-col justify-center`,children:[l.jsxs("div",{className:"text-xs text-center w-full mb-0.5",children:[r.furiganaSei,"",r.furiganaMei]}),l.jsxs("div",{className:"text-xl text-center font-bold",children:[r.nameSei,"",r.nameMei]})]}),l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold text-sm text-center`,children:""}),l.jsx("div",{className:`flex-1 ${s} flex items-center justify-center p-1`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsxs("div",{className:"flex flex-col text-[10px] leading-none mr-1 gap-1",children:[l.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${r.birthEra==="Showa"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""}),l.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${r.birthEra==="Heisei"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""})]}),l.jsx("span",{className:"text-lg font-bold",children:r.birthYear}),l.jsx("span",{className:"text-xs",children:""}),l.jsx("span",{className:"text-lg font-bold",children:r.birthMonth}),l.jsx("span",{className:"text-xs",children:""}),l.jsx("span",{className:"text-lg font-bold",children:r.birthDay}),l.jsx("span",{className:"text-xs",children:""})]})}),l.jsxs("div",{className:"w-24 border-b border-black flex flex-col items-center justify-center p-1",children:[l.jsxs("div",{className:"flex gap-3 mb-1 text-sm",children:[l.jsx("span",{className:r.gender==="Male"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""}),l.jsx("span",{children:""}),l.jsx("span",{className:r.gender==="Female"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""})]}),l.jsxs("div",{className:"flex items-end gap-0.5",children:[l.jsx("span",{className:"text-lg font-bold",children:r.age}),l.jsx("span",{className:"text-[10px]",children:""})]})]})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsx("div",{className:`flex-1 ${s} px-3 flex items-center`,children:l.jsx("span",{className:"text-base font-bold",children:r.company})}),l.jsxs("div",{className:`w-32 ${s} flex items-center justify-center p-1 text-[11px]`,children:["( ",l.jsx("span",{className:"w-6 text-center text-base font-bold",children:r.subcontractorRank})," ) "]}),l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsxs("div",{className:"w-40 border-b border-black flex items-center justify-center p-1",children:[l.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:r.experienceYears}),l.jsx("span",{className:"text-xs mr-2",children:""}),l.jsx("span",{className:"text-lg font-bold w-5 text-right mr-1",children:r.experienceMonths}),l.jsx("span",{className:"text-xs",children:""})]})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsx("div",{className:"flex-1 border-b border-black px-2 flex items-center text-sm",children:l.jsxs("div",{className:"flex flex-nowrap items-center w-full",children:[c.map((u,m)=>l.jsx(Dt.Fragment,{children:l.jsxs("div",{className:"flex items-center whitespace-nowrap",children:[l.jsx("span",{className:`px-1 ${r.jobType===u?"border border-black rounded-full font-bold":""}`,children:u}),m<c.length-1&&l.jsx("span",{className:"text-gray-400 mx-1",children:""})]})},u)),l.jsxs("div",{className:"flex items-center whitespace-nowrap ml-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"inline-block min-w-[100px] text-center px-1 italic",children:r.jobType===""?r.jobTypeOther:""}),l.jsx("span",{children:""})]})]})})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsx("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:r.address}),l.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:""})]}),l.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:r.phone})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsx("div",{className:`w-12 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-[10px]`,children:""}),l.jsxs("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:[r.emergencyContactSei,"",r.emergencyContactMei]}),l.jsx("div",{className:`w-16 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsx("div",{className:`w-20 ${s} flex items-center justify-center text-sm font-bold`,children:r.emergencyContactRelation}),l.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:""})]}),l.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:r.emergencyContactPhone})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[l.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsxs("div",{className:`flex-1 ${s} p-1 flex items-center justify-center gap-2`,children:[l.jsx("span",{className:"text-lg font-bold w-6 text-center",children:r.bloodType}),l.jsx("span",{className:"text-xs",children:""}),l.jsx("span",{className:"ml-4 text-xs font-bold",children:"  "}),r.bloodTypeRh==="Unknown"||r.bloodTypeRh===void 0?l.jsx("span",{className:"w-10 text-center text-xs",children:""}):l.jsx("span",{className:"w-10 text-center border-b border-black text-lg font-bold",children:r.bloodTypeRh==="Plus"?"+":"-"}),l.jsx("span",{className:"text-xs font-bold",children:" "})]}),l.jsx("div",{className:`w-32 ${s} bg-gray-50 flex items-center justify-center font-bold text-[10px] p-1 text-center leading-tight`,children:""}),l.jsxs("div",{className:"w-64 border-b border-black p-1 flex items-center justify-center",children:[l.jsx("span",{className:"text-xs mr-1",children:""}),l.jsx("span",{className:"text-lg font-bold w-8 text-right mr-1",children:r.healthCheckYear}),l.jsx("span",{className:"text-xs mr-2",children:""}),l.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:r.healthCheckMonth}),l.jsx("span",{className:"text-xs mr-2",children:""}),l.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:r.healthCheckDay}),l.jsx("span",{className:"text-xs",children:""})]})]}),l.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[l.jsx("div",{className:`w-1/2 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),l.jsxs("div",{className:"w-1/2 border-b border-black flex items-center justify-center gap-10 p-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:r.kentaikyo==="Joined"&&l.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),l.jsx("span",{className:`text-sm ${r.kentaikyo==="Joined"?"font-bold":""}`,children:""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:r.kentaikyo==="NotJoined"&&l.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),l.jsx("span",{className:`text-sm ${r.kentaikyo==="NotJoined"?"font-bold":""}`,children:""})]})]})]}),l.jsxs("div",{className:"p-4 flex-1 flex flex-col border-b border-black",children:[l.jsx("div",{className:"font-bold text-xs mb-3",children:""}),l.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[l.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2",children:[l.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx(i,{checked:t.vehicle_leveling,label:""}),l.jsx(i,{checked:t.vehicle_demolition,label:""}),l.jsx(i,{checked:t.mobile_crane,label:""}),l.jsx(i,{checked:t.slinging,label:""}),l.jsx(i,{checked:t.gas_welding,label:""}),l.jsx(i,{checked:t.earth_retaining,label:""}),l.jsx(i,{checked:t.excavation,label:""}),l.jsx(i,{checked:t.scaffolding,label:""}),l.jsx(i,{checked:t.formwork,label:""}),l.jsx(i,{checked:t.oxygen_deficiency,label:""}),l.jsx(i,{checked:t.rough_terrain,label:""})]})]}),l.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2 pl-2",children:[l.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx(i,{checked:t.arc_welding,label:""}),l.jsx(i,{checked:t.grinding_wheel,label:""}),l.jsx(i,{checked:t.low_voltage,label:""}),l.jsx(i,{checked:t.roller,label:""}),l.jsx(i,{checked:t.asbestos,label:""})]})]}),l.jsxs("div",{className:"flex flex-col pl-2",children:[l.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),l.jsx(i,{checked:t.foreman,label:""}),l.jsx("div",{className:"mt-1 pt-1 border-t border-dashed border-gray-300"}),l.jsx(i,{checked:t.license_regular,label:""}),l.jsx(i,{checked:t.license_large,label:""}),l.jsx(i,{checked:t.license_large_special,label:""}),l.jsx(i,{checked:t.license_towing,label:""}),l.jsxs("div",{className:"mt-auto pt-2",children:[l.jsx("div",{className:"text-[9px] font-bold mb-1 text-gray-600",children:""}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText1}),l.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText2}),l.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText3})]})]})]})]})]}),l.jsxs("div",{className:"p-3 bg-gray-50 flex-1 flex flex-col justify-between shrink-0 h-[180px]",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"font-bold text-sm mb-2 flex items-center",children:[l.jsx("span",{className:"w-1 h-4 bg-black mr-2"}),""]}),l.jsxs("ul",{className:"list-none pl-2 space-y-1 text-xs leading-snug",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1.5",children:"-"}),""]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1.5",children:"-"}),""]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1.5",children:"-"}),""]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1.5",children:"-"}),""]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1.5",children:"-"}),""]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1.5",children:"-"}),""]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1.5",children:"-"}),""]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"mr-1.5",children:"-"}),""]})]})]}),l.jsxs("div",{className:"flex justify-between items-end px-1 mt-auto",children:[l.jsxs("div",{className:"w-[50%] space-y-2",children:[l.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[l.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5 whitespace-nowrap",children:""}),l.jsx("span",{className:`flex-1 font-bold px-1 text-center ${uT(r.project)}`,children:r.project})]}),l.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[l.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5",children:""}),l.jsx("span",{className:"flex-1 text-sm font-bold text-center",children:r.director}),l.jsx("span",{className:"text-[9px] ml-1 mb-0.5",children:""})]})]}),l.jsxs("div",{className:"w-[45%] flex flex-col items-end",children:[l.jsxs("div",{className:"flex justify-center items-baseline mb-1 text-[10px] font-bold w-full",children:[l.jsx("span",{className:"mr-1",children:""}),l.jsx("span",{className:"text-base w-6 text-center mx-0.5",children:r.pledgeDateYear}),l.jsx("span",{children:""}),l.jsx("span",{className:"text-base w-5 text-center mx-0.5",children:r.pledgeDateMonth}),l.jsx("span",{children:""}),l.jsx("span",{className:"text-base w-5 text-center mx-0.5",children:r.pledgeDateDay}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex w-full items-end border-2 border-black bg-white h-[50px] relative",children:[l.jsx("span",{className:"absolute left-1 top-1 text-[9px] font-bold text-gray-400",children:""}),l.jsx("div",{className:"flex-1 h-full flex items-center justify-center p-1",children:r.signatureDataUrl?l.jsx("img",{src:r.signatureDataUrl,alt:"Signature",className:"max-h-full max-w-full object-contain"}):l.jsx("span",{className:"text-gray-200 text-[9px]",children:"()"})})]})]})]})]})]})]})})},cs=(r,t)=>Array.from({length:t-r+1},(s,i)=>r+i),hT=r=>{let t=Wd;if(r){const s={...Wd.qualifications,...r.qualifications||{}};t={...Wd,...r,qualifications:s}}else{t={...t,experienceYears:null,experienceMonths:null,healthCheckYear:null,healthCheckMonth:null,healthCheckDay:null,pledgeDateYear:null,pledgeDateMonth:null,pledgeDateDay:null,project:"",director:"",company:""};const s=new Date,i=s.getFullYear()-2018;t.pledgeDateYear=i,t.pledgeDateMonth=s.getMonth()+1,t.pledgeDateDay=s.getDate()}return t},N0=({isOpen:r,message:t,onLeftButtonClick:s,onRightButtonClick:i,leftButtonLabel:c,rightButtonLabel:u,leftButtonClass:m,rightButtonClass:x})=>r?l.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fadeIn",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap font-bold text-red-600",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:s,className:m,children:c}),l.jsx("button",{onClick:i,className:x,children:u})]})]})}):null,dT=({isOpen:r,onOk:t})=>r?l.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-sm w-full p-8 text-center animate-fadeIn",children:[l.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("i",{className:"fa-solid fa-check text-3xl"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:""}),l.jsx("p",{className:"text-gray-600 mb-6",children:""}),l.jsx("button",{onClick:t,className:"w-full py-3 bg-blue-600 text-white rounded-lg font-bold shadow hover:bg-blue-700 transition-colors",children:"OK"})]})}):null,fT=({title:r,items:t,onUpdate:s,onDeleteRequest:i,onBack:c})=>{const[u,m]=W.useState(""),x=t||[],p=()=>{u.trim()&&(s([...x,u.trim()]),m(""))};return l.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[l.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:l.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),l.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[r," ",l.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[x.length,""]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsxs("ul",{className:"space-y-2",children:[x.map((g,v)=>l.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[l.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:g}),l.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),i(v,g)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},v)),x.length===0&&l.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),l.jsx("div",{className:"p-4 border-t bg-gray-50",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:u,onChange:g=>m(g.target.value),onKeyDown:g=>g.key==="Enter"&&p()}),l.jsxs("button",{onClick:p,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[l.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},E0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},mT={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["roles","topics","jobTypes","goals","predictions","countermeasures"]},gT=({initialData:r,initialDraftId:t,onBackToMenu:s})=>{const[i,c]=W.useState(1),[u,m]=W.useState(hT(r)),[x,p]=W.useState(t||null),[g,v]=W.useState(Mt),[N,j]=W.useState(!1),[z,L]=W.useState(!1),[Z,P]=W.useState("idle"),[ge,ce]=W.useState(1),[te,he]=W.useState({isOpen:!1,message:"",onLeftButtonClick:()=>{},onRightButtonClick:()=>{},leftButtonLabel:"",rightButtonLabel:"",leftButtonClass:"",rightButtonClass:""}),[Se,Me]=W.useState(!1),[D,A]=W.useState(!1),[M,V]=W.useState(0),[T,I]=W.useState(null),[S,ve]=W.useState({}),[xe,G]=W.useState("BASIC"),[$,de]=W.useState(null),[_e,Ue]=W.useState(null);W.useEffect(()=>{window.scrollTo(0,0)},[i]),W.useEffect(()=>{(async()=>{try{const ne=await Ku();v(ne)}catch(ne){console.error("",ne)}})()},[]),W.useEffect(()=>{if(!z)return;const R=()=>{const se=window.innerWidth-40;ce(se<794?se/794:1)};return window.addEventListener("resize",R),R(),()=>window.removeEventListener("resize",R)},[z]),W.useEffect(()=>{const ne=(()=>{if(u.birthYear===""||u.birthMonth===""||u.birthDay==="")return u.age;let He=0;if(u.birthEra==="Showa"?He=1925+u.birthYear:u.birthEra==="Heisei"&&(He=1988+u.birthYear),He===0)return u.age;const se=new Date,me=new Date(He,u.birthMonth-1,u.birthDay);let Q=se.getFullYear()-me.getFullYear();const we=se.getMonth()-me.getMonth();return(we<0||we===0&&se.getDate()<me.getDate())&&Q--,Math.max(0,Q)})();ne!==u.age&&u.birthYear!==""&&u.birthMonth!==""&&u.birthDay!==""&&m(He=>({...He,age:ne}))},[u.birthEra,u.birthYear,u.birthMonth,u.birthDay]);const C=R=>{m(He=>({...He,...R})),P("idle"),A(!0);const ne={...S};Object.keys(R).forEach(He=>delete ne[He]),ve(ne)},Y=(R,ne)=>{m(He=>({...He,qualifications:{...He.qualifications,[R]:ne}})),P("idle"),A(!0)},ue=()=>{const R={},ne=u;return ne.project||(R.project=!0),ne.director||(R.director=!0),ne.nameSei||(R.nameSei=!0),ne.nameMei||(R.nameMei=!0),ne.furiganaSei||(R.furiganaSei=!0),ne.furiganaMei||(R.furiganaMei=!0),ne.birthYear||(R.birthYear=!0),ne.birthMonth||(R.birthMonth=!0),ne.birthDay||(R.birthDay=!0),ne.company||(R.company=!0),(ne.experienceYears===void 0||ne.experienceYears===null||isNaN(Number(ne.experienceYears)))&&(R.experienceYears=!0),ne.jobType||(R.jobType=!0),ne.jobType===""&&!ne.jobTypeOther&&(R.jobTypeOther=!0),ne.address||(R.address=!0),ne.phone||(R.phone=!0),ne.emergencyContactSei||(R.emergencyContactSei=!0),ne.emergencyContactMei||(R.emergencyContactMei=!0),ne.emergencyContactRelation||(R.emergencyContactRelation=!0),ne.emergencyContactPhone||(R.emergencyContactPhone=!0),ne.healthCheckYear||(R.healthCheckYear=!0),ne.healthCheckMonth||(R.healthCheckMonth=!0),ve(R),Object.keys(R).length===0},pe=()=>{if(i===1&&!ue()){alert(`
`);return}c(R=>Math.min(R+1,3))},oe=async()=>{if(!u.signatureDataUrl){alert(`
`);return}P("saving");try{const R=(u.nameSei||"")+(u.nameMei||""),ne={...u,name:R||""},He=await Wa(x,"NEWCOMER_SURVEY",ne);p(He),P("saved"),A(!1),Me(!0),setTimeout(()=>P("idle"),2e3)}catch(R){console.error(R),alert(""),P("idle")}},Te=()=>{if(!u.signatureDataUrl){alert(`
`);return}L(!0)},ke=async()=>{if(!u.signatureDataUrl){alert(`
`);return}P("saving");try{const R=(u.nameSei||"")+(u.nameMei||""),ne={...u,name:R||""},He=await Wa(x,"NEWCOMER_SURVEY",ne);p(He),P("saved"),A(!1),setTimeout(()=>P("idle"),2e3);const se=document.title,me=`_${u.company||""}_${R||""}`;document.title=me,window.print(),document.title=se}catch{alert(""),P("idle")}},tt=()=>{D?he({isOpen:!0,message:`
`,leftButtonLabel:"",leftButtonClass:"px-4 py-2 bg-gray-200 text-gray-700 rounded font-bold hover:bg-gray-300",onLeftButtonClick:()=>{he(R=>({...R,isOpen:!1})),s()},rightButtonLabel:"",rightButtonClass:"px-4 py-2 bg-red-600 text-white rounded font-bold hover:bg-red-700",onRightButtonClick:()=>{he(R=>({...R,isOpen:!1}))}}):s()},Ce=R=>S[R]?"border-red-500 bg-red-50 ring-1 ring-red-500":"border-gray-300 bg-white",Tt=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 1: "}),l.jsxs("p",{className:"text-sm text-red-500 font-bold",children:[l.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),""]}),l.jsxs("div",{className:"bg-purple-50 p-4 rounded border border-purple-100 grid grid-cols-1 md:grid-cols-2 gap-4 w-full",children:[l.jsxs("div",{className:"col-span-1 md:col-span-2 text-sm text-purple-700 font-bold mb-1",children:[l.jsx("i",{className:"fa-solid fa-circle-info mr-1"}),""]}),l.jsxs("div",{className:"w-full overflow-hidden",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:" ()"}),l.jsxs("select",{className:`w-full p-2 border rounded font-bold max-w-full text-ellipsis ${Ce("project")}`,value:u.project,onChange:R=>C({project:R.target.value}),children:[l.jsx("option",{value:"",children:""}),g.projects.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{className:"w-full overflow-hidden",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:" ()"}),l.jsxs("select",{className:`w-full p-2 border rounded max-w-full text-ellipsis ${Ce("director")}`,value:u.director,onChange:R=>C({director:R.target.value}),children:[l.jsx("option",{value:"",children:""}),g.supervisors.map(R=>l.jsx("option",{value:R,children:R},R))]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${Ce("nameSei")}`,placeholder:"",value:u.nameSei,onChange:R=>C({nameSei:R.target.value})}),l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${Ce("nameMei")}`,placeholder:"",value:u.nameMei,onChange:R=>C({nameMei:R.target.value})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${Ce("furiganaSei")}`,placeholder:"",value:u.furiganaSei,onChange:R=>C({furiganaSei:R.target.value})}),l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${Ce("furiganaMei")}`,placeholder:"",value:u.furiganaMei,onChange:R=>C({furiganaMei:R.target.value})})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[l.jsxs("select",{className:"p-2 border rounded bg-white",value:u.birthEra,onChange:R=>C({birthEra:R.target.value}),children:[l.jsx("option",{value:"Showa",children:""}),l.jsx("option",{value:"Heisei",children:""})]}),l.jsxs("select",{className:`w-16 p-2 border rounded text-center bg-white appearance-none ${Ce("birthYear")}`,value:u.birthYear,onChange:R=>C({birthYear:R.target.value===""?"":parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(1,u.birthEra==="Showa"?64:31).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{children:""}),l.jsxs("select",{className:`w-14 p-2 border rounded text-center bg-white appearance-none ${Ce("birthMonth")}`,value:u.birthMonth,onChange:R=>C({birthMonth:R.target.value===""?"":parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(1,12).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{children:""}),l.jsxs("select",{className:`w-14 p-2 border rounded text-center bg-white appearance-none ${Ce("birthDay")}`,value:u.birthDay,onChange:R=>C({birthDay:R.target.value===""?"":parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(1,31).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex gap-2 border p-1 rounded bg-white",children:[l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"radio",checked:u.gender==="Male",onChange:()=>C({gender:"Male"})}),""]}),l.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[l.jsx("input",{type:"radio",checked:u.gender==="Female",onChange:()=>C({gender:"Female"})}),""]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",className:"w-16 p-2 border rounded text-center bg-gray-100",readOnly:!0,value:u.age}),l.jsx("span",{children:""})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),l.jsxs("select",{className:`w-full p-2 border rounded mb-2 max-w-full text-ellipsis ${Ce("company")}`,value:u.company,onChange:R=>C({company:R.target.value}),children:[l.jsx("option",{value:"",children:""}),g.contractors.map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{children:"("}),l.jsx("input",{type:"text",className:`w-10 border-b text-center ${Ce("subcontractorRank")}`,value:u.subcontractorRank,onChange:R=>C({subcontractorRank:R.target.value})}),l.jsx("span",{children:") "})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsxs("select",{className:`w-16 p-2 border rounded text-center bg-white appearance-none ${Ce("experienceYears")}`,value:u.experienceYears??"",onChange:R=>C({experienceYears:R.target.value===""?null:parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(0,60).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{children:""}),l.jsxs("select",{className:"w-16 p-2 border rounded text-center bg-white appearance-none",value:u.experienceMonths??"",onChange:R=>C({experienceMonths:R.target.value===""?null:parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(0,11).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:`w-1/2 p-2 border rounded ${Ce("jobType")}`,value:u.jobType,onChange:R=>C({jobType:R.target.value}),children:[l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""})]}),u.jobType===""&&l.jsx("input",{type:"text",className:`flex-1 p-2 border rounded max-w-full ${Ce("jobTypeOther")}`,placeholder:"",value:u.jobTypeOther,onChange:R=>C({jobTypeOther:R.target.value})})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded mb-2 max-w-full ${Ce("address")}`,placeholder:"",value:u.address,onChange:R=>C({address:R.target.value})}),l.jsx("input",{type:"text",className:`w-48 p-2 border rounded max-w-full ${Ce("phone")}`,placeholder:"090-0000-0000",value:u.phone,onChange:R=>C({phone:R.target.value})})]}),l.jsxs("div",{className:"form-control bg-gray-50 p-3 rounded border-2 border-red-500 w-full",children:[l.jsx("label",{className:"label font-bold text-gray-700 mb-2 block",children:""}),l.jsxs("div",{className:"mb-2",children:[l.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${Ce("emergencyContactSei")}`,placeholder:"",value:u.emergencyContactSei,onChange:R=>C({emergencyContactSei:R.target.value})}),l.jsx("input",{type:"text",className:`w-1/2 p-2 border rounded max-w-full ${Ce("emergencyContactMei")}`,placeholder:"",value:u.emergencyContactMei,onChange:R=>C({emergencyContactMei:R.target.value})})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsxs("div",{className:"w-full sm:flex-1",children:[l.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),l.jsxs("select",{className:`w-full p-2 border rounded max-w-full ${Ce("emergencyContactRelation")}`,value:u.emergencyContactRelation,onChange:R=>C({emergencyContactRelation:R.target.value}),children:[l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""}),l.jsx("option",{value:"",children:""})]})]}),l.jsxs("div",{className:"w-full sm:flex-1",children:[l.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded max-w-full ${Ce("emergencyContactPhone")}`,placeholder:"090-0000-0000",value:u.emergencyContactPhone,onChange:R=>C({emergencyContactPhone:R.target.value})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"p-2 border rounded bg-white",value:u.bloodType,onChange:R=>C({bloodType:R.target.value}),children:[l.jsx("option",{value:"A",children:"A"}),l.jsx("option",{value:"B",children:"B"}),l.jsx("option",{value:"O",children:"O"}),l.jsx("option",{value:"AB",children:"AB"})]}),l.jsx("span",{className:"self-center",children:""}),l.jsx("span",{className:"self-center ml-2",children:"RH"}),l.jsxs("select",{className:"p-2 border rounded bg-white",value:u.bloodTypeRh,onChange:R=>C({bloodTypeRh:R.target.value}),children:[l.jsx("option",{value:"Unknown",children:""}),l.jsx("option",{value:"Plus",children:"+"}),l.jsx("option",{value:"Minus",children:"-"})]})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),l.jsxs("div",{className:"flex gap-1 items-center",children:[l.jsxs("select",{className:`w-16 p-2 border rounded text-center bg-white appearance-none ${Ce("healthCheckYear")}`,value:u.healthCheckYear??"",onChange:R=>C({healthCheckYear:R.target.value===""?null:parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(1,30).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{children:""}),l.jsxs("select",{className:`w-14 p-2 border rounded text-center bg-white appearance-none ${Ce("healthCheckMonth")}`,value:u.healthCheckMonth??"",onChange:R=>C({healthCheckMonth:R.target.value===""?null:parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(1,12).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{children:""}),l.jsxs("select",{className:"w-14 p-2 border rounded text-center bg-white appearance-none",value:u.healthCheckDay??"",onChange:R=>C({healthCheckDay:R.target.value===""?null:parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(1,31).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"form-control",children:[l.jsx("label",{className:"label font-bold text-gray-700",children:""}),l.jsxs("div",{className:"flex gap-4 mt-1",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-2 border rounded shadow-sm",children:[l.jsx("input",{type:"radio",checked:u.kentaikyo==="Joined",onChange:()=>C({kentaikyo:"Joined"})}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-2 border rounded shadow-sm",children:[l.jsx("input",{type:"radio",checked:u.kentaikyo==="NotJoined",onChange:()=>C({kentaikyo:"NotJoined"})}),""]})]})]})]}),Ee=()=>{const R=u.qualifications||{};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 2: "}),l.jsx("p",{className:"text-sm text-gray-500",children:""}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[l.jsx("h3",{className:"font-bold border-b mb-3",children:""}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.vehicle_leveling,onChange:ne=>Y("vehicle_leveling",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.vehicle_demolition,onChange:ne=>Y("vehicle_demolition",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.mobile_crane,onChange:ne=>Y("mobile_crane",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.slinging,onChange:ne=>Y("slinging",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.gas_welding,onChange:ne=>Y("gas_welding",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.earth_retaining,onChange:ne=>Y("earth_retaining",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.excavation,onChange:ne=>Y("excavation",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.scaffolding,onChange:ne=>Y("scaffolding",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.formwork,onChange:ne=>Y("formwork",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.oxygen_deficiency,onChange:ne=>Y("oxygen_deficiency",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.rough_terrain,onChange:ne=>Y("rough_terrain",ne.target.checked)}),""]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[l.jsx("h3",{className:"font-bold border-b mb-3",children:""}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.arc_welding,onChange:ne=>Y("arc_welding",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.grinding_wheel,onChange:ne=>Y("grinding_wheel",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.low_voltage,onChange:ne=>Y("low_voltage",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.roller,onChange:ne=>Y("roller",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.asbestos,onChange:ne=>Y("asbestos",ne.target.checked)}),""]})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[l.jsx("h3",{className:"font-bold border-b mb-3",children:""}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[l.jsx("input",{type:"checkbox",checked:R.foreman,onChange:ne=>Y("foreman",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-1",children:[l.jsx("input",{type:"checkbox",checked:R.license_regular,onChange:ne=>Y("license_regular",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-1",children:[l.jsx("input",{type:"checkbox",checked:R.license_large,onChange:ne=>Y("license_large",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-1",children:[l.jsx("input",{type:"checkbox",checked:R.license_large_special,onChange:ne=>Y("license_large_special",ne.target.checked)}),""]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-4",children:[l.jsx("input",{type:"checkbox",checked:R.license_towing,onChange:ne=>Y("license_towing",ne.target.checked)}),""]}),l.jsx("div",{className:"text-sm font-bold mb-2",children:""}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:R.otherText1,onChange:ne=>Y("otherText1",ne.target.value)}),l.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:R.otherText2,onChange:ne=>Y("otherText2",ne.target.value)}),l.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:R.otherText3,onChange:ne=>Y("otherText3",ne.target.value)})]})]})]})]})]})},J=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 3: "}),l.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border leading-relaxed text-gray-800",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:""}),l.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-6",children:[l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""}),l.jsx("li",{children:""})]}),l.jsxs("div",{className:"bg-white p-4 rounded border text-center",children:[l.jsxs("div",{className:"mb-4 flex flex-row items-center justify-center gap-1 flex-nowrap",children:[l.jsx("label",{className:"font-bold whitespace-nowrap text-sm md:text-base",children:"()"}),l.jsxs("select",{className:"w-14 md:w-16 p-2 border rounded text-center text-sm md:text-base bg-white appearance-none",value:u.pledgeDateYear??"",onChange:R=>C({pledgeDateYear:R.target.value===""?null:parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(1,30).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{className:"text-sm md:text-base",children:""}),l.jsxs("select",{className:"w-14 md:w-16 p-2 border rounded text-center text-sm md:text-base bg-white appearance-none",value:u.pledgeDateMonth??"",onChange:R=>C({pledgeDateMonth:R.target.value===""?null:parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(1,12).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{className:"text-sm md:text-base",children:""}),l.jsxs("select",{className:"w-14 md:w-16 p-2 border rounded text-center text-sm md:text-base bg-white appearance-none",value:u.pledgeDateDay??"",onChange:R=>C({pledgeDateDay:R.target.value===""?null:parseInt(R.target.value)}),children:[l.jsx("option",{value:"",children:"-"}),cs(1,31).map(R=>l.jsx("option",{value:R,children:R},R))]}),l.jsx("span",{className:"text-sm md:text-base",children:""})]}),l.jsx("label",{className:"block font-bold text-gray-700 mb-2",children:""}),l.jsx("div",{className:"mx-auto w-full max-w-sm",children:u.signatureDataUrl?l.jsxs("div",{className:"mt-4",children:[l.jsx("p",{className:"text-xs text-green-600 font-bold mb-1",children:""}),l.jsx("div",{className:"cursor-pointer hover:opacity-80 transition-opacity inline-block border border-transparent hover:border-blue-300 rounded p-1",onClick:()=>I(u.signatureDataUrl),title:"",children:l.jsx("img",{src:u.signatureDataUrl,alt:"Signature",className:"h-10 mx-auto border"})}),l.jsx("button",{onClick:()=>C({signatureDataUrl:null}),className:"ml-4 text-xs text-red-500 underline",children:""})]}):l.jsx("div",{className:"w-full",children:l.jsx(Nm,{onSave:R=>{C({signatureDataUrl:R}),V(ne=>ne+1)},onClear:()=>{},lineWidth:6,keepOpenOnSave:!0},M)})})]})]})]}),Ae=()=>l.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[l.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),l.jsxs("button",{onClick:()=>{j(!1),de(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[l.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),$?l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(fT,{title:E0[$],items:g[$]||[],onBack:()=>de(null),onUpdate:async R=>{const ne={...g,[$]:R};v(ne),await kn(ne)},onDeleteRequest:(R,ne)=>{$==="projects"?Ue({index:R,name:ne}):he({isOpen:!0,message:`${ne}`,onLeftButtonClick:()=>he(He=>({...He,isOpen:!1})),onRightButtonClick:async()=>{const He=[...g[$]||[]];He.splice(R,1);const se={...g,[$]:He};v(se),await kn(se),he(me=>({...me,isOpen:!1}))},leftButtonLabel:"",rightButtonLabel:"",leftButtonClass:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",rightButtonClass:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold"})}})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-4 mb-6 shrink-0",children:[l.jsxs("button",{onClick:()=>G("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${xe==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),l.jsxs("button",{onClick:()=>G("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${xe==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[l.jsx("i",{className:"fa-solid fa-list-check mr-2"}),""]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:(mT[xe]||[]).map(R=>{const ne=g[R]||[];return l.jsxs("button",{onClick:()=>de(R),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:E0[R]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[ne.length," "]})]}),l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:l.jsx("i",{className:"fa-solid fa-chevron-right"})})]},R)})})]})]}),Ve=()=>l.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[l.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 bg-gray-600 rounded",children:""}),l.jsxs("button",{onClick:ke,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center",children:[l.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 flex justify-center",children:l.jsx("div",{style:{width:"794px",transform:`scale(${ge})`,transformOrigin:"top center",marginBottom:`${(ge-1)*100}%`},children:l.jsx(_0,{data:u})})})]});return N?l.jsxs(l.Fragment,{children:[Ae(),l.jsx(N0,{isOpen:te.isOpen,message:te.message,onLeftButtonClick:te.onLeftButtonClick,onRightButtonClick:te.onRightButtonClick,leftButtonLabel:te.leftButtonLabel,rightButtonLabel:te.rightButtonLabel,leftButtonClass:te.leftButtonClass,rightButtonClass:te.rightButtonClass}),_e&&l.jsx(pT,{isOpen:!!_e,projectName:_e.name,onCancel:()=>Ue(null),onConfirm:async()=>{const R=[...g.projects];R.splice(_e.index,1),await _o(_e.name);const ne={...g,projects:R};v(ne),await kn(ne),Ue(null)}})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:tt,className:"text-white hover:text-gray-300",children:l.jsx("i",{className:"fa-solid fa-house"})}),l.jsxs("h1",{className:"text-lg font-bold",children:[l.jsx("i",{className:"fa-solid fa-person-circle-question mr-2"}),""]})]}),l.jsxs("button",{onClick:()=>j(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),l.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[l.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[l.jsx("span",{className:i>=1?"text-purple-600":"",children:""}),l.jsx("span",{className:i>=2?"text-purple-600":"",children:""}),l.jsx("span",{className:i>=3?"text-purple-600":"",children:""})]}),l.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:l.jsx("div",{className:"bg-purple-600 h-full transition-all duration-300",style:{width:`${i*33.3}%`}})})]}),l.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg max-w-3xl min-h-[60vh]",children:[i===1&&Tt(),i===2&&Ee(),i===3&&J()]}),l.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-md z-20",children:[l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>c(R=>Math.max(1,R-1)),disabled:i===1,className:`px-4 py-3 rounded-lg font-bold ${i===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""})}),i<3?l.jsxs("button",{onClick:pe,className:"px-8 py-3 bg-purple-600 text-white rounded-lg font-bold shadow hover:bg-purple-700 flex items-center",children:[" ",l.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("button",{onClick:oe,className:"px-8 py-3 bg-red-600 text-white rounded-lg font-bold shadow hover:bg-red-700 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-save mr-2"})," "]}),l.jsxs("button",{onClick:Te,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[l.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]})]}),l.jsx(dT,{isOpen:Se,onOk:()=>{Me(!1),s()}}),T&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>I(null),children:[l.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:l.jsx("img",{src:T,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),l.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[l.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),z&&Ve(),l.jsx(N0,{isOpen:te.isOpen,message:te.message,onLeftButtonClick:te.onLeftButtonClick,onRightButtonClick:te.onRightButtonClick,leftButtonLabel:te.leftButtonLabel,rightButtonLabel:te.rightButtonLabel,leftButtonClass:te.leftButtonClass,rightButtonClass:te.rightButtonClass}),l.jsx("div",{className:"hidden print:block",children:l.jsx(_0,{data:u})})]})},pT=({isOpen:r,projectName:t,onConfirm:s,onCancel:i})=>{const[c,u]=W.useState("");return r?l.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 border-2 border-red-500",children:[l.jsx("h3",{className:"text-lg font-bold mb-4 text-red-600",children:" "}),l.jsxs("p",{className:"mb-4 text-sm text-gray-700",children:["",t,"",l.jsx("br",{}),""]}),l.jsx("p",{className:"mb-2 text-sm font-bold",children:"PASS (4043)"}),l.jsx("input",{type:"password",className:"w-full border p-2 rounded mb-4",value:c,onChange:m=>u(m.target.value)}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-200 rounded",children:""}),l.jsx("button",{onClick:()=>{c==="4043"?s():alert("PASS")},className:"px-4 py-2 bg-red-600 text-white rounded font-bold",children:""})]})]})}):null},yT=({isOpen:r,message:t,onConfirm:s,onCancel:i})=>r?l.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),l.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),l.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,xT=({isOpen:r,onClose:t,url:s})=>r?l.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 max-w-md w-full flex flex-col items-center animate-fade-in",onClick:i=>i.stopPropagation(),children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:" "}),l.jsxs("p",{className:"text-sm text-gray-500 mb-6 text-center",children:["",l.jsx("br",{}),""]}),l.jsx("div",{className:"p-4 border-4 border-gray-200 rounded-lg bg-white mb-6",children:l.jsx(k0,{value:s,size:250,level:"H",includeMargin:!0})}),l.jsx("p",{className:"text-xs text-gray-400 break-all text-center mb-6",children:s}),l.jsx("button",{onClick:t,className:"w-full py-3 bg-gray-600 text-white rounded-lg font-bold hover:bg-gray-700",children:""})]})}):null,bT=()=>{const[r,t]=W.useState("HOME"),[s,i]=W.useState(!1),[c,u]=W.useState(null),[m,x]=W.useState([]),[p,g]=W.useState(null),[v,N]=W.useState(!1),[j,z]=W.useState(!1),[L,Z]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[P,ge]=W.useState(void 0),[ce,te]=W.useState(null);W.useEffect(()=>{new URLSearchParams(window.location.search).get("form")==="newcomer"&&(ge(void 0),te(null),t("NEWCOMER_SURVEY"))},[]),W.useEffect(()=>{s&&((async()=>{N(!0);try{const T=await Vf();x(T)}catch(T){console.error("Failed to load drafts",T),alert("")}finally{N(!1)}})(),g(null))},[s]);const he=V=>{u(V),i(!0)},Se=()=>{c&&(ge(void 0),te(null),t(c),i(!1))},Me=V=>{ge(V.data),te(V.id),t(V.type),i(!1)},D=V=>{Z({isOpen:!0,message:"",onConfirm:async()=>{try{await Yj(V);const T=await Vf();x(T),p&&c&&T.filter(S=>S.type===c&&(S.data.project||"")===p).length===0&&g(null),Z(I=>({...I,isOpen:!1}))}catch(T){console.error("Failed to delete draft",T),alert("")}}})};if(r==="SAFETY_TRAINING")return l.jsx(eT,{initialData:P,initialDraftId:ce,onBackToMenu:()=>t("HOME")});if(r==="DISASTER_COUNCIL")return l.jsx(aT,{initialData:P,initialDraftId:ce,onBackToMenu:()=>t("HOME")});if(r==="SAFETY_PLAN")return l.jsx(cT,{initialData:P,initialDraftId:ce,onBackToMenu:()=>t("HOME")});if(r==="NEWCOMER_SURVEY")return l.jsx(gT,{initialData:P,initialDraftId:ce,onBackToMenu:()=>t("HOME")});const A=()=>{if(!s||!c)return null;const T=m.filter(I=>I.type===c).reduce((I,S)=>{const ve=S.data.project||"";return I[ve]||(I[ve]=[]),I[ve].push(S),I},{});return l.jsx("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-gray-800 text-white p-4 flex justify-between items-center shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[p&&l.jsx("button",{onClick:()=>g(null),className:"mr-1 text-gray-300 hover:text-white",children:l.jsx("i",{className:"fa-solid fa-arrow-left"})}),l.jsx("h3",{className:"font-bold text-lg",children:p?"":""})]}),l.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white",children:l.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:v?l.jsxs("div",{className:"flex justify-center items-center py-10",children:[l.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"}),l.jsx("span",{className:"ml-3 text-gray-500",children:"..."})]}):p?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-gray-50 p-3 rounded border text-sm text-gray-600 mb-4",children:[l.jsx("i",{className:"fa-solid fa-building mr-2"}),p]}),l.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-2 uppercase tracking-wide",children:""}),l.jsx("div",{className:"space-y-3",children:T[p].map(I=>l.jsxs("div",{className:"border rounded-lg p-3 hover:bg-blue-50 transition-colors flex justify-between items-center group bg-white shadow-sm",children:[l.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>Me(I),children:[l.jsxs("div",{className:"font-bold text-blue-800 text-lg",children:[l.jsx("i",{className:"fa-regular fa-calendar-check mr-2"}),I.type==="SAFETY_TRAINING"?`${I.data.month}`:I.type==="DISASTER_COUNCIL"?`${I.data.count}`:I.type==="NEWCOMER_SURVEY"?I.data.name||"":`${I.data.month} `]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1 pl-7",children:[": ",new Date(I.lastModified).toLocaleString("ja-JP")]})]}),l.jsx("button",{onClick:S=>{S.stopPropagation(),D(I.id)},className:"ml-3 p-3 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-50 transition-colors",title:"",children:l.jsx("i",{className:"fa-solid fa-trash"})})]},I.id))})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-8 space-y-3",children:[l.jsxs("button",{onClick:Se,className:"w-full py-4 bg-blue-600 text-white rounded-lg font-bold shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition-transform transform hover:scale-[1.01]",children:[l.jsx("i",{className:"fa-solid fa-file-circle-plus text-xl"}),""]}),c==="NEWCOMER_SURVEY"&&l.jsxs("button",{onClick:()=>z(!0),className:"w-full py-4 bg-purple-600 text-white rounded-lg font-bold shadow-md hover:bg-purple-700 flex items-center justify-center gap-2 transition-transform transform hover:scale-[1.01]",children:[l.jsx("i",{className:"fa-solid fa-qrcode text-xl"}),"QR"]})]}),l.jsxs("div",{className:"border-t pt-4",children:[l.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-3 uppercase tracking-wide",children:""}),Object.keys(T).length===0?l.jsx("div",{className:"text-center py-8 text-gray-400 bg-gray-50 rounded-lg",children:""}):l.jsx("div",{className:"space-y-3",children:Object.entries(T).map(([I,S])=>l.jsxs("button",{onClick:()=>g(I),className:"w-full text-left border rounded-lg p-4 hover:bg-blue-50 transition-colors flex justify-between items-center group shadow-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-800 text-sm mb-1",children:I}),l.jsxs("div",{className:"text-xs text-gray-500",children:[l.jsx("i",{className:"fa-regular fa-folder-open mr-1"}),S.length," "]})]}),l.jsx("i",{className:"fa-solid fa-chevron-right text-gray-300 group-hover:text-blue-400"})]},I))})]})]})})]})})},M=`${window.location.protocol}//${window.location.host}${window.location.pathname}?form=newcomer`;return l.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-gray-800",children:[l.jsxs("header",{className:"bg-slate-800 text-white p-6 shadow-md text-center",children:[l.jsxs("h1",{className:"text-2xl font-bold tracking-wide",children:[l.jsx("i",{className:"fa-solid fa-building-shield mr-2"}),""]}),l.jsx("p",{className:"text-slate-400 text-sm mt-2",children:""})]}),l.jsxs("main",{className:"max-w-4xl mx-auto p-6 mt-8",children:[l.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-700 border-l-4 border-slate-800 pl-3",children:""}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("button",{onClick:()=>he("SAFETY_TRAINING"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-blue-600 group",children:[l.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-helmet-safety text-4xl text-blue-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),l.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),l.jsxs("button",{onClick:()=>he("DISASTER_COUNCIL"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-green-600 group",children:[l.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-green-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-users-rectangle text-4xl text-green-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),l.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),l.jsxs("button",{onClick:()=>he("SAFETY_PLAN"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-orange-500 group",children:[l.jsx("div",{className:"w-20 h-20 bg-orange-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-orange-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-clipboard-list text-4xl text-orange-500"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),l.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),l.jsxs("button",{onClick:()=>he("NEWCOMER_SURVEY"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-purple-600 group",children:[l.jsx("div",{className:"w-20 h-20 bg-purple-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-100 transition-colors",children:l.jsx("i",{className:"fa-solid fa-person-circle-question text-4xl text-purple-600"})}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),l.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]})]})]}),l.jsxs("footer",{className:"mt-12 text-center text-gray-400 text-sm pb-8",children:[l.jsx("div",{children:" 2026 Matsuura Construction App"}),l.jsx("div",{className:"mt-1",children:"Ver.1.2.1"})]}),A(),l.jsx(yT,{isOpen:L.isOpen,message:L.message,onConfirm:L.onConfirm,onCancel:()=>Z(V=>({...V,isOpen:!1}))}),l.jsx(xT,{isOpen:j,onClose:()=>z(!1),url:M})]})},Vv=document.getElementById("root");if(!Vv)throw new Error("Could not find root element to mount to");const vT=N1.createRoot(Vv);vT.render(l.jsx(Dt.StrictMode,{children:l.jsx(bT,{})}));
