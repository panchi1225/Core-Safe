(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(c){if(c.ep)return;c.ep=!0;const h=s(c);fetch(c.href,h)}})();function Cu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Yd={exports:{}},Kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function o1(){if(Yy)return Kl;Yy=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(r,c,h){var f=null;if(h!==void 0&&(f=""+h),c.key!==void 0&&(f=""+c.key),"key"in c){h={};for(var p in c)p!=="key"&&(h[p]=c[p])}else h=c;return c=h.ref,{$$typeof:i,type:r,key:f,ref:c!==void 0?c:null,props:h}}return Kl.Fragment=t,Kl.jsx=s,Kl.jsxs=s,Kl}var Qy;function c1(){return Qy||(Qy=1,Yd.exports=o1()),Yd.exports}var o=c1(),Qd={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function u1(){if(Ky)return ke;Ky=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),C=Symbol.iterator;function L(V){return V===null||typeof V!="object"?null:(V=C&&V[C]||V["@@iterator"],typeof V=="function"?V:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,G={};function ie(V,$,oe){this.props=V,this.context=$,this.refs=G,this.updater=oe||X}ie.prototype.isReactComponent={},ie.prototype.setState=function(V,$){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,$,"setState")},ie.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function le(){}le.prototype=ie.prototype;function he(V,$,oe){this.props=V,this.context=$,this.refs=G,this.updater=oe||X}var ge=he.prototype=new le;ge.constructor=he,ee(ge,ie.prototype),ge.isPureReactComponent=!0;var Me=Array.isArray;function De(){}var R={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function S(V,$,oe){var fe=oe.ref;return{$$typeof:i,type:V,key:$,ref:fe!==void 0?fe:null,props:oe}}function O(V,$){return S(V.type,$,V.props)}function A(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function k(V){var $={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(oe){return $[oe]})}var w=/\/+/g;function Te(V,$){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):$.toString(36)}function Ce(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(De,De):(V.status="pending",V.then(function($){V.status==="pending"&&(V.status="fulfilled",V.value=$)},function($){V.status==="pending"&&(V.status="rejected",V.reason=$)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function F(V,$,oe,fe,re){var ve=typeof V;(ve==="undefined"||ve==="boolean")&&(V=null);var M=!1;if(V===null)M=!0;else switch(ve){case"bigint":case"string":case"number":M=!0;break;case"object":switch(V.$$typeof){case i:case t:M=!0;break;case _:return M=V._init,F(M(V._payload),$,oe,fe,re)}}if(M)return re=re(V),M=fe===""?"."+Te(V,0):fe,Me(re)?(oe="",M!=null&&(oe=M.replace(w,"$&/")+"/"),F(re,$,oe,"",function(at){return at})):re!=null&&(A(re)&&(re=O(re,oe+(re.key==null||V&&V.key===re.key?"":(""+re.key).replace(w,"$&/")+"/")+M)),$.push(re)),1;M=0;var _e=fe===""?".":fe+":";if(Me(V))for(var Se=0;Se<V.length;Se++)fe=V[Se],ve=_e+Te(fe,Se),M+=F(fe,$,oe,ve,re);else if(Se=L(V),typeof Se=="function")for(V=Se.call(V),Se=0;!(fe=V.next()).done;)fe=fe.value,ve=_e+Te(fe,Se++),M+=F(fe,$,oe,ve,re);else if(ve==="object"){if(typeof V.then=="function")return F(Ce(V),$,oe,fe,re);throw $=String(V),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return M}function K(V,$,oe){if(V==null)return V;var fe=[],re=0;return F(V,fe,"","",function(ve){return $.call(oe,ve,re++)}),fe}function de(V){if(V._status===-1){var $=V._result;$=$(),$.then(function(oe){(V._status===0||V._status===-1)&&(V._status=1,V._result=oe)},function(oe){(V._status===0||V._status===-1)&&(V._status=2,V._result=oe)}),V._status===-1&&(V._status=0,V._result=$)}if(V._status===1)return V._result.default;throw V._result}var je=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Pe={map:K,forEach:function(V,$,oe){K(V,function(){$.apply(this,arguments)},oe)},count:function(V){var $=0;return K(V,function(){$++}),$},toArray:function(V){return K(V,function($){return $})||[]},only:function(V){if(!A(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return ke.Activity=T,ke.Children=Pe,ke.Component=ie,ke.Fragment=s,ke.Profiler=c,ke.PureComponent=he,ke.StrictMode=r,ke.Suspense=x,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ke.__COMPILER_RUNTIME={__proto__:null,c:function(V){return R.H.useMemoCache(V)}},ke.cache=function(V){return function(){return V.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(V,$,oe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var fe=ee({},V.props),re=V.key;if($!=null)for(ve in $.key!==void 0&&(re=""+$.key),$)!j.call($,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&$.ref===void 0||(fe[ve]=$[ve]);var ve=arguments.length-2;if(ve===1)fe.children=oe;else if(1<ve){for(var M=Array(ve),_e=0;_e<ve;_e++)M[_e]=arguments[_e+2];fe.children=M}return S(V.type,re,fe)},ke.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:h,_context:V},V},ke.createElement=function(V,$,oe){var fe,re={},ve=null;if($!=null)for(fe in $.key!==void 0&&(ve=""+$.key),$)j.call($,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(re[fe]=$[fe]);var M=arguments.length-2;if(M===1)re.children=oe;else if(1<M){for(var _e=Array(M),Se=0;Se<M;Se++)_e[Se]=arguments[Se+2];re.children=_e}if(V&&V.defaultProps)for(fe in M=V.defaultProps,M)re[fe]===void 0&&(re[fe]=M[fe]);return S(V,ve,re)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(V){return{$$typeof:p,render:V}},ke.isValidElement=A,ke.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:de}},ke.memo=function(V,$){return{$$typeof:y,type:V,compare:$===void 0?null:$}},ke.startTransition=function(V){var $=R.T,oe={};R.T=oe;try{var fe=V(),re=R.S;re!==null&&re(oe,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(De,je)}catch(ve){je(ve)}finally{$!==null&&oe.types!==null&&($.types=oe.types),R.T=$}},ke.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ke.use=function(V){return R.H.use(V)},ke.useActionState=function(V,$,oe){return R.H.useActionState(V,$,oe)},ke.useCallback=function(V,$){return R.H.useCallback(V,$)},ke.useContext=function(V){return R.H.useContext(V)},ke.useDebugValue=function(){},ke.useDeferredValue=function(V,$){return R.H.useDeferredValue(V,$)},ke.useEffect=function(V,$){return R.H.useEffect(V,$)},ke.useEffectEvent=function(V){return R.H.useEffectEvent(V)},ke.useId=function(){return R.H.useId()},ke.useImperativeHandle=function(V,$,oe){return R.H.useImperativeHandle(V,$,oe)},ke.useInsertionEffect=function(V,$){return R.H.useInsertionEffect(V,$)},ke.useLayoutEffect=function(V,$){return R.H.useLayoutEffect(V,$)},ke.useMemo=function(V,$){return R.H.useMemo(V,$)},ke.useOptimistic=function(V,$){return R.H.useOptimistic(V,$)},ke.useReducer=function(V,$,oe){return R.H.useReducer(V,$,oe)},ke.useRef=function(V){return R.H.useRef(V)},ke.useState=function(V){return R.H.useState(V)},ke.useSyncExternalStore=function(V,$,oe){return R.H.useSyncExternalStore(V,$,oe)},ke.useTransition=function(){return R.H.useTransition()},ke.version="19.2.4",ke}var Xy;function Lf(){return Xy||(Xy=1,Qd.exports=u1()),Qd.exports}var W=Lf();const Pf=Cu(W);var Kd={exports:{}},Xl={},Xd={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function h1(){return Zy||(Zy=1,(function(i){function t(F,K){var de=F.length;F.push(K);e:for(;0<de;){var je=de-1>>>1,Pe=F[je];if(0<c(Pe,K))F[je]=K,F[de]=Pe,de=je;else break e}}function s(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var K=F[0],de=F.pop();if(de!==K){F[0]=de;e:for(var je=0,Pe=F.length,V=Pe>>>1;je<V;){var $=2*(je+1)-1,oe=F[$],fe=$+1,re=F[fe];if(0>c(oe,de))fe<Pe&&0>c(re,oe)?(F[je]=re,F[fe]=de,je=fe):(F[je]=oe,F[$]=de,je=$);else if(fe<Pe&&0>c(re,de))F[je]=re,F[fe]=de,je=fe;else break e}}return K}function c(F,K){var de=F.sortIndex-K.sortIndex;return de!==0?de:F.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;i.unstable_now=function(){return h.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var x=[],y=[],_=1,T=null,C=3,L=!1,X=!1,ee=!1,G=!1,ie=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function ge(F){for(var K=s(y);K!==null;){if(K.callback===null)r(y);else if(K.startTime<=F)r(y),K.sortIndex=K.expirationTime,t(x,K);else break;K=s(y)}}function Me(F){if(ee=!1,ge(F),!X)if(s(x)!==null)X=!0,De||(De=!0,k());else{var K=s(y);K!==null&&Ce(Me,K.startTime-F)}}var De=!1,R=-1,j=5,S=-1;function O(){return G?!0:!(i.unstable_now()-S<j)}function A(){if(G=!1,De){var F=i.unstable_now();S=F;var K=!0;try{e:{X=!1,ee&&(ee=!1,le(R),R=-1),L=!0;var de=C;try{t:{for(ge(F),T=s(x);T!==null&&!(T.expirationTime>F&&O());){var je=T.callback;if(typeof je=="function"){T.callback=null,C=T.priorityLevel;var Pe=je(T.expirationTime<=F);if(F=i.unstable_now(),typeof Pe=="function"){T.callback=Pe,ge(F),K=!0;break t}T===s(x)&&r(x),ge(F)}else r(x);T=s(x)}if(T!==null)K=!0;else{var V=s(y);V!==null&&Ce(Me,V.startTime-F),K=!1}}break e}finally{T=null,C=de,L=!1}K=void 0}}finally{K?k():De=!1}}}var k;if(typeof he=="function")k=function(){he(A)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Te=w.port2;w.port1.onmessage=A,k=function(){Te.postMessage(null)}}else k=function(){ie(A,0)};function Ce(F,K){R=ie(function(){F(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_next=function(F){switch(C){case 1:case 2:case 3:var K=3;break;default:K=C}var de=C;C=K;try{return F()}finally{C=de}},i.unstable_requestPaint=function(){G=!0},i.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var de=C;C=F;try{return K()}finally{C=de}},i.unstable_scheduleCallback=function(F,K,de){var je=i.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?je+de:je):de=je,F){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=de+Pe,F={id:_++,callback:K,priorityLevel:F,startTime:de,expirationTime:Pe,sortIndex:-1},de>je?(F.sortIndex=de,t(y,F),s(x)===null&&F===s(y)&&(ee?(le(R),R=-1):ee=!0,Ce(Me,de-je))):(F.sortIndex=Pe,t(x,F),X||L||(X=!0,De||(De=!0,k()))),F},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(F){var K=C;return function(){var de=C;C=K;try{return F.apply(this,arguments)}finally{C=de}}}})(Zd)),Zd}var Jy;function d1(){return Jy||(Jy=1,Xd.exports=h1()),Xd.exports}var Jd={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function f1(){if(Wy)return ln;Wy=1;var i=Lf();function t(x){var y="https://react.dev/errors/"+x;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+x+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(x,y,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:T==null?null:""+T,children:x,containerInfo:y,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(x,y){if(x==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ln.createPortal=function(x,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return h(x,y,null,_)},ln.flushSync=function(x){var y=f.T,_=r.p;try{if(f.T=null,r.p=2,x)return x()}finally{f.T=y,r.p=_,r.d.f()}},ln.preconnect=function(x,y){typeof x=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(x,y))},ln.prefetchDNS=function(x){typeof x=="string"&&r.d.D(x)},ln.preinit=function(x,y){if(typeof x=="string"&&y&&typeof y.as=="string"){var _=y.as,T=p(_,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?r.d.S(x,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:C,fetchPriority:L}):_==="script"&&r.d.X(x,{crossOrigin:T,integrity:C,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},ln.preinitModule=function(x,y){if(typeof x=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=p(y.as,y.crossOrigin);r.d.M(x,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(x)},ln.preload=function(x,y){if(typeof x=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,T=p(_,y.crossOrigin);r.d.L(x,_,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},ln.preloadModule=function(x,y){if(typeof x=="string")if(y){var _=p(y.as,y.crossOrigin);r.d.m(x,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(x)},ln.requestFormReset=function(x){r.d.r(x)},ln.unstable_batchedUpdates=function(x,y){return x(y)},ln.useFormState=function(x,y,_){return f.H.useFormState(x,y,_)},ln.useFormStatus=function(){return f.H.useHostTransitionStatus()},ln.version="19.2.4",ln}var ex;function m1(){if(ex)return Jd.exports;ex=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Jd.exports=f1(),Jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function g1(){if(tx)return Xl;tx=1;var i=d1(),t=Lf(),s=m1();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function x(e){if(h(e)!==e)throw Error(r(188))}function y(e){var n=e.alternate;if(!n){if(n=h(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,l=n;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return x(d),e;if(m===l)return x(d),n;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=m;else{for(var v=!1,N=d.child;N;){if(N===a){v=!0,a=d,l=m;break}if(N===l){v=!0,l=d,a=m;break}N=N.sibling}if(!v){for(N=m.child;N;){if(N===a){v=!0,a=m,l=d;break}if(N===l){v=!0,l=m,a=d;break}N=N.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function _(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=_(e),n!==null)return n;e=e.sibling}return null}var T=Object.assign,C=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),he=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=A&&e[A]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function Te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ee:return"Fragment";case ie:return"Profiler";case G:return"StrictMode";case Me:return"Suspense";case De:return"SuspenseList";case S:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case X:return"Portal";case he:return e.displayName||"Context";case le:return(e._context.displayName||"Context")+".Consumer";case ge:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return n=e.displayName||null,n!==null?n:Te(e.type)||"Memo";case j:n=e._payload,e=e._init;try{return Te(e(n))}catch{}}return null}var Ce=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},je=[],Pe=-1;function V(e){return{current:e}}function $(e){0>Pe||(e.current=je[Pe],je[Pe]=null,Pe--)}function oe(e,n){Pe++,je[Pe]=e.current,e.current=n}var fe=V(null),re=V(null),ve=V(null),M=V(null);function _e(e,n){switch(oe(ve,n),oe(re,e),oe(fe,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?py(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=py(n),e=yy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(fe),oe(fe,e)}function Se(){$(fe),$(re),$(ve)}function at(e){e.memoizedState!==null&&oe(M,e);var n=fe.current,a=yy(n,e.type);n!==a&&(oe(re,e),oe(fe,a))}function be(e){re.current===e&&($(fe),$(re)),M.current===e&&($(M),Fl._currentValue=de)}var Z,we;function Ve(e){if(Z===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Z=n&&n[1]||"",we=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Z+e+we}var Je=!1;function Ft(e,n){if(!e||Je)return"";Je=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Q){var H=Q}Reflect.construct(e,[],se)}else{try{se.call()}catch(Q){H=Q}e.call(se.prototype)}}else{try{throw Error()}catch(Q){H=Q}(se=e())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Q){if(Q&&H&&typeof Q.stack=="string")return[Q.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],N=m[1];if(v&&N){var I=v.split(`
`),q=N.split(`
`);for(d=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(l===I.length||d===q.length)for(l=I.length-1,d=q.length-1;1<=l&&0<=d&&I[l]!==q[d];)d--;for(;1<=l&&0<=d;l--,d--)if(I[l]!==q[d]){if(l!==1||d!==1)do if(l--,d--,0>d||I[l]!==q[d]){var J=`
`+I[l].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=l&&0<=d);break}}}finally{Je=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ve(a):""}function Xt(e,n){switch(e.tag){case 26:case 27:case 5:return Ve(e.type);case 16:return Ve("Lazy");case 13:return e.child!==n&&n!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return Ft(e.type,!1);case 11:return Ft(e.type.render,!1);case 1:return Ft(e.type,!0);case 31:return Ve("Activity");default:return""}}function fn(e){try{var n="",a=null;do n+=Xt(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ot=Object.prototype.hasOwnProperty,D=i.unstable_scheduleCallback,ce=i.unstable_cancelCallback,Ae=i.unstable_shouldYield,Ge=i.unstable_requestPaint,qt=i.unstable_now,er=i.unstable_getCurrentPriorityLevel,Qi=i.unstable_ImmediatePriority,Ki=i.unstable_UserBlockingPriority,la=i.unstable_NormalPriority,Xu=i.unstable_LowPriority,jo=i.unstable_IdlePriority,So=i.log,Ao=i.unstable_setDisableYieldValue,Kn=null,Zt=null;function Vn(e){if(typeof So=="function"&&Ao(e),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(Kn,e)}catch{}}var Tt=Math.clz32?Math.clz32:Ro,Co=Math.log,Pr=Math.LN2;function Ro(e){return e>>>=0,e===0?32:31-(Co(e)/Pr|0)|0}var us=256,tr=262144,Rt=4194304;function hs(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ds(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var d=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var N=l&134217727;return N!==0?(l=N&~m,l!==0?d=hs(l):(v&=N,v!==0?d=hs(v):a||(a=N&~e,a!==0&&(d=hs(a))))):(N=l&~m,N!==0?d=hs(N):v!==0?d=hs(v):a||(a=l&~e,a!==0&&(d=hs(a)))),d===0?0:n!==0&&n!==d&&(n&m)===0&&(m=d&-d,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:d}function Xn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Zu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Do(){var e=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),e}function fs(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function nr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ju(e,n,a,l,d,m){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var N=e.entanglements,I=e.expirationTimes,q=e.hiddenUpdates;for(a=v&~a;0<a;){var J=31-Tt(a),se=1<<J;N[J]=0,I[J]=-1;var H=q[J];if(H!==null)for(q[J]=null,J=0;J<H.length;J++){var Q=H[J];Q!==null&&(Q.lane&=-536870913)}a&=~se}l!==0&&sr(e,l,0),m!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~n))}function sr(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-Tt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Xi(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-Tt(a),d=1<<l;d&n|e[l]&n&&(e[l]|=n),a&=~d}}function Zi(e,n){var a=n&-n;return a=(a&42)!==0?1:ar(a),(a&(e.suspendedLanes|n))!==0?0:a}function ar(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Us(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Io(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:Py(e.type))}function Zn(e,n){var a=K.p;try{return K.p=e,n()}finally{K.p=a}}var Jn=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Jn,$t="__reactProps$"+Jn,ms="__reactContainer$"+Jn,Br="__reactEvents$"+Jn,Wu="__reactListeners$"+Jn,Mo="__reactHandles$"+Jn,Oo="__reactResources$"+Jn,gs="__reactMarker$"+Jn;function qr(e){delete e[Dt],delete e[$t],delete e[Br],delete e[Wu],delete e[Mo]}function ps(e){var n=e[Dt];if(n)return n;for(var a=e.parentNode;a;){if(n=a[ms]||a[Dt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=wy(e);e!==null;){if(a=e[Dt])return a;e=wy(e)}return n}e=a,a=e.parentNode}return null}function kn(e){if(e=e[Dt]||e[ms]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function wn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function ys(e){var n=e[Oo];return n||(n=e[Oo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function It(e){e[gs]=!0}var Ji=new Set,Wi={};function xs(e,n){vs(e,n),vs(e+"Capture",n)}function vs(e,n){for(Wi[e]=n,e=0;e<n.length;e++)Ji.add(n[e])}var el=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tl={},nl={};function Vo(e){return ot.call(nl,e)?!0:ot.call(tl,e)?!1:el.test(e)?nl[e]=!0:(tl[e]=!0,!1)}function Hr(e,n,a){if(Vo(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Tn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Mt(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function Yt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oa(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function sl(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,m=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function rt(e){if(!e._valueTracker){var n=oa(e)?"checked":"value";e._valueTracker=sl(e,n,""+e[n])}}function rr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=oa(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function bs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ir=/[\n"\\]/g;function mn(e){return e.replace(ir,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Gr(e,n,a,l,d,m,v,N){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Yt(n)):e.value!==""+Yt(n)&&(e.value=""+Yt(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?al(e,v,Yt(n)):a!=null?al(e,v,Yt(a)):l!=null&&e.removeAttribute("value"),d==null&&m!=null&&(e.defaultChecked=!!m),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+Yt(N):e.removeAttribute("name")}function ko(e,n,a,l,d,m,v,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){rt(e);return}a=a!=null?""+Yt(a):"",n=n!=null?""+Yt(n):a,N||n===e.value||(e.value=n),e.defaultValue=n}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=N?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),rt(e)}function al(e,n,a){n==="number"&&bs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ca(e,n,a,l){if(e=e.options,n){n={};for(var d=0;d<a.length;d++)n["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=n.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Yt(a),n=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function zo(e,n,a){if(n!=null&&(n=""+Yt(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Yt(a):""}function ua(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ce(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Yt(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),rt(e)}function gn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Uo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rl(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||Uo.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function il(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in n)l=n[d],n.hasOwnProperty(d)&&a[d]!==l&&rl(e,d,l)}else for(var m in n)n.hasOwnProperty(m)&&rl(e,m,n[m])}function Fr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ha=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(e){return ha.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Wn(){}var ll=null;function zn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var da=null,_s=null;function lr(e){var n=kn(e);if(n&&(e=n.stateNode)){var a=e[$t]||null;e:switch(e=n.stateNode,n.type){case"input":if(Gr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+mn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var d=l[$t]||null;if(!d)throw Error(r(90));Gr(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&rr(l)}break e;case"textarea":zo(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&ca(e,!!a.multiple,n,!1)}}}var Yr=!1;function fa(e,n,a){if(Yr)return e(n,a);Yr=!0;try{var l=e(n);return l}finally{if(Yr=!1,(da!==null||_s!==null)&&(Ic(),da&&(n=da,e=_s,_s=da=null,lr(n),e)))for(n=0;n<e.length;n++)lr(e[n])}}function es(e,n){var a=e.stateNode;if(a===null)return null;var l=a[$t]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),or=!1;if(Un)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){or=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{or=!1}var Ns=null,ol=null,cr=null;function cl(){if(cr)return cr;var e,n=ol,a=n.length,l,d="value"in Ns?Ns.value:Ns.textContent,m=d.length;for(e=0;e<a&&n[e]===d[e];e++);var v=a-e;for(l=1;l<=v&&n[a-l]===d[m-l];l++);return cr=d.slice(e,1<l?1-l:void 0)}function ur(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ls(){return!0}function ts(){return!1}function Jt(e){function n(a,l,d,m,v){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(a=e[N],this[N]=a?a(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ls:ts,this.isPropagationStopped=ts,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),n}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Es=Jt(Ps),ma=T({},Ps,{view:0,detail:0}),ul=Jt(ma),ga,Qr,ws,Kr=T({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ws&&(ws&&e.type==="mousemove"?(ga=e.screenX-ws.screenX,Qr=e.screenY-ws.screenY):Qr=ga=0,ws=e),ga)},movementY:function(e){return"movementY"in e?e.movementY:Qr}}),hl=Jt(Kr),hr=T({},Kr,{dataTransfer:0}),Po=Jt(hr),Bo=T({},ma,{relatedTarget:0}),dr=Jt(Bo),dl=T({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),qo=Jt(dl),Xr=T({},Ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ho=Jt(Xr),Go=T({},Ps,{data:0}),Ts=Jt(Go),Fo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Yo[e])?!!n[e]:!1}function pa(){return Qo}var hn=T({},ma,{key:function(e){if(e.key){var n=Fo[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ur(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$o[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pa,charCode:function(e){return e.type==="keypress"?ur(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ur(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ko=Jt(hn),Xo=T({},Kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bs=Jt(Xo),u=T({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pa}),g=Jt(u),b=T({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),E=Jt(b),P=T({},Kr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Jt(P),ue=T({},Ps,{newState:0,oldState:0}),Ue=Jt(ue),jt=[9,13,27,32],tt=Un&&"CompositionEvent"in window,vt=null;Un&&"documentMode"in document&&(vt=document.documentMode);var Ln=Un&&"TextEvent"in window&&!vt,js=Un&&(!tt||vt&&8<vt&&11>=vt),ns=" ",ss=!1;function fr(e,n){switch(e){case"keyup":return jt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jr=!1;function Ib(e,n){switch(e){case"compositionend":return Zr(n);case"keypress":return n.which!==32?null:(ss=!0,ns);case"textInput":return e=n.data,e===ns&&ss?null:e;default:return null}}function Mb(e,n){if(Jr)return e==="compositionend"||!tt&&fr(e,n)?(e=cl(),cr=ol=Ns=null,Jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return js&&n.locale!=="ko"?null:n.data;default:return null}}var Ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Ob[e.type]:n==="textarea"}function Am(e,n,a,l){da?_s?_s.push(l):_s=[l]:da=l,n=Lc(n,"onChange"),0<n.length&&(a=new Es("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var fl=null,ml=null;function Vb(e){uy(e,0)}function Zo(e){var n=wn(e);if(rr(n))return e}function Cm(e,n){if(e==="change")return n}var Rm=!1;if(Un){var eh;if(Un){var th="oninput"in document;if(!th){var Dm=document.createElement("div");Dm.setAttribute("oninput","return;"),th=typeof Dm.oninput=="function"}eh=th}else eh=!1;Rm=eh&&(!document.documentMode||9<document.documentMode)}function Im(){fl&&(fl.detachEvent("onpropertychange",Mm),ml=fl=null)}function Mm(e){if(e.propertyName==="value"&&Zo(ml)){var n=[];Am(n,ml,e,zn(e)),fa(Vb,n)}}function kb(e,n,a){e==="focusin"?(Im(),fl=n,ml=a,fl.attachEvent("onpropertychange",Mm)):e==="focusout"&&Im()}function zb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zo(ml)}function Ub(e,n){if(e==="click")return Zo(n)}function Lb(e,n){if(e==="input"||e==="change")return Zo(n)}function Pb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var jn=typeof Object.is=="function"?Object.is:Pb;function gl(e,n){if(jn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!ot.call(n,d)||!jn(e[d],n[d]))return!1}return!0}function Om(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vm(e,n){var a=Om(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Om(a)}}function km(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?km(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function zm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=bs(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=bs(e.document)}return n}function nh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Bb=Un&&"documentMode"in document&&11>=document.documentMode,Wr=null,sh=null,pl=null,ah=!1;function Um(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ah||Wr==null||Wr!==bs(l)||(l=Wr,"selectionStart"in l&&nh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),pl&&gl(pl,l)||(pl=l,l=Lc(sh,"onSelect"),0<l.length&&(n=new Es("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Wr)))}function mr(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var ei={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionrun:mr("Transition","TransitionRun"),transitionstart:mr("Transition","TransitionStart"),transitioncancel:mr("Transition","TransitionCancel"),transitionend:mr("Transition","TransitionEnd")},rh={},Lm={};Un&&(Lm=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function gr(e){if(rh[e])return rh[e];if(!ei[e])return e;var n=ei[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Lm)return rh[e]=n[a];return e}var Pm=gr("animationend"),Bm=gr("animationiteration"),qm=gr("animationstart"),qb=gr("transitionrun"),Hb=gr("transitionstart"),Gb=gr("transitioncancel"),Hm=gr("transitionend"),Gm=new Map,ih="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ih.push("scrollEnd");function as(e,n){Gm.set(e,n),xs(n,[e])}var Jo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Pn=[],ti=0,lh=0;function Wo(){for(var e=ti,n=lh=ti=0;n<e;){var a=Pn[n];Pn[n++]=null;var l=Pn[n];Pn[n++]=null;var d=Pn[n];Pn[n++]=null;var m=Pn[n];if(Pn[n++]=null,l!==null&&d!==null){var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}m!==0&&Fm(a,d,m)}}function ec(e,n,a,l){Pn[ti++]=e,Pn[ti++]=n,Pn[ti++]=a,Pn[ti++]=l,lh|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function oh(e,n,a,l){return ec(e,n,a,l),tc(e)}function pr(e,n){return ec(e,null,null,n),tc(e)}function Fm(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=e.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(d=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,d&&n!==null&&(d=31-Tt(a),e=m.hiddenUpdates,l=e[d],l===null?e[d]=[n]:l.push(n),n.lane=a|536870912),m):null}function tc(e){if(50<Ul)throw Ul=0,yd=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ni={};function Fb(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,n,a,l){return new Fb(e,n,a,l)}function ch(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qs(e,n){var a=e.alternate;return a===null?(a=Sn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function $m(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function nc(e,n,a,l,d,m){var v=0;if(l=e,typeof e=="function")ch(e)&&(v=1);else if(typeof e=="string")v=X_(e,a,fe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case S:return e=Sn(31,a,n,d),e.elementType=S,e.lanes=m,e;case ee:return yr(a.children,d,m,n);case G:v=8,d|=24;break;case ie:return e=Sn(12,a,n,d|2),e.elementType=ie,e.lanes=m,e;case Me:return e=Sn(13,a,n,d),e.elementType=Me,e.lanes=m,e;case De:return e=Sn(19,a,n,d),e.elementType=De,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case he:v=10;break e;case le:v=9;break e;case ge:v=11;break e;case R:v=14;break e;case j:v=16,l=null;break e}v=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=Sn(v,a,n,d),n.elementType=e,n.type=l,n.lanes=m,n}function yr(e,n,a,l){return e=Sn(7,e,l,n),e.lanes=a,e}function uh(e,n,a){return e=Sn(6,e,null,n),e.lanes=a,e}function Ym(e){var n=Sn(18,null,null,0);return n.stateNode=e,n}function hh(e,n,a){return n=Sn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Qm=new WeakMap;function Bn(e,n){if(typeof e=="object"&&e!==null){var a=Qm.get(e);return a!==void 0?a:(n={value:e,source:n,stack:fn(n)},Qm.set(e,n),n)}return{value:e,source:n,stack:fn(n)}}var si=[],ai=0,sc=null,yl=0,qn=[],Hn=0,ya=null,Ss=1,As="";function Hs(e,n){si[ai++]=yl,si[ai++]=sc,sc=e,yl=n}function Km(e,n,a){qn[Hn++]=Ss,qn[Hn++]=As,qn[Hn++]=ya,ya=e;var l=Ss;e=As;var d=32-Tt(l)-1;l&=~(1<<d),a+=1;var m=32-Tt(n)+d;if(30<m){var v=d-d%5;m=(l&(1<<v)-1).toString(32),l>>=v,d-=v,Ss=1<<32-Tt(n)+d|a<<d|l,As=m+e}else Ss=1<<m|a<<d|l,As=e}function dh(e){e.return!==null&&(Hs(e,1),Km(e,1,0))}function fh(e){for(;e===sc;)sc=si[--ai],si[ai]=null,yl=si[--ai],si[ai]=null;for(;e===ya;)ya=qn[--Hn],qn[Hn]=null,As=qn[--Hn],qn[Hn]=null,Ss=qn[--Hn],qn[Hn]=null}function Xm(e,n){qn[Hn++]=Ss,qn[Hn++]=As,qn[Hn++]=ya,Ss=n.id,As=n.overflow,ya=e}var Wt=null,yt=null,Ke=!1,xa=null,Gn=!1,mh=Error(r(519));function va(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xl(Bn(n,e)),mh}function Zm(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[Dt]=e,n[$t]=l,a){case"dialog":He("cancel",n),He("close",n);break;case"iframe":case"object":case"embed":He("load",n);break;case"video":case"audio":for(a=0;a<Pl.length;a++)He(Pl[a],n);break;case"source":He("error",n);break;case"img":case"image":case"link":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"input":He("invalid",n),ko(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":He("invalid",n);break;case"textarea":He("invalid",n),ua(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||my(n.textContent,a)?(l.popover!=null&&(He("beforetoggle",n),He("toggle",n)),l.onScroll!=null&&He("scroll",n),l.onScrollEnd!=null&&He("scrollend",n),l.onClick!=null&&(n.onclick=Wn),n=!0):n=!1,n||va(e,!0)}function Jm(e){for(Wt=e.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Wt=Wt.return}}function ri(e){if(e!==Wt)return!1;if(!Ke)return Jm(e),Ke=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Id(e.type,e.memoizedProps)),a=!a),a&&yt&&va(e),Jm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));yt=Ey(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));yt=Ey(e)}else n===27?(n=yt,Ma(e.type)?(e=zd,zd=null,yt=e):yt=n):yt=Wt?$n(e.stateNode.nextSibling):null;return!0}function xr(){yt=Wt=null,Ke=!1}function gh(){var e=xa;return e!==null&&(vn===null?vn=e:vn.push.apply(vn,e),xa=null),e}function xl(e){xa===null?xa=[e]:xa.push(e)}var ph=V(null),vr=null,Gs=null;function ba(e,n,a){oe(ph,n._currentValue),n._currentValue=a}function Fs(e){e._currentValue=ph.current,$(ph)}function yh(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function xh(e,n,a,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var m=d.dependencies;if(m!==null){var v=d.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=d;for(var I=0;I<n.length;I++)if(N.context===n[I]){m.lanes|=a,N=m.alternate,N!==null&&(N.lanes|=a),yh(m.return,a,e),l||(v=null);break e}m=N.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),yh(v,a,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function ii(e,n,a,l){e=null;for(var d=n,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var N=d.type;jn(d.pendingProps.value,v.value)||(e!==null?e.push(N):e=[N])}}else if(d===M.current){if(v=d.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Fl):e=[Fl])}d=d.return}e!==null&&xh(n,e,a,l),n.flags|=262144}function ac(e){for(e=e.firstContext;e!==null;){if(!jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function br(e){vr=e,Gs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function en(e){return Wm(vr,e)}function rc(e,n){return vr===null&&br(e),Wm(e,n)}function Wm(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Gs===null){if(e===null)throw Error(r(308));Gs=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Gs=Gs.next=n;return a}var $b=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Yb=i.unstable_scheduleCallback,Qb=i.unstable_NormalPriority,Ot={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vh(){return{controller:new $b,data:new Map,refCount:0}}function vl(e){e.refCount--,e.refCount===0&&Yb(Qb,function(){e.controller.abort()})}var bl=null,bh=0,li=0,oi=null;function Kb(e,n){if(bl===null){var a=bl=[];bh=0,li=Ed(),oi={status:"pending",value:void 0,then:function(l){a.push(l)}}}return bh++,n.then(eg,eg),n}function eg(){if(--bh===0&&bl!==null){oi!==null&&(oi.status="fulfilled");var e=bl;bl=null,li=0,oi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Xb(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var d=0;d<a.length;d++)(0,a[d])(n)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var tg=F.S;F.S=function(e,n){Up=qt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Kb(e,n),tg!==null&&tg(e,n)};var _r=V(null);function _h(){var e=_r.current;return e!==null?e:ft.pooledCache}function ic(e,n){n===null?oe(_r,_r.current):oe(_r,n.pool)}function ng(){var e=_h();return e===null?null:{parent:Ot._currentValue,pool:e}}var ci=Error(r(460)),Nh=Error(r(474)),lc=Error(r(542)),oc={then:function(){}};function sg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ag(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Wn,Wn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ig(e),e;default:if(typeof n.status=="string")n.then(Wn,Wn);else{if(e=ft,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=l}},function(l){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ig(e),e}throw Er=n,ci}}function Nr(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Er=a,ci):a}}var Er=null;function rg(){if(Er===null)throw Error(r(459));var e=Er;return Er=null,e}function ig(e){if(e===ci||e===lc)throw Error(r(483))}var ui=null,_l=0;function cc(e){var n=_l;return _l+=1,ui===null&&(ui=[]),ag(ui,e,n)}function Nl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function uc(e,n){throw n.$$typeof===C?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function lg(e){function n(U,z){if(e){var B=U.deletions;B===null?(U.deletions=[z],U.flags|=16):B.push(z)}}function a(U,z){if(!e)return null;for(;z!==null;)n(U,z),z=z.sibling;return null}function l(U){for(var z=new Map;U!==null;)U.key!==null?z.set(U.key,U):z.set(U.index,U),U=U.sibling;return z}function d(U,z){return U=qs(U,z),U.index=0,U.sibling=null,U}function m(U,z,B){return U.index=B,e?(B=U.alternate,B!==null?(B=B.index,B<z?(U.flags|=67108866,z):B):(U.flags|=67108866,z)):(U.flags|=1048576,z)}function v(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function N(U,z,B,te){return z===null||z.tag!==6?(z=uh(B,U.mode,te),z.return=U,z):(z=d(z,B),z.return=U,z)}function I(U,z,B,te){var Ne=B.type;return Ne===ee?J(U,z,B.props.children,te,B.key):z!==null&&(z.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===j&&Nr(Ne)===z.type)?(z=d(z,B.props),Nl(z,B),z.return=U,z):(z=nc(B.type,B.key,B.props,null,U.mode,te),Nl(z,B),z.return=U,z)}function q(U,z,B,te){return z===null||z.tag!==4||z.stateNode.containerInfo!==B.containerInfo||z.stateNode.implementation!==B.implementation?(z=hh(B,U.mode,te),z.return=U,z):(z=d(z,B.children||[]),z.return=U,z)}function J(U,z,B,te,Ne){return z===null||z.tag!==7?(z=yr(B,U.mode,te,Ne),z.return=U,z):(z=d(z,B),z.return=U,z)}function se(U,z,B){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=uh(""+z,U.mode,B),z.return=U,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case L:return B=nc(z.type,z.key,z.props,null,U.mode,B),Nl(B,z),B.return=U,B;case X:return z=hh(z,U.mode,B),z.return=U,z;case j:return z=Nr(z),se(U,z,B)}if(Ce(z)||k(z))return z=yr(z,U.mode,B,null),z.return=U,z;if(typeof z.then=="function")return se(U,cc(z),B);if(z.$$typeof===he)return se(U,rc(U,z),B);uc(U,z)}return null}function H(U,z,B,te){var Ne=z!==null?z.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Ne!==null?null:N(U,z,""+B,te);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case L:return B.key===Ne?I(U,z,B,te):null;case X:return B.key===Ne?q(U,z,B,te):null;case j:return B=Nr(B),H(U,z,B,te)}if(Ce(B)||k(B))return Ne!==null?null:J(U,z,B,te,null);if(typeof B.then=="function")return H(U,z,cc(B),te);if(B.$$typeof===he)return H(U,z,rc(U,B),te);uc(U,B)}return null}function Q(U,z,B,te,Ne){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return U=U.get(B)||null,N(z,U,""+te,Ne);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case L:return U=U.get(te.key===null?B:te.key)||null,I(z,U,te,Ne);case X:return U=U.get(te.key===null?B:te.key)||null,q(z,U,te,Ne);case j:return te=Nr(te),Q(U,z,B,te,Ne)}if(Ce(te)||k(te))return U=U.get(B)||null,J(z,U,te,Ne,null);if(typeof te.then=="function")return Q(U,z,B,cc(te),Ne);if(te.$$typeof===he)return Q(U,z,B,rc(z,te),Ne);uc(z,te)}return null}function ye(U,z,B,te){for(var Ne=null,We=null,xe=z,Be=z=0,$e=null;xe!==null&&Be<B.length;Be++){xe.index>Be?($e=xe,xe=null):$e=xe.sibling;var et=H(U,xe,B[Be],te);if(et===null){xe===null&&(xe=$e);break}e&&xe&&et.alternate===null&&n(U,xe),z=m(et,z,Be),We===null?Ne=et:We.sibling=et,We=et,xe=$e}if(Be===B.length)return a(U,xe),Ke&&Hs(U,Be),Ne;if(xe===null){for(;Be<B.length;Be++)xe=se(U,B[Be],te),xe!==null&&(z=m(xe,z,Be),We===null?Ne=xe:We.sibling=xe,We=xe);return Ke&&Hs(U,Be),Ne}for(xe=l(xe);Be<B.length;Be++)$e=Q(xe,U,Be,B[Be],te),$e!==null&&(e&&$e.alternate!==null&&xe.delete($e.key===null?Be:$e.key),z=m($e,z,Be),We===null?Ne=$e:We.sibling=$e,We=$e);return e&&xe.forEach(function(Ua){return n(U,Ua)}),Ke&&Hs(U,Be),Ne}function Re(U,z,B,te){if(B==null)throw Error(r(151));for(var Ne=null,We=null,xe=z,Be=z=0,$e=null,et=B.next();xe!==null&&!et.done;Be++,et=B.next()){xe.index>Be?($e=xe,xe=null):$e=xe.sibling;var Ua=H(U,xe,et.value,te);if(Ua===null){xe===null&&(xe=$e);break}e&&xe&&Ua.alternate===null&&n(U,xe),z=m(Ua,z,Be),We===null?Ne=Ua:We.sibling=Ua,We=Ua,xe=$e}if(et.done)return a(U,xe),Ke&&Hs(U,Be),Ne;if(xe===null){for(;!et.done;Be++,et=B.next())et=se(U,et.value,te),et!==null&&(z=m(et,z,Be),We===null?Ne=et:We.sibling=et,We=et);return Ke&&Hs(U,Be),Ne}for(xe=l(xe);!et.done;Be++,et=B.next())et=Q(xe,U,Be,et.value,te),et!==null&&(e&&et.alternate!==null&&xe.delete(et.key===null?Be:et.key),z=m(et,z,Be),We===null?Ne=et:We.sibling=et,We=et);return e&&xe.forEach(function(l1){return n(U,l1)}),Ke&&Hs(U,Be),Ne}function dt(U,z,B,te){if(typeof B=="object"&&B!==null&&B.type===ee&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case L:e:{for(var Ne=B.key;z!==null;){if(z.key===Ne){if(Ne=B.type,Ne===ee){if(z.tag===7){a(U,z.sibling),te=d(z,B.props.children),te.return=U,U=te;break e}}else if(z.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===j&&Nr(Ne)===z.type){a(U,z.sibling),te=d(z,B.props),Nl(te,B),te.return=U,U=te;break e}a(U,z);break}else n(U,z);z=z.sibling}B.type===ee?(te=yr(B.props.children,U.mode,te,B.key),te.return=U,U=te):(te=nc(B.type,B.key,B.props,null,U.mode,te),Nl(te,B),te.return=U,U=te)}return v(U);case X:e:{for(Ne=B.key;z!==null;){if(z.key===Ne)if(z.tag===4&&z.stateNode.containerInfo===B.containerInfo&&z.stateNode.implementation===B.implementation){a(U,z.sibling),te=d(z,B.children||[]),te.return=U,U=te;break e}else{a(U,z);break}else n(U,z);z=z.sibling}te=hh(B,U.mode,te),te.return=U,U=te}return v(U);case j:return B=Nr(B),dt(U,z,B,te)}if(Ce(B))return ye(U,z,B,te);if(k(B)){if(Ne=k(B),typeof Ne!="function")throw Error(r(150));return B=Ne.call(B),Re(U,z,B,te)}if(typeof B.then=="function")return dt(U,z,cc(B),te);if(B.$$typeof===he)return dt(U,z,rc(U,B),te);uc(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,z!==null&&z.tag===6?(a(U,z.sibling),te=d(z,B),te.return=U,U=te):(a(U,z),te=uh(B,U.mode,te),te.return=U,U=te),v(U)):a(U,z)}return function(U,z,B,te){try{_l=0;var Ne=dt(U,z,B,te);return ui=null,Ne}catch(xe){if(xe===ci||xe===lc)throw xe;var We=Sn(29,xe,null,U.mode);return We.lanes=te,We.return=U,We}finally{}}}var wr=lg(!0),og=lg(!1),_a=!1;function Eh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ea(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(nt&2)!==0){var d=l.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),l.pending=n,n=tc(e),Fm(e,null,a),n}return ec(e,l,n,a),tc(e)}function El(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Xi(e,a)}}function Th(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?d=m=n:m=m.next=n}else d=m=n;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var jh=!1;function wl(){if(jh){var e=oi;if(e!==null)throw e}}function Tl(e,n,a,l){jh=!1;var d=e.updateQueue;_a=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var I=N,q=I.next;I.next=null,v===null?m=q:v.next=q,v=I;var J=e.alternate;J!==null&&(J=J.updateQueue,N=J.lastBaseUpdate,N!==v&&(N===null?J.firstBaseUpdate=q:N.next=q,J.lastBaseUpdate=I))}if(m!==null){var se=d.baseState;v=0,J=q=I=null,N=m;do{var H=N.lane&-536870913,Q=H!==N.lane;if(Q?(Fe&H)===H:(l&H)===H){H!==0&&H===li&&(jh=!0),J!==null&&(J=J.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ye=e,Re=N;H=n;var dt=a;switch(Re.tag){case 1:if(ye=Re.payload,typeof ye=="function"){se=ye.call(dt,se,H);break e}se=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Re.payload,H=typeof ye=="function"?ye.call(dt,se,H):ye,H==null)break e;se=T({},se,H);break e;case 2:_a=!0}}H=N.callback,H!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=d.callbacks,Q===null?d.callbacks=[H]:Q.push(H))}else Q={lane:H,tag:N.tag,payload:N.payload,callback:N.callback,next:null},J===null?(q=J=Q,I=se):J=J.next=Q,v|=H;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;Q=N,N=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);J===null&&(I=se),d.baseState=I,d.firstBaseUpdate=q,d.lastBaseUpdate=J,m===null&&(d.shared.lanes=0),Aa|=v,e.lanes=v,e.memoizedState=se}}function cg(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function ug(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)cg(a[e],n)}var hi=V(null),hc=V(0);function hg(e,n){e=ea,oe(hc,e),oe(hi,n),ea=e|n.baseLanes}function Sh(){oe(hc,ea),oe(hi,hi.current)}function Ah(){ea=hc.current,$(hi),$(hc)}var An=V(null),Fn=null;function wa(e){var n=e.alternate;oe(St,St.current&1),oe(An,e),Fn===null&&(n===null||hi.current!==null||n.memoizedState!==null)&&(Fn=e)}function Ch(e){oe(St,St.current),oe(An,e),Fn===null&&(Fn=e)}function dg(e){e.tag===22?(oe(St,St.current),oe(An,e),Fn===null&&(Fn=e)):Ta()}function Ta(){oe(St,St.current),oe(An,An.current)}function Cn(e){$(An),Fn===e&&(Fn=null),$(St)}var St=V(0);function dc(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vd(a)||kd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var $s=0,Le=null,ut=null,Vt=null,fc=!1,di=!1,Tr=!1,mc=0,jl=0,fi=null,Zb=0;function Et(){throw Error(r(321))}function Rh(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!jn(e[a],n[a]))return!1;return!0}function Dh(e,n,a,l,d,m){return $s=m,Le=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=e===null||e.memoizedState===null?Kg:$h,Tr=!1,m=a(l,d),Tr=!1,di&&(m=mg(n,a,l,d)),fg(e),m}function fg(e){F.H=Cl;var n=ut!==null&&ut.next!==null;if($s=0,Vt=ut=Le=null,fc=!1,jl=0,fi=null,n)throw Error(r(300));e===null||kt||(e=e.dependencies,e!==null&&ac(e)&&(kt=!0))}function mg(e,n,a,l){Le=e;var d=0;do{if(di&&(fi=null),jl=0,di=!1,25<=d)throw Error(r(301));if(d+=1,Vt=ut=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}F.H=Xg,m=n(a,l)}while(di);return m}function Jb(){var e=F.H,n=e.useState()[0];return n=typeof n.then=="function"?Sl(n):n,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(Le.flags|=1024),n}function Ih(){var e=mc!==0;return mc=0,e}function Mh(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Oh(e){if(fc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}fc=!1}$s=0,Vt=ut=Le=null,di=!1,jl=mc=0,fi=null}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Le.memoizedState=Vt=e:Vt=Vt.next=e,Vt}function At(){if(ut===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var n=Vt===null?Le.memoizedState:Vt.next;if(n!==null)Vt=n,ut=e;else{if(e===null)throw Le.alternate===null?Error(r(467)):Error(r(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Vt===null?Le.memoizedState=Vt=e:Vt=Vt.next=e}return Vt}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sl(e){var n=jl;return jl+=1,fi===null&&(fi=[]),e=ag(fi,e,n),n=Le,(Vt===null?n.memoizedState:Vt.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?Kg:$h),e}function pc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Sl(e);if(e.$$typeof===he)return en(e)}throw Error(r(438,String(e)))}function Vh(e){var n=null,a=Le.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Le.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=gc(),Le.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=O;return n.index++,a}function Ys(e,n){return typeof n=="function"?n(e):n}function yc(e){var n=At();return kh(n,ut,e)}function kh(e,n,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=e.baseQueue,m=l.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}n.baseQueue=d=m,l.pending=null}if(m=e.baseState,d===null)e.memoizedState=m;else{n=d.next;var N=v=null,I=null,q=n,J=!1;do{var se=q.lane&-536870913;if(se!==q.lane?(Fe&se)===se:($s&se)===se){var H=q.revertLane;if(H===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),se===li&&(J=!0);else if(($s&H)===H){q=q.next,H===li&&(J=!0);continue}else se={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(N=I=se,v=m):I=I.next=se,Le.lanes|=H,Aa|=H;se=q.action,Tr&&a(m,se),m=q.hasEagerState?q.eagerState:a(m,se)}else H={lane:se,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(N=I=H,v=m):I=I.next=H,Le.lanes|=se,Aa|=se;q=q.next}while(q!==null&&q!==n);if(I===null?v=m:I.next=N,!jn(m,e.memoizedState)&&(kt=!0,J&&(a=oi,a!==null)))throw a;e.memoizedState=m,e.baseState=v,e.baseQueue=I,l.lastRenderedState=m}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function zh(e){var n=At(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,m=n.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do m=e(m,v.action),v=v.next;while(v!==d);jn(m,n.memoizedState)||(kt=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function gg(e,n,a){var l=Le,d=At(),m=Ke;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=n();var v=!jn((ut||d).memoizedState,a);if(v&&(d.memoizedState=a,kt=!0),d=d.queue,Ph(xg.bind(null,l,d,e),[e]),d.getSnapshot!==n||v||Vt!==null&&Vt.memoizedState.tag&1){if(l.flags|=2048,mi(9,{destroy:void 0},yg.bind(null,l,d,a,n),null),ft===null)throw Error(r(349));m||($s&127)!==0||pg(l,n,a)}return a}function pg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Le.updateQueue,n===null?(n=gc(),Le.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function yg(e,n,a,l){n.value=a,n.getSnapshot=l,vg(n)&&bg(e)}function xg(e,n,a){return a(function(){vg(n)&&bg(e)})}function vg(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!jn(e,a)}catch{return!0}}function bg(e){var n=pr(e,2);n!==null&&bn(n,e,2)}function Uh(e){var n=dn();if(typeof e=="function"){var a=e;if(e=a(),Tr){Vn(!0);try{a()}finally{Vn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:e},n}function _g(e,n,a,l){return e.baseState=a,kh(e,ut,typeof l=="function"?l:Ys)}function Wb(e,n,a,l,d){if(bc(e))throw Error(r(485));if(e=n.action,e!==null){var m={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};F.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Ng(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Ng(e,n){var a=n.action,l=n.payload,d=e.state;if(n.isTransition){var m=F.T,v={};F.T=v;try{var N=a(d,l),I=F.S;I!==null&&I(v,N),Eg(e,n,N)}catch(q){Lh(e,n,q)}finally{m!==null&&v.types!==null&&(m.types=v.types),F.T=m}}else try{m=a(d,l),Eg(e,n,m)}catch(q){Lh(e,n,q)}}function Eg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){wg(e,n,l)},function(l){return Lh(e,n,l)}):wg(e,n,a)}function wg(e,n,a){n.status="fulfilled",n.value=a,Tg(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Ng(e,a)))}function Lh(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Tg(n),n=n.next;while(n!==l)}e.action=null}function Tg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function jg(e,n){return n}function Sg(e,n){if(Ke){var a=ft.formState;if(a!==null){e:{var l=Le;if(Ke){if(yt){t:{for(var d=yt,m=Gn;d.nodeType!==8;){if(!m){d=null;break t}if(d=$n(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){yt=$n(d.nextSibling),l=d.data==="F!";break e}}va(l)}l=!1}l&&(n=a[0])}}return a=dn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jg,lastRenderedState:n},a.queue=l,a=$g.bind(null,Le,l),l.dispatch=a,l=Uh(!1),m=Fh.bind(null,Le,!1,l.queue),l=dn(),d={state:n,dispatch:null,action:e,pending:null},l.queue=d,a=Wb.bind(null,Le,d,m,a),d.dispatch=a,l.memoizedState=e,[n,a,!1]}function Ag(e){var n=At();return Cg(n,ut,e)}function Cg(e,n,a){if(n=kh(e,n,jg)[0],e=yc(Ys)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Sl(n)}catch(v){throw v===ci?lc:v}else l=n;n=At();var d=n.queue,m=d.dispatch;return a!==n.memoizedState&&(Le.flags|=2048,mi(9,{destroy:void 0},e_.bind(null,d,a),null)),[l,m,e]}function e_(e,n){e.action=n}function Rg(e){var n=At(),a=ut;if(a!==null)return Cg(n,a,e);At(),n=n.memoizedState,a=At();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function mi(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=Le.updateQueue,n===null&&(n=gc(),Le.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function Dg(){return At().memoizedState}function xc(e,n,a,l){var d=dn();Le.flags|=e,d.memoizedState=mi(1|n,{destroy:void 0},a,l===void 0?null:l)}function vc(e,n,a,l){var d=At();l=l===void 0?null:l;var m=d.memoizedState.inst;ut!==null&&l!==null&&Rh(l,ut.memoizedState.deps)?d.memoizedState=mi(n,m,a,l):(Le.flags|=e,d.memoizedState=mi(1|n,m,a,l))}function Ig(e,n){xc(8390656,8,e,n)}function Ph(e,n){vc(2048,8,e,n)}function t_(e){Le.flags|=4;var n=Le.updateQueue;if(n===null)n=gc(),Le.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Mg(e){var n=At().memoizedState;return t_({ref:n,nextImpl:e}),function(){if((nt&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Og(e,n){return vc(4,2,e,n)}function Vg(e,n){return vc(4,4,e,n)}function kg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function zg(e,n,a){a=a!=null?a.concat([e]):null,vc(4,4,kg.bind(null,n,e),a)}function Bh(){}function Ug(e,n){var a=At();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Rh(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function Lg(e,n){var a=At();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Rh(n,l[1]))return l[0];if(l=e(),Tr){Vn(!0);try{e()}finally{Vn(!1)}}return a.memoizedState=[l,n],l}function qh(e,n,a){return a===void 0||($s&1073741824)!==0&&(Fe&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Pp(),Le.lanes|=e,Aa|=e,a)}function Pg(e,n,a,l){return jn(a,n)?a:hi.current!==null?(e=qh(e,a,l),jn(e,n)||(kt=!0),e):($s&42)===0||($s&1073741824)!==0&&(Fe&261930)===0?(kt=!0,e.memoizedState=a):(e=Pp(),Le.lanes|=e,Aa|=e,n)}function Bg(e,n,a,l,d){var m=K.p;K.p=m!==0&&8>m?m:8;var v=F.T,N={};F.T=N,Fh(e,!1,n,a);try{var I=d(),q=F.S;if(q!==null&&q(N,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var J=Xb(I,l);Al(e,n,J,In(e))}else Al(e,n,l,In(e))}catch(se){Al(e,n,{then:function(){},status:"rejected",reason:se},In())}finally{K.p=m,v!==null&&N.types!==null&&(v.types=N.types),F.T=v}}function n_(){}function Hh(e,n,a,l){if(e.tag!==5)throw Error(r(476));var d=qg(e).queue;Bg(e,d,n,de,a===null?n_:function(){return Hg(e),a(l)})}function qg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:de},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Hg(e){var n=qg(e);n.next===null&&(n=e.alternate.memoizedState),Al(e,n.next.queue,{},In())}function Gh(){return en(Fl)}function Gg(){return At().memoizedState}function Fg(){return At().memoizedState}function s_(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=In();e=Na(a);var l=Ea(n,e,a);l!==null&&(bn(l,n,a),El(l,n,a)),n={cache:vh()},e.payload=n;return}n=n.return}}function a_(e,n,a){var l=In();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bc(e)?Yg(n,a):(a=oh(e,n,a,l),a!==null&&(bn(a,e,l),Qg(a,n,l)))}function $g(e,n,a){var l=In();Al(e,n,a,l)}function Al(e,n,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(bc(e))Yg(n,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,N=m(v,a);if(d.hasEagerState=!0,d.eagerState=N,jn(N,v))return ec(e,n,d,0),ft===null&&Wo(),!1}catch{}finally{}if(a=oh(e,n,d,l),a!==null)return bn(a,e,l),Qg(a,n,l),!0}return!1}function Fh(e,n,a,l){if(l={lane:2,revertLane:Ed(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bc(e)){if(n)throw Error(r(479))}else n=oh(e,a,l,2),n!==null&&bn(n,e,2)}function bc(e){var n=e.alternate;return e===Le||n!==null&&n===Le}function Yg(e,n){di=fc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Qg(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Xi(e,a)}}var Cl={readContext:en,use:pc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Cl.useEffectEvent=Et;var Kg={readContext:en,use:pc,useCallback:function(e,n){return dn().memoizedState=[e,n===void 0?null:n],e},useContext:en,useEffect:Ig,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,xc(4194308,4,kg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return xc(4194308,4,e,n)},useInsertionEffect:function(e,n){xc(4,2,e,n)},useMemo:function(e,n){var a=dn();n=n===void 0?null:n;var l=e();if(Tr){Vn(!0);try{e()}finally{Vn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=dn();if(a!==void 0){var d=a(n);if(Tr){Vn(!0);try{a(n)}finally{Vn(!1)}}}else d=n;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=a_.bind(null,Le,e),[l.memoizedState,e]},useRef:function(e){var n=dn();return e={current:e},n.memoizedState=e},useState:function(e){e=Uh(e);var n=e.queue,a=$g.bind(null,Le,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Bh,useDeferredValue:function(e,n){var a=dn();return qh(a,e,n)},useTransition:function(){var e=Uh(!1);return e=Bg.bind(null,Le,e.queue,!0,!1),dn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=Le,d=dn();if(Ke){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),ft===null)throw Error(r(349));(Fe&127)!==0||pg(l,n,a)}d.memoizedState=a;var m={value:a,getSnapshot:n};return d.queue=m,Ig(xg.bind(null,l,m,e),[e]),l.flags|=2048,mi(9,{destroy:void 0},yg.bind(null,l,m,a,n),null),a},useId:function(){var e=dn(),n=ft.identifierPrefix;if(Ke){var a=As,l=Ss;a=(l&~(1<<32-Tt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=mc++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Zb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Gh,useFormState:Sg,useActionState:Sg,useOptimistic:function(e){var n=dn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Fh.bind(null,Le,!0,a),a.dispatch=n,[e,n]},useMemoCache:Vh,useCacheRefresh:function(){return dn().memoizedState=s_.bind(null,Le)},useEffectEvent:function(e){var n=dn(),a={impl:e};return n.memoizedState=a,function(){if((nt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},$h={readContext:en,use:pc,useCallback:Ug,useContext:en,useEffect:Ph,useImperativeHandle:zg,useInsertionEffect:Og,useLayoutEffect:Vg,useMemo:Lg,useReducer:yc,useRef:Dg,useState:function(){return yc(Ys)},useDebugValue:Bh,useDeferredValue:function(e,n){var a=At();return Pg(a,ut.memoizedState,e,n)},useTransition:function(){var e=yc(Ys)[0],n=At().memoizedState;return[typeof e=="boolean"?e:Sl(e),n]},useSyncExternalStore:gg,useId:Gg,useHostTransitionStatus:Gh,useFormState:Ag,useActionState:Ag,useOptimistic:function(e,n){var a=At();return _g(a,ut,e,n)},useMemoCache:Vh,useCacheRefresh:Fg};$h.useEffectEvent=Mg;var Xg={readContext:en,use:pc,useCallback:Ug,useContext:en,useEffect:Ph,useImperativeHandle:zg,useInsertionEffect:Og,useLayoutEffect:Vg,useMemo:Lg,useReducer:zh,useRef:Dg,useState:function(){return zh(Ys)},useDebugValue:Bh,useDeferredValue:function(e,n){var a=At();return ut===null?qh(a,e,n):Pg(a,ut.memoizedState,e,n)},useTransition:function(){var e=zh(Ys)[0],n=At().memoizedState;return[typeof e=="boolean"?e:Sl(e),n]},useSyncExternalStore:gg,useId:Gg,useHostTransitionStatus:Gh,useFormState:Rg,useActionState:Rg,useOptimistic:function(e,n){var a=At();return ut!==null?_g(a,ut,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Vh,useCacheRefresh:Fg};Xg.useEffectEvent=Mg;function Yh(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:T({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Qh={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=In(),d=Na(l);d.payload=n,a!=null&&(d.callback=a),n=Ea(e,d,l),n!==null&&(bn(n,e,l),El(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=In(),d=Na(l);d.tag=1,d.payload=n,a!=null&&(d.callback=a),n=Ea(e,d,l),n!==null&&(bn(n,e,l),El(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=In(),l=Na(a);l.tag=2,n!=null&&(l.callback=n),n=Ea(e,l,a),n!==null&&(bn(n,e,a),El(n,e,a))}};function Zg(e,n,a,l,d,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,v):n.prototype&&n.prototype.isPureReactComponent?!gl(a,l)||!gl(d,m):!0}function Jg(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Qh.enqueueReplaceState(n,n.state,null)}function jr(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=T({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function Wg(e){Jo(e)}function ep(e){console.error(e)}function tp(e){Jo(e)}function _c(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function np(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Kh(e,n,a){return a=Na(a),a.tag=3,a.payload={element:null},a.callback=function(){_c(e,n)},a}function sp(e){return e=Na(e),e.tag=3,e}function ap(e,n,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;e.payload=function(){return d(m)},e.callback=function(){np(n,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){np(n,a,l),typeof d!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function r_(e,n,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&ii(n,a,d,!0),a=An.current,a!==null){switch(a.tag){case 31:case 13:return Fn===null?Mc():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===oc?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),bd(e,l,d)),!1;case 22:return a.flags|=65536,l===oc?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),bd(e,l,d)),!1}throw Error(r(435,a.tag))}return bd(e,l,d),Mc(),!1}if(Ke)return n=An.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,l!==mh&&(e=Error(r(422),{cause:l}),xl(Bn(e,a)))):(l!==mh&&(n=Error(r(423),{cause:l}),xl(Bn(n,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Bn(l,a),d=Kh(e.stateNode,l,d),Th(e,d),wt!==4&&(wt=2)),!1;var m=Error(r(520),{cause:l});if(m=Bn(m,a),zl===null?zl=[m]:zl.push(m),wt!==4&&(wt=2),n===null)return!0;l=Bn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Kh(a.stateNode,l,e),Th(a,e),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ca===null||!Ca.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=sp(d),ap(d,e,a,l),Th(a,d),!1}a=a.return}while(a!==null);return!1}var Xh=Error(r(461)),kt=!1;function tn(e,n,a,l){n.child=e===null?og(n,null,a,l):wr(n,e.child,a,l)}function rp(e,n,a,l,d){a=a.render;var m=n.ref;if("ref"in l){var v={};for(var N in l)N!=="ref"&&(v[N]=l[N])}else v=l;return br(n),l=Dh(e,n,a,v,m,d),N=Ih(),e!==null&&!kt?(Mh(e,n,d),Qs(e,n,d)):(Ke&&N&&dh(n),n.flags|=1,tn(e,n,l,d),n.child)}function ip(e,n,a,l,d){if(e===null){var m=a.type;return typeof m=="function"&&!ch(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,lp(e,n,m,l,d)):(e=nc(a.type,null,l,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!ad(e,d)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:gl,a(v,l)&&e.ref===n.ref)return Qs(e,n,d)}return n.flags|=1,e=qs(m,l),e.ref=n.ref,e.return=n,n.child=e}function lp(e,n,a,l,d){if(e!==null){var m=e.memoizedProps;if(gl(m,l)&&e.ref===n.ref)if(kt=!1,n.pendingProps=l=m,ad(e,d))(e.flags&131072)!==0&&(kt=!0);else return n.lanes=e.lanes,Qs(e,n,d)}return Zh(e,n,a,l,d)}function op(e,n,a,l){var d=l.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(l=n.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~m}else l=0,n.child=null;return cp(e,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ic(n,m!==null?m.cachePool:null),m!==null?hg(n,m):Sh(),dg(n);else return l=n.lanes=536870912,cp(e,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(ic(n,m.cachePool),hg(n,m),Ta(),n.memoizedState=null):(e!==null&&ic(n,null),Sh(),Ta());return tn(e,n,d,a),n.child}function Rl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function cp(e,n,a,l,d){var m=_h();return m=m===null?null:{parent:Ot._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},e!==null&&ic(n,null),Sh(),dg(n),e!==null&&ii(e,n,l,!0),n.childLanes=d,null}function Nc(e,n){return n=wc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function up(e,n,a){return wr(n,e.child,null,a),e=Nc(n,n.pendingProps),e.flags|=2,Cn(n),n.memoizedState=null,e}function i_(e,n,a){var l=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Ke){if(l.mode==="hidden")return e=Nc(n,l),n.lanes=536870912,Rl(null,e);if(Ch(n),(e=yt)?(e=Ny(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ya!==null?{id:Ss,overflow:As}:null,retryLane:536870912,hydrationErrors:null},a=Ym(e),a.return=n,n.child=a,Wt=n,yt=null)):e=null,e===null)throw va(n);return n.lanes=536870912,null}return Nc(n,l)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(Ch(n),d)if(n.flags&256)n.flags&=-257,n=up(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(kt||ii(e,n,a,!1),d=(a&e.childLanes)!==0,kt||d){if(l=ft,l!==null&&(v=Zi(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,pr(e,v),bn(l,e,v),Xh;Mc(),n=up(e,n,a)}else e=m.treeContext,yt=$n(v.nextSibling),Wt=n,Ke=!0,xa=null,Gn=!1,e!==null&&Xm(n,e),n=Nc(n,l),n.flags|=4096;return n}return e=qs(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Ec(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Zh(e,n,a,l,d){return br(n),a=Dh(e,n,a,l,void 0,d),l=Ih(),e!==null&&!kt?(Mh(e,n,d),Qs(e,n,d)):(Ke&&l&&dh(n),n.flags|=1,tn(e,n,a,d),n.child)}function hp(e,n,a,l,d,m){return br(n),n.updateQueue=null,a=mg(n,l,a,d),fg(e),l=Ih(),e!==null&&!kt?(Mh(e,n,m),Qs(e,n,m)):(Ke&&l&&dh(n),n.flags|=1,tn(e,n,a,m),n.child)}function dp(e,n,a,l,d){if(br(n),n.stateNode===null){var m=ni,v=a.contextType;typeof v=="object"&&v!==null&&(m=en(v)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Qh,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},Eh(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?en(v):ni,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Yh(n,a,v,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Qh.enqueueReplaceState(m,m.state,null),Tl(n,l,m,d),wl(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){m=n.stateNode;var N=n.memoizedProps,I=jr(a,N);m.props=I;var q=m.context,J=a.contextType;v=ni,typeof J=="object"&&J!==null&&(v=en(J));var se=a.getDerivedStateFromProps;J=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=n.pendingProps!==N,J||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||q!==v)&&Jg(n,m,l,v),_a=!1;var H=n.memoizedState;m.state=H,Tl(n,l,m,d),wl(),q=n.memoizedState,N||H!==q||_a?(typeof se=="function"&&(Yh(n,a,se,l),q=n.memoizedState),(I=_a||Zg(n,a,I,l,H,q,v))?(J||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=q),m.props=l,m.state=q,m.context=v,l=I):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,wh(e,n),v=n.memoizedProps,J=jr(a,v),m.props=J,se=n.pendingProps,H=m.context,q=a.contextType,I=ni,typeof q=="object"&&q!==null&&(I=en(q)),N=a.getDerivedStateFromProps,(q=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==se||H!==I)&&Jg(n,m,l,I),_a=!1,H=n.memoizedState,m.state=H,Tl(n,l,m,d),wl();var Q=n.memoizedState;v!==se||H!==Q||_a||e!==null&&e.dependencies!==null&&ac(e.dependencies)?(typeof N=="function"&&(Yh(n,a,N,l),Q=n.memoizedState),(J=_a||Zg(n,a,J,l,H,Q,I)||e!==null&&e.dependencies!==null&&ac(e.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Q,I),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Q,I)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Q),m.props=l,m.state=Q,m.context=I,l=J):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),l=!1)}return m=l,Ec(e,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&l?(n.child=wr(n,e.child,null,d),n.child=wr(n,null,a,d)):tn(e,n,a,d),n.memoizedState=m.state,e=n.child):e=Qs(e,n,d),e}function fp(e,n,a,l){return xr(),n.flags|=256,tn(e,n,a,l),n.child}var Jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wh(e){return{baseLanes:e,cachePool:ng()}}function ed(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Dn),e}function mp(e,n,a){var l=n.pendingProps,d=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(St.current&2)!==0),v&&(d=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ke){if(d?wa(n):Ta(),(e=yt)?(e=Ny(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ya!==null?{id:Ss,overflow:As}:null,retryLane:536870912,hydrationErrors:null},a=Ym(e),a.return=n,n.child=a,Wt=n,yt=null)):e=null,e===null)throw va(n);return kd(e)?n.lanes=32:n.lanes=536870912,null}var N=l.children;return l=l.fallback,d?(Ta(),d=n.mode,N=wc({mode:"hidden",children:N},d),l=yr(l,d,a,null),N.return=n,l.return=n,N.sibling=l,n.child=N,l=n.child,l.memoizedState=Wh(a),l.childLanes=ed(e,v,a),n.memoizedState=Jh,Rl(null,l)):(wa(n),td(n,N))}var I=e.memoizedState;if(I!==null&&(N=I.dehydrated,N!==null)){if(m)n.flags&256?(wa(n),n.flags&=-257,n=nd(e,n,a)):n.memoizedState!==null?(Ta(),n.child=e.child,n.flags|=128,n=null):(Ta(),N=l.fallback,d=n.mode,l=wc({mode:"visible",children:l.children},d),N=yr(N,d,a,null),N.flags|=2,l.return=n,N.return=n,l.sibling=N,n.child=l,wr(n,e.child,null,a),l=n.child,l.memoizedState=Wh(a),l.childLanes=ed(e,v,a),n.memoizedState=Jh,n=Rl(null,l));else if(wa(n),kd(N)){if(v=N.nextSibling&&N.nextSibling.dataset,v)var q=v.dgst;v=q,l=Error(r(419)),l.stack="",l.digest=v,xl({value:l,source:null,stack:null}),n=nd(e,n,a)}else if(kt||ii(e,n,a,!1),v=(a&e.childLanes)!==0,kt||v){if(v=ft,v!==null&&(l=Zi(v,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,pr(e,l),bn(v,e,l),Xh;Vd(N)||Mc(),n=nd(e,n,a)}else Vd(N)?(n.flags|=192,n.child=e.child,n=null):(e=I.treeContext,yt=$n(N.nextSibling),Wt=n,Ke=!0,xa=null,Gn=!1,e!==null&&Xm(n,e),n=td(n,l.children),n.flags|=4096);return n}return d?(Ta(),N=l.fallback,d=n.mode,I=e.child,q=I.sibling,l=qs(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,q!==null?N=qs(q,N):(N=yr(N,d,a,null),N.flags|=2),N.return=n,l.return=n,l.sibling=N,n.child=l,Rl(null,l),l=n.child,N=e.child.memoizedState,N===null?N=Wh(a):(d=N.cachePool,d!==null?(I=Ot._currentValue,d=d.parent!==I?{parent:I,pool:I}:d):d=ng(),N={baseLanes:N.baseLanes|a,cachePool:d}),l.memoizedState=N,l.childLanes=ed(e,v,a),n.memoizedState=Jh,Rl(e.child,l)):(wa(n),a=e.child,e=a.sibling,a=qs(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function td(e,n){return n=wc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function wc(e,n){return e=Sn(22,e,null,n),e.lanes=0,e}function nd(e,n,a){return wr(n,e.child,null,a),e=td(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function gp(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),yh(e.return,n,a)}function sd(e,n,a,l,d,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=d,v.treeForkCount=m)}function pp(e,n,a){var l=n.pendingProps,d=l.revealOrder,m=l.tail;l=l.children;var v=St.current,N=(v&2)!==0;if(N?(v=v&1|2,n.flags|=128):v&=1,oe(St,v),tn(e,n,l,a),l=Ke?yl:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gp(e,a,n);else if(e.tag===19)gp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=n.child,d=null;a!==null;)e=a.alternate,e!==null&&dc(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=n.child,n.child=null):(d=a.sibling,a.sibling=null),sd(n,!1,d,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&dc(e)===null){n.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}sd(n,!0,a,null,m,l);break;case"together":sd(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Qs(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Aa|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(ii(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=qs(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=qs(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function ad(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ac(e)))}function l_(e,n,a){switch(n.tag){case 3:_e(n,n.stateNode.containerInfo),ba(n,Ot,e.memoizedState.cache),xr();break;case 27:case 5:at(n);break;case 4:_e(n,n.stateNode.containerInfo);break;case 10:ba(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ch(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(wa(n),n.flags|=128,null):(a&n.child.childLanes)!==0?mp(e,n,a):(wa(n),e=Qs(e,n,a),e!==null?e.sibling:null);wa(n);break;case 19:var d=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(ii(e,n,a,!1),l=(a&n.childLanes)!==0),d){if(l)return pp(e,n,a);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(St,St.current),l)break;return null;case 22:return n.lanes=0,op(e,n,a,n.pendingProps);case 24:ba(n,Ot,e.memoizedState.cache)}return Qs(e,n,a)}function yp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)kt=!0;else{if(!ad(e,a)&&(n.flags&128)===0)return kt=!1,l_(e,n,a);kt=(e.flags&131072)!==0}else kt=!1,Ke&&(n.flags&1048576)!==0&&Km(n,yl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=Nr(n.elementType),n.type=e,typeof e=="function")ch(e)?(l=jr(e,l),n.tag=1,n=dp(null,n,e,l,a)):(n.tag=0,n=Zh(null,n,e,l,a));else{if(e!=null){var d=e.$$typeof;if(d===ge){n.tag=11,n=rp(null,n,e,l,a);break e}else if(d===R){n.tag=14,n=ip(null,n,e,l,a);break e}}throw n=Te(e)||e,Error(r(306,n,""))}}return n;case 0:return Zh(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,d=jr(l,n.pendingProps),dp(e,n,l,d,a);case 3:e:{if(_e(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var m=n.memoizedState;d=m.element,wh(e,n),Tl(n,l,null,a);var v=n.memoizedState;if(l=v.cache,ba(n,Ot,l),l!==m.cache&&xh(n,[Ot],a,!0),wl(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=fp(e,n,l,a);break e}else if(l!==d){d=Bn(Error(r(424)),n),xl(d),n=fp(e,n,l,a);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(yt=$n(e.firstChild),Wt=n,Ke=!0,xa=null,Gn=!0,a=og(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(xr(),l===d){n=Qs(e,n,a);break e}tn(e,n,l,a)}n=n.child}return n;case 26:return Ec(e,n),e===null?(a=Ay(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ke||(a=n.type,e=n.pendingProps,l=Pc(ve.current).createElement(a),l[Dt]=n,l[$t]=e,nn(l,a,e),It(l),n.stateNode=l):n.memoizedState=Ay(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return at(n),e===null&&Ke&&(l=n.stateNode=Ty(n.type,n.pendingProps,ve.current),Wt=n,Gn=!0,d=yt,Ma(n.type)?(zd=d,yt=$n(l.firstChild)):yt=d),tn(e,n,n.pendingProps.children,a),Ec(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ke&&((d=l=yt)&&(l=z_(l,n.type,n.pendingProps,Gn),l!==null?(n.stateNode=l,Wt=n,yt=$n(l.firstChild),Gn=!1,d=!0):d=!1),d||va(n)),at(n),d=n.type,m=n.pendingProps,v=e!==null?e.memoizedProps:null,l=m.children,Id(d,m)?l=null:v!==null&&Id(d,v)&&(n.flags|=32),n.memoizedState!==null&&(d=Dh(e,n,Jb,null,null,a),Fl._currentValue=d),Ec(e,n),tn(e,n,l,a),n.child;case 6:return e===null&&Ke&&((e=a=yt)&&(a=U_(a,n.pendingProps,Gn),a!==null?(n.stateNode=a,Wt=n,yt=null,e=!0):e=!1),e||va(n)),null;case 13:return mp(e,n,a);case 4:return _e(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=wr(n,null,l,a):tn(e,n,l,a),n.child;case 11:return rp(e,n,n.type,n.pendingProps,a);case 7:return tn(e,n,n.pendingProps,a),n.child;case 8:return tn(e,n,n.pendingProps.children,a),n.child;case 12:return tn(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,ba(n,n.type,l.value),tn(e,n,l.children,a),n.child;case 9:return d=n.type._context,l=n.pendingProps.children,br(n),d=en(d),l=l(d),n.flags|=1,tn(e,n,l,a),n.child;case 14:return ip(e,n,n.type,n.pendingProps,a);case 15:return lp(e,n,n.type,n.pendingProps,a);case 19:return pp(e,n,a);case 31:return i_(e,n,a);case 22:return op(e,n,a,n.pendingProps);case 24:return br(n),l=en(Ot),e===null?(d=_h(),d===null&&(d=ft,m=vh(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),n.memoizedState={parent:l,cache:d},Eh(n),ba(n,Ot,d)):((e.lanes&a)!==0&&(wh(e,n),Tl(n,null,null,a),wl()),d=e.memoizedState,m=n.memoizedState,d.parent!==l?(d={parent:l,cache:l},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),ba(n,Ot,l)):(l=m.cache,ba(n,Ot,l),l!==d.cache&&xh(n,[Ot],a,!0))),tn(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Ks(e){e.flags|=4}function rd(e,n,a,l,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Gp())e.flags|=8192;else throw Er=oc,Nh}else e.flags&=-16777217}function xp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!My(n))if(Gp())e.flags|=8192;else throw Er=oc,Nh}function Tc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Do():536870912,e.lanes|=n,xi|=n)}function Dl(e,n){if(!Ke)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function xt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function o_(e,n,a){var l=n.pendingProps;switch(fh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(n),null;case 1:return xt(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Fs(Ot),Se(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ri(n)?Ks(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gh())),xt(n),null;case 26:var d=n.type,m=n.memoizedState;return e===null?(Ks(n),m!==null?(xt(n),xp(n,m)):(xt(n),rd(n,d,null,l,a))):m?m!==e.memoizedState?(Ks(n),xt(n),xp(n,m)):(xt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ks(n),xt(n),rd(n,d,e,l,a)),null;case 27:if(be(n),a=ve.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Ks(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return xt(n),null}e=fe.current,ri(n)?Zm(n):(e=Ty(d,l,a),n.stateNode=e,Ks(n))}return xt(n),null;case 5:if(be(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Ks(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return xt(n),null}if(m=fe.current,ri(n))Zm(n);else{var v=Pc(ve.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(d,{is:l.is}):v.createElement(d)}}m[Dt]=n,m[$t]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;e:switch(nn(m,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ks(n)}}return xt(n),rd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Ks(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=ve.current,ri(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,d=Wt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Dt]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||my(e.nodeValue,a)),e||va(n,!0)}else e=Pc(e).createTextNode(l),e[Dt]=n,n.stateNode=e}return xt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=ri(n),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Dt]=n}else xr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xt(n),e=!1}else a=gh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Cn(n),n):(Cn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return xt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=ri(n),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Dt]=n}else xr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xt(n),d=!1}else d=gh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Cn(n),n):(Cn(n),null)}return Cn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),Tc(n,n.updateQueue),xt(n),null);case 4:return Se(),e===null&&Sd(n.stateNode.containerInfo),xt(n),null;case 10:return Fs(n.type),xt(n),null;case 19:if($(St),l=n.memoizedState,l===null)return xt(n),null;if(d=(n.flags&128)!==0,m=l.rendering,m===null)if(d)Dl(l,!1);else{if(wt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=dc(e),m!==null){for(n.flags|=128,Dl(l,!1),e=m.updateQueue,n.updateQueue=e,Tc(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)$m(a,e),a=a.sibling;return oe(St,St.current&1|2),Ke&&Hs(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&qt()>Rc&&(n.flags|=128,d=!0,Dl(l,!1),n.lanes=4194304)}else{if(!d)if(e=dc(m),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,Tc(n,e),Dl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Ke)return xt(n),null}else 2*qt()-l.renderingStartTime>Rc&&a!==536870912&&(n.flags|=128,d=!0,Dl(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(e=l.last,e!==null?e.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=qt(),e.sibling=null,a=St.current,oe(St,d?a&1|2:a&1),Ke&&Hs(n,l.treeForkCount),e):(xt(n),null);case 22:case 23:return Cn(n),Ah(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(xt(n),n.subtreeFlags&6&&(n.flags|=8192)):xt(n),a=n.updateQueue,a!==null&&Tc(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&$(_r),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Fs(Ot),xt(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function c_(e,n){switch(fh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Fs(Ot),Se(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return be(n),null;case 31:if(n.memoizedState!==null){if(Cn(n),n.alternate===null)throw Error(r(340));xr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Cn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));xr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return $(St),null;case 4:return Se(),null;case 10:return Fs(n.type),null;case 22:case 23:return Cn(n),Ah(),e!==null&&$(_r),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Fs(Ot),null;case 25:return null;default:return null}}function vp(e,n){switch(fh(n),n.tag){case 3:Fs(Ot),Se();break;case 26:case 27:case 5:be(n);break;case 4:Se();break;case 31:n.memoizedState!==null&&Cn(n);break;case 13:Cn(n);break;case 19:$(St);break;case 10:Fs(n.type);break;case 22:case 23:Cn(n),Ah(),e!==null&&$(_r);break;case 24:Fs(Ot)}}function Il(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&e)===e){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==d)}}catch(N){lt(n,n.return,N)}}function ja(e,n,a){try{var l=n.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&e)===e){var v=l.inst,N=v.destroy;if(N!==void 0){v.destroy=void 0,d=n;var I=a,q=N;try{q()}catch(J){lt(d,I,J)}}}l=l.next}while(l!==m)}}catch(J){lt(n,n.return,J)}}function bp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{ug(n,a)}catch(l){lt(e,e.return,l)}}}function _p(e,n,a){a.props=jr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){lt(e,n,l)}}function Ml(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(d){lt(e,n,d)}}function Cs(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){lt(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){lt(e,n,d)}else a.current=null}function Np(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){lt(e,e.return,d)}}function id(e,n,a){try{var l=e.stateNode;D_(l,e.type,a,n),l[$t]=n}catch(d){lt(e,e.return,d)}}function Ep(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ma(e.type)||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ep(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ma(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function od(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Wn));else if(l!==4&&(l===27&&Ma(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(od(e,n,a),e=e.sibling;e!==null;)od(e,n,a),e=e.sibling}function jc(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&Ma(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(jc(e,n,a),e=e.sibling;e!==null;)jc(e,n,a),e=e.sibling}function wp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);nn(n,l,a),n[Dt]=e,n[$t]=a}catch(m){lt(e,e.return,m)}}var Xs=!1,zt=!1,cd=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function u_(e,n){if(e=e.containerInfo,Rd=Yc,e=zm(e),nh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,N=-1,I=-1,q=0,J=0,se=e,H=null;t:for(;;){for(var Q;se!==a||d!==0&&se.nodeType!==3||(N=v+d),se!==m||l!==0&&se.nodeType!==3||(I=v+l),se.nodeType===3&&(v+=se.nodeValue.length),(Q=se.firstChild)!==null;)H=se,se=Q;for(;;){if(se===e)break t;if(H===a&&++q===d&&(N=v),H===m&&++J===l&&(I=v),(Q=se.nextSibling)!==null)break;se=H,H=se.parentNode}se=Q}a=N===-1||I===-1?null:{start:N,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:e,selectionRange:a},Yc=!1,Qt=n;Qt!==null;)if(n=Qt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Qt=e;else for(;Qt!==null;){switch(n=Qt,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=n,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var ye=jr(a.type,d);e=l.getSnapshotBeforeUpdate(ye,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(Re){lt(a,a.return,Re)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Od(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,Qt=e;break}Qt=n.return}}function jp(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Js(e,a),l&4&&Il(5,a);break;case 1:if(Js(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){lt(a,a.return,v)}else{var d=jr(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){lt(a,a.return,v)}}l&64&&bp(a),l&512&&Ml(a,a.return);break;case 3:if(Js(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{ug(e,n)}catch(v){lt(a,a.return,v)}}break;case 27:n===null&&l&4&&wp(a);case 26:case 5:Js(e,a),n===null&&l&4&&Np(a),l&512&&Ml(a,a.return);break;case 12:Js(e,a);break;case 31:Js(e,a),l&4&&Cp(e,a);break;case 13:Js(e,a),l&4&&Rp(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=v_.bind(null,a),L_(e,a))));break;case 22:if(l=a.memoizedState!==null||Xs,!l){n=n!==null&&n.memoizedState!==null||zt,d=Xs;var m=zt;Xs=l,(zt=n)&&!m?Ws(e,a,(a.subtreeFlags&8772)!==0):Js(e,a),Xs=d,zt=m}break;case 30:break;default:Js(e,a)}}function Sp(e){var n=e.alternate;n!==null&&(e.alternate=null,Sp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&qr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var bt=null,pn=!1;function Zs(e,n,a){for(a=a.child;a!==null;)Ap(e,n,a),a=a.sibling}function Ap(e,n,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:zt||Cs(a,n),Zs(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:zt||Cs(a,n);var l=bt,d=pn;Ma(a.type)&&(bt=a.stateNode,pn=!1),Zs(e,n,a),ql(a.stateNode),bt=l,pn=d;break;case 5:zt||Cs(a,n);case 6:if(l=bt,d=pn,bt=null,Zs(e,n,a),bt=l,pn=d,bt!==null)if(pn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(a.stateNode)}catch(m){lt(a,n,m)}else try{bt.removeChild(a.stateNode)}catch(m){lt(a,n,m)}break;case 18:bt!==null&&(pn?(e=bt,by(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ji(e)):by(bt,a.stateNode));break;case 4:l=bt,d=pn,bt=a.stateNode.containerInfo,pn=!0,Zs(e,n,a),bt=l,pn=d;break;case 0:case 11:case 14:case 15:ja(2,a,n),zt||ja(4,a,n),Zs(e,n,a);break;case 1:zt||(Cs(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&_p(a,n,l)),Zs(e,n,a);break;case 21:Zs(e,n,a);break;case 22:zt=(l=zt)||a.memoizedState!==null,Zs(e,n,a),zt=l;break;default:Zs(e,n,a)}}function Cp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ji(e)}catch(a){lt(n,n.return,a)}}}function Rp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ji(e)}catch(a){lt(n,n.return,a)}}function h_(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Tp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Tp),n;default:throw Error(r(435,e.tag))}}function Sc(e,n){var a=h_(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var d=b_.bind(null,e,l);l.then(d,d)}})}function yn(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=e,v=n,N=v;e:for(;N!==null;){switch(N.tag){case 27:if(Ma(N.type)){bt=N.stateNode,pn=!1;break e}break;case 5:bt=N.stateNode,pn=!1;break e;case 3:case 4:bt=N.stateNode.containerInfo,pn=!0;break e}N=N.return}if(bt===null)throw Error(r(160));Ap(m,v,d),bt=null,pn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Dp(n,e),n=n.sibling}var rs=null;function Dp(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(n,e),xn(e),l&4&&(ja(3,e,e.return),Il(3,e),ja(5,e,e.return));break;case 1:yn(n,e),xn(e),l&512&&(zt||a===null||Cs(a,a.return)),l&64&&Xs&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=rs;if(yn(n,e),xn(e),l&512&&(zt||a===null||Cs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[gs]||m[Dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),nn(m,l,a),m[Dt]=e,It(m),l=m;break e;case"link":var v=Dy("link","href",d).get(l+(a.href||""));if(v){for(var N=0;N<v.length;N++)if(m=v[N],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(N,1);break t}}m=d.createElement(l),nn(m,l,a),d.head.appendChild(m);break;case"meta":if(v=Dy("meta","content",d).get(l+(a.content||""))){for(N=0;N<v.length;N++)if(m=v[N],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(N,1);break t}}m=d.createElement(l),nn(m,l,a),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[Dt]=e,It(m),l=m}e.stateNode=l}else Iy(d,e.type,e.stateNode);else e.stateNode=Ry(d,l,e.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Iy(d,e.type,e.stateNode):Ry(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&id(e,e.memoizedProps,a.memoizedProps)}break;case 27:yn(n,e),xn(e),l&512&&(zt||a===null||Cs(a,a.return)),a!==null&&l&4&&id(e,e.memoizedProps,a.memoizedProps);break;case 5:if(yn(n,e),xn(e),l&512&&(zt||a===null||Cs(a,a.return)),e.flags&32){d=e.stateNode;try{gn(d,"")}catch(ye){lt(e,e.return,ye)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,id(e,d,a!==null?a.memoizedProps:d)),l&1024&&(cd=!0);break;case 6:if(yn(n,e),xn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(ye){lt(e,e.return,ye)}}break;case 3:if(Hc=null,d=rs,rs=Bc(n.containerInfo),yn(n,e),rs=d,xn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ji(n.containerInfo)}catch(ye){lt(e,e.return,ye)}cd&&(cd=!1,Ip(e));break;case 4:l=rs,rs=Bc(e.stateNode.containerInfo),yn(n,e),xn(e),rs=l;break;case 12:yn(n,e),xn(e);break;case 31:yn(n,e),xn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Sc(e,l)));break;case 13:yn(n,e),xn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Cc=qt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Sc(e,l)));break;case 22:d=e.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,q=Xs,J=zt;if(Xs=q||d,zt=J||I,yn(n,e),zt=J,Xs=q,xn(e),l&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(a===null||I||Xs||zt||Sr(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){I=a=n;try{if(m=I.stateNode,d)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{N=I.stateNode;var se=I.memoizedProps.style,H=se!=null&&se.hasOwnProperty("display")?se.display:null;N.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(ye){lt(I,I.return,ye)}}}else if(n.tag===6){if(a===null){I=n;try{I.stateNode.nodeValue=d?"":I.memoizedProps}catch(ye){lt(I,I.return,ye)}}}else if(n.tag===18){if(a===null){I=n;try{var Q=I.stateNode;d?_y(Q,!0):_y(I.stateNode,!1)}catch(ye){lt(I,I.return,ye)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Sc(e,a))));break;case 19:yn(n,e),xn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Sc(e,l)));break;case 30:break;case 21:break;default:yn(n,e),xn(e)}}function xn(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(Ep(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=ld(e);jc(e,m,d);break;case 5:var v=a.stateNode;a.flags&32&&(gn(v,""),a.flags&=-33);var N=ld(e);jc(e,N,v);break;case 3:case 4:var I=a.stateNode.containerInfo,q=ld(e);od(e,q,I);break;default:throw Error(r(161))}}catch(J){lt(e,e.return,J)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ip(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Ip(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Js(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)jp(e,n.alternate,n),n=n.sibling}function Sr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ja(4,n,n.return),Sr(n);break;case 1:Cs(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&_p(n,n.return,a),Sr(n);break;case 27:ql(n.stateNode);case 26:case 5:Cs(n,n.return),Sr(n);break;case 22:n.memoizedState===null&&Sr(n);break;case 30:Sr(n);break;default:Sr(n)}e=e.sibling}}function Ws(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,d=e,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:Ws(d,m,a),Il(4,m);break;case 1:if(Ws(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){lt(l,l.return,q)}if(l=m,d=l.updateQueue,d!==null){var N=l.stateNode;try{var I=d.shared.hiddenCallbacks;if(I!==null)for(d.shared.hiddenCallbacks=null,d=0;d<I.length;d++)cg(I[d],N)}catch(q){lt(l,l.return,q)}}a&&v&64&&bp(m),Ml(m,m.return);break;case 27:wp(m);case 26:case 5:Ws(d,m,a),a&&l===null&&v&4&&Np(m),Ml(m,m.return);break;case 12:Ws(d,m,a);break;case 31:Ws(d,m,a),a&&v&4&&Cp(d,m);break;case 13:Ws(d,m,a),a&&v&4&&Rp(d,m);break;case 22:m.memoizedState===null&&Ws(d,m,a),Ml(m,m.return);break;case 30:break;default:Ws(d,m,a)}n=n.sibling}}function ud(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&vl(a))}function hd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&vl(e))}function is(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Mp(e,n,a,l),n=n.sibling}function Mp(e,n,a,l){var d=n.flags;switch(n.tag){case 0:case 11:case 15:is(e,n,a,l),d&2048&&Il(9,n);break;case 1:is(e,n,a,l);break;case 3:is(e,n,a,l),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&vl(e)));break;case 12:if(d&2048){is(e,n,a,l),e=n.stateNode;try{var m=n.memoizedProps,v=m.id,N=m.onPostCommit;typeof N=="function"&&N(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){lt(n,n.return,I)}}else is(e,n,a,l);break;case 31:is(e,n,a,l);break;case 13:is(e,n,a,l);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?is(e,n,a,l):Ol(e,n):m._visibility&2?is(e,n,a,l):(m._visibility|=2,gi(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),d&2048&&ud(v,n);break;case 24:is(e,n,a,l),d&2048&&hd(n.alternate,n);break;default:is(e,n,a,l)}}function gi(e,n,a,l,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,v=n,N=a,I=l,q=v.flags;switch(v.tag){case 0:case 11:case 15:gi(m,v,N,I,d),Il(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?gi(m,v,N,I,d):Ol(m,v):(J._visibility|=2,gi(m,v,N,I,d)),d&&q&2048&&ud(v.alternate,v);break;case 24:gi(m,v,N,I,d),d&&q&2048&&hd(v.alternate,v);break;default:gi(m,v,N,I,d)}n=n.sibling}}function Ol(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,d=l.flags;switch(l.tag){case 22:Ol(a,l),d&2048&&ud(l.alternate,l);break;case 24:Ol(a,l),d&2048&&hd(l.alternate,l);break;default:Ol(a,l)}n=n.sibling}}var Vl=8192;function pi(e,n,a){if(e.subtreeFlags&Vl)for(e=e.child;e!==null;)Op(e,n,a),e=e.sibling}function Op(e,n,a){switch(e.tag){case 26:pi(e,n,a),e.flags&Vl&&e.memoizedState!==null&&Z_(a,rs,e.memoizedState,e.memoizedProps);break;case 5:pi(e,n,a);break;case 3:case 4:var l=rs;rs=Bc(e.stateNode.containerInfo),pi(e,n,a),rs=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Vl,Vl=16777216,pi(e,n,a),Vl=l):pi(e,n,a));break;default:pi(e,n,a)}}function Vp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function kl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Qt=l,zp(l,e)}Vp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)kp(e),e=e.sibling}function kp(e){switch(e.tag){case 0:case 11:case 15:kl(e),e.flags&2048&&ja(9,e,e.return);break;case 3:kl(e);break;case 12:kl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ac(e)):kl(e);break;default:kl(e)}}function Ac(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Qt=l,zp(l,e)}Vp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ja(8,n,n.return),Ac(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Ac(n));break;default:Ac(n)}e=e.sibling}}function zp(e,n){for(;Qt!==null;){var a=Qt;switch(a.tag){case 0:case 11:case 15:ja(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:vl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qt=l;else e:for(a=e;Qt!==null;){l=Qt;var d=l.sibling,m=l.return;if(Sp(l),l===a){Qt=null;break e}if(d!==null){d.return=m,Qt=d;break e}Qt=m}}}var d_={getCacheForType:function(e){var n=en(Ot),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return en(Ot).controller.signal}},f_=typeof WeakMap=="function"?WeakMap:Map,nt=0,ft=null,qe=null,Fe=0,it=0,Rn=null,Sa=!1,yi=!1,dd=!1,ea=0,wt=0,Aa=0,Ar=0,fd=0,Dn=0,xi=0,zl=null,vn=null,md=!1,Cc=0,Up=0,Rc=1/0,Dc=null,Ca=null,Ht=0,Ra=null,vi=null,ta=0,gd=0,pd=null,Lp=null,Ul=0,yd=null;function In(){return(nt&2)!==0&&Fe!==0?Fe&-Fe:F.T!==null?Ed():Io()}function Pp(){if(Dn===0)if((Fe&536870912)===0||Ke){var e=tr;tr<<=1,(tr&3932160)===0&&(tr=262144),Dn=e}else Dn=536870912;return e=An.current,e!==null&&(e.flags|=32),Dn}function bn(e,n,a){(e===ft&&(it===2||it===9)||e.cancelPendingCommit!==null)&&(bi(e,0),Da(e,Fe,Dn,!1)),nr(e,a),((nt&2)===0||e!==ft)&&(e===ft&&((nt&2)===0&&(Ar|=a),wt===4&&Da(e,Fe,Dn,!1)),Rs(e))}function Bp(e,n,a){if((nt&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Xn(e,n),d=l?p_(e,n):vd(e,n,!0),m=l;do{if(d===0){yi&&!l&&Da(e,n,0,!1);break}else{if(a=e.current.alternate,m&&!m_(a)){d=vd(e,n,!1),m=!1;continue}if(d===2){if(m=n,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var N=e;d=zl;var I=N.current.memoizedState.isDehydrated;if(I&&(bi(N,v).flags|=256),v=vd(N,v,!1),v!==2){if(dd&&!I){N.errorRecoveryDisabledLanes|=m,Ar|=m,d=4;break e}m=vn,vn=d,m!==null&&(vn===null?vn=m:vn.push.apply(vn,m))}d=v}if(m=!1,d!==2)continue}}if(d===1){bi(e,0),Da(e,n,0,!0);break}e:{switch(l=e,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Da(l,n,Dn,!Sa);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(d=Cc+300-qt(),10<d)){if(Da(l,n,Dn,!Sa),ds(l,0,!0)!==0)break e;ta=n,l.timeoutHandle=xy(qp.bind(null,l,a,vn,Dc,md,n,Dn,Ar,xi,Sa,m,"Throttled",-0,0),d);break e}qp(l,a,vn,Dc,md,n,Dn,Ar,xi,Sa,m,null,-0,0)}}break}while(!0);Rs(e)}function qp(e,n,a,l,d,m,v,N,I,q,J,se,H,Q){if(e.timeoutHandle=-1,se=n.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},Op(n,m,se);var ye=(m&62914560)===m?Cc-qt():(m&4194048)===m?Up-qt():0;if(ye=J_(se,ye),ye!==null){ta=m,e.cancelPendingCommit=ye(Xp.bind(null,e,n,m,a,l,d,v,N,I,J,se,null,H,Q)),Da(e,m,v,!q);return}}Xp(e,n,m,a,l,d,v,N,I)}function m_(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!jn(m(),d))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Da(e,n,a,l){n&=~fd,n&=~Ar,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var d=n;0<d;){var m=31-Tt(d),v=1<<m;l[m]=-1,d&=~v}a!==0&&sr(e,a,n)}function Ic(){return(nt&6)===0?(Ll(0),!1):!0}function xd(){if(qe!==null){if(it===0)var e=qe.return;else e=qe,Gs=vr=null,Oh(e),ui=null,_l=0,e=qe;for(;e!==null;)vp(e.alternate,e),e=e.return;qe=null}}function bi(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,O_(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ta=0,xd(),ft=e,qe=a=qs(e.current,null),Fe=n,it=0,Rn=null,Sa=!1,yi=Xn(e,n),dd=!1,xi=Dn=fd=Ar=Aa=wt=0,vn=zl=null,md=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var d=31-Tt(l),m=1<<d;n|=e[d],l&=~m}return ea=n,Wo(),a}function Hp(e,n){Le=null,F.H=Cl,n===ci||n===lc?(n=rg(),it=3):n===Nh?(n=rg(),it=4):it=n===Xh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Rn=n,qe===null&&(wt=1,_c(e,Bn(n,e.current)))}function Gp(){var e=An.current;return e===null?!0:(Fe&4194048)===Fe?Fn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?e===Fn:!1}function Fp(){var e=F.H;return F.H=Cl,e===null?Cl:e}function $p(){var e=F.A;return F.A=d_,e}function Mc(){wt=4,Sa||(Fe&4194048)!==Fe&&An.current!==null||(yi=!0),(Aa&134217727)===0&&(Ar&134217727)===0||ft===null||Da(ft,Fe,Dn,!1)}function vd(e,n,a){var l=nt;nt|=2;var d=Fp(),m=$p();(ft!==e||Fe!==n)&&(Dc=null,bi(e,n)),n=!1;var v=wt;e:do try{if(it!==0&&qe!==null){var N=qe,I=Rn;switch(it){case 8:xd(),v=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(n=!0);var q=it;if(it=0,Rn=null,_i(e,N,I,q),a&&yi){v=0;break e}break;default:q=it,it=0,Rn=null,_i(e,N,I,q)}}g_(),v=wt;break}catch(J){Hp(e,J)}while(!0);return n&&e.shellSuspendCounter++,Gs=vr=null,nt=l,F.H=d,F.A=m,qe===null&&(ft=null,Fe=0,Wo()),v}function g_(){for(;qe!==null;)Yp(qe)}function p_(e,n){var a=nt;nt|=2;var l=Fp(),d=$p();ft!==e||Fe!==n?(Dc=null,Rc=qt()+500,bi(e,n)):yi=Xn(e,n);e:do try{if(it!==0&&qe!==null){n=qe;var m=Rn;t:switch(it){case 1:it=0,Rn=null,_i(e,n,m,1);break;case 2:case 9:if(sg(m)){it=0,Rn=null,Qp(n);break}n=function(){it!==2&&it!==9||ft!==e||(it=7),Rs(e)},m.then(n,n);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:sg(m)?(it=0,Rn=null,Qp(n)):(it=0,Rn=null,_i(e,n,m,7));break;case 5:var v=null;switch(qe.tag){case 26:v=qe.memoizedState;case 5:case 27:var N=qe;if(v?My(v):N.stateNode.complete){it=0,Rn=null;var I=N.sibling;if(I!==null)qe=I;else{var q=N.return;q!==null?(qe=q,Oc(q)):qe=null}break t}}it=0,Rn=null,_i(e,n,m,5);break;case 6:it=0,Rn=null,_i(e,n,m,6);break;case 8:xd(),wt=6;break e;default:throw Error(r(462))}}y_();break}catch(J){Hp(e,J)}while(!0);return Gs=vr=null,F.H=l,F.A=d,nt=a,qe!==null?0:(ft=null,Fe=0,Wo(),wt)}function y_(){for(;qe!==null&&!Ae();)Yp(qe)}function Yp(e){var n=yp(e.alternate,e,ea);e.memoizedProps=e.pendingProps,n===null?Oc(e):qe=n}function Qp(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=hp(a,n,n.pendingProps,n.type,void 0,Fe);break;case 11:n=hp(a,n,n.pendingProps,n.type.render,n.ref,Fe);break;case 5:Oh(n);default:vp(a,n),n=qe=$m(n,ea),n=yp(a,n,ea)}e.memoizedProps=e.pendingProps,n===null?Oc(e):qe=n}function _i(e,n,a,l){Gs=vr=null,Oh(n),ui=null,_l=0;var d=n.return;try{if(r_(e,d,n,a,Fe)){wt=1,_c(e,Bn(a,e.current)),qe=null;return}}catch(m){if(d!==null)throw qe=d,m;wt=1,_c(e,Bn(a,e.current)),qe=null;return}n.flags&32768?(Ke||l===1?e=!0:yi||(Fe&536870912)!==0?e=!1:(Sa=e=!0,(l===2||l===9||l===3||l===6)&&(l=An.current,l!==null&&l.tag===13&&(l.flags|=16384))),Kp(n,e)):Oc(n)}function Oc(e){var n=e;do{if((n.flags&32768)!==0){Kp(n,Sa);return}e=n.return;var a=o_(n.alternate,n,ea);if(a!==null){qe=a;return}if(n=n.sibling,n!==null){qe=n;return}qe=n=e}while(n!==null);wt===0&&(wt=5)}function Kp(e,n){do{var a=c_(e.alternate,e);if(a!==null){a.flags&=32767,qe=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){qe=e;return}qe=e=a}while(e!==null);wt=6,qe=null}function Xp(e,n,a,l,d,m,v,N,I){e.cancelPendingCommit=null;do Vc();while(Ht!==0);if((nt&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(m=n.lanes|n.childLanes,m|=lh,Ju(e,a,m,v,N,I),e===ft&&(qe=ft=null,Fe=0),vi=n,Ra=e,ta=a,gd=m,pd=d,Lp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,__(la,function(){return ty(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,d=K.p,K.p=2,v=nt,nt|=4;try{u_(e,n,a)}finally{nt=v,K.p=d,F.T=l}}Ht=1,Zp(),Jp(),Wp()}}function Zp(){if(Ht===1){Ht=0;var e=Ra,n=vi,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var l=K.p;K.p=2;var d=nt;nt|=4;try{Dp(n,e);var m=Dd,v=zm(e.containerInfo),N=m.focusedElem,I=m.selectionRange;if(v!==N&&N&&N.ownerDocument&&km(N.ownerDocument.documentElement,N)){if(I!==null&&nh(N)){var q=I.start,J=I.end;if(J===void 0&&(J=q),"selectionStart"in N)N.selectionStart=q,N.selectionEnd=Math.min(J,N.value.length);else{var se=N.ownerDocument||document,H=se&&se.defaultView||window;if(H.getSelection){var Q=H.getSelection(),ye=N.textContent.length,Re=Math.min(I.start,ye),dt=I.end===void 0?Re:Math.min(I.end,ye);!Q.extend&&Re>dt&&(v=dt,dt=Re,Re=v);var U=Vm(N,Re),z=Vm(N,dt);if(U&&z&&(Q.rangeCount!==1||Q.anchorNode!==U.node||Q.anchorOffset!==U.offset||Q.focusNode!==z.node||Q.focusOffset!==z.offset)){var B=se.createRange();B.setStart(U.node,U.offset),Q.removeAllRanges(),Re>dt?(Q.addRange(B),Q.extend(z.node,z.offset)):(B.setEnd(z.node,z.offset),Q.addRange(B))}}}}for(se=[],Q=N;Q=Q.parentNode;)Q.nodeType===1&&se.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<se.length;N++){var te=se[N];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Yc=!!Rd,Dd=Rd=null}finally{nt=d,K.p=l,F.T=a}}e.current=n,Ht=2}}function Jp(){if(Ht===2){Ht=0;var e=Ra,n=vi,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var l=K.p;K.p=2;var d=nt;nt|=4;try{jp(e,n.alternate,n)}finally{nt=d,K.p=l,F.T=a}}Ht=3}}function Wp(){if(Ht===4||Ht===3){Ht=0,Ge();var e=Ra,n=vi,a=ta,l=Lp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ht=5:(Ht=0,vi=Ra=null,ey(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Ca=null),Us(a),n=n.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Kn,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=F.T,d=K.p,K.p=2,F.T=null;try{for(var m=e.onRecoverableError,v=0;v<l.length;v++){var N=l[v];m(N.value,{componentStack:N.stack})}}finally{F.T=n,K.p=d}}(ta&3)!==0&&Vc(),Rs(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===yd?Ul++:(Ul=0,yd=e):Ul=0,Ll(0)}}function ey(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,vl(n)))}function Vc(){return Zp(),Jp(),Wp(),ty()}function ty(){if(Ht!==5)return!1;var e=Ra,n=gd;gd=0;var a=Us(ta),l=F.T,d=K.p;try{K.p=32>a?32:a,F.T=null,a=pd,pd=null;var m=Ra,v=ta;if(Ht=0,vi=Ra=null,ta=0,(nt&6)!==0)throw Error(r(331));var N=nt;if(nt|=4,kp(m.current),Mp(m,m.current,v,a),nt=N,Ll(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Kn,m)}catch{}return!0}finally{K.p=d,F.T=l,ey(e,n)}}function ny(e,n,a){n=Bn(a,n),n=Kh(e.stateNode,n,2),e=Ea(e,n,2),e!==null&&(nr(e,2),Rs(e))}function lt(e,n,a){if(e.tag===3)ny(e,e,a);else for(;n!==null;){if(n.tag===3){ny(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ca===null||!Ca.has(l))){e=Bn(a,e),a=sp(2),l=Ea(n,a,2),l!==null&&(ap(a,l,n,e),nr(l,2),Rs(l));break}}n=n.return}}function bd(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new f_;var d=new Set;l.set(n,d)}else d=l.get(n),d===void 0&&(d=new Set,l.set(n,d));d.has(a)||(dd=!0,d.add(a),e=x_.bind(null,e,n,a),n.then(e,e))}function x_(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ft===e&&(Fe&a)===a&&(wt===4||wt===3&&(Fe&62914560)===Fe&&300>qt()-Cc?(nt&2)===0&&bi(e,0):fd|=a,xi===Fe&&(xi=0)),Rs(e)}function sy(e,n){n===0&&(n=Do()),e=pr(e,n),e!==null&&(nr(e,n),Rs(e))}function v_(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),sy(e,a)}function b_(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),sy(e,a)}function __(e,n){return D(e,n)}var kc=null,Ni=null,_d=!1,zc=!1,Nd=!1,Ia=0;function Rs(e){e!==Ni&&e.next===null&&(Ni===null?kc=Ni=e:Ni=Ni.next=e),zc=!0,_d||(_d=!0,E_())}function Ll(e,n){if(!Nd&&zc){Nd=!0;do for(var a=!1,l=kc;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var v=l.suspendedLanes,N=l.pingedLanes;m=(1<<31-Tt(42|e)+1)-1,m&=d&~(v&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,ly(l,m))}else m=Fe,m=ds(l,l===ft?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Xn(l,m)||(a=!0,ly(l,m));l=l.next}while(a);Nd=!1}}function N_(){ay()}function ay(){zc=_d=!1;var e=0;Ia!==0&&M_()&&(e=Ia);for(var n=qt(),a=null,l=kc;l!==null;){var d=l.next,m=ry(l,n);m===0?(l.next=null,a===null?kc=d:a.next=d,d===null&&(Ni=a)):(a=l,(e!==0||(m&3)!==0)&&(zc=!0)),l=d}Ht!==0&&Ht!==5||Ll(e),Ia!==0&&(Ia=0)}function ry(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-Tt(m),N=1<<v,I=d[v];I===-1?((N&a)===0||(N&l)!==0)&&(d[v]=Zu(N,n)):I<=n&&(e.expiredLanes|=N),m&=~N}if(n=ft,a=Fe,a=ds(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(it===2||it===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ce(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Xn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&ce(l),Us(a)){case 2:case 8:a=Ki;break;case 32:a=la;break;case 268435456:a=jo;break;default:a=la}return l=iy.bind(null,e),a=D(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&ce(l),e.callbackPriority=2,e.callbackNode=null,2}function iy(e,n){if(Ht!==0&&Ht!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Vc()&&e.callbackNode!==a)return null;var l=Fe;return l=ds(e,e===ft?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Bp(e,l,n),ry(e,qt()),e.callbackNode!=null&&e.callbackNode===a?iy.bind(null,e):null)}function ly(e,n){if(Vc())return null;Bp(e,n,!0)}function E_(){V_(function(){(nt&6)!==0?D(Qi,N_):ay()})}function Ed(){if(Ia===0){var e=li;e===0&&(e=us,us<<=1,(us&261888)===0&&(us=256)),Ia=e}return Ia}function oy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$r(""+e)}function cy(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function w_(e,n,a,l,d){if(n==="submit"&&a&&a.stateNode===d){var m=oy((d[$t]||null).action),v=l.submitter;v&&(n=(n=v[$t]||null)?oy(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var N=new Es("action","action",null,l,d);e.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ia!==0){var I=v?cy(d,v):new FormData(d);Hh(a,{pending:!0,data:I,method:d.method,action:m},null,I)}}else typeof m=="function"&&(N.preventDefault(),I=v?cy(d,v):new FormData(d),Hh(a,{pending:!0,data:I,method:d.method,action:m},m,I))},currentTarget:d}]})}}for(var wd=0;wd<ih.length;wd++){var Td=ih[wd],T_=Td.toLowerCase(),j_=Td[0].toUpperCase()+Td.slice(1);as(T_,"on"+j_)}as(Pm,"onAnimationEnd"),as(Bm,"onAnimationIteration"),as(qm,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(qb,"onTransitionRun"),as(Hb,"onTransitionStart"),as(Gb,"onTransitionCancel"),as(Hm,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function uy(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var v=l.length-1;0<=v;v--){var N=l[v],I=N.instance,q=N.currentTarget;if(N=N.listener,I!==m&&d.isPropagationStopped())break e;m=N,d.currentTarget=q;try{m(d)}catch(J){Jo(J)}d.currentTarget=null,m=I}else for(v=0;v<l.length;v++){if(N=l[v],I=N.instance,q=N.currentTarget,N=N.listener,I!==m&&d.isPropagationStopped())break e;m=N,d.currentTarget=q;try{m(d)}catch(J){Jo(J)}d.currentTarget=null,m=I}}}}function He(e,n){var a=n[Br];a===void 0&&(a=n[Br]=new Set);var l=e+"__bubble";a.has(l)||(hy(n,e,2,!1),a.add(l))}function jd(e,n,a){var l=0;n&&(l|=4),hy(a,e,l,n)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Sd(e){if(!e[Uc]){e[Uc]=!0,Ji.forEach(function(a){a!=="selectionchange"&&(S_.has(a)||jd(a,!1,e),jd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Uc]||(n[Uc]=!0,jd("selectionchange",!1,n))}}function hy(e,n,a,l){switch(Py(n)){case 2:var d=t1;break;case 8:d=n1;break;default:d=qd}a=d.bind(null,n,a,e),d=void 0,!or||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(n,a,{capture:!0,passive:d}):e.addEventListener(n,a,!0):d!==void 0?e.addEventListener(n,a,{passive:d}):e.addEventListener(n,a,!1)}function Ad(e,n,a,l,d){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var N=l.stateNode.containerInfo;if(N===d)break;if(v===4)for(v=l.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;N!==null;){if(v=ps(N),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){l=m=v;continue e}N=N.parentNode}}l=l.return}fa(function(){var q=m,J=zn(a),se=[];e:{var H=Gm.get(e);if(H!==void 0){var Q=Es,ye=e;switch(e){case"keypress":if(ur(a)===0)break e;case"keydown":case"keyup":Q=Ko;break;case"focusin":ye="focus",Q=dr;break;case"focusout":ye="blur",Q=dr;break;case"beforeblur":case"afterblur":Q=dr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Po;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=g;break;case Pm:case Bm:case qm:Q=qo;break;case Hm:Q=E;break;case"scroll":case"scrollend":Q=ul;break;case"wheel":Q=Y;break;case"copy":case"cut":case"paste":Q=Ho;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Bs;break;case"toggle":case"beforetoggle":Q=Ue}var Re=(n&4)!==0,dt=!Re&&(e==="scroll"||e==="scrollend"),U=Re?H!==null?H+"Capture":null:H;Re=[];for(var z=q,B;z!==null;){var te=z;if(B=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||B===null||U===null||(te=es(z,U),te!=null&&Re.push(Bl(z,te,B))),dt)break;z=z.return}0<Re.length&&(H=new Q(H,ye,null,a,J),se.push({event:H,listeners:Re}))}}if((n&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",H&&a!==ll&&(ye=a.relatedTarget||a.fromElement)&&(ps(ye)||ye[ms]))break e;if((Q||H)&&(H=J.window===J?J:(H=J.ownerDocument)?H.defaultView||H.parentWindow:window,Q?(ye=a.relatedTarget||a.toElement,Q=q,ye=ye?ps(ye):null,ye!==null&&(dt=h(ye),Re=ye.tag,ye!==dt||Re!==5&&Re!==27&&Re!==6)&&(ye=null)):(Q=null,ye=q),Q!==ye)){if(Re=hl,te="onMouseLeave",U="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(Re=Bs,te="onPointerLeave",U="onPointerEnter",z="pointer"),dt=Q==null?H:wn(Q),B=ye==null?H:wn(ye),H=new Re(te,z+"leave",Q,a,J),H.target=dt,H.relatedTarget=B,te=null,ps(J)===q&&(Re=new Re(U,z+"enter",ye,a,J),Re.target=B,Re.relatedTarget=dt,te=Re),dt=te,Q&&ye)t:{for(Re=A_,U=Q,z=ye,B=0,te=U;te;te=Re(te))B++;te=0;for(var Ne=z;Ne;Ne=Re(Ne))te++;for(;0<B-te;)U=Re(U),B--;for(;0<te-B;)z=Re(z),te--;for(;B--;){if(U===z||z!==null&&U===z.alternate){Re=U;break t}U=Re(U),z=Re(z)}Re=null}else Re=null;Q!==null&&dy(se,H,Q,Re,!1),ye!==null&&dt!==null&&dy(se,dt,ye,Re,!0)}}e:{if(H=q?wn(q):window,Q=H.nodeName&&H.nodeName.toLowerCase(),Q==="select"||Q==="input"&&H.type==="file")var We=Cm;else if(Sm(H))if(Rm)We=Lb;else{We=zb;var xe=kb}else Q=H.nodeName,!Q||Q.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&Fr(q.elementType)&&(We=Cm):We=Ub;if(We&&(We=We(e,q))){Am(se,We,a,J);break e}xe&&xe(e,H,q),e==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&al(H,"number",H.value)}switch(xe=q?wn(q):window,e){case"focusin":(Sm(xe)||xe.contentEditable==="true")&&(Wr=xe,sh=q,pl=null);break;case"focusout":pl=sh=Wr=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,Um(se,a,J);break;case"selectionchange":if(Bb)break;case"keydown":case"keyup":Um(se,a,J)}var Be;if(tt)e:{switch(e){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Jr?fr(e,a)&&($e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&($e="onCompositionStart");$e&&(js&&a.locale!=="ko"&&(Jr||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Jr&&(Be=cl()):(Ns=J,ol="value"in Ns?Ns.value:Ns.textContent,Jr=!0)),xe=Lc(q,$e),0<xe.length&&($e=new Ts($e,e,null,a,J),se.push({event:$e,listeners:xe}),Be?$e.data=Be:(Be=Zr(a),Be!==null&&($e.data=Be)))),(Be=Ln?Ib(e,a):Mb(e,a))&&($e=Lc(q,"onBeforeInput"),0<$e.length&&(xe=new Ts("onBeforeInput","beforeinput",null,a,J),se.push({event:xe,listeners:$e}),xe.data=Be)),w_(se,e,q,a,J)}uy(se,n)})}function Bl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Lc(e,n){for(var a=n+"Capture",l=[];e!==null;){var d=e,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=es(e,a),d!=null&&l.unshift(Bl(e,d,m)),d=es(e,n),d!=null&&l.push(Bl(e,d,m))),e.tag===3)return l;e=e.return}return[]}function A_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function dy(e,n,a,l,d){for(var m=n._reactName,v=[];a!==null&&a!==l;){var N=a,I=N.alternate,q=N.stateNode;if(N=N.tag,I!==null&&I===l)break;N!==5&&N!==26&&N!==27||q===null||(I=q,d?(q=es(a,m),q!=null&&v.unshift(Bl(a,q,I))):d||(q=es(a,m),q!=null&&v.push(Bl(a,q,I)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var C_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function fy(e){return(typeof e=="string"?e:""+e).replace(C_,`
`).replace(R_,"")}function my(e,n){return n=fy(n),fy(e)===n}function ht(e,n,a,l,d,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||gn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&gn(e,""+l);break;case"className":Tn(e,"class",l);break;case"tabIndex":Tn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(e,a,l);break;case"style":il(e,l,m);break;case"data":if(n!=="object"){Tn(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=$r(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&ht(e,n,"name",d.name,d,null),ht(e,n,"formEncType",d.formEncType,d,null),ht(e,n,"formMethod",d.formMethod,d,null),ht(e,n,"formTarget",d.formTarget,d,null)):(ht(e,n,"encType",d.encType,d,null),ht(e,n,"method",d.method,d,null),ht(e,n,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=$r(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Wn);break;case"onScroll":l!=null&&He("scroll",e);break;case"onScrollEnd":l!=null&&He("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=$r(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":He("beforetoggle",e),He("toggle",e),Hr(e,"popover",l);break;case"xlinkActuate":Mt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Mt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Mt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Mt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Mt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Mt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Mt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Mt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Mt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Hr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Lo.get(a)||a,Hr(e,a,l))}}function Cd(e,n,a,l,d,m){switch(a){case"style":il(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?gn(e,l):(typeof l=="number"||typeof l=="bigint")&&gn(e,""+l);break;case"onScroll":l!=null&&He("scroll",e);break;case"onScrollEnd":l!=null&&He("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wi.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),n=a.slice(2,d?a.length-7:void 0),m=e[$t]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(n,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,d);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Hr(e,a,l)}}}function nn(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",e),He("load",e);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ht(e,n,m,v,a,null)}}d&&ht(e,n,"srcSet",a.srcSet,a,null),l&&ht(e,n,"src",a.src,a,null);return;case"input":He("invalid",e);var N=m=v=d=null,I=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":d=J;break;case"type":v=J;break;case"checked":I=J;break;case"defaultChecked":q=J;break;case"value":m=J;break;case"defaultValue":N=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,n));break;default:ht(e,n,l,J,a,null)}}ko(e,m,N,I,q,v,d,!1);return;case"select":He("invalid",e),l=v=m=null;for(d in a)if(a.hasOwnProperty(d)&&(N=a[d],N!=null))switch(d){case"value":m=N;break;case"defaultValue":v=N;break;case"multiple":l=N;default:ht(e,n,d,N,a,null)}n=m,a=v,e.multiple=!!l,n!=null?ca(e,!!l,n,!1):a!=null&&ca(e,!!l,a,!0);return;case"textarea":He("invalid",e),m=d=l=null;for(v in a)if(a.hasOwnProperty(v)&&(N=a[v],N!=null))switch(v){case"value":l=N;break;case"defaultValue":d=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:ht(e,n,v,N,a,null)}ua(e,l,d,m);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ht(e,n,I,l,a,null)}return;case"dialog":He("beforetoggle",e),He("toggle",e),He("cancel",e),He("close",e);break;case"iframe":case"object":He("load",e);break;case"video":case"audio":for(l=0;l<Pl.length;l++)He(Pl[l],e);break;case"image":He("error",e),He("load",e);break;case"details":He("toggle",e);break;case"embed":case"source":case"link":He("error",e),He("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ht(e,n,q,l,a,null)}return;default:if(Fr(n)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&Cd(e,n,J,l,a,void 0));return}}for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null&&ht(e,n,N,l,a,null))}function D_(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,v=null,N=null,I=null,q=null,J=null;for(Q in a){var se=a[Q];if(a.hasOwnProperty(Q)&&se!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":I=se;default:l.hasOwnProperty(Q)||ht(e,n,Q,null,l,se)}}for(var H in l){var Q=l[H];if(se=a[H],l.hasOwnProperty(H)&&(Q!=null||se!=null))switch(H){case"type":m=Q;break;case"name":d=Q;break;case"checked":q=Q;break;case"defaultChecked":J=Q;break;case"value":v=Q;break;case"defaultValue":N=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,n));break;default:Q!==se&&ht(e,n,H,Q,l,se)}}Gr(e,v,N,I,q,J,m,d);return;case"select":Q=v=N=H=null;for(m in a)if(I=a[m],a.hasOwnProperty(m)&&I!=null)switch(m){case"value":break;case"multiple":Q=I;default:l.hasOwnProperty(m)||ht(e,n,m,null,l,I)}for(d in l)if(m=l[d],I=a[d],l.hasOwnProperty(d)&&(m!=null||I!=null))switch(d){case"value":H=m;break;case"defaultValue":N=m;break;case"multiple":v=m;default:m!==I&&ht(e,n,d,m,l,I)}n=N,a=v,l=Q,H!=null?ca(e,!!a,H,!1):!!l!=!!a&&(n!=null?ca(e,!!a,n,!0):ca(e,!!a,a?[]:"",!1));return;case"textarea":Q=H=null;for(N in a)if(d=a[N],a.hasOwnProperty(N)&&d!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ht(e,n,N,null,l,d)}for(v in l)if(d=l[v],m=a[v],l.hasOwnProperty(v)&&(d!=null||m!=null))switch(v){case"value":H=d;break;case"defaultValue":Q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&ht(e,n,v,d,l,m)}zo(e,H,Q);return;case"option":for(var ye in a)if(H=a[ye],a.hasOwnProperty(ye)&&H!=null&&!l.hasOwnProperty(ye))switch(ye){case"selected":e.selected=!1;break;default:ht(e,n,ye,null,l,H)}for(I in l)if(H=l[I],Q=a[I],l.hasOwnProperty(I)&&H!==Q&&(H!=null||Q!=null))switch(I){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ht(e,n,I,H,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in a)H=a[Re],a.hasOwnProperty(Re)&&H!=null&&!l.hasOwnProperty(Re)&&ht(e,n,Re,null,l,H);for(q in l)if(H=l[q],Q=a[q],l.hasOwnProperty(q)&&H!==Q&&(H!=null||Q!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,n));break;default:ht(e,n,q,H,l,Q)}return;default:if(Fr(n)){for(var dt in a)H=a[dt],a.hasOwnProperty(dt)&&H!==void 0&&!l.hasOwnProperty(dt)&&Cd(e,n,dt,void 0,l,H);for(J in l)H=l[J],Q=a[J],!l.hasOwnProperty(J)||H===Q||H===void 0&&Q===void 0||Cd(e,n,J,H,l,Q);return}}for(var U in a)H=a[U],a.hasOwnProperty(U)&&H!=null&&!l.hasOwnProperty(U)&&ht(e,n,U,null,l,H);for(se in l)H=l[se],Q=a[se],!l.hasOwnProperty(se)||H===Q||H==null&&Q==null||ht(e,n,se,H,l,Q)}function gy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function I_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],m=d.transferSize,v=d.initiatorType,N=d.duration;if(m&&N&&gy(v)){for(v=0,N=d.responseEnd,l+=1;l<a.length;l++){var I=a[l],q=I.startTime;if(q>N)break;var J=I.transferSize,se=I.initiatorType;J&&gy(se)&&(I=I.responseEnd,v+=J*(I<N?1:(N-q)/(I-q)))}if(--l,n+=8*(m+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Rd=null,Dd=null;function Pc(e){return e.nodeType===9?e:e.ownerDocument}function py(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Id(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Md=null;function M_(){var e=window.event;return e&&e.type==="popstate"?e===Md?!1:(Md=e,!0):(Md=null,!1)}var xy=typeof setTimeout=="function"?setTimeout:void 0,O_=typeof clearTimeout=="function"?clearTimeout:void 0,vy=typeof Promise=="function"?Promise:void 0,V_=typeof queueMicrotask=="function"?queueMicrotask:typeof vy<"u"?function(e){return vy.resolve(null).then(e).catch(k_)}:xy;function k_(e){setTimeout(function(){throw e})}function Ma(e){return e==="head"}function by(e,n){var a=n,l=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(d),ji(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ql(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ql(a);for(var m=a.firstChild;m;){var v=m.nextSibling,N=m.nodeName;m[gs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&ql(e.ownerDocument.body);a=d}while(a);ji(n)}function _y(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Od(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Od(a),qr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function z_(e,n,a,l){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[gs])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=$n(e.nextSibling),e===null)break}return null}function U_(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=$n(e.nextSibling),e===null))return null;return e}function Ny(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=$n(e.nextSibling),e===null))return null;return e}function Vd(e){return e.data==="$?"||e.data==="$~"}function kd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function L_(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function $n(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var zd=null;function Ey(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return $n(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function wy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function Ty(e,n,a){switch(n=Pc(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function ql(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);qr(e)}var Yn=new Map,jy=new Set;function Bc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var na=K.d;K.d={f:P_,r:B_,D:q_,C:H_,L:G_,m:F_,X:Y_,S:$_,M:Q_};function P_(){var e=na.f(),n=Ic();return e||n}function B_(e){var n=kn(e);n!==null&&n.tag===5&&n.type==="form"?Hg(n):na.r(e)}var Ei=typeof document>"u"?null:document;function Sy(e,n,a){var l=Ei;if(l&&typeof n=="string"&&n){var d=mn(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),jy.has(d)||(jy.add(d),e={rel:e,crossOrigin:a,href:n},l.querySelector(d)===null&&(n=l.createElement("link"),nn(n,"link",e),It(n),l.head.appendChild(n)))}}function q_(e){na.D(e),Sy("dns-prefetch",e,null)}function H_(e,n){na.C(e,n),Sy("preconnect",e,n)}function G_(e,n,a){na.L(e,n,a);var l=Ei;if(l&&e&&n){var d='link[rel="preload"][as="'+mn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+mn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+mn(a.imageSizes)+'"]')):d+='[href="'+mn(e)+'"]';var m=d;switch(n){case"style":m=wi(e);break;case"script":m=Ti(e)}Yn.has(m)||(e=T({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Yn.set(m,e),l.querySelector(d)!==null||n==="style"&&l.querySelector(Hl(m))||n==="script"&&l.querySelector(Gl(m))||(n=l.createElement("link"),nn(n,"link",e),It(n),l.head.appendChild(n)))}}function F_(e,n){na.m(e,n);var a=Ei;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+mn(l)+'"][href="'+mn(e)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ti(e)}if(!Yn.has(m)&&(e=T({rel:"modulepreload",href:e},n),Yn.set(m,e),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Gl(m)))return}l=a.createElement("link"),nn(l,"link",e),It(l),a.head.appendChild(l)}}}function $_(e,n,a){na.S(e,n,a);var l=Ei;if(l&&e){var d=ys(l).hoistableStyles,m=wi(e);n=n||"default";var v=d.get(m);if(!v){var N={loading:0,preload:null};if(v=l.querySelector(Hl(m)))N.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Yn.get(m))&&Ud(e,a);var I=v=l.createElement("link");It(I),nn(I,"link",e),I._p=new Promise(function(q,J){I.onload=q,I.onerror=J}),I.addEventListener("load",function(){N.loading|=1}),I.addEventListener("error",function(){N.loading|=2}),N.loading|=4,qc(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:N},d.set(m,v)}}}function Y_(e,n){na.X(e,n);var a=Ei;if(a&&e){var l=ys(a).hoistableScripts,d=Ti(e),m=l.get(d);m||(m=a.querySelector(Gl(d)),m||(e=T({src:e,async:!0},n),(n=Yn.get(d))&&Ld(e,n),m=a.createElement("script"),It(m),nn(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function Q_(e,n){na.M(e,n);var a=Ei;if(a&&e){var l=ys(a).hoistableScripts,d=Ti(e),m=l.get(d);m||(m=a.querySelector(Gl(d)),m||(e=T({src:e,async:!0,type:"module"},n),(n=Yn.get(d))&&Ld(e,n),m=a.createElement("script"),It(m),nn(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function Ay(e,n,a,l){var d=(d=ve.current)?Bc(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=wi(a.href),a=ys(d).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=wi(a.href);var m=ys(d).hoistableStyles,v=m.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=d.querySelector(Hl(e)))&&!m._p&&(v.instance=m,v.state.loading=5),Yn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(e,a),m||K_(d,e,a,v.state))),n&&l===null)throw Error(r(528,""));return v}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ti(a),a=ys(d).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function wi(e){return'href="'+mn(e)+'"'}function Hl(e){return'link[rel="stylesheet"]['+e+"]"}function Cy(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function K_(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),nn(n,"link",a),It(n),e.head.appendChild(n))}function Ti(e){return'[src="'+mn(e)+'"]'}function Gl(e){return"script[async]"+e}function Ry(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+mn(a.href)+'"]');if(l)return n.instance=l,It(l),l;var d=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),It(l),nn(l,"style",d),qc(l,a.precedence,e),n.instance=l;case"stylesheet":d=wi(a.href);var m=e.querySelector(Hl(d));if(m)return n.state.loading|=4,n.instance=m,It(m),m;l=Cy(a),(d=Yn.get(d))&&Ud(l,d),m=(e.ownerDocument||e).createElement("link"),It(m);var v=m;return v._p=new Promise(function(N,I){v.onload=N,v.onerror=I}),nn(m,"link",l),n.state.loading|=4,qc(m,a.precedence,e),n.instance=m;case"script":return m=Ti(a.src),(d=e.querySelector(Gl(m)))?(n.instance=d,It(d),d):(l=a,(d=Yn.get(m))&&(l=T({},a),Ld(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),It(d),nn(d,"link",l),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,qc(l,a.precedence,e));return n.instance}function qc(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,v=0;v<l.length;v++){var N=l[v];if(N.dataset.precedence===n)m=N;else if(m!==d)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Ld(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Hc=null;function Dy(e,n,a){if(Hc===null){var l=new Map,d=Hc=new Map;d.set(a,l)}else d=Hc,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var m=a[d];if(!(m[gs]||m[Dt]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=e+v;var N=l.get(v);N?N.push(m):l.set(v,[m])}}return l}function Iy(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function X_(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function My(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Z_(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=wi(l.href),m=n.querySelector(Hl(d));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Gc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=m,It(m);return}m=n.ownerDocument||n,l=Cy(l),(d=Yn.get(d))&&Ud(l,d),m=m.createElement("link"),It(m);var v=m;v._p=new Promise(function(N,I){v.onload=N,v.onerror=I}),nn(m,"link",l),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Gc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Pd=0;function J_(e,n){return e.stylesheets&&e.count===0&&$c(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&$c(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&Pd===0&&(Pd=62500*I_());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&$c(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Pd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Gc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$c(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fc=null;function $c(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fc=new Map,n.forEach(W_,e),Fc=null,Gc.call(e))}function W_(e,n){if(!(n.state.loading&4)){var a=Fc.get(e);if(a)var l=a.get(null);else{a=new Map,Fc.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var v=d[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}d=n.instance,v=d.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,d),a.set(v,d),this.count++,l=Gc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Fl={$$typeof:he,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function e1(e,n,a,l,d,m,v,N,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fs(0),this.hiddenUpdates=fs(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Oy(e,n,a,l,d,m,v,N,I,q,J,se){return e=new e1(e,n,a,v,I,q,J,se,N),n=1,m===!0&&(n|=24),m=Sn(3,null,null,n),e.current=m,m.stateNode=e,n=vh(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},Eh(m),e}function Vy(e){return e?(e=ni,e):ni}function ky(e,n,a,l,d,m){d=Vy(d),l.context===null?l.context=d:l.pendingContext=d,l=Na(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Ea(e,l,n),a!==null&&(bn(a,e,n),El(a,e,n))}function zy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Bd(e,n){zy(e,n),(e=e.alternate)&&zy(e,n)}function Uy(e){if(e.tag===13||e.tag===31){var n=pr(e,67108864);n!==null&&bn(n,e,67108864),Bd(e,67108864)}}function Ly(e){if(e.tag===13||e.tag===31){var n=In();n=ar(n);var a=pr(e,n);a!==null&&bn(a,e,n),Bd(e,n)}}var Yc=!0;function t1(e,n,a,l){var d=F.T;F.T=null;var m=K.p;try{K.p=2,qd(e,n,a,l)}finally{K.p=m,F.T=d}}function n1(e,n,a,l){var d=F.T;F.T=null;var m=K.p;try{K.p=8,qd(e,n,a,l)}finally{K.p=m,F.T=d}}function qd(e,n,a,l){if(Yc){var d=Hd(l);if(d===null)Ad(e,n,l,Qc,a),By(e,l);else if(a1(d,e,n,a,l))l.stopPropagation();else if(By(e,l),n&4&&-1<s1.indexOf(e)){for(;d!==null;){var m=kn(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=hs(m.pendingLanes);if(v!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;v;){var I=1<<31-Tt(v);N.entanglements[1]|=I,v&=~I}Rs(m),(nt&6)===0&&(Rc=qt()+500,Ll(0))}}break;case 31:case 13:N=pr(m,2),N!==null&&bn(N,m,2),Ic(),Bd(m,2)}if(m=Hd(l),m===null&&Ad(e,n,l,Qc,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else Ad(e,n,l,null,a)}}function Hd(e){return e=zn(e),Gd(e)}var Qc=null;function Gd(e){if(Qc=null,e=ps(e),e!==null){var n=h(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===31){if(e=p(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Qc=e,null}function Py(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case Qi:return 2;case Ki:return 8;case la:case Xu:return 32;case jo:return 268435456;default:return 32}default:return 32}}var Fd=!1,Oa=null,Va=null,ka=null,$l=new Map,Yl=new Map,za=[],s1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function By(e,n){switch(e){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":$l.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(n.pointerId)}}function Ql(e,n,a,l,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},n!==null&&(n=kn(n),n!==null&&Uy(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function a1(e,n,a,l,d){switch(n){case"focusin":return Oa=Ql(Oa,e,n,a,l,d),!0;case"dragenter":return Va=Ql(Va,e,n,a,l,d),!0;case"mouseover":return ka=Ql(ka,e,n,a,l,d),!0;case"pointerover":var m=d.pointerId;return $l.set(m,Ql($l.get(m)||null,e,n,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,Yl.set(m,Ql(Yl.get(m)||null,e,n,a,l,d)),!0}return!1}function qy(e){var n=ps(e.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,Zn(e.priority,function(){Ly(a)});return}}else if(n===31){if(n=p(a),n!==null){e.blockedOn=n,Zn(e.priority,function(){Ly(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Hd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);ll=l,a.target.dispatchEvent(l),ll=null}else return n=kn(a),n!==null&&Uy(n),e.blockedOn=a,!1;n.shift()}return!0}function Hy(e,n,a){Kc(e)&&a.delete(n)}function r1(){Fd=!1,Oa!==null&&Kc(Oa)&&(Oa=null),Va!==null&&Kc(Va)&&(Va=null),ka!==null&&Kc(ka)&&(ka=null),$l.forEach(Hy),Yl.forEach(Hy)}function Xc(e,n){e.blockedOn===n&&(e.blockedOn=null,Fd||(Fd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,r1)))}var Zc=null;function Gy(e){Zc!==e&&(Zc=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Zc===e&&(Zc=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],d=e[n+2];if(typeof l!="function"){if(Gd(l||a)===null)continue;break}var m=kn(a);m!==null&&(e.splice(n,3),n-=3,Hh(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function ji(e){function n(I){return Xc(I,e)}Oa!==null&&Xc(Oa,e),Va!==null&&Xc(Va,e),ka!==null&&Xc(ka,e),$l.forEach(n),Yl.forEach(n);for(var a=0;a<za.length;a++){var l=za[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<za.length&&(a=za[0],a.blockedOn===null);)qy(a),a.blockedOn===null&&za.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],v=d[$t]||null;if(typeof m=="function")v||Gy(a);else if(v){var N=null;if(m&&m.hasAttribute("formAction")){if(d=m,v=m[$t]||null)N=v.formAction;else if(Gd(d)!==null)continue}else N=v.action;typeof N=="function"?a[l+1]=N:(a.splice(l,3),l-=3),Gy(a)}}}function Fy(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function $d(e){this._internalRoot=e}Jc.prototype.render=$d.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=In();ky(a,l,e,n,null,null)},Jc.prototype.unmount=$d.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;ky(e.current,2,null,e,null,null),Ic(),n[ms]=null}};function Jc(e){this._internalRoot=e}Jc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Io();e={blockedOn:null,target:e,priority:n};for(var a=0;a<za.length&&n!==0&&n<za[a].priority;a++);za.splice(a,0,e),a===0&&qy(e)}};var $y=t.version;if($y!=="19.2.4")throw Error(r(527,$y,"19.2.4"));K.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(n),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var i1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{Kn=Wc.inject(i1),Zt=Wc}catch{}}return Xl.createRoot=function(e,n){if(!c(e))throw Error(r(299));var a=!1,l="",d=Wg,m=ep,v=tp;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Oy(e,1,!1,null,null,a,l,null,d,m,v,Fy),e[ms]=n.current,Sd(e),new $d(n)},Xl.hydrateRoot=function(e,n,a){if(!c(e))throw Error(r(299));var l=!1,d="",m=Wg,v=ep,N=tp,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),n=Oy(e,1,!0,n,a??null,l,d,I,m,v,N,Fy),n.context=Vy(null),a=n.current,l=In(),l=ar(l),d=Na(l),d.callback=null,Ea(a,d,l),a=l,n.current.lanes=a,nr(n,a),Rs(n),e[ms]=n.current,Sd(e),new Jc(n)},Xl.version="19.2.4",Xl}var nx;function p1(){if(nx)return Kd.exports;nx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Kd.exports=g1(),Kd.exports}var y1=p1();const x1=Cu(y1),_t={projects:[""],workplaces:[""],contractors:[""],subcontractors:[""],supervisors:[" "],locations:[""],goals:[""],processes:[""],topics:[""],cautions:[""],roles:[""],jobTypes:["","","",""],predictions:[""],countermeasures:[""]},v1={project:_t.projects[0],month:new Date().getMonth()+1,contractor:_t.contractors[0],date:new Date().toISOString().split("T")[0],startTime:"08:00",endTime:"08:30",location:_t.locations[0],instructor:_t.supervisors[0],goal:_t.goals[0],process:_t.processes[0],topic:_t.topics[0],caution:_t.cautions[0],photoUrl:null,signatures:[]},b1={count:1,project:_t.projects[0],date:new Date().toISOString().split("T")[0],contractor:_t.contractors[0],startTime:"13:00",endTime:"14:00",location:_t.locations[0],gcAttendees:Array(8).fill({role:"",name:""}),subcontractorAttendees:[]},_1={year:new Date().getFullYear(),month:new Date().getMonth()+1,createdDate:new Date().toISOString().split("T")[0],project:_t.projects[0],location:_t.locations[0],author:_t.supervisors[0],trainingDate:"",trainingLeader:_t.supervisors[0],councilDate:"",councilLeader:"",patrolDate:"",processRows:[],predictions:Array(5).fill(""),countermeasures:Array(5).fill(""),inspectionItems:Array(5).fill(""),safetyDuty:{},lastMonthReflection:""},N1={project:_t.projects[0],director:_t.supervisors[0],furiganaSei:"",furiganaMei:"",nameSei:"",nameMei:"",birthEra:"Showa",birthYear:"",birthMonth:"",birthDay:"",gender:"Male",age:0,company:_t.subcontractors[0],subcontractorRank:"",experienceYears:10,experienceMonths:0,jobType:"",jobTypeOther:"",address:"",phone:"",emergencyContactSei:"",emergencyContactMei:"",emergencyContactRelation:"",emergencyContactPhone:"",bloodType:"A",bloodTypeRh:"Unknown",healthCheckYear:new Date().getFullYear()-2018,healthCheckMonth:new Date().getMonth()+1,healthCheckDay:new Date().getDate(),kentaikyo:"Joined",qualifications:{vehicle_leveling:!1,vehicle_demolition:!1,mobile_crane:!1,slinging:!1,gas_welding:!1,earth_retaining:!1,excavation:!1,scaffolding:!1,formwork:!1,oxygen_deficiency:!1,rough_terrain:!1,arc_welding:!1,grinding_wheel:!1,low_voltage:!1,roller:!1,asbestos:!1,foreman:!1,otherText1:"",otherText2:"",otherText3:""},pledgeDateYear:new Date().getFullYear()-2018,pledgeDateMonth:new Date().getMonth()+1,pledgeDateDay:new Date().getDate(),signatureDataUrl:null},E1=()=>{};var sx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=function(i){const t=[];let s=0;for(let r=0;r<i.length;r++){let c=i.charCodeAt(r);c<128?t[s++]=c:c<2048?(t[s++]=c>>6|192,t[s++]=c&63|128):(c&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(c=65536+((c&1023)<<10)+(i.charCodeAt(++r)&1023),t[s++]=c>>18|240,t[s++]=c>>12&63|128,t[s++]=c>>6&63|128,t[s++]=c&63|128):(t[s++]=c>>12|224,t[s++]=c>>6&63|128,t[s++]=c&63|128)}return t},w1=function(i){const t=[];let s=0,r=0;for(;s<i.length;){const c=i[s++];if(c<128)t[r++]=String.fromCharCode(c);else if(c>191&&c<224){const h=i[s++];t[r++]=String.fromCharCode((c&31)<<6|h&63)}else if(c>239&&c<365){const h=i[s++],f=i[s++],p=i[s++],x=((c&7)<<18|(h&63)<<12|(f&63)<<6|p&63)-65536;t[r++]=String.fromCharCode(55296+(x>>10)),t[r++]=String.fromCharCode(56320+(x&1023))}else{const h=i[s++],f=i[s++];t[r++]=String.fromCharCode((c&15)<<12|(h&63)<<6|f&63)}}return t.join("")},D0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let c=0;c<i.length;c+=3){const h=i[c],f=c+1<i.length,p=f?i[c+1]:0,x=c+2<i.length,y=x?i[c+2]:0,_=h>>2,T=(h&3)<<4|p>>4;let C=(p&15)<<2|y>>6,L=y&63;x||(L=64,f||(C=64)),r.push(s[_],s[T],s[C],s[L])}return r.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(R0(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):w1(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let c=0;c<i.length;){const h=s[i.charAt(c++)],p=c<i.length?s[i.charAt(c)]:0;++c;const y=c<i.length?s[i.charAt(c)]:64;++c;const T=c<i.length?s[i.charAt(c)]:64;if(++c,h==null||p==null||y==null||T==null)throw new T1;const C=h<<2|p>>4;if(r.push(C),y!==64){const L=p<<4&240|y>>2;if(r.push(L),T!==64){const X=y<<6&192|T;r.push(X)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class T1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const j1=function(i){const t=R0(i);return D0.encodeByteArray(t,!0)},du=function(i){return j1(i).replace(/\./g,"")},S1=function(i){try{return D0.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=()=>A1().__FIREBASE_DEFAULTS__,R1=()=>{if(typeof process>"u"||typeof sx>"u")return;const i=sx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},D1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&S1(i[1]);return t&&JSON.parse(t)},Bf=()=>{try{return E1()||C1()||R1()||D1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},I1=i=>{var t,s;return(s=(t=Bf())==null?void 0:t.emulatorHosts)==null?void 0:s[i]},M1=i=>{const t=I1(i);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),r]:[t.substring(0,s),r]},I0=()=>{var i;return(i=Bf())==null?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V1(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=t||"demo-project",c=i.iat||0,h=i.sub||i.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:c,exp:c+3600,auth_time:c,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...i};return[du(JSON.stringify(s)),du(JSON.stringify(f)),""].join(".")}const no={};function z1(){const i={prod:[],emulator:[]};for(const t of Object.keys(no))no[t]?i.emulator.push(t):i.prod.push(t);return i}function U1(i){let t=document.getElementById(i),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),s=!0),{created:s,element:t}}let ax=!1;function L1(i,t){if(typeof window>"u"||typeof document>"u"||!qf(window.location.host)||no[i]===t||no[i]||ax)return;no[i]=t;function s(C){return`__firebase__banner__${C}`}const r="__firebase__banner",h=z1().prod.length>0;function f(){const C=document.getElementById(r);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function x(C,L){C.setAttribute("width","24"),C.setAttribute("id",L),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{ax=!0,f()},C}function _(C,L){C.setAttribute("id",L),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=U1(r),L=s("text"),X=document.getElementById(L)||document.createElement("span"),ee=s("learnmore"),G=document.getElementById(ee)||document.createElement("a"),ie=s("preprendIcon"),le=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const he=C.element;p(he),_(G,ee);const ge=y();x(le,ie),he.append(le,X,G,ge),document.body.appendChild(he)}h?(X.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B1(){var t;const i=(t=Bf())==null?void 0:t.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function q1(){return!B1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H1(){try{return typeof indexedDB=="object"}catch{return!1}}function G1(){return new Promise((i,t)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(r);c.onsuccess=()=>{c.result.close(),s||self.indexedDB.deleteDatabase(r),i(!0)},c.onupgradeneeded=()=>{s=!1},c.onerror=()=>{var h;t(((h=c.error)==null?void 0:h.message)||"")}}catch(s){t(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="FirebaseError";class qi extends Error{constructor(t,s,r){super(s),this.code=t,this.customData=r,this.name=F1,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M0.prototype.create)}}class M0{constructor(t,s,r){this.service=t,this.serviceName=s,this.errors=r}create(t,...s){const r=s[0]||{},c=`${this.service}/${t}`,h=this.errors[t],f=h?$1(h,r):"Error",p=`${this.serviceName}: ${f} (${c}).`;return new qi(c,p,r)}}function $1(i,t){return i.replace(Y1,(s,r)=>{const c=t[r];return c!=null?String(c):`<${r}?>`})}const Y1=/\{\$([^}]+)}/g;function fu(i,t){if(i===t)return!0;const s=Object.keys(i),r=Object.keys(t);for(const c of s){if(!r.includes(c))return!1;const h=i[c],f=t[c];if(rx(h)&&rx(f)){if(!fu(h,f))return!1}else if(h!==f)return!1}for(const c of r)if(!s.includes(c))return!1;return!0}function rx(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(i){return i&&i._delegate?i._delegate:i}class lo{constructor(t,s,r){this.name=t,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const r=new O1;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:s});c&&r.resolve(c)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(r)return null;throw c}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(X1(t))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);try{const h=this.getOrInitializeService({instanceIdentifier:c});r.resolve(h)}catch{}}}}clearInstance(t=Cr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Cr){return this.instances.has(t)}getOptions(t=Cr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[h,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(h);r===p&&f.resolve(c)}return c}onInit(t,s){const r=this.normalizeInstanceIdentifier(s),c=this.onInitCallbacks.get(r)??new Set;c.add(t),this.onInitCallbacks.set(r,c);const h=this.instances.get(r);return h&&t(h,r),()=>{c.delete(t)}}invokeOnInitCallbacks(t,s){const r=this.onInitCallbacks.get(s);if(r)for(const c of r)try{c(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K1(t),options:s}),this.instances.set(t,r),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Cr){return this.component?this.component.multipleInstances?t:Cr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K1(i){return i===Cr?void 0:i}function X1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new Q1(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ze||(Ze={}));const J1={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},W1=Ze.INFO,eN={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},tN=(i,t,...s)=>{if(t<i.logLevel)return;const r=new Date().toISOString(),c=eN[t];if(c)console[c](`[${r}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class O0{constructor(t){this.name=t,this._logLevel=W1,this._logHandler=tN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ze))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?J1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...t),this._logHandler(this,Ze.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...t),this._logHandler(this,Ze.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...t),this._logHandler(this,Ze.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...t),this._logHandler(this,Ze.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...t),this._logHandler(this,Ze.ERROR,...t)}}const nN=(i,t)=>t.some(s=>i instanceof s);let ix,lx;function sN(){return ix||(ix=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aN(){return lx||(lx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V0=new WeakMap,ff=new WeakMap,k0=new WeakMap,Wd=new WeakMap,Hf=new WeakMap;function rN(i){const t=new Promise((s,r)=>{const c=()=>{i.removeEventListener("success",h),i.removeEventListener("error",f)},h=()=>{s(Pa(i.result)),c()},f=()=>{r(i.error),c()};i.addEventListener("success",h),i.addEventListener("error",f)});return t.then(s=>{s instanceof IDBCursor&&V0.set(s,i)}).catch(()=>{}),Hf.set(t,i),t}function iN(i){if(ff.has(i))return;const t=new Promise((s,r)=>{const c=()=>{i.removeEventListener("complete",h),i.removeEventListener("error",f),i.removeEventListener("abort",f)},h=()=>{s(),c()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),c()};i.addEventListener("complete",h),i.addEventListener("error",f),i.addEventListener("abort",f)});ff.set(i,t)}let mf={get(i,t,s){if(i instanceof IDBTransaction){if(t==="done")return ff.get(i);if(t==="objectStoreNames")return i.objectStoreNames||k0.get(i);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Pa(i[t])},set(i,t,s){return i[t]=s,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function lN(i){mf=i(mf)}function oN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const r=i.call(ef(this),t,...s);return k0.set(r,t.sort?t.sort():[t]),Pa(r)}:aN().includes(i)?function(...t){return i.apply(ef(this),t),Pa(V0.get(this))}:function(...t){return Pa(i.apply(ef(this),t))}}function cN(i){return typeof i=="function"?oN(i):(i instanceof IDBTransaction&&iN(i),nN(i,sN())?new Proxy(i,mf):i)}function Pa(i){if(i instanceof IDBRequest)return rN(i);if(Wd.has(i))return Wd.get(i);const t=cN(i);return t!==i&&(Wd.set(i,t),Hf.set(t,i)),t}const ef=i=>Hf.get(i);function uN(i,t,{blocked:s,upgrade:r,blocking:c,terminated:h}={}){const f=indexedDB.open(i,t),p=Pa(f);return r&&f.addEventListener("upgradeneeded",x=>{r(Pa(f.result),x.oldVersion,x.newVersion,Pa(f.transaction),x)}),s&&f.addEventListener("blocked",x=>s(x.oldVersion,x.newVersion,x)),p.then(x=>{h&&x.addEventListener("close",()=>h()),c&&x.addEventListener("versionchange",y=>c(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const hN=["get","getKey","getAll","getAllKeys","count"],dN=["put","add","delete","clear"],tf=new Map;function ox(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(tf.get(t))return tf.get(t);const s=t.replace(/FromIndex$/,""),r=t!==s,c=dN.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(c||hN.includes(s)))return;const h=async function(f,...p){const x=this.transaction(f,c?"readwrite":"readonly");let y=x.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[s](...p),c&&x.done]))[0]};return tf.set(t,h),h}lN(i=>({...i,get:(t,s,r)=>ox(t,s)||i.get(t,s,r),has:(t,s)=>!!ox(t,s)||i.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(mN(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function mN(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const gf="@firebase/app",cx="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new O0("@firebase/app"),gN="@firebase/app-compat",pN="@firebase/analytics-compat",yN="@firebase/analytics",xN="@firebase/app-check-compat",vN="@firebase/app-check",bN="@firebase/auth",_N="@firebase/auth-compat",NN="@firebase/database",EN="@firebase/data-connect",wN="@firebase/database-compat",TN="@firebase/functions",jN="@firebase/functions-compat",SN="@firebase/installations",AN="@firebase/installations-compat",CN="@firebase/messaging",RN="@firebase/messaging-compat",DN="@firebase/performance",IN="@firebase/performance-compat",MN="@firebase/remote-config",ON="@firebase/remote-config-compat",VN="@firebase/storage",kN="@firebase/storage-compat",zN="@firebase/firestore",UN="@firebase/ai",LN="@firebase/firestore-compat",PN="firebase",BN="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="[DEFAULT]",qN={[gf]:"fire-core",[gN]:"fire-core-compat",[yN]:"fire-analytics",[pN]:"fire-analytics-compat",[vN]:"fire-app-check",[xN]:"fire-app-check-compat",[bN]:"fire-auth",[_N]:"fire-auth-compat",[NN]:"fire-rtdb",[EN]:"fire-data-connect",[wN]:"fire-rtdb-compat",[TN]:"fire-fn",[jN]:"fire-fn-compat",[SN]:"fire-iid",[AN]:"fire-iid-compat",[CN]:"fire-fcm",[RN]:"fire-fcm-compat",[DN]:"fire-perf",[IN]:"fire-perf-compat",[MN]:"fire-rc",[ON]:"fire-rc-compat",[VN]:"fire-gcs",[kN]:"fire-gcs-compat",[zN]:"fire-fst",[LN]:"fire-fst-compat",[UN]:"fire-vertex","fire-js":"fire-js",[PN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new Map,HN=new Map,yf=new Map;function ux(i,t){try{i.container.addComponent(t)}catch(s){aa.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,s)}}function gu(i){const t=i.name;if(yf.has(t))return aa.debug(`There were multiple attempts to register component ${t}.`),!1;yf.set(t,i);for(const s of mu.values())ux(s,i);for(const s of HN.values())ux(s,i);return!0}function GN(i,t){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(t)}function FN(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ba=new M0("app","Firebase",$N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(t,s,r){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ba.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=BN;function z0(i,t={}){let s=i;typeof t!="object"&&(t={name:t});const r={name:pf,automaticDataCollectionEnabled:!0,...t},c=r.name;if(typeof c!="string"||!c)throw Ba.create("bad-app-name",{appName:String(c)});if(s||(s=I0()),!s)throw Ba.create("no-options");const h=mu.get(c);if(h){if(fu(s,h.options)&&fu(r,h.config))return h;throw Ba.create("duplicate-app",{appName:c})}const f=new Z1(c);for(const x of yf.values())f.addComponent(x);const p=new YN(s,r,f);return mu.set(c,p),p}function KN(i=pf){const t=mu.get(i);if(!t&&i===pf&&I0())return z0();if(!t)throw Ba.create("no-app",{appName:i});return t}function Di(i,t,s){let r=qN[i]??i;s&&(r+=`-${s}`);const c=r.match(/\s|\//),h=t.match(/\s|\//);if(c||h){const f=[`Unable to register library "${r}" with version "${t}":`];c&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),c&&h&&f.push("and"),h&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),aa.warn(f.join(" "));return}gu(new lo(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="firebase-heartbeat-database",ZN=1,oo="firebase-heartbeat-store";let nf=null;function U0(){return nf||(nf=uN(XN,ZN,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(oo)}catch(s){console.warn(s)}}}}).catch(i=>{throw Ba.create("idb-open",{originalErrorMessage:i.message})})),nf}async function JN(i){try{const s=(await U0()).transaction(oo),r=await s.objectStore(oo).get(L0(i));return await s.done,r}catch(t){if(t instanceof qi)aa.warn(t.message);else{const s=Ba.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});aa.warn(s.message)}}}async function hx(i,t){try{const r=(await U0()).transaction(oo,"readwrite");await r.objectStore(oo).put(t,L0(i)),await r.done}catch(s){if(s instanceof qi)aa.warn(s.message);else{const r=Ba.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});aa.warn(r.message)}}}function L0(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1024,eE=30;class tE{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new sE(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,s;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=dx();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(f=>f.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:c}),this._heartbeatsCache.heartbeats.length>eE){const f=aE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){aa.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=dx(),{heartbeatsToSend:r,unsentEntries:c}=nE(this._heartbeatsCache.heartbeats),h=du(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(s){return aa.warn(s),""}}}function dx(){return new Date().toISOString().substring(0,10)}function nE(i,t=WN){const s=[];let r=i.slice();for(const c of i){const h=s.find(f=>f.agent===c.agent);if(h){if(h.dates.push(c.date),fx(s)>t){h.dates.pop();break}}else if(s.push({agent:c.agent,dates:[c.date]}),fx(s)>t){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class sE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H1()?G1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await JN(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return hx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return hx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function fx(i){return du(JSON.stringify({version:2,heartbeats:i})).length}function aE(i){if(i.length===0)return-1;let t=0,s=i[0].date;for(let r=1;r<i.length;r++)i[r].date<s&&(s=i[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(i){gu(new lo("platform-logger",t=>new fN(t),"PRIVATE")),gu(new lo("heartbeat",t=>new tE(t),"PRIVATE")),Di(gf,cx,i),Di(gf,cx,"esm2020"),Di("fire-js","")}rE("");var iE="firebase",lE="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di(iE,lE,"app");var mx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qa,P0;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,j){function S(){}S.prototype=j.prototype,R.F=j.prototype,R.prototype=new S,R.prototype.constructor=R,R.D=function(O,A,k){for(var w=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)w[Te-2]=arguments[Te];return j.prototype[A].apply(O,w)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(R,j,S){S||(S=0);const O=Array(16);if(typeof j=="string")for(var A=0;A<16;++A)O[A]=j.charCodeAt(S++)|j.charCodeAt(S++)<<8|j.charCodeAt(S++)<<16|j.charCodeAt(S++)<<24;else for(A=0;A<16;++A)O[A]=j[S++]|j[S++]<<8|j[S++]<<16|j[S++]<<24;j=R.g[0],S=R.g[1],A=R.g[2];let k=R.g[3],w;w=j+(k^S&(A^k))+O[0]+3614090360&4294967295,j=S+(w<<7&4294967295|w>>>25),w=k+(A^j&(S^A))+O[1]+3905402710&4294967295,k=j+(w<<12&4294967295|w>>>20),w=A+(S^k&(j^S))+O[2]+606105819&4294967295,A=k+(w<<17&4294967295|w>>>15),w=S+(j^A&(k^j))+O[3]+3250441966&4294967295,S=A+(w<<22&4294967295|w>>>10),w=j+(k^S&(A^k))+O[4]+4118548399&4294967295,j=S+(w<<7&4294967295|w>>>25),w=k+(A^j&(S^A))+O[5]+1200080426&4294967295,k=j+(w<<12&4294967295|w>>>20),w=A+(S^k&(j^S))+O[6]+2821735955&4294967295,A=k+(w<<17&4294967295|w>>>15),w=S+(j^A&(k^j))+O[7]+4249261313&4294967295,S=A+(w<<22&4294967295|w>>>10),w=j+(k^S&(A^k))+O[8]+1770035416&4294967295,j=S+(w<<7&4294967295|w>>>25),w=k+(A^j&(S^A))+O[9]+2336552879&4294967295,k=j+(w<<12&4294967295|w>>>20),w=A+(S^k&(j^S))+O[10]+4294925233&4294967295,A=k+(w<<17&4294967295|w>>>15),w=S+(j^A&(k^j))+O[11]+2304563134&4294967295,S=A+(w<<22&4294967295|w>>>10),w=j+(k^S&(A^k))+O[12]+1804603682&4294967295,j=S+(w<<7&4294967295|w>>>25),w=k+(A^j&(S^A))+O[13]+4254626195&4294967295,k=j+(w<<12&4294967295|w>>>20),w=A+(S^k&(j^S))+O[14]+2792965006&4294967295,A=k+(w<<17&4294967295|w>>>15),w=S+(j^A&(k^j))+O[15]+1236535329&4294967295,S=A+(w<<22&4294967295|w>>>10),w=j+(A^k&(S^A))+O[1]+4129170786&4294967295,j=S+(w<<5&4294967295|w>>>27),w=k+(S^A&(j^S))+O[6]+3225465664&4294967295,k=j+(w<<9&4294967295|w>>>23),w=A+(j^S&(k^j))+O[11]+643717713&4294967295,A=k+(w<<14&4294967295|w>>>18),w=S+(k^j&(A^k))+O[0]+3921069994&4294967295,S=A+(w<<20&4294967295|w>>>12),w=j+(A^k&(S^A))+O[5]+3593408605&4294967295,j=S+(w<<5&4294967295|w>>>27),w=k+(S^A&(j^S))+O[10]+38016083&4294967295,k=j+(w<<9&4294967295|w>>>23),w=A+(j^S&(k^j))+O[15]+3634488961&4294967295,A=k+(w<<14&4294967295|w>>>18),w=S+(k^j&(A^k))+O[4]+3889429448&4294967295,S=A+(w<<20&4294967295|w>>>12),w=j+(A^k&(S^A))+O[9]+568446438&4294967295,j=S+(w<<5&4294967295|w>>>27),w=k+(S^A&(j^S))+O[14]+3275163606&4294967295,k=j+(w<<9&4294967295|w>>>23),w=A+(j^S&(k^j))+O[3]+4107603335&4294967295,A=k+(w<<14&4294967295|w>>>18),w=S+(k^j&(A^k))+O[8]+1163531501&4294967295,S=A+(w<<20&4294967295|w>>>12),w=j+(A^k&(S^A))+O[13]+2850285829&4294967295,j=S+(w<<5&4294967295|w>>>27),w=k+(S^A&(j^S))+O[2]+4243563512&4294967295,k=j+(w<<9&4294967295|w>>>23),w=A+(j^S&(k^j))+O[7]+1735328473&4294967295,A=k+(w<<14&4294967295|w>>>18),w=S+(k^j&(A^k))+O[12]+2368359562&4294967295,S=A+(w<<20&4294967295|w>>>12),w=j+(S^A^k)+O[5]+4294588738&4294967295,j=S+(w<<4&4294967295|w>>>28),w=k+(j^S^A)+O[8]+2272392833&4294967295,k=j+(w<<11&4294967295|w>>>21),w=A+(k^j^S)+O[11]+1839030562&4294967295,A=k+(w<<16&4294967295|w>>>16),w=S+(A^k^j)+O[14]+4259657740&4294967295,S=A+(w<<23&4294967295|w>>>9),w=j+(S^A^k)+O[1]+2763975236&4294967295,j=S+(w<<4&4294967295|w>>>28),w=k+(j^S^A)+O[4]+1272893353&4294967295,k=j+(w<<11&4294967295|w>>>21),w=A+(k^j^S)+O[7]+4139469664&4294967295,A=k+(w<<16&4294967295|w>>>16),w=S+(A^k^j)+O[10]+3200236656&4294967295,S=A+(w<<23&4294967295|w>>>9),w=j+(S^A^k)+O[13]+681279174&4294967295,j=S+(w<<4&4294967295|w>>>28),w=k+(j^S^A)+O[0]+3936430074&4294967295,k=j+(w<<11&4294967295|w>>>21),w=A+(k^j^S)+O[3]+3572445317&4294967295,A=k+(w<<16&4294967295|w>>>16),w=S+(A^k^j)+O[6]+76029189&4294967295,S=A+(w<<23&4294967295|w>>>9),w=j+(S^A^k)+O[9]+3654602809&4294967295,j=S+(w<<4&4294967295|w>>>28),w=k+(j^S^A)+O[12]+3873151461&4294967295,k=j+(w<<11&4294967295|w>>>21),w=A+(k^j^S)+O[15]+530742520&4294967295,A=k+(w<<16&4294967295|w>>>16),w=S+(A^k^j)+O[2]+3299628645&4294967295,S=A+(w<<23&4294967295|w>>>9),w=j+(A^(S|~k))+O[0]+4096336452&4294967295,j=S+(w<<6&4294967295|w>>>26),w=k+(S^(j|~A))+O[7]+1126891415&4294967295,k=j+(w<<10&4294967295|w>>>22),w=A+(j^(k|~S))+O[14]+2878612391&4294967295,A=k+(w<<15&4294967295|w>>>17),w=S+(k^(A|~j))+O[5]+4237533241&4294967295,S=A+(w<<21&4294967295|w>>>11),w=j+(A^(S|~k))+O[12]+1700485571&4294967295,j=S+(w<<6&4294967295|w>>>26),w=k+(S^(j|~A))+O[3]+2399980690&4294967295,k=j+(w<<10&4294967295|w>>>22),w=A+(j^(k|~S))+O[10]+4293915773&4294967295,A=k+(w<<15&4294967295|w>>>17),w=S+(k^(A|~j))+O[1]+2240044497&4294967295,S=A+(w<<21&4294967295|w>>>11),w=j+(A^(S|~k))+O[8]+1873313359&4294967295,j=S+(w<<6&4294967295|w>>>26),w=k+(S^(j|~A))+O[15]+4264355552&4294967295,k=j+(w<<10&4294967295|w>>>22),w=A+(j^(k|~S))+O[6]+2734768916&4294967295,A=k+(w<<15&4294967295|w>>>17),w=S+(k^(A|~j))+O[13]+1309151649&4294967295,S=A+(w<<21&4294967295|w>>>11),w=j+(A^(S|~k))+O[4]+4149444226&4294967295,j=S+(w<<6&4294967295|w>>>26),w=k+(S^(j|~A))+O[11]+3174756917&4294967295,k=j+(w<<10&4294967295|w>>>22),w=A+(j^(k|~S))+O[2]+718787259&4294967295,A=k+(w<<15&4294967295|w>>>17),w=S+(k^(A|~j))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+j&4294967295,R.g[1]=R.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,R.g[2]=R.g[2]+A&4294967295,R.g[3]=R.g[3]+k&4294967295}r.prototype.v=function(R,j){j===void 0&&(j=R.length);const S=j-this.blockSize,O=this.C;let A=this.h,k=0;for(;k<j;){if(A==0)for(;k<=S;)c(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<j;)if(O[A++]=R.charCodeAt(k++),A==this.blockSize){c(this,O),A=0;break}}else for(;k<j;)if(O[A++]=R[k++],A==this.blockSize){c(this,O),A=0;break}}this.h=A,this.o+=j},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var j=1;j<R.length-8;++j)R[j]=0;j=this.o*8;for(var S=R.length-8;S<R.length;++S)R[S]=j&255,j/=256;for(this.v(R),R=Array(16),j=0,S=0;S<4;++S)for(let O=0;O<32;O+=8)R[j++]=this.g[S]>>>O&255;return R};function h(R,j){var S=p;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=j(R)}function f(R,j){this.h=j;const S=[];let O=!0;for(let A=R.length-1;A>=0;A--){const k=R[A]|0;O&&k==j||(S[A]=k,O=!1)}this.g=S}var p={};function x(R){return-128<=R&&R<128?h(R,function(j){return new f([j|0],j<0?-1:0)}):new f([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return G(y(-R));const j=[];let S=1;for(let O=0;R>=S;O++)j[O]=R/S|0,S*=4294967296;return new f(j,0)}function _(R,j){if(R.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(R.charAt(0)=="-")return G(_(R.substring(1),j));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=y(Math.pow(j,8));let O=T;for(let k=0;k<R.length;k+=8){var A=Math.min(8,R.length-k);const w=parseInt(R.substring(k,k+A),j);A<8?(A=y(Math.pow(j,A)),O=O.j(A).add(y(w))):(O=O.j(S),O=O.add(y(w)))}return O}var T=x(0),C=x(1),L=x(16777216);i=f.prototype,i.m=function(){if(ee(this))return-G(this).m();let R=0,j=1;for(let S=0;S<this.g.length;S++){const O=this.i(S);R+=(O>=0?O:4294967296+O)*j,j*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(X(this))return"0";if(ee(this))return"-"+G(this).toString(R);const j=y(Math.pow(R,6));var S=this;let O="";for(;;){const A=ge(S,j).g;S=ie(S,A.j(j));let k=((S.g.length>0?S.g[0]:S.h)>>>0).toString(R);if(S=A,X(S))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function X(R){if(R.h!=0)return!1;for(let j=0;j<R.g.length;j++)if(R.g[j]!=0)return!1;return!0}function ee(R){return R.h==-1}i.l=function(R){return R=ie(this,R),ee(R)?-1:X(R)?0:1};function G(R){const j=R.g.length,S=[];for(let O=0;O<j;O++)S[O]=~R.g[O];return new f(S,~R.h).add(C)}i.abs=function(){return ee(this)?G(this):this},i.add=function(R){const j=Math.max(this.g.length,R.g.length),S=[];let O=0;for(let A=0;A<=j;A++){let k=O+(this.i(A)&65535)+(R.i(A)&65535),w=(k>>>16)+(this.i(A)>>>16)+(R.i(A)>>>16);O=w>>>16,k&=65535,w&=65535,S[A]=w<<16|k}return new f(S,S[S.length-1]&-2147483648?-1:0)};function ie(R,j){return R.add(G(j))}i.j=function(R){if(X(this)||X(R))return T;if(ee(this))return ee(R)?G(this).j(G(R)):G(G(this).j(R));if(ee(R))return G(this.j(G(R)));if(this.l(L)<0&&R.l(L)<0)return y(this.m()*R.m());const j=this.g.length+R.g.length,S=[];for(var O=0;O<2*j;O++)S[O]=0;for(O=0;O<this.g.length;O++)for(let A=0;A<R.g.length;A++){const k=this.i(O)>>>16,w=this.i(O)&65535,Te=R.i(A)>>>16,Ce=R.i(A)&65535;S[2*O+2*A]+=w*Ce,le(S,2*O+2*A),S[2*O+2*A+1]+=k*Ce,le(S,2*O+2*A+1),S[2*O+2*A+1]+=w*Te,le(S,2*O+2*A+1),S[2*O+2*A+2]+=k*Te,le(S,2*O+2*A+2)}for(R=0;R<j;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=j;R<2*j;R++)S[R]=0;return new f(S,0)};function le(R,j){for(;(R[j]&65535)!=R[j];)R[j+1]+=R[j]>>>16,R[j]&=65535,j++}function he(R,j){this.g=R,this.h=j}function ge(R,j){if(X(j))throw Error("division by zero");if(X(R))return new he(T,T);if(ee(R))return j=ge(G(R),j),new he(G(j.g),G(j.h));if(ee(j))return j=ge(R,G(j)),new he(G(j.g),j.h);if(R.g.length>30){if(ee(R)||ee(j))throw Error("slowDivide_ only works with positive integers.");for(var S=C,O=j;O.l(R)<=0;)S=Me(S),O=Me(O);var A=De(S,1),k=De(O,1);for(O=De(O,2),S=De(S,2);!X(O);){var w=k.add(O);w.l(R)<=0&&(A=A.add(S),k=w),O=De(O,1),S=De(S,1)}return j=ie(R,A.j(j)),new he(A,j)}for(A=T;R.l(j)>=0;){for(S=Math.max(1,Math.floor(R.m()/j.m())),O=Math.ceil(Math.log(S)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=y(S),w=k.j(j);ee(w)||w.l(R)>0;)S-=O,k=y(S),w=k.j(j);X(k)&&(k=C),A=A.add(k),R=ie(R,w)}return new he(A,R)}i.B=function(R){return ge(this,R).h},i.and=function(R){const j=Math.max(this.g.length,R.g.length),S=[];for(let O=0;O<j;O++)S[O]=this.i(O)&R.i(O);return new f(S,this.h&R.h)},i.or=function(R){const j=Math.max(this.g.length,R.g.length),S=[];for(let O=0;O<j;O++)S[O]=this.i(O)|R.i(O);return new f(S,this.h|R.h)},i.xor=function(R){const j=Math.max(this.g.length,R.g.length),S=[];for(let O=0;O<j;O++)S[O]=this.i(O)^R.i(O);return new f(S,this.h^R.h)};function Me(R){const j=R.g.length+1,S=[];for(let O=0;O<j;O++)S[O]=R.i(O)<<1|R.i(O-1)>>>31;return new f(S,R.h)}function De(R,j){const S=j>>5;j%=32;const O=R.g.length-S,A=[];for(let k=0;k<O;k++)A[k]=j>0?R.i(k+S)>>>j|R.i(k+S+1)<<32-j:R.i(k+S);return new f(A,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,P0=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=_,qa=f}).apply(typeof mx<"u"?mx:typeof self<"u"?self:typeof window<"u"?window:{});var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B0,Jl,q0,ru,xf,H0,G0,F0;(function(){var i,t=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof eu=="object"&&eu];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=s(this);function c(u,g){if(g)e:{var b=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var P=u[E];if(!(P in b))break e;b=b[P]}u=u[u.length-1],E=b[u],g=g(E),g!=E&&g!=null&&t(b,u,{configurable:!0,writable:!0,value:g})}}c("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(u){return u||function(g){var b=[],E;for(E in g)Object.prototype.hasOwnProperty.call(g,E)&&b.push([E,g[E]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function x(u,g,b){return u.call.apply(u.bind,arguments)}function y(u,g,b){return y=x,y.apply(null,arguments)}function _(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var E=b.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function T(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(E,P,Y){for(var ue=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ue[Ue-2]=arguments[Ue];return g.prototype[P].apply(E,ue)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const g=u.length;if(g>0){const b=Array(g);for(let E=0;E<g;E++)b[E]=u[E];return b}return[]}function X(u,g){for(let E=1;E<arguments.length;E++){const P=arguments[E];var b=typeof P;if(b=b!="object"?b:P?Array.isArray(P)?"array":b:"null",b=="array"||b=="object"&&typeof P.length=="number"){b=u.length||0;const Y=P.length||0;u.length=b+Y;for(let ue=0;ue<Y;ue++)u[b+ue]=P[ue]}else u.push(P)}}class ee{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function G(u){f.setTimeout(()=>{throw u},0)}function ie(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class le{constructor(){this.h=this.g=null}add(g,b){const E=he.get();E.set(g,b),this.h?this.h.next=E:this.g=E,this.h=E}}var he=new ee(()=>new ge,u=>u.reset());class ge{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,De=!1,R=new le,j=()=>{const u=Promise.resolve(void 0);Me=()=>{u.then(S)}};function S(){for(var u;u=ie();){try{u.h.call(u.g)}catch(b){G(b)}var g=he;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}De=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function Te(u,g){A.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(Te,A),Te.prototype.init=function(u,g){const b=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),F=0;function K(u,g,b,E,P){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!E,this.ha=P,this.key=++F,this.da=this.fa=!1}function de(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function je(u,g,b){for(const E in u)g.call(b,u[E],E,u)}function Pe(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function V(u){const g={};for(const b in u)g[b]=u[b];return g}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(u,g){let b,E;for(let P=1;P<arguments.length;P++){E=arguments[P];for(b in E)u[b]=E[b];for(let Y=0;Y<$.length;Y++)b=$[Y],Object.prototype.hasOwnProperty.call(E,b)&&(u[b]=E[b])}}function fe(u){this.src=u,this.g={},this.h=0}fe.prototype.add=function(u,g,b,E,P){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const ue=ve(u,g,E,P);return ue>-1?(g=u[ue],b||(g.fa=!1)):(g=new K(g,this.src,Y,!!E,P),g.fa=b,u.push(g)),g};function re(u,g){const b=g.type;if(b in u.g){var E=u.g[b],P=Array.prototype.indexOf.call(E,g,void 0),Y;(Y=P>=0)&&Array.prototype.splice.call(E,P,1),Y&&(de(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function ve(u,g,b,E){for(let P=0;P<u.length;++P){const Y=u[P];if(!Y.da&&Y.listener==g&&Y.capture==!!b&&Y.ha==E)return P}return-1}var M="closure_lm_"+(Math.random()*1e6|0),_e={};function Se(u,g,b,E,P){if(Array.isArray(g)){for(let Y=0;Y<g.length;Y++)Se(u,g[Y],b,E,P);return null}return b=fn(b),u&&u[Ce]?u.J(g,b,p(E)?!!E.capture:!1,P):at(u,g,b,!1,E,P)}function at(u,g,b,E,P,Y){if(!g)throw Error("Invalid event type");const ue=p(P)?!!P.capture:!!P;let Ue=Ft(u);if(Ue||(u[M]=Ue=new fe(u)),b=Ue.add(g,b,E,ue,Y),b.proxy)return b;if(E=be(),b.proxy=E,E.src=u,E.listener=b,u.addEventListener)k||(P=ue),P===void 0&&(P=!1),u.addEventListener(g.toString(),E,P);else if(u.attachEvent)u.attachEvent(Ve(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return b}function be(){function u(b){return g.call(u.src,u.listener,b)}const g=Je;return u}function Z(u,g,b,E,P){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)Z(u,g[Y],b,E,P);else E=p(E)?!!E.capture:!!E,b=fn(b),u&&u[Ce]?(u=u.i,Y=String(g).toString(),Y in u.g&&(g=u.g[Y],b=ve(g,b,E,P),b>-1&&(de(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[Y],u.h--)))):u&&(u=Ft(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ve(g,b,E,P)),(b=u>-1?g[u]:null)&&we(b))}function we(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ce])re(g.i,u);else{var b=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(b,E,u.capture):g.detachEvent?g.detachEvent(Ve(b),E):g.addListener&&g.removeListener&&g.removeListener(E),(b=Ft(g))?(re(b,u),b.h==0&&(b.src=null,g[M]=null)):de(u)}}}function Ve(u){return u in _e?_e[u]:_e[u]="on"+u}function Je(u,g){if(u.da)u=!0;else{g=new Te(g,this);const b=u.listener,E=u.ha||u.src;u.fa&&we(u),u=b.call(E,g)}return u}function Ft(u){return u=u[M],u instanceof fe?u:null}var Xt="__closure_events_fn_"+(Math.random()*1e9>>>0);function fn(u){return typeof u=="function"?u:(u[Xt]||(u[Xt]=function(g){return u.handleEvent(g)}),u[Xt])}function ot(){O.call(this),this.i=new fe(this),this.M=this,this.G=null}T(ot,O),ot.prototype[Ce]=!0,ot.prototype.removeEventListener=function(u,g,b,E){Z(this,u,g,b,E)};function D(u,g){var b,E=u.G;if(E)for(b=[];E;E=E.G)b.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new A(g,u);else if(g instanceof A)g.target=g.target||u;else{var P=g;g=new A(E,u),oe(g,P)}P=!0;let Y,ue;if(b)for(ue=b.length-1;ue>=0;ue--)Y=g.g=b[ue],P=ce(Y,E,!0,g)&&P;if(Y=g.g=u,P=ce(Y,E,!0,g)&&P,P=ce(Y,E,!1,g)&&P,b)for(ue=0;ue<b.length;ue++)Y=g.g=b[ue],P=ce(Y,E,!1,g)&&P}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let E=0;E<b.length;E++)de(b[E]);delete u.g[g],u.h--}}this.G=null},ot.prototype.J=function(u,g,b,E){return this.i.add(String(u),g,!1,b,E)},ot.prototype.K=function(u,g,b,E){return this.i.add(String(u),g,!0,b,E)};function ce(u,g,b,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let P=!0;for(let Y=0;Y<g.length;++Y){const ue=g[Y];if(ue&&!ue.da&&ue.capture==b){const Ue=ue.listener,jt=ue.ha||ue.src;ue.fa&&re(u.i,ue),P=Ue.call(jt,E)!==!1&&P}}return P&&!E.defaultPrevented}function Ae(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function Ge(u){u.g=Ae(()=>{u.g=null,u.i&&(u.i=!1,Ge(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class qt extends O{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(u){O.call(this),this.h=u,this.g={}}T(er,O);var Qi=[];function Ki(u){je(u.g,function(g,b){this.g.hasOwnProperty(b)&&we(g)},u),u.g={}}er.prototype.N=function(){er.Z.N.call(this),Ki(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var la=f.JSON.stringify,Xu=f.JSON.parse,jo=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function So(){}function Ao(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){A.call(this,"d")}T(Zt,A);function Vn(){A.call(this,"c")}T(Vn,A);var Tt={},Co=null;function Pr(){return Co=Co||new ot}Tt.Ia="serverreachability";function Ro(u){A.call(this,Tt.Ia,u)}T(Ro,A);function us(u){const g=Pr();D(g,new Ro(g))}Tt.STAT_EVENT="statevent";function tr(u,g){A.call(this,Tt.STAT_EVENT,u),this.stat=g}T(tr,A);function Rt(u){const g=Pr();D(g,new tr(g,u))}Tt.Ja="timingevent";function hs(u,g){A.call(this,Tt.Ja,u),this.size=g}T(hs,A);function ds(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function Zu(u,g,b,E,P,Y){u.info(function(){if(u.g)if(Y){var ue="",Ue=Y.split("&");for(let tt=0;tt<Ue.length;tt++){var jt=Ue[tt].split("=");if(jt.length>1){const vt=jt[0];jt=jt[1];const Ln=vt.split("_");ue=Ln.length>=2&&Ln[1]=="type"?ue+(vt+"="+jt+"&"):ue+(vt+"=redacted&")}}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+E+") [attempt "+P+"]: "+g+`
`+b+`
`+ue})}function Do(u,g,b,E,P,Y,ue){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+P+"]: "+g+`
`+b+`
`+Y+" "+ue})}function fs(u,g,b,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ju(u,b)+(E?" "+E:"")})}function nr(u,g){u.info(function(){return"TIMEOUT: "+g})}Xn.prototype.info=function(){};function Ju(u,g){if(!u.g)return g;if(!g)return null;try{const Y=JSON.parse(g);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var b=Y[u];if(!(b.length<2)){var E=b[1];if(Array.isArray(E)&&!(E.length<1)){var P=E[0];if(P!="noop"&&P!="stop"&&P!="close")for(let ue=1;ue<E.length;ue++)E[ue]=""}}}}return la(Y)}catch{return g}}var sr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zi;function ar(){}T(ar,So),ar.prototype.g=function(){return new XMLHttpRequest},Zi=new ar;function Us(u){return encodeURIComponent(String(u))}function Io(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function Zn(u,g,b,E){this.j=u,this.i=g,this.l=b,this.S=E||1,this.V=new er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var Dt={},$t={};function ms(u,g,b){u.M=1,u.A=rr(Mt(g)),u.u=b,u.R=!0,Br(u,null)}function Br(u,g){u.F=Date.now(),gs(u),u.B=Mt(u.A);var b=u.B,E=u.S;Array.isArray(E)||(E=[String(E)]),Fr(b.i,"t",E),u.C=0,b=u.j.L,u.h=new Jn,u.g=Yo(u.j,b?g:null,!u.u),u.P>0&&(u.O=new qt(y(u.Y,u,u.g),u.P)),g=u.V,b=u.g,E=u.ba;var P="readystatechange";Array.isArray(P)||(P&&(Qi[0]=P.toString()),P=Qi);for(let Y=0;Y<P.length;Y++){const ue=Se(b,P[Y],E||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),us(),Zu(u.i,u.v,u.B,u.l,u.S,u.u)}Zn.prototype.ba=function(u){u=u.target;const g=this.O;g&&ts(u)==3?g.j():this.Y(u)},Zn.prototype.Y=function(u){try{if(u==this.g)e:{const Ue=ts(this.g),jt=this.g.ya(),tt=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Ue!=4||jt==7||(jt==8||tt<=0?us(3):us(2)),ps(this);var g=this.g.ca();this.X=g;var b=Wu(this);if(this.o=g==200,Do(this.i,this.v,this.B,this.l,this.S,Ue,g),this.o){if(this.U&&!this.L){t:{if(this.g){var E,P=this.g;if((E=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(E)){var Y=E;break t}}Y=null}if(u=Y)fs(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ys(this,u);else{this.o=!1,this.m=3,Rt(12),wn(this),kn(this);break e}}if(this.R){u=!0;let vt;for(;!this.K&&this.C<b.length;)if(vt=Oo(this,b),vt==$t){Ue==4&&(this.m=4,Rt(14),u=!1),fs(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Dt){this.m=4,Rt(15),fs(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else fs(this.i,this.l,vt,null),ys(this,vt);if(Mo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||b.length!=0||this.h.h||(this.m=1,Rt(16),u=!1),this.o=this.o&&u,!u)fs(this.i,this.l,b,"[Invalid Chunked Response]"),wn(this),kn(this);else if(b.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),dl(ue),ue.P=!0,Rt(11))}}else fs(this.i,this.l,b,null),ys(this,b);Ue==4&&wn(this),this.o&&!this.K&&(Ue==4?Ho(this.j,this):(this.o=!1,gs(this)))}else Ps(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),wn(this),kn(this)}}}catch{}finally{}};function Wu(u){if(!Mo(u))return u.g.la();const g=Jt(u.g);if(g==="")return"";let b="";const E=g.length,P=ts(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return wn(u),kn(u),"";u.h.i=new f.TextDecoder}for(let Y=0;Y<E;Y++)u.h.h=!0,b+=u.h.i.decode(g[Y],{stream:!(P&&Y==E-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Mo(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Oo(u,g){var b=u.C,E=g.indexOf(`
`,b);return E==-1?$t:(b=Number(g.substring(b,E)),isNaN(b)?Dt:(E+=1,E+b>g.length?$t:(g=g.slice(E,E+b),u.C=E+b,g)))}Zn.prototype.cancel=function(){this.K=!0,wn(this)};function gs(u){u.T=Date.now()+u.H,qr(u,u.H)}function qr(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ds(y(u.aa,u),g)}function ps(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Zn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(nr(this.i,this.B),this.M!=2&&(us(),Rt(17)),wn(this),this.m=2,kn(this)):qr(this,this.T-u)};function kn(u){u.j.I==0||u.K||Ho(u.j,u)}function wn(u){ps(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Ki(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function ys(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||vs(b.h,u))){if(!u.L&&vs(b.h,u)&&b.I==3){try{var E=b.Ba.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var P=E;if(P[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Xr(b),ga(b);else break e;dr(b),Rt(18)}}else b.xa=P[1],0<b.xa-b.K&&P[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ds(y(b.Va,b),6e3));xs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ts(b,11)}else if((u.L||b.g==u)&&Xr(b),!w(g))for(P=b.Ba.g.parse(g),g=0;g<P.length;g++){let tt=P[g];const vt=tt[0];if(!(vt<=b.K))if(b.K=vt,tt=tt[1],b.I==2)if(tt[0]=="c"){b.M=tt[1],b.ba=tt[2];const Ln=tt[3];Ln!=null&&(b.ka=Ln,b.j.info("VER="+b.ka));const js=tt[4];js!=null&&(b.za=js,b.j.info("SVER="+b.za));const ns=tt[5];ns!=null&&typeof ns=="number"&&ns>0&&(E=1.5*ns,b.O=E,b.j.info("backChannelRequestTimeoutMs_="+E)),E=b;const ss=u.g;if(ss){const fr=ss.g?ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fr){var Y=E.h;Y.g||fr.indexOf("spdy")==-1&&fr.indexOf("quic")==-1&&fr.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(el(Y,Y.h),Y.h=null))}if(E.G){const Zr=ss.g?ss.g.getResponseHeader("X-HTTP-Session-Id"):null;Zr&&(E.wa=Zr,rt(E.J,E.G,Zr))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),E=b;var ue=u;if(E.na=$o(E,E.L?E.ba:null,E.W),ue.L){tl(E.h,ue);var Ue=ue,jt=E.O;jt&&(Ue.H=jt),Ue.D&&(ps(Ue),gs(Ue)),E.g=ue}else Bo(E);b.i.length>0&&ws(b)}else tt[0]!="stop"&&tt[0]!="close"||Ts(b,7);else b.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Ts(b,7):ul(b):tt[0]!="noop"&&b.l&&b.l.qa(tt),b.A=0)}}us(4)}catch{}}var It=class{constructor(u,g){this.g=u,this.map=g}};function Ji(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wi(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xs(u){return u.h?1:u.g?u.g.size:0}function vs(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function el(u,g){u.g?u.g.add(g):u.h=g}function tl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ji.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return L(u.i)}var Vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hr(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const E=u[b].indexOf("=");let P,Y=null;E>=0?(P=u[b].substring(0,E),Y=u[b].substring(E+1)):P=u[b],g(P,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Tn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Tn?(this.l=u.l,Yt(this,u.j),this.o=u.o,this.g=u.g,oa(this,u.u),this.h=u.h,sl(this,Lo(u.i)),this.m=u.m):u&&(g=String(u).match(Vo))?(this.l=!1,Yt(this,g[1]||"",!0),this.o=bs(g[2]||""),this.g=bs(g[3]||"",!0),oa(this,g[4]),this.h=bs(g[5]||"",!0),sl(this,g[6]||"",!0),this.m=bs(g[7]||"")):(this.l=!1,this.i=new ua(null,this.l))}Tn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(ir(g,Gr,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ir(g,Gr,!0),"@"),u.push(Us(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(ir(b,b.charAt(0)=="/"?al:ko,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",ir(b,zo)),u.join("")},Tn.prototype.resolve=function(u){const g=Mt(this);let b=!!u.j;b?Yt(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var E=u.h;if(b)oa(g,u.u);else if(b=!!u.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var P=g.h.lastIndexOf("/");P!=-1&&(E=g.h.slice(0,P+1)+E)}if(P=E,P==".."||P==".")E="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){E=P.lastIndexOf("/",0)==0,P=P.split("/");const Y=[];for(let ue=0;ue<P.length;){const Ue=P[ue++];Ue=="."?E&&ue==P.length&&Y.push(""):Ue==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),E&&ue==P.length&&Y.push("")):(Y.push(Ue),E=!0)}E=Y.join("/")}else E=P}return b?g.h=E:b=u.i.toString()!=="",b?sl(g,Lo(u.i)):b=!!u.m,b&&(g.m=u.m),g};function Mt(u){return new Tn(u)}function Yt(u,g,b){u.j=b?bs(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function oa(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function sl(u,g,b){g instanceof ua?(u.i=g,$r(u.i,u.l)):(b||(g=ir(g,ca)),u.i=new ua(g,u.l))}function rt(u,g,b){u.i.set(g,b)}function rr(u){return rt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function bs(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ir(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,mn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Gr=/[#\/\?@]/g,ko=/[#\?:]/g,al=/[#\?]/g,ca=/[#\?@]/g,zo=/#/g;function ua(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function gn(u){u.g||(u.g=new Map,u.h=0,u.i&&Hr(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}i=ua.prototype,i.add=function(u,g){gn(this),this.i=null,u=ha(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Uo(u,g){gn(u),g=ha(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function rl(u,g){return gn(u),g=ha(u,g),u.g.has(g)}i.forEach=function(u,g){gn(this),this.g.forEach(function(b,E){b.forEach(function(P){u.call(g,P,E,this)},this)},this)};function il(u,g){gn(u);let b=[];if(typeof g=="string")rl(u,g)&&(b=b.concat(u.g.get(ha(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}i.set=function(u,g){return gn(this),this.i=null,u=ha(this,u),rl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},i.get=function(u,g){return u?(u=il(this,u),u.length>0?String(u[0]):g):g};function Fr(u,g,b){Uo(u,g),b.length>0&&(u.i=null,u.g.set(ha(u,g),L(b)),u.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let E=0;E<g.length;E++){var b=g[E];const P=Us(b);b=il(this,b);for(let Y=0;Y<b.length;Y++){let ue=P;b[Y]!==""&&(ue+="="+Us(b[Y])),u.push(ue)}}return this.i=u.join("&")};function Lo(u){const g=new ua;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function ha(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function $r(u,g){g&&!u.j&&(gn(u),u.i=null,u.g.forEach(function(b,E){const P=E.toLowerCase();E!=P&&(Uo(this,E),Fr(this,P,b))},u)),u.j=g}function Wn(u,g){const b=new Xn;if(f.Image){const E=new Image;E.onload=_(zn,b,"TestLoadImage: loaded",!0,g,E),E.onerror=_(zn,b,"TestLoadImage: error",!1,g,E),E.onabort=_(zn,b,"TestLoadImage: abort",!1,g,E),E.ontimeout=_(zn,b,"TestLoadImage: timeout",!1,g,E),f.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function ll(u,g){const b=new Xn,E=new AbortController,P=setTimeout(()=>{E.abort(),zn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(Y=>{clearTimeout(P),Y.ok?zn(b,"TestPingServer: ok",!0,g):zn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(P),zn(b,"TestPingServer: error",!1,g)})}function zn(u,g,b,E,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),E(b)}catch{}}function da(){this.g=new jo}function _s(u){this.i=u.Sb||null,this.h=u.ab||!1}T(_s,So),_s.prototype.g=function(){return new lr(this.i,this.h)};function lr(u,g){ot.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(lr,ot),i=lr.prototype,i.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,es(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fa(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?fa(this):es(this),this.readyState==3&&Yr(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,fa(this))},i.Na=function(u){this.g&&(this.response=u,fa(this))},i.ga=function(){this.g&&fa(this)};function fa(u){u.readyState=4,u.l=null,u.j=null,u.B=null,es(u)}i.setRequestHeader=function(u,g){this.A.append(u,g)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function es(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(lr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Un(u){let g="";return je(u,function(b,E){g+=E,g+=":",g+=b,g+=`\r
`}),g}function or(u,g,b){e:{for(E in b){var E=!1;break e}E=!0}E||(b=Un(b),typeof u=="string"?b!=null&&Us(b):rt(u,g,b))}function ct(u){ot.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ct,ot);var Ns=/^https?$/i,ol=["POST","PUT"];i=ct.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,g,b,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zi.g(),this.g.onreadystatechange=C(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Y){cr(this,Y);return}if(u=b||"",b=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var P in E)b.set(P,E[P]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const Y of E.keys())b.set(Y,E.get(Y));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(b.keys()).find(Y=>Y.toLowerCase()=="content-type"),P=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(ol,g,void 0)>=0)||E||P||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of b)this.g.setRequestHeader(Y,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){cr(this,Y)}};function cr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,cl(u),Ls(u)}function cl(u){u.A||(u.A=!0,D(u,"complete"),D(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,D(this,"complete"),D(this,"abort"),Ls(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ls(this,!0)),ct.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ur(this):this.Xa())},i.Xa=function(){ur(this)};function ur(u){if(u.h&&typeof h<"u"){if(u.v&&ts(u)==4)setTimeout(u.Ca.bind(u),0);else if(D(u,"readystatechange"),ts(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var E;if(E=Y===0){let ue=String(u.D).match(Vo)[1]||null;!ue&&f.self&&f.self.location&&(ue=f.self.location.protocol.slice(0,-1)),E=!Ns.test(ue?ue.toLowerCase():"")}b=E}if(b)D(u,"complete"),D(u,"success");else{u.o=6;try{var P=ts(u)>2?u.g.statusText:""}catch{P=""}u.l=P+" ["+u.ca()+"]",cl(u)}}finally{Ls(u)}}}}function Ls(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||D(u,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ts(u){return u.g?u.g.readyState:0}i.ca=function(){try{return ts(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Xu(g)}};function Jt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ps(u){const g={};u=(u.g&&ts(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(w(u[E]))continue;var b=Io(u[E]);const P=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Y=g[P]||[];g[P]=Y,Y.push(b)}Pe(g,function(E){return E.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function ma(u){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Es("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Es("baseRetryDelayMs",5e3,u),this.Za=Es("retryDelaySeedMs",1e4,u),this.Ta=Es("forwardChannelMaxRetries",2,u),this.va=Es("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ji(u&&u.concurrentRequestLimit),this.Ba=new da,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ma.prototype,i.ka=8,i.I=1,i.connect=function(u,g,b,E){Rt(0),this.W=u,this.H=g||{},b&&E!==void 0&&(this.H.OSID=b,this.H.OAID=E),this.F=this.X,this.J=$o(this,null,this.W),ws(this)};function ul(u){if(Qr(u),u.I==3){var g=u.V++,b=Mt(u.J);if(rt(b,"SID",u.M),rt(b,"RID",g),rt(b,"TYPE","terminate"),hr(u,b),g=new Zn(u,u.j,g),g.M=2,g.A=rr(Mt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Yo(g.j,null),g.g.ea(g.A)),g.F=Date.now(),gs(g)}Fo(u)}function ga(u){u.g&&(dl(u),u.g.cancel(),u.g=null)}function Qr(u){ga(u),u.v&&(f.clearTimeout(u.v),u.v=null),Xr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function ws(u){if(!Wi(u.h)&&!u.m){u.m=!0;var g=u.Ea;Me||j(),De||(Me(),De=!0),R.add(g,u),u.D=0}}function Kr(u,g){return xs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ds(y(u.Ea,u,g),Go(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const P=new Zn(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=V(Y),oe(Y,this.U)):Y=this.U),this.u!==null||this.R||(P.J=Y,Y=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var E=this.i[b];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Po(this,P,g),b=Mt(this.J),rt(b,"RID",u),rt(b,"CVER",22),this.G&&rt(b,"X-HTTP-Session-Id",this.G),hr(this,b),Y&&(this.R?g="headers="+Us(Un(Y))+"&"+g:this.u&&or(b,this.u,Y)),el(this.h,P),this.Ra&&rt(b,"TYPE","init"),this.S?(rt(b,"$req",g),rt(b,"SID","null"),P.U=!0,ms(P,b,null)):ms(P,b,g),this.I=2}}else this.I==3&&(u?hl(this,u):this.i.length==0||Wi(this.h)||hl(this))};function hl(u,g){var b;g?b=g.l:b=u.V++;const E=Mt(u.J);rt(E,"SID",u.M),rt(E,"RID",b),rt(E,"AID",u.K),hr(u,E),u.u&&u.o&&or(E,u.u,u.o),b=new Zn(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Po(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),el(u.h,b),ms(b,E,g)}function hr(u,g){u.H&&je(u.H,function(b,E){rt(g,E,b)}),u.l&&je({},function(b,E){rt(g,E,b)})}function Po(u,g,b){b=Math.min(u.i.length,b);const E=u.l?y(u.l.Ka,u.l,u):null;e:{var P=u.i;let Ue=-1;for(;;){const jt=["count="+b];Ue==-1?b>0?(Ue=P[0].g,jt.push("ofs="+Ue)):Ue=0:jt.push("ofs="+Ue);let tt=!0;for(let vt=0;vt<b;vt++){var Y=P[vt].g;const Ln=P[vt].map;if(Y-=Ue,Y<0)Ue=Math.max(0,P[vt].g-100),tt=!1;else try{Y="req"+Y+"_"||"";try{var ue=Ln instanceof Map?Ln:Object.entries(Ln);for(const[js,ns]of ue){let ss=ns;p(ns)&&(ss=la(ns)),jt.push(Y+js+"="+encodeURIComponent(ss))}}catch(js){throw jt.push(Y+"type="+encodeURIComponent("_badmap")),js}}catch{E&&E(Ln)}}if(tt){ue=jt.join("&");break e}}ue=void 0}return u=u.i.splice(0,b),g.G=u,ue}function Bo(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Me||j(),De||(Me(),De=!0),R.add(g,u),u.A=0}}function dr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ds(y(u.Da,u),Go(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,qo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ds(y(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),ga(this),qo(this))};function dl(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function qo(u){u.g=new Zn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Mt(u.na);rt(g,"RID","rpc"),rt(g,"SID",u.M),rt(g,"AID",u.K),rt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&rt(g,"TO",u.ia),rt(g,"TYPE","xmlhttp"),hr(u,g),u.u&&u.o&&or(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=rr(Mt(g)),b.u=null,b.R=!0,Br(b,u)}i.Va=function(){this.C!=null&&(this.C=null,ga(this),dr(this),Rt(19))};function Xr(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Ho(u,g){var b=null;if(u.g==g){Xr(u),dl(u),u.g=null;var E=2}else if(vs(u.h,g))b=g.G,tl(u.h,g),E=1;else return;if(u.I!=0){if(g.o)if(E==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var P=u.D;E=Pr(),D(E,new hs(E,b)),ws(u)}else Bo(u);else if(P=g.m,P==3||P==0&&g.X>0||!(E==1&&Kr(u,g)||E==2&&dr(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),P){case 1:Ts(u,5);break;case 4:Ts(u,10);break;case 3:Ts(u,6);break;default:Ts(u,2)}}}function Go(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Ts(u,g){if(u.j.info("Error code "+g),g==2){var b=y(u.bb,u),E=u.Ua;const P=!E;E=new Tn(E||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Yt(E,"https"),rr(E),P?Wn(E.toString(),b):ll(E.toString(),b)}else Rt(2);u.I=0,u.l&&u.l.pa(g),Fo(u),Qr(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Fo(u){if(u.I=0,u.ja=[],u.l){const g=nl(u.h);(g.length!=0||u.i.length!=0)&&(X(u.ja,g),X(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function $o(u,g,b){var E=b instanceof Tn?Mt(b):new Tn(b);if(E.g!="")g&&(E.g=g+"."+E.g),oa(E,E.u);else{var P=f.location;E=P.protocol,g=g?g+"."+P.hostname:P.hostname,P=+P.port;const Y=new Tn(null);E&&Yt(Y,E),g&&(Y.g=g),P&&oa(Y,P),b&&(Y.h=b),E=Y}return b=u.G,g=u.wa,b&&g&&rt(E,b,g),rt(E,"VER",u.ka),hr(u,E),E}function Yo(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new ct(new _s({ab:b})):new ct(u.ma),g.Fa(u.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qo(){}i=Qo.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function pa(){}pa.prototype.g=function(u,g){return new hn(u,g)};function hn(u,g){ot.call(this),this.g=new ma(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!w(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Bs(this)}T(hn,ot),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){ul(this.g)},hn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=la(u),u=b);g.i.push(new It(g.Ya++,u)),g.I==3&&ws(g)},hn.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,hn.Z.N.call(this)};function Ko(u){Zt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(Ko,Zt);function Xo(){Vn.call(this),this.status=1}T(Xo,Vn);function Bs(u){this.g=u}T(Bs,Qo),Bs.prototype.ra=function(){D(this.g,"a")},Bs.prototype.qa=function(u){D(this.g,new Ko(u))},Bs.prototype.pa=function(u){D(this.g,new Xo)},Bs.prototype.oa=function(){D(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,F0=function(){return new pa},G0=function(){return Pr()},H0=Tt,xf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sr.NO_ERROR=0,sr.TIMEOUT=8,sr.HTTP_ERROR=6,ru=sr,Xi.COMPLETE="complete",q0=Xi,Ao.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",ot.prototype.listen=ot.prototype.J,Jl=Ao,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,B0=ct}).apply(typeof eu<"u"?eu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi="12.9.0";function oE(i){Hi=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new O0("@firebase/firestore");function Si(){return Ir.logLevel}function pe(i,...t){if(Ir.logLevel<=Ze.DEBUG){const s=t.map(Gf);Ir.debug(`Firestore (${Hi}): ${i}`,...s)}}function ra(i,...t){if(Ir.logLevel<=Ze.ERROR){const s=t.map(Gf);Ir.error(`Firestore (${Hi}): ${i}`,...s)}}function Mr(i,...t){if(Ir.logLevel<=Ze.WARN){const s=t.map(Gf);Ir.warn(`Firestore (${Hi}): ${i}`,...s)}}function Gf(i){if(typeof i=="string")return i;try{return(function(s){return JSON.stringify(s)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(i,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,$0(i,r,s)}function $0(i,t,s){let r=`FIRESTORE (${Hi}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw ra(r),new Error(r)}function st(i,t,s,r){let c="Unexpected state";typeof s=="string"?c=s:r=s,i||$0(t,c,r)}function ze(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends qi{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.promise=new Promise(((t,s)=>{this.resolve=t,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class cE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable((()=>s(cn.UNAUTHENTICATED)))}shutdown(){}}class uE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class hE{constructor(t){this.t=t,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){st(this.o===void 0,42304);let r=this.i;const c=x=>this.i!==r?(r=this.i,s(x)):Promise.resolve();let h=new sa;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new sa,t.enqueueRetryable((()=>c(this.currentUser)))};const f=()=>{const x=h;t.enqueueRetryable((async()=>{await x.promise,await c(this.currentUser)}))},p=x=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((x=>p(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?p(x):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new sa)}}),0),f()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==t?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new Y0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return st(t===null||typeof t=="string",2055,{h:t}),new cn(t)}}class dE{constructor(t,s,r){this.P=t,this.T=s,this.I=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class fE{constructor(t,s,r){this.P=t,this.T=s,this.I=r}getToken(){return Promise.resolve(new dE(this.P,this.T,this.I))}start(t,s){t.enqueueRetryable((()=>s(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mE{constructor(t,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,FN(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,s){st(this.o===void 0,3512);const r=h=>{h.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const f=h.token!==this.m;return this.m=h.token,pe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable((()=>r(h)))};const c=h=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>c(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?c(h):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((s=>s?(st(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new gx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let r=0;r<i;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const c=gE(40);for(let h=0;h<c.length;++h)r.length<20&&c[h]<s&&(r+=t.charAt(c[h]%62))}return r}}function Ye(i,t){return i<t?-1:i>t?1:0}function vf(i,t){const s=Math.min(i.length,t.length);for(let r=0;r<s;r++){const c=i.charAt(r),h=t.charAt(r);if(c!==h)return sf(c)===sf(h)?Ye(c,h):sf(c)?1:-1}return Ye(i.length,t.length)}const pE=55296,yE=57343;function sf(i){const t=i.charCodeAt(0);return t>=pE&&t<=yE}function ki(i,t,s){return i.length===t.length&&i.every(((r,c)=>s(r,t[c])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="__name__";class Ds{constructor(t,s,r){s===void 0?s=0:s>t.length&&Ie(637,{offset:s,range:t.length}),r===void 0?r=t.length-s:r>t.length-s&&Ie(1746,{length:r,range:t.length-s}),this.segments=t,this.offset=s,this.len=r}get length(){return this.len}isEqual(t){return Ds.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof Ds?t.forEach((r=>{s.push(r)})):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,r=this.limit();s<r;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const r=Math.min(t.length,s.length);for(let c=0;c<r;c++){const h=Ds.compareSegments(t.get(c),s.get(c));if(h!==0)return h}return Ye(t.length,s.length)}static compareSegments(t,s){const r=Ds.isNumericId(t),c=Ds.isNumericId(s);return r&&!c?-1:!r&&c?1:r&&c?Ds.extractNumericId(t).compare(Ds.extractNumericId(s)):vf(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return qa.fromString(t.substring(4,t.length-2))}}class pt extends Ds{construct(t,s,r){return new pt(t,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const r of t){if(r.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((c=>c.length>0)))}return new pt(s)}static emptyPath(){return new pt([])}}const xE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Ds{construct(t,s,r){return new an(t,s,r)}static isValidIdentifier(t){return xE.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===px}static keyField(){return new an([px])}static fromServerFormat(t){const s=[];let r="",c=0;const h=()=>{if(r.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let f=!1;for(;c<t.length;){const p=t[c];if(p==="\\"){if(c+1===t.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const x=t[c+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=x,c+=2}else p==="`"?(f=!f,c++):p!=="."||f?(r+=p,c++):(h(),c++)}if(h(),f)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new an(s)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.path=t}static fromPath(t){return new Ee(pt.fromString(t))}static fromName(t){return new Ee(pt.fromString(t).popFirst(5))}static empty(){return new Ee(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return pt.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ee(new pt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(i,t,s){if(!s)throw new me(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function vE(i,t,s,r){if(t===!0&&r===!0)throw new me(ne.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function yx(i){if(!Ee.isDocumentKey(i))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function xx(i){if(Ee.isDocumentKey(i))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function K0(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ru(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Ie(12329,{type:typeof i})}function ks(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Ru(i);throw new me(ne.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(i,t){const s={typeString:i};return t&&(s.value=t),s}function vo(i,t){if(!K0(i))throw new me(ne.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in t)if(t[r]){const c=t[r].typeString,h="value"in t[r]?{value:t[r].value}:void 0;if(!(r in i)){s=`JSON missing required field: '${r}'`;break}const f=i[r];if(c&&typeof f!==c){s=`JSON field '${r}' must be a ${c}.`;break}if(h!==void 0&&f!==h.value){s=`Expected '${r}' field to equal '${h.value}'`;break}}if(s)throw new me(ne.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=-62135596800,bx=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(t){return mt.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),r=Math.floor((t-1e3*s)*bx);return new mt(s,r)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<vx)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bx}_compareTo(t){return this.seconds===t.seconds?Ye(this.nanoseconds,t.nanoseconds):Ye(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(vo(t,mt._jsonSchema))return new mt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-vx;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Pt("string",mt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(t){return new Oe(t)}static min(){return new Oe(new mt(0,0))}static max(){return new Oe(new mt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=-1;function bE(i,t){const s=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,c=Oe.fromTimestamp(r===1e9?new mt(s+1,0):new mt(s,r));return new Ga(c,Ee.empty(),t)}function _E(i){return new Ga(i.readTime,i.key,co)}class Ga{constructor(t,s,r){this.readTime=t,this.documentKey=s,this.largestBatchId=r}static min(){return new Ga(Oe.min(),Ee.empty(),co)}static max(){return new Ga(Oe.max(),Ee.empty(),co)}}function NE(i,t){let s=i.readTime.compareTo(t.readTime);return s!==0?s:(s=Ee.comparator(i.documentKey,t.documentKey),s!==0?s:Ye(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==EE)throw i;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new ae(((r,c)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(r,c)},this.catchCallback=h=>{this.wrapFailure(s,h).next(r,c)}}))}toPromise(){return new Promise(((t,s)=>{this.next(t,s)}))}wrapUserFunction(t){try{const s=t();return s instanceof ae?s:ae.resolve(s)}catch(s){return ae.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction((()=>t(s))):ae.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction((()=>t(s))):ae.reject(s)}static resolve(t){return new ae(((s,r)=>{s(t)}))}static reject(t){return new ae(((s,r)=>{r(t)}))}static waitFor(t){return new ae(((s,r)=>{let c=0,h=0,f=!1;t.forEach((p=>{++c,p.next((()=>{++h,f&&h===c&&s()}),(x=>r(x)))})),f=!0,h===c&&s()}))}static or(t){let s=ae.resolve(!1);for(const r of t)s=s.next((c=>c?ae.resolve(c):r()));return s}static forEach(t,s){const r=[];return t.forEach(((c,h)=>{r.push(s.call(this,c,h))})),this.waitFor(r)}static mapArray(t,s){return new ae(((r,c)=>{const h=t.length,f=new Array(h);let p=0;for(let x=0;x<h;x++){const y=x;s(t[y]).next((_=>{f[y]=_,++p,p===h&&r(f)}),(_=>c(_)))}}))}static doWhile(t,s){return new ae(((r,c)=>{const h=()=>{t()===!0?s().next((()=>{h()}),c):r()};h()}))}}function TE(i){const t=i.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Fi(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Du.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=-1;function Iu(i){return i==null}function pu(i){return i===0&&1/i==-1/0}function jE(i){return typeof i=="number"&&Number.isInteger(i)&&!pu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="";function SE(i){let t="";for(let s=0;s<i.length;s++)t.length>0&&(t=_x(t)),t=AE(i.get(s),t);return _x(t)}function AE(i,t){let s=t;const r=i.length;for(let c=0;c<r;c++){const h=i.charAt(c);switch(h){case"\0":s+="";break;case X0:s+="";break;default:s+=h}}return s}function _x(i){return i+X0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(i){let t=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&t++;return t}function Ja(i,t){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&t(s,i[s])}function Z0(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(t,s){this.comparator=t,this.root=s||sn.EMPTY}insert(t,s){return new Nt(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(t){return new Nt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,sn.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(t){let s=0,r=this.root;for(;!r.isEmpty();){const c=this.comparator(t,r.key);if(c===0)return s+r.left.size;c<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((s,r)=>(t(s,r),!1)))}toString(){const t=[];return this.inorderTraversal(((s,r)=>(t.push(`${s}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new tu(this.root,t,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new tu(this.root,t,this.comparator,!0)}}class tu{constructor(t,s,r,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=s?r(t.key,s):1,s&&c&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class sn{constructor(t,s,r,c,h){this.key=t,this.value=s,this.color=r??sn.RED,this.left=c??sn.EMPTY,this.right=h??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,r,c,h){return new sn(t??this.key,s??this.value,r??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,r){let c=this;const h=r(t,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(t,s,r),null):h===0?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(t,s,r)),c.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let r,c=this;if(s(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,s),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),s(t,c.key)===0){if(c.right.isEmpty())return sn.EMPTY;r=c.right.min(),c=c.copy(r.key,r.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,s))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ie(27949);return t+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(t,s,r,c,h){return this}insert(t,s,r){return new sn(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.comparator=t,this.data=new Nt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((s,r)=>(t(s),!1)))}forEachInRange(t,s){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const c=r.getNext();if(this.comparator(c.key,t[1])>=0)return;s(c.key)}}forEachWhile(t,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new Ex(this.data.getIterator())}getIteratorFrom(t){return new Ex(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach((r=>{s=s.add(r)})),s}isEqual(t){if(!(t instanceof Gt)||this.size!==t.size)return!1;const s=this.data.getIterator(),r=t.data.getIterator();for(;s.hasNext();){const c=s.getNext().key,h=r.getNext().key;if(this.comparator(c,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((s=>{t.push(s)})),t}toString(){const t=[];return this.forEach((s=>t.push(s))),"SortedSet("+t.toString()+")"}copy(t){const s=new Gt(this.comparator);return s.data=t,s}}class Ex{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this.fields=t,t.sort(an.comparator)}static empty(){return new On([])}unionWith(t){let s=new Gt(an.comparator);for(const r of this.fields)s=s.add(r);for(const r of t)s=s.add(r);return new On(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return ki(this.fields,t.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.binaryString=t}static fromBase64String(t){const s=(function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new J0("Invalid base64 string: "+h):h}})(t);return new rn(s)}static fromUint8Array(t){const s=(function(c){let h="";for(let f=0;f<c.length;++f)h+=String.fromCharCode(c[f]);return h})(t);return new rn(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let c=0;c<s.length;c++)r[c]=s.charCodeAt(c);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ye(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const CE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fa(i){if(st(!!i,39018),typeof i=="string"){let t=0;const s=CE.exec(i);if(st(!!s,46558,{timestamp:i}),s[1]){let c=s[1];c=(c+"000000000").substr(0,9),t=Number(c)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ct(i.seconds),nanos:Ct(i.nanos)}}function Ct(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function $a(i){return typeof i=="string"?rn.fromBase64String(i):rn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="server_timestamp",ev="__type__",tv="__previous_value__",nv="__local_write_time__";function Yf(i){var s,r;return((r=(((s=i==null?void 0:i.mapValue)==null?void 0:s.fields)||{})[ev])==null?void 0:r.stringValue)===W0}function Mu(i){const t=i.mapValue.fields[tv];return Yf(t)?Mu(t):t}function uo(i){const t=Fa(i.mapValue.fields[nv].timestampValue);return new mt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(t,s,r,c,h,f,p,x,y,_,T){this.databaseId=t,this.appId=s,this.persistenceKey=r,this.host=c,this.ssl=h,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=x,this.useFetchStreams=y,this.isUsingEmulator=_,this.apiKey=T}}const yu="(default)";class ho{constructor(t,s){this.projectId=t,this.database=s||yu}static empty(){return new ho("","")}get isDefaultDatabase(){return this.database===yu}isEqual(t){return t instanceof ho&&t.projectId===this.projectId&&t.database===this.database}}function DE(i,t){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ho(i.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="__type__",IE="__max__",nu={mapValue:{}},av="__vector__",xu="value";function Ya(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Yf(i)?4:OE(i)?9007199254740991:ME(i)?10:11:Ie(28295,{value:i})}function zs(i,t){if(i===t)return!0;const s=Ya(i);if(s!==Ya(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return uo(i).isEqual(uo(t));case 3:return(function(c,h){if(typeof c.timestampValue=="string"&&typeof h.timestampValue=="string"&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const f=Fa(c.timestampValue),p=Fa(h.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(c,h){return $a(c.bytesValue).isEqual($a(h.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(c,h){return Ct(c.geoPointValue.latitude)===Ct(h.geoPointValue.latitude)&&Ct(c.geoPointValue.longitude)===Ct(h.geoPointValue.longitude)})(i,t);case 2:return(function(c,h){if("integerValue"in c&&"integerValue"in h)return Ct(c.integerValue)===Ct(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const f=Ct(c.doubleValue),p=Ct(h.doubleValue);return f===p?pu(f)===pu(p):isNaN(f)&&isNaN(p)}return!1})(i,t);case 9:return ki(i.arrayValue.values||[],t.arrayValue.values||[],zs);case 10:case 11:return(function(c,h){const f=c.mapValue.fields||{},p=h.mapValue.fields||{};if(Nx(f)!==Nx(p))return!1;for(const x in f)if(f.hasOwnProperty(x)&&(p[x]===void 0||!zs(f[x],p[x])))return!1;return!0})(i,t);default:return Ie(52216,{left:i})}}function fo(i,t){return(i.values||[]).find((s=>zs(s,t)))!==void 0}function zi(i,t){if(i===t)return 0;const s=Ya(i),r=Ya(t);if(s!==r)return Ye(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ye(i.booleanValue,t.booleanValue);case 2:return(function(h,f){const p=Ct(h.integerValue||h.doubleValue),x=Ct(f.integerValue||f.doubleValue);return p<x?-1:p>x?1:p===x?0:isNaN(p)?isNaN(x)?0:-1:1})(i,t);case 3:return wx(i.timestampValue,t.timestampValue);case 4:return wx(uo(i),uo(t));case 5:return vf(i.stringValue,t.stringValue);case 6:return(function(h,f){const p=$a(h),x=$a(f);return p.compareTo(x)})(i.bytesValue,t.bytesValue);case 7:return(function(h,f){const p=h.split("/"),x=f.split("/");for(let y=0;y<p.length&&y<x.length;y++){const _=Ye(p[y],x[y]);if(_!==0)return _}return Ye(p.length,x.length)})(i.referenceValue,t.referenceValue);case 8:return(function(h,f){const p=Ye(Ct(h.latitude),Ct(f.latitude));return p!==0?p:Ye(Ct(h.longitude),Ct(f.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return Tx(i.arrayValue,t.arrayValue);case 10:return(function(h,f){var C,L,X,ee;const p=h.fields||{},x=f.fields||{},y=(C=p[xu])==null?void 0:C.arrayValue,_=(L=x[xu])==null?void 0:L.arrayValue,T=Ye(((X=y==null?void 0:y.values)==null?void 0:X.length)||0,((ee=_==null?void 0:_.values)==null?void 0:ee.length)||0);return T!==0?T:Tx(y,_)})(i.mapValue,t.mapValue);case 11:return(function(h,f){if(h===nu.mapValue&&f===nu.mapValue)return 0;if(h===nu.mapValue)return 1;if(f===nu.mapValue)return-1;const p=h.fields||{},x=Object.keys(p),y=f.fields||{},_=Object.keys(y);x.sort(),_.sort();for(let T=0;T<x.length&&T<_.length;++T){const C=vf(x[T],_[T]);if(C!==0)return C;const L=zi(p[x[T]],y[_[T]]);if(L!==0)return L}return Ye(x.length,_.length)})(i.mapValue,t.mapValue);default:throw Ie(23264,{he:s})}}function wx(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Ye(i,t);const s=Fa(i),r=Fa(t),c=Ye(s.seconds,r.seconds);return c!==0?c:Ye(s.nanos,r.nanos)}function Tx(i,t){const s=i.values||[],r=t.values||[];for(let c=0;c<s.length&&c<r.length;++c){const h=zi(s[c],r[c]);if(h)return h}return Ye(s.length,r.length)}function Ui(i){return bf(i)}function bf(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(s){const r=Fa(s);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(s){return $a(s).toBase64()})(i.bytesValue):"referenceValue"in i?(function(s){return Ee.fromName(s).toString()})(i.referenceValue):"geoPointValue"in i?(function(s){return`geo(${s.latitude},${s.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(s){let r="[",c=!0;for(const h of s.values||[])c?c=!1:r+=",",r+=bf(h);return r+"]"})(i.arrayValue):"mapValue"in i?(function(s){const r=Object.keys(s.fields||{}).sort();let c="{",h=!0;for(const f of r)h?h=!1:c+=",",c+=`${f}:${bf(s.fields[f])}`;return c+"}"})(i.mapValue):Ie(61005,{value:i})}function iu(i){switch(Ya(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Mu(i);return t?16+iu(t):16;case 5:return 2*i.stringValue.length;case 6:return $a(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((c,h)=>c+iu(h)),0)})(i.arrayValue);case 10:case 11:return(function(r){let c=0;return Ja(r.fields,((h,f)=>{c+=h.length+iu(f)})),c})(i.mapValue);default:throw Ie(13486,{value:i})}}function jx(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function _f(i){return!!i&&"integerValue"in i}function Qf(i){return!!i&&"arrayValue"in i}function Sx(i){return!!i&&"nullValue"in i}function Ax(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function lu(i){return!!i&&"mapValue"in i}function ME(i){var s,r;return((r=(((s=i==null?void 0:i.mapValue)==null?void 0:s.fields)||{})[sv])==null?void 0:r.stringValue)===av}function so(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Ja(i.mapValue.fields,((s,r)=>t.mapValue.fields[s]=so(r))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=so(i.arrayValue.values[s]);return t}return{...i}}function OE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===IE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t){this.value=t}static empty(){return new Nn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let r=0;r<t.length-1;++r)if(s=(s.mapValue.fields||{})[t.get(r)],!lu(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=so(s)}setAll(t){let s=an.emptyPath(),r={},c=[];t.forEach(((f,p)=>{if(!s.isImmediateParentOf(p)){const x=this.getFieldsMap(s);this.applyChanges(x,r,c),r={},c=[],s=p.popLast()}f?r[p.lastSegment()]=so(f):c.push(p.lastSegment())}));const h=this.getFieldsMap(s);this.applyChanges(h,r,c)}delete(t){const s=this.field(t.popLast());lu(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return zs(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<t.length;++r){let c=s.mapValue.fields[t.get(r)];lu(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},s.mapValue.fields[t.get(r)]=c),s=c}return s.mapValue.fields}applyChanges(t,s,r){Ja(s,((c,h)=>t[c]=h));for(const c of r)delete t[c]}clone(){return new Nn(so(this.value))}}function rv(i){const t=[];return Ja(i.fields,((s,r)=>{const c=new an([s]);if(lu(r)){const h=rv(r.mapValue).fields;if(h.length===0)t.push(c);else for(const f of h)t.push(c.child(f))}else t.push(c)})),new On(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t,s,r,c,h,f,p){this.key=t,this.documentType=s,this.version=r,this.readTime=c,this.createTime=h,this.data=f,this.documentState=p}static newInvalidDocument(t){return new un(t,0,Oe.min(),Oe.min(),Oe.min(),Nn.empty(),0)}static newFoundDocument(t,s,r,c){return new un(t,1,s,Oe.min(),r,c,0)}static newNoDocument(t,s){return new un(t,2,s,Oe.min(),Oe.min(),Nn.empty(),0)}static newUnknownDocument(t,s){return new un(t,3,s,Oe.min(),Oe.min(),Nn.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof un&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,s){this.position=t,this.inclusive=s}}function Cx(i,t,s){let r=0;for(let c=0;c<i.position.length;c++){const h=t[c],f=i.position[c];if(h.field.isKeyField()?r=Ee.comparator(Ee.fromName(f.referenceValue),s.key):r=zi(f,s.data.field(h.field)),h.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rx(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!zs(i.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(t,s="asc"){this.field=t,this.dir=s}}function VE(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{}class Lt extends iv{constructor(t,s,r){super(),this.field=t,this.op=s,this.value=r}static create(t,s,r){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,r):new zE(t,s,r):s==="array-contains"?new PE(t,r):s==="in"?new BE(t,r):s==="not-in"?new qE(t,r):s==="array-contains-any"?new HE(t,r):new Lt(t,s,r)}static createKeyFieldInFilter(t,s,r){return s==="in"?new UE(t,r):new LE(t,r)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(zi(s,this.value)):s!==null&&Ya(this.value)===Ya(s)&&this.matchesComparison(zi(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cs extends iv{constructor(t,s){super(),this.filters=t,this.op=s,this.Pe=null}static create(t,s){return new cs(t,s)}matches(t){return lv(this)?this.filters.find((s=>!s.matches(t)))===void 0:this.filters.find((s=>s.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,s)=>t.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lv(i){return i.op==="and"}function ov(i){return kE(i)&&lv(i)}function kE(i){for(const t of i.filters)if(t instanceof cs)return!1;return!0}function Nf(i){if(i instanceof Lt)return i.field.canonicalString()+i.op.toString()+Ui(i.value);if(ov(i))return i.filters.map((t=>Nf(t))).join(",");{const t=i.filters.map((s=>Nf(s))).join(",");return`${i.op}(${t})`}}function cv(i,t){return i instanceof Lt?(function(r,c){return c instanceof Lt&&r.op===c.op&&r.field.isEqual(c.field)&&zs(r.value,c.value)})(i,t):i instanceof cs?(function(r,c){return c instanceof cs&&r.op===c.op&&r.filters.length===c.filters.length?r.filters.reduce(((h,f,p)=>h&&cv(f,c.filters[p])),!0):!1})(i,t):void Ie(19439)}function uv(i){return i instanceof Lt?(function(s){return`${s.field.canonicalString()} ${s.op} ${Ui(s.value)}`})(i):i instanceof cs?(function(s){return s.op.toString()+" {"+s.getFilters().map(uv).join(" ,")+"}"})(i):"Filter"}class zE extends Lt{constructor(t,s,r){super(t,s,r),this.key=Ee.fromName(r.referenceValue)}matches(t){const s=Ee.comparator(t.key,this.key);return this.matchesComparison(s)}}class UE extends Lt{constructor(t,s){super(t,"in",s),this.keys=hv("in",s)}matches(t){return this.keys.some((s=>s.isEqual(t.key)))}}class LE extends Lt{constructor(t,s){super(t,"not-in",s),this.keys=hv("not-in",s)}matches(t){return!this.keys.some((s=>s.isEqual(t.key)))}}function hv(i,t){var s;return(((s=t.arrayValue)==null?void 0:s.values)||[]).map((r=>Ee.fromName(r.referenceValue)))}class PE extends Lt{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return Qf(s)&&fo(s.arrayValue,this.value)}}class BE extends Lt{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&fo(this.value.arrayValue,s)}}class qE extends Lt{constructor(t,s){super(t,"not-in",s)}matches(t){if(fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&s.nullValue===void 0&&!fo(this.value.arrayValue,s)}}class HE extends Lt{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!Qf(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>fo(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(t,s=null,r=[],c=[],h=null,f=null,p=null){this.path=t,this.collectionGroup=s,this.orderBy=r,this.filters=c,this.limit=h,this.startAt=f,this.endAt=p,this.Te=null}}function Dx(i,t=null,s=[],r=[],c=null,h=null,f=null){return new GE(i,t,s,r,c,h,f)}function Kf(i){const t=ze(i);if(t.Te===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map((r=>Nf(r))).join(","),s+="|ob:",s+=t.orderBy.map((r=>(function(h){return h.field.canonicalString()+h.dir})(r))).join(","),Iu(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>Ui(r))).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>Ui(r))).join(",")),t.Te=s}return t.Te}function Xf(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!VE(i.orderBy[s],t.orderBy[s]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!cv(i.filters[s],t.filters[s]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!Rx(i.startAt,t.startAt)&&Rx(i.endAt,t.endAt)}function Ef(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t,s=null,r=[],c=[],h=null,f="F",p=null,x=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=c,this.limit=h,this.limitType=f,this.startAt=p,this.endAt=x,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function FE(i,t,s,r,c,h,f,p){return new $i(i,t,s,r,c,h,f,p)}function Zf(i){return new $i(i)}function Ix(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function $E(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function dv(i){return i.collectionGroup!==null}function ao(i){const t=ze(i);if(t.Ie===null){t.Ie=[];const s=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),s.add(h.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Gt(an.comparator);return f.filters.forEach((x=>{x.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(t).forEach((h=>{s.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new mo(h,r))})),s.has(an.keyField().canonicalString())||t.Ie.push(new mo(an.keyField(),r))}return t.Ie}function Is(i){const t=ze(i);return t.Ee||(t.Ee=YE(t,ao(i))),t.Ee}function YE(i,t){if(i.limitType==="F")return Dx(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((c=>{const h=c.dir==="desc"?"asc":"desc";return new mo(c.field,h)}));const s=i.endAt?new vu(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new vu(i.startAt.position,i.startAt.inclusive):null;return Dx(i.path,i.collectionGroup,t,i.filters,i.limit,s,r)}}function wf(i,t){const s=i.filters.concat([t]);return new $i(i.path,i.collectionGroup,i.explicitOrderBy.slice(),s,i.limit,i.limitType,i.startAt,i.endAt)}function QE(i,t){const s=i.explicitOrderBy.concat([t]);return new $i(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function Tf(i,t,s){return new $i(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,s,i.startAt,i.endAt)}function Ou(i,t){return Xf(Is(i),Is(t))&&i.limitType===t.limitType}function fv(i){return`${Kf(Is(i))}|lt:${i.limitType}`}function Ai(i){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((c=>uv(c))).join(", ")}]`),Iu(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((c=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(c))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((c=>Ui(c))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((c=>Ui(c))).join(",")),`Target(${r})`})(Is(i))}; limitType=${i.limitType})`}function Vu(i,t){return t.isFoundDocument()&&(function(r,c){const h=c.key.path;return r.collectionGroup!==null?c.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):Ee.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)})(i,t)&&(function(r,c){for(const h of ao(r))if(!h.field.isKeyField()&&c.data.field(h.field)===null)return!1;return!0})(i,t)&&(function(r,c){for(const h of r.filters)if(!h.matches(c))return!1;return!0})(i,t)&&(function(r,c){return!(r.startAt&&!(function(f,p,x){const y=Cx(f,p,x);return f.inclusive?y<=0:y<0})(r.startAt,ao(r),c)||r.endAt&&!(function(f,p,x){const y=Cx(f,p,x);return f.inclusive?y>=0:y>0})(r.endAt,ao(r),c))})(i,t)}function KE(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function mv(i){return(t,s)=>{let r=!1;for(const c of ao(i)){const h=XE(c,t,s);if(h!==0)return h;r=r||c.field.isKeyField()}return 0}}function XE(i,t,s){const r=i.field.isKeyField()?Ee.comparator(t.key,s.key):(function(h,f,p){const x=f.data.field(h),y=p.data.field(h);return x!==null&&y!==null?zi(x,y):Ie(42886)})(i.field,t,s);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r!==void 0){for(const[c,h]of r)if(this.equalsFn(c,t))return h}}has(t){return this.get(t)!==void 0}set(t,s){const r=this.mapKeyFn(t),c=this.inner[r];if(c===void 0)return this.inner[r]=[[t,s]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],t))return void(c[h]=[t,s]);c.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return!1;for(let c=0;c<r.length;c++)if(this.equalsFn(r[c][0],t))return r.length===1?delete this.inner[s]:r.splice(c,1),this.innerSize--,!0;return!1}forEach(t){Ja(this.inner,((s,r)=>{for(const[c,h]of r)t(c,h)}))}isEmpty(){return Z0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new Nt(Ee.comparator);function ia(){return ZE}const gv=new Nt(Ee.comparator);function Wl(...i){let t=gv;for(const s of i)t=t.insert(s.key,s);return t}function pv(i){let t=gv;return i.forEach(((s,r)=>t=t.insert(s,r.overlayedDocument))),t}function Rr(){return ro()}function yv(){return ro()}function ro(){return new kr((i=>i.toString()),((i,t)=>i.isEqual(t)))}const JE=new Nt(Ee.comparator),WE=new Gt(Ee.comparator);function Qe(...i){let t=WE;for(const s of i)t=t.add(s);return t}const ew=new Gt(Ye);function tw(){return ew}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(t)?"-0":t}}function xv(i){return{integerValue:""+i}}function nw(i,t){return jE(t)?xv(t):Jf(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(){this._=void 0}}function sw(i,t,s){return i instanceof bu?(function(c,h){const f={fields:{[ev]:{stringValue:W0},[nv]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&Yf(h)&&(h=Mu(h)),h&&(f.fields[tv]=h),{mapValue:f}})(s,t):i instanceof go?bv(i,t):i instanceof po?_v(i,t):(function(c,h){const f=vv(c,h),p=Mx(f)+Mx(c.Ae);return _f(f)&&_f(c.Ae)?xv(p):Jf(c.serializer,p)})(i,t)}function aw(i,t,s){return i instanceof go?bv(i,t):i instanceof po?_v(i,t):s}function vv(i,t){return i instanceof _u?(function(r){return _f(r)||(function(h){return!!h&&"doubleValue"in h})(r)})(t)?t:{integerValue:0}:null}class bu extends ku{}class go extends ku{constructor(t){super(),this.elements=t}}function bv(i,t){const s=Nv(t);for(const r of i.elements)s.some((c=>zs(c,r)))||s.push(r);return{arrayValue:{values:s}}}class po extends ku{constructor(t){super(),this.elements=t}}function _v(i,t){let s=Nv(t);for(const r of i.elements)s=s.filter((c=>!zs(c,r)));return{arrayValue:{values:s}}}class _u extends ku{constructor(t,s){super(),this.serializer=t,this.Ae=s}}function Mx(i){return Ct(i.integerValue||i.doubleValue)}function Nv(i){return Qf(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function rw(i,t){return i.field.isEqual(t.field)&&(function(r,c){return r instanceof go&&c instanceof go||r instanceof po&&c instanceof po?ki(r.elements,c.elements,zs):r instanceof _u&&c instanceof _u?zs(r.Ae,c.Ae):r instanceof bu&&c instanceof bu})(i.transform,t.transform)}class iw{constructor(t,s){this.version=t,this.transformResults=s}}class En{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new En}static exists(t){return new En(void 0,t)}static updateTime(t){return new En(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ou(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class zu{}function Ev(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Uu(i.key,En.none()):new bo(i.key,i.data,En.none());{const s=i.data,r=Nn.empty();let c=new Gt(an.comparator);for(let h of t.fields)if(!c.has(h)){let f=s.field(h);f===null&&h.length>1&&(h=h.popLast(),f=s.field(h)),f===null?r.delete(h):r.set(h,f),c=c.add(h)}return new Wa(i.key,r,new On(c.toArray()),En.none())}}function lw(i,t,s){i instanceof bo?(function(c,h,f){const p=c.value.clone(),x=Vx(c.fieldTransforms,h,f.transformResults);p.setAll(x),h.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,t,s):i instanceof Wa?(function(c,h,f){if(!ou(c.precondition,h))return void h.convertToUnknownDocument(f.version);const p=Vx(c.fieldTransforms,h,f.transformResults),x=h.data;x.setAll(wv(c)),x.setAll(p),h.convertToFoundDocument(f.version,x).setHasCommittedMutations()})(i,t,s):(function(c,h,f){h.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,s)}function io(i,t,s,r){return i instanceof bo?(function(h,f,p,x){if(!ou(h.precondition,f))return p;const y=h.value.clone(),_=kx(h.fieldTransforms,x,f);return y.setAll(_),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(i,t,s,r):i instanceof Wa?(function(h,f,p,x){if(!ou(h.precondition,f))return p;const y=kx(h.fieldTransforms,x,f),_=f.data;return _.setAll(wv(h)),_.setAll(y),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((T=>T.field)))})(i,t,s,r):(function(h,f,p){return ou(h.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(i,t,s)}function ow(i,t){let s=null;for(const r of i.fieldTransforms){const c=t.data.field(r.field),h=vv(r.transform,c||null);h!=null&&(s===null&&(s=Nn.empty()),s.set(r.field,h))}return s||null}function Ox(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(r,c){return r===void 0&&c===void 0||!(!r||!c)&&ki(r,c,((h,f)=>rw(h,f)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class bo extends zu{constructor(t,s,r,c=[]){super(),this.key=t,this.value=s,this.precondition=r,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Wa extends zu{constructor(t,s,r,c,h=[]){super(),this.key=t,this.data=s,this.fieldMask=r,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function wv(i){const t=new Map;return i.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=i.data.field(s);t.set(s,r)}})),t}function Vx(i,t,s){const r=new Map;st(i.length===s.length,32656,{Ve:s.length,de:i.length});for(let c=0;c<s.length;c++){const h=i[c],f=h.transform,p=t.data.field(h.field);r.set(h.field,aw(f,p,s[c]))}return r}function kx(i,t,s){const r=new Map;for(const c of i){const h=c.transform,f=s.data.field(c.field);r.set(c.field,sw(h,f,t))}return r}class Uu extends zu{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cw extends zu{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(t,s,r,c){this.batchId=t,this.localWriteTime=s,this.baseMutations=r,this.mutations=c}applyToRemoteDocument(t,s){const r=s.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(t.key)&&lw(h,t,r[c])}}applyToLocalView(t,s){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(s=io(r,t,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(s=io(r,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const r=yv();return this.mutations.forEach((c=>{const h=t.get(c.key),f=h.overlayedDocument;let p=this.applyToLocalView(f,h.mutatedFields);p=s.has(c.key)?null:p;const x=Ev(f,p);x!==null&&r.set(c.key,x),f.isValidDocument()||f.convertToNoDocument(Oe.min())})),r}keys(){return this.mutations.reduce(((t,s)=>t.add(s.key)),Qe())}isEqual(t){return this.batchId===t.batchId&&ki(this.mutations,t.mutations,((s,r)=>Ox(s,r)))&&ki(this.baseMutations,t.baseMutations,((s,r)=>Ox(s,r)))}}class Wf{constructor(t,s,r,c){this.batch=t,this.commitVersion=s,this.mutationResults=r,this.docVersions=c}static from(t,s,r){st(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let c=(function(){return JE})();const h=t.mutations;for(let f=0;f<h.length;f++)c=c.insert(h[f].key,r[f].version);return new Wf(t,s,r,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,Xe;function fw(i){switch(i){case ne.OK:return Ie(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ie(15467,{code:i})}}function Tv(i){if(i===void 0)return ra("GRPC error has no .code"),ne.UNKNOWN;switch(i){case Ut.OK:return ne.OK;case Ut.CANCELLED:return ne.CANCELLED;case Ut.UNKNOWN:return ne.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return ne.INTERNAL;case Ut.UNAVAILABLE:return ne.UNAVAILABLE;case Ut.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Ut.NOT_FOUND:return ne.NOT_FOUND;case Ut.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Ut.ABORTED:return ne.ABORTED;case Ut.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Ut.DATA_LOSS:return ne.DATA_LOSS;default:return Ie(39323,{code:i})}}(Xe=Ut||(Ut={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=new qa([4294967295,4294967295],0);function zx(i){const t=mw().encode(i),s=new P0;return s.update(t),new Uint8Array(s.digest())}function Ux(i){const t=new DataView(i.buffer),s=t.getUint32(0,!0),r=t.getUint32(4,!0),c=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new qa([s,r],0),new qa([c,h],0)]}class em{constructor(t,s,r){if(this.bitmap=t,this.padding=s,this.hashCount=r,s<0||s>=8)throw new eo(`Invalid padding: ${s}`);if(r<0)throw new eo(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new eo(`Invalid hash count: ${r}`);if(t.length===0&&s!==0)throw new eo(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*t.length-s,this.pe=qa.fromNumber(this.ge)}ye(t,s,r){let c=t.add(s.multiply(qa.fromNumber(r)));return c.compare(gw)===1&&(c=new qa([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const s=zx(t),[r,c]=Ux(s);for(let h=0;h<this.hashCount;h++){const f=this.ye(r,c,h);if(!this.we(f))return!1}return!0}static create(t,s,r){const c=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),f=new em(h,c,s);return r.forEach((p=>f.insert(p))),f}insert(t){if(this.ge===0)return;const s=zx(t),[r,c]=Ux(s);for(let h=0;h<this.hashCount;h++){const f=this.ye(r,c,h);this.be(f)}}be(t){const s=Math.floor(t/8),r=t%8;this.bitmap[s]|=1<<r}}class eo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t,s,r,c,h){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,s,r){const c=new Map;return c.set(t,_o.createSynthesizedTargetChangeForCurrentChange(t,s,r)),new Lu(Oe.min(),c,new Nt(Ye),ia(),Qe())}}class _o{constructor(t,s,r,c,h){this.resumeToken=t,this.current=s,this.addedDocuments=r,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,s,r){return new _o(r,s,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t,s,r,c){this.Se=t,this.removedTargetIds=s,this.key=r,this.De=c}}class jv{constructor(t,s){this.targetId=t,this.Ce=s}}class Sv{constructor(t,s,r=rn.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=s,this.resumeToken=r,this.cause=c}}class Lx{constructor(){this.ve=0,this.Fe=Px(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Qe(),s=Qe(),r=Qe();return this.Fe.forEach(((c,h)=>{switch(h){case 0:t=t.add(c);break;case 2:s=s.add(c);break;case 1:r=r.add(c);break;default:Ie(38017,{changeType:h})}})),new _o(this.Me,this.xe,t,s,r)}Ke(){this.Oe=!1,this.Fe=Px()}qe(t,s){this.Oe=!0,this.Fe=this.Fe.insert(t,s)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class pw{constructor(t){this.Ge=t,this.ze=new Map,this.je=ia(),this.He=su(),this.Je=su(),this.Ze=new Nt(Ye)}Xe(t){for(const s of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(s,t.De):this.et(s,t.key,t.De);for(const s of t.removedTargetIds)this.et(s,t.key,t.De)}tt(t){this.forEachTarget(t,(s=>{const r=this.nt(s);switch(t.state){case 0:this.rt(s)&&r.Le(t.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(t.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.Qe(),r.Le(t.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(t.resumeToken));break;default:Ie(56790,{state:t.state})}}))}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.ze.forEach(((r,c)=>{this.rt(c)&&s(c)}))}st(t){const s=t.targetId,r=t.Ce.count,c=this.ot(s);if(c){const h=c.target;if(Ef(h))if(r===0){const f=new Ee(h.path);this.et(s,f,un.newNoDocument(f,Oe.min()))}else st(r===1,20013,{expectedCount:r});else{const f=this._t(s);if(f!==r){const p=this.ut(t),x=p?this.ct(p,t,f):1;if(x!==0){this.it(s);const y=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,y)}}}}}ut(t){const s=t.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:c=0},hashCount:h=0}=s;let f,p;try{f=$a(r).toUint8Array()}catch(x){if(x instanceof J0)return Mr("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{p=new em(f,c,h)}catch(x){return Mr(x instanceof eo?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return p.ge===0?null:p}ct(t,s,r){return s.Ce.count===r-this.Pt(t,s.targetId)?0:2}Pt(t,s){const r=this.Ge.getRemoteKeysForTarget(s);let c=0;return r.forEach((h=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${h.path.canonicalString()}`;t.mightContain(p)||(this.et(s,h,null),c++)})),c}Tt(t){const s=new Map;this.ze.forEach(((h,f)=>{const p=this.ot(f);if(p){if(h.current&&Ef(p.target)){const x=new Ee(p.target.path);this.It(x).has(f)||this.Et(f,x)||this.et(f,x,un.newNoDocument(x,t))}h.Be&&(s.set(f,h.ke()),h.Ke())}}));let r=Qe();this.Je.forEach(((h,f)=>{let p=!0;f.forEachWhile((x=>{const y=this.ot(x);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(h))})),this.je.forEach(((h,f)=>f.setReadTime(t)));const c=new Lu(t,s,this.Ze,this.je,r);return this.je=ia(),this.He=su(),this.Je=su(),this.Ze=new Nt(Ye),c}Ye(t,s){if(!this.rt(t))return;const r=this.Et(t,s.key)?2:0;this.nt(t).qe(s.key,r),this.je=this.je.insert(s.key,s),this.He=this.He.insert(s.key,this.It(s.key).add(t)),this.Je=this.Je.insert(s.key,this.Rt(s.key).add(t))}et(t,s,r){if(!this.rt(t))return;const c=this.nt(t);this.Et(t,s)?c.qe(s,1):c.Ue(s),this.Je=this.Je.insert(s,this.Rt(s).delete(t)),this.Je=this.Je.insert(s,this.Rt(s).add(t)),r&&(this.je=this.je.insert(s,r))}removeTarget(t){this.ze.delete(t)}_t(t){const s=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let s=this.ze.get(t);return s||(s=new Lx,this.ze.set(t,s)),s}Rt(t){let s=this.Je.get(t);return s||(s=new Gt(Ye),this.Je=this.Je.insert(t,s)),s}It(t){let s=this.He.get(t);return s||(s=new Gt(Ye),this.He=this.He.insert(t,s)),s}rt(t){const s=this.ot(t)!==null;return s||pe("WatchChangeAggregator","Detected inactive target",t),s}ot(t){const s=this.ze.get(t);return s&&s.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Lx),this.Ge.getRemoteKeysForTarget(t).forEach((s=>{this.et(t,s,null)}))}Et(t,s){return this.Ge.getRemoteKeysForTarget(t).has(s)}}function su(){return new Nt(Ee.comparator)}function Px(){return new Nt(Ee.comparator)}const yw={asc:"ASCENDING",desc:"DESCENDING"},xw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vw={and:"AND",or:"OR"};class bw{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function jf(i,t){return i.useProto3Json||Iu(t)?t:{value:t}}function Nu(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Av(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function _w(i,t){return Nu(i,t.toTimestamp())}function Ms(i){return st(!!i,49232),Oe.fromTimestamp((function(s){const r=Fa(s);return new mt(r.seconds,r.nanos)})(i))}function tm(i,t){return Sf(i,t).canonicalString()}function Sf(i,t){const s=(function(c){return new pt(["projects",c.projectId,"databases",c.database])})(i).child("documents");return t===void 0?s:s.child(t)}function Cv(i){const t=pt.fromString(i);return st(Ov(t),10190,{key:t.toString()}),t}function Af(i,t){return tm(i.databaseId,t.path)}function af(i,t){const s=Cv(t);if(s.get(1)!==i.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new Ee(Dv(s))}function Rv(i,t){return tm(i.databaseId,t)}function Nw(i){const t=Cv(i);return t.length===4?pt.emptyPath():Dv(t)}function Cf(i){return new pt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Dv(i){return st(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Bx(i,t,s){return{name:Af(i,t),fields:s.value.mapValue.fields}}function Ew(i,t){let s;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),c=t.targetChange.targetIds||[],h=(function(y,_){return y.useProto3Json?(st(_===void 0||typeof _=="string",58123),rn.fromBase64String(_||"")):(st(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),rn.fromUint8Array(_||new Uint8Array))})(i,t.targetChange.resumeToken),f=t.targetChange.cause,p=f&&(function(y){const _=y.code===void 0?ne.UNKNOWN:Tv(y.code);return new me(_,y.message||"")})(f);s=new Sv(r,c,h,p||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const c=af(i,r.document.name),h=Ms(r.document.updateTime),f=r.document.createTime?Ms(r.document.createTime):Oe.min(),p=new Nn({mapValue:{fields:r.document.fields}}),x=un.newFoundDocument(c,h,f,p),y=r.targetIds||[],_=r.removedTargetIds||[];s=new cu(y,_,x.key,x)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const c=af(i,r.document),h=r.readTime?Ms(r.readTime):Oe.min(),f=un.newNoDocument(c,h),p=r.removedTargetIds||[];s=new cu([],p,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const c=af(i,r.document),h=r.removedTargetIds||[];s=new cu([],h,c,null)}else{if(!("filter"in t))return Ie(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:c=0,unchangedNames:h}=r,f=new dw(c,h),p=r.targetId;s=new jv(p,f)}}return s}function ww(i,t){let s;if(t instanceof bo)s={update:Bx(i,t.key,t.value)};else if(t instanceof Uu)s={delete:Af(i,t.key)};else if(t instanceof Wa)s={update:Bx(i,t.key,t.data),updateMask:Mw(t.fieldMask)};else{if(!(t instanceof cw))return Ie(16599,{dt:t.type});s={verify:Af(i,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map((r=>(function(h,f){const p=f.transform;if(p instanceof bu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof go)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof po)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof _u)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Ie(20930,{transform:f.transform})})(0,r)))),t.precondition.isNone||(s.currentDocument=(function(c,h){return h.updateTime!==void 0?{updateTime:_w(c,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Ie(27497)})(i,t.precondition)),s}function Tw(i,t){return i&&i.length>0?(st(t!==void 0,14353),i.map((s=>(function(c,h){let f=c.updateTime?Ms(c.updateTime):Ms(h);return f.isEqual(Oe.min())&&(f=Ms(h)),new iw(f,c.transformResults||[])})(s,t)))):[]}function jw(i,t){return{documents:[Rv(i,t.path)]}}function Sw(i,t){const s={structuredQuery:{}},r=t.path;let c;t.collectionGroup!==null?(c=r,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=Rv(i,c);const h=(function(y){if(y.length!==0)return Mv(cs.create(y,"and"))})(t.filters);h&&(s.structuredQuery.where=h);const f=(function(y){if(y.length!==0)return y.map((_=>(function(C){return{field:Ci(C.field),direction:Rw(C.dir)}})(_)))})(t.orderBy);f&&(s.structuredQuery.orderBy=f);const p=jf(i,t.limit);return p!==null&&(s.structuredQuery.limit=p),t.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:s,parent:c}}function Aw(i){let t=Nw(i.parent);const s=i.structuredQuery,r=s.from?s.from.length:0;let c=null;if(r>0){st(r===1,65062);const _=s.from[0];_.allDescendants?c=_.collectionId:t=t.child(_.collectionId)}let h=[];s.where&&(h=(function(T){const C=Iv(T);return C instanceof cs&&ov(C)?C.getFilters():[C]})(s.where));let f=[];s.orderBy&&(f=(function(T){return T.map((C=>(function(X){return new mo(Ri(X.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(C)))})(s.orderBy));let p=null;s.limit&&(p=(function(T){let C;return C=typeof T=="object"?T.value:T,Iu(C)?null:C})(s.limit));let x=null;s.startAt&&(x=(function(T){const C=!!T.before,L=T.values||[];return new vu(L,C)})(s.startAt));let y=null;return s.endAt&&(y=(function(T){const C=!T.before,L=T.values||[];return new vu(L,C)})(s.endAt)),FE(t,c,f,h,p,"F",x,y)}function Cw(i,t){const s=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:c})}})(t.purpose);return s==null?null:{"goog-listen-tags":s}}function Iv(i){return i.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=Ri(s.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const c=Ri(s.unaryFilter.field);return Lt.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Ri(s.unaryFilter.field);return Lt.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ri(s.unaryFilter.field);return Lt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(i):i.fieldFilter!==void 0?(function(s){return Lt.create(Ri(s.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(s){return cs.create(s.compositeFilter.filters.map((r=>Iv(r))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(s.compositeFilter.op))})(i):Ie(30097,{filter:i})}function Rw(i){return yw[i]}function Dw(i){return xw[i]}function Iw(i){return vw[i]}function Ci(i){return{fieldPath:i.canonicalString()}}function Ri(i){return an.fromServerFormat(i.fieldPath)}function Mv(i){return i instanceof Lt?(function(s){if(s.op==="=="){if(Ax(s.value))return{unaryFilter:{field:Ci(s.field),op:"IS_NAN"}};if(Sx(s.value))return{unaryFilter:{field:Ci(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Ax(s.value))return{unaryFilter:{field:Ci(s.field),op:"IS_NOT_NAN"}};if(Sx(s.value))return{unaryFilter:{field:Ci(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ci(s.field),op:Dw(s.op),value:s.value}}})(i):i instanceof cs?(function(s){const r=s.getFilters().map((c=>Mv(c)));return r.length===1?r[0]:{compositeFilter:{op:Iw(s.op),filters:r}}})(i):Ie(54877,{filter:i})}function Mw(i){const t=[];return i.fields.forEach((s=>t.push(s.canonicalString()))),{fieldPaths:t}}function Ov(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function Vv(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(t,s,r,c,h=Oe.min(),f=Oe.min(),p=rn.EMPTY_BYTE_STRING,x=null){this.target=t,this.targetId=s,this.purpose=r,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=x}withSequenceNumber(t){return new La(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t){this.yt=t}}function Vw(i){const t=Aw({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Tf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.Sn=new zw}addToCollectionParentIndex(t,s){return this.Sn.add(s),ae.resolve()}getCollectionParents(t,s){return ae.resolve(this.Sn.getEntries(s))}addFieldIndex(t,s){return ae.resolve()}deleteFieldIndex(t,s){return ae.resolve()}deleteAllFieldIndexes(t){return ae.resolve()}createTargetIndexes(t,s){return ae.resolve()}getDocumentsMatchingTarget(t,s){return ae.resolve(null)}getIndexType(t,s){return ae.resolve(0)}getFieldIndexes(t,s){return ae.resolve([])}getNextCollectionGroupToUpdate(t){return ae.resolve(null)}getMinOffset(t,s){return ae.resolve(Ga.min())}getMinOffsetFromCollectionGroup(t,s){return ae.resolve(Ga.min())}updateCollectionGroup(t,s,r){return ae.resolve()}updateIndexEntries(t,s){return ae.resolve()}}class zw{constructor(){this.index={}}add(t){const s=t.lastSegment(),r=t.popLast(),c=this.index[s]||new Gt(pt.comparator),h=!c.has(r);return this.index[s]=c.add(r),h}has(t){const s=t.lastSegment(),r=t.popLast(),c=this.index[s];return c&&c.has(r)}getEntries(t){return(this.index[t]||new Gt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kv=41943040;class _n{static withCacheSize(t){return new _n(t,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(kv,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new Li(0)}static ar(){return new Li(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="LruGarbageCollector",Uw=1048576;function Gx([i,t],[s,r]){const c=Ye(i,s);return c===0?Ye(t,r):c}class Lw{constructor(t){this.Pr=t,this.buffer=new Gt(Gx),this.Tr=0}Ir(){return++this.Tr}Er(t){const s=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();Gx(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class Pw{constructor(t,s,r){this.garbageCollector=t,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){pe(Hx,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Fi(s)?pe(Hx,"Ignoring IndexedDB error during garbage collection: ",s):await Gi(s)}await this.Ar(3e5)}))}}class Bw{constructor(t,s){this.Vr=t,this.params=s}calculateTargetCount(t,s){return this.Vr.dr(t).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(t,s){if(s===0)return ae.resolve(Du.ce);const r=new Lw(s);return this.Vr.forEachTarget(t,(c=>r.Er(c.sequenceNumber))).next((()=>this.Vr.mr(t,(c=>r.Er(c))))).next((()=>r.maxValue))}removeTargets(t,s,r){return this.Vr.removeTargets(t,s,r)}removeOrphanedDocuments(t,s){return this.Vr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(qx)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qx):this.gr(t,s)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,s){let r,c,h,f,p,x,y;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),c=this.params.maximumSequenceNumbersToCollect):c=T,f=Date.now(),this.nthSequenceNumber(t,c)))).next((T=>(r=T,p=Date.now(),this.removeTargets(t,r,s)))).next((T=>(h=T,x=Date.now(),this.removeOrphanedDocuments(t,r)))).next((T=>(y=Date.now(),Si()<=Ze.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${c} in `+(p-f)+`ms
	Removed ${h} targets in `+(x-p)+`ms
	Removed ${T} documents in `+(y-x)+`ms
Total Duration: ${y-_}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:T}))))}}function qw(i,t){return new Bw(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.changes=new kr((t=>t.toString()),((t,s)=>t.isEqual(s))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,un.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ae.resolve(r):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,s,r,c){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=c}getDocument(t,s){let r=null;return this.documentOverlayCache.getOverlay(t,s).next((c=>(r=c,this.remoteDocumentCache.getEntry(t,s)))).next((c=>(r!==null&&io(r.mutation,c,On.empty(),mt.now()),c)))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.getLocalViewOfDocuments(t,r,Qe()).next((()=>r))))}getLocalViewOfDocuments(t,s,r=Qe()){const c=Rr();return this.populateOverlays(t,c,s).next((()=>this.computeViews(t,s,c,r).next((h=>{let f=Wl();return h.forEach(((p,x)=>{f=f.insert(p,x.overlayedDocument)})),f}))))}getOverlayedDocuments(t,s){const r=Rr();return this.populateOverlays(t,r,s).next((()=>this.computeViews(t,s,r,Qe())))}populateOverlays(t,s,r){const c=[];return r.forEach((h=>{s.has(h)||c.push(h)})),this.documentOverlayCache.getOverlays(t,c).next((h=>{h.forEach(((f,p)=>{s.set(f,p)}))}))}computeViews(t,s,r,c){let h=ia();const f=ro(),p=(function(){return ro()})();return s.forEach(((x,y)=>{const _=r.get(y.key);c.has(y.key)&&(_===void 0||_.mutation instanceof Wa)?h=h.insert(y.key,y):_!==void 0?(f.set(y.key,_.mutation.getFieldMask()),io(_.mutation,y,_.mutation.getFieldMask(),mt.now())):f.set(y.key,On.empty())})),this.recalculateAndSaveOverlays(t,h).next((x=>(x.forEach(((y,_)=>f.set(y,_))),s.forEach(((y,_)=>p.set(y,new Gw(_,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(t,s){const r=ro();let c=new Nt(((f,p)=>f-p)),h=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next((f=>{for(const p of f)p.keys().forEach((x=>{const y=s.get(x);if(y===null)return;let _=r.get(x)||On.empty();_=p.applyToLocalView(y,_),r.set(x,_);const T=(c.get(p.batchId)||Qe()).add(x);c=c.insert(p.batchId,T)}))})).next((()=>{const f=[],p=c.getReverseIterator();for(;p.hasNext();){const x=p.getNext(),y=x.key,_=x.value,T=yv();_.forEach((C=>{if(!h.has(C)){const L=Ev(s.get(C),r.get(C));L!==null&&T.set(C,L),h=h.add(C)}})),f.push(this.documentOverlayCache.saveOverlays(t,y,T))}return ae.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,s,r,c){return $E(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):dv(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,r,c):this.getDocumentsMatchingCollectionQuery(t,s,r,c)}getNextDocuments(t,s,r,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,r,c).next((h=>{const f=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,r.largestBatchId,c-h.size):ae.resolve(Rr());let p=co,x=h;return f.next((y=>ae.forEach(y,((_,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),h.get(_)?ae.resolve():this.remoteDocumentCache.getEntry(t,_).next((C=>{x=x.insert(_,C)}))))).next((()=>this.populateOverlays(t,y,h))).next((()=>this.computeViews(t,x,y,Qe()))).next((_=>({batchId:p,changes:pv(_)})))))}))}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new Ee(s)).next((r=>{let c=Wl();return r.isFoundDocument()&&(c=c.insert(r.key,r)),c}))}getDocumentsMatchingCollectionGroupQuery(t,s,r,c){const h=s.collectionGroup;let f=Wl();return this.indexManager.getCollectionParents(t,h).next((p=>ae.forEach(p,(x=>{const y=(function(T,C){return new $i(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(s,x.child(h));return this.getDocumentsMatchingCollectionQuery(t,y,r,c).next((_=>{_.forEach(((T,C)=>{f=f.insert(T,C)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,s,r,c){let h;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,r.largestBatchId).next((f=>(h=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,r,h,c)))).next((f=>{h.forEach(((x,y)=>{const _=y.getKey();f.get(_)===null&&(f=f.insert(_,un.newInvalidDocument(_)))}));let p=Wl();return f.forEach(((x,y)=>{const _=h.get(x);_!==void 0&&io(_.mutation,y,On.empty(),mt.now()),Vu(s,y)&&(p=p.insert(x,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,s){return ae.resolve(this.Nr.get(s))}saveBundleMetadata(t,s){return this.Nr.set(s.id,(function(c){return{id:c.id,version:c.version,createTime:Ms(c.createTime)}})(s)),ae.resolve()}getNamedQuery(t,s){return ae.resolve(this.Br.get(s))}saveNamedQuery(t,s){return this.Br.set(s.name,(function(c){return{name:c.name,query:Vw(c.bundledQuery),readTime:Ms(c.readTime)}})(s)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.overlays=new Nt(Ee.comparator),this.Lr=new Map}getOverlay(t,s){return ae.resolve(this.overlays.get(s))}getOverlays(t,s){const r=Rr();return ae.forEach(s,(c=>this.getOverlay(t,c).next((h=>{h!==null&&r.set(c,h)})))).next((()=>r))}saveOverlays(t,s,r){return r.forEach(((c,h)=>{this.bt(t,s,h)})),ae.resolve()}removeOverlaysForBatchId(t,s,r){const c=this.Lr.get(r);return c!==void 0&&(c.forEach((h=>this.overlays=this.overlays.remove(h))),this.Lr.delete(r)),ae.resolve()}getOverlaysForCollection(t,s,r){const c=Rr(),h=s.length+1,f=new Ee(s.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const x=p.getNext().value,y=x.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===h&&x.largestBatchId>r&&c.set(x.getKey(),x)}return ae.resolve(c)}getOverlaysForCollectionGroup(t,s,r,c){let h=new Nt(((y,_)=>y-_));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>r){let _=h.get(y.largestBatchId);_===null&&(_=Rr(),h=h.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const p=Rr(),x=h.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((y,_)=>p.set(y,_))),!(p.size()>=c)););return ae.resolve(p)}bt(t,s,r){const c=this.overlays.get(r.key);if(c!==null){const f=this.Lr.get(c.largestBatchId).delete(r.key);this.Lr.set(c.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new hw(s,r));let h=this.Lr.get(s);h===void 0&&(h=Qe(),this.Lr.set(s,h)),this.Lr.set(s,h.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(t){return ae.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(){this.kr=new Gt(Kt.Kr),this.qr=new Gt(Kt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,s){const r=new Kt(t,s);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(t,s){t.forEach((r=>this.addReference(r,s)))}removeReference(t,s){this.Wr(new Kt(t,s))}Qr(t,s){t.forEach((r=>this.removeReference(r,s)))}Gr(t){const s=new Ee(new pt([])),r=new Kt(s,t),c=new Kt(s,t+1),h=[];return this.qr.forEachInRange([r,c],(f=>{this.Wr(f),h.push(f.key)})),h}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const s=new Ee(new pt([])),r=new Kt(s,t),c=new Kt(s,t+1);let h=Qe();return this.qr.forEachInRange([r,c],(f=>{h=h.add(f.key)})),h}containsKey(t){const s=new Kt(t,0),r=this.kr.firstAfterOrEqual(s);return r!==null&&t.isEqual(r.key)}}class Kt{constructor(t,s){this.key=t,this.Hr=s}static Kr(t,s){return Ee.comparator(t.key,s.key)||Ye(t.Hr,s.Hr)}static Ur(t,s){return Ye(t.Hr,s.Hr)||Ee.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.Yn=1,this.Jr=new Gt(Kt.Kr)}checkEmpty(t){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,r,c){const h=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new uw(h,s,r,c);this.mutationQueue.push(f);for(const p of c)this.Jr=this.Jr.add(new Kt(p.key,h)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return ae.resolve(f)}lookupMutationBatch(t,s){return ae.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(t,s){const r=s+1,c=this.Xr(r),h=c<0?0:c;return ae.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?$f:this.Yn-1)}getAllMutationBatches(t){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const r=new Kt(s,0),c=new Kt(s,Number.POSITIVE_INFINITY),h=[];return this.Jr.forEachInRange([r,c],(f=>{const p=this.Zr(f.Hr);h.push(p)})),ae.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,s){let r=new Gt(Ye);return s.forEach((c=>{const h=new Kt(c,0),f=new Kt(c,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([h,f],(p=>{r=r.add(p.Hr)}))})),ae.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(t,s){const r=s.path,c=r.length+1;let h=r;Ee.isDocumentKey(h)||(h=h.child(""));const f=new Kt(new Ee(h),0);let p=new Gt(Ye);return this.Jr.forEachWhile((x=>{const y=x.key.path;return!!r.isPrefixOf(y)&&(y.length===c&&(p=p.add(x.Hr)),!0)}),f),ae.resolve(this.Yr(p))}Yr(t){const s=[];return t.forEach((r=>{const c=this.Zr(r);c!==null&&s.push(c)})),s}removeMutationBatch(t,s){st(this.ei(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ae.forEach(s.mutations,(c=>{const h=new Kt(c.key,s.batchId);return r=r.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)})).next((()=>{this.Jr=r}))}nr(t){}containsKey(t,s){const r=new Kt(s,0),c=this.Jr.firstAfterOrEqual(r);return ae.resolve(s.isEqual(c&&c.key))}performConsistencyCheck(t){return this.mutationQueue.length,ae.resolve()}ei(t,s){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const s=this.Xr(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(t){this.ti=t,this.docs=(function(){return new Nt(Ee.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const r=s.key,c=this.docs.get(r),h=c?c.size:0,f=this.ti(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:f}),this.size+=f-h,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const r=this.docs.get(s);return ae.resolve(r?r.document.mutableCopy():un.newInvalidDocument(s))}getEntries(t,s){let r=ia();return s.forEach((c=>{const h=this.docs.get(c);r=r.insert(c,h?h.document.mutableCopy():un.newInvalidDocument(c))})),ae.resolve(r)}getDocumentsMatchingQuery(t,s,r,c){let h=ia();const f=s.path,p=new Ee(f.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(p);for(;x.hasNext();){const{key:y,value:{document:_}}=x.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||NE(_E(_),r)<=0||(c.has(_.key)||Vu(s,_))&&(h=h.insert(_.key,_.mutableCopy()))}return ae.resolve(h)}getAllFromCollectionGroup(t,s,r,c){Ie(9500)}ni(t,s){return ae.forEach(this.docs,(r=>s(r)))}newChangeBuffer(t){return new Zw(this)}getSize(t){return ae.resolve(this.size)}}class Zw extends Hw{constructor(t){super(),this.Mr=t}applyChanges(t){const s=[];return this.changes.forEach(((r,c)=>{c.isValidDocument()?s.push(this.Mr.addEntry(t,c)):this.Mr.removeEntry(r)})),ae.waitFor(s)}getFromCache(t,s){return this.Mr.getEntry(t,s)}getAllFromCache(t,s){return this.Mr.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t){this.persistence=t,this.ri=new kr((s=>Kf(s)),Xf),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.ii=0,this.si=new nm,this.targetCount=0,this.oi=Li._r()}forEachTarget(t,s){return this.ri.forEach(((r,c)=>s(c))),ae.resolve()}getLastRemoteSnapshotVersion(t){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ae.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(t,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.ii&&(this.ii=s),ae.resolve()}lr(t){this.ri.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.oi=new Li(s),this.highestTargetId=s),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,s){return this.lr(s),this.targetCount+=1,ae.resolve()}updateTargetData(t,s){return this.lr(s),ae.resolve()}removeTargetData(t,s){return this.ri.delete(s.target),this.si.Gr(s.targetId),this.targetCount-=1,ae.resolve()}removeTargets(t,s,r){let c=0;const h=[];return this.ri.forEach(((f,p)=>{p.sequenceNumber<=s&&r.get(p.targetId)===null&&(this.ri.delete(f),h.push(this.removeMatchingKeysForTargetId(t,p.targetId)),c++)})),ae.waitFor(h).next((()=>c))}getTargetCount(t){return ae.resolve(this.targetCount)}getTargetData(t,s){const r=this.ri.get(s)||null;return ae.resolve(r)}addMatchingKeys(t,s,r){return this.si.$r(s,r),ae.resolve()}removeMatchingKeys(t,s,r){this.si.Qr(s,r);const c=this.persistence.referenceDelegate,h=[];return c&&s.forEach((f=>{h.push(c.markPotentiallyOrphaned(t,f))})),ae.waitFor(h)}removeMatchingKeysForTargetId(t,s){return this.si.Gr(s),ae.resolve()}getMatchingKeysForTargetId(t,s){const r=this.si.jr(s);return ae.resolve(r)}containsKey(t,s){return ae.resolve(this.si.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t,s){this._i={},this.overlays={},this.ai=new Du(0),this.ui=!1,this.ui=!0,this.ci=new Qw,this.referenceDelegate=t(this),this.li=new Jw(this),this.indexManager=new kw,this.remoteDocumentCache=(function(c){return new Xw(c)})((r=>this.referenceDelegate.hi(r))),this.serializer=new Ow(s),this.Pi=new $w(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new Yw,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let r=this._i[t.toKey()];return r||(r=new Kw(s,this.referenceDelegate),this._i[t.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,s,r){pe("MemoryPersistence","Starting transaction:",t);const c=new Ww(this.ai.next());return this.referenceDelegate.Ti(),r(c).next((h=>this.referenceDelegate.Ii(c).next((()=>h)))).toPromise().then((h=>(c.raiseOnCommittedEvent(),h)))}Ei(t,s){return ae.or(Object.values(this._i).map((r=>()=>r.containsKey(t,s))))}}class Ww extends wE{constructor(t){super(),this.currentSequenceNumber=t}}class sm{constructor(t){this.persistence=t,this.Ri=new nm,this.Ai=null}static Vi(t){return new sm(t)}get di(){if(this.Ai)return this.Ai;throw Ie(60996)}addReference(t,s,r){return this.Ri.addReference(r,s),this.di.delete(r.toString()),ae.resolve()}removeReference(t,s,r){return this.Ri.removeReference(r,s),this.di.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(t,s){return this.di.add(s.toString()),ae.resolve()}removeTarget(t,s){this.Ri.Gr(s.targetId).forEach((c=>this.di.add(c.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,s.targetId).next((c=>{c.forEach((h=>this.di.add(h.toString())))})).next((()=>r.removeTargetData(t,s)))}Ti(){this.Ai=new Set}Ii(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,(r=>{const c=Ee.fromPath(r);return this.mi(t,c).next((h=>{h||s.removeEntry(c,Oe.min())}))})).next((()=>(this.Ai=null,s.apply(t))))}updateLimboDocument(t,s){return this.mi(t,s).next((r=>{r?this.di.delete(s.toString()):this.di.add(s.toString())}))}hi(t){return 0}mi(t,s){return ae.or([()=>ae.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Ei(t,s)])}}class Eu{constructor(t,s){this.persistence=t,this.fi=new kr((r=>SE(r.path)),((r,c)=>r.isEqual(c))),this.garbageCollector=qw(this,s)}static Vi(t,s){return new Eu(t,s)}Ti(){}Ii(t){return ae.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}dr(t){const s=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>s.next((c=>r+c))))}pr(t){let s=0;return this.mr(t,(r=>{s++})).next((()=>s))}mr(t,s){return ae.forEach(this.fi,((r,c)=>this.wr(t,r,c).next((h=>h?ae.resolve():s(c)))))}removeTargets(t,s,r){return this.persistence.getTargetCache().removeTargets(t,s,r)}removeOrphanedDocuments(t,s){let r=0;const c=this.persistence.getRemoteDocumentCache(),h=c.newChangeBuffer();return c.ni(t,(f=>this.wr(t,f,s).next((p=>{p||(r++,h.removeEntry(f,Oe.min()))})))).next((()=>h.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,s){return this.fi.set(s,t.currentSequenceNumber),ae.resolve()}removeTarget(t,s){const r=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,s,r){return this.fi.set(r,t.currentSequenceNumber),ae.resolve()}removeReference(t,s,r){return this.fi.set(r,t.currentSequenceNumber),ae.resolve()}updateLimboDocument(t,s){return this.fi.set(s,t.currentSequenceNumber),ae.resolve()}hi(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=iu(t.data.value)),s}wr(t,s,r){return ae.or([()=>this.persistence.Ei(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const c=this.fi.get(s);return ae.resolve(c!==void 0&&c>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(t,s,r,c){this.targetId=t,this.fromCache=s,this.Ts=r,this.Is=c}static Es(t,s){let r=Qe(),c=Qe();for(const h of s.docChanges)switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new am(t,s.fromCache,r,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return q1()?8:TE(P1())>0?6:4})()}initialize(t,s){this.fs=t,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(t,s,r,c){const h={result:null};return this.gs(t,s).next((f=>{h.result=f})).next((()=>{if(!h.result)return this.ps(t,s,c,r).next((f=>{h.result=f}))})).next((()=>{if(h.result)return;const f=new eT;return this.ys(t,s,f).next((p=>{if(h.result=p,this.As)return this.ws(t,s,f,p.size)}))})).next((()=>h.result))}ws(t,s,r,c){return r.documentReadCount<this.Vs?(Si()<=Ze.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Ai(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ae.resolve()):(Si()<=Ze.DEBUG&&pe("QueryEngine","Query:",Ai(s),"scans",r.documentReadCount,"local documents and returns",c,"documents as results."),r.documentReadCount>this.ds*c?(Si()<=Ze.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Ai(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Is(s))):ae.resolve())}gs(t,s){if(Ix(s))return ae.resolve(null);let r=Is(s);return this.indexManager.getIndexType(t,r).next((c=>c===0?null:(s.limit!==null&&c===1&&(s=Tf(s,null,"F"),r=Is(s)),this.indexManager.getDocumentsMatchingTarget(t,r).next((h=>{const f=Qe(...h);return this.fs.getDocuments(t,f).next((p=>this.indexManager.getMinOffset(t,r).next((x=>{const y=this.bs(s,p);return this.Ss(s,y,f,x.readTime)?this.gs(t,Tf(s,null,"F")):this.Ds(t,y,s,x)}))))})))))}ps(t,s,r,c){return Ix(s)||c.isEqual(Oe.min())?ae.resolve(null):this.fs.getDocuments(t,r).next((h=>{const f=this.bs(s,h);return this.Ss(s,f,r,c)?ae.resolve(null):(Si()<=Ze.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Ai(s)),this.Ds(t,f,s,bE(c,co)).next((p=>p)))}))}bs(t,s){let r=new Gt(mv(t));return s.forEach(((c,h)=>{Vu(t,h)&&(r=r.add(h))})),r}Ss(t,s,r,c){if(t.limit===null)return!1;if(r.size!==s.size)return!0;const h=t.limitType==="F"?s.last():s.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}ys(t,s,r){return Si()<=Ze.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Ai(s)),this.fs.getDocumentsMatchingQuery(t,s,Ga.min(),r)}Ds(t,s,r,c){return this.fs.getDocumentsMatchingQuery(t,r,c).next((h=>(s.forEach((f=>{h=h.insert(f.key,f)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="LocalStore",nT=3e8;class sT{constructor(t,s,r,c){this.persistence=t,this.Cs=s,this.serializer=c,this.vs=new Nt(Ye),this.Fs=new kr((h=>Kf(h)),Xf),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(r)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Fw(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>t.collect(s,this.vs)))}}function aT(i,t,s,r){return new sT(i,t,s,r)}async function Uv(i,t){const s=ze(i);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let c;return s.mutationQueue.getAllMutationBatches(r).next((h=>(c=h,s.Os(t),s.mutationQueue.getAllMutationBatches(r)))).next((h=>{const f=[],p=[];let x=Qe();for(const y of c){f.push(y.batchId);for(const _ of y.mutations)x=x.add(_.key)}for(const y of h){p.push(y.batchId);for(const _ of y.mutations)x=x.add(_.key)}return s.localDocuments.getDocuments(r,x).next((y=>({Ns:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function rT(i,t){const s=ze(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const c=t.batch.keys(),h=s.xs.newChangeBuffer({trackRemovals:!0});return(function(p,x,y,_){const T=y.batch,C=T.keys();let L=ae.resolve();return C.forEach((X=>{L=L.next((()=>_.getEntry(x,X))).next((ee=>{const G=y.docVersions.get(X);st(G!==null,48541),ee.version.compareTo(G)<0&&(T.applyToRemoteDocument(ee,y),ee.isValidDocument()&&(ee.setReadTime(y.commitVersion),_.addEntry(ee)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(x,T)))})(s,r,t,h).next((()=>h.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,c,t.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let x=Qe();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(x=x.add(p.batch.mutations[y].key));return x})(t)))).next((()=>s.localDocuments.getDocuments(r,c)))}))}function Lv(i){const t=ze(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>t.li.getLastRemoteSnapshotVersion(s)))}function iT(i,t){const s=ze(i),r=t.snapshotVersion;let c=s.vs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const f=s.xs.newChangeBuffer({trackRemovals:!0});c=s.vs;const p=[];t.targetChanges.forEach(((_,T)=>{const C=c.get(T);if(!C)return;p.push(s.li.removeMatchingKeys(h,_.removedDocuments,T).next((()=>s.li.addMatchingKeys(h,_.addedDocuments,T))));let L=C.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(T)!==null?L=L.withResumeToken(rn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):_.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(_.resumeToken,r)),c=c.insert(T,L),(function(ee,G,ie){return ee.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=nT?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(C,L,_)&&p.push(s.li.updateTargetData(h,L))}));let x=ia(),y=Qe();if(t.documentUpdates.forEach((_=>{t.resolvedLimboDocuments.has(_)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(h,_))})),p.push(lT(h,f,t.documentUpdates).next((_=>{x=_.Bs,y=_.Ls}))),!r.isEqual(Oe.min())){const _=s.li.getLastRemoteSnapshotVersion(h).next((T=>s.li.setTargetsMetadata(h,h.currentSequenceNumber,r)));p.push(_)}return ae.waitFor(p).next((()=>f.apply(h))).next((()=>s.localDocuments.getLocalViewOfDocuments(h,x,y))).next((()=>x))})).then((h=>(s.vs=c,h)))}function lT(i,t,s){let r=Qe(),c=Qe();return s.forEach((h=>r=r.add(h))),t.getEntries(i,r).next((h=>{let f=ia();return s.forEach(((p,x)=>{const y=h.get(p);x.isFoundDocument()!==y.isFoundDocument()&&(c=c.add(p)),x.isNoDocument()&&x.version.isEqual(Oe.min())?(t.removeEntry(p,x.readTime),f=f.insert(p,x)):!y.isValidDocument()||x.version.compareTo(y.version)>0||x.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(x),f=f.insert(p,x)):pe(rm,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",x.version)})),{Bs:f,Ls:c}}))}function oT(i,t){const s=ze(i);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=$f),s.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function cT(i,t){const s=ze(i);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let c;return s.li.getTargetData(r,t).next((h=>h?(c=h,ae.resolve(c)):s.li.allocateTargetId(r).next((f=>(c=new La(t,f,"TargetPurposeListen",r.currentSequenceNumber),s.li.addTargetData(r,c).next((()=>c)))))))})).then((r=>{const c=s.vs.get(r.targetId);return(c===null||r.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(s.vs=s.vs.insert(r.targetId,r),s.Fs.set(t,r.targetId)),r}))}async function Rf(i,t,s){const r=ze(i),c=r.vs.get(t),h=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",h,(f=>r.persistence.referenceDelegate.removeTarget(f,c)))}catch(f){if(!Fi(f))throw f;pe(rm,`Failed to update sequence numbers for target ${t}: ${f}`)}r.vs=r.vs.remove(t),r.Fs.delete(c.target)}function Fx(i,t,s){const r=ze(i);let c=Oe.min(),h=Qe();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(x,y,_){const T=ze(x),C=T.Fs.get(_);return C!==void 0?ae.resolve(T.vs.get(C)):T.li.getTargetData(y,_)})(r,f,Is(t)).next((p=>{if(p)return c=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(f,p.targetId).next((x=>{h=x}))})).next((()=>r.Cs.getDocumentsMatchingQuery(f,t,s?c:Oe.min(),s?h:Qe()))).next((p=>(uT(r,KE(t),p),{documents:p,ks:h})))))}function uT(i,t,s){let r=i.Ms.get(t)||Oe.min();s.forEach(((c,h)=>{h.readTime.compareTo(r)>0&&(r=h.readTime)})),i.Ms.set(t,r)}class $x{constructor(){this.activeTargetIds=tw()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hT{constructor(){this.vo=new $x,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,r){}addLocalQueryTarget(t,s=!0){return s&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,s,r){this.Fo[t]=s}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new $x,Promise.resolve()}handleUserChange(t,s,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="ConnectivityMonitor";class Qx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(Yx,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){pe(Yx,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au=null;function Df(){return au===null?au=(function(){return 268435456+Math.round(2147483648*Math.random())})():au++,"0x"+au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="RestConnection",fT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class mT{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.qo=s+"://"+t.host,this.Uo=`projects/${r}/databases/${c}`,this.$o=this.databaseId.database===yu?`project_id=${r}`:`project_id=${r}&database_id=${c}`}Wo(t,s,r,c,h){const f=Df(),p=this.Qo(t,s.toUriEncodedString());pe(rf,`Sending RPC '${t}' ${f}:`,p,r);const x={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(x,c,h);const{host:y}=new URL(p),_=qf(y);return this.zo(t,p,x,r,_).then((T=>(pe(rf,`Received RPC '${t}' ${f}: `,T),T)),(T=>{throw Mr(rf,`RPC '${t}' ${f} failed with error: `,T,"url: ",p,"request:",r),T}))}jo(t,s,r,c,h,f){return this.Wo(t,s,r,c,h)}Go(t,s,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hi})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((c,h)=>t[h]=c)),r&&r.headers.forEach(((c,h)=>t[h]=c))}Qo(t,s){const r=fT[t];let c=`${this.qo}/v1/${s}:${r}`;return this.databaseInfo.apiKey&&(c=`${c}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),c}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection",Zl=(i,t,s)=>{i.listen(t,(r=>{try{s(r)}catch(c){setTimeout((()=>{throw c}),0)}}))};class Ii extends mT{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Ii.c_){const t=G0();Zl(t,H0.STAT_EVENT,(s=>{s.stat===xf.PROXY?pe(on,"STAT_EVENT: detected buffering proxy"):s.stat===xf.NOPROXY&&pe(on,"STAT_EVENT: detected no buffering proxy")})),Ii.c_=!0}}zo(t,s,r,c,h){const f=Df();return new Promise(((p,x)=>{const y=new B0;y.setWithCredentials(!0),y.listenOnce(q0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ru.NO_ERROR:const T=y.getResponseJson();pe(on,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(T)),p(T);break;case ru.TIMEOUT:pe(on,`RPC '${t}' ${f} timed out`),x(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case ru.HTTP_ERROR:const C=y.getStatus();if(pe(on,`RPC '${t}' ${f} failed with status:`,C,"response text:",y.getResponseText()),C>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const X=L==null?void 0:L.error;if(X&&X.status&&X.message){const ee=(function(ie){const le=ie.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(le)>=0?le:ne.UNKNOWN})(X.status);x(new me(ee,X.message))}else x(new me(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else x(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:t,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{pe(on,`RPC '${t}' ${f} completed.`)}}));const _=JSON.stringify(c);pe(on,`RPC '${t}' ${f} sending request:`,c),y.send(s,"POST",_,r,15)}))}T_(t,s,r){const c=Df(),h=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(p.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,s,r),p.encodeInitMessageHeaders=!0;const y=h.join("");pe(on,`Creating RPC '${t}' stream ${c}: ${y}`,p);const _=f.createWebChannel(y,p);this.I_(_);let T=!1,C=!1;const L=new gT({Ho:X=>{C?pe(on,`Not sending because RPC '${t}' stream ${c} is closed:`,X):(T||(pe(on,`Opening RPC '${t}' stream ${c} transport.`),_.open(),T=!0),pe(on,`RPC '${t}' stream ${c} sending:`,X),_.send(X))},Jo:()=>_.close()});return Zl(_,Jl.EventType.OPEN,(()=>{C||(pe(on,`RPC '${t}' stream ${c} transport opened.`),L.i_())})),Zl(_,Jl.EventType.CLOSE,(()=>{C||(C=!0,pe(on,`RPC '${t}' stream ${c} transport closed`),L.o_(),this.E_(_))})),Zl(_,Jl.EventType.ERROR,(X=>{C||(C=!0,Mr(on,`RPC '${t}' stream ${c} transport errored. Name:`,X.name,"Message:",X.message),L.o_(new me(ne.UNAVAILABLE,"The operation could not be completed")))})),Zl(_,Jl.EventType.MESSAGE,(X=>{var ee;if(!C){const G=X.data[0];st(!!G,16349);const ie=G,le=(ie==null?void 0:ie.error)||((ee=ie[0])==null?void 0:ee.error);if(le){pe(on,`RPC '${t}' stream ${c} received error:`,le);const he=le.status;let ge=(function(R){const j=Ut[R];if(j!==void 0)return Tv(j)})(he),Me=le.message;he==="NOT_FOUND"&&Me.includes("database")&&Me.includes("does not exist")&&Me.includes(this.databaseId.database)&&Mr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ge===void 0&&(ge=ne.INTERNAL,Me="Unknown error status: "+he+" with message "+le.message),C=!0,L.o_(new me(ge,Me)),_.close()}else pe(on,`RPC '${t}' stream ${c} received:`,G),L.__(G)}})),Ii.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((s=>s===t))}Go(t,s,r){super.Go(t,s,r),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return F0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(i){return new Ii(i)}function lf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(i){return new bw(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii.c_=!1;class Pv{constructor(t,s,r=1e3,c=1.5,h=6e4){this.Ci=t,this.timerId=s,this.R_=r,this.A_=c,this.V_=h,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const s=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),c=Math.max(0,s-r);c>0&&pe("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.d_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="PersistentStream";class Bv{constructor(t,s,r,c,h,f,p,x){this.Ci=t,this.b_=r,this.S_=c,this.connection=h,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pv(t,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,s){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():s&&s.code===ne.RESOURCE_EXHAUSTED?(ra(s.toString()),ra("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(s)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,c])=>{this.D_===s&&this.G_(r,c)}),(r=>{t((()=>{const c=new me(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(c)}))}))}G_(t,s){const r=this.Q_(this.D_);this.stream=this.j_(t,s),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((c=>{r((()=>this.z_(c)))})),this.stream.onMessage((c=>{r((()=>++this.F_==1?this.H_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return pe(Kx,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return s=>{this.Ci.enqueueAndForget((()=>this.D_===t?s():(pe(Kx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yT extends Bv{constructor(t,s,r,c,h,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,c,f),this.serializer=h}j_(t,s){return this.connection.T_("Listen",t,s)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const s=Ew(this.serializer,t),r=(function(h){if(!("targetChange"in h))return Oe.min();const f=h.targetChange;return f.targetIds&&f.targetIds.length?Oe.min():f.readTime?Ms(f.readTime):Oe.min()})(t);return this.listener.J_(s,r)}Z_(t){const s={};s.database=Cf(this.serializer),s.addTarget=(function(h,f){let p;const x=f.target;if(p=Ef(x)?{documents:jw(h,x)}:{query:Sw(h,x).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=Av(h,f.resumeToken);const y=jf(h,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Oe.min())>0){p.readTime=Nu(h,f.snapshotVersion.toTimestamp());const y=jf(h,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,t);const r=Cw(this.serializer,t);r&&(s.labels=r),this.K_(s)}X_(t){const s={};s.database=Cf(this.serializer),s.removeTarget=t,this.K_(s)}}class xT extends Bv{constructor(t,s,r,c,h,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,c,f),this.serializer=h}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,s){return this.connection.T_("Write",t,s)}H_(t){return st(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,st(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){st(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const s=Tw(t.writeResults,t.commitTime),r=Ms(t.commitTime);return this.listener.na(r,s)}ra(){const t={};t.database=Cf(this.serializer),this.K_(t)}ea(t){const s={streamToken:this.lastStreamToken,writes:t.map((r=>ww(this.serializer,r)))};this.K_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{}class bT extends vT{constructor(t,s,r,c){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=r,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,s,r,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Wo(t,Sf(s,r),c,h,f))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new me(ne.UNKNOWN,h.toString())}))}jo(t,s,r,c,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.jo(t,Sf(s,r),c,f,p,h))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new me(ne.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function _T(i,t,s,r){return new bT(i,t,s,r)}class NT{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ra(s),this.aa=!1):pe("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="RemoteStore";class ET{constructor(t,s,r,c,h){this.localStore=t,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=h,this.Aa.Mo((f=>{r.enqueueAndForget((async()=>{zr(this)&&(pe(Or,"Restarting streams for network reachability change."),await(async function(x){const y=ze(x);y.Ea.add(4),await No(y),y.Va.set("Unknown"),y.Ea.delete(4),await Bu(y)})(this))}))})),this.Va=new NT(r,c)}}async function Bu(i){if(zr(i))for(const t of i.Ra)await t(!0)}async function No(i){for(const t of i.Ra)await t(!1)}function qv(i,t){const s=ze(i);s.Ia.has(t.targetId)||(s.Ia.set(t.targetId,t),cm(s)?om(s):Yi(s).O_()&&lm(s,t))}function im(i,t){const s=ze(i),r=Yi(s);s.Ia.delete(t),r.O_()&&Hv(s,t),s.Ia.size===0&&(r.O_()?r.L_():zr(s)&&s.Va.set("Unknown"))}function lm(i,t){if(i.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Oe.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Yi(i).Z_(t)}function Hv(i,t){i.da.$e(t),Yi(i).X_(t)}function om(i){i.da=new pw({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),Yi(i).start(),i.Va.ua()}function cm(i){return zr(i)&&!Yi(i).x_()&&i.Ia.size>0}function zr(i){return ze(i).Ea.size===0}function Gv(i){i.da=void 0}async function wT(i){i.Va.set("Online")}async function TT(i){i.Ia.forEach(((t,s)=>{lm(i,t)}))}async function jT(i,t){Gv(i),cm(i)?(i.Va.ha(t),om(i)):i.Va.set("Unknown")}async function ST(i,t,s){if(i.Va.set("Online"),t instanceof Sv&&t.state===2&&t.cause)try{await(async function(c,h){const f=h.cause;for(const p of h.targetIds)c.Ia.has(p)&&(await c.remoteSyncer.rejectListen(p,f),c.Ia.delete(p),c.da.removeTarget(p))})(i,t)}catch(r){pe(Or,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await wu(i,r)}else if(t instanceof cu?i.da.Xe(t):t instanceof jv?i.da.st(t):i.da.tt(t),!s.isEqual(Oe.min()))try{const r=await Lv(i.localStore);s.compareTo(r)>=0&&await(function(h,f){const p=h.da.Tt(f);return p.targetChanges.forEach(((x,y)=>{if(x.resumeToken.approximateByteSize()>0){const _=h.Ia.get(y);_&&h.Ia.set(y,_.withResumeToken(x.resumeToken,f))}})),p.targetMismatches.forEach(((x,y)=>{const _=h.Ia.get(x);if(!_)return;h.Ia.set(x,_.withResumeToken(rn.EMPTY_BYTE_STRING,_.snapshotVersion)),Hv(h,x);const T=new La(_.target,x,y,_.sequenceNumber);lm(h,T)})),h.remoteSyncer.applyRemoteEvent(p)})(i,s)}catch(r){pe(Or,"Failed to raise snapshot:",r),await wu(i,r)}}async function wu(i,t,s){if(!Fi(t))throw t;i.Ea.add(1),await No(i),i.Va.set("Offline"),s||(s=()=>Lv(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{pe(Or,"Retrying IndexedDB access"),await s(),i.Ea.delete(1),await Bu(i)}))}function Fv(i,t){return t().catch((s=>wu(i,s,t)))}async function qu(i){const t=ze(i),s=Qa(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:$f;for(;AT(t);)try{const c=await oT(t.localStore,r);if(c===null){t.Ta.length===0&&s.L_();break}r=c.batchId,CT(t,c)}catch(c){await wu(t,c)}$v(t)&&Yv(t)}function AT(i){return zr(i)&&i.Ta.length<10}function CT(i,t){i.Ta.push(t);const s=Qa(i);s.O_()&&s.Y_&&s.ea(t.mutations)}function $v(i){return zr(i)&&!Qa(i).x_()&&i.Ta.length>0}function Yv(i){Qa(i).start()}async function RT(i){Qa(i).ra()}async function DT(i){const t=Qa(i);for(const s of i.Ta)t.ea(s.mutations)}async function IT(i,t,s){const r=i.Ta.shift(),c=Wf.from(r,t,s);await Fv(i,(()=>i.remoteSyncer.applySuccessfulWrite(c))),await qu(i)}async function MT(i,t){t&&Qa(i).Y_&&await(async function(r,c){if((function(f){return fw(f)&&f!==ne.ABORTED})(c.code)){const h=r.Ta.shift();Qa(r).B_(),await Fv(r,(()=>r.remoteSyncer.rejectFailedWrite(h.batchId,c))),await qu(r)}})(i,t),$v(i)&&Yv(i)}async function Xx(i,t){const s=ze(i);s.asyncQueue.verifyOperationInProgress(),pe(Or,"RemoteStore received new credentials");const r=zr(s);s.Ea.add(3),await No(s),r&&s.Va.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.Ea.delete(3),await Bu(s)}async function OT(i,t){const s=ze(i);t?(s.Ea.delete(2),await Bu(s)):t||(s.Ea.add(2),await No(s),s.Va.set("Unknown"))}function Yi(i){return i.ma||(i.ma=(function(s,r,c){const h=ze(s);return h.sa(),new yT(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(i.datastore,i.asyncQueue,{Zo:wT.bind(null,i),Yo:TT.bind(null,i),t_:jT.bind(null,i),J_:ST.bind(null,i)}),i.Ra.push((async t=>{t?(i.ma.B_(),cm(i)?om(i):i.Va.set("Unknown")):(await i.ma.stop(),Gv(i))}))),i.ma}function Qa(i){return i.fa||(i.fa=(function(s,r,c){const h=ze(s);return h.sa(),new xT(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:RT.bind(null,i),t_:MT.bind(null,i),ta:DT.bind(null,i),na:IT.bind(null,i)}),i.Ra.push((async t=>{t?(i.fa.B_(),await qu(i)):(await i.fa.stop(),i.Ta.length>0&&(pe(Or,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(t,s,r,c,h){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=r,this.op=c,this.removalCallback=h,this.deferred=new sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,s,r,c,h){const f=Date.now()+r,p=new um(t,s,f,c,h);return p.start(r),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hm(i,t){if(ra("AsyncQueue",`${t}: ${i}`),Fi(i))return new me(ne.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{static emptySet(t){return new Mi(t.comparator)}constructor(t){this.comparator=t?(s,r)=>t(s,r)||Ee.comparator(s.key,r.key):(s,r)=>Ee.comparator(s.key,r.key),this.keyedMap=Wl(),this.sortedSet=new Nt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((s,r)=>(t(s),!1)))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof Mi)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;s.hasNext();){const c=s.getNext().key,h=r.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach((s=>{t.push(s.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const r=new Mi;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.ga=new Nt(Ee.comparator)}track(t){const s=t.doc.key,r=this.ga.get(s);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(s,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(s):t.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):Ie(63341,{Vt:t,pa:r}):this.ga=this.ga.insert(s,t)}ya(){const t=[];return this.ga.inorderTraversal(((s,r)=>{t.push(r)})),t}}class Pi{constructor(t,s,r,c,h,f,p,x,y){this.query=t,this.docs=s,this.oldDocs=r,this.docChanges=c,this.mutatedKeys=h,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=x,this.hasCachedResults=y}static fromInitialDocuments(t,s,r,c,h){const f=[];return s.forEach((p=>{f.push({type:0,doc:p})})),new Pi(t,s,Mi.emptySet(s),f,r,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ou(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,r=t.docChanges;if(s.length!==r.length)return!1;for(let c=0;c<s.length;c++)if(s[c].type!==r[c].type||!s[c].doc.isEqual(r[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class kT{constructor(){this.queries=Jx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const c=ze(s),h=c.queries;c.queries=Jx(),h.forEach(((f,p)=>{for(const x of p.ba)x.onError(r)}))})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function Jx(){return new kr((i=>fv(i)),Ou)}async function Qv(i,t){const s=ze(i);let r=3;const c=t.query;let h=s.queries.get(c);h?!h.Sa()&&t.Da()&&(r=2):(h=new VT,r=t.Da()?0:1);try{switch(r){case 0:h.wa=await s.onListen(c,!0);break;case 1:h.wa=await s.onListen(c,!1);break;case 2:await s.onFirstRemoteStoreListen(c)}}catch(f){const p=hm(f,`Initialization of query '${Ai(t.query)}' failed`);return void t.onError(p)}s.queries.set(c,h),h.ba.push(t),t.va(s.onlineState),h.wa&&t.Fa(h.wa)&&dm(s)}async function Kv(i,t){const s=ze(i),r=t.query;let c=3;const h=s.queries.get(r);if(h){const f=h.ba.indexOf(t);f>=0&&(h.ba.splice(f,1),h.ba.length===0?c=t.Da()?0:1:!h.Sa()&&t.Da()&&(c=2))}switch(c){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function zT(i,t){const s=ze(i);let r=!1;for(const c of t){const h=c.query,f=s.queries.get(h);if(f){for(const p of f.ba)p.Fa(c)&&(r=!0);f.wa=c}}r&&dm(s)}function UT(i,t,s){const r=ze(i),c=r.queries.get(t);if(c)for(const h of c.ba)h.onError(s);r.queries.delete(t)}function dm(i){i.Ca.forEach((t=>{t.next()}))}var If,Wx;(Wx=If||(If={})).Ma="default",Wx.Cache="cache";class Xv{constructor(t,s,r){this.query=t,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const c of t.docChanges)c.type!==3&&r.push(c);t=new Pi(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),s=!0):this.La(t,this.onlineState)&&(this.ka(t),s=!0),this.Na=t,s}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),s=!0),s}La(t,s){if(!t.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.Ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(t){t=Pi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==If.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t){this.key=t}}class Jv{constructor(t){this.key=t}}class LT{constructor(t,s){this.query=t,this.Za=s,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qe(),this.mutatedKeys=Qe(),this.eu=mv(t),this.tu=new Mi(this.eu)}get nu(){return this.Za}ru(t,s){const r=s?s.iu:new Zx,c=s?s.tu:this.tu;let h=s?s.mutatedKeys:this.mutatedKeys,f=c,p=!1;const x=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,y=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal(((_,T)=>{const C=c.get(_),L=Vu(this.query,T)?T:null,X=!!C&&this.mutatedKeys.has(C.key),ee=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let G=!1;C&&L?C.data.isEqual(L.data)?X!==ee&&(r.track({type:3,doc:L}),G=!0):this.su(C,L)||(r.track({type:2,doc:L}),G=!0,(x&&this.eu(L,x)>0||y&&this.eu(L,y)<0)&&(p=!0)):!C&&L?(r.track({type:0,doc:L}),G=!0):C&&!L&&(r.track({type:1,doc:C}),G=!0,(x||y)&&(p=!0)),G&&(L?(f=f.add(L),h=ee?h.add(_):h.delete(_)):(f=f.delete(_),h=h.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),h=h.delete(_.key),r.track({type:1,doc:_})}return{tu:f,iu:r,Ss:p,mutatedKeys:h}}su(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,r,c){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((_,T)=>(function(L,X){const ee=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:G})}};return ee(L)-ee(X)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(r),c=c??!1;const p=s&&!c?this._u():[],x=this.Ya.size===0&&this.current&&!c?1:0,y=x!==this.Xa;return this.Xa=x,f.length!==0||y?{snapshot:new Pi(this.query,t.tu,h,f,t.mutatedKeys,x===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((s=>this.Za=this.Za.add(s))),t.modifiedDocuments.forEach((s=>{})),t.removedDocuments.forEach((s=>this.Za=this.Za.delete(s))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const s=[];return t.forEach((r=>{this.Ya.has(r)||s.push(new Jv(r))})),this.Ya.forEach((r=>{t.has(r)||s.push(new Zv(r))})),s}cu(t){this.Za=t.ks,this.Ya=Qe();const s=this.ru(t.documents);return this.applyChanges(s,!0)}lu(){return Pi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const fm="SyncEngine";class PT{constructor(t,s,r){this.query=t,this.targetId=s,this.view=r}}class BT{constructor(t){this.key=t,this.hu=!1}}class qT{constructor(t,s,r,c,h,f){this.localStore=t,this.remoteStore=s,this.eventManager=r,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new kr((p=>fv(p)),Ou),this.Iu=new Map,this.Eu=new Set,this.Ru=new Nt(Ee.comparator),this.Au=new Map,this.Vu=new nm,this.du={},this.mu=new Map,this.fu=Li.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HT(i,t,s=!0){const r=ab(i);let c;const h=r.Tu.get(t);return h?(r.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.lu()):c=await Wv(r,t,s,!0),c}async function GT(i,t){const s=ab(i);await Wv(s,t,!0,!1)}async function Wv(i,t,s,r){const c=await cT(i.localStore,Is(t)),h=c.targetId,f=i.sharedClientState.addLocalQueryTarget(h,s);let p;return r&&(p=await FT(i,t,h,f==="current",c.resumeToken)),i.isPrimaryClient&&s&&qv(i.remoteStore,c),p}async function FT(i,t,s,r,c){i.pu=(T,C,L)=>(async function(ee,G,ie,le){let he=G.view.ru(ie);he.Ss&&(he=await Fx(ee.localStore,G.query,!1).then((({documents:R})=>G.view.ru(R,he))));const ge=le&&le.targetChanges.get(G.targetId),Me=le&&le.targetMismatches.get(G.targetId)!=null,De=G.view.applyChanges(he,ee.isPrimaryClient,ge,Me);return t0(ee,G.targetId,De.au),De.snapshot})(i,T,C,L);const h=await Fx(i.localStore,t,!0),f=new LT(t,h.ks),p=f.ru(h.documents),x=_o.createSynthesizedTargetChangeForCurrentChange(s,r&&i.onlineState!=="Offline",c),y=f.applyChanges(p,i.isPrimaryClient,x);t0(i,s,y.au);const _=new PT(t,s,f);return i.Tu.set(t,_),i.Iu.has(s)?i.Iu.get(s).push(t):i.Iu.set(s,[t]),y.snapshot}async function $T(i,t,s){const r=ze(i),c=r.Tu.get(t),h=r.Iu.get(c.targetId);if(h.length>1)return r.Iu.set(c.targetId,h.filter((f=>!Ou(f,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(c.targetId),r.sharedClientState.isActiveQueryTarget(c.targetId)||await Rf(r.localStore,c.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(c.targetId),s&&im(r.remoteStore,c.targetId),Mf(r,c.targetId)})).catch(Gi)):(Mf(r,c.targetId),await Rf(r.localStore,c.targetId,!0))}async function YT(i,t){const s=ze(i),r=s.Tu.get(t),c=s.Iu.get(r.targetId);s.isPrimaryClient&&c.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),im(s.remoteStore,r.targetId))}async function QT(i,t,s){const r=tj(i);try{const c=await(function(f,p){const x=ze(f),y=mt.now(),_=p.reduce(((L,X)=>L.add(X.key)),Qe());let T,C;return x.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let X=ia(),ee=Qe();return x.xs.getEntries(L,_).next((G=>{X=G,X.forEach(((ie,le)=>{le.isValidDocument()||(ee=ee.add(ie))}))})).next((()=>x.localDocuments.getOverlayedDocuments(L,X))).next((G=>{T=G;const ie=[];for(const le of p){const he=ow(le,T.get(le.key).overlayedDocument);he!=null&&ie.push(new Wa(le.key,he,rv(he.value.mapValue),En.exists(!0)))}return x.mutationQueue.addMutationBatch(L,y,ie,p)})).next((G=>{C=G;const ie=G.applyToLocalDocumentSet(T,ee);return x.documentOverlayCache.saveOverlays(L,G.batchId,ie)}))})).then((()=>({batchId:C.batchId,changes:pv(T)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(c.batchId),(function(f,p,x){let y=f.du[f.currentUser.toKey()];y||(y=new Nt(Ye)),y=y.insert(p,x),f.du[f.currentUser.toKey()]=y})(r,c.batchId,s),await Eo(r,c.changes),await qu(r.remoteStore)}catch(c){const h=hm(c,"Failed to persist write");s.reject(h)}}async function eb(i,t){const s=ze(i);try{const r=await iT(s.localStore,t);t.targetChanges.forEach(((c,h)=>{const f=s.Au.get(h);f&&(st(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?f.hu=!0:c.modifiedDocuments.size>0?st(f.hu,14607):c.removedDocuments.size>0&&(st(f.hu,42227),f.hu=!1))})),await Eo(s,r,t)}catch(r){await Gi(r)}}function e0(i,t,s){const r=ze(i);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const c=[];r.Tu.forEach(((h,f)=>{const p=f.view.va(t);p.snapshot&&c.push(p.snapshot)})),(function(f,p){const x=ze(f);x.onlineState=p;let y=!1;x.queries.forEach(((_,T)=>{for(const C of T.ba)C.va(p)&&(y=!0)})),y&&dm(x)})(r.eventManager,t),c.length&&r.Pu.J_(c),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function KT(i,t,s){const r=ze(i);r.sharedClientState.updateQueryState(t,"rejected",s);const c=r.Au.get(t),h=c&&c.key;if(h){let f=new Nt(Ee.comparator);f=f.insert(h,un.newNoDocument(h,Oe.min()));const p=Qe().add(h),x=new Lu(Oe.min(),new Map,new Nt(Ye),f,p);await eb(r,x),r.Ru=r.Ru.remove(h),r.Au.delete(t),mm(r)}else await Rf(r.localStore,t,!1).then((()=>Mf(r,t,s))).catch(Gi)}async function XT(i,t){const s=ze(i),r=t.batch.batchId;try{const c=await rT(s.localStore,t);nb(s,r,null),tb(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await Eo(s,c)}catch(c){await Gi(c)}}async function ZT(i,t,s){const r=ze(i);try{const c=await(function(f,p){const x=ze(f);return x.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return x.mutationQueue.lookupMutationBatch(y,p).next((T=>(st(T!==null,37113),_=T.keys(),x.mutationQueue.removeMutationBatch(y,T)))).next((()=>x.mutationQueue.performConsistencyCheck(y))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(y,_,p))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>x.localDocuments.getDocuments(y,_)))}))})(r.localStore,t);nb(r,t,s),tb(r,t),r.sharedClientState.updateMutationState(t,"rejected",s),await Eo(r,c)}catch(c){await Gi(c)}}function tb(i,t){(i.mu.get(t)||[]).forEach((s=>{s.resolve()})),i.mu.delete(t)}function nb(i,t,s){const r=ze(i);let c=r.du[r.currentUser.toKey()];if(c){const h=c.get(t);h&&(s?h.reject(s):h.resolve(),c=c.remove(t)),r.du[r.currentUser.toKey()]=c}}function Mf(i,t,s=null){i.sharedClientState.removeLocalQueryTarget(t);for(const r of i.Iu.get(t))i.Tu.delete(r),s&&i.Pu.yu(r,s);i.Iu.delete(t),i.isPrimaryClient&&i.Vu.Gr(t).forEach((r=>{i.Vu.containsKey(r)||sb(i,r)}))}function sb(i,t){i.Eu.delete(t.path.canonicalString());const s=i.Ru.get(t);s!==null&&(im(i.remoteStore,s),i.Ru=i.Ru.remove(t),i.Au.delete(s),mm(i))}function t0(i,t,s){for(const r of s)r instanceof Zv?(i.Vu.addReference(r.key,t),JT(i,r)):r instanceof Jv?(pe(fm,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,t),i.Vu.containsKey(r.key)||sb(i,r.key)):Ie(19791,{wu:r})}function JT(i,t){const s=t.key,r=s.path.canonicalString();i.Ru.get(s)||i.Eu.has(r)||(pe(fm,"New document in limbo: "+s),i.Eu.add(r),mm(i))}function mm(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const s=new Ee(pt.fromString(t)),r=i.fu.next();i.Au.set(r,new BT(s)),i.Ru=i.Ru.insert(s,r),qv(i.remoteStore,new La(Is(Zf(s.path)),r,"TargetPurposeLimboResolution",Du.ce))}}async function Eo(i,t,s){const r=ze(i),c=[],h=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,x)=>{f.push(r.pu(x,t,s).then((y=>{var _;if((y||s)&&r.isPrimaryClient){const T=y?!y.fromCache:(_=s==null?void 0:s.targetChanges.get(x.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(x.targetId,T?"current":"not-current")}if(y){c.push(y);const T=am.Es(x.targetId,y);h.push(T)}})))})),await Promise.all(f),r.Pu.J_(c),await(async function(x,y){const _=ze(x);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ae.forEach(y,(C=>ae.forEach(C.Ts,(L=>_.persistence.referenceDelegate.addReference(T,C.targetId,L))).next((()=>ae.forEach(C.Is,(L=>_.persistence.referenceDelegate.removeReference(T,C.targetId,L)))))))))}catch(T){if(!Fi(T))throw T;pe(rm,"Failed to update sequence numbers: "+T)}for(const T of y){const C=T.targetId;if(!T.fromCache){const L=_.vs.get(C),X=L.snapshotVersion,ee=L.withLastLimboFreeSnapshotVersion(X);_.vs=_.vs.insert(C,ee)}}})(r.localStore,h))}async function WT(i,t){const s=ze(i);if(!s.currentUser.isEqual(t)){pe(fm,"User change. New user:",t.toKey());const r=await Uv(s.localStore,t);s.currentUser=t,(function(h,f){h.mu.forEach((p=>{p.forEach((x=>{x.reject(new me(ne.CANCELLED,f))}))})),h.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Eo(s,r.Ns)}}function ej(i,t){const s=ze(i),r=s.Au.get(t);if(r&&r.hu)return Qe().add(r.key);{let c=Qe();const h=s.Iu.get(t);if(!h)return c;for(const f of h){const p=s.Tu.get(f);c=c.unionWith(p.view.nu)}return c}}function ab(i){const t=ze(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=eb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ej.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KT.bind(null,t),t.Pu.J_=zT.bind(null,t.eventManager),t.Pu.yu=UT.bind(null,t.eventManager),t}function tj(i){const t=ze(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=XT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ZT.bind(null,t),t}class Tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Pu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,s){return null}Mu(t,s){return null}vu(t){return aT(this.persistence,new tT,t.initialUser,this.serializer)}Cu(t){return new zv(sm.Vi,this.serializer)}Du(t){return new hT}async terminate(){var t,s;(t=this.gcScheduler)==null||t.stop(),(s=this.indexBackfillerScheduler)==null||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tu.provider={build:()=>new Tu};class nj extends Tu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,s){st(this.persistence.referenceDelegate instanceof Eu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Pw(r,t.asyncQueue,s)}Cu(t){const s=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new zv((r=>Eu.Vi(r,s)),this.serializer)}}class Of{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>e0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WT.bind(null,this.syncEngine),await OT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new kT})()}createDatastore(t){const s=Pu(t.databaseInfo.databaseId),r=pT(t.databaseInfo);return _T(t.authCredentials,t.appCheckCredentials,r,s)}createRemoteStore(t){return(function(r,c,h,f,p){return new ET(r,c,h,f,p)})(this.localStore,this.datastore,t.asyncQueue,(s=>e0(this.syncEngine,s,0)),(function(){return Qx.v()?new Qx:new dT})())}createSyncEngine(t,s){return(function(c,h,f,p,x,y,_){const T=new qT(c,h,f,p,x,y);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await(async function(c){const h=ze(c);pe(Or,"RemoteStore shutting down."),h.Ea.add(5),await No(h),h.Aa.shutdown(),h.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(s=this.eventManager)==null||s.terminate()}}Of.provider={build:()=>new Of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ra("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,s){setTimeout((()=>{this.muted||t(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="FirestoreClient";class sj{constructor(t,s,r,c,h){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=r,this._databaseInfo=c,this.user=cn.UNAUTHENTICATED,this.clientId=Ff.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(r,(async f=>{pe(Ka,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(pe(Ka,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const r=hm(s,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function of(i,t){i.asyncQueue.verifyOperationInProgress(),pe(Ka,"Initializing OfflineComponentProvider");const s=i.configuration;await t.initialize(s);let r=s.initialUser;i.setCredentialChangeListener((async c=>{r.isEqual(c)||(await Uv(t.localStore,c),r=c)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function n0(i,t){i.asyncQueue.verifyOperationInProgress();const s=await aj(i);pe(Ka,"Initializing OnlineComponentProvider"),await t.initialize(s,i.configuration),i.setCredentialChangeListener((r=>Xx(t.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,c)=>Xx(t.remoteStore,c))),i._onlineComponents=t}async function aj(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){pe(Ka,"Using user provided OfflineComponentProvider");try{await of(i,i._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!(function(c){return c.name==="FirebaseError"?c.code===ne.FAILED_PRECONDITION||c.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(s))throw s;Mr("Error using user provided cache. Falling back to memory cache: "+s),await of(i,new Tu)}}else pe(Ka,"Using default OfflineComponentProvider"),await of(i,new nj(void 0));return i._offlineComponents}async function ib(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(pe(Ka,"Using user provided OnlineComponentProvider"),await n0(i,i._uninitializedComponentsProvider._online)):(pe(Ka,"Using default OnlineComponentProvider"),await n0(i,new Of))),i._onlineComponents}function rj(i){return ib(i).then((t=>t.syncEngine))}async function lb(i){const t=await ib(i),s=t.eventManager;return s.onListen=HT.bind(null,t.syncEngine),s.onUnlisten=$T.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=GT.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=YT.bind(null,t.syncEngine),s}function ij(i,t,s={}){const r=new sa;return i.asyncQueue.enqueueAndForget((async()=>(function(h,f,p,x,y){const _=new rb({next:C=>{_.Nu(),f.enqueueAndForget((()=>Kv(h,T)));const L=C.docs.has(p);!L&&C.fromCache?y.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&C.fromCache&&x&&x.source==="server"?y.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(C)},error:C=>y.reject(C)}),T=new Xv(Zf(p.path),_,{includeMetadataChanges:!0,Ka:!0});return Qv(h,T)})(await lb(i),i.asyncQueue,t,s,r))),r.promise}function lj(i,t,s={}){const r=new sa;return i.asyncQueue.enqueueAndForget((async()=>(function(h,f,p,x,y){const _=new rb({next:C=>{_.Nu(),f.enqueueAndForget((()=>Kv(h,T))),C.fromCache&&x.source==="server"?y.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(C)},error:C=>y.reject(C)}),T=new Xv(p,_,{includeMetadataChanges:!0,Ka:!0});return Qv(h,T)})(await lb(i),i.asyncQueue,t,s,r))),r.promise}function oj(i,t){const s=new sa;return i.asyncQueue.enqueueAndForget((async()=>QT(await rj(i),t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="ComponentProvider",s0=new Map;function uj(i,t,s,r,c){return new RE(i,t,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ob(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="firestore.googleapis.com",a0=!0;class r0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cb,this.ssl=a0}else this.host=t.host,this.ssl=t.ssl??a0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=kv;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Uw)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}vE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ob(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,c){return r.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Hu{constructor(t,s,r,c){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=r,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new cE;switch(r.type){case"firstParty":return new fE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=s0.get(s);r&&(pe(cj,"Removing Datastore"),s0.delete(s),r.terminate())})(this),Promise.resolve()}}function hj(i,t,s,r={}){var y;i=ks(i,Hu);const c=qf(t),h=i._getSettings(),f={...h,emulatorOptions:i._getEmulatorOptions()},p=`${t}:${s}`;c&&(V1(`https://${p}`),L1("Firestore",!0)),h.host!==cb&&h.host!==p&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...h,host:p,ssl:c,emulatorOptions:r};if(!fu(x,f)&&(i._setSettings(x),r.mockUserToken)){let _,T;if(typeof r.mockUserToken=="string")_=r.mockUserToken,T=cn.MOCK_USER;else{_=k1(r.mockUserToken,(y=i._app)==null?void 0:y.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new cn(C)}i._authCredentials=new uE(new Y0(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ur(this.firestore,t,this._query)}}class Bt{constructor(t,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Bt(this.firestore,t,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,s,r){if(vo(s,Bt._jsonSchema))return new Bt(t,r||null,new Ee(pt.fromString(s.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Pt("string",Bt._jsonSchemaVersion),referencePath:Pt("string")};class Ha extends Ur{constructor(t,s,r){super(t,s,Zf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Bt(this.firestore,null,new Ee(t))}withConverter(t){return new Ha(this.firestore,t,this._path)}}function gm(i,t,...s){if(i=Vs(i),Q0("collection","path",t),i instanceof Hu){const r=pt.fromString(t,...s);return xx(r),new Ha(i,null,r)}{if(!(i instanceof Bt||i instanceof Ha))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(pt.fromString(t,...s));return xx(r),new Ha(i.firestore,null,r)}}function wo(i,t,...s){if(i=Vs(i),arguments.length===1&&(t=Ff.newId()),Q0("doc","path",t),i instanceof Hu){const r=pt.fromString(t,...s);return yx(r),new Bt(i,null,new Ee(r))}{if(!(i instanceof Bt||i instanceof Ha))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(pt.fromString(t,...s));return yx(r),new Bt(i.firestore,i instanceof Ha?i.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="AsyncQueue";class l0{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pv(this,"async_queue_retry"),this._c=()=>{const r=lf();r&&pe(i0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const s=lf();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const s=lf();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new sa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Fi(t))throw t;pe(i0,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const s=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,ra("INTERNAL UNHANDLED ERROR: ",o0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(t,s,r){this.uc(),this.oc.indexOf(t)>-1&&(s=0);const c=um.createAndSchedule(this,t,s,r,(h=>this.hc(h)));return this.tc.push(c),c}uc(){this.nc&&Ie(47125,{Pc:o0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const s of this.tc)if(s.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const s=this.tc.indexOf(t);this.tc.splice(s,1)}}function o0(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}class Lr extends Hu{constructor(t,s,r,c){super(t,s,r,c),this.type="firestore",this._queue=new l0,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new l0(t),this._firestoreClient=void 0,await t}}}function dj(i,t){const s=typeof i=="object"?i:KN(),r=typeof i=="string"?i:yu,c=GN(s,"firestore").getImmediate({identifier:r});if(!c._initialized){const h=M1("firestore");h&&hj(c,...h)}return c}function Gu(i){if(i._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||fj(i),i._firestoreClient}function fj(i){var r,c,h,f;const t=i._freezeSettings(),s=uj(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,(c=i._app)==null?void 0:c.options.apiKey,t);i._componentsProvider||(h=t.localCache)!=null&&h._offlineComponentProvider&&((f=t.localCache)!=null&&f._onlineComponentProvider)&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new sj(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&(function(x){const y=x==null?void 0:x._online.build();return{_offline:x==null?void 0:x._offline.build(y),_online:y}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qn(rn.fromBase64String(t))}catch(s){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new Qn(rn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(vo(t,Qn._jsonSchema))return Qn.fromBase64String(t.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Pt("string",Qn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ye(this._lat,t._lat)||Ye(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Os._jsonSchemaVersion}}static fromJSON(t){if(vo(t,Os._jsonSchema))return new Os(t.latitude,t.longitude)}}Os._jsonSchemaVersion="firestore/geoPoint/1.0",Os._jsonSchema={type:Pt("string",Os._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t){this._values=(t||[]).map((s=>s))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,c){if(r.length!==c.length)return!1;for(let h=0;h<r.length;++h)if(r[h]!==c[h])return!1;return!0})(this._values,t._values)}toJSON(){return{type:os._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(vo(t,os._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((s=>typeof s=="number")))return new os(t.vectorValues);throw new me(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}os._jsonSchemaVersion="firestore/vectorValue/1.0",os._jsonSchema={type:Pt("string",os._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=/^__.*__$/;class gj{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return this.fieldMask!==null?new Wa(t,this.data,this.fieldMask,s,this.fieldTransforms):new bo(t,this.data,s,this.fieldTransforms)}}class ub{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return new Wa(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function hb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{dataSource:i})}}class xm{constructor(t,s,r,c,h,f){this.settings=t,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=c,h===void 0&&this.validatePath(),this.fieldTransforms=h||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new xm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var c;const s=(c=this.path)==null?void 0:c.child(t),r=this.contextWith({path:s,arrayElement:!1});return r.validatePathSegment(t),r}childContextForFieldPath(t){var c;const s=(c=this.path)==null?void 0:c.child(t),r=this.contextWith({path:s,arrayElement:!1});return r.validatePath(),r}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return ju(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((s=>t.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>t.isPrefixOf(s.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(hb(this.dataSource)&&mj.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class pj{constructor(t,s,r){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=r||Pu(t)}createContext(t,s,r,c=!1){return new xm({dataSource:t,methodName:s,targetDoc:r,path:an.emptyPath(),arrayElement:!1,hasConverter:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fu(i){const t=i._freezeSettings(),s=Pu(i._databaseId);return new pj(i._databaseId,!!t.ignoreUndefinedProperties,s)}function vm(i,t,s,r,c,h={}){const f=i.createContext(h.merge||h.mergeFields?2:0,t,s,c);bm("Data must be an object, but it was:",f,r);const p=db(r,f);let x,y;if(h.merge)x=new On(f.fieldMask),y=f.fieldTransforms;else if(h.mergeFields){const _=[];for(const T of h.mergeFields){const C=Bi(t,T,s);if(!f.contains(C))throw new me(ne.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);gb(_,C)||_.push(C)}x=new On(_),y=f.fieldTransforms.filter((T=>x.covers(T.field)))}else x=null,y=f.fieldTransforms;return new gj(new Nn(p),x,y)}class $u extends ym{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof $u}}function yj(i,t,s,r){const c=i.createContext(1,t,s);bm("Data must be an object, but it was:",c,r);const h=[],f=Nn.empty();Ja(r,((x,y)=>{const _=mb(t,x,s);y=Vs(y);const T=c.childContextForFieldPath(_);if(y instanceof $u)h.push(_);else{const C=To(y,T);C!=null&&(h.push(_),f.set(_,C))}}));const p=new On(h);return new ub(f,p,c.fieldTransforms)}function xj(i,t,s,r,c,h){const f=i.createContext(1,t,s),p=[Bi(t,r,s)],x=[c];if(h.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<h.length;C+=2)p.push(Bi(t,h[C])),x.push(h[C+1]);const y=[],_=Nn.empty();for(let C=p.length-1;C>=0;--C)if(!gb(y,p[C])){const L=p[C];let X=x[C];X=Vs(X);const ee=f.childContextForFieldPath(L);if(X instanceof $u)y.push(L);else{const G=To(X,ee);G!=null&&(y.push(L),_.set(L,G))}}const T=new On(y);return new ub(_,T,f.fieldTransforms)}function vj(i,t,s,r=!1){return To(s,i.createContext(r?4:3,t))}function To(i,t){if(fb(i=Vs(i)))return bm("Unsupported field value:",t,i),db(i,t);if(i instanceof ym)return(function(r,c){if(!hb(c.dataSource))throw c.createError(`${r._methodName}() can only be used with update() and set()`);if(!c.path)throw c.createError(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(c);h&&c.fieldTransforms.push(h)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(r,c){const h=[];let f=0;for(const p of r){let x=To(p,c.childContextForArray(f));x==null&&(x={nullValue:"NULL_VALUE"}),h.push(x),f++}return{arrayValue:{values:h}}})(i,t)}return(function(r,c){if((r=Vs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nw(c.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const h=mt.fromDate(r);return{timestampValue:Nu(c.serializer,h)}}if(r instanceof mt){const h=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nu(c.serializer,h)}}if(r instanceof Os)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qn)return{bytesValue:Av(c.serializer,r._byteString)};if(r instanceof Bt){const h=c.databaseId,f=r.firestore._databaseId;if(!f.isEqual(h))throw c.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:tm(r.firestore._databaseId||c.databaseId,r._key.path)}}if(r instanceof os)return(function(f,p){const x=f instanceof os?f.toArray():f;return{mapValue:{fields:{[sv]:{stringValue:av},[xu]:{arrayValue:{values:x.map((_=>{if(typeof _!="number")throw p.createError("VectorValues must only contain numeric values.");return Jf(p.serializer,_)}))}}}}}})(r,c);if(Vv(r))return r._toProto(c.serializer);throw c.createError(`Unsupported field value: ${Ru(r)}`)})(i,t)}function db(i,t){const s={};return Z0(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ja(i,((r,c)=>{const h=To(c,t.childContextForField(r));h!=null&&(s[r]=h)})),{mapValue:{fields:s}}}function fb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof mt||i instanceof Os||i instanceof Qn||i instanceof Bt||i instanceof ym||i instanceof os||Vv(i))}function bm(i,t,s){if(!fb(s)||!K0(s)){const r=Ru(s);throw r==="an object"?t.createError(i+" a custom object"):t.createError(i+" "+r)}}function Bi(i,t,s){if((t=Vs(t))instanceof pm)return t._internalPath;if(typeof t=="string")return mb(i,t);throw ju("Field path arguments must be of type string or ",i,!1,void 0,s)}const bj=new RegExp("[~\\*/\\[\\]]");function mb(i,t,s){if(t.search(bj)>=0)throw ju(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new pm(...t.split("."))._internalPath}catch{throw ju(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function ju(i,t,s,r,c){const h=r&&!r.isEmpty(),f=c!==void 0;let p=`Function ${t}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let x="";return(h||f)&&(x+=" (found",h&&(x+=` in field ${r}`),f&&(x+=` in document ${c}`),x+=")"),new me(ne.INVALID_ARGUMENT,p+i+x)}function gb(i,t){return i.some((s=>s.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{convertValue(t,s="none"){switch(Ya(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ct(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes($a(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw Ie(62114,{value:t})}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const r={};return Ja(t,((c,h)=>{r[c]=this.convertValue(h,s)})),r}convertVectorValue(t){var r,c,h;const s=(h=(c=(r=t.fields)==null?void 0:r[xu].arrayValue)==null?void 0:c.values)==null?void 0:h.map((f=>Ct(f.doubleValue)));return new os(s)}convertGeoPoint(t){return new Os(Ct(t.latitude),Ct(t.longitude))}convertArray(t,s){return(t.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(t,s){switch(s){case"previous":const r=Mu(t);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(uo(t));default:return null}}convertTimestamp(t){const s=Fa(t);return new mt(s.seconds,s.nanos)}convertDocumentKey(t,s){const r=pt.fromString(t);st(Ov(r),9688,{name:t});const c=new ho(r.get(1),r.get(3)),h=new Ee(r.popFirst(5));return c.isEqual(s)||ra(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends _j{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qn(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new Bt(this.firestore,null,s)}}const c0="@firebase/firestore",u0="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,s,r,c,h){this._firestore=t,this._userDataWriter=s,this._key=r,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Nj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const s=this._document.data.field(Bi("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class Nj extends yb{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _m{}class xb extends _m{}function wj(i,t,...s){let r=[];t instanceof _m&&r.push(t),r=r.concat(s),(function(h){const f=h.filter((x=>x instanceof Em)).length,p=h.filter((x=>x instanceof Nm)).length;if(f>1||f>0&&p>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const c of r)i=c._apply(i);return i}class Nm extends xb{constructor(t,s,r){super(),this._field=t,this._op=s,this._value=r,this.type="where"}static _create(t,s,r){return new Nm(t,s,r)}_apply(t){const s=this._parse(t);return vb(t._query,s),new Ur(t.firestore,t.converter,wf(t._query,s))}_parse(t){const s=Fu(t.firestore);return(function(h,f,p,x,y,_,T){let C;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){d0(T,_);const X=[];for(const ee of T)X.push(h0(x,h,ee));C={arrayValue:{values:X}}}else C=h0(x,h,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||d0(T,_),C=vj(p,f,T,_==="in"||_==="not-in");return Lt.create(y,_,C)})(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}class Em extends _m{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new Em(t,s)}_parse(t){const s=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:cs.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:((function(c,h){let f=c;const p=h.getFlattenedFilters();for(const x of p)vb(f,x),f=wf(f,x)})(t._query,s),new Ur(t.firestore,t.converter,wf(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wm extends xb{constructor(t,s){super(),this._field=t,this._direction=s,this.type="orderBy"}static _create(t,s){return new wm(t,s)}_apply(t){const s=(function(c,h,f){if(c.startAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(c.endAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(h,f)})(t._query,this._field,this._direction);return new Ur(t.firestore,t.converter,QE(t._query,s))}}function Tj(i,t="asc"){const s=t,r=Bi("orderBy",i);return wm._create(r,s)}function h0(i,t,s){if(typeof(s=Vs(s))=="string"){if(s==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dv(t)&&s.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=t.path.child(pt.fromString(s));if(!Ee.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jx(i,new Ee(r))}if(s instanceof Bt)return jx(i,s._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ru(s)}.`)}function d0(i,t){if(!Array.isArray(i)||i.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vb(i,t){const s=(function(c,h){for(const f of c)for(const p of f.getFlattenedFilters())if(h.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(s!==null)throw s===t.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}function Tm(i,t,s){let r;return r=i?s&&(s.merge||s.mergeFields)?i.toFirestore(t,s):i.toFirestore(t):t,r}class to{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Dr extends yb{constructor(t,s,r,c,h,f){super(t,s,r,c,f),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const r=this._document.data.field(Bi("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,s={};return s.type=Dr._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Dr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dr._jsonSchema={type:Pt("string",Dr._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class uu extends Dr{data(t={}){return super.data(t)}}class Oi{constructor(t,s,r,c){this._firestore=t,this._userDataWriter=s,this._snapshot=c,this.metadata=new to(c.hasPendingWrites,c.fromCache),this.query=r}get docs(){const t=[];return this.forEach((s=>t.push(s))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach((r=>{t.call(s,new uu(this._firestore,this._userDataWriter,r.key,r,new to(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(c,h){if(c._snapshot.oldDocs.isEmpty()){let f=0;return c._snapshot.docChanges.map((p=>{const x=new uu(c._firestore,c._userDataWriter,p.doc.key,p.doc,new to(c._snapshot.mutatedKeys.has(p.doc.key),c._snapshot.fromCache),c.query.converter);return p.doc,{type:"added",doc:x,oldIndex:-1,newIndex:f++}}))}{let f=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((p=>h||p.type!==3)).map((p=>{const x=new uu(c._firestore,c._userDataWriter,p.doc.key,p.doc,new to(c._snapshot.mutatedKeys.has(p.doc.key),c._snapshot.fromCache),c.query.converter);let y=-1,_=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:jj(p.type),doc:x,oldIndex:y,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Oi._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Ff.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],c=[];return this.docs.forEach((h=>{h._document!==null&&(s.push(h._document),r.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),c.push(h.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function jj(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi._jsonSchemaVersion="firestore/querySnapshot/1.0",Oi._jsonSchema={type:Pt("string",Oi._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(t,s){this._firestore=t,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Fu(t)}set(t,s,r){this._verifyNotCommitted();const c=cf(t,this._firestore),h=Tm(c.converter,s,r),f=vm(this._dataReader,"WriteBatch.set",c._key,h,c.converter!==null,r);return this._mutations.push(f.toMutation(c._key,En.none())),this}update(t,s,r,...c){this._verifyNotCommitted();const h=cf(t,this._firestore);let f;return f=typeof(s=Vs(s))=="string"||s instanceof pm?xj(this._dataReader,"WriteBatch.update",h._key,s,r,c):yj(this._dataReader,"WriteBatch.update",h._key,s),this._mutations.push(f.toMutation(h._key,En.exists(!0))),this}delete(t){this._verifyNotCommitted();const s=cf(t,this._firestore);return this._mutations=this._mutations.concat(new Uu(s._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cf(i,t){if((i=Vs(i)).firestore!==t)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(i){i=ks(i,Bt);const t=ks(i.firestore,Lr),s=Gu(t);return ij(s,i._key).then((r=>Dj(t,i,r)))}function bb(i){i=ks(i,Ur);const t=ks(i.firestore,Lr),s=Gu(t),r=new pb(t);return Ej(i._query),lj(s,i._query).then((c=>new Oi(t,r,i,c)))}function _b(i,t,s){i=ks(i,Bt);const r=ks(i.firestore,Lr),c=Tm(i.converter,t,s),h=Fu(r);return Yu(r,[vm(h,"setDoc",i._key,c,i.converter!==null,s).toMutation(i._key,En.none())])}function Cj(i){return Yu(ks(i.firestore,Lr),[new Uu(i._key,En.none())])}function Rj(i,t){const s=ks(i.firestore,Lr),r=wo(i),c=Tm(i.converter,t),h=Fu(i.firestore);return Yu(s,[vm(h,"addDoc",r._key,c,i.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then((()=>r))}function Yu(i,t){const s=Gu(i);return oj(s,t)}function Dj(i,t,s){const r=s.docs.get(t._key),c=new pb(i);return new Dr(i,c,t._key,r,new to(s.hasPendingWrites,s.fromCache),t.converter)}function Ij(i){return i=ks(i,Lr),Gu(i),new Sj(i,(t=>Yu(i,t)))}(function(t,s=!0){oE(QN),gu(new lo("firestore",((r,{instanceIdentifier:c,options:h})=>{const f=r.getProvider("app").getImmediate(),p=new Lr(new hE(r.getProvider("auth-internal")),new mE(f,r.getProvider("app-check-internal")),DE(f,c),f);return h={useFetchStreams:s,...h},p._setSettings(h),p}),"PUBLIC").setMultipleInstances(!0)),Di(c0,u0,t),Di(c0,u0,"esm2020")})();const Mj={apiKey:"AIzaSyCYT45WYMTTCpp3MDvUShT1yEwz-x9mYWQ",authDomain:"core-safe.firebaseapp.com",projectId:"core-safe",storageBucket:"core-safe.firebasestorage.app",messagingSenderId:"538945747105",appId:"1:538945747105:web:09373b659159a8b8c618e0"},Oj=z0(Mj),Xa=dj(Oj),yo="drafts",Nb="masterData",Eb="general",Vf=async()=>{try{const i=wj(gm(Xa,yo),Tj("lastModified","desc"));return(await bb(i)).docs.map(s=>{const r=s.data();return{id:s.id,type:r.type,lastModified:r.lastModified instanceof mt?r.lastModified.toMillis():r.lastModified,data:r.data}})}catch(i){throw console.error(": ",i),i}},Vj=async i=>{try{await Cj(wo(Xa,yo,i))}catch(t){throw console.error(": ",t),t}},Za=async(i,t,s)=>{try{const r={type:t,data:s,lastModified:mt.now()};return i?(await _b(wo(Xa,yo,i),r,{merge:!0}),i):(await Rj(gm(Xa,yo),r)).id}catch(r){throw console.error(": ",r),r}},Qu=async()=>{try{const i=wo(Xa,Nb,Eb),t=await Aj(i);return t.exists()?t.data():_t}catch(i){return console.error(": ",i),_t}},ls=async i=>{try{await _b(wo(Xa,Nb,Eb),i)}catch(t){throw console.error(": ",t),t}},kj=i=>new Promise((t,s)=>{const r=new FileReader;r.readAsDataURL(i),r.onload=c=>{var f;const h=new Image;h.src=(f=c.target)==null?void 0:f.result,h.onload=()=>{const p=document.createElement("canvas"),x=800,y=x/h.width;p.width=x,p.height=h.height*y;const _=p.getContext("2d");_==null||_.drawImage(h,0,0,p.width,p.height),t(p.toDataURL("image/jpeg",.7))},h.onerror=s},r.onerror=s}),xo=async i=>{try{const t=await bb(gm(Xa,yo)),s=Ij(Xa);let r=0;t.forEach(c=>{const h=c.data();h.data&&h.data.project===i&&(s.delete(c.ref),r++)}),r>0&&await s.commit()}catch(t){throw console.error(": ",t),t}},wb=async i=>{try{return(await Vf()).filter(r=>r.type==="SAFETY_PLAN"&&r.data.project===i)}catch(t){throw console.error(": ",t),t}},Tb=({onSave:i,onClear:t,lineWidth:s=3.5,keepOpenOnSave:r=!1})=>{const[c,h]=W.useState(!1),f=W.useRef(null),p=W.useRef(null),[x,y]=W.useState(!1),[_,T]=W.useState(!1),[C,L]=W.useState(!1),[X,ee]=W.useState(!1),[G,ie]=W.useState({width:0,height:0}),[le,he]=W.useState(!1);W.useEffect(()=>{const A=()=>{he(window.innerHeight>window.innerWidth)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]),W.useEffect(()=>{if(!c||!f.current)return;const A=setTimeout(()=>{(()=>{if(f.current){const w=window.devicePixelRatio||1,Te=Math.floor(f.current.clientWidth*w),Ce=Math.floor(f.current.clientHeight*w);Te>0&&Ce>0&&ie({width:Te,height:Ce})}})()},300);return()=>clearTimeout(A)},[c,le]),W.useEffect(()=>{if(!c||G.width===0)return;const A=p.current;if(A){const k=A.getContext("2d");k&&(k.lineWidth=s,k.lineCap="round",k.lineJoin="round",k.strokeStyle="#000")}},[G,c,s]);const ge=A=>{const k=p.current;if(!k)return{x:0,y:0};const w=k.getBoundingClientRect(),Te=A.clientX,Ce=A.clientY,F=Te-w.left,K=Ce-w.top;return le?{x:K/w.height*k.width,y:(1-F/w.width)*k.height}:{x:F/w.width*k.width,y:K/w.height*k.height}},Me=A=>{var Te;if(X&&A.pointerType!=="pen")return;A.preventDefault(),A.stopPropagation(),y(!0),A.target.setPointerCapture(A.pointerId);const k=ge(A),w=(Te=p.current)==null?void 0:Te.getContext("2d");w==null||w.beginPath(),w==null||w.moveTo(k.x,k.y)},De=A=>{var Te;if(!x||X&&A.pointerType!=="pen")return;A.preventDefault(),A.stopPropagation();const k=ge(A),w=(Te=p.current)==null?void 0:Te.getContext("2d");w==null||w.lineTo(k.x,k.y),w==null||w.stroke(),_||T(!0)},R=A=>{x&&(A.preventDefault(),y(!1),A.target.releasePointerCapture(A.pointerId))},j=()=>{const A=p.current,k=A==null?void 0:A.getContext("2d");A&&k&&k.clearRect(0,0,A.width,A.height),T(!1)},S=()=>{if(p.current&&_){const A=p.current,k=0,w=A.height*.25,Te=A.width,Ce=A.height*.5,F=document.createElement("canvas");F.width=Te,F.height=Ce;const K=F.getContext("2d");K&&(K.drawImage(A,k,w,Te,Ce,0,0,F.width,F.height),i(F.toDataURL("image/png"))),r?(j(),L(!0),setTimeout(()=>L(!1),2e3)):h(!1)}};if(!c)return o.jsxs("div",{onClick:()=>h(!0),className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-blue-50 hover:border-blue-300 bg-white text-gray-500 transition-all group",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-2 group-hover:bg-blue-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-pen-nib text-xl text-gray-400 group-hover:text-blue-500"})}),o.jsx("span",{className:"font-bold text-sm group-hover:text-blue-600",children:""})]});const O=le?"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[100dvh] h-[100dvw] rotate-90 origin-center":"fixed inset-0 w-full h-full";return o.jsx("div",{className:"fixed inset-0 z-[100] bg-gray-900 bg-opacity-95 select-none touch-none",onContextMenu:A=>A.preventDefault(),style:{WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:o.jsxs("div",{className:`${O} bg-white flex flex-col overflow-hidden shadow-2xl relative select-none`,children:[C&&o.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[60] bg-gray-800 bg-opacity-90 text-white px-8 py-6 rounded-xl shadow-2xl animate-fade-in flex flex-col items-center backdrop-blur-sm pointer-events-none",children:[o.jsx("i",{className:"fa-solid fa-check-circle text-5xl text-green-400 mb-4"}),o.jsx("span",{className:"font-bold text-xl mb-1",children:""}),o.jsx("span",{className:"text-sm text-gray-300",children:""})]}),o.jsxs("div",{className:"bg-gray-100 flex-none border-b shadow-sm z-20 select-none",children:[o.jsxs("div",{className:"relative flex justify-between items-center px-4 py-4 border-b border-gray-200 bg-white min-h-[72px]",children:[o.jsx("button",{type:"button",onClick:()=>{h(!1),t()},className:"px-4 py-2 text-sm font-bold text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 border border-gray-300 z-10 relative",children:""}),o.jsxs("h3",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 font-bold text-lg text-gray-800 hidden sm:flex items-center justify-center pointer-events-none",children:[o.jsx("i",{className:"fa-solid fa-pen-nib mr-2 text-gray-500"}),""]}),o.jsxs("div",{className:"flex items-center gap-2 z-10 relative",children:[o.jsxs("button",{type:"button",onClick:j,className:"px-3 py-2 text-sm font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg flex items-center border border-red-200 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-eraser mr-1"})," ",o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"sm:hidden",children:""})]}),o.jsxs("button",{type:"button",onClick:S,disabled:!_,className:`px-4 py-2 text-sm font-bold rounded-lg flex items-center shadow-sm transition-colors ${_?"bg-blue-600 text-white active:scale-95 hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[o.jsx("i",{className:"fa-solid fa-check mr-1"})," "]})]})]}),o.jsxs("div",{className:"relative flex justify-end items-center px-4 py-3 bg-gray-50",children:[o.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-red-600 text-sm font-bold flex items-center pointer-events-none whitespace-nowrap",children:[o.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"sm:hidden",children:""})]}),o.jsxs("label",{className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-bold cursor-pointer transition-colors shadow-sm select-none border-2 z-10 relative bg-white
                  ${X?"bg-blue-600 text-white border-blue-700 hover:bg-blue-700":"bg-green-600 text-white border-green-700 hover:bg-green-700"}
                `,children:[o.jsx("input",{type:"checkbox",className:"hidden",checked:X,onChange:A=>ee(A.target.checked)}),o.jsx("i",{className:`fa-solid ${X?"fa-pen-fancy":"fa-hand-pointer"} text-lg`}),o.jsx("span",{children:X?"":""})]})]})]}),o.jsx("div",{className:"flex-1 min-h-0 bg-gray-50 p-2 sm:p-4 pb-8 sm:pb-8 flex flex-col select-none",children:o.jsxs("div",{ref:f,className:"flex-1 min-h-0 w-full bg-white border-2 border-gray-300 shadow-inner rounded-xl overflow-hidden touch-none relative select-none",children:[o.jsxs("div",{className:"absolute inset-0 flex flex-col pointer-events-none select-none",children:[o.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-b-2 border-dashed border-gray-400 flex items-end justify-center pb-1",children:o.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})}),o.jsx("div",{className:"h-[50%] w-full flex items-center justify-center bg-transparent",children:!_&&o.jsxs("div",{className:"text-center text-gray-200",children:[o.jsx("span",{className:"text-4xl sm:text-6xl font-bold mb-2 block",children:""}),o.jsx("span",{className:"text-xs sm:text-lg font-bold",children:""}),o.jsx("div",{className:"sm:hidden text-red-300 text-[10px] mt-1 font-bold",children:""})]})}),o.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-t-2 border-dashed border-gray-400 flex items-start justify-center pt-1",children:o.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})})]}),G.width>0&&o.jsx("canvas",{ref:p,width:G.width,height:G.height,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},className:"absolute inset-0 z-10 cursor-crosshair block touch-none select-none",onPointerDown:Me,onPointerMove:De,onPointerUp:R,onPointerLeave:R,onContextMenu:A=>A.preventDefault()})]})})]})})},f0=({data:i})=>{const t=r=>{const c=r.length;return c>30?"text-xl":c>22?"text-2xl":c>15?"text-3xl":c>10?"text-4xl":"text-5xl"},s=(r,c,h)=>{const f=[];for(let p=0;p<h;p++){const x=c[p];f.push(o.jsxs("tr",{className:"h-20",children:[o.jsx("td",{className:"border border-black text-center text-xl font-bold",children:r+p+1}),o.jsx("td",{className:"border border-black px-4 text-lg",children:x?x.company:""}),o.jsx("td",{className:"border border-black px-2 text-center",children:x?o.jsx("img",{src:x.signatureDataUrl,alt:x.name,className:"h-16 w-auto max-w-full object-contain mx-auto"}):null})]},r+p))}return o.jsx("div",{className:"print-page p-[15mm] flex flex-col h-full justify-between",children:o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-center mb-4",children:[i.month,"  (",r+1,"",r+h,")"]}),o.jsxs("table",{className:"w-full border-collapse border-2 border-black",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"h-10",children:[o.jsx("th",{className:"border border-black bg-gray-100 py-1 w-20 text-lg",children:""}),o.jsx("th",{className:"border border-black bg-gray-100 py-1 w-1/3 text-lg",children:""}),o.jsx("th",{className:"border border-black bg-gray-100 py-1 text-lg",children:" ()"})]})}),o.jsx("tbody",{children:f})]}),o.jsx("div",{className:"mt-2 text-right text-sm",children:r===0&&i.signatures.length<=10?` ${i.signatures.length} `:r===10?` ${i.signatures.length} `:""})]})})};return o.jsxs("div",{className:"font-serif text-black leading-tight",children:[o.jsxs("div",{className:"print-page relative p-[20mm] flex flex-col justify-between items-center",children:[o.jsx("div",{className:"w-full text-center mt-24",children:o.jsx("h1",{className:`${t(i.project)} font-bold mb-4 leading-normal`,children:i.project})}),o.jsx("div",{className:"text-center my-auto",children:o.jsx("h2",{className:"text-4xl font-bold border-b-4 border-double border-black pb-2 px-10 inline-block",children:""})}),o.jsxs("div",{className:"text-center mb-20",children:[o.jsxs("p",{className:"text-4xl font-bold mb-16",children:[i.month," "]}),o.jsx("div",{className:"flex items-center justify-center gap-2",children:o.jsxs("span",{className:"font-bold text-xl italic",style:{fontFamily:"sans-serif"},children:[o.jsx("span",{className:"bg-red-600 text-white px-1 mr-1",children:"K"}),i.contractor]})})]})]}),o.jsx("div",{className:"print-page p-[15mm]",children:o.jsxs("div",{className:"border-2 border-black p-6 h-full",children:[o.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:""}),o.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-y-4 text-lg mb-8",children:[o.jsx("div",{className:"col-span-2 h-8"}),o.jsx("div",{className:"font-bold",children:""}),o.jsx("div",{children:new Date(i.date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}),o.jsx("div",{className:"font-bold",children:""}),o.jsx("div",{children:i.location}),o.jsx("div",{className:"font-bold",children:""}),o.jsxs("div",{children:[i.startTime,"  ",i.endTime," 15"]}),o.jsx("div",{className:"font-bold",children:""}),o.jsx("div",{children:i.instructor}),o.jsx("div",{className:"font-bold",children:""}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(1)"})," ",o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(2)"})," ",o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(3)"})," ",o.jsx("span",{children:i.topic})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(4)"})," ",o.jsx("span",{children:i.caution})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(5)"})," ",o.jsx("span",{children:"web"})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(6)"})," ",o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"mt-8",children:[o.jsx("h4",{className:"text-lg mb-4",children:""}),o.jsx("div",{className:"w-full h-[400px] border border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:i.photoUrl?o.jsx("img",{src:i.photoUrl,alt:"Evidence",className:"max-w-full max-h-full object-contain"}):o.jsx("div",{className:"text-gray-400",children:""})})]})]})}),s(0,i.signatures.slice(0,10),10),i.signatures.length>10&&s(10,i.signatures.slice(10,20),10)]})},m0=Symbol.for("constructDateFrom");function jb(i,t){return typeof i=="function"?i(t):i&&typeof i=="object"&&m0 in i?i[m0](t):i instanceof Date?new i.constructor(t):new Date(t)}function Sb(i,t){return jb(i,i)}function Vi(i,t){return Sb(i).getDay()}function Ab(i,t){const s=Sb(i),r=s.getFullYear(),c=s.getMonth(),h=jb(s,0);return h.setFullYear(r,c+1,0),h.setHours(0,0,0,0),h.getDate()}const zj=["","","","","","",""],Uj=i=>{const t=i.getFullYear(),s=i.getMonth()+1,r=i.getDate();if(s===1&&r===1||s===2&&r===11||s===2&&r===23||s===4&&r===29||s===5&&r===3||s===5&&r===4||s===5&&r===5||s===8&&r===11||s===11&&r===3||s===11&&r===23)return!0;const c=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),h=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&r===c||s===9&&r===h},Su=({data:i})=>{const t="border-2 border-black",s="border border-black",r="bg-cyan-100",c=W.useMemo(()=>{const f=new Date(i.year,i.month-1,1),p=Ab(f),x=[];for(let y=1;y<=p;y++){const _=new Date(i.year,i.month-1,y),T=Vi(_)===0,C=Vi(_)===6,L=Uj(_);let X="",ee="";T||L?(X="text-red-600",ee="bg-red-50"):C&&(X="text-blue-600",ee="bg-blue-50"),x.push({date:y,dayOfWeek:zj[Vi(_)],colorClass:X,bgClass:ee})}return x},[i.year,i.month]),h=W.useMemo(()=>{const f=c.length,p=Math.floor(f/5),x=f%5;return Array.from({length:5}).map((y,_)=>p+(_<x?1:0))},[c.length]);return o.jsxs("div",{className:"bg-white w-full h-full flex flex-col font-serif text-black p-[10mm]",style:{width:"297mm",height:"210mm"},children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[o.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[o.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[o.jsxs("span",{className:"text-xl",children:[" ",i.year-2018,"  ",i.month," "]}),o.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),o.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),i.project]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),i.location]})]})]}),o.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[o.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",i.createdDate,""]}),o.jsxs("table",{className:`w-full ${t} text-[10px] border-collapse`,children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[15%]"}),o.jsx("col",{className:"w-[25%]"}),o.jsx("col",{className:"w-[35%]"}),o.jsx("col",{className:"w-[25%]"})]}),o.jsx("thead",{children:o.jsxs("tr",{className:r,children:[o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.trainingDate}),o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.trainingLeader})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.councilDate}),o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.councilLeader})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.patrolDate}),o.jsx("td",{className:`${s} bg-gray-100`}),o.jsx("td",{className:`${s} bg-gray-100`})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${s} bg-gray-100`}),o.jsx("td",{className:`${s} bg-gray-100`}),o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.author})]})]})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:o.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[35mm]"}),c.map(f=>o.jsx("col",{},f.date)),o.jsx("col",{className:"w-[10mm]"})]}),o.jsxs("thead",{children:[o.jsxs("tr",{className:"h-[8mm]",children:[o.jsx("th",{className:`${s} ${r} font-normal`,children:""}),o.jsx("th",{className:`${s} ${r}`,colSpan:c.length,children:o.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[o.jsx("span",{children:""}),o.jsx("span",{children:""}),o.jsx("span",{children:""})]})}),o.jsx("th",{className:`${s} ${r} font-normal`,rowSpan:4,children:""})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),o.jsxs("th",{className:`${s} font-normal text-center`,colSpan:c.length,children:[i.month,""]})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),c.map(f=>o.jsx("th",{className:`${s} font-normal text-center ${f.colorClass} ${f.bgClass}`,children:f.date},f.date))]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:" "}),c.map(f=>o.jsx("th",{className:`${s} font-normal text-center ${f.colorClass} ${f.bgClass}`,children:f.dayOfWeek},f.date))]})]}),o.jsxs("tbody",{children:[i.processRows.map(f=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${s} px-1 align-middle leading-none`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:f.category}),o.jsx("span",{className:"font-bold text-[9px] truncate",children:f.name})]})}),c.map(p=>{const x=f.bars.some(y=>p.date>=y.startDay&&p.date<=y.endDay);return o.jsx("td",{className:`${s} p-0 relative ${p.bgClass}`,children:x&&o.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"})},p.date)}),o.jsx("td",{className:`${s}`})]},f.id)),Array.from({length:Math.max(0,12-i.processRows.length)}).map((f,p)=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${s}`}),c.map(x=>o.jsx("td",{className:`${s} ${x.bgClass}`},x.date)),o.jsx("td",{className:`${s}`})]},`fill-${p}`))]}),o.jsxs("tfoot",{children:[o.jsxs("tr",{className:"h-[12mm]",children:[o.jsx("td",{className:`${s} ${r} text-center font-normal`,children:""}),h.map((f,p)=>o.jsx("td",{colSpan:f,className:`${s} align-top p-1 text-[9px]`,children:i.predictions[p]},p)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[18mm]",children:[o.jsxs("td",{className:`${s} ${r} text-center font-normal leading-tight`,children:["",o.jsx("br",{}),""]}),h.map((f,p)=>o.jsx("td",{colSpan:f,className:`${s} align-top p-1 text-[9px]`,children:i.countermeasures[p]},p)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${s} ${r} text-center font-normal leading-tight`,children:""}),h.map((f,p)=>o.jsx("td",{colSpan:f,className:`${s} align-top p-1 text-[9px]`,children:i.inspectionItems[p]},p)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${s} ${r} text-center font-normal`,children:""}),c.map(f=>o.jsx("td",{className:`${s} p-0 text-center text-[8px]`,children:i.safetyDuty[f.date]},f.date)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${s} ${r} text-center font-normal`,children:""}),o.jsx("td",{colSpan:c.length+1,className:`${s} p-1 text-[10px]`,children:i.lastMonthReflection})]})]})]})})]})},g0=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,Lj=({isOpen:i,projectName:t,onConfirm:s,onCancel:r})=>{const[c,h]=W.useState(""),[f,p]=W.useState("");if(W.useEffect(()=>{i&&(h(""),p(""))},[i]),!i)return null;const x=()=>{c==="4043"?s():p("")};return o.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6 animate-fade-in border-l-8 border-red-600",children:[o.jsxs("h3",{className:"text-xl font-bold text-red-600 mb-4 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),""]}),o.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["",t,""]}),o.jsxs("div",{className:"bg-red-50 p-3 rounded mb-4 text-sm text-red-800 leading-relaxed",children:[o.jsx("strong",{children:""}),o.jsx("br",{}),"",o.jsx("br",{}),o.jsx("span",{className:"font-bold underline text-red-600 text-base",children:""}),o.jsx("br",{}),""]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" (4043)"}),o.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 outline-none text-lg tracking-widest",placeholder:"PASS",value:c,onChange:y=>h(y.target.value)}),f&&o.jsxs("p",{className:"text-red-500 text-xs mt-1 font-bold",children:[o.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),f]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:x,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold shadow-md",children:""})]})]})})},Pj=({title:i,items:t,onUpdate:s,onDeleteRequest:r,onBack:c})=>{const[h,f]=W.useState(""),p=t||[],x=()=>{h.trim()&&(s([...p,h.trim()]),f(""))};return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[o.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:o.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),o.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[i," ",o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[p.length,""]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:o.jsxs("ul",{className:"space-y-2",children:[p.map((y,_)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:y}),o.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),r(_,y)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},_)),p.length===0&&o.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),o.jsx("div",{className:"p-4 border-t bg-gray-50",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:h,onChange:y=>f(y.target.value),onKeyDown:y=>y.key==="Enter"&&x()}),o.jsxs("button",{onClick:x,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[o.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},p0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},Bj={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["roles","topics","jobTypes","goals","predictions","countermeasures"]},qj=({initialData:i,initialDraftId:t,onBackToMenu:s})=>{const[r,c]=W.useState(1),[h,f]=W.useState(i||v1),[p,x]=W.useState(t||null),[y,_]=W.useState(_t),[T,C]=W.useState(!1),[L,X]=W.useState(!1),[ee,G]=W.useState("idle"),[ie,le]=W.useState(!1),[he,ge]=W.useState(null),[Me,De]=W.useState(1),[R,j]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[S,O]=W.useState(!1),[A,k]=W.useState([]),[w,Te]=W.useState(null),[Ce,F]=W.useState("BASIC"),[K,de]=W.useState(null),[je,Pe]=W.useState(null);W.useEffect(()=>{(async()=>{try{const ce=await Qu();_(ce)}catch(ce){console.error("",ce)}})()},[]),W.useEffect(()=>{if(!L)return;const D=()=>{const Ge=window.innerWidth-40;De(Ge<794?Ge/794:1)};return window.addEventListener("resize",D),D(),()=>window.removeEventListener("resize",D)},[L]);const V=(D,ce)=>{f(Ae=>({...Ae,[D]:ce})),G("idle"),le(!0)},$=()=>c(D=>Math.min(D+1,3)),oe=async D=>{if(D.target.files&&D.target.files[0]){const ce=await kj(D.target.files[0]);V("photoUrl",ce)}},fe=async()=>{G("saving");try{const D=await Za(p,"SAFETY_TRAINING",h);x(D),G("saved"),le(!1),setTimeout(()=>G("idle"),2e3)}catch(D){console.error(D),alert(""),G("idle")}},re=(D,ce)=>{const Ae={id:Date.now().toString(),company:D,name:"Signed",signatureDataUrl:ce};f(Ge=>({...Ge,signatures:[...Ge.signatures,Ae]})),G("idle"),le(!0)},ve=async()=>{G("saving");try{const D=await Za(p,"SAFETY_TRAINING",h);x(D),G("saved"),le(!1),setTimeout(()=>G("idle"),2e3);const ce=await wb(h.project);if(ce.length===0){alert(`${h.project}

`);return}k(ce),O(!0)}catch{alert(""),G("idle")}},M=D=>{Te(D.data),O(!1),X(!0)},_e=()=>{const D=document.title;document.title=`_${h.project}_${h.month}`,window.print(),document.title=D},Se=()=>{ie?j({isOpen:!0,message:`
`,onConfirm:()=>{j(D=>({...D,isOpen:!1})),s()}}):s()},at=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>{C(!1),de(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),K?o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx(Pj,{title:p0[K],items:y[K],onBack:()=>de(null),onUpdate:async D=>{const ce={...y,[K]:D};_(ce),await ls(ce)},onDeleteRequest:(D,ce)=>{K==="projects"?Pe({index:D,name:ce}):j({isOpen:!0,message:`${ce}`,onConfirm:async()=>{const Ae=[...y[K]];Ae.splice(D,1);const Ge={...y,[K]:Ae};_(Ge),await ls(Ge),j(qt=>({...qt,isOpen:!1}))}})}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex gap-4 mb-6 shrink-0",children:[o.jsxs("button",{onClick:()=>F("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${Ce==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),o.jsxs("button",{onClick:()=>F("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${Ce==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-list-check mr-2"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:Bj[Ce].map(D=>{const ce=y[D]||[];return o.jsxs("button",{onClick:()=>de(D),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:p0[D]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[ce.length," "]})]}),o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:o.jsx("i",{className:"fa-solid fa-chevron-right"})})]},D)})})]})]}),be=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 1: "}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:h.project,onChange:D=>V("project",D.target.value),children:y.projects.map(D=>o.jsx("option",{value:D,children:D},D))})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:h.month,onChange:D=>V("month",parseInt(D.target.value)),children:Array.from({length:12},(D,ce)=>ce+1).map(D=>o.jsxs("option",{value:D,children:[D,""]},D))})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none appearance-none",value:h.contractor,onChange:D=>V("contractor",D.target.value),children:y.contractors.map(D=>o.jsx("option",{value:D,children:D},D))})]})]}),Z=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 2: "}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("input",{type:"date",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.date,onChange:D=>V("date",D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.location,onChange:D=>V("location",D.target.value),children:y.locations.map(D=>o.jsx("option",{value:D,children:D},D))})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("input",{type:"time",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.startTime,onChange:D=>V("startTime",D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("input",{type:"time",className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.endTime,onChange:D=>V("endTime",D.target.value)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full h-11 p-2 border border-gray-300 rounded bg-white text-black outline-none appearance-none",value:h.instructor,onChange:D=>V("instructor",D.target.value),children:y.supervisors.map(D=>o.jsx("option",{value:D,children:D},D))})]}),o.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg space-y-4",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-2",children:""}),o.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 space-y-2 py-1",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(1)"}),o.jsx("span",{children:" ()"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(2)"}),o.jsx("span",{children:" ()"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(3)"}),o.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm appearance-none",value:h.topic,onChange:D=>V("topic",D.target.value),children:y.topics.map(D=>o.jsx("option",{value:D,children:D},D))})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(4)"}),o.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm appearance-none",value:h.caution,onChange:D=>V("caution",D.target.value),children:y.topics.map(D=>o.jsx("option",{value:D,children:D},D))})]})]}),o.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 mt-2 space-y-2 py-1",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(5)"}),o.jsx("span",{children:"web ()"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(6)"}),o.jsx("span",{children:" ()"})]})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold flex justify-between text-gray-700",children:o.jsxs("span",{children:[" ()",o.jsx("span",{className:"text-red-500 text-sm ml-1 font-bold",children:""})]})}),o.jsx("input",{type:"file",accept:"image/*",className:"w-full mt-2 text-sm text-gray-500",onChange:oe}),h.photoUrl&&o.jsx("div",{className:"mt-3",children:o.jsx("img",{src:h.photoUrl,alt:"preview",className:"h-40 w-full object-contain border bg-gray-50 rounded"})})]})]}),[we,Ve]=W.useState("");W.useEffect(()=>{y.subcontractors.length>0&&!we&&Ve(y.subcontractors[0])},[y.subcontractors,we]);const[Je,Ft]=W.useState(0),Xt=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 3: "}),o.jsxs("div",{className:"bg-white p-6 shadow rounded-lg border border-gray-200",children:[o.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:""}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-50 text-lg text-black outline-none appearance-none",value:we,onChange:D=>Ve(D.target.value),children:y.subcontractors.map(D=>o.jsx("option",{value:D,children:D},D))})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2 text-center",children:" ()"}),o.jsx("div",{className:"w-full",children:o.jsx(Tb,{onSave:D=>{re(we,D)},onClear:()=>{},lineWidth:6,keepOpenOnSave:!0},Je)})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("h3",{className:"font-bold text-gray-700 mb-2",children:[" (",h.signatures.length,")"]}),o.jsxs("div",{className:"bg-white border rounded divide-y max-h-60 overflow-y-auto",children:[h.signatures.length===0&&o.jsx("div",{className:"p-4 text-center text-gray-400",children:""}),h.signatures.map((D,ce)=>o.jsxs("div",{className:"p-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o.jsx("span",{className:"w-6 h-6 shrink-0 rounded-full bg-gray-200 text-xs flex items-center justify-center text-gray-700",children:ce+1}),o.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-bold text-gray-700 truncate flex-1",children:D.company}),o.jsx("div",{className:"h-10 border border-gray-200 bg-gray-50 rounded cursor-pointer hover:border-blue-400 transition-colors flex items-center justify-center px-2 shrink-0",onClick:()=>ge(D.signatureDataUrl),title:"",children:o.jsx("img",{src:D.signatureDataUrl,alt:"sig",className:"h-full object-contain"})})]})]}),o.jsx("button",{onClick:()=>{j({isOpen:!0,message:`${ce+1}`,onConfirm:()=>{f(Ae=>({...Ae,signatures:Ae.signatures.filter(Ge=>Ge.id!==D.id)})),j(Ae=>({...Ae,isOpen:!1})),le(!0)}})},className:"ml-3 text-red-400 hover:text-red-600 p-2 shrink-0",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},D.id))]})]})]}),fn=()=>o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500",children:""}),o.jsxs("button",{onClick:_e,className:"px-6 py-2 bg-green-600 rounded font-bold hover:bg-green-500 shadow-md flex items-center",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${Me})`,transformOrigin:"top center"},children:o.jsx(f0,{data:h})}),w&&o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${Me*.7})`,transformOrigin:"top center"},children:o.jsx(Su,{data:w})})]})]}),ot=()=>S?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",h.project,""]}),o.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:A.map(D=>{const ce=D.data;return o.jsxs("button",{onClick:()=>M(D),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-blue-800",children:[ce.month," "]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(D.lastModified).toLocaleString("ja-JP")]})]}),o.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},D.id)})}),o.jsx("button",{onClick:()=>O(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null;return T?o.jsxs(o.Fragment,{children:[at(),o.jsx(g0,{isOpen:R.isOpen,message:R.message,onConfirm:R.onConfirm,onCancel:()=>j(D=>({...D,isOpen:!1}))}),je&&o.jsx(Lj,{isOpen:!!je,projectName:je.name,onCancel:()=>Pe(null),onConfirm:async()=>{const D=[...y.projects];D.splice(je.index,1),await xo(je.name);const ce={...y,projects:D};_(ce),await ls(ce),Pe(null)}})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:Se,className:"text-white hover:text-gray-300",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-helmet-safety mr-2"}),""]})]}),o.jsxs("button",{onClick:()=>C(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),o.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[o.jsx("span",{className:r>=1?"text-blue-600":"",children:"STEP 1"}),o.jsx("span",{className:r>=2?"text-blue-600":"",children:"STEP 2"}),o.jsx("span",{className:r>=3?"text-blue-600":"",children:"STEP 3"})]}),o.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:o.jsx("div",{className:"bg-blue-600 h-full transition-all duration-300",style:{width:`${r*33.3}%`}})})]}),o.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg min-h-[60vh] max-w-3xl",children:[r===1&&be(),r===2&&Z(),r===3&&Xt()]}),o.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>c(D=>Math.max(1,D-1)),disabled:r===1,className:`px-4 py-3 rounded-lg font-bold ${r===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),o.jsxs("button",{onClick:fe,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center",children:[o.jsx("i",{className:`fa-solid ${ee==="saved"?"fa-check":"fa-save"} mr-2`}),ee==="saved"?"":""]})]}),r<3?o.jsxs("button",{onClick:$,className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-bold shadow hover:bg-blue-700 flex items-center",children:[" ",o.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):o.jsxs("button",{onClick:ve,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),he&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>ge(null),children:[o.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:o.jsx("img",{src:he,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),o.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),L&&fn(),ot(),o.jsx(g0,{isOpen:R.isOpen,message:R.message,onConfirm:R.onConfirm,onCancel:()=>j({...R,isOpen:!1})}),o.jsxs("div",{className:"hidden print:block",children:[o.jsx(f0,{data:h}),w&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),o.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:o.jsx(Su,{data:w})})]})]})]})},y0=({data:i})=>{var y,_,T,C,L,X,ee,G,ie,le,he,ge,Me,De,R,j,S,O,A,k,w,Te,Ce,F;const t="border border-black",s="bg-green-100 text-center font-bold py-1",r=K=>{const de=new Date(K);return`${de.getFullYear()}/${de.getMonth()+1}/${de.getDate()}`},c=Math.max(10,i.subcontractorAttendees.length),h=Array.from({length:c-i.subcontractorAttendees.length}),f=K=>{const de=K.length;return de>45?"text-lg":de>35?"text-xl":de>25?"text-2xl":de>15?"text-3xl":"text-4xl"},p=K=>K?K===""?"":K===""?"":K:"",x=K=>{const de=p(K);if(!de)return"";const je=de.length;return je>10?"text-xs tracking-tighter":je>8?"text-sm":""};return o.jsxs("div",{className:"font-serif text-black leading-tight",children:[o.jsxs("div",{className:"print-page relative p-[25mm] flex flex-col justify-between items-center text-center",children:[o.jsxs("div",{className:"mt-16 text-3xl font-normal tracking-widest",children:["",i.count,""]}),o.jsx("div",{className:"mt-20 px-4 w-full flex items-center justify-center min-h-[4rem]",children:o.jsx("h1",{className:`${f(i.project)} font-normal mb-4 leading-normal whitespace-nowrap`,children:i.project})}),o.jsx("div",{className:"my-auto",children:o.jsx("h2",{className:"text-5xl font-normal tracking-[0.2em] leading-loose",children:"      "})}),o.jsxs("div",{className:"mb-24 w-full",children:[o.jsxs("div",{className:"text-2xl mb-16",children:[" ",r(i.date)]}),o.jsx("div",{className:"flex items-center justify-center gap-3",children:o.jsxs("span",{className:"font-bold text-2xl italic flex items-center",style:{fontFamily:"sans-serif"},children:[o.jsx("span",{className:"bg-red-600 text-white px-2 py-0.5 mr-2 skew-x-[-12deg] inline-block",children:"K"}),i.contractor]})})]})]}),o.jsxs("div",{className:"print-page p-[30mm] flex flex-col items-center",children:[o.jsx("div",{className:"mt-20 mb-24 border-b-2 border-black px-12 pb-2",children:o.jsx("h2",{className:"text-4xl font-normal tracking-[0.2em] ml-2",children:""})}),o.jsxs("div",{className:"w-full max-w-lg space-y-12 text-2xl",children:[o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"1"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"2"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"3"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"4"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"5"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"6"}),o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"print-page p-[20mm]",children:[o.jsxs("div",{className:"flex justify-between items-end mb-4 px-2",children:[o.jsxs("div",{className:"text-xl font-bold",children:[" ",i.count," "]}),o.jsx("h3",{className:"text-2xl font-bold text-center flex-1",children:""}),o.jsx("div",{className:"w-16"})," "]}),o.jsx("table",{className:`w-full border-collapse mb-6 ${t}`,children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{className:`${t} p-2 w-32 text-center`,children:"   "}),o.jsx("td",{className:`${t} p-2`,children:" "})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${t} p-2 text-center`,children:"   "}),o.jsx("td",{className:`${t} p-2`,children:r(i.date)})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${t} p-2 text-center`,children:""}),o.jsx("td",{className:`${t} p-2`,children:i.location})]})]})}),o.jsx("div",{className:"mb-6",children:o.jsxs("table",{className:`w-full border-collapse ${t}`,children:[o.jsxs("thead",{children:[o.jsx("tr",{children:o.jsx("th",{className:`${t} ${s}`,colSpan:4,children:""})}),o.jsxs("tr",{children:[o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""})]})]}),o.jsxs("tbody",{children:[o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${x((y=i.gcAttendees[0])==null?void 0:y.role)}`,children:p((_=i.gcAttendees[0])==null?void 0:_.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(T=i.gcAttendees[0])==null?void 0:T.name}),o.jsx("td",{className:`${t} px-2 align-middle ${x((C=i.gcAttendees[1])==null?void 0:C.role)}`,children:p((L=i.gcAttendees[1])==null?void 0:L.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(X=i.gcAttendees[1])==null?void 0:X.name})]}),o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${x((ee=i.gcAttendees[2])==null?void 0:ee.role)}`,children:p((G=i.gcAttendees[2])==null?void 0:G.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(ie=i.gcAttendees[2])==null?void 0:ie.name}),o.jsx("td",{className:`${t} px-2 align-middle ${x((le=i.gcAttendees[3])==null?void 0:le.role)}`,children:p((he=i.gcAttendees[3])==null?void 0:he.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(ge=i.gcAttendees[3])==null?void 0:ge.name})]}),o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${x((Me=i.gcAttendees[4])==null?void 0:Me.role)}`,children:p((De=i.gcAttendees[4])==null?void 0:De.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(R=i.gcAttendees[4])==null?void 0:R.name}),o.jsx("td",{className:`${t} px-2 align-middle ${x((j=i.gcAttendees[5])==null?void 0:j.role)}`,children:p((S=i.gcAttendees[5])==null?void 0:S.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(O=i.gcAttendees[5])==null?void 0:O.name})]}),o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${x((A=i.gcAttendees[6])==null?void 0:A.role)}`,children:p((k=i.gcAttendees[6])==null?void 0:k.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(w=i.gcAttendees[6])==null?void 0:w.name}),o.jsx("td",{className:`${t} px-2 align-middle ${x((Te=i.gcAttendees[7])==null?void 0:Te.role)}`,children:p((Ce=i.gcAttendees[7])==null?void 0:Ce.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(F=i.gcAttendees[7])==null?void 0:F.name})]})]})]})}),o.jsx("div",{children:o.jsxs("table",{className:`w-full border-collapse ${t}`,children:[o.jsxs("thead",{children:[o.jsx("tr",{children:o.jsx("th",{className:`${t} ${s}`,colSpan:3,children:"              "})}),o.jsxs("tr",{children:[o.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:"     "}),o.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""})]})]}),o.jsxs("tbody",{children:[i.subcontractorAttendees.map(K=>o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle`,children:K.company}),o.jsx("td",{className:`${t} px-2 align-middle`,children:K.role}),o.jsx("td",{className:`${t} px-2 align-middle text-center`,children:K.signatureDataUrl?o.jsx("img",{src:K.signatureDataUrl,alt:K.name,className:"h-10 mx-auto object-contain"}):K.name})]},K.id)),h.map((K,de)=>o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t}`}),o.jsx("td",{className:`${t}`}),o.jsx("td",{className:`${t}`})]},`blank-${de}`))]})]})})]})]})},x0=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,Hj=({isOpen:i,projectName:t,onConfirm:s,onCancel:r})=>{const[c,h]=W.useState(""),[f,p]=W.useState("");if(W.useEffect(()=>{i&&(h(""),p(""))},[i]),!i)return null;const x=()=>{c==="4043"?s():p("")};return o.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6 animate-fade-in border-l-8 border-red-600",children:[o.jsxs("h3",{className:"text-xl font-bold text-red-600 mb-4 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),""]}),o.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["",t,""]}),o.jsxs("div",{className:"bg-red-50 p-3 rounded mb-4 text-sm text-red-800 leading-relaxed",children:[o.jsx("strong",{children:""}),o.jsx("br",{}),"",o.jsx("br",{}),o.jsx("span",{className:"font-bold underline text-red-600 text-base",children:""}),o.jsx("br",{}),""]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" (4043)"}),o.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 outline-none text-lg tracking-widest",placeholder:"PASS",value:c,onChange:y=>h(y.target.value)}),f&&o.jsxs("p",{className:"text-red-500 text-xs mt-1 font-bold",children:[o.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),f]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:x,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold shadow-md",children:""})]})]})})},Gj=({title:i,items:t,onUpdate:s,onDeleteRequest:r,onBack:c})=>{const[h,f]=W.useState(""),p=t||[],x=()=>{h.trim()&&(s([...p,h.trim()]),f(""))};return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[o.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:o.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),o.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[i," ",o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[p.length,""]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:o.jsxs("ul",{className:"space-y-2",children:[p.map((y,_)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:y}),o.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),r(_,y)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},_)),p.length===0&&o.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),o.jsx("div",{className:"p-4 border-t bg-gray-50",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:h,onChange:y=>f(y.target.value),onKeyDown:y=>y.key==="Enter"&&x()}),o.jsxs("button",{onClick:x,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[o.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},v0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},Fj={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["roles","topics","jobTypes","goals","predictions","countermeasures"]},b0=["","","",""],$j=({initialData:i,initialDraftId:t,onBackToMenu:s})=>{const[r,c]=W.useState(1),[h,f]=W.useState(i||b1),[p,x]=W.useState(t||null),[y,_]=W.useState(_t),[T,C]=W.useState(!1),[L,X]=W.useState(!1),[ee,G]=W.useState("idle"),[ie,le]=W.useState(1),[he,ge]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[Me,De]=W.useState(!1),[R,j]=W.useState(null),[S,O]=W.useState(""),[A,k]=W.useState(""),[w,Te]=W.useState(0),[Ce,F]=W.useState("BASIC"),[K,de]=W.useState(null),[je,Pe]=W.useState(null),[V,$]=W.useState(!1),[oe,fe]=W.useState([]),[re,ve]=W.useState(null);W.useEffect(()=>{(async()=>{try{const ce=await Qu();_(ce);const Ae=ce.subcontractors||[],Ge=ce.roles||[];Ae.length>0&&O(Ae[0]),Ge.length>0&&k(Ge[0])}catch(ce){console.error("",ce)}})()},[]),W.useEffect(()=>{if(!i){const D=h.gcAttendees?[...h.gcAttendees]:Array(8).fill({role:"",name:""});let ce=!1;b0.forEach((Ae,Ge)=>{(!D[Ge]||D[Ge].role!==Ae)&&(D[Ge]={...D[Ge],role:Ae},ce=!0)}),ce&&f(Ae=>({...Ae,gcAttendees:D}))}},[i]),W.useEffect(()=>{const D=y.subcontractors||[];D.length>0&&!D.includes(S)&&S!==""&&O(D[0])},[y.subcontractors,S]),W.useEffect(()=>{if(!L)return;const D=()=>{const Ge=window.innerWidth-40;le(Ge<794?Ge/794:1)};return window.addEventListener("resize",D),D(),()=>window.removeEventListener("resize",D)},[L]);const M=(D,ce)=>{f(Ae=>({...Ae,[D]:ce})),G("idle"),De(!0)},_e=(D,ce,Ae)=>{const Ge=[...h.gcAttendees];Ge[D]||(Ge[D]={role:"",name:""}),Ge[D][ce]=Ae,M("gcAttendees",Ge)},Se=D=>{const ce={id:Date.now().toString(),company:S,role:A,name:"Signed",signatureDataUrl:D};f(Ae=>({...Ae,subcontractorAttendees:[...Ae.subcontractorAttendees,ce]})),Te(Ae=>Ae+1),G("idle"),De(!0)},at=async()=>{G("saving");try{const D=await Za(p,"DISASTER_COUNCIL",h);x(D),G("saved"),De(!1),setTimeout(()=>G("idle"),2e3)}catch(D){console.error(D),alert(""),G("idle")}},be=async()=>{G("saving");try{const D=await Za(p,"DISASTER_COUNCIL",h);x(D),G("saved"),De(!1),setTimeout(()=>G("idle"),2e3);const ce=await wb(h.project);if(ce.length===0){alert(`${h.project}

`);return}fe(ce),$(!0)}catch{alert(""),G("idle")}},Z=D=>{ve(D.data),$(!1),X(!0)},we=()=>{const ce=new Date(h.date).getMonth()+1,Ae=document.title;document.title=`_${h.project}_${ce}`,window.print(),document.title=Ae},Ve=()=>{Me?ge({isOpen:!0,message:`
`,onConfirm:()=>{ge(D=>({...D,isOpen:!1})),s()}}):s()},Je=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>{C(!1),de(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),o.jsxs("div",{className:"flex gap-4 mb-6",children:[o.jsxs("button",{onClick:()=>F("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${Ce==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),o.jsxs("button",{onClick:()=>F("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${Ce==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-clipboard-check mr-2"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:K?o.jsx("div",{className:"flex-1 overflow-hidden col-span-2",children:o.jsx(Gj,{title:v0[K],items:y[K]||[],onBack:()=>de(null),onUpdate:async D=>{const ce={...y,[K]:D};_(ce),await ls(ce)},onDeleteRequest:(D,ce)=>{K==="projects"?Pe({index:D,name:ce}):ge({isOpen:!0,message:`${ce}`,onConfirm:async()=>{const Ae=[...y[K]||[]];Ae.splice(D,1);const Ge={...y,[K]:Ae};_(Ge),await ls(Ge),ge(qt=>({...qt,isOpen:!1}))}})}})}):Fj[Ce].map(D=>{const ce=y[D]||[];return o.jsxs("button",{onClick:()=>de(D),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:v0[D]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[ce.length," "]})]}),o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:o.jsx("i",{className:"fa-solid fa-chevron-right"})})]},D)})})]}),Ft=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 1: "}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-gray-600",children:""}),o.jsx("select",{className:"w-24 p-2 border border-gray-300 rounded text-center text-lg bg-white appearance-none",value:h.count,onChange:D=>M("count",parseInt(D.target.value)||0),children:Array.from({length:100},(D,ce)=>ce+1).map(D=>o.jsx("option",{value:D,children:D},D))}),o.jsx("span",{className:"text-gray-600",children:""})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white appearance-none",value:h.project,onChange:D=>M("project",D.target.value),children:(y.projects||[]).map(D=>o.jsx("option",{value:D,children:D},D))})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("input",{type:"date",className:"w-full p-3 border border-gray-300 rounded-lg bg-white appearance-none",value:h.date,onChange:D=>M("date",D.target.value)})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white appearance-none",value:h.contractor,onChange:D=>M("contractor",D.target.value),children:(y.contractors||[]).map(D=>o.jsx("option",{value:D,children:D},D))})]})]}),Xt=()=>o.jsxs("div",{className:"space-y-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 2: "}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-3",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded bg-white appearance-none",value:h.location,onChange:D=>M("location",D.target.value),children:(y.locations||[]).map(D=>o.jsx("option",{value:D,children:D},D))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500",children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"time",className:"p-2 border rounded appearance-none",value:h.startTime,onChange:D=>M("startTime",D.target.value)}),o.jsx("span",{children:""}),o.jsx("input",{type:"time",className:"p-2 border rounded appearance-none",value:h.endTime,onChange:D=>M("endTime",D.target.value)})]})]})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-3 border-b pb-1",children:""}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.gcAttendees.map((D,ce)=>o.jsxs("div",{className:"flex gap-2 items-center",children:[ce<4?o.jsx("div",{className:"w-1/3 p-2 border border-gray-300 rounded text-xs bg-gray-100 font-bold truncate",children:b0[ce]}):o.jsxs("select",{className:"w-1/3 p-2 border border-gray-300 rounded text-sm bg-white appearance-none",value:D.role,onChange:Ae=>_e(ce,"role",Ae.target.value),children:[o.jsx("option",{value:"",children:"()"}),(y.roles||[]).map(Ae=>o.jsx("option",{value:Ae,children:Ae},Ae))]}),o.jsxs("select",{className:"flex-1 p-2 border border-gray-300 rounded text-sm appearance-none",value:D.name,onChange:Ae=>_e(ce,"name",Ae.target.value),children:[o.jsx("option",{value:"",children:"()"}),(y.supervisors||[]).map(Ae=>o.jsx("option",{value:Ae,children:Ae},Ae))]})]},ce))})]}),o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-3 border-b pb-1",children:""}),o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded appearance-none",value:S,onChange:D=>O(D.target.value),children:(y.subcontractors||[]).map(D=>o.jsx("option",{value:D,children:D},D))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded appearance-none",value:A,onChange:D=>k(D.target.value),children:(y.roles||[]).map(D=>o.jsx("option",{value:D,children:D},D))})]})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 text-center",children:" ()"}),o.jsx(Tb,{onSave:Se,onClear:()=>{},lineWidth:6},w)]})]}),o.jsx("div",{className:"divide-y border rounded max-h-48 overflow-y-auto",children:h.subcontractorAttendees.map((D,ce)=>o.jsxs("div",{className:"p-2 flex justify-between items-center bg-white",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-bold",children:D.company}),o.jsx("div",{className:"text-xs text-gray-500",children:D.role})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 cursor-pointer hover:opacity-80 transition-opacity border border-transparent hover:border-blue-300 rounded px-1",onClick:()=>j(D.signatureDataUrl),title:"",children:o.jsx("img",{src:D.signatureDataUrl,alt:"sig",className:"h-full object-contain"})}),o.jsx("button",{onClick:()=>{const Ae=h.subcontractorAttendees.filter(Ge=>Ge.id!==D.id);M("subcontractorAttendees",Ae)},className:"text-red-400 hover:text-red-600",children:o.jsx("i",{className:"fa-solid fa-trash"})})]})]},D.id))})]})]}),fn=()=>o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 bg-gray-600 rounded",children:""}),o.jsxs("button",{onClick:we,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${ie})`,transformOrigin:"top center"},children:o.jsx(y0,{data:h})}),re&&o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${ie*.7})`,transformOrigin:"top center"},children:o.jsx(Su,{data:re})})]})]}),ot=()=>V?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",h.project,""]}),o.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:oe.map(D=>{const ce=D.data;return o.jsxs("button",{onClick:()=>Z(D),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-blue-800",children:[ce.month," "]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(D.lastModified).toLocaleString("ja-JP")]})]}),o.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},D.id)})}),o.jsx("button",{onClick:()=>$(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null;return T?o.jsxs(o.Fragment,{children:[Je(),o.jsx(x0,{isOpen:he.isOpen,message:he.message,onConfirm:he.onConfirm,onCancel:()=>ge({...he,isOpen:!1})}),je&&o.jsx(Hj,{isOpen:!!je,projectName:je.name,onCancel:()=>Pe(null),onConfirm:async()=>{const D=[...y.projects];D.splice(je.index,1),await xo(je.name);const ce={...y,projects:D};_(ce),await ls(ce),Pe(null)}})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:Ve,className:"text-white hover:text-gray-300",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-users-rectangle mr-2"}),""]})]}),o.jsxs("button",{onClick:()=>C(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),o.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[o.jsx("span",{className:r>=1?"text-green-600":"",children:"STEP 1"}),o.jsx("span",{className:r>=2?"text-green-600":"",children:"STEP 2"})]}),o.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:o.jsx("div",{className:"bg-green-600 h-full transition-all duration-300",style:{width:`${r*50}%`}})})]}),o.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg max-w-3xl min-h-[60vh]",children:[r===1&&Ft(),r===2&&Xt()]}),o.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-md z-20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>c(D=>Math.max(1,D-1)),disabled:r===1,className:`px-4 py-3 rounded-lg font-bold ${r===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),o.jsxs("button",{onClick:at,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center",children:[o.jsx("i",{className:`fa-solid ${ee==="saved"?"fa-check":"fa-save"} mr-2`}),ee==="saved"?"":""]})]}),r===1?o.jsxs("button",{onClick:()=>c(2),className:"px-8 py-3 bg-green-600 text-white rounded-lg font-bold shadow hover:bg-green-700 flex items-center",children:[" ",o.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):o.jsxs("button",{onClick:be,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),R&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>j(null),children:[o.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:o.jsx("img",{src:R,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),o.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),L&&fn(),ot(),o.jsx(x0,{isOpen:he.isOpen,message:he.message,onConfirm:he.onConfirm,onCancel:()=>ge({...he,isOpen:!1})}),o.jsxs("div",{className:"hidden print:block",children:[o.jsx(y0,{data:h}),re&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),o.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:o.jsx(Su,{data:re})})]})]})]})},_0=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,N0=({isOpen:i,projectName:t,onConfirm:s,onCancel:r})=>{const[c,h]=W.useState(""),[f,p]=W.useState("");if(W.useEffect(()=>{i&&(h(""),p(""))},[i]),!i)return null;const x=()=>{c==="4043"?s():p("")};return o.jsx("div",{className:"fixed inset-0 z-[80] bg-gray-900 bg-opacity-60 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6 animate-fade-in border-l-8 border-red-600",children:[o.jsxs("h3",{className:"text-xl font-bold text-red-600 mb-4 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),""]}),o.jsxs("p",{className:"text-gray-800 font-bold mb-2",children:["",t,""]}),o.jsxs("div",{className:"bg-red-50 p-3 rounded mb-4 text-sm text-red-800 leading-relaxed",children:[o.jsx("strong",{children:""}),o.jsx("br",{}),"",o.jsx("br",{}),o.jsx("span",{className:"font-bold underline text-red-600 text-base",children:""}),o.jsx("br",{}),""]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" (4043)"}),o.jsx("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 outline-none text-lg tracking-widest",placeholder:"PASS",value:c,onChange:y=>h(y.target.value)}),f&&o.jsxs("p",{className:"text-red-500 text-xs mt-1 font-bold",children:[o.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),f]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:x,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold shadow-md",children:""})]})]})})},Yj=({title:i,items:t,onUpdate:s,onDeleteRequest:r,onBack:c})=>{const[h,f]=W.useState(""),p=()=>{h.trim()&&(s([...t,h.trim()]),f(""))};return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[o.jsx("button",{onClick:c,className:"text-gray-500 hover:text-blue-600",children:o.jsx("i",{className:"fa-solid fa-arrow-left text-xl"})}),o.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:[i," ",o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full ml-2",children:[t.length,""]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:o.jsxs("ul",{className:"space-y-2",children:[t.map((x,y)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:x}),o.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),r(y,x)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},y)),t.length===0&&o.jsx("li",{className:"text-gray-400 text-sm italic text-center py-8",children:""})]})}),o.jsx("div",{className:"p-4 border-t bg-gray-50",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm bg-white text-black outline-none focus:ring-2 focus:ring-blue-500",placeholder:"...",value:h,onChange:x=>f(x.target.value),onKeyDown:x=>x.key==="Enter"&&p()}),o.jsxs("button",{onClick:p,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-blue-700 font-bold shadow-md",children:[o.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})})]})},E0={projects:"",contractors:"",supervisors:"",locations:"",workplaces:"",subcontractors:"",roles:"",topics:"",jobTypes:"",goals:"",predictions:"",countermeasures:"",processes:"",cautions:""},Qj={BASIC:["projects","contractors","supervisors","locations","workplaces"],TRAINING:["goals","processes","topics","cautions"]},Kj=["","","","","","",""],Xj=i=>{const t=i.getFullYear(),s=i.getMonth()+1,r=i.getDate();if(s===1&&r===1||s===2&&r===11||s===2&&r===23||s===4&&r===29||s===5&&r===3||s===5&&r===4||s===5&&r===5||s===8&&r===11||s===11&&r===3||s===11&&r===23)return!0;const c=(p,x,y)=>{const _=new Date(p,x-1,1).getDay();return 1+(_===1?0:(8-_)%7)+(y-1)*7};if(s===1&&r===c(t,1,2)||s===7&&r===c(t,7,3)||s===9&&r===c(t,9,3)||s===10&&r===c(t,10,2))return!0;const h=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),f=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&r===h||s===9&&r===f},Zj=({initialData:i,initialDraftId:t,onBackToMenu:s})=>{const[r,c]=W.useState(i||_1),[h,f]=W.useState(t||null),[p,x]=W.useState(_t),[y,_]=W.useState(!1),[T,C]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[L,X]=W.useState(!1),[ee,G]=W.useState(null),[ie,le]=W.useState(null),[he,ge]=W.useState("idle"),[Me,De]=W.useState(1),[R,j]=W.useState(!1),[S,O]=W.useState("BASIC"),[A,k]=W.useState(null),[w,Te]=W.useState(null);W.useEffect(()=>{(async()=>{try{const Z=await Qu();x(Z)}catch(Z){console.error("",Z)}})()},[]),W.useEffect(()=>{const be=()=>{let Xt=(window.innerWidth-40)/1122.6599999999999;Xt>1.2&&(Xt=1.2),De(Xt)};return window.addEventListener("resize",be),be(),()=>window.removeEventListener("resize",be)},[]);const Ce=W.useMemo(()=>{const be=new Date(r.year,r.month-1,1),Z=Ab(be),we=[];for(let Ve=1;Ve<=Z;Ve++){const Je=new Date(r.year,r.month-1,Ve),Ft=Vi(Je)===0,Xt=Vi(Je)===6,fn=Xj(Je);let ot="",D="";Ft||fn?(ot="text-red-600",D="bg-red-50"):Xt&&(ot="text-blue-600",D="bg-blue-50"),we.push({date:Ve,dayOfWeek:Kj[Vi(Je)],colorClass:ot,bgClass:D})}return we},[r.year,r.month]),F=W.useMemo(()=>{const be=Ce.length,Z=Math.floor(be/5),we=be%5;return Array.from({length:5}).map((Ve,Je)=>Z+(Je<we?1:0))},[Ce.length]),K=be=>{c(Z=>({...Z,...be})),ge("idle"),j(!0)},de=async()=>{ge("saving");try{const be=await Za(h,"SAFETY_PLAN",r);f(be),ge("saved"),j(!1),setTimeout(()=>ge("idle"),2e3)}catch(be){console.error(be),alert(""),ge("idle")}},je=async()=>{ge("saving");try{const be=await Za(h,"SAFETY_PLAN",r);f(be),ge("saved"),j(!1),setTimeout(()=>ge("idle"),2e3),setTimeout(()=>window.print(),100)}catch{alert(""),ge("idle")}},Pe=()=>{R?C({isOpen:!0,message:`
`,onConfirm:()=>{C(be=>({...be,isOpen:!1})),s()}}):s()},V=(be,Z)=>{if(ee===null)G(be),le(Z);else if(ee!==be)G(be),le(Z);else{if(ie!==null){const we=Math.min(ie,Z),Ve=Math.max(ie,Z),Je=r.processRows.map(Ft=>{if(Ft.id===be){const Xt=Ft.bars.filter(fn=>fn.endDay<we||fn.startDay>Ve);return{...Ft,bars:[...Xt,{startDay:we,endDay:Ve}]}}return Ft});K({processRows:Je})}G(null),le(null)}},$=(be,Z)=>{const we=r.processRows.find(Ve=>Ve.id===be);return we?we.bars.some(Ve=>Z>=Ve.startDay&&Z<=Ve.endDay):!1},oe=(be,Z)=>ee!==be||ie===null?!1:Z===ie,fe="border-2 border-black",re="border border-black",ve="bg-cyan-100",M="w-full h-full bg-transparent outline-none text-center font-serif",_e="w-full h-full bg-transparent outline-none text-center appearance-none font-serif text-center-last",Se=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>{_(!1),k(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),A?o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx(Yj,{title:E0[A],items:p[A],onBack:()=>k(null),onUpdate:async be=>{const Z={...p,[A]:be};x(Z),await ls(Z)},onDeleteRequest:(be,Z)=>{A==="projects"?Te({index:be,name:Z}):C({isOpen:!0,message:`${Z}`,onConfirm:async()=>{const we=[...p[A]];we.splice(be,1);const Ve={...p,[A]:we};x(Ve),await ls(Ve),C(Je=>({...Je,isOpen:!1}))}})}})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex gap-4 mb-6 shrink-0",children:[o.jsxs("button",{onClick:()=>O("BASIC"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${S==="BASIC"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-house-chimney mr-2"}),""]}),o.jsxs("button",{onClick:()=>O("TRAINING"),className:`flex-1 py-3 rounded-lg font-bold transition-colors ${S==="TRAINING"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 border"}`,children:[o.jsx("i",{className:"fa-solid fa-list-check mr-2"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:Qj[S].map(be=>{const Z=p[be]||[];return o.jsxs("button",{onClick:()=>k(be),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:border-blue-400 hover:shadow-md transition-all text-left flex justify-between items-center group",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:E0[be]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[Z.length," "]})]}),o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:o.jsx("i",{className:"fa-solid fa-chevron-right"})})]},be)})})]})]}),at=(be=!1)=>o.jsxs("div",{className:"p-[10mm] w-full h-full flex flex-col font-serif",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[o.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[o.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsx("select",{className:"w-12 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:r.year-2018,onChange:Z=>K({year:2018+parseInt(Z.target.value||"0")}),children:Array.from({length:30},(Z,we)=>we+1).map(Z=>o.jsx("option",{value:Z,children:Z},Z))}),o.jsx("span",{className:"text-xl mr-4",children:""}),o.jsx("select",{className:"w-10 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:r.month,onChange:Z=>K({month:parseInt(Z.target.value||"0")}),children:Array.from({length:12},(Z,we)=>we+1).map(Z=>o.jsx("option",{value:Z,children:Z},Z))}),o.jsx("span",{className:"text-xl mr-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),o.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),o.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[300px] max-w-[500px]",value:r.project,onChange:Z=>K({project:Z.target.value}),children:p.projects.map(Z=>o.jsx("option",{value:Z,children:Z},Z))})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),o.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[200px]",value:r.location,onChange:Z=>K({location:Z.target.value}),children:p.locations.map(Z=>o.jsx("option",{value:Z,children:Z},Z))})]})]})]}),o.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[o.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",o.jsx("input",{type:"date",className:"bg-transparent text-[10px] w-24 text-right font-serif",value:r.createdDate,onChange:Z=>K({createdDate:Z.target.value})}),""]}),o.jsxs("table",{className:`w-full ${fe} text-[10px] border-collapse`,children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[15%]"}),o.jsx("col",{className:"w-[25%]"}),o.jsx("col",{className:"w-[35%]"}),o.jsx("col",{className:"w-[25%]"})]}),o.jsx("thead",{children:o.jsxs("tr",{className:ve,children:[o.jsx("th",{className:`${re} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${re} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${re} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${re} py-0.5 font-normal`,children:""})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("input",{type:"date",className:M,value:r.trainingDate,onChange:Z=>K({trainingDate:Z.target.value})})}),o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("select",{className:_e,value:r.trainingLeader,onChange:Z=>K({trainingLeader:Z.target.value}),children:p.supervisors.map(Z=>o.jsx("option",{value:Z,children:Z},Z))})})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("input",{type:"date",className:M,value:r.councilDate,onChange:Z=>K({councilDate:Z.target.value})})}),o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("select",{className:_e,value:r.councilLeader,onChange:Z=>K({councilLeader:Z.target.value}),children:p.supervisors.map(Z=>o.jsx("option",{value:Z,children:Z},Z))})})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("input",{type:"date",className:M,value:r.patrolDate,onChange:Z=>K({patrolDate:Z.target.value})})}),o.jsx("td",{className:`${re} bg-gray-100`}),o.jsx("td",{className:`${re} bg-gray-100`})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${re} bg-gray-100`}),o.jsx("td",{className:`${re} bg-gray-100`}),o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("select",{className:_e,value:r.author,onChange:Z=>K({author:Z.target.value}),children:p.supervisors.map(Z=>o.jsx("option",{value:Z,children:Z},Z))})})]})]})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:o.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[35mm]"}),Ce.map(Z=>o.jsx("col",{},Z.date)),o.jsx("col",{className:"w-[10mm]"})]}),o.jsxs("thead",{children:[o.jsxs("tr",{className:"h-[8mm]",children:[o.jsx("th",{className:`${re} ${ve} font-normal`,children:""}),o.jsx("th",{className:`${re} ${ve}`,colSpan:Ce.length,children:o.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[o.jsx("span",{children:""}),o.jsx("span",{children:""}),o.jsx("span",{children:""})]})}),o.jsx("th",{className:`${re} ${ve} font-normal`,rowSpan:4,children:""})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${re} bg-gray-50 font-normal`,children:""}),o.jsxs("th",{className:`${re} font-normal text-center`,colSpan:Ce.length,children:[r.month,""]})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${re} bg-gray-50 font-normal`,children:""}),Ce.map(Z=>o.jsx("th",{className:`${re} font-normal text-center ${Z.colorClass} ${Z.bgClass}`,children:Z.date},Z.date))]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${re} bg-gray-50 font-normal`,children:" "}),Ce.map(Z=>o.jsx("th",{className:`${re} font-normal text-center ${Z.colorClass} ${Z.bgClass}`,children:Z.dayOfWeek},Z.date))]})]}),o.jsxs("tbody",{children:[r.processRows.map(Z=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${re} px-1 align-middle leading-none`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:Z.category}),o.jsx("span",{className:"font-bold text-[9px] truncate",children:Z.name})]})}),Ce.map(we=>{const Ve=$(Z.id,we.date),Je=oe(Z.id,we.date);return o.jsxs("td",{className:`${re} p-0 relative cursor-pointer hover:bg-yellow-50 ${we.bgClass}`,onClick:()=>!be&&V(Z.id,we.date),children:[Ve&&o.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"}),Je&&o.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-300 opacity-50"})]},we.date)}),o.jsx("td",{className:`${re}`})]},Z.id)),Array.from({length:Math.max(0,12-r.processRows.length)}).map((Z,we)=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${re}`}),Ce.map(Ve=>o.jsx("td",{className:`${re} ${Ve.bgClass}`},Ve.date)),o.jsx("td",{className:`${re}`})]},`fill-${we}`))]}),o.jsxs("tfoot",{children:[o.jsxs("tr",{className:"h-[12mm]",children:[o.jsx("td",{className:`${re} ${ve} text-center font-normal`,children:""}),F.map((Z,we)=>o.jsx("td",{colSpan:Z,className:`${re} align-top p-0`,children:o.jsxs("select",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1 appearance-none",value:r.predictions[we]||"",onChange:Ve=>{const Je=[...r.predictions];Je[we]=Ve.target.value,K({predictions:Je})},children:[o.jsx("option",{value:"",children:"-"}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})},we)),o.jsx("td",{className:`${re}`})]}),o.jsxs("tr",{className:"h-[18mm]",children:[o.jsxs("td",{className:`${re} ${ve} text-center font-normal leading-tight`,children:["",o.jsx("br",{}),""]}),F.map((Z,we)=>o.jsx("td",{colSpan:Z,className:`${re} align-top p-0`,children:o.jsx("textarea",{className:"w-full h-full bg-transparent text-[9px] outline-none resize-none p-1 leading-tight",value:r.countermeasures[we]||"",onChange:Ve=>{const Je=[...r.countermeasures];Je[we]=Ve.target.value,K({countermeasures:Je})}})},we)),o.jsx("td",{className:`${re}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${re} ${ve} text-center font-normal leading-tight`,children:""}),F.map((Z,we)=>o.jsx("td",{colSpan:Z,className:`${re} align-top p-0`,children:o.jsx("input",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1",value:r.inspectionItems[we]||"",onChange:Ve=>{const Je=[...r.inspectionItems];Je[we]=Ve.target.value,K({inspectionItems:Je})}})},we)),o.jsx("td",{className:`${re}`})]}),o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${re} ${ve} text-center font-normal`,children:""}),Ce.map(Z=>o.jsx("td",{className:`${re} p-0 text-center`,children:o.jsx("input",{className:"w-full h-full text-[8px] text-center bg-transparent outline-none p-0",value:r.safetyDuty[Z.date]||"",onChange:we=>K({safetyDuty:{...r.safetyDuty,[Z.date]:we.target.value}})})},Z.date)),o.jsx("td",{className:`${re}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${re} ${ve} text-center font-normal`,children:""}),o.jsx("td",{colSpan:Ce.length+1,className:`${re} p-0`,children:o.jsx("textarea",{className:"w-full h-full p-1 text-[10px] bg-transparent outline-none resize-none leading-tight",value:r.lastMonthReflection,onChange:Z=>K({lastMonthReflection:Z.target.value})})})]})]})]})})]});return y?o.jsxs(o.Fragment,{children:[Se(),o.jsx(_0,{isOpen:T.isOpen,message:T.message,onConfirm:T.onConfirm,onCancel:()=>C({...T,isOpen:!1})}),w&&o.jsx(N0,{isOpen:!!w,projectName:w.name,onCancel:()=>Te(null),onConfirm:async()=>{const be=[...p.projects];be.splice(w.index,1),await xo(w.name);const Z={...p,projects:be};x(Z),await ls(Z),Te(null)}})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen bg-gray-50 flex flex-col",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-30 flex justify-between items-center shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:Pe,className:"text-white hover:text-gray-300 transition-colors",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-clipboard-list mr-2"}),""]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:de,className:"px-4 py-2 rounded font-bold border border-blue-400 text-white bg-blue-600 hover:bg-blue-500 flex items-center text-sm transition-colors shadow-sm",children:[o.jsx("i",{className:`fa-solid ${he==="saved"?"fa-check":"fa-save"} mr-2`}),he==="saved"?"":""]}),o.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-cyan-600 text-white rounded font-bold hover:bg-cyan-500 flex items-center text-sm transition-colors shadow-sm",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]}),o.jsxs("button",{onClick:()=>_(!0),className:"text-xs bg-slate-700 px-3 py-2 rounded hover:bg-slate-600 transition-colors ml-2 shadow-sm",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]})]}),o.jsx("main",{className:"flex-1 overflow-auto p-4 bg-gray-100 flex justify-center",children:o.jsx("div",{className:"bg-white shadow-xl origin-top",style:{width:"297mm",minHeight:"210mm"},children:at(!1)})})]}),L&&o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-95 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"}),""]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500 transition-colors",children:""}),o.jsxs("button",{onClick:je,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center hover:bg-green-500 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-8 flex justify-center items-start bg-gray-800",children:o.jsx("div",{style:{width:"297mm",transform:`scale(${Me})`,transformOrigin:"top center",marginBottom:`${(Me-1)*100}%`},children:o.jsx("div",{className:"bg-white shadow-2xl",children:at(!0)})})})]}),o.jsxs("div",{className:"hidden print:block",children:[o.jsx("style",{children:"@media print { @page { size: landscape; } }"}),o.jsx("div",{className:"print-page-landscape",children:at(!0)})]}),o.jsx(_0,{isOpen:T.isOpen,message:T.message,onConfirm:T.onConfirm,onCancel:()=>C({...T,isOpen:!1})}),w&&o.jsx(N0,{isOpen:!!w,projectName:w.name,onCancel:()=>Te(null),onConfirm:async()=>{const be=[...p.projects];be.splice(w.index,1),await xo(w.name);const Z={...p,projects:be};x(Z),await ls(Z),Te(null)}})]})};function kf(){return kf=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(i[r]=s[r])}return i},kf.apply(null,arguments)}function Jj(i,t){if(i==null)return{};var s={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(t.indexOf(r)!==-1)continue;s[r]=i[r]}return s}function Wj(i,t){if(i==null)return{};var s,r,c=Jj(i,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);for(r=0;r<h.length;r++)s=h[r],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(i,s)&&(c[s]=i[s])}return c}function zf(i){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(i)}function eS(i,t,s){return Object.defineProperty(i,"prototype",{writable:!1}),i}function tS(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Uf(i,t){return Uf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},Uf(i,t)}function nS(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&Uf(i,t)}function Au(i){return Au=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Au(i)}function Cb(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cb=function(){return!!i})()}function sS(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function aS(i,t){if(t&&(zf(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sS(i)}function rS(i){var t=Cb();return function(){var s,r=Au(i);if(t){var c=Au(this).constructor;s=Reflect.construct(r,arguments,c)}else s=r.apply(this,arguments);return aS(this,s)}}var uf={exports:{}},hf,w0;function iS(){if(w0)return hf;w0=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return hf=i,hf}var df,T0;function lS(){if(T0)return df;T0=1;var i=iS();function t(){}function s(){}return s.resetWarningCache=t,df=function(){function r(f,p,x,y,_,T){if(T!==i){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}r.isRequired=r;function c(){return r}var h={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:c,element:r,elementType:r,instanceOf:c,node:r,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:s,resetWarningCache:t};return h.PropTypes=h,h},df}var j0;function oS(){return j0||(j0=1,uf.exports=lS()()),uf.exports}var cS=oS();const Mn=Cu(cS);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bzier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bzier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function Vr(i,t,s){this.x=i,this.y=t,this.time=s||new Date().getTime()}Vr.prototype.velocityFrom=function(i){return this.time!==i.time?this.distanceTo(i)/(this.time-i.time):1};Vr.prototype.distanceTo=function(i){return Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))};Vr.prototype.equals=function(i){return this.x===i.x&&this.y===i.y&&this.time===i.time};function jm(i,t,s,r){this.startPoint=i,this.control1=t,this.control2=s,this.endPoint=r}jm.prototype.length=function(){for(var i=10,t=0,s=void 0,r=void 0,c=0;c<=i;c+=1){var h=c/i,f=this._point(h,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),p=this._point(h,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(c>0){var x=f-s,y=p-r;t+=Math.sqrt(x*x+y*y)}s=f,r=p}return t};jm.prototype._point=function(i,t,s,r,c){return t*(1-i)*(1-i)*(1-i)+3*s*(1-i)*(1-i)*i+3*r*(1-i)*i*i+c*i*i*i};function uS(i,t,s){var r,c,h,f=null,p=0;s||(s={});var x=function(){p=s.leading===!1?0:Date.now(),f=null,h=i.apply(r,c),f||(r=c=null)};return function(){var y=Date.now();!p&&s.leading===!1&&(p=y);var _=t-(y-p);return r=this,c=arguments,_<=0||_>t?(f&&(clearTimeout(f),f=null),p=y,h=i.apply(r,c),f||(r=c=null)):!f&&s.trailing!==!1&&(f=setTimeout(x,_)),h}}function gt(i,t){var s=this,r=t||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=uS(gt.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=gt.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=i,this._ctx=i.getContext("2d"),this.clear(),this._handleMouseDown=function(c){c.which===1&&(s._mouseButtonDown=!0,s._strokeBegin(c))},this._handleMouseMove=function(c){s._mouseButtonDown&&s._strokeMoveUpdate(c)},this._handleMouseUp=function(c){c.which===1&&s._mouseButtonDown&&(s._mouseButtonDown=!1,s._strokeEnd(c))},this._handleTouchStart=function(c){if(c.targetTouches.length===1){var h=c.changedTouches[0];s._strokeBegin(h)}},this._handleTouchMove=function(c){c.preventDefault();var h=c.targetTouches[0];s._strokeMoveUpdate(h)},this._handleTouchEnd=function(c){var h=c.target===s._canvas;h&&(c.preventDefault(),s._strokeEnd(c))},this.on()}gt.prototype.clear=function(){var i=this._ctx,t=this._canvas;i.fillStyle=this.backgroundColor,i.clearRect(0,0,t.width,t.height),i.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0};gt.prototype.fromDataURL=function(i){var t=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new Image,c=s.ratio||window.devicePixelRatio||1,h=s.width||this._canvas.width/c,f=s.height||this._canvas.height/c;this._reset(),r.src=i,r.onload=function(){t._ctx.drawImage(r,0,0,h,f)},this._isEmpty=!1};gt.prototype.toDataURL=function(i){var t;switch(i){case"image/svg+xml":return this._toSVG();default:for(var s=arguments.length,r=Array(s>1?s-1:0),c=1;c<s;c++)r[c-1]=arguments[c];return(t=this._canvas).toDataURL.apply(t,[i].concat(r))}};gt.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};gt.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};gt.prototype.isEmpty=function(){return this._isEmpty};gt.prototype._strokeBegin=function(i){this._data.push([]),this._reset(),this._strokeUpdate(i),typeof this.onBegin=="function"&&this.onBegin(i)};gt.prototype._strokeUpdate=function(i){var t=i.clientX,s=i.clientY,r=this._createPoint(t,s),c=this._data[this._data.length-1],h=c&&c[c.length-1],f=h&&r.distanceTo(h)<this.minDistance;if(!(h&&f)){var p=this._addPoint(r),x=p.curve,y=p.widths;x&&y&&this._drawCurve(x,y.start,y.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}};gt.prototype._strokeEnd=function(i){var t=this.points.length>2,s=this.points[0];if(!t&&s&&this._drawDot(s),s){var r=this._data[this._data.length-1],c=r[r.length-1];s.equals(c)||r.push({x:s.x,y:s.y,time:s.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(i)};gt.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};gt.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};gt.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};gt.prototype._createPoint=function(i,t,s){var r=this._canvas.getBoundingClientRect();return new Vr(i-r.left,t-r.top,s||new Date().getTime())};gt.prototype._addPoint=function(i){var t=this.points,s=void 0;if(t.push(i),t.length>2){t.length===3&&t.unshift(t[0]),s=this._calculateCurveControlPoints(t[0],t[1],t[2]);var r=s.c2;s=this._calculateCurveControlPoints(t[1],t[2],t[3]);var c=s.c1,h=new jm(t[1],r,c,t[2]),f=this._calculateCurveWidths(h);return t.shift(),{curve:h,widths:f}}return{}};gt.prototype._calculateCurveControlPoints=function(i,t,s){var r=i.x-t.x,c=i.y-t.y,h=t.x-s.x,f=t.y-s.y,p={x:(i.x+t.x)/2,y:(i.y+t.y)/2},x={x:(t.x+s.x)/2,y:(t.y+s.y)/2},y=Math.sqrt(r*r+c*c),_=Math.sqrt(h*h+f*f),T=p.x-x.x,C=p.y-x.y,L=_/(y+_),X={x:x.x+T*L,y:x.y+C*L},ee=t.x-X.x,G=t.y-X.y;return{c1:new Vr(p.x+ee,p.y+G),c2:new Vr(x.x+ee,x.y+G)}};gt.prototype._calculateCurveWidths=function(i){var t=i.startPoint,s=i.endPoint,r={start:null,end:null},c=this.velocityFilterWeight*s.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,h=this._strokeWidth(c);return r.start=this._lastWidth,r.end=h,this._lastVelocity=c,this._lastWidth=h,r};gt.prototype._strokeWidth=function(i){return Math.max(this.maxWidth/(i+1),this.minWidth)};gt.prototype._drawPoint=function(i,t,s){var r=this._ctx;r.moveTo(i,t),r.arc(i,t,s,0,2*Math.PI,!1),this._isEmpty=!1};gt.prototype._drawCurve=function(i,t,s){var r=this._ctx,c=s-t,h=Math.floor(i.length());r.beginPath();for(var f=0;f<h;f+=1){var p=f/h,x=p*p,y=x*p,_=1-p,T=_*_,C=T*_,L=C*i.startPoint.x;L+=3*T*p*i.control1.x,L+=3*_*x*i.control2.x,L+=y*i.endPoint.x;var X=C*i.startPoint.y;X+=3*T*p*i.control1.y,X+=3*_*x*i.control2.y,X+=y*i.endPoint.y;var ee=t+y*c;this._drawPoint(L,X,ee)}r.closePath(),r.fill()};gt.prototype._drawDot=function(i){var t=this._ctx,s=typeof this.dotSize=="function"?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(i.x,i.y,s),t.closePath(),t.fill()};gt.prototype._fromData=function(i,t,s){for(var r=0;r<i.length;r+=1){var c=i[r];if(c.length>1)for(var h=0;h<c.length;h+=1){var f=c[h],p=new Vr(f.x,f.y,f.time),x=f.color;if(h===0)this.penColor=x,this._reset(),this._addPoint(p);else if(h!==c.length-1){var y=this._addPoint(p),_=y.curve,T=y.widths;_&&T&&t(_,T,x)}}else{this._reset();var C=c[0];s(C)}}};gt.prototype._toSVG=function(){var i=this,t=this._data,s=this._canvas,r=Math.max(window.devicePixelRatio||1,1),c=0,h=0,f=s.width/r,p=s.height/r,x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.setAttributeNS(null,"width",s.width),x.setAttributeNS(null,"height",s.height),this._fromData(t,function(ie,le,he){var ge=document.createElement("path");if(!isNaN(ie.control1.x)&&!isNaN(ie.control1.y)&&!isNaN(ie.control2.x)&&!isNaN(ie.control2.y)){var Me="M "+ie.startPoint.x.toFixed(3)+","+ie.startPoint.y.toFixed(3)+" "+("C "+ie.control1.x.toFixed(3)+","+ie.control1.y.toFixed(3)+" ")+(ie.control2.x.toFixed(3)+","+ie.control2.y.toFixed(3)+" ")+(ie.endPoint.x.toFixed(3)+","+ie.endPoint.y.toFixed(3));ge.setAttribute("d",Me),ge.setAttribute("stroke-width",(le.end*2.25).toFixed(3)),ge.setAttribute("stroke",he),ge.setAttribute("fill","none"),ge.setAttribute("stroke-linecap","round"),x.appendChild(ge)}},function(ie){var le=document.createElement("circle"),he=typeof i.dotSize=="function"?i.dotSize():i.dotSize;le.setAttribute("r",he),le.setAttribute("cx",ie.x),le.setAttribute("cy",ie.y),le.setAttribute("fill",ie.color),x.appendChild(le)});var y="data:image/svg+xml;base64,",_='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+c+" "+h+" "+f+" "+p+'"')+(' width="'+f+'"')+(' height="'+p+'"')+">",T=x.innerHTML;if(T===void 0){var C=document.createElement("dummy"),L=x.childNodes;C.innerHTML="";for(var X=0;X<L.length;X+=1)C.appendChild(L[X].cloneNode(!0));T=C.innerHTML}var ee="</svg>",G=_+T+ee;return y+btoa(G)};gt.prototype.fromData=function(i){var t=this;this.clear(),this._fromData(i,function(s,r){return t._drawCurve(s,r.start,r.end)},function(s){return t._drawDot(s)}),this._data=i};gt.prototype.toData=function(){return this._data};var hu={exports:{}},hS=hu.exports,S0;function dS(){return S0||(S0=1,(function(i,t){(function(s,r){i.exports=r()})(hS,function(){return(function(s){function r(h){if(c[h])return c[h].exports;var f=c[h]={exports:{},id:h,loaded:!1};return s[h].call(f.exports,f,f.exports,r),f.loaded=!0,f.exports}var c={};return r.m=s,r.c=c,r.p="",r(0)})([function(s,r){function c(y){var _=y.getContext("2d"),T=y.width,C=y.height,L=_.getImageData(0,0,T,C).data,X=p(!0,T,C,L),ee=p(!1,T,C,L),G=x(!0,T,C,L),ie=x(!1,T,C,L),le=ie-G+1,he=ee-X+1,ge=_.getImageData(G,X,le,he);return y.width=le,y.height=he,_.clearRect(0,0,le,he),_.putImageData(ge,0,0),y}function h(y,_,T,C){return{red:C[4*(T*_+y)],green:C[4*(T*_+y)+1],blue:C[4*(T*_+y)+2],alpha:C[4*(T*_+y)+3]}}function f(y,_,T,C){return h(y,_,T,C).alpha}function p(y,_,T,C){for(var L=y?1:-1,X=y?0:T-1,ee=X;y?ee<T:ee>-1;ee+=L)for(var G=0;G<_;G++)if(f(G,ee,_,C))return ee;return null}function x(y,_,T,C){for(var L=y?1:-1,X=y?0:_-1,ee=X;y?ee<_:ee>-1;ee+=L)for(var G=0;G<T;G++)if(f(ee,G,_,C))return ee;return null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=c}])})})(hu)),hu.exports}var fS=dS();const mS=Cu(fS);var gS=["canvasProps","clearOnResize"],Ku=(function(i){nS(s,i);var t=rS(s);function s(){var r;tS(this,s);for(var c=arguments.length,h=new Array(c),f=0;f<c;f++)h[f]=arguments[f];return r=t.call.apply(t,[this].concat(h)),r.staticThis=r.constructor,r._sigPad=null,r._canvas=null,r.setRef=function(p){r._canvas=p,r._canvas===null&&(r._sigPad=null)},r._excludeOurProps=function(){var p=r.props;p.canvasProps,p.clearOnResize;var x=Wj(p,gS);return x},r.componentDidMount=function(){var p=r.getCanvas();r._sigPad=new gt(p,r._excludeOurProps()),r._resizeCanvas(),r.on()},r.componentWillUnmount=function(){r.off()},r.componentDidUpdate=function(){Object.assign(r._sigPad,r._excludeOurProps())},r.getCanvas=function(){if(r._canvas===null)throw r.staticThis.refNullError;return r._canvas},r.getTrimmedCanvas=function(){var p=r.getCanvas(),x=document.createElement("canvas");return x.width=p.width,x.height=p.height,x.getContext("2d").drawImage(p,0,0),mS(x)},r.getSignaturePad=function(){if(r._sigPad===null)throw r.staticThis.refNullError;return r._sigPad},r._checkClearOnResize=function(){r.props.clearOnResize&&r._resizeCanvas()},r._resizeCanvas=function(){var p,x,y=(p=r.props.canvasProps)!==null&&p!==void 0?p:{},_=y.width,T=y.height;if(!(typeof _<"u"&&typeof T<"u")){var C=r.getCanvas(),L=Math.max((x=window.devicePixelRatio)!==null&&x!==void 0?x:1,1);typeof _>"u"&&(C.width=C.offsetWidth*L),typeof T>"u"&&(C.height=C.offsetHeight*L),C.getContext("2d").scale(L,L),r.clear()}},r.render=function(){var p=r.props.canvasProps;return Pf.createElement("canvas",kf({ref:r.setRef},p))},r.on=function(){return window.addEventListener("resize",r._checkClearOnResize),r.getSignaturePad().on()},r.off=function(){return window.removeEventListener("resize",r._checkClearOnResize),r.getSignaturePad().off()},r.clear=function(){return r.getSignaturePad().clear()},r.isEmpty=function(){return r.getSignaturePad().isEmpty()},r.fromDataURL=function(p,x){return r.getSignaturePad().fromDataURL(p,x)},r.toDataURL=function(p,x){return r.getSignaturePad().toDataURL(p,x)},r.fromData=function(p){return r.getSignaturePad().fromData(p)},r.toData=function(){return r.getSignaturePad().toData()},r}return eS(s)})(W.Component);Ku.propTypes={velocityFilterWeight:Mn.number,minWidth:Mn.number,maxWidth:Mn.number,minDistance:Mn.number,dotSize:Mn.oneOfType([Mn.number,Mn.func]),penColor:Mn.string,throttle:Mn.number,onEnd:Mn.func,onBegin:Mn.func,canvasProps:Mn.object,clearOnResize:Mn.bool};Ku.defaultProps={clearOnResize:!0};Ku.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const A0=({data:i})=>{if(!i)return null;const t=i.qualifications||{},s="border-b border-r border-black",r=({checked:h,label:f})=>o.jsxs("div",{className:"flex items-center text-[11px] leading-tight mb-0.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 border border-black flex items-center justify-center mr-1.5 text-[10px] shrink-0 font-sans",children:h?"":""}),o.jsx("span",{className:"whitespace-nowrap",children:f})]}),c=["","","","","","",""];return o.jsx("div",{className:"font-serif text-black leading-tight bg-white relative",children:o.jsxs("div",{className:"print-page p-[12mm] flex flex-col box-border",style:{height:"297mm",width:"210mm"},children:[o.jsx("h1",{className:"text-3xl font-bold text-center mb-6 tracking-[0.5em] shrink-0",children:""}),o.jsxs("div",{className:"w-full border-2 border-black flex-1 flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[64px]",children:[o.jsxs("div",{className:`w-24 ${s} bg-gray-50 flex flex-col justify-center items-center p-1`,children:[o.jsx("span",{className:"text-[10px] mb-1",children:""}),o.jsx("span",{className:"font-bold text-base",children:""})]}),o.jsxs("div",{className:`w-64 ${s} p-1 flex flex-col justify-center`,children:[o.jsxs("div",{className:"text-xs text-center w-full mb-0.5",children:[i.furiganaSei,"",i.furiganaMei]}),o.jsxs("div",{className:"text-xl text-center font-bold",children:[i.nameSei,"",i.nameMei]})]}),o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold text-sm text-center`,children:""}),o.jsx("div",{className:`flex-1 ${s} flex items-center justify-center p-1`,children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsxs("div",{className:"flex flex-col text-[10px] leading-none mr-1 gap-1",children:[o.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${i.birthEra==="Showa"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""}),o.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${i.birthEra==="Heisei"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""})]}),o.jsx("span",{className:"text-lg font-bold",children:i.birthYear}),o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"text-lg font-bold",children:i.birthMonth}),o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"text-lg font-bold",children:i.birthDay}),o.jsx("span",{className:"text-xs",children:""})]})}),o.jsxs("div",{className:"w-24 border-b border-black flex flex-col items-center justify-center p-1",children:[o.jsxs("div",{className:"flex gap-3 mb-1 text-sm",children:[o.jsx("span",{className:i.gender==="Male"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""}),o.jsx("span",{children:""}),o.jsx("span",{className:i.gender==="Female"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""})]}),o.jsxs("div",{className:"flex items-end gap-0.5",children:[o.jsx("span",{className:"text-lg font-bold",children:i.age}),o.jsx("span",{className:"text-[10px]",children:""})]})]})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsx("div",{className:`flex-1 ${s} px-3 flex items-center`,children:o.jsx("span",{className:"text-base font-bold",children:i.company})}),o.jsxs("div",{className:`w-32 ${s} flex items-center justify-center p-1 text-[11px]`,children:["( ",o.jsx("span",{className:"w-6 text-center text-base font-bold",children:i.subcontractorRank})," ) "]}),o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsxs("div",{className:"w-40 border-b border-black flex items-center justify-center p-1",children:[o.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:i.experienceYears}),o.jsx("span",{className:"text-xs mr-2",children:""}),o.jsx("span",{className:"text-lg font-bold w-5 text-right mr-1",children:i.experienceMonths}),o.jsx("span",{className:"text-xs",children:""})]})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsx("div",{className:"flex-1 border-b border-black px-2 flex items-center text-sm",children:o.jsxs("div",{className:"flex flex-nowrap items-center w-full",children:[c.map((h,f)=>o.jsx(Pf.Fragment,{children:o.jsxs("div",{className:"flex items-center whitespace-nowrap",children:[o.jsx("span",{className:`px-1 ${i.jobType===h?"border border-black rounded-full font-bold":""}`,children:h}),f<c.length-1&&o.jsx("span",{className:"text-gray-400 mx-1",children:""})]})},h)),o.jsxs("div",{className:"flex items-center whitespace-nowrap ml-1",children:[o.jsx("span",{children:""}),o.jsx("span",{className:"inline-block min-w-[100px] text-center px-1 italic",children:i.jobType===""?i.jobTypeOther:""}),o.jsx("span",{children:""})]})]})})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsx("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:i.address}),o.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[o.jsx("span",{children:""}),o.jsx("span",{children:""})]}),o.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:i.phone})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm text-center leading-none`,children:""}),o.jsx("div",{className:`w-12 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-[10px]`,children:""}),o.jsxs("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:[i.emergencyContactSei,"",i.emergencyContactMei]}),o.jsx("div",{className:`w-12 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-[10px]`,children:""}),o.jsx("div",{className:`w-20 ${s} flex items-center justify-center text-sm`,children:i.emergencyContactRelation}),o.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[o.jsx("span",{children:""}),o.jsx("span",{children:""})]}),o.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:i.emergencyContactPhone})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsxs("div",{className:`flex-1 ${s} p-1 flex items-center justify-center gap-2`,children:[o.jsx("span",{className:"text-lg font-bold w-6 text-center",children:i.bloodType}),o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"ml-4 text-xs font-bold",children:"  "}),o.jsx("span",{className:"w-10 text-center border-b border-black text-lg font-bold",children:i.bloodTypeRh==="Plus"?"+":i.bloodTypeRh==="Minus"?"-":""}),o.jsx("span",{className:"text-xs font-bold",children:" "})]}),o.jsx("div",{className:`w-32 ${s} bg-gray-50 flex items-center justify-center font-bold text-[10px] p-1 text-center leading-tight`,children:""}),o.jsxs("div",{className:"w-64 border-b border-black p-1 flex items-center justify-center",children:[o.jsx("span",{className:"text-xs mr-1",children:""}),o.jsx("span",{className:"text-lg font-bold w-8 text-right mr-1",children:i.healthCheckYear}),o.jsx("span",{className:"text-xs mr-2",children:""}),o.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:i.healthCheckMonth}),o.jsx("span",{className:"text-xs mr-2",children:""}),o.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:i.healthCheckDay}),o.jsx("span",{className:"text-xs",children:""})]})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[o.jsx("div",{className:`w-1/2 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsxs("div",{className:"w-1/2 border-b border-black flex items-center justify-center gap-10 p-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:i.kentaikyo==="Joined"&&o.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),o.jsx("span",{className:`text-sm ${i.kentaikyo==="Joined"?"font-bold":""}`,children:""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:i.kentaikyo==="NotJoined"&&o.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),o.jsx("span",{className:`text-sm ${i.kentaikyo==="NotJoined"?"font-bold":""}`,children:""})]})]})]}),o.jsxs("div",{className:"p-4 flex-1 flex flex-col border-b border-black",children:[o.jsx("div",{className:"font-bold text-xs mb-3",children:""}),o.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2",children:[o.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx(r,{checked:t.vehicle_leveling,label:""}),o.jsx(r,{checked:t.vehicle_demolition,label:""}),o.jsx(r,{checked:t.mobile_crane,label:""}),o.jsx(r,{checked:t.slinging,label:""}),o.jsx(r,{checked:t.gas_welding,label:""}),o.jsx(r,{checked:t.earth_retaining,label:""}),o.jsx(r,{checked:t.excavation,label:""}),o.jsx(r,{checked:t.scaffolding,label:""}),o.jsx(r,{checked:t.formwork,label:""}),o.jsx(r,{checked:t.oxygen_deficiency,label:""}),o.jsx(r,{checked:t.rough_terrain,label:""})]})]}),o.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2 pl-2",children:[o.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx(r,{checked:t.arc_welding,label:""}),o.jsx(r,{checked:t.grinding_wheel,label:""}),o.jsx(r,{checked:t.low_voltage,label:""}),o.jsx(r,{checked:t.roller,label:""}),o.jsx(r,{checked:t.asbestos,label:""})]})]}),o.jsxs("div",{className:"flex flex-col pl-2",children:[o.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),o.jsx(r,{checked:t.foreman,label:""}),o.jsxs("div",{className:"mt-auto pt-2",children:[o.jsx("div",{className:"text-[9px] font-bold mb-1 text-gray-600",children:""}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText1}),o.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText2}),o.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText3})]})]})]})]})]}),o.jsxs("div",{className:"p-3 bg-gray-50 flex-1 flex flex-col justify-between shrink-0 h-[180px]",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-sm mb-2 flex items-center",children:[o.jsx("span",{className:"w-1 h-4 bg-black mr-2"}),""]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-4 pl-2 text-[9px] leading-tight mb-2",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]})]}),o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]})]})]})]}),o.jsxs("div",{className:"flex justify-between items-end px-1 mt-auto",children:[o.jsxs("div",{className:"w-[50%] space-y-2",children:[o.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[o.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5",children:""}),o.jsx("span",{className:"flex-1 text-[10px] font-bold truncate px-1",children:i.project})]}),o.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[o.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5",children:""}),o.jsx("span",{className:"flex-1 text-sm font-bold text-center",children:i.director}),o.jsx("span",{className:"text-[9px] ml-1 mb-0.5",children:""})]})]}),o.jsxs("div",{className:"w-[45%] flex flex-col items-end",children:[o.jsxs("div",{className:"flex justify-center items-baseline mb-1 text-[10px] font-bold w-full",children:[o.jsx("span",{className:"mr-1",children:""}),o.jsx("span",{className:"text-base w-6 text-center border-b border-black mx-0.5",children:i.pledgeDateYear}),o.jsx("span",{children:""}),o.jsx("span",{className:"text-base w-5 text-center border-b border-black mx-0.5",children:i.pledgeDateMonth}),o.jsx("span",{children:""}),o.jsx("span",{className:"text-base w-5 text-center border-b border-black mx-0.5",children:i.pledgeDateDay}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex w-full items-end border-2 border-black bg-white h-[50px] relative",children:[o.jsx("span",{className:"absolute left-1 top-1 text-[9px] font-bold text-gray-400",children:""}),o.jsx("div",{className:"flex-1 h-full flex items-center justify-center p-1",children:i.signatureDataUrl?o.jsx("img",{src:i.signatureDataUrl,alt:"Signature",className:"max-h-full max-w-full object-contain"}):o.jsx("span",{className:"text-gray-200 text-[9px]",children:"()"})})]})]})]})]})]})]})})},C0={projects:"",companies:"",bosses:"",jobTypes:"",roles:"",workplaces:""},pS={BASIC:["projects","companies","bosses","workplaces"],SURVEY:["jobTypes","roles"]},yS=["","","","","","",""],xS=["A","B","O","AB"],vS=[{value:"Plus",label:""},{value:"Minus",label:"-"},{value:"Unknown",label:""}],bS=({isOpen:i,projectName:t,onConfirm:s,onCancel:r})=>{const[c,h]=W.useState("");return i?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in border-2 border-red-500",children:[o.jsx("h3",{className:"text-lg font-bold mb-4 text-red-600",children:" : "}),o.jsxs("p",{className:"mb-4 text-sm text-gray-700",children:["",o.jsx("span",{className:"font-bold",children:t}),"",o.jsx("br",{}),o.jsx("br",{}),o.jsx("span",{className:"font-bold text-red-600",children:""}),o.jsx("br",{}),""]}),o.jsx("p",{className:"mb-2 text-sm font-bold",children:" (4043)"}),o.jsx("input",{type:"password",className:"w-full border p-2 rounded mb-4",value:c,onChange:f=>h(f.target.value)}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 rounded text-sm",children:""}),o.jsx("button",{onClick:()=>{c==="4043"?s():alert("")},className:"px-4 py-2 bg-red-600 text-white rounded text-sm font-bold",children:""})]})]})}):null},Rb=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:""}),o.jsx("p",{className:"mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 rounded",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"OK"})]})]})}):null,_S=({masterData:i,onUpdate:t})=>{const[s,r]=W.useState("BASIC"),[c,h]=W.useState(null),[f,p]=W.useState(""),[x,y]=W.useState({isOpen:!1,index:-1,item:""}),[_,T]=W.useState(null),C=async()=>{if(!c||!f.trim())return;const G=i[c]||[];if(G.includes(f.trim())){alert("");return}const ie={...i,[c]:[...G,f.trim()]};await t(ie),p("")},L=(G,ie)=>{c==="projects"?T({index:G,name:ie}):y({isOpen:!0,index:G,item:ie})},X=async()=>{if(!c)return;const ie=(i[c]||[]).filter((he,ge)=>ge!==x.index),le={...i,[c]:ie};await t(le),y({isOpen:!1,index:-1,item:""})},ee=async()=>{if(!c||!_)return;const ie=(i[c]||[]).filter((he,ge)=>ge!==_.index),le={...i,[c]:ie};try{await xo(_.name),await t(le),T(null)}catch(he){console.error(he),alert("")}};return o.jsxs("div",{className:"mb-8 border rounded-lg bg-white shadow-sm overflow-hidden",children:[o.jsx("div",{className:"bg-gray-100 p-3 border-b flex justify-between items-center",children:o.jsxs("h3",{className:"font-bold text-gray-700 flex items-center gap-2",children:[o.jsx("i",{className:"fa-solid fa-database"})," "]})}),o.jsxs("div",{className:"flex border-b",children:[o.jsx("button",{onClick:()=>{r("BASIC"),h(null)},className:`flex-1 py-3 text-sm font-bold ${s==="BASIC"?"bg-white border-b-2 border-blue-600 text-blue-600":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,children:""}),o.jsx("button",{onClick:()=>{r("SURVEY"),h(null)},className:`flex-1 py-3 text-sm font-bold ${s==="SURVEY"?"bg-white border-b-2 border-purple-600 text-purple-600":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,children:""})]}),o.jsx("div",{className:"p-4 bg-gray-50 min-h-[300px]",children:c?o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx("button",{onClick:()=>h(null),className:"text-sm text-blue-600 hover:underline",children:"< "}),o.jsxs("h4",{className:"font-bold text-lg",children:[C0[c]," "]})]}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"text",placeholder:"",className:"flex-1 border rounded px-3 py-2",value:f,onChange:G=>p(G.target.value)}),o.jsx("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:""})]}),o.jsx("div",{className:"bg-white border rounded max-h-60 overflow-y-auto",children:(i[c]||[]).length===0?o.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:""}):o.jsx("ul",{className:"divide-y",children:(i[c]||[]).map((G,ie)=>o.jsxs("li",{className:"p-2 flex justify-between items-center hover:bg-gray-50",children:[o.jsx("span",{children:G}),o.jsx("button",{onClick:()=>L(ie,G),className:"text-red-500 hover:text-red-700 px-2",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},ie))})})]}):o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:pS[s].map(G=>o.jsxs("button",{onClick:()=>h(G),className:"bg-white p-4 rounded border shadow-sm hover:shadow-md hover:bg-blue-50 transition text-left",children:[o.jsx("div",{className:"font-bold text-gray-700",children:C0[G]||G}),o.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[(i[G]||[]).length," "]})]},G))})}),o.jsx(Rb,{isOpen:x.isOpen,message:`${x.item}`,onConfirm:X,onCancel:()=>y({isOpen:!1,index:-1,item:""})}),_&&o.jsx(bS,{isOpen:!!_,projectName:_.name,onConfirm:ee,onCancel:()=>T(null)})]})},NS=({initialData:i,initialDraftId:t,onBackToMenu:s})=>{var oe,fe,re,ve;const r=M=>{const _e={...N1};if(!M)return _e;const Se={..._e,...M};if(M.name&&(!M.nameSei||!M.nameMei)){const at=M.name.trim().split(/[\s]+/);at.length>=2?(Se.nameSei=at[0],Se.nameMei=at.slice(1).join(" ")):(Se.nameSei=M.name,Se.nameMei="")}if(M.furigana&&(!M.furiganaSei||!M.furiganaMei)){const at=M.furigana.trim().split(/[\s]+/);at.length>=2?(Se.furiganaSei=at[0],Se.furiganaMei=at.slice(1).join(" ")):(Se.furiganaSei=M.furigana,Se.furiganaMei="")}if(M.emergencyContactName&&(!M.emergencyContactNameSei||!M.emergencyContactNameMei)){const at=M.emergencyContactName.trim().split(/[\s]+/);at.length>=2?(Se.emergencyContactNameSei=at[0],Se.emergencyContactNameMei=at.slice(1).join(" ")):(Se.emergencyContactNameSei=M.emergencyContactName,Se.emergencyContactNameMei="")}return Se.qualifications={..._e.qualifications||{},...M.qualifications||{}},Se},[c,h]=W.useState(1),[f,p]=W.useState(r(i)),[x,y]=W.useState(t||null),[_,T]=W.useState(_t),[C,L]=W.useState(!1),[X,ee]=W.useState(!1),[G,ie]=W.useState(.7),[le,he]=W.useState(!1),[ge,Me]=W.useState(!1),[De,R]=W.useState(!1),[j,S]=W.useState({}),O=W.useRef(null),[A,k]=W.useState(!1);W.useEffect(()=>{(async()=>{try{const _e=await Qu();T(_e)}catch(_e){console.error(_e)}})()},[]),W.useEffect(()=>{const M=()=>{const _e=window.innerWidth;_e<640?ie(.45):_e<1024?ie(.6):ie(.8)};return window.addEventListener("resize",M),M(),()=>window.removeEventListener("resize",M)},[]);const w=M=>{if(p(_e=>({..._e,...M})),Me(!0),Object.keys(j).length>0){const _e={...j};Object.keys(M).forEach(Se=>delete _e[Se]),S(_e)}},Te=async M=>{try{await ls(M),T(M)}catch(_e){console.error(_e),alert("")}},Ce=()=>{const M={};return f.project||(M.project=!0),f.director||(M.director=!0),f.company||(M.company=!0),f.workplace||(M.workplace=!0),f.nameSei||(M.nameSei=!0),f.nameMei||(M.nameMei=!0),f.furiganaSei||(M.furiganaSei=!0),f.furiganaMei||(M.furiganaMei=!0),f.birthDate||(M.birthDate=!0),f.bloodType||(M.bloodType=!0),f.address||(M.address=!0),f.phone||(M.phone=!0),f.emergencyContactNameSei||(M.emergencyContactNameSei=!0),f.emergencyContactNameMei||(M.emergencyContactNameMei=!0),f.emergencyContactRelation||(M.emergencyContactRelation=!0),f.emergencyContactPhone||(M.emergencyContactPhone=!0),f.role||(M.role=!0),f.jobType||(M.jobType=!0),f.experienceYears||(M.experienceYears=!0),f.healthCheckDate||(M.healthCheckDate=!0),f.bloodPressureHigh||(M.bloodPressureHigh=!0),f.bloodPressureLow||(M.bloodPressureLow=!0),S(M),Object.keys(M).length===0},F=()=>{c===1?Ce()?(h(2),window.scrollTo(0,0)):(alert(""),window.scrollTo(0,0)):c===2&&(h(3),window.scrollTo(0,0))},K=()=>{c>1&&h(c-1)},de=async()=>{if(!f.project){alert("");return}try{he(!0);const M=await Za("NEWCOMER_SURVEY",f,x);y(M),Me(!1),alert("")}catch(M){console.error(M),alert("")}finally{he(!1)}},je=async()=>{if(!f.project){alert("");return}try{he(!0);const M=await Za("NEWCOMER_SURVEY",f,x);y(M),Me(!1);const _e=document.title,Se=(f.nameSei||"")+(f.nameMei||""),at=f.company||"";document.title=`_${at}_${Se||""}`,window.print(),setTimeout(()=>{document.title=_e},500)}catch(M){console.error(M),alert("")}finally{he(!1)}},Pe=()=>{ge?R(!0):s()},V=()=>{if(O.current){const M=O.current.getTrimmedCanvas().toDataURL("image/png");w({signatureDataUrl:M}),k(!1)}},$=M=>j[M]?"border-red-500 bg-red-50":"border-gray-300";return o.jsxs("div",{className:"min-h-screen bg-gray-100 pb-20 font-sans text-gray-800",children:[o.jsxs("div",{className:"bg-white shadow-sm sticky top-0 z-40 px-4 py-3 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:Pe,className:"text-gray-500 hover:text-gray-700",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsx("h2",{className:"font-bold text-lg hidden sm:block",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>L(!C),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]}),o.jsxs("button",{onClick:()=>ee(!0),className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200",children:[o.jsx("i",{className:"fa-solid fa-eye mr-1"}),""]}),o.jsxs("button",{onClick:de,disabled:le,className:"px-3 py-1.5 bg-green-600 text-white rounded text-sm hover:bg-green-700 disabled:opacity-50",children:[o.jsx("i",{className:"fa-solid fa-floppy-disk mr-1"}),""]})]})]}),o.jsxs("div",{className:"max-w-3xl mx-auto p-4",children:[C&&o.jsx(_S,{masterData:_,onUpdate:Te}),o.jsxs("div",{className:"mb-6 flex items-center justify-between px-4",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${c>=1?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:"1"}),o.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=2?"bg-blue-600":"bg-gray-300"}`}),o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${c>=2?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:"2"}),o.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=3?"bg-blue-600":"bg-gray-300"}`}),o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${c>=3?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:"3"})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c===1&&o.jsxs("div",{className:"animate-fade-in space-y-6",children:[o.jsx("h3",{className:"text-xl font-bold border-b pb-2 mb-4",children:""}),o.jsx("p",{className:"text-xs text-red-500 mb-2",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsxs("select",{value:f.project,onChange:M=>w({project:M.target.value}),className:`w-full h-11 border rounded px-3 bg-white appearance-none ${$("project")}`,children:[o.jsx("option",{value:"",children:""}),(_.projects||[]).map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsxs("select",{value:f.workplace,onChange:M=>w({workplace:M.target.value}),className:`w-full h-11 border rounded px-3 bg-white appearance-none ${$("workplace")}`,children:[o.jsx("option",{value:"",children:""}),(_.workplaces||[]).map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsxs("select",{value:f.director,onChange:M=>w({director:M.target.value}),className:`w-full h-11 border rounded px-3 bg-white appearance-none ${$("director")}`,children:[o.jsx("option",{value:"",children:""}),(_.bosses||[]).map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsxs("select",{value:f.company,onChange:M=>w({company:M.target.value}),className:`w-full h-11 border rounded px-3 bg-white appearance-none ${$("company")}`,children:[o.jsx("option",{value:"",children:""}),(_.companies||[]).map(M=>o.jsx("option",{value:M,children:M},M))]})]})]}),o.jsxs("div",{className:"border-t pt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2 flex gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" () ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsx("input",{type:"text",value:f.nameSei||"",onChange:M=>w({nameSei:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("nameSei")}`,placeholder:": "})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" () ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsx("input",{type:"text",value:f.nameMei||"",onChange:M=>w({nameMei:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("nameMei")}`,placeholder:": "})]})]}),o.jsxs("div",{className:"md:col-span-2 flex gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" () ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsx("input",{type:"text",value:f.furiganaSei||"",onChange:M=>w({furiganaSei:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("furiganaSei")}`,placeholder:": "})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" () ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsx("input",{type:"text",value:f.furiganaMei||"",onChange:M=>w({furiganaMei:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("furiganaMei")}`,placeholder:": "})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsx("input",{type:"date",value:f.birthDate,onChange:M=>w({birthDate:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("birthDate")}`})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{value:f.bloodType,onChange:M=>w({bloodType:M.target.value}),className:`flex-1 h-11 border rounded px-3 bg-white appearance-none ${$("bloodType")}`,children:[o.jsx("option",{value:"",children:""}),xS.map(M=>o.jsx("option",{value:M,children:M},M))]}),o.jsx("select",{value:f.bloodTypeRh,onChange:M=>w({bloodTypeRh:M.target.value}),className:"flex-1 h-11 border rounded px-3 bg-white appearance-none",children:vS.map(M=>o.jsx("option",{value:M.value,children:M.label},M.value))})]})]})]}),o.jsxs("div",{className:"border-t pt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsx("input",{type:"text",value:f.address,onChange:M=>w({address:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("address")}`})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsx("input",{type:"tel",value:f.phone,onChange:M=>w({phone:M.target.value}),className:`w-1/2 h-11 border rounded px-3 ${$("phone")}`,placeholder:"090-0000-0000"})]})]}),o.jsxs("div",{className:"border-t pt-4 bg-red-50 p-4 rounded border border-red-100",children:[o.jsxs("h4",{className:"font-bold text-red-800 mb-2 text-sm",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{className:"flex gap-3 max-w-lg",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" ()"}),o.jsx("input",{type:"text",value:f.emergencyContactNameSei||"",onChange:M=>w({emergencyContactNameSei:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("emergencyContactNameSei")}`})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:" ()"}),o.jsx("input",{type:"text",value:f.emergencyContactNameMei||"",onChange:M=>w({emergencyContactNameMei:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("emergencyContactNameMei")}`})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 max-w-lg",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:""}),o.jsx("input",{type:"text",value:f.emergencyContactRelation,onChange:M=>w({emergencyContactRelation:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("emergencyContactRelation")}`,placeholder:": "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:""}),o.jsx("input",{type:"tel",value:f.emergencyContactPhone,onChange:M=>w({emergencyContactPhone:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("emergencyContactPhone")}`})]})]})]})]}),o.jsxs("div",{className:"border-t pt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsxs("select",{value:f.role,onChange:M=>w({role:M.target.value}),className:`w-full h-11 border rounded px-3 bg-white appearance-none ${$("role")}`,children:[o.jsx("option",{value:"",children:""}),(_.roles||[]).map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" () ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsx("input",{type:"number",value:f.experienceYears,onChange:M=>w({experienceYears:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("experienceYears")}`})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsx("div",{className:`grid grid-cols-2 sm:grid-cols-4 gap-2 border p-2 rounded ${j.jobType?"border-red-500 bg-red-50":"border-gray-200"}`,children:yS.map(M=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"jobType",value:M,checked:f.jobType===M,onChange:_e=>w({jobType:_e.target.value}),className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm",children:M})]},M))}),f.jobType===""&&o.jsx("input",{type:"text",value:f.jobTypeOther||"",onChange:M=>w({jobTypeOther:M.target.value}),placeholder:"",className:"mt-2 w-full h-11 border rounded px-3"})]}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[" ",o.jsx("span",{className:"text-red-500 text-xs",children:""})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 bg-blue-50 p-4 rounded border border-blue-100",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:""}),o.jsx("input",{type:"month",value:f.healthCheckDate,onChange:M=>w({healthCheckDate:M.target.value}),className:`w-full h-11 border rounded px-3 bg-white ${$("healthCheckDate")}`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:" ()"}),o.jsx("input",{type:"number",value:f.bloodPressureHigh,onChange:M=>w({bloodPressureHigh:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("bloodPressureHigh")}`})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:" ()"}),o.jsx("input",{type:"number",value:f.bloodPressureLow,onChange:M=>w({bloodPressureLow:M.target.value}),className:`w-full h-11 border rounded px-3 ${$("bloodPressureLow")}`})]})]})]})]}),c===2&&o.jsxs("div",{className:"animate-fade-in space-y-6",children:[o.jsx("h3",{className:"text-xl font-bold border-b pb-2 mb-4",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[o.jsx("h4",{className:"font-bold text-sm mb-2 text-center bg-gray-200 py-1",children:""}),o.jsx("div",{className:"space-y-2",children:[{k:"vehicle_leveling",l:"()"},{k:"vehicle_excavation",l:"()"},{k:"vehicle_foundation",l:"()"},{k:"aerial_work_platform",l:"(10m)"},{k:"crane_5t_plus",l:""},{k:"forklift",l:""},{k:"slinging",l:""},{k:"scaffolding_chief",l:""},{k:"excavation_chief",l:""},{k:"steel_frame_chief",l:""},{k:"concrete_chief",l:""},{k:"formwork_chief",l:""},{k:"wooden_building_chief",l:""}].map(M=>{var _e;return o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:((_e=f.qualifications)==null?void 0:_e[M.k])||!1,onChange:Se=>w({qualifications:{...f.qualifications,[M.k]:Se.target.checked}}),className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm",children:M.l})]},M.k)})})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[o.jsx("h4",{className:"font-bold text-sm mb-2 text-center bg-gray-200 py-1",children:""}),o.jsx("div",{className:"space-y-2",children:[{k:"arc_welding",l:""},{k:"grindstone",l:""},{k:"winch",l:"()"},{k:"low_voltage",l:""},{k:"dust_mask",l:""},{k:"vibration_tools",l:""},{k:"circular_saw",l:""},{k:"aerial_work_under_10m",l:"(10m)"},{k:"roller",l:"()"},{k:"full_harness",l:""}].map(M=>{var _e;return o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:((_e=f.qualifications)==null?void 0:_e[M.k])||!1,onChange:Se=>w({qualifications:{...f.qualifications,[M.k]:Se.target.checked}}),className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm",children:M.l})]},M.k)})})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded flex flex-col",children:[o.jsx("h4",{className:"font-bold text-sm mb-2 text-center bg-gray-200 py-1",children:""}),o.jsx("div",{className:"space-y-2 mb-4",children:o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:((oe=f.qualifications)==null?void 0:oe.foreman)||!1,onChange:M=>w({qualifications:{...f.qualifications,foreman:M.target.checked}}),className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm",children:""})]})}),o.jsxs("div",{className:"mt-auto",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 mb-1",children:""}),o.jsx("input",{type:"text",className:"w-full border rounded mb-2 px-2 py-1 text-sm",value:((fe=f.qualifications)==null?void 0:fe.otherText1)||"",onChange:M=>w({qualifications:{...f.qualifications,otherText1:M.target.value}})}),o.jsx("input",{type:"text",className:"w-full border rounded mb-2 px-2 py-1 text-sm",value:((re=f.qualifications)==null?void 0:re.otherText2)||"",onChange:M=>w({qualifications:{...f.qualifications,otherText2:M.target.value}})}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1 text-sm",value:((ve=f.qualifications)==null?void 0:ve.otherText3)||"",onChange:M=>w({qualifications:{...f.qualifications,otherText3:M.target.value}})})]})]})]})]}),c===3&&o.jsxs("div",{className:"animate-fade-in space-y-6",children:[o.jsx("h3",{className:"text-xl font-bold border-b pb-2 mb-4",children:""}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded border text-sm leading-relaxed text-gray-700 mb-6",children:[o.jsx("p",{children:""}),o.jsx("p",{className:"mt-2",children:""}),o.jsx("p",{className:"mt-2",children:""})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"mb-2 font-bold",children:""}),f.signatureDataUrl?o.jsxs("div",{className:"inline-block relative group",children:[o.jsx("img",{src:f.signatureDataUrl,alt:"Signature",className:"border rounded h-32 mx-auto"}),o.jsx("button",{onClick:()=>w({signatureDataUrl:void 0}),className:"absolute top-0 right-0 bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center -mt-2 -mr-2 shadow-md hover:bg-red-600",children:o.jsx("i",{className:"fa-solid fa-xmark text-xs"})})]}):o.jsxs("button",{onClick:()=>k(!0),className:"w-full max-w-sm py-8 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:bg-gray-50 hover:border-blue-500 hover:text-blue-500 transition flex flex-col items-center justify-center gap-2",children:[o.jsx("i",{className:"fa-solid fa-pen-nib text-2xl"}),o.jsx("span",{children:""})]})]})]})]}),o.jsxs("div",{className:"mt-6 flex justify-between",children:[o.jsx("button",{onClick:K,disabled:c===1,className:"px-6 py-3 rounded-lg bg-gray-200 text-gray-700 disabled:opacity-50 hover:bg-gray-300 transition font-bold",children:""}),c<3?o.jsxs("button",{onClick:F,className:"px-8 py-3 rounded-lg bg-blue-600 text-white hover:bg-blue-700 shadow-lg transition font-bold flex items-center gap-2",children:[" ",o.jsx("i",{className:"fa-solid fa-arrow-right"})]}):o.jsx("button",{onClick:je,disabled:le,className:"px-8 py-3 rounded-lg bg-green-600 text-white hover:bg-green-700 shadow-lg transition font-bold flex items-center gap-2 disabled:opacity-70",children:le?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa-solid fa-print"})," "]})})]})]}),A&&o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 text-white",children:[o.jsx("h3",{className:"font-bold",children:""}),o.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-white",children:o.jsx("i",{className:"fa-solid fa-xmark text-2xl"})})]}),o.jsxs("div",{className:"flex-1 bg-white p-4 flex items-center justify-center overflow-hidden relative",children:[o.jsx(Ku,{ref:O,penColor:"black",canvasProps:{className:"border-2 border-gray-300 rounded w-full h-full"}}),o.jsx("div",{className:"absolute bottom-4 left-4 text-gray-400 text-xs pointer-events-none",children:""})]}),o.jsxs("div",{className:"p-4 bg-gray-800 flex justify-between",children:[o.jsx("button",{onClick:()=>{var M;return(M=O.current)==null?void 0:M.clear()},className:"px-6 py-3 text-white border border-gray-600 rounded",children:""}),o.jsx("button",{onClick:V,className:"px-8 py-3 bg-blue-600 text-white rounded font-bold",children:""})]})]}),X&&o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[o.jsxs("div",{className:"p-4 flex justify-between items-center text-white bg-gray-800",children:[o.jsxs("h3",{className:"font-bold text-lg",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"}),""]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:je,className:"px-4 py-2 bg-green-600 rounded font-bold hover:bg-green-700",children:""}),o.jsx("button",{onClick:()=>ee(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500",children:o.jsx("i",{className:"fa-solid fa-xmark"})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-8 flex justify-center bg-gray-700",children:o.jsx("div",{className:"bg-white shadow-xl origin-top transition-transform",style:{transform:`scale(${G})`},children:o.jsx(A0,{data:f})})})]}),o.jsx(Rb,{isOpen:De,message:"",onConfirm:s,onCancel:()=>R(!1)}),o.jsx("div",{className:"hidden print:block",children:o.jsx(A0,{data:f})})]})},ES=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,wS=()=>{const[i,t]=W.useState("HOME"),[s,r]=W.useState(!1),[c,h]=W.useState(null),[f,p]=W.useState([]),[x,y]=W.useState(null),[_,T]=W.useState(!1),[C,L]=W.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[X,ee]=W.useState(void 0),[G,ie]=W.useState(null);W.useEffect(()=>{s&&((async()=>{T(!0);try{const j=await Vf();p(j)}catch(j){console.error("Failed to load drafts",j),alert("")}finally{T(!1)}})(),y(null))},[s]);const le=R=>{h(R),r(!0)},he=()=>{c&&(ee(void 0),ie(null),t(c),r(!1))},ge=R=>{ee(R.data),ie(R.id),t(R.type),r(!1)},Me=R=>{L({isOpen:!0,message:"",onConfirm:async()=>{try{await Vj(R);const j=await Vf();p(j),x&&c&&j.filter(O=>O.type===c&&(O.data.project||"")===x).length===0&&y(null),L(S=>({...S,isOpen:!1}))}catch(j){console.error("Failed to delete draft",j),alert("")}}})};if(i==="SAFETY_TRAINING")return o.jsx(qj,{initialData:X,initialDraftId:G,onBackToMenu:()=>t("HOME")});if(i==="DISASTER_COUNCIL")return o.jsx($j,{initialData:X,initialDraftId:G,onBackToMenu:()=>t("HOME")});if(i==="SAFETY_PLAN")return o.jsx(Zj,{initialData:X,initialDraftId:G,onBackToMenu:()=>t("HOME")});if(i==="NEWCOMER_SURVEY")return o.jsx(NS,{initialData:X,initialDraftId:G,onBackToMenu:()=>t("HOME")});const De=()=>{if(!s||!c)return null;const R=f.filter(S=>S.type===c),j={};return R.forEach(S=>{const O=S.data.project||"";j[O]||(j[O]=[]),j[O].push(S)}),o.jsx("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full overflow-hidden flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"bg-gray-800 text-white p-4 flex justify-between items-center shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[x&&o.jsx("button",{onClick:()=>y(null),className:"mr-1 text-gray-300 hover:text-white",children:o.jsx("i",{className:"fa-solid fa-arrow-left"})}),o.jsx("h3",{className:"font-bold text-lg",children:x?"":""})]}),o.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-white",children:o.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:_?o.jsxs("div",{className:"flex justify-center items-center py-10",children:[o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-3 text-gray-500",children:"..."})]}):x?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded border text-sm text-gray-600 mb-4",children:[o.jsx("i",{className:"fa-solid fa-building mr-2"}),x]}),o.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-2 uppercase tracking-wide",children:""}),o.jsx("div",{className:"space-y-3",children:j[x].map(S=>o.jsxs("div",{className:"border rounded-lg p-3 hover:bg-blue-50 transition-colors flex justify-between items-center group bg-white shadow-sm",children:[o.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>ge(S),children:[o.jsxs("div",{className:"font-bold text-blue-800 text-lg",children:[o.jsx("i",{className:"fa-regular fa-calendar-check mr-2"}),S.type==="SAFETY_TRAINING"?`${S.data.month}`:S.type==="DISASTER_COUNCIL"?`${S.data.count}`:S.type==="NEWCOMER_SURVEY"?S.data.name||"":`${S.data.month} `]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1 pl-7",children:[": ",new Date(S.lastModified).toLocaleString("ja-JP")]})]}),o.jsx("button",{onClick:O=>{O.stopPropagation(),Me(S.id)},className:"ml-3 p-3 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-50 transition-colors",title:"",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},S.id))})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-8",children:o.jsxs("button",{onClick:he,className:"w-full py-4 bg-blue-600 text-white rounded-lg font-bold shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition-transform transform hover:scale-[1.01]",children:[o.jsx("i",{className:"fa-solid fa-file-circle-plus text-xl"}),""]})}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-3 uppercase tracking-wide",children:""}),Object.keys(j).length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 bg-gray-50 rounded-lg",children:""}):o.jsx("div",{className:"space-y-3",children:Object.entries(j).map(([S,O])=>o.jsxs("button",{onClick:()=>y(S),className:"w-full text-left border rounded-lg p-4 hover:bg-blue-50 transition-colors flex justify-between items-center group shadow-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-gray-800 text-sm mb-1",children:S}),o.jsxs("div",{className:"text-xs text-gray-500",children:[o.jsx("i",{className:"fa-regular fa-folder-open mr-1"}),O.length," "]})]}),o.jsx("i",{className:"fa-solid fa-chevron-right text-gray-300 group-hover:text-blue-400"})]},S))})]})]})})]})})};return o.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-gray-800",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-6 shadow-md text-center",children:[o.jsxs("h1",{className:"text-2xl font-bold tracking-wide",children:[o.jsx("i",{className:"fa-solid fa-building-shield mr-2"}),""]}),o.jsx("p",{className:"text-slate-400 text-sm mt-2",children:""})]}),o.jsxs("main",{className:"max-w-4xl mx-auto p-6 mt-8",children:[o.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-700 border-l-4 border-slate-800 pl-3",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("button",{onClick:()=>le("SAFETY_TRAINING"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-blue-600 group",children:[o.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-helmet-safety text-4xl text-blue-600"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),o.jsxs("button",{onClick:()=>le("DISASTER_COUNCIL"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-green-600 group",children:[o.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-green-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-users-rectangle text-4xl text-green-600"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),o.jsxs("button",{onClick:()=>le("SAFETY_PLAN"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-orange-500 group",children:[o.jsx("div",{className:"w-20 h-20 bg-orange-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-orange-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-clipboard-list text-4xl text-orange-500"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),o.jsxs("button",{onClick:()=>le("NEWCOMER_SURVEY"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-purple-600 group",children:[o.jsx("div",{className:"w-20 h-20 bg-purple-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-person-circle-question text-4xl text-purple-600"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]})]})]}),o.jsx("footer",{className:"mt-12 text-center text-gray-400 text-sm pb-8",children:" 2024 Safety Reporting App"}),De(),o.jsx(ES,{isOpen:C.isOpen,message:C.message,onConfirm:C.onConfirm,onCancel:()=>L(R=>({...R,isOpen:!1}))})]})},Db=document.getElementById("root");if(!Db)throw new Error("Could not find root element to mount to");const TS=x1.createRoot(Db);TS.render(o.jsx(Pf.StrictMode,{children:o.jsx(wS,{})}));
