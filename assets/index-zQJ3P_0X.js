(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function s(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(c){if(c.ep)return;c.ep=!0;const h=s(c);fetch(c.href,h)}})();function o0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Pf={exports:{}},Fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function L_(){if(Vy)return Fl;Vy=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(r,c,h){var m=null;if(h!==void 0&&(m=""+h),c.key!==void 0&&(m=""+c.key),"key"in c){h={};for(var p in c)p!=="key"&&(h[p]=c[p])}else h=c;return c=h.ref,{$$typeof:i,type:r,key:m,ref:c!==void 0?c:null,props:h}}return Fl.Fragment=t,Fl.jsx=s,Fl.jsxs=s,Fl}var Oy;function P_(){return Oy||(Oy=1,Pf.exports=L_()),Pf.exports}var o=P_(),Bf={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function B_(){if(ky)return Me;ky=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.iterator;function F(E){return E===null||typeof E!="object"?null:(E=M&&E[M]||E["@@iterator"],typeof E=="function"?E:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,K={};function pe(E,k,le){this.props=E,this.context=k,this.refs=K,this.updater=le||W}pe.prototype.isReactComponent={},pe.prototype.setState=function(E,k){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,k,"setState")},pe.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function ge(){}ge.prototype=pe.prototype;function de(E,k,le){this.props=E,this.context=k,this.refs=K,this.updater=le||W}var xe=de.prototype=new ge;xe.constructor=de,ie(xe,pe.prototype),xe.isPureReactComponent=!0;var Ie=Array.isArray;function Ne(){}var R={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function S(E,k,le){var ue=le.ref;return{$$typeof:i,type:E,key:k,ref:ue!==void 0?ue:null,props:le}}function V(E,k){return S(E.type,k,E.props)}function w(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function I(E){var k={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(le){return k[le]})}var A=/\/+/g;function Se(E,k){return typeof E=="object"&&E!==null&&E.key!=null?I(""+E.key):k.toString(36)}function Ce(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(Ne,Ne):(E.status="pending",E.then(function(k){E.status==="pending"&&(E.status="fulfilled",E.value=k)},function(k){E.status==="pending"&&(E.status="rejected",E.reason=k)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function H(E,k,le,ue,se){var B=typeof E;(B==="undefined"||B==="boolean")&&(E=null);var oe=!1;if(E===null)oe=!0;else switch(B){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(E.$$typeof){case i:case t:oe=!0;break;case N:return oe=E._init,H(oe(E._payload),k,le,ue,se)}}if(oe)return se=se(E),oe=ue===""?"."+Se(E,0):ue,Ie(se)?(le="",oe!=null&&(le=oe.replace(A,"$&/")+"/"),H(se,k,le,"",function(bt){return bt})):se!=null&&(w(se)&&(se=V(se,le+(se.key==null||E&&E.key===se.key?"":(""+se.key).replace(A,"$&/")+"/")+oe)),k.push(se)),1;oe=0;var be=ue===""?".":ue+":";if(Ie(E))for(var we=0;we<E.length;we++)ue=E[we],B=be+Se(ue,we),oe+=H(ue,k,le,B,se);else if(we=F(E),typeof we=="function")for(E=we.call(E),we=0;!(ue=E.next()).done;)ue=ue.value,B=be+Se(ue,we++),oe+=H(ue,k,le,B,se);else if(B==="object"){if(typeof E.then=="function")return H(Ce(E),k,le,ue,se);throw k=String(E),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return oe}function te(E,k,le){if(E==null)return E;var ue=[],se=0;return H(E,ue,"","",function(B){return k.call(le,B,se++)}),ue}function he(E){if(E._status===-1){var k=E._result;k=k(),k.then(function(le){(E._status===0||E._status===-1)&&(E._status=1,E._result=le)},function(le){(E._status===0||E._status===-1)&&(E._status=2,E._result=le)}),E._status===-1&&(E._status=0,E._result=k)}if(E._status===1)return E._result.default;throw E._result}var re=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},Re={map:te,forEach:function(E,k,le){te(E,function(){k.apply(this,arguments)},le)},count:function(E){var k=0;return te(E,function(){k++}),k},toArray:function(E){return te(E,function(k){return k})||[]},only:function(E){if(!w(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Me.Activity=C,Me.Children=Re,Me.Component=pe,Me.Fragment=s,Me.Profiler=c,Me.PureComponent=de,Me.StrictMode=r,Me.Suspense=b,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Me.__COMPILER_RUNTIME={__proto__:null,c:function(E){return R.H.useMemoCache(E)}},Me.cache=function(E){return function(){return E.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(E,k,le){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var ue=ie({},E.props),se=E.key;if(k!=null)for(B in k.key!==void 0&&(se=""+k.key),k)!j.call(k,B)||B==="key"||B==="__self"||B==="__source"||B==="ref"&&k.ref===void 0||(ue[B]=k[B]);var B=arguments.length-2;if(B===1)ue.children=le;else if(1<B){for(var oe=Array(B),be=0;be<B;be++)oe[be]=arguments[be+2];ue.children=oe}return S(E.type,se,ue)},Me.createContext=function(E){return E={$$typeof:m,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:h,_context:E},E},Me.createElement=function(E,k,le){var ue,se={},B=null;if(k!=null)for(ue in k.key!==void 0&&(B=""+k.key),k)j.call(k,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(se[ue]=k[ue]);var oe=arguments.length-2;if(oe===1)se.children=le;else if(1<oe){for(var be=Array(oe),we=0;we<oe;we++)be[we]=arguments[we+2];se.children=be}if(E&&E.defaultProps)for(ue in oe=E.defaultProps,oe)se[ue]===void 0&&(se[ue]=oe[ue]);return S(E,B,se)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(E){return{$$typeof:p,render:E}},Me.isValidElement=w,Me.lazy=function(E){return{$$typeof:N,_payload:{_status:-1,_result:E},_init:he}},Me.memo=function(E,k){return{$$typeof:x,type:E,compare:k===void 0?null:k}},Me.startTransition=function(E){var k=R.T,le={};R.T=le;try{var ue=E(),se=R.S;se!==null&&se(le,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Ne,re)}catch(B){re(B)}finally{k!==null&&le.types!==null&&(k.types=le.types),R.T=k}},Me.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Me.use=function(E){return R.H.use(E)},Me.useActionState=function(E,k,le){return R.H.useActionState(E,k,le)},Me.useCallback=function(E,k){return R.H.useCallback(E,k)},Me.useContext=function(E){return R.H.useContext(E)},Me.useDebugValue=function(){},Me.useDeferredValue=function(E,k){return R.H.useDeferredValue(E,k)},Me.useEffect=function(E,k){return R.H.useEffect(E,k)},Me.useEffectEvent=function(E){return R.H.useEffectEvent(E)},Me.useId=function(){return R.H.useId()},Me.useImperativeHandle=function(E,k,le){return R.H.useImperativeHandle(E,k,le)},Me.useInsertionEffect=function(E,k){return R.H.useInsertionEffect(E,k)},Me.useLayoutEffect=function(E,k){return R.H.useLayoutEffect(E,k)},Me.useMemo=function(E,k){return R.H.useMemo(E,k)},Me.useOptimistic=function(E,k){return R.H.useOptimistic(E,k)},Me.useReducer=function(E,k,le){return R.H.useReducer(E,k,le)},Me.useRef=function(E){return R.H.useRef(E)},Me.useState=function(E){return R.H.useState(E)},Me.useSyncExternalStore=function(E,k,le){return R.H.useSyncExternalStore(E,k,le)},Me.useTransition=function(){return R.H.useTransition()},Me.version="19.2.4",Me}var zy;function jd(){return zy||(zy=1,Bf.exports=B_()),Bf.exports}var ae=jd();const c0=o0(ae);var qf={exports:{}},Yl={},Hf={exports:{}},Gf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function q_(){return Uy||(Uy=1,(function(i){function t(H,te){var he=H.length;H.push(te);e:for(;0<he;){var re=he-1>>>1,Re=H[re];if(0<c(Re,te))H[re]=te,H[he]=Re,he=re;else break e}}function s(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var te=H[0],he=H.pop();if(he!==te){H[0]=he;e:for(var re=0,Re=H.length,E=Re>>>1;re<E;){var k=2*(re+1)-1,le=H[k],ue=k+1,se=H[ue];if(0>c(le,he))ue<Re&&0>c(se,le)?(H[re]=se,H[ue]=he,re=ue):(H[re]=le,H[k]=he,re=k);else if(ue<Re&&0>c(se,he))H[re]=se,H[ue]=he,re=ue;else break e}}return te}function c(H,te){var he=H.sortIndex-te.sortIndex;return he!==0?he:H.id-te.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;i.unstable_now=function(){return h.now()}}else{var m=Date,p=m.now();i.unstable_now=function(){return m.now()-p}}var b=[],x=[],N=1,C=null,M=3,F=!1,W=!1,ie=!1,K=!1,pe=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;function xe(H){for(var te=s(x);te!==null;){if(te.callback===null)r(x);else if(te.startTime<=H)r(x),te.sortIndex=te.expirationTime,t(b,te);else break;te=s(x)}}function Ie(H){if(ie=!1,xe(H),!W)if(s(b)!==null)W=!0,Ne||(Ne=!0,I());else{var te=s(x);te!==null&&Ce(Ie,te.startTime-H)}}var Ne=!1,R=-1,j=5,S=-1;function V(){return K?!0:!(i.unstable_now()-S<j)}function w(){if(K=!1,Ne){var H=i.unstable_now();S=H;var te=!0;try{e:{W=!1,ie&&(ie=!1,ge(R),R=-1),F=!0;var he=M;try{t:{for(xe(H),C=s(b);C!==null&&!(C.expirationTime>H&&V());){var re=C.callback;if(typeof re=="function"){C.callback=null,M=C.priorityLevel;var Re=re(C.expirationTime<=H);if(H=i.unstable_now(),typeof Re=="function"){C.callback=Re,xe(H),te=!0;break t}C===s(b)&&r(b),xe(H)}else r(b);C=s(b)}if(C!==null)te=!0;else{var E=s(x);E!==null&&Ce(Ie,E.startTime-H),te=!1}}break e}finally{C=null,M=he,F=!1}te=void 0}}finally{te?I():Ne=!1}}}var I;if(typeof de=="function")I=function(){de(w)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Se=A.port2;A.port1.onmessage=w,I=function(){Se.postMessage(null)}}else I=function(){pe(w,0)};function Ce(H,te){R=pe(function(){H(i.unstable_now())},te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_next=function(H){switch(M){case 1:case 2:case 3:var te=3;break;default:te=M}var he=M;M=te;try{return H()}finally{M=he}},i.unstable_requestPaint=function(){K=!0},i.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var he=M;M=H;try{return te()}finally{M=he}},i.unstable_scheduleCallback=function(H,te,he){var re=i.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?re+he:re):he=re,H){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=he+Re,H={id:N++,callback:te,priorityLevel:H,startTime:he,expirationTime:Re,sortIndex:-1},he>re?(H.sortIndex=he,t(x,H),s(b)===null&&H===s(x)&&(ie?(ge(R),R=-1):ie=!0,Ce(Ie,he-re))):(H.sortIndex=Re,t(b,H),W||F||(W=!0,Ne||(Ne=!0,I()))),H},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(H){var te=M;return function(){var he=M;M=te;try{return H.apply(this,arguments)}finally{M=he}}}})(Gf)),Gf}var Ly;function H_(){return Ly||(Ly=1,Hf.exports=q_()),Hf.exports}var Ff={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function G_(){if(Py)return nn;Py=1;var i=jd();function t(b){var x="https://react.dev/errors/"+b;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)x+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+b+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(b,x,N){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:C==null?null:""+C,children:b,containerInfo:x,implementation:N}}var m=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(b,x){if(b==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,nn.createPortal=function(b,x){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return h(b,x,null,N)},nn.flushSync=function(b){var x=m.T,N=r.p;try{if(m.T=null,r.p=2,b)return b()}finally{m.T=x,r.p=N,r.d.f()}},nn.preconnect=function(b,x){typeof b=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(b,x))},nn.prefetchDNS=function(b){typeof b=="string"&&r.d.D(b)},nn.preinit=function(b,x){if(typeof b=="string"&&x&&typeof x.as=="string"){var N=x.as,C=p(N,x.crossOrigin),M=typeof x.integrity=="string"?x.integrity:void 0,F=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;N==="style"?r.d.S(b,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:C,integrity:M,fetchPriority:F}):N==="script"&&r.d.X(b,{crossOrigin:C,integrity:M,fetchPriority:F,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},nn.preinitModule=function(b,x){if(typeof b=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var N=p(x.as,x.crossOrigin);r.d.M(b,{crossOrigin:N,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(b)},nn.preload=function(b,x){if(typeof b=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var N=x.as,C=p(N,x.crossOrigin);r.d.L(b,N,{crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},nn.preloadModule=function(b,x){if(typeof b=="string")if(x){var N=p(x.as,x.crossOrigin);r.d.m(b,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:N,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(b)},nn.requestFormReset=function(b){r.d.r(b)},nn.unstable_batchedUpdates=function(b,x){return b(x)},nn.useFormState=function(b,x,N){return m.H.useFormState(b,x,N)},nn.useFormStatus=function(){return m.H.useHostTransitionStatus()},nn.version="19.2.4",nn}var By;function F_(){if(By)return Ff.exports;By=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Ff.exports=G_(),Ff.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function Y_(){if(qy)return Yl;qy=1;var i=H_(),t=jd(),s=F_();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function m(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function b(e){if(h(e)!==e)throw Error(r(188))}function x(e){var n=e.alternate;if(!n){if(n=h(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,l=n;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return b(f),e;if(d===l)return b(f),n;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var y=!1,_=f.child;_;){if(_===a){y=!0,a=f,l=d;break}if(_===l){y=!0,l=f,a=d;break}_=_.sibling}if(!y){for(_=d.child;_;){if(_===a){y=!0,a=d,l=f;break}if(_===l){y=!0,l=d,a=f;break}_=_.sibling}if(!y)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function N(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=N(e),n!==null)return n;e=e.sibling}return null}var C=Object.assign,M=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),ge=Symbol.for("react.consumer"),de=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=w&&e[w]||e["@@iterator"],typeof e=="function"?e:null)}var A=Symbol.for("react.client.reference");function Se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===A?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ie:return"Fragment";case pe:return"Profiler";case K:return"StrictMode";case Ie:return"Suspense";case Ne:return"SuspenseList";case S:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case W:return"Portal";case de:return e.displayName||"Context";case ge:return(e._context.displayName||"Context")+".Consumer";case xe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return n=e.displayName||null,n!==null?n:Se(e.type)||"Memo";case j:n=e._payload,e=e._init;try{return Se(e(n))}catch{}}return null}var Ce=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},re=[],Re=-1;function E(e){return{current:e}}function k(e){0>Re||(e.current=re[Re],re[Re]=null,Re--)}function le(e,n){Re++,re[Re]=e.current,e.current=n}var ue=E(null),se=E(null),B=E(null),oe=E(null);function be(e,n){switch(le(B,n),le(se,e),le(ue,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?sy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=sy(n),e=ay(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}k(ue),le(ue,e)}function we(){k(ue),k(se),k(B)}function bt(e){e.memoizedState!==null&&le(oe,e);var n=ue.current,a=ay(n,e.type);n!==a&&(le(se,e),le(ue,a))}function _t(e){se.current===e&&(k(ue),k(se)),oe.current===e&&(k(oe),Bl._currentValue=he)}var Yt,un;function ne(e){if(Yt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Yt=n&&n[1]||"",un=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yt+e+un}var G=!1;function _e(e,n){if(!e||G)return"";G=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch($){var q=$}Reflect.construct(e,[],J)}else{try{J.call()}catch($){q=$}e.call(J.prototype)}}else{try{throw Error()}catch($){q=$}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch($){if($&&q&&typeof $.stack=="string")return[$.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],_=d[1];if(y&&_){var D=y.split(`
`),P=_.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===P.length)for(l=D.length-1,f=P.length-1;1<=l&&0<=f&&D[l]!==P[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==P[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==P[f]){var Q=`
`+D[l].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=l&&0<=f);break}}}finally{G=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ne(a):""}function Qe(e,n){switch(e.tag){case 26:case 27:case 5:return ne(e.type);case 16:return ne("Lazy");case 13:return e.child!==n&&n!==null?ne("Suspense Fallback"):ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return _e(e.type,!1);case 11:return _e(e.type.render,!1);case 1:return _e(e.type,!0);case 31:return ne("Activity");default:return""}}function ft(e){try{var n="",a=null;do n+=Qe(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Pe=Object.prototype.hasOwnProperty,Ze=i.unstable_scheduleCallback,Bt=i.unstable_cancelCallback,Xa=i.unstable_shouldYield,_o=i.unstable_requestPaint,ln=i.unstable_now,Za=i.unstable_getCurrentPriorityLevel,Gr=i.unstable_ImmediatePriority,Fr=i.unstable_UserBlockingPriority,na=i.unstable_NormalPriority,qu=i.unstable_LowPriority,Eo=i.unstable_IdlePriority,To=i.log,No=i.unstable_setDisableYieldValue,Fn=null,$t=null;function Dn(e){if(typeof To=="function"&&No(e),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Fn,e)}catch{}}var Et=Math.clz32?Math.clz32:jo,wo=Math.log,ki=Math.LN2;function jo(e){return e>>>=0,e===0?32:31-(wo(e)/ki|0)|0}var is=256,Ja=262144,St=4194304;function rs(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ls(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~d,l!==0?f=rs(l):(y&=_,y!==0?f=rs(y):a||(a=_&~e,a!==0&&(f=rs(a))))):(_=l&~d,_!==0?f=rs(_):y!==0?f=rs(y):a||(a=l&~e,a!==0&&(f=rs(a)))),f===0?0:n!==0&&n!==f&&(n&d)===0&&(d=f&-f,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:f}function Yn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Hu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function So(){var e=St;return St<<=1,(St&62914560)===0&&(St=4194304),e}function os(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Wa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Gu(e,n,a,l,f,d){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,D=e.expirationTimes,P=e.hiddenUpdates;for(a=y&~a;0<a;){var Q=31-Et(a),J=1<<Q;_[Q]=0,D[Q]=-1;var q=P[Q];if(q!==null)for(P[Q]=null,Q=0;Q<q.length;Q++){var $=q[Q];$!==null&&($.lane&=-536870913)}a&=~J}l!==0&&ei(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~n))}function ei(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-Et(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Yr(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-Et(a),f=1<<l;f&n|e[l]&n&&(e[l]|=n),a&=~f}}function $r(e,n){var a=n&-n;return a=(a&42)!==0?1:ti(a),(a&(e.suspendedLanes|n))!==0?0:a}function ti(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ms(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ao(){var e=te.p;return e!==0?e:(e=window.event,e===void 0?32:Sy(e.type))}function $n(e,n){var a=te.p;try{return te.p=e,n()}finally{te.p=a}}var Qn=Math.random().toString(36).slice(2),At="__reactFiber$"+Qn,qt="__reactProps$"+Qn,cs="__reactContainer$"+Qn,zi="__reactEvents$"+Qn,Fu="__reactListeners$"+Qn,Co="__reactHandles$"+Qn,Ro="__reactResources$"+Qn,us="__reactMarker$"+Qn;function Ui(e){delete e[At],delete e[qt],delete e[zi],delete e[Fu],delete e[Co]}function hs(e){var n=e[At];if(n)return n;for(var a=e.parentNode;a;){if(n=a[cs]||a[At]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=hy(e);e!==null;){if(a=e[At])return a;e=hy(e)}return n}e=a,a=e.parentNode}return null}function In(e){if(e=e[At]||e[cs]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function _n(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function fs(e){var n=e[Ro];return n||(n=e[Ro]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ct(e){e[us]=!0}var Qr=new Set,Kr={};function ds(e,n){ms(e,n),ms(e+"Capture",n)}function ms(e,n){for(Kr[e]=n,e=0;e<n.length;e++)Qr.add(n[e])}var Xr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zr={},Jr={};function Do(e){return Pe.call(Jr,e)?!0:Pe.call(Zr,e)?!1:Xr.test(e)?Jr[e]=!0:(Zr[e]=!0,!1)}function Li(e,n,a){if(Do(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function En(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Rt(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function Ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sa(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Wr(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function tt(e){if(!e._valueTracker){var n=sa(e)?"checked":"value";e._valueTracker=Wr(e,n,""+e[n])}}function ni(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=sa(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function gs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var si=/[\n"\\]/g;function hn(e){return e.replace(si,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Pi(e,n,a,l,f,d,y,_){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ht(n)):e.value!==""+Ht(n)&&(e.value=""+Ht(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?el(e,y,Ht(n)):a!=null?el(e,y,Ht(a)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Ht(_):e.removeAttribute("name")}function Io(e,n,a,l,f,d,y,_){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){tt(e);return}a=a!=null?""+Ht(a):"",n=n!=null?""+Ht(n):a,_||n===e.value||(e.value=n),e.defaultValue=n}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),tt(e)}function el(e,n,a){n==="number"&&gs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function aa(e,n,a,l){if(e=e.options,n){n={};for(var f=0;f<a.length;f++)n["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=n.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ht(a),n=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function Mo(e,n,a){if(n!=null&&(n=""+Ht(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Ht(a):""}function ia(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ce(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Ht(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),tt(e)}function fn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tl(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||Vo.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function nl(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in n)l=n[f],n.hasOwnProperty(f)&&a[f]!==l&&tl(e,f,l)}else for(var d in n)n.hasOwnProperty(d)&&tl(e,d,n[d])}function Bi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ra=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qi(e){return ra.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Kn(){}var sl=null;function Mn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var la=null,ps=null;function ai(e){var n=In(e);if(n&&(e=n.stateNode)){var a=e[qt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Pi(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var f=l[qt]||null;if(!f)throw Error(r(90));Pi(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&ni(l)}break e;case"textarea":Mo(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&aa(e,!!a.multiple,n,!1)}}}var Hi=!1;function oa(e,n,a){if(Hi)return e(n,a);Hi=!0;try{var l=e(n);return l}finally{if(Hi=!1,(la!==null||ps!==null)&&(Ac(),la&&(n=la,e=ps,ps=la=null,ai(n),e)))for(n=0;n<e.length;n++)ai(e[n])}}function Xn(e,n){var a=e.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=!1;if(Vn)try{var at={};Object.defineProperty(at,"passive",{get:function(){ii=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{ii=!1}var ys=null,al=null,ri=null;function il(){if(ri)return ri;var e,n=al,a=n.length,l,f="value"in ys?ys.value:ys.textContent,d=f.length;for(e=0;e<a&&n[e]===f[e];e++);var y=a-e;for(l=1;l<=y&&n[a-l]===f[d-l];l++);return ri=f.slice(e,1<l?1-l:void 0)}function li(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Vs(){return!0}function Zn(){return!1}function Qt(e){function n(a,l,f,d,y){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(d):d[_]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Vs:Zn,this.isPropagationStopped=Zn,this}return C(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vs)},persist:function(){},isPersistent:Vs}),n}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=Qt(Os),ca=C({},Os,{view:0,detail:0}),rl=Qt(ca),ua,Gi,vs,Fi=C({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vs&&(vs&&e.type==="mousemove"?(ua=e.screenX-vs.screenX,Gi=e.screenY-vs.screenY):Gi=ua=0,vs=e),ua)},movementY:function(e){return"movementY"in e?e.movementY:Gi}}),ll=Qt(Fi),oi=C({},Fi,{dataTransfer:0}),ko=Qt(oi),zo=C({},ca,{relatedTarget:0}),ci=Qt(zo),ol=C({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),Uo=Qt(ol),Yi=C({},Os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lo=Qt(Yi),Po=C({},Os,{data:0}),bs=Qt(Po),Bo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ho={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Go(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Ho[e])?!!n[e]:!1}function ha(){return Go}var on=C({},ca,{key:function(e){if(e.key){var n=Bo[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fo=Qt(on),Yo=C({},Fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ks=Qt(Yo),u=C({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),g=Qt(u),v=C({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=Qt(v),U=C({},Fi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Qt(U),ce=C({},Os,{newState:0,oldState:0}),Oe=Qt(ce),Tt=[9,13,27,32],Je=Vn&&"CompositionEvent"in window,gt=null;Vn&&"documentMode"in document&&(gt=document.documentMode);var On=Vn&&"TextEvent"in window&&!gt,_s=Vn&&(!Je||gt&&8<gt&&11>=gt),Jn=" ",Wn=!1;function ui(e,n){switch(e){case"keyup":return Tt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $i(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qi=!1;function cb(e,n){switch(e){case"compositionend":return $i(n);case"keypress":return n.which!==32?null:(Wn=!0,Jn);case"textInput":return e=n.data,e===Jn&&Wn?null:e;default:return null}}function ub(e,n){if(Qi)return e==="compositionend"||!Je&&ui(e,n)?(e=il(),ri=al=ys=null,Qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _s&&n.locale!=="ko"?null:n.data;default:return null}}var hb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!hb[e.type]:n==="textarea"}function gm(e,n,a,l){la?ps?ps.push(l):ps=[l]:la=l,n=Oc(n,"onChange"),0<n.length&&(a=new xs("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var cl=null,ul=null;function fb(e){Zp(e,0)}function $o(e){var n=_n(e);if(ni(n))return e}function pm(e,n){if(e==="change")return n}var ym=!1;if(Vn){var Yu;if(Vn){var $u="oninput"in document;if(!$u){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),$u=typeof xm.oninput=="function"}Yu=$u}else Yu=!1;ym=Yu&&(!document.documentMode||9<document.documentMode)}function vm(){cl&&(cl.detachEvent("onpropertychange",bm),ul=cl=null)}function bm(e){if(e.propertyName==="value"&&$o(ul)){var n=[];gm(n,ul,e,Mn(e)),oa(fb,n)}}function db(e,n,a){e==="focusin"?(vm(),cl=n,ul=a,cl.attachEvent("onpropertychange",bm)):e==="focusout"&&vm()}function mb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $o(ul)}function gb(e,n){if(e==="click")return $o(n)}function pb(e,n){if(e==="input"||e==="change")return $o(n)}function yb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Tn=typeof Object.is=="function"?Object.is:yb;function hl(e,n){if(Tn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Pe.call(n,f)||!Tn(e[f],n[f]))return!1}return!0}function _m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Em(e,n){var a=_m(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_m(a)}}function Tm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Tm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Nm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=gs(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=gs(e.document)}return n}function Qu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var xb=Vn&&"documentMode"in document&&11>=document.documentMode,Ki=null,Ku=null,fl=null,Xu=!1;function wm(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Xu||Ki==null||Ki!==gs(l)||(l=Ki,"selectionStart"in l&&Qu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),fl&&hl(fl,l)||(fl=l,l=Oc(Ku,"onSelect"),0<l.length&&(n=new xs("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Ki)))}function hi(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Xi={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},Zu={},jm={};Vn&&(jm=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function fi(e){if(Zu[e])return Zu[e];if(!Xi[e])return e;var n=Xi[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in jm)return Zu[e]=n[a];return e}var Sm=fi("animationend"),Am=fi("animationiteration"),Cm=fi("animationstart"),vb=fi("transitionrun"),bb=fi("transitionstart"),_b=fi("transitioncancel"),Rm=fi("transitionend"),Dm=new Map,Ju="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ju.push("scrollEnd");function es(e,n){Dm.set(e,n),ds(n,[e])}var Qo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},kn=[],Zi=0,Wu=0;function Ko(){for(var e=Zi,n=Wu=Zi=0;n<e;){var a=kn[n];kn[n++]=null;var l=kn[n];kn[n++]=null;var f=kn[n];kn[n++]=null;var d=kn[n];if(kn[n++]=null,l!==null&&f!==null){var y=l.pending;y===null?f.next=f:(f.next=y.next,y.next=f),l.pending=f}d!==0&&Im(a,f,d)}}function Xo(e,n,a,l){kn[Zi++]=e,kn[Zi++]=n,kn[Zi++]=a,kn[Zi++]=l,Wu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function eh(e,n,a,l){return Xo(e,n,a,l),Zo(e)}function di(e,n){return Xo(e,null,null,n),Zo(e)}function Im(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&n!==null&&(f=31-Et(a),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[n]:l.push(n),n.lane=a|536870912),d):null}function Zo(e){if(50<Vl)throw Vl=0,uf=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ji={};function Eb(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(e,n,a,l){return new Eb(e,n,a,l)}function th(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zs(e,n){var a=e.alternate;return a===null?(a=Nn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Mm(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Jo(e,n,a,l,f,d){var y=0;if(l=e,typeof e=="function")th(e)&&(y=1);else if(typeof e=="string")y=S_(e,a,ue.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case S:return e=Nn(31,a,n,f),e.elementType=S,e.lanes=d,e;case ie:return mi(a.children,f,d,n);case K:y=8,f|=24;break;case pe:return e=Nn(12,a,n,f|2),e.elementType=pe,e.lanes=d,e;case Ie:return e=Nn(13,a,n,f),e.elementType=Ie,e.lanes=d,e;case Ne:return e=Nn(19,a,n,f),e.elementType=Ne,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case de:y=10;break e;case ge:y=9;break e;case xe:y=11;break e;case R:y=14;break e;case j:y=16,l=null;break e}y=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=Nn(y,a,n,f),n.elementType=e,n.type=l,n.lanes=d,n}function mi(e,n,a,l){return e=Nn(7,e,l,n),e.lanes=a,e}function nh(e,n,a){return e=Nn(6,e,null,n),e.lanes=a,e}function Vm(e){var n=Nn(18,null,null,0);return n.stateNode=e,n}function sh(e,n,a){return n=Nn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Om=new WeakMap;function zn(e,n){if(typeof e=="object"&&e!==null){var a=Om.get(e);return a!==void 0?a:(n={value:e,source:n,stack:ft(n)},Om.set(e,n),n)}return{value:e,source:n,stack:ft(n)}}var Wi=[],er=0,Wo=null,dl=0,Un=[],Ln=0,fa=null,Es=1,Ts="";function Us(e,n){Wi[er++]=dl,Wi[er++]=Wo,Wo=e,dl=n}function km(e,n,a){Un[Ln++]=Es,Un[Ln++]=Ts,Un[Ln++]=fa,fa=e;var l=Es;e=Ts;var f=32-Et(l)-1;l&=~(1<<f),a+=1;var d=32-Et(n)+f;if(30<d){var y=f-f%5;d=(l&(1<<y)-1).toString(32),l>>=y,f-=y,Es=1<<32-Et(n)+f|a<<f|l,Ts=d+e}else Es=1<<d|a<<f|l,Ts=e}function ah(e){e.return!==null&&(Us(e,1),km(e,1,0))}function ih(e){for(;e===Wo;)Wo=Wi[--er],Wi[er]=null,dl=Wi[--er],Wi[er]=null;for(;e===fa;)fa=Un[--Ln],Un[Ln]=null,Ts=Un[--Ln],Un[Ln]=null,Es=Un[--Ln],Un[Ln]=null}function zm(e,n){Un[Ln++]=Es,Un[Ln++]=Ts,Un[Ln++]=fa,Es=n.id,Ts=n.overflow,fa=e}var Kt=null,dt=null,Fe=!1,da=null,Pn=!1,rh=Error(r(519));function ma(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ml(zn(n,e)),rh}function Um(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[At]=e,n[qt]=l,a){case"dialog":Le("cancel",n),Le("close",n);break;case"iframe":case"object":case"embed":Le("load",n);break;case"video":case"audio":for(a=0;a<kl.length;a++)Le(kl[a],n);break;case"source":Le("error",n);break;case"img":case"image":case"link":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"input":Le("invalid",n),Io(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Le("invalid",n);break;case"textarea":Le("invalid",n),ia(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||ty(n.textContent,a)?(l.popover!=null&&(Le("beforetoggle",n),Le("toggle",n)),l.onScroll!=null&&Le("scroll",n),l.onScrollEnd!=null&&Le("scrollend",n),l.onClick!=null&&(n.onclick=Kn),n=!0):n=!1,n||ma(e,!0)}function Lm(e){for(Kt=e.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Pn=!1;return;case 27:case 3:Pn=!0;return;default:Kt=Kt.return}}function tr(e){if(e!==Kt)return!1;if(!Fe)return Lm(e),Fe=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||wf(e.type,e.memoizedProps)),a=!a),a&&dt&&ma(e),Lm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));dt=uy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));dt=uy(e)}else n===27?(n=dt,Aa(e.type)?(e=Rf,Rf=null,dt=e):dt=n):dt=Kt?qn(e.stateNode.nextSibling):null;return!0}function gi(){dt=Kt=null,Fe=!1}function lh(){var e=da;return e!==null&&(pn===null?pn=e:pn.push.apply(pn,e),da=null),e}function ml(e){da===null?da=[e]:da.push(e)}var oh=E(null),pi=null,Ls=null;function ga(e,n,a){le(oh,n._currentValue),n._currentValue=a}function Ps(e){e._currentValue=oh.current,k(oh)}function ch(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function uh(e,n,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var y=f.child;d=d.firstContext;e:for(;d!==null;){var _=d;d=f;for(var D=0;D<n.length;D++)if(_.context===n[D]){d.lanes|=a,_=d.alternate,_!==null&&(_.lanes|=a),ch(d.return,a,e),l||(y=null);break e}d=_.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(r(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),ch(y,a,e),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===e){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function nr(e,n,a,l){e=null;for(var f=n,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var _=f.type;Tn(f.pendingProps.value,y.value)||(e!==null?e.push(_):e=[_])}}else if(f===oe.current){if(y=f.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Bl):e=[Bl])}f=f.return}e!==null&&uh(n,e,a,l),n.flags|=262144}function ec(e){for(e=e.firstContext;e!==null;){if(!Tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function yi(e){pi=e,Ls=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xt(e){return Pm(pi,e)}function tc(e,n){return pi===null&&yi(e),Pm(e,n)}function Pm(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Ls===null){if(e===null)throw Error(r(308));Ls=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ls=Ls.next=n;return a}var Tb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Nb=i.unstable_scheduleCallback,wb=i.unstable_NormalPriority,Dt={$$typeof:de,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hh(){return{controller:new Tb,data:new Map,refCount:0}}function gl(e){e.refCount--,e.refCount===0&&Nb(wb,function(){e.controller.abort()})}var pl=null,fh=0,sr=0,ar=null;function jb(e,n){if(pl===null){var a=pl=[];fh=0,sr=pf(),ar={status:"pending",value:void 0,then:function(l){a.push(l)}}}return fh++,n.then(Bm,Bm),n}function Bm(){if(--fh===0&&pl!==null){ar!==null&&(ar.status="fulfilled");var e=pl;pl=null,sr=0,ar=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Sb(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var f=0;f<a.length;f++)(0,a[f])(n)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var qm=H.S;H.S=function(e,n){wp=ln(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&jb(e,n),qm!==null&&qm(e,n)};var xi=E(null);function dh(){var e=xi.current;return e!==null?e:ot.pooledCache}function nc(e,n){n===null?le(xi,xi.current):le(xi,n.pool)}function Hm(){var e=dh();return e===null?null:{parent:Dt._currentValue,pool:e}}var ir=Error(r(460)),mh=Error(r(474)),sc=Error(r(542)),ac={then:function(){}};function Gm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Fm(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Kn,Kn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,$m(e),e;default:if(typeof n.status=="string")n.then(Kn,Kn);else{if(e=ot,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=l}},function(l){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,$m(e),e}throw bi=n,ir}}function vi(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(bi=a,ir):a}}var bi=null;function Ym(){if(bi===null)throw Error(r(459));var e=bi;return bi=null,e}function $m(e){if(e===ir||e===sc)throw Error(r(483))}var rr=null,yl=0;function ic(e){var n=yl;return yl+=1,rr===null&&(rr=[]),Fm(rr,e,n)}function xl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function rc(e,n){throw n.$$typeof===M?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Qm(e){function n(z,O){if(e){var L=z.deletions;L===null?(z.deletions=[O],z.flags|=16):L.push(O)}}function a(z,O){if(!e)return null;for(;O!==null;)n(z,O),O=O.sibling;return null}function l(z){for(var O=new Map;z!==null;)z.key!==null?O.set(z.key,z):O.set(z.index,z),z=z.sibling;return O}function f(z,O){return z=zs(z,O),z.index=0,z.sibling=null,z}function d(z,O,L){return z.index=L,e?(L=z.alternate,L!==null?(L=L.index,L<O?(z.flags|=67108866,O):L):(z.flags|=67108866,O)):(z.flags|=1048576,O)}function y(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function _(z,O,L,X){return O===null||O.tag!==6?(O=nh(L,z.mode,X),O.return=z,O):(O=f(O,L),O.return=z,O)}function D(z,O,L,X){var Ee=L.type;return Ee===ie?Q(z,O,L.props.children,X,L.key):O!==null&&(O.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===j&&vi(Ee)===O.type)?(O=f(O,L.props),xl(O,L),O.return=z,O):(O=Jo(L.type,L.key,L.props,null,z.mode,X),xl(O,L),O.return=z,O)}function P(z,O,L,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==L.containerInfo||O.stateNode.implementation!==L.implementation?(O=sh(L,z.mode,X),O.return=z,O):(O=f(O,L.children||[]),O.return=z,O)}function Q(z,O,L,X,Ee){return O===null||O.tag!==7?(O=mi(L,z.mode,X,Ee),O.return=z,O):(O=f(O,L),O.return=z,O)}function J(z,O,L){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=nh(""+O,z.mode,L),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case F:return L=Jo(O.type,O.key,O.props,null,z.mode,L),xl(L,O),L.return=z,L;case W:return O=sh(O,z.mode,L),O.return=z,O;case j:return O=vi(O),J(z,O,L)}if(Ce(O)||I(O))return O=mi(O,z.mode,L,null),O.return=z,O;if(typeof O.then=="function")return J(z,ic(O),L);if(O.$$typeof===de)return J(z,tc(z,O),L);rc(z,O)}return null}function q(z,O,L,X){var Ee=O!==null?O.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return Ee!==null?null:_(z,O,""+L,X);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case F:return L.key===Ee?D(z,O,L,X):null;case W:return L.key===Ee?P(z,O,L,X):null;case j:return L=vi(L),q(z,O,L,X)}if(Ce(L)||I(L))return Ee!==null?null:Q(z,O,L,X,null);if(typeof L.then=="function")return q(z,O,ic(L),X);if(L.$$typeof===de)return q(z,O,tc(z,L),X);rc(z,L)}return null}function $(z,O,L,X,Ee){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return z=z.get(L)||null,_(O,z,""+X,Ee);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case F:return z=z.get(X.key===null?L:X.key)||null,D(O,z,X,Ee);case W:return z=z.get(X.key===null?L:X.key)||null,P(O,z,X,Ee);case j:return X=vi(X),$(z,O,L,X,Ee)}if(Ce(X)||I(X))return z=z.get(L)||null,Q(O,z,X,Ee,null);if(typeof X.then=="function")return $(z,O,L,ic(X),Ee);if(X.$$typeof===de)return $(z,O,L,tc(O,X),Ee);rc(O,X)}return null}function ye(z,O,L,X){for(var Ee=null,Ke=null,ve=O,ze=O=0,qe=null;ve!==null&&ze<L.length;ze++){ve.index>ze?(qe=ve,ve=null):qe=ve.sibling;var Xe=q(z,ve,L[ze],X);if(Xe===null){ve===null&&(ve=qe);break}e&&ve&&Xe.alternate===null&&n(z,ve),O=d(Xe,O,ze),Ke===null?Ee=Xe:Ke.sibling=Xe,Ke=Xe,ve=qe}if(ze===L.length)return a(z,ve),Fe&&Us(z,ze),Ee;if(ve===null){for(;ze<L.length;ze++)ve=J(z,L[ze],X),ve!==null&&(O=d(ve,O,ze),Ke===null?Ee=ve:Ke.sibling=ve,Ke=ve);return Fe&&Us(z,ze),Ee}for(ve=l(ve);ze<L.length;ze++)qe=$(ve,z,ze,L[ze],X),qe!==null&&(e&&qe.alternate!==null&&ve.delete(qe.key===null?ze:qe.key),O=d(qe,O,ze),Ke===null?Ee=qe:Ke.sibling=qe,Ke=qe);return e&&ve.forEach(function(Ma){return n(z,Ma)}),Fe&&Us(z,ze),Ee}function je(z,O,L,X){if(L==null)throw Error(r(151));for(var Ee=null,Ke=null,ve=O,ze=O=0,qe=null,Xe=L.next();ve!==null&&!Xe.done;ze++,Xe=L.next()){ve.index>ze?(qe=ve,ve=null):qe=ve.sibling;var Ma=q(z,ve,Xe.value,X);if(Ma===null){ve===null&&(ve=qe);break}e&&ve&&Ma.alternate===null&&n(z,ve),O=d(Ma,O,ze),Ke===null?Ee=Ma:Ke.sibling=Ma,Ke=Ma,ve=qe}if(Xe.done)return a(z,ve),Fe&&Us(z,ze),Ee;if(ve===null){for(;!Xe.done;ze++,Xe=L.next())Xe=J(z,Xe.value,X),Xe!==null&&(O=d(Xe,O,ze),Ke===null?Ee=Xe:Ke.sibling=Xe,Ke=Xe);return Fe&&Us(z,ze),Ee}for(ve=l(ve);!Xe.done;ze++,Xe=L.next())Xe=$(ve,z,ze,Xe.value,X),Xe!==null&&(e&&Xe.alternate!==null&&ve.delete(Xe.key===null?ze:Xe.key),O=d(Xe,O,ze),Ke===null?Ee=Xe:Ke.sibling=Xe,Ke=Xe);return e&&ve.forEach(function(U_){return n(z,U_)}),Fe&&Us(z,ze),Ee}function lt(z,O,L,X){if(typeof L=="object"&&L!==null&&L.type===ie&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case F:e:{for(var Ee=L.key;O!==null;){if(O.key===Ee){if(Ee=L.type,Ee===ie){if(O.tag===7){a(z,O.sibling),X=f(O,L.props.children),X.return=z,z=X;break e}}else if(O.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===j&&vi(Ee)===O.type){a(z,O.sibling),X=f(O,L.props),xl(X,L),X.return=z,z=X;break e}a(z,O);break}else n(z,O);O=O.sibling}L.type===ie?(X=mi(L.props.children,z.mode,X,L.key),X.return=z,z=X):(X=Jo(L.type,L.key,L.props,null,z.mode,X),xl(X,L),X.return=z,z=X)}return y(z);case W:e:{for(Ee=L.key;O!==null;){if(O.key===Ee)if(O.tag===4&&O.stateNode.containerInfo===L.containerInfo&&O.stateNode.implementation===L.implementation){a(z,O.sibling),X=f(O,L.children||[]),X.return=z,z=X;break e}else{a(z,O);break}else n(z,O);O=O.sibling}X=sh(L,z.mode,X),X.return=z,z=X}return y(z);case j:return L=vi(L),lt(z,O,L,X)}if(Ce(L))return ye(z,O,L,X);if(I(L)){if(Ee=I(L),typeof Ee!="function")throw Error(r(150));return L=Ee.call(L),je(z,O,L,X)}if(typeof L.then=="function")return lt(z,O,ic(L),X);if(L.$$typeof===de)return lt(z,O,tc(z,L),X);rc(z,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,O!==null&&O.tag===6?(a(z,O.sibling),X=f(O,L),X.return=z,z=X):(a(z,O),X=nh(L,z.mode,X),X.return=z,z=X),y(z)):a(z,O)}return function(z,O,L,X){try{yl=0;var Ee=lt(z,O,L,X);return rr=null,Ee}catch(ve){if(ve===ir||ve===sc)throw ve;var Ke=Nn(29,ve,null,z.mode);return Ke.lanes=X,Ke.return=z,Ke}finally{}}}var _i=Qm(!0),Km=Qm(!1),pa=!1;function gh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ya(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xa(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(We&2)!==0){var f=l.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n,n=Zo(e),Im(e,null,a),n}return Xo(e,l,n,a),Zo(e)}function vl(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Yr(e,a)}}function yh(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?f=d=n:d=d.next=n}else f=d=n;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var xh=!1;function bl(){if(xh){var e=ar;if(e!==null)throw e}}function _l(e,n,a,l){xh=!1;var f=e.updateQueue;pa=!1;var d=f.firstBaseUpdate,y=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var D=_,P=D.next;D.next=null,y===null?d=P:y.next=P,y=D;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,_=Q.lastBaseUpdate,_!==y&&(_===null?Q.firstBaseUpdate=P:_.next=P,Q.lastBaseUpdate=D))}if(d!==null){var J=f.baseState;y=0,Q=P=D=null,_=d;do{var q=_.lane&-536870913,$=q!==_.lane;if($?(Be&q)===q:(l&q)===q){q!==0&&q===sr&&(xh=!0),Q!==null&&(Q=Q.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var ye=e,je=_;q=n;var lt=a;switch(je.tag){case 1:if(ye=je.payload,typeof ye=="function"){J=ye.call(lt,J,q);break e}J=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=je.payload,q=typeof ye=="function"?ye.call(lt,J,q):ye,q==null)break e;J=C({},J,q);break e;case 2:pa=!0}}q=_.callback,q!==null&&(e.flags|=64,$&&(e.flags|=8192),$=f.callbacks,$===null?f.callbacks=[q]:$.push(q))}else $={lane:q,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Q===null?(P=Q=$,D=J):Q=Q.next=$,y|=q;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;$=_,_=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);Q===null&&(D=J),f.baseState=D,f.firstBaseUpdate=P,f.lastBaseUpdate=Q,d===null&&(f.shared.lanes=0),Ta|=y,e.lanes=y,e.memoizedState=J}}function Xm(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function Zm(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Xm(a[e],n)}var lr=E(null),lc=E(0);function Jm(e,n){e=Ks,le(lc,e),le(lr,n),Ks=e|n.baseLanes}function vh(){le(lc,Ks),le(lr,lr.current)}function bh(){Ks=lc.current,k(lr),k(lc)}var wn=E(null),Bn=null;function va(e){var n=e.alternate;le(Nt,Nt.current&1),le(wn,e),Bn===null&&(n===null||lr.current!==null||n.memoizedState!==null)&&(Bn=e)}function _h(e){le(Nt,Nt.current),le(wn,e),Bn===null&&(Bn=e)}function Wm(e){e.tag===22?(le(Nt,Nt.current),le(wn,e),Bn===null&&(Bn=e)):ba()}function ba(){le(Nt,Nt.current),le(wn,wn.current)}function jn(e){k(wn),Bn===e&&(Bn=null),k(Nt)}var Nt=E(0);function oc(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Af(a)||Cf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Bs=0,ke=null,it=null,It=null,cc=!1,or=!1,Ei=!1,uc=0,El=0,cr=null,Ab=0;function xt(){throw Error(r(321))}function Eh(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Tn(e[a],n[a]))return!1;return!0}function Th(e,n,a,l,f,d){return Bs=d,ke=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=e===null||e.memoizedState===null?kg:Uh,Ei=!1,d=a(l,f),Ei=!1,or&&(d=tg(n,a,l,f)),eg(e),d}function eg(e){H.H=wl;var n=it!==null&&it.next!==null;if(Bs=0,It=it=ke=null,cc=!1,El=0,cr=null,n)throw Error(r(300));e===null||Mt||(e=e.dependencies,e!==null&&ec(e)&&(Mt=!0))}function tg(e,n,a,l){ke=e;var f=0;do{if(or&&(cr=null),El=0,or=!1,25<=f)throw Error(r(301));if(f+=1,It=it=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=zg,d=n(a,l)}while(or);return d}function Cb(){var e=H.H,n=e.useState()[0];return n=typeof n.then=="function"?Tl(n):n,e=e.useState()[0],(it!==null?it.memoizedState:null)!==e&&(ke.flags|=1024),n}function Nh(){var e=uc!==0;return uc=0,e}function wh(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function jh(e){if(cc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}cc=!1}Bs=0,It=it=ke=null,or=!1,El=uc=0,cr=null}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?ke.memoizedState=It=e:It=It.next=e,It}function wt(){if(it===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var n=It===null?ke.memoizedState:It.next;if(n!==null)It=n,it=e;else{if(e===null)throw ke.alternate===null?Error(r(467)):Error(r(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},It===null?ke.memoizedState=It=e:It=It.next=e}return It}function hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(e){var n=El;return El+=1,cr===null&&(cr=[]),e=Fm(cr,e,n),n=ke,(It===null?n.memoizedState:It.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?kg:Uh),e}function fc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Tl(e);if(e.$$typeof===de)return Xt(e)}throw Error(r(438,String(e)))}function Sh(e){var n=null,a=ke.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=hc(),ke.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=V;return n.index++,a}function qs(e,n){return typeof n=="function"?n(e):n}function dc(e){var n=wt();return Ah(n,it,e)}function Ah(e,n,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var y=f.next;f.next=d.next,d.next=y}n.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{n=f.next;var _=y=null,D=null,P=n,Q=!1;do{var J=P.lane&-536870913;if(J!==P.lane?(Be&J)===J:(Bs&J)===J){var q=P.revertLane;if(q===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),J===sr&&(Q=!0);else if((Bs&q)===q){P=P.next,q===sr&&(Q=!0);continue}else J={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},D===null?(_=D=J,y=d):D=D.next=J,ke.lanes|=q,Ta|=q;J=P.action,Ei&&a(d,J),d=P.hasEagerState?P.eagerState:a(d,J)}else q={lane:J,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},D===null?(_=D=q,y=d):D=D.next=q,ke.lanes|=J,Ta|=J;P=P.next}while(P!==null&&P!==n);if(D===null?y=d:D.next=_,!Tn(d,e.memoizedState)&&(Mt=!0,Q&&(a=ar,a!==null)))throw a;e.memoizedState=d,e.baseState=y,e.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Ch(e){var n=wt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,d=n.memoizedState;if(f!==null){a.pending=null;var y=f=f.next;do d=e(d,y.action),y=y.next;while(y!==f);Tn(d,n.memoizedState)||(Mt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,l]}function ng(e,n,a){var l=ke,f=wt(),d=Fe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var y=!Tn((it||f).memoizedState,a);if(y&&(f.memoizedState=a,Mt=!0),f=f.queue,Ih(ig.bind(null,l,f,e),[e]),f.getSnapshot!==n||y||It!==null&&It.memoizedState.tag&1){if(l.flags|=2048,ur(9,{destroy:void 0},ag.bind(null,l,f,a,n),null),ot===null)throw Error(r(349));d||(Bs&127)!==0||sg(l,n,a)}return a}function sg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=ke.updateQueue,n===null?(n=hc(),ke.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function ag(e,n,a,l){n.value=a,n.getSnapshot=l,rg(n)&&lg(e)}function ig(e,n,a){return a(function(){rg(n)&&lg(e)})}function rg(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Tn(e,a)}catch{return!0}}function lg(e){var n=di(e,2);n!==null&&yn(n,e,2)}function Rh(e){var n=cn();if(typeof e=="function"){var a=e;if(e=a(),Ei){Dn(!0);try{a()}finally{Dn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},n}function og(e,n,a,l){return e.baseState=a,Ah(e,it,typeof l=="function"?l:qs)}function Rb(e,n,a,l,f){if(pc(e))throw Error(r(485));if(e=n.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};H.T!==null?a(!0):d.isTransition=!1,l(d),a=n.pending,a===null?(d.next=n.pending=d,cg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function cg(e,n){var a=n.action,l=n.payload,f=e.state;if(n.isTransition){var d=H.T,y={};H.T=y;try{var _=a(f,l),D=H.S;D!==null&&D(y,_),ug(e,n,_)}catch(P){Dh(e,n,P)}finally{d!==null&&y.types!==null&&(d.types=y.types),H.T=d}}else try{d=a(f,l),ug(e,n,d)}catch(P){Dh(e,n,P)}}function ug(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){hg(e,n,l)},function(l){return Dh(e,n,l)}):hg(e,n,a)}function hg(e,n,a){n.status="fulfilled",n.value=a,fg(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,cg(e,a)))}function Dh(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,fg(n),n=n.next;while(n!==l)}e.action=null}function fg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function dg(e,n){return n}function mg(e,n){if(Fe){var a=ot.formState;if(a!==null){e:{var l=ke;if(Fe){if(dt){t:{for(var f=dt,d=Pn;f.nodeType!==8;){if(!d){f=null;break t}if(f=qn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){dt=qn(f.nextSibling),l=f.data==="F!";break e}}ma(l)}l=!1}l&&(n=a[0])}}return a=cn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dg,lastRenderedState:n},a.queue=l,a=Mg.bind(null,ke,l),l.dispatch=a,l=Rh(!1),d=zh.bind(null,ke,!1,l.queue),l=cn(),f={state:n,dispatch:null,action:e,pending:null},l.queue=f,a=Rb.bind(null,ke,f,d,a),f.dispatch=a,l.memoizedState=e,[n,a,!1]}function gg(e){var n=wt();return pg(n,it,e)}function pg(e,n,a){if(n=Ah(e,n,dg)[0],e=dc(qs)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Tl(n)}catch(y){throw y===ir?sc:y}else l=n;n=wt();var f=n.queue,d=f.dispatch;return a!==n.memoizedState&&(ke.flags|=2048,ur(9,{destroy:void 0},Db.bind(null,f,a),null)),[l,d,e]}function Db(e,n){e.action=n}function yg(e){var n=wt(),a=it;if(a!==null)return pg(n,a,e);wt(),n=n.memoizedState,a=wt();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function ur(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=ke.updateQueue,n===null&&(n=hc(),ke.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function xg(){return wt().memoizedState}function mc(e,n,a,l){var f=cn();ke.flags|=e,f.memoizedState=ur(1|n,{destroy:void 0},a,l===void 0?null:l)}function gc(e,n,a,l){var f=wt();l=l===void 0?null:l;var d=f.memoizedState.inst;it!==null&&l!==null&&Eh(l,it.memoizedState.deps)?f.memoizedState=ur(n,d,a,l):(ke.flags|=e,f.memoizedState=ur(1|n,d,a,l))}function vg(e,n){mc(8390656,8,e,n)}function Ih(e,n){gc(2048,8,e,n)}function Ib(e){ke.flags|=4;var n=ke.updateQueue;if(n===null)n=hc(),ke.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function bg(e){var n=wt().memoizedState;return Ib({ref:n,nextImpl:e}),function(){if((We&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function _g(e,n){return gc(4,2,e,n)}function Eg(e,n){return gc(4,4,e,n)}function Tg(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Ng(e,n,a){a=a!=null?a.concat([e]):null,gc(4,4,Tg.bind(null,n,e),a)}function Mh(){}function wg(e,n){var a=wt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Eh(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function jg(e,n){var a=wt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Eh(n,l[1]))return l[0];if(l=e(),Ei){Dn(!0);try{e()}finally{Dn(!1)}}return a.memoizedState=[l,n],l}function Vh(e,n,a){return a===void 0||(Bs&1073741824)!==0&&(Be&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Sp(),ke.lanes|=e,Ta|=e,a)}function Sg(e,n,a,l){return Tn(a,n)?a:lr.current!==null?(e=Vh(e,a,l),Tn(e,n)||(Mt=!0),e):(Bs&42)===0||(Bs&1073741824)!==0&&(Be&261930)===0?(Mt=!0,e.memoizedState=a):(e=Sp(),ke.lanes|=e,Ta|=e,n)}function Ag(e,n,a,l,f){var d=te.p;te.p=d!==0&&8>d?d:8;var y=H.T,_={};H.T=_,zh(e,!1,n,a);try{var D=f(),P=H.S;if(P!==null&&P(_,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Q=Sb(D,l);Nl(e,n,Q,Cn(e))}else Nl(e,n,l,Cn(e))}catch(J){Nl(e,n,{then:function(){},status:"rejected",reason:J},Cn())}finally{te.p=d,y!==null&&_.types!==null&&(y.types=_.types),H.T=y}}function Mb(){}function Oh(e,n,a,l){if(e.tag!==5)throw Error(r(476));var f=Cg(e).queue;Ag(e,f,n,he,a===null?Mb:function(){return Rg(e),a(l)})}function Cg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:he},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Rg(e){var n=Cg(e);n.next===null&&(n=e.alternate.memoizedState),Nl(e,n.next.queue,{},Cn())}function kh(){return Xt(Bl)}function Dg(){return wt().memoizedState}function Ig(){return wt().memoizedState}function Vb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Cn();e=ya(a);var l=xa(n,e,a);l!==null&&(yn(l,n,a),vl(l,n,a)),n={cache:hh()},e.payload=n;return}n=n.return}}function Ob(e,n,a){var l=Cn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},pc(e)?Vg(n,a):(a=eh(e,n,a,l),a!==null&&(yn(a,e,l),Og(a,n,l)))}function Mg(e,n,a){var l=Cn();Nl(e,n,a,l)}function Nl(e,n,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(pc(e))Vg(n,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var y=n.lastRenderedState,_=d(y,a);if(f.hasEagerState=!0,f.eagerState=_,Tn(_,y))return Xo(e,n,f,0),ot===null&&Ko(),!1}catch{}finally{}if(a=eh(e,n,f,l),a!==null)return yn(a,e,l),Og(a,n,l),!0}return!1}function zh(e,n,a,l){if(l={lane:2,revertLane:pf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},pc(e)){if(n)throw Error(r(479))}else n=eh(e,a,l,2),n!==null&&yn(n,e,2)}function pc(e){var n=e.alternate;return e===ke||n!==null&&n===ke}function Vg(e,n){or=cc=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Og(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Yr(e,a)}}var wl={readContext:Xt,use:fc,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};wl.useEffectEvent=xt;var kg={readContext:Xt,use:fc,useCallback:function(e,n){return cn().memoizedState=[e,n===void 0?null:n],e},useContext:Xt,useEffect:vg,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,mc(4194308,4,Tg.bind(null,n,e),a)},useLayoutEffect:function(e,n){return mc(4194308,4,e,n)},useInsertionEffect:function(e,n){mc(4,2,e,n)},useMemo:function(e,n){var a=cn();n=n===void 0?null:n;var l=e();if(Ei){Dn(!0);try{e()}finally{Dn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=cn();if(a!==void 0){var f=a(n);if(Ei){Dn(!0);try{a(n)}finally{Dn(!1)}}}else f=n;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=Ob.bind(null,ke,e),[l.memoizedState,e]},useRef:function(e){var n=cn();return e={current:e},n.memoizedState=e},useState:function(e){e=Rh(e);var n=e.queue,a=Mg.bind(null,ke,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Mh,useDeferredValue:function(e,n){var a=cn();return Vh(a,e,n)},useTransition:function(){var e=Rh(!1);return e=Ag.bind(null,ke,e.queue,!0,!1),cn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=ke,f=cn();if(Fe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),ot===null)throw Error(r(349));(Be&127)!==0||sg(l,n,a)}f.memoizedState=a;var d={value:a,getSnapshot:n};return f.queue=d,vg(ig.bind(null,l,d,e),[e]),l.flags|=2048,ur(9,{destroy:void 0},ag.bind(null,l,d,a,n),null),a},useId:function(){var e=cn(),n=ot.identifierPrefix;if(Fe){var a=Ts,l=Es;a=(l&~(1<<32-Et(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=uc++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Ab++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:kh,useFormState:mg,useActionState:mg,useOptimistic:function(e){var n=cn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=zh.bind(null,ke,!0,a),a.dispatch=n,[e,n]},useMemoCache:Sh,useCacheRefresh:function(){return cn().memoizedState=Vb.bind(null,ke)},useEffectEvent:function(e){var n=cn(),a={impl:e};return n.memoizedState=a,function(){if((We&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Uh={readContext:Xt,use:fc,useCallback:wg,useContext:Xt,useEffect:Ih,useImperativeHandle:Ng,useInsertionEffect:_g,useLayoutEffect:Eg,useMemo:jg,useReducer:dc,useRef:xg,useState:function(){return dc(qs)},useDebugValue:Mh,useDeferredValue:function(e,n){var a=wt();return Sg(a,it.memoizedState,e,n)},useTransition:function(){var e=dc(qs)[0],n=wt().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:ng,useId:Dg,useHostTransitionStatus:kh,useFormState:gg,useActionState:gg,useOptimistic:function(e,n){var a=wt();return og(a,it,e,n)},useMemoCache:Sh,useCacheRefresh:Ig};Uh.useEffectEvent=bg;var zg={readContext:Xt,use:fc,useCallback:wg,useContext:Xt,useEffect:Ih,useImperativeHandle:Ng,useInsertionEffect:_g,useLayoutEffect:Eg,useMemo:jg,useReducer:Ch,useRef:xg,useState:function(){return Ch(qs)},useDebugValue:Mh,useDeferredValue:function(e,n){var a=wt();return it===null?Vh(a,e,n):Sg(a,it.memoizedState,e,n)},useTransition:function(){var e=Ch(qs)[0],n=wt().memoizedState;return[typeof e=="boolean"?e:Tl(e),n]},useSyncExternalStore:ng,useId:Dg,useHostTransitionStatus:kh,useFormState:yg,useActionState:yg,useOptimistic:function(e,n){var a=wt();return it!==null?og(a,it,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Sh,useCacheRefresh:Ig};zg.useEffectEvent=bg;function Lh(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:C({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ph={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=Cn(),f=ya(l);f.payload=n,a!=null&&(f.callback=a),n=xa(e,f,l),n!==null&&(yn(n,e,l),vl(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=Cn(),f=ya(l);f.tag=1,f.payload=n,a!=null&&(f.callback=a),n=xa(e,f,l),n!==null&&(yn(n,e,l),vl(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Cn(),l=ya(a);l.tag=2,n!=null&&(l.callback=n),n=xa(e,l,a),n!==null&&(yn(n,e,a),vl(n,e,a))}};function Ug(e,n,a,l,f,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,y):n.prototype&&n.prototype.isPureReactComponent?!hl(a,l)||!hl(f,d):!0}function Lg(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Ph.enqueueReplaceState(n,n.state,null)}function Ti(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=C({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function Pg(e){Qo(e)}function Bg(e){console.error(e)}function qg(e){Qo(e)}function yc(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Hg(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Bh(e,n,a){return a=ya(a),a.tag=3,a.payload={element:null},a.callback=function(){yc(e,n)},a}function Gg(e){return e=ya(e),e.tag=3,e}function Fg(e,n,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){Hg(n,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Hg(n,a,l),typeof f!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function kb(e,n,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&nr(n,a,f,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Bn===null?Cc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===ac?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),df(e,l,f)),!1;case 22:return a.flags|=65536,l===ac?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),df(e,l,f)),!1}throw Error(r(435,a.tag))}return df(e,l,f),Cc(),!1}if(Fe)return n=wn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,l!==rh&&(e=Error(r(422),{cause:l}),ml(zn(e,a)))):(l!==rh&&(n=Error(r(423),{cause:l}),ml(zn(n,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=zn(l,a),f=Bh(e.stateNode,l,f),yh(e,f),vt!==4&&(vt=2)),!1;var d=Error(r(520),{cause:l});if(d=zn(d,a),Ml===null?Ml=[d]:Ml.push(d),vt!==4&&(vt=2),n===null)return!0;l=zn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=Bh(a.stateNode,l,e),yh(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Na===null||!Na.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Gg(f),Fg(f,e,a,l),yh(a,f),!1}a=a.return}while(a!==null);return!1}var qh=Error(r(461)),Mt=!1;function Zt(e,n,a,l){n.child=e===null?Km(n,null,a,l):_i(n,e.child,a,l)}function Yg(e,n,a,l,f){a=a.render;var d=n.ref;if("ref"in l){var y={};for(var _ in l)_!=="ref"&&(y[_]=l[_])}else y=l;return yi(n),l=Th(e,n,a,y,d,f),_=Nh(),e!==null&&!Mt?(wh(e,n,f),Hs(e,n,f)):(Fe&&_&&ah(n),n.flags|=1,Zt(e,n,l,f),n.child)}function $g(e,n,a,l,f){if(e===null){var d=a.type;return typeof d=="function"&&!th(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Qg(e,n,d,l,f)):(e=Jo(a.type,null,l,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!Xh(e,f)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:hl,a(y,l)&&e.ref===n.ref)return Hs(e,n,f)}return n.flags|=1,e=zs(d,l),e.ref=n.ref,e.return=n,n.child=e}function Qg(e,n,a,l,f){if(e!==null){var d=e.memoizedProps;if(hl(d,l)&&e.ref===n.ref)if(Mt=!1,n.pendingProps=l=d,Xh(e,f))(e.flags&131072)!==0&&(Mt=!0);else return n.lanes=e.lanes,Hs(e,n,f)}return Hh(e,n,a,l,f)}function Kg(e,n,a,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=n.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,n.child=null;return Xg(e,n,d,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&nc(n,d!==null?d.cachePool:null),d!==null?Jm(n,d):vh(),Wm(n);else return l=n.lanes=536870912,Xg(e,n,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(nc(n,d.cachePool),Jm(n,d),ba(),n.memoizedState=null):(e!==null&&nc(n,null),vh(),ba());return Zt(e,n,f,a),n.child}function jl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Xg(e,n,a,l,f){var d=dh();return d=d===null?null:{parent:Dt._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},e!==null&&nc(n,null),vh(),Wm(n),e!==null&&nr(e,n,l,!0),n.childLanes=f,null}function xc(e,n){return n=bc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Zg(e,n,a){return _i(n,e.child,null,a),e=xc(n,n.pendingProps),e.flags|=2,jn(n),n.memoizedState=null,e}function zb(e,n,a){var l=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Fe){if(l.mode==="hidden")return e=xc(n,l),n.lanes=536870912,jl(null,e);if(_h(n),(e=dt)?(e=cy(e,Pn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:fa!==null?{id:Es,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},a=Vm(e),a.return=n,n.child=a,Kt=n,dt=null)):e=null,e===null)throw ma(n);return n.lanes=536870912,null}return xc(n,l)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(_h(n),f)if(n.flags&256)n.flags&=-257,n=Zg(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(Mt||nr(e,n,a,!1),f=(a&e.childLanes)!==0,Mt||f){if(l=ot,l!==null&&(y=$r(l,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,di(e,y),yn(l,e,y),qh;Cc(),n=Zg(e,n,a)}else e=d.treeContext,dt=qn(y.nextSibling),Kt=n,Fe=!0,da=null,Pn=!1,e!==null&&zm(n,e),n=xc(n,l),n.flags|=4096;return n}return e=zs(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function vc(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Hh(e,n,a,l,f){return yi(n),a=Th(e,n,a,l,void 0,f),l=Nh(),e!==null&&!Mt?(wh(e,n,f),Hs(e,n,f)):(Fe&&l&&ah(n),n.flags|=1,Zt(e,n,a,f),n.child)}function Jg(e,n,a,l,f,d){return yi(n),n.updateQueue=null,a=tg(n,l,a,f),eg(e),l=Nh(),e!==null&&!Mt?(wh(e,n,d),Hs(e,n,d)):(Fe&&l&&ah(n),n.flags|=1,Zt(e,n,a,d),n.child)}function Wg(e,n,a,l,f){if(yi(n),n.stateNode===null){var d=Ji,y=a.contextType;typeof y=="object"&&y!==null&&(d=Xt(y)),d=new a(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ph,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},gh(n),y=a.contextType,d.context=typeof y=="object"&&y!==null?Xt(y):Ji,d.state=n.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(Lh(n,a,y,l),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&Ph.enqueueReplaceState(d,d.state,null),_l(n,l,d,f),bl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var _=n.memoizedProps,D=Ti(a,_);d.props=D;var P=d.context,Q=a.contextType;y=Ji,typeof Q=="object"&&Q!==null&&(y=Xt(Q));var J=a.getDerivedStateFromProps;Q=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_||P!==y)&&Lg(n,d,l,y),pa=!1;var q=n.memoizedState;d.state=q,_l(n,l,d,f),bl(),P=n.memoizedState,_||q!==P||pa?(typeof J=="function"&&(Lh(n,a,J,l),P=n.memoizedState),(D=pa||Ug(n,a,D,l,q,P,y))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=P),d.props=l,d.state=P,d.context=y,l=D):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,ph(e,n),y=n.memoizedProps,Q=Ti(a,y),d.props=Q,J=n.pendingProps,q=d.context,P=a.contextType,D=Ji,typeof P=="object"&&P!==null&&(D=Xt(P)),_=a.getDerivedStateFromProps,(P=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==J||q!==D)&&Lg(n,d,l,D),pa=!1,q=n.memoizedState,d.state=q,_l(n,l,d,f),bl();var $=n.memoizedState;y!==J||q!==$||pa||e!==null&&e.dependencies!==null&&ec(e.dependencies)?(typeof _=="function"&&(Lh(n,a,_,l),$=n.memoizedState),(Q=pa||Ug(n,a,Q,l,q,$,D)||e!==null&&e.dependencies!==null&&ec(e.dependencies))?(P||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,D)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=$),d.props=l,d.state=$,d.context=D,l=Q):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,vc(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=_i(n,e.child,null,f),n.child=_i(n,null,a,f)):Zt(e,n,a,f),n.memoizedState=d.state,e=n.child):e=Hs(e,n,f),e}function ep(e,n,a,l){return gi(),n.flags|=256,Zt(e,n,a,l),n.child}var Gh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fh(e){return{baseLanes:e,cachePool:Hm()}}function Yh(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=An),e}function tp(e,n,a){var l=n.pendingProps,f=!1,d=(n.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(Nt.current&2)!==0),y&&(f=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(Fe){if(f?va(n):ba(),(e=dt)?(e=cy(e,Pn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:fa!==null?{id:Es,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},a=Vm(e),a.return=n,n.child=a,Kt=n,dt=null)):e=null,e===null)throw ma(n);return Cf(e)?n.lanes=32:n.lanes=536870912,null}var _=l.children;return l=l.fallback,f?(ba(),f=n.mode,_=bc({mode:"hidden",children:_},f),l=mi(l,f,a,null),_.return=n,l.return=n,_.sibling=l,n.child=_,l=n.child,l.memoizedState=Fh(a),l.childLanes=Yh(e,y,a),n.memoizedState=Gh,jl(null,l)):(va(n),$h(n,_))}var D=e.memoizedState;if(D!==null&&(_=D.dehydrated,_!==null)){if(d)n.flags&256?(va(n),n.flags&=-257,n=Qh(e,n,a)):n.memoizedState!==null?(ba(),n.child=e.child,n.flags|=128,n=null):(ba(),_=l.fallback,f=n.mode,l=bc({mode:"visible",children:l.children},f),_=mi(_,f,a,null),_.flags|=2,l.return=n,_.return=n,l.sibling=_,n.child=l,_i(n,e.child,null,a),l=n.child,l.memoizedState=Fh(a),l.childLanes=Yh(e,y,a),n.memoizedState=Gh,n=jl(null,l));else if(va(n),Cf(_)){if(y=_.nextSibling&&_.nextSibling.dataset,y)var P=y.dgst;y=P,l=Error(r(419)),l.stack="",l.digest=y,ml({value:l,source:null,stack:null}),n=Qh(e,n,a)}else if(Mt||nr(e,n,a,!1),y=(a&e.childLanes)!==0,Mt||y){if(y=ot,y!==null&&(l=$r(y,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,di(e,l),yn(y,e,l),qh;Af(_)||Cc(),n=Qh(e,n,a)}else Af(_)?(n.flags|=192,n.child=e.child,n=null):(e=D.treeContext,dt=qn(_.nextSibling),Kt=n,Fe=!0,da=null,Pn=!1,e!==null&&zm(n,e),n=$h(n,l.children),n.flags|=4096);return n}return f?(ba(),_=l.fallback,f=n.mode,D=e.child,P=D.sibling,l=zs(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,P!==null?_=zs(P,_):(_=mi(_,f,a,null),_.flags|=2),_.return=n,l.return=n,l.sibling=_,n.child=l,jl(null,l),l=n.child,_=e.child.memoizedState,_===null?_=Fh(a):(f=_.cachePool,f!==null?(D=Dt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=Hm(),_={baseLanes:_.baseLanes|a,cachePool:f}),l.memoizedState=_,l.childLanes=Yh(e,y,a),n.memoizedState=Gh,jl(e.child,l)):(va(n),a=e.child,e=a.sibling,a=zs(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=a,n.memoizedState=null,a)}function $h(e,n){return n=bc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function bc(e,n){return e=Nn(22,e,null,n),e.lanes=0,e}function Qh(e,n,a){return _i(n,e.child,null,a),e=$h(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function np(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),ch(e.return,n,a)}function Kh(e,n,a,l,f,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=f,y.treeForkCount=d)}function sp(e,n,a){var l=n.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var y=Nt.current,_=(y&2)!==0;if(_?(y=y&1|2,n.flags|=128):y&=1,le(Nt,y),Zt(e,n,l,a),l=Fe?dl:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&np(e,a,n);else if(e.tag===19)np(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=n.child,f=null;a!==null;)e=a.alternate,e!==null&&oc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=n.child,n.child=null):(f=a.sibling,a.sibling=null),Kh(n,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&oc(e)===null){n.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Kh(n,!0,a,null,d,l);break;case"together":Kh(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Hs(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Ta|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(nr(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=zs(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=zs(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Xh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ec(e)))}function Ub(e,n,a){switch(n.tag){case 3:be(n,n.stateNode.containerInfo),ga(n,Dt,e.memoizedState.cache),gi();break;case 27:case 5:bt(n);break;case 4:be(n,n.stateNode.containerInfo);break;case 10:ga(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,_h(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(va(n),n.flags|=128,null):(a&n.child.childLanes)!==0?tp(e,n,a):(va(n),e=Hs(e,n,a),e!==null?e.sibling:null);va(n);break;case 19:var f=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(nr(e,n,a,!1),l=(a&n.childLanes)!==0),f){if(l)return sp(e,n,a);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Nt,Nt.current),l)break;return null;case 22:return n.lanes=0,Kg(e,n,a,n.pendingProps);case 24:ga(n,Dt,e.memoizedState.cache)}return Hs(e,n,a)}function ap(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Mt=!0;else{if(!Xh(e,a)&&(n.flags&128)===0)return Mt=!1,Ub(e,n,a);Mt=(e.flags&131072)!==0}else Mt=!1,Fe&&(n.flags&1048576)!==0&&km(n,dl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=vi(n.elementType),n.type=e,typeof e=="function")th(e)?(l=Ti(e,l),n.tag=1,n=Wg(null,n,e,l,a)):(n.tag=0,n=Hh(null,n,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===xe){n.tag=11,n=Yg(null,n,e,l,a);break e}else if(f===R){n.tag=14,n=$g(null,n,e,l,a);break e}}throw n=Se(e)||e,Error(r(306,n,""))}}return n;case 0:return Hh(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,f=Ti(l,n.pendingProps),Wg(e,n,l,f,a);case 3:e:{if(be(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var d=n.memoizedState;f=d.element,ph(e,n),_l(n,l,null,a);var y=n.memoizedState;if(l=y.cache,ga(n,Dt,l),l!==d.cache&&uh(n,[Dt],a,!0),bl(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=ep(e,n,l,a);break e}else if(l!==f){f=zn(Error(r(424)),n),ml(f),n=ep(e,n,l,a);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(dt=qn(e.firstChild),Kt=n,Fe=!0,da=null,Pn=!0,a=Km(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(gi(),l===f){n=Hs(e,n,a);break e}Zt(e,n,l,a)}n=n.child}return n;case 26:return vc(e,n),e===null?(a=gy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Fe||(a=n.type,e=n.pendingProps,l=kc(B.current).createElement(a),l[At]=n,l[qt]=e,Jt(l,a,e),Ct(l),n.stateNode=l):n.memoizedState=gy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return bt(n),e===null&&Fe&&(l=n.stateNode=fy(n.type,n.pendingProps,B.current),Kt=n,Pn=!0,f=dt,Aa(n.type)?(Rf=f,dt=qn(l.firstChild)):dt=f),Zt(e,n,n.pendingProps.children,a),vc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Fe&&((f=l=dt)&&(l=m_(l,n.type,n.pendingProps,Pn),l!==null?(n.stateNode=l,Kt=n,dt=qn(l.firstChild),Pn=!1,f=!0):f=!1),f||ma(n)),bt(n),f=n.type,d=n.pendingProps,y=e!==null?e.memoizedProps:null,l=d.children,wf(f,d)?l=null:y!==null&&wf(f,y)&&(n.flags|=32),n.memoizedState!==null&&(f=Th(e,n,Cb,null,null,a),Bl._currentValue=f),vc(e,n),Zt(e,n,l,a),n.child;case 6:return e===null&&Fe&&((e=a=dt)&&(a=g_(a,n.pendingProps,Pn),a!==null?(n.stateNode=a,Kt=n,dt=null,e=!0):e=!1),e||ma(n)),null;case 13:return tp(e,n,a);case 4:return be(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=_i(n,null,l,a):Zt(e,n,l,a),n.child;case 11:return Yg(e,n,n.type,n.pendingProps,a);case 7:return Zt(e,n,n.pendingProps,a),n.child;case 8:return Zt(e,n,n.pendingProps.children,a),n.child;case 12:return Zt(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,ga(n,n.type,l.value),Zt(e,n,l.children,a),n.child;case 9:return f=n.type._context,l=n.pendingProps.children,yi(n),f=Xt(f),l=l(f),n.flags|=1,Zt(e,n,l,a),n.child;case 14:return $g(e,n,n.type,n.pendingProps,a);case 15:return Qg(e,n,n.type,n.pendingProps,a);case 19:return sp(e,n,a);case 31:return zb(e,n,a);case 22:return Kg(e,n,a,n.pendingProps);case 24:return yi(n),l=Xt(Dt),e===null?(f=dh(),f===null&&(f=ot,d=hh(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),n.memoizedState={parent:l,cache:f},gh(n),ga(n,Dt,f)):((e.lanes&a)!==0&&(ph(e,n),_l(n,null,null,a),bl()),f=e.memoizedState,d=n.memoizedState,f.parent!==l?(f={parent:l,cache:l},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),ga(n,Dt,l)):(l=d.cache,ga(n,Dt,l),l!==f.cache&&uh(n,[Dt],a,!0))),Zt(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Gs(e){e.flags|=4}function Zh(e,n,a,l,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Dp())e.flags|=8192;else throw bi=ac,mh}else e.flags&=-16777217}function ip(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!by(n))if(Dp())e.flags|=8192;else throw bi=ac,mh}function _c(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?So():536870912,e.lanes|=n,mr|=n)}function Sl(e,n){if(!Fe)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function mt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function Lb(e,n,a){var l=n.pendingProps;switch(ih(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(n),null;case 1:return mt(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Ps(Dt),we(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(tr(n)?Gs(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,lh())),mt(n),null;case 26:var f=n.type,d=n.memoizedState;return e===null?(Gs(n),d!==null?(mt(n),ip(n,d)):(mt(n),Zh(n,f,null,l,a))):d?d!==e.memoizedState?(Gs(n),mt(n),ip(n,d)):(mt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Gs(n),mt(n),Zh(n,f,e,l,a)),null;case 27:if(_t(n),a=B.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Gs(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return mt(n),null}e=ue.current,tr(n)?Um(n):(e=fy(f,l,a),n.stateNode=e,Gs(n))}return mt(n),null;case 5:if(_t(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Gs(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return mt(n),null}if(d=ue.current,tr(n))Um(n);else{var y=kc(B.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(f,{is:l.is}):y.createElement(f)}}d[At]=n,d[qt]=l;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=d;e:switch(Jt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Gs(n)}}return mt(n),Zh(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Gs(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=B.current,tr(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,f=Kt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[At]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||ty(e.nodeValue,a)),e||ma(n,!0)}else e=kc(e).createTextNode(l),e[At]=n,n.stateNode=e}return mt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=tr(n),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[At]=n}else gi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;mt(n),e=!1}else a=lh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(jn(n),n):(jn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return mt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=tr(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[At]=n}else gi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;mt(n),f=!1}else f=lh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(jn(n),n):(jn(n),null)}return jn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),_c(n,n.updateQueue),mt(n),null);case 4:return we(),e===null&&bf(n.stateNode.containerInfo),mt(n),null;case 10:return Ps(n.type),mt(n),null;case 19:if(k(Nt),l=n.memoizedState,l===null)return mt(n),null;if(f=(n.flags&128)!==0,d=l.rendering,d===null)if(f)Sl(l,!1);else{if(vt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=oc(e),d!==null){for(n.flags|=128,Sl(l,!1),e=d.updateQueue,n.updateQueue=e,_c(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Mm(a,e),a=a.sibling;return le(Nt,Nt.current&1|2),Fe&&Us(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&ln()>jc&&(n.flags|=128,f=!0,Sl(l,!1),n.lanes=4194304)}else{if(!f)if(e=oc(d),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,_c(n,e),Sl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Fe)return mt(n),null}else 2*ln()-l.renderingStartTime>jc&&a!==536870912&&(n.flags|=128,f=!0,Sl(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(e=l.last,e!==null?e.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ln(),e.sibling=null,a=Nt.current,le(Nt,f?a&1|2:a&1),Fe&&Us(n,l.treeForkCount),e):(mt(n),null);case 22:case 23:return jn(n),bh(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(mt(n),n.subtreeFlags&6&&(n.flags|=8192)):mt(n),a=n.updateQueue,a!==null&&_c(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&k(xi),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Ps(Dt),mt(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function Pb(e,n){switch(ih(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ps(Dt),we(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return _t(n),null;case 31:if(n.memoizedState!==null){if(jn(n),n.alternate===null)throw Error(r(340));gi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(jn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));gi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return k(Nt),null;case 4:return we(),null;case 10:return Ps(n.type),null;case 22:case 23:return jn(n),bh(),e!==null&&k(xi),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Ps(Dt),null;case 25:return null;default:return null}}function rp(e,n){switch(ih(n),n.tag){case 3:Ps(Dt),we();break;case 26:case 27:case 5:_t(n);break;case 4:we();break;case 31:n.memoizedState!==null&&jn(n);break;case 13:jn(n);break;case 19:k(Nt);break;case 10:Ps(n.type);break;case 22:case 23:jn(n),bh(),e!==null&&k(xi);break;case 24:Ps(Dt)}}function Al(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var d=a.create,y=a.inst;l=d(),y.destroy=l}a=a.next}while(a!==f)}}catch(_){st(n,n.return,_)}}function _a(e,n,a){try{var l=n.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var y=l.inst,_=y.destroy;if(_!==void 0){y.destroy=void 0,f=n;var D=a,P=_;try{P()}catch(Q){st(f,D,Q)}}}l=l.next}while(l!==d)}}catch(Q){st(n,n.return,Q)}}function lp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Zm(n,a)}catch(l){st(e,e.return,l)}}}function op(e,n,a){a.props=Ti(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){st(e,n,l)}}function Cl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){st(e,n,f)}}function Ns(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){st(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){st(e,n,f)}else a.current=null}function cp(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){st(e,e.return,f)}}function Jh(e,n,a){try{var l=e.stateNode;o_(l,e.type,a,n),l[qt]=n}catch(f){st(e,e.return,f)}}function up(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Aa(e.type)||e.tag===4}function Wh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||up(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Aa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ef(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Kn));else if(l!==4&&(l===27&&Aa(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ef(e,n,a),e=e.sibling;e!==null;)ef(e,n,a),e=e.sibling}function Ec(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&Aa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ec(e,n,a),e=e.sibling;e!==null;)Ec(e,n,a),e=e.sibling}function hp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);Jt(n,l,a),n[At]=e,n[qt]=a}catch(d){st(e,e.return,d)}}var Fs=!1,Vt=!1,tf=!1,fp=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function Bb(e,n){if(e=e.containerInfo,Tf=Hc,e=Nm(e),Qu(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var y=0,_=-1,D=-1,P=0,Q=0,J=e,q=null;t:for(;;){for(var $;J!==a||f!==0&&J.nodeType!==3||(_=y+f),J!==d||l!==0&&J.nodeType!==3||(D=y+l),J.nodeType===3&&(y+=J.nodeValue.length),($=J.firstChild)!==null;)q=J,J=$;for(;;){if(J===e)break t;if(q===a&&++P===f&&(_=y),q===d&&++Q===l&&(D=y),($=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=$}a=_===-1||D===-1?null:{start:_,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nf={focusedElem:e,selectionRange:a},Hc=!1,Gt=n;Gt!==null;)if(n=Gt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Gt=e;else for(;Gt!==null;){switch(n=Gt,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ye=Ti(a.type,f);e=l.getSnapshotBeforeUpdate(ye,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(je){st(a,a.return,je)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Sf(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Sf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,Gt=e;break}Gt=n.return}}function dp(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:$s(e,a),l&4&&Al(5,a);break;case 1:if($s(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(y){st(a,a.return,y)}else{var f=Ti(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){st(a,a.return,y)}}l&64&&lp(a),l&512&&Cl(a,a.return);break;case 3:if($s(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Zm(e,n)}catch(y){st(a,a.return,y)}}break;case 27:n===null&&l&4&&hp(a);case 26:case 5:$s(e,a),n===null&&l&4&&cp(a),l&512&&Cl(a,a.return);break;case 12:$s(e,a);break;case 31:$s(e,a),l&4&&pp(e,a);break;case 13:$s(e,a),l&4&&yp(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Xb.bind(null,a),p_(e,a))));break;case 22:if(l=a.memoizedState!==null||Fs,!l){n=n!==null&&n.memoizedState!==null||Vt,f=Fs;var d=Vt;Fs=l,(Vt=n)&&!d?Qs(e,a,(a.subtreeFlags&8772)!==0):$s(e,a),Fs=f,Vt=d}break;case 30:break;default:$s(e,a)}}function mp(e){var n=e.alternate;n!==null&&(e.alternate=null,mp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ui(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var pt=null,dn=!1;function Ys(e,n,a){for(a=a.child;a!==null;)gp(e,n,a),a=a.sibling}function gp(e,n,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Fn,a)}catch{}switch(a.tag){case 26:Vt||Ns(a,n),Ys(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Vt||Ns(a,n);var l=pt,f=dn;Aa(a.type)&&(pt=a.stateNode,dn=!1),Ys(e,n,a),Ul(a.stateNode),pt=l,dn=f;break;case 5:Vt||Ns(a,n);case 6:if(l=pt,f=dn,pt=null,Ys(e,n,a),pt=l,dn=f,pt!==null)if(dn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(d){st(a,n,d)}else try{pt.removeChild(a.stateNode)}catch(d){st(a,n,d)}break;case 18:pt!==null&&(dn?(e=pt,ly(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Er(e)):ly(pt,a.stateNode));break;case 4:l=pt,f=dn,pt=a.stateNode.containerInfo,dn=!0,Ys(e,n,a),pt=l,dn=f;break;case 0:case 11:case 14:case 15:_a(2,a,n),Vt||_a(4,a,n),Ys(e,n,a);break;case 1:Vt||(Ns(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&op(a,n,l)),Ys(e,n,a);break;case 21:Ys(e,n,a);break;case 22:Vt=(l=Vt)||a.memoizedState!==null,Ys(e,n,a),Vt=l;break;default:Ys(e,n,a)}}function pp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Er(e)}catch(a){st(n,n.return,a)}}}function yp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Er(e)}catch(a){st(n,n.return,a)}}function qb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new fp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new fp),n;default:throw Error(r(435,e.tag))}}function Tc(e,n){var a=qb(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var f=Zb.bind(null,e,l);l.then(f,f)}})}function mn(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=e,y=n,_=y;e:for(;_!==null;){switch(_.tag){case 27:if(Aa(_.type)){pt=_.stateNode,dn=!1;break e}break;case 5:pt=_.stateNode,dn=!1;break e;case 3:case 4:pt=_.stateNode.containerInfo,dn=!0;break e}_=_.return}if(pt===null)throw Error(r(160));gp(d,y,f),pt=null,dn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)xp(n,e),n=n.sibling}var ts=null;function xp(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mn(n,e),gn(e),l&4&&(_a(3,e,e.return),Al(3,e),_a(5,e,e.return));break;case 1:mn(n,e),gn(e),l&512&&(Vt||a===null||Ns(a,a.return)),l&64&&Fs&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ts;if(mn(n,e),gn(e),l&512&&(Vt||a===null||Ns(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[us]||d[At]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Jt(d,l,a),d[At]=e,Ct(d),l=d;break e;case"link":var y=xy("link","href",f).get(l+(a.href||""));if(y){for(var _=0;_<y.length;_++)if(d=y[_],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(_,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;case"meta":if(y=xy("meta","content",f).get(l+(a.content||""))){for(_=0;_<y.length;_++)if(d=y[_],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(_,1);break t}}d=f.createElement(l),Jt(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[At]=e,Ct(d),l=d}e.stateNode=l}else vy(f,e.type,e.stateNode);else e.stateNode=yy(f,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?vy(f,e.type,e.stateNode):yy(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Jh(e,e.memoizedProps,a.memoizedProps)}break;case 27:mn(n,e),gn(e),l&512&&(Vt||a===null||Ns(a,a.return)),a!==null&&l&4&&Jh(e,e.memoizedProps,a.memoizedProps);break;case 5:if(mn(n,e),gn(e),l&512&&(Vt||a===null||Ns(a,a.return)),e.flags&32){f=e.stateNode;try{fn(f,"")}catch(ye){st(e,e.return,ye)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,Jh(e,f,a!==null?a.memoizedProps:f)),l&1024&&(tf=!0);break;case 6:if(mn(n,e),gn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(ye){st(e,e.return,ye)}}break;case 3:if(Lc=null,f=ts,ts=zc(n.containerInfo),mn(n,e),ts=f,gn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Er(n.containerInfo)}catch(ye){st(e,e.return,ye)}tf&&(tf=!1,vp(e));break;case 4:l=ts,ts=zc(e.stateNode.containerInfo),mn(n,e),gn(e),ts=l;break;case 12:mn(n,e),gn(e);break;case 31:mn(n,e),gn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Tc(e,l)));break;case 13:mn(n,e),gn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wc=ln()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Tc(e,l)));break;case 22:f=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,P=Fs,Q=Vt;if(Fs=P||f,Vt=Q||D,mn(n,e),Vt=Q,Fs=P,gn(e),l&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(a===null||D||Fs||Vt||Ni(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(d=D.stateNode,f)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{_=D.stateNode;var J=D.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;_.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ye){st(D,D.return,ye)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(ye){st(D,D.return,ye)}}}else if(n.tag===18){if(a===null){D=n;try{var $=D.stateNode;f?oy($,!0):oy(D.stateNode,!1)}catch(ye){st(D,D.return,ye)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Tc(e,a))));break;case 19:mn(n,e),gn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Tc(e,l)));break;case 30:break;case 21:break;default:mn(n,e),gn(e)}}function gn(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(up(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Wh(e);Ec(e,d,f);break;case 5:var y=a.stateNode;a.flags&32&&(fn(y,""),a.flags&=-33);var _=Wh(e);Ec(e,_,y);break;case 3:case 4:var D=a.stateNode.containerInfo,P=Wh(e);ef(e,P,D);break;default:throw Error(r(161))}}catch(Q){st(e,e.return,Q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function vp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;vp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function $s(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)dp(e,n.alternate,n),n=n.sibling}function Ni(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:_a(4,n,n.return),Ni(n);break;case 1:Ns(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&op(n,n.return,a),Ni(n);break;case 27:Ul(n.stateNode);case 26:case 5:Ns(n,n.return),Ni(n);break;case 22:n.memoizedState===null&&Ni(n);break;case 30:Ni(n);break;default:Ni(n)}e=e.sibling}}function Qs(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,f=e,d=n,y=d.flags;switch(d.tag){case 0:case 11:case 15:Qs(f,d,a),Al(4,d);break;case 1:if(Qs(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(P){st(l,l.return,P)}if(l=d,f=l.updateQueue,f!==null){var _=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Xm(D[f],_)}catch(P){st(l,l.return,P)}}a&&y&64&&lp(d),Cl(d,d.return);break;case 27:hp(d);case 26:case 5:Qs(f,d,a),a&&l===null&&y&4&&cp(d),Cl(d,d.return);break;case 12:Qs(f,d,a);break;case 31:Qs(f,d,a),a&&y&4&&pp(f,d);break;case 13:Qs(f,d,a),a&&y&4&&yp(f,d);break;case 22:d.memoizedState===null&&Qs(f,d,a),Cl(d,d.return);break;case 30:break;default:Qs(f,d,a)}n=n.sibling}}function nf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&gl(a))}function sf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&gl(e))}function ns(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)bp(e,n,a,l),n=n.sibling}function bp(e,n,a,l){var f=n.flags;switch(n.tag){case 0:case 11:case 15:ns(e,n,a,l),f&2048&&Al(9,n);break;case 1:ns(e,n,a,l);break;case 3:ns(e,n,a,l),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&gl(e)));break;case 12:if(f&2048){ns(e,n,a,l),e=n.stateNode;try{var d=n.memoizedProps,y=d.id,_=d.onPostCommit;typeof _=="function"&&_(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){st(n,n.return,D)}}else ns(e,n,a,l);break;case 31:ns(e,n,a,l);break;case 13:ns(e,n,a,l);break;case 23:break;case 22:d=n.stateNode,y=n.alternate,n.memoizedState!==null?d._visibility&2?ns(e,n,a,l):Rl(e,n):d._visibility&2?ns(e,n,a,l):(d._visibility|=2,hr(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),f&2048&&nf(y,n);break;case 24:ns(e,n,a,l),f&2048&&sf(n.alternate,n);break;default:ns(e,n,a,l)}}function hr(e,n,a,l,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,y=n,_=a,D=l,P=y.flags;switch(y.tag){case 0:case 11:case 15:hr(d,y,_,D,f),Al(8,y);break;case 23:break;case 22:var Q=y.stateNode;y.memoizedState!==null?Q._visibility&2?hr(d,y,_,D,f):Rl(d,y):(Q._visibility|=2,hr(d,y,_,D,f)),f&&P&2048&&nf(y.alternate,y);break;case 24:hr(d,y,_,D,f),f&&P&2048&&sf(y.alternate,y);break;default:hr(d,y,_,D,f)}n=n.sibling}}function Rl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,f=l.flags;switch(l.tag){case 22:Rl(a,l),f&2048&&nf(l.alternate,l);break;case 24:Rl(a,l),f&2048&&sf(l.alternate,l);break;default:Rl(a,l)}n=n.sibling}}var Dl=8192;function fr(e,n,a){if(e.subtreeFlags&Dl)for(e=e.child;e!==null;)_p(e,n,a),e=e.sibling}function _p(e,n,a){switch(e.tag){case 26:fr(e,n,a),e.flags&Dl&&e.memoizedState!==null&&A_(a,ts,e.memoizedState,e.memoizedProps);break;case 5:fr(e,n,a);break;case 3:case 4:var l=ts;ts=zc(e.stateNode.containerInfo),fr(e,n,a),ts=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Dl,Dl=16777216,fr(e,n,a),Dl=l):fr(e,n,a));break;default:fr(e,n,a)}}function Ep(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Il(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Gt=l,Np(l,e)}Ep(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Tp(e),e=e.sibling}function Tp(e){switch(e.tag){case 0:case 11:case 15:Il(e),e.flags&2048&&_a(9,e,e.return);break;case 3:Il(e);break;case 12:Il(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Nc(e)):Il(e);break;default:Il(e)}}function Nc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Gt=l,Np(l,e)}Ep(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:_a(8,n,n.return),Nc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Nc(n));break;default:Nc(n)}e=e.sibling}}function Np(e,n){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:_a(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Gt=l;else e:for(a=e;Gt!==null;){l=Gt;var f=l.sibling,d=l.return;if(mp(l),l===a){Gt=null;break e}if(f!==null){f.return=d,Gt=f;break e}Gt=d}}}var Hb={getCacheForType:function(e){var n=Xt(Dt),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Xt(Dt).controller.signal}},Gb=typeof WeakMap=="function"?WeakMap:Map,We=0,ot=null,Ue=null,Be=0,nt=0,Sn=null,Ea=!1,dr=!1,af=!1,Ks=0,vt=0,Ta=0,wi=0,rf=0,An=0,mr=0,Ml=null,pn=null,lf=!1,wc=0,wp=0,jc=1/0,Sc=null,Na=null,Lt=0,wa=null,gr=null,Xs=0,of=0,cf=null,jp=null,Vl=0,uf=null;function Cn(){return(We&2)!==0&&Be!==0?Be&-Be:H.T!==null?pf():Ao()}function Sp(){if(An===0)if((Be&536870912)===0||Fe){var e=Ja;Ja<<=1,(Ja&3932160)===0&&(Ja=262144),An=e}else An=536870912;return e=wn.current,e!==null&&(e.flags|=32),An}function yn(e,n,a){(e===ot&&(nt===2||nt===9)||e.cancelPendingCommit!==null)&&(pr(e,0),ja(e,Be,An,!1)),Wa(e,a),((We&2)===0||e!==ot)&&(e===ot&&((We&2)===0&&(wi|=a),vt===4&&ja(e,Be,An,!1)),ws(e))}function Ap(e,n,a){if((We&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Yn(e,n),f=l?$b(e,n):ff(e,n,!0),d=l;do{if(f===0){dr&&!l&&ja(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!Fb(a)){f=ff(e,n,!1),d=!1;continue}if(f===2){if(d=n,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var _=e;f=Ml;var D=_.current.memoizedState.isDehydrated;if(D&&(pr(_,y).flags|=256),y=ff(_,y,!1),y!==2){if(af&&!D){_.errorRecoveryDisabledLanes|=d,wi|=d,f=4;break e}d=pn,pn=f,d!==null&&(pn===null?pn=d:pn.push.apply(pn,d))}f=y}if(d=!1,f!==2)continue}}if(f===1){pr(e,0),ja(e,n,0,!0);break}e:{switch(l=e,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:ja(l,n,An,!Ea);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(f=wc+300-ln(),10<f)){if(ja(l,n,An,!Ea),ls(l,0,!0)!==0)break e;Xs=n,l.timeoutHandle=iy(Cp.bind(null,l,a,pn,Sc,lf,n,An,wi,mr,Ea,d,"Throttled",-0,0),f);break e}Cp(l,a,pn,Sc,lf,n,An,wi,mr,Ea,d,null,-0,0)}}break}while(!0);ws(e)}function Cp(e,n,a,l,f,d,y,_,D,P,Q,J,q,$){if(e.timeoutHandle=-1,J=n.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},_p(n,d,J);var ye=(d&62914560)===d?wc-ln():(d&4194048)===d?wp-ln():0;if(ye=C_(J,ye),ye!==null){Xs=d,e.cancelPendingCommit=ye(zp.bind(null,e,n,d,a,l,f,y,_,D,Q,J,null,q,$)),ja(e,d,y,!P);return}}zp(e,n,d,a,l,f,y,_,D)}function Fb(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Tn(d(),f))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ja(e,n,a,l){n&=~rf,n&=~wi,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var f=n;0<f;){var d=31-Et(f),y=1<<d;l[d]=-1,f&=~y}a!==0&&ei(e,a,n)}function Ac(){return(We&6)===0?(Ol(0),!1):!0}function hf(){if(Ue!==null){if(nt===0)var e=Ue.return;else e=Ue,Ls=pi=null,jh(e),rr=null,yl=0,e=Ue;for(;e!==null;)rp(e.alternate,e),e=e.return;Ue=null}}function pr(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,h_(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Xs=0,hf(),ot=e,Ue=a=zs(e.current,null),Be=n,nt=0,Sn=null,Ea=!1,dr=Yn(e,n),af=!1,mr=An=rf=wi=Ta=vt=0,pn=Ml=null,lf=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var f=31-Et(l),d=1<<f;n|=e[f],l&=~d}return Ks=n,Ko(),a}function Rp(e,n){ke=null,H.H=wl,n===ir||n===sc?(n=Ym(),nt=3):n===mh?(n=Ym(),nt=4):nt=n===qh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Sn=n,Ue===null&&(vt=1,yc(e,zn(n,e.current)))}function Dp(){var e=wn.current;return e===null?!0:(Be&4194048)===Be?Bn===null:(Be&62914560)===Be||(Be&536870912)!==0?e===Bn:!1}function Ip(){var e=H.H;return H.H=wl,e===null?wl:e}function Mp(){var e=H.A;return H.A=Hb,e}function Cc(){vt=4,Ea||(Be&4194048)!==Be&&wn.current!==null||(dr=!0),(Ta&134217727)===0&&(wi&134217727)===0||ot===null||ja(ot,Be,An,!1)}function ff(e,n,a){var l=We;We|=2;var f=Ip(),d=Mp();(ot!==e||Be!==n)&&(Sc=null,pr(e,n)),n=!1;var y=vt;e:do try{if(nt!==0&&Ue!==null){var _=Ue,D=Sn;switch(nt){case 8:hf(),y=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(n=!0);var P=nt;if(nt=0,Sn=null,yr(e,_,D,P),a&&dr){y=0;break e}break;default:P=nt,nt=0,Sn=null,yr(e,_,D,P)}}Yb(),y=vt;break}catch(Q){Rp(e,Q)}while(!0);return n&&e.shellSuspendCounter++,Ls=pi=null,We=l,H.H=f,H.A=d,Ue===null&&(ot=null,Be=0,Ko()),y}function Yb(){for(;Ue!==null;)Vp(Ue)}function $b(e,n){var a=We;We|=2;var l=Ip(),f=Mp();ot!==e||Be!==n?(Sc=null,jc=ln()+500,pr(e,n)):dr=Yn(e,n);e:do try{if(nt!==0&&Ue!==null){n=Ue;var d=Sn;t:switch(nt){case 1:nt=0,Sn=null,yr(e,n,d,1);break;case 2:case 9:if(Gm(d)){nt=0,Sn=null,Op(n);break}n=function(){nt!==2&&nt!==9||ot!==e||(nt=7),ws(e)},d.then(n,n);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Gm(d)?(nt=0,Sn=null,Op(n)):(nt=0,Sn=null,yr(e,n,d,7));break;case 5:var y=null;switch(Ue.tag){case 26:y=Ue.memoizedState;case 5:case 27:var _=Ue;if(y?by(y):_.stateNode.complete){nt=0,Sn=null;var D=_.sibling;if(D!==null)Ue=D;else{var P=_.return;P!==null?(Ue=P,Rc(P)):Ue=null}break t}}nt=0,Sn=null,yr(e,n,d,5);break;case 6:nt=0,Sn=null,yr(e,n,d,6);break;case 8:hf(),vt=6;break e;default:throw Error(r(462))}}Qb();break}catch(Q){Rp(e,Q)}while(!0);return Ls=pi=null,H.H=l,H.A=f,We=a,Ue!==null?0:(ot=null,Be=0,Ko(),vt)}function Qb(){for(;Ue!==null&&!Xa();)Vp(Ue)}function Vp(e){var n=ap(e.alternate,e,Ks);e.memoizedProps=e.pendingProps,n===null?Rc(e):Ue=n}function Op(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Jg(a,n,n.pendingProps,n.type,void 0,Be);break;case 11:n=Jg(a,n,n.pendingProps,n.type.render,n.ref,Be);break;case 5:jh(n);default:rp(a,n),n=Ue=Mm(n,Ks),n=ap(a,n,Ks)}e.memoizedProps=e.pendingProps,n===null?Rc(e):Ue=n}function yr(e,n,a,l){Ls=pi=null,jh(n),rr=null,yl=0;var f=n.return;try{if(kb(e,f,n,a,Be)){vt=1,yc(e,zn(a,e.current)),Ue=null;return}}catch(d){if(f!==null)throw Ue=f,d;vt=1,yc(e,zn(a,e.current)),Ue=null;return}n.flags&32768?(Fe||l===1?e=!0:dr||(Be&536870912)!==0?e=!1:(Ea=e=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),kp(n,e)):Rc(n)}function Rc(e){var n=e;do{if((n.flags&32768)!==0){kp(n,Ea);return}e=n.return;var a=Lb(n.alternate,n,Ks);if(a!==null){Ue=a;return}if(n=n.sibling,n!==null){Ue=n;return}Ue=n=e}while(n!==null);vt===0&&(vt=5)}function kp(e,n){do{var a=Pb(e.alternate,e);if(a!==null){a.flags&=32767,Ue=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=a}while(e!==null);vt=6,Ue=null}function zp(e,n,a,l,f,d,y,_,D){e.cancelPendingCommit=null;do Dc();while(Lt!==0);if((We&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=Wu,Gu(e,a,d,y,_,D),e===ot&&(Ue=ot=null,Be=0),gr=n,wa=e,Xs=a,of=d,cf=f,jp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Jb(na,function(){return qp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,f=te.p,te.p=2,y=We,We|=4;try{Bb(e,n,a)}finally{We=y,te.p=f,H.T=l}}Lt=1,Up(),Lp(),Pp()}}function Up(){if(Lt===1){Lt=0;var e=wa,n=gr,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=te.p;te.p=2;var f=We;We|=4;try{xp(n,e);var d=Nf,y=Nm(e.containerInfo),_=d.focusedElem,D=d.selectionRange;if(y!==_&&_&&_.ownerDocument&&Tm(_.ownerDocument.documentElement,_)){if(D!==null&&Qu(_)){var P=D.start,Q=D.end;if(Q===void 0&&(Q=P),"selectionStart"in _)_.selectionStart=P,_.selectionEnd=Math.min(Q,_.value.length);else{var J=_.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var $=q.getSelection(),ye=_.textContent.length,je=Math.min(D.start,ye),lt=D.end===void 0?je:Math.min(D.end,ye);!$.extend&&je>lt&&(y=lt,lt=je,je=y);var z=Em(_,je),O=Em(_,lt);if(z&&O&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==O.node||$.focusOffset!==O.offset)){var L=J.createRange();L.setStart(z.node,z.offset),$.removeAllRanges(),je>lt?($.addRange(L),$.extend(O.node,O.offset)):(L.setEnd(O.node,O.offset),$.addRange(L))}}}}for(J=[],$=_;$=$.parentNode;)$.nodeType===1&&J.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<J.length;_++){var X=J[_];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Hc=!!Tf,Nf=Tf=null}finally{We=f,te.p=l,H.T=a}}e.current=n,Lt=2}}function Lp(){if(Lt===2){Lt=0;var e=wa,n=gr,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=te.p;te.p=2;var f=We;We|=4;try{dp(e,n.alternate,n)}finally{We=f,te.p=l,H.T=a}}Lt=3}}function Pp(){if(Lt===4||Lt===3){Lt=0,_o();var e=wa,n=gr,a=Xs,l=jp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Lt=5:(Lt=0,gr=wa=null,Bp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Na=null),Ms(a),n=n.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Fn,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=H.T,f=te.p,te.p=2,H.T=null;try{for(var d=e.onRecoverableError,y=0;y<l.length;y++){var _=l[y];d(_.value,{componentStack:_.stack})}}finally{H.T=n,te.p=f}}(Xs&3)!==0&&Dc(),ws(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===uf?Vl++:(Vl=0,uf=e):Vl=0,Ol(0)}}function Bp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,gl(n)))}function Dc(){return Up(),Lp(),Pp(),qp()}function qp(){if(Lt!==5)return!1;var e=wa,n=of;of=0;var a=Ms(Xs),l=H.T,f=te.p;try{te.p=32>a?32:a,H.T=null,a=cf,cf=null;var d=wa,y=Xs;if(Lt=0,gr=wa=null,Xs=0,(We&6)!==0)throw Error(r(331));var _=We;if(We|=4,Tp(d.current),bp(d,d.current,y,a),We=_,Ol(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Fn,d)}catch{}return!0}finally{te.p=f,H.T=l,Bp(e,n)}}function Hp(e,n,a){n=zn(a,n),n=Bh(e.stateNode,n,2),e=xa(e,n,2),e!==null&&(Wa(e,2),ws(e))}function st(e,n,a){if(e.tag===3)Hp(e,e,a);else for(;n!==null;){if(n.tag===3){Hp(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Na===null||!Na.has(l))){e=zn(a,e),a=Gg(2),l=xa(n,a,2),l!==null&&(Fg(a,l,n,e),Wa(l,2),ws(l));break}}n=n.return}}function df(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Gb;var f=new Set;l.set(n,f)}else f=l.get(n),f===void 0&&(f=new Set,l.set(n,f));f.has(a)||(af=!0,f.add(a),e=Kb.bind(null,e,n,a),n.then(e,e))}function Kb(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ot===e&&(Be&a)===a&&(vt===4||vt===3&&(Be&62914560)===Be&&300>ln()-wc?(We&2)===0&&pr(e,0):rf|=a,mr===Be&&(mr=0)),ws(e)}function Gp(e,n){n===0&&(n=So()),e=di(e,n),e!==null&&(Wa(e,n),ws(e))}function Xb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Gp(e,a)}function Zb(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Gp(e,a)}function Jb(e,n){return Ze(e,n)}var Ic=null,xr=null,mf=!1,Mc=!1,gf=!1,Sa=0;function ws(e){e!==xr&&e.next===null&&(xr===null?Ic=xr=e:xr=xr.next=e),Mc=!0,mf||(mf=!0,e_())}function Ol(e,n){if(!gf&&Mc){gf=!0;do for(var a=!1,l=Ic;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var y=l.suspendedLanes,_=l.pingedLanes;d=(1<<31-Et(42|e)+1)-1,d&=f&~(y&~_),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Qp(l,d))}else d=Be,d=ls(l,l===ot?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Yn(l,d)||(a=!0,Qp(l,d));l=l.next}while(a);gf=!1}}function Wb(){Fp()}function Fp(){Mc=mf=!1;var e=0;Sa!==0&&u_()&&(e=Sa);for(var n=ln(),a=null,l=Ic;l!==null;){var f=l.next,d=Yp(l,n);d===0?(l.next=null,a===null?Ic=f:a.next=f,f===null&&(xr=a)):(a=l,(e!==0||(d&3)!==0)&&(Mc=!0)),l=f}Lt!==0&&Lt!==5||Ol(e),Sa!==0&&(Sa=0)}function Yp(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-Et(d),_=1<<y,D=f[y];D===-1?((_&a)===0||(_&l)!==0)&&(f[y]=Hu(_,n)):D<=n&&(e.expiredLanes|=_),d&=~_}if(n=ot,a=Be,a=ls(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(nt===2||nt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Bt(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Yn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&Bt(l),Ms(a)){case 2:case 8:a=Fr;break;case 32:a=na;break;case 268435456:a=Eo;break;default:a=na}return l=$p.bind(null,e),a=Ze(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&Bt(l),e.callbackPriority=2,e.callbackNode=null,2}function $p(e,n){if(Lt!==0&&Lt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Dc()&&e.callbackNode!==a)return null;var l=Be;return l=ls(e,e===ot?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Ap(e,l,n),Yp(e,ln()),e.callbackNode!=null&&e.callbackNode===a?$p.bind(null,e):null)}function Qp(e,n){if(Dc())return null;Ap(e,n,!0)}function e_(){f_(function(){(We&6)!==0?Ze(Gr,Wb):Fp()})}function pf(){if(Sa===0){var e=sr;e===0&&(e=is,is<<=1,(is&261888)===0&&(is=256)),Sa=e}return Sa}function Kp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:qi(""+e)}function Xp(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function t_(e,n,a,l,f){if(n==="submit"&&a&&a.stateNode===f){var d=Kp((f[qt]||null).action),y=l.submitter;y&&(n=(n=y[qt]||null)?Kp(n.formAction):y.getAttribute("formAction"),n!==null&&(d=n,y=null));var _=new xs("action","action",null,l,f);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Sa!==0){var D=y?Xp(f,y):new FormData(f);Oh(a,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(_.preventDefault(),D=y?Xp(f,y):new FormData(f),Oh(a,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var yf=0;yf<Ju.length;yf++){var xf=Ju[yf],n_=xf.toLowerCase(),s_=xf[0].toUpperCase()+xf.slice(1);es(n_,"on"+s_)}es(Sm,"onAnimationEnd"),es(Am,"onAnimationIteration"),es(Cm,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(vb,"onTransitionRun"),es(bb,"onTransitionStart"),es(_b,"onTransitionCancel"),es(Rm,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function Zp(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var y=l.length-1;0<=y;y--){var _=l[y],D=_.instance,P=_.currentTarget;if(_=_.listener,D!==d&&f.isPropagationStopped())break e;d=_,f.currentTarget=P;try{d(f)}catch(Q){Qo(Q)}f.currentTarget=null,d=D}else for(y=0;y<l.length;y++){if(_=l[y],D=_.instance,P=_.currentTarget,_=_.listener,D!==d&&f.isPropagationStopped())break e;d=_,f.currentTarget=P;try{d(f)}catch(Q){Qo(Q)}f.currentTarget=null,d=D}}}}function Le(e,n){var a=n[zi];a===void 0&&(a=n[zi]=new Set);var l=e+"__bubble";a.has(l)||(Jp(n,e,2,!1),a.add(l))}function vf(e,n,a){var l=0;n&&(l|=4),Jp(a,e,l,n)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function bf(e){if(!e[Vc]){e[Vc]=!0,Qr.forEach(function(a){a!=="selectionchange"&&(a_.has(a)||vf(a,!1,e),vf(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Vc]||(n[Vc]=!0,vf("selectionchange",!1,n))}}function Jp(e,n,a,l){switch(Sy(n)){case 2:var f=I_;break;case 8:f=M_;break;default:f=Of}a=f.bind(null,n,a,e),f=void 0,!ii||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(n,a,{capture:!0,passive:f}):e.addEventListener(n,a,!0):f!==void 0?e.addEventListener(n,a,{passive:f}):e.addEventListener(n,a,!1)}function _f(e,n,a,l,f){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var _=l.stateNode.containerInfo;if(_===f)break;if(y===4)for(y=l.return;y!==null;){var D=y.tag;if((D===3||D===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;_!==null;){if(y=hs(_),y===null)return;if(D=y.tag,D===5||D===6||D===26||D===27){l=d=y;continue e}_=_.parentNode}}l=l.return}oa(function(){var P=d,Q=Mn(a),J=[];e:{var q=Dm.get(e);if(q!==void 0){var $=xs,ye=e;switch(e){case"keypress":if(li(a)===0)break e;case"keydown":case"keyup":$=Fo;break;case"focusin":ye="focus",$=ci;break;case"focusout":ye="blur",$=ci;break;case"beforeblur":case"afterblur":$=ci;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=ko;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=g;break;case Sm:case Am:case Cm:$=Uo;break;case Rm:$=T;break;case"scroll":case"scrollend":$=rl;break;case"wheel":$=Y;break;case"copy":case"cut":case"paste":$=Lo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ks;break;case"toggle":case"beforetoggle":$=Oe}var je=(n&4)!==0,lt=!je&&(e==="scroll"||e==="scrollend"),z=je?q!==null?q+"Capture":null:q;je=[];for(var O=P,L;O!==null;){var X=O;if(L=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||L===null||z===null||(X=Xn(O,z),X!=null&&je.push(zl(O,X,L))),lt)break;O=O.return}0<je.length&&(q=new $(q,ye,null,a,Q),J.push({event:q,listeners:je}))}}if((n&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",q&&a!==sl&&(ye=a.relatedTarget||a.fromElement)&&(hs(ye)||ye[cs]))break e;if(($||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,$?(ye=a.relatedTarget||a.toElement,$=P,ye=ye?hs(ye):null,ye!==null&&(lt=h(ye),je=ye.tag,ye!==lt||je!==5&&je!==27&&je!==6)&&(ye=null)):($=null,ye=P),$!==ye)){if(je=ll,X="onMouseLeave",z="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(je=ks,X="onPointerLeave",z="onPointerEnter",O="pointer"),lt=$==null?q:_n($),L=ye==null?q:_n(ye),q=new je(X,O+"leave",$,a,Q),q.target=lt,q.relatedTarget=L,X=null,hs(Q)===P&&(je=new je(z,O+"enter",ye,a,Q),je.target=L,je.relatedTarget=lt,X=je),lt=X,$&&ye)t:{for(je=i_,z=$,O=ye,L=0,X=z;X;X=je(X))L++;X=0;for(var Ee=O;Ee;Ee=je(Ee))X++;for(;0<L-X;)z=je(z),L--;for(;0<X-L;)O=je(O),X--;for(;L--;){if(z===O||O!==null&&z===O.alternate){je=z;break t}z=je(z),O=je(O)}je=null}else je=null;$!==null&&Wp(J,q,$,je,!1),ye!==null&&lt!==null&&Wp(J,lt,ye,je,!0)}}e:{if(q=P?_n(P):window,$=q.nodeName&&q.nodeName.toLowerCase(),$==="select"||$==="input"&&q.type==="file")var Ke=pm;else if(mm(q))if(ym)Ke=pb;else{Ke=mb;var ve=db}else $=q.nodeName,!$||$.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?P&&Bi(P.elementType)&&(Ke=pm):Ke=gb;if(Ke&&(Ke=Ke(e,P))){gm(J,Ke,a,Q);break e}ve&&ve(e,q,P),e==="focusout"&&P&&q.type==="number"&&P.memoizedProps.value!=null&&el(q,"number",q.value)}switch(ve=P?_n(P):window,e){case"focusin":(mm(ve)||ve.contentEditable==="true")&&(Ki=ve,Ku=P,fl=null);break;case"focusout":fl=Ku=Ki=null;break;case"mousedown":Xu=!0;break;case"contextmenu":case"mouseup":case"dragend":Xu=!1,wm(J,a,Q);break;case"selectionchange":if(xb)break;case"keydown":case"keyup":wm(J,a,Q)}var ze;if(Je)e:{switch(e){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Qi?ui(e,a)&&(qe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(qe="onCompositionStart");qe&&(_s&&a.locale!=="ko"&&(Qi||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Qi&&(ze=il()):(ys=Q,al="value"in ys?ys.value:ys.textContent,Qi=!0)),ve=Oc(P,qe),0<ve.length&&(qe=new bs(qe,e,null,a,Q),J.push({event:qe,listeners:ve}),ze?qe.data=ze:(ze=$i(a),ze!==null&&(qe.data=ze)))),(ze=On?cb(e,a):ub(e,a))&&(qe=Oc(P,"onBeforeInput"),0<qe.length&&(ve=new bs("onBeforeInput","beforeinput",null,a,Q),J.push({event:ve,listeners:qe}),ve.data=ze)),t_(J,e,P,a,Q)}Zp(J,n)})}function zl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Oc(e,n){for(var a=n+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Xn(e,a),f!=null&&l.unshift(zl(e,f,d)),f=Xn(e,n),f!=null&&l.push(zl(e,f,d))),e.tag===3)return l;e=e.return}return[]}function i_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wp(e,n,a,l,f){for(var d=n._reactName,y=[];a!==null&&a!==l;){var _=a,D=_.alternate,P=_.stateNode;if(_=_.tag,D!==null&&D===l)break;_!==5&&_!==26&&_!==27||P===null||(D=P,f?(P=Xn(a,d),P!=null&&y.unshift(zl(a,P,D))):f||(P=Xn(a,d),P!=null&&y.push(zl(a,P,D)))),a=a.return}y.length!==0&&e.push({event:n,listeners:y})}var r_=/\r\n?/g,l_=/\u0000|\uFFFD/g;function ey(e){return(typeof e=="string"?e:""+e).replace(r_,`
`).replace(l_,"")}function ty(e,n){return n=ey(n),ey(e)===n}function rt(e,n,a,l,f,d){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||fn(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&fn(e,""+l);break;case"className":En(e,"class",l);break;case"tabIndex":En(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":En(e,a,l);break;case"style":nl(e,l,d);break;case"data":if(n!=="object"){En(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=qi(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&rt(e,n,"name",f.name,f,null),rt(e,n,"formEncType",f.formEncType,f,null),rt(e,n,"formMethod",f.formMethod,f,null),rt(e,n,"formTarget",f.formTarget,f,null)):(rt(e,n,"encType",f.encType,f,null),rt(e,n,"method",f.method,f,null),rt(e,n,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=qi(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Kn);break;case"onScroll":l!=null&&Le("scroll",e);break;case"onScrollEnd":l!=null&&Le("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=qi(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Le("beforetoggle",e),Le("toggle",e),Li(e,"popover",l);break;case"xlinkActuate":Rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Li(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Oo.get(a)||a,Li(e,a,l))}}function Ef(e,n,a,l,f,d){switch(a){case"style":nl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?fn(e,l):(typeof l=="number"||typeof l=="bigint")&&fn(e,""+l);break;case"onScroll":l!=null&&Le("scroll",e);break;case"onScrollEnd":l!=null&&Le("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),n=a.slice(2,f?a.length-7:void 0),d=e[qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,f);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Li(e,a,l)}}}function Jt(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",e),Le("load",e);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:rt(e,n,d,y,a,null)}}f&&rt(e,n,"srcSet",a.srcSet,a,null),l&&rt(e,n,"src",a.src,a,null);return;case"input":Le("invalid",e);var _=d=y=f=null,D=null,P=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":y=Q;break;case"checked":D=Q;break;case"defaultChecked":P=Q;break;case"value":d=Q;break;case"defaultValue":_=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,n));break;default:rt(e,n,l,Q,a,null)}}Io(e,d,_,D,P,y,f,!1);return;case"select":Le("invalid",e),l=y=d=null;for(f in a)if(a.hasOwnProperty(f)&&(_=a[f],_!=null))switch(f){case"value":d=_;break;case"defaultValue":y=_;break;case"multiple":l=_;default:rt(e,n,f,_,a,null)}n=d,a=y,e.multiple=!!l,n!=null?aa(e,!!l,n,!1):a!=null&&aa(e,!!l,a,!0);return;case"textarea":Le("invalid",e),d=f=l=null;for(y in a)if(a.hasOwnProperty(y)&&(_=a[y],_!=null))switch(y){case"value":l=_;break;case"defaultValue":f=_;break;case"children":d=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:rt(e,n,y,_,a,null)}ia(e,l,f,d);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:rt(e,n,D,l,a,null)}return;case"dialog":Le("beforetoggle",e),Le("toggle",e),Le("cancel",e),Le("close",e);break;case"iframe":case"object":Le("load",e);break;case"video":case"audio":for(l=0;l<kl.length;l++)Le(kl[l],e);break;case"image":Le("error",e),Le("load",e);break;case"details":Le("toggle",e);break;case"embed":case"source":case"link":Le("error",e),Le("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:rt(e,n,P,l,a,null)}return;default:if(Bi(n)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Ef(e,n,Q,l,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(l=a[_],l!=null&&rt(e,n,_,l,a,null))}function o_(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,y=null,_=null,D=null,P=null,Q=null;for($ in a){var J=a[$];if(a.hasOwnProperty($)&&J!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=J;default:l.hasOwnProperty($)||rt(e,n,$,null,l,J)}}for(var q in l){var $=l[q];if(J=a[q],l.hasOwnProperty(q)&&($!=null||J!=null))switch(q){case"type":d=$;break;case"name":f=$;break;case"checked":P=$;break;case"defaultChecked":Q=$;break;case"value":y=$;break;case"defaultValue":_=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,n));break;default:$!==J&&rt(e,n,q,$,l,J)}}Pi(e,y,_,D,P,Q,d,f);return;case"select":$=y=_=q=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":$=D;default:l.hasOwnProperty(d)||rt(e,n,d,null,l,D)}for(f in l)if(d=l[f],D=a[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":q=d;break;case"defaultValue":_=d;break;case"multiple":y=d;default:d!==D&&rt(e,n,f,d,l,D)}n=_,a=y,l=$,q!=null?aa(e,!!a,q,!1):!!l!=!!a&&(n!=null?aa(e,!!a,n,!0):aa(e,!!a,a?[]:"",!1));return;case"textarea":$=q=null;for(_ in a)if(f=a[_],a.hasOwnProperty(_)&&f!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:rt(e,n,_,null,l,f)}for(y in l)if(f=l[y],d=a[y],l.hasOwnProperty(y)&&(f!=null||d!=null))switch(y){case"value":q=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&rt(e,n,y,f,l,d)}Mo(e,q,$);return;case"option":for(var ye in a)if(q=a[ye],a.hasOwnProperty(ye)&&q!=null&&!l.hasOwnProperty(ye))switch(ye){case"selected":e.selected=!1;break;default:rt(e,n,ye,null,l,q)}for(D in l)if(q=l[D],$=a[D],l.hasOwnProperty(D)&&q!==$&&(q!=null||$!=null))switch(D){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:rt(e,n,D,q,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in a)q=a[je],a.hasOwnProperty(je)&&q!=null&&!l.hasOwnProperty(je)&&rt(e,n,je,null,l,q);for(P in l)if(q=l[P],$=a[P],l.hasOwnProperty(P)&&q!==$&&(q!=null||$!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,n));break;default:rt(e,n,P,q,l,$)}return;default:if(Bi(n)){for(var lt in a)q=a[lt],a.hasOwnProperty(lt)&&q!==void 0&&!l.hasOwnProperty(lt)&&Ef(e,n,lt,void 0,l,q);for(Q in l)q=l[Q],$=a[Q],!l.hasOwnProperty(Q)||q===$||q===void 0&&$===void 0||Ef(e,n,Q,q,l,$);return}}for(var z in a)q=a[z],a.hasOwnProperty(z)&&q!=null&&!l.hasOwnProperty(z)&&rt(e,n,z,null,l,q);for(J in l)q=l[J],$=a[J],!l.hasOwnProperty(J)||q===$||q==null&&$==null||rt(e,n,J,q,l,$)}function ny(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function c_(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,y=f.initiatorType,_=f.duration;if(d&&_&&ny(y)){for(y=0,_=f.responseEnd,l+=1;l<a.length;l++){var D=a[l],P=D.startTime;if(P>_)break;var Q=D.transferSize,J=D.initiatorType;Q&&ny(J)&&(D=D.responseEnd,y+=Q*(D<_?1:(_-P)/(D-P)))}if(--l,n+=8*(d+y)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Tf=null,Nf=null;function kc(e){return e.nodeType===9?e:e.ownerDocument}function sy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ay(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function wf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var jf=null;function u_(){var e=window.event;return e&&e.type==="popstate"?e===jf?!1:(jf=e,!0):(jf=null,!1)}var iy=typeof setTimeout=="function"?setTimeout:void 0,h_=typeof clearTimeout=="function"?clearTimeout:void 0,ry=typeof Promise=="function"?Promise:void 0,f_=typeof queueMicrotask=="function"?queueMicrotask:typeof ry<"u"?function(e){return ry.resolve(null).then(e).catch(d_)}:iy;function d_(e){setTimeout(function(){throw e})}function Aa(e){return e==="head"}function ly(e,n){var a=n,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),Er(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ul(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ul(a);for(var d=a.firstChild;d;){var y=d.nextSibling,_=d.nodeName;d[us]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&Ul(e.ownerDocument.body);a=f}while(a);Er(n)}function oy(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Sf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Sf(a),Ui(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function m_(e,n,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[us])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=qn(e.nextSibling),e===null)break}return null}function g_(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=qn(e.nextSibling),e===null))return null;return e}function cy(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=qn(e.nextSibling),e===null))return null;return e}function Af(e){return e.data==="$?"||e.data==="$~"}function Cf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function p_(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function qn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Rf=null;function uy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return qn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function hy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function fy(e,n,a){switch(n=kc(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Ul(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ui(e)}var Hn=new Map,dy=new Set;function zc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zs=te.d;te.d={f:y_,r:x_,D:v_,C:b_,L:__,m:E_,X:N_,S:T_,M:w_};function y_(){var e=Zs.f(),n=Ac();return e||n}function x_(e){var n=In(e);n!==null&&n.tag===5&&n.type==="form"?Rg(n):Zs.r(e)}var vr=typeof document>"u"?null:document;function my(e,n,a){var l=vr;if(l&&typeof n=="string"&&n){var f=hn(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),dy.has(f)||(dy.add(f),e={rel:e,crossOrigin:a,href:n},l.querySelector(f)===null&&(n=l.createElement("link"),Jt(n,"link",e),Ct(n),l.head.appendChild(n)))}}function v_(e){Zs.D(e),my("dns-prefetch",e,null)}function b_(e,n){Zs.C(e,n),my("preconnect",e,n)}function __(e,n,a){Zs.L(e,n,a);var l=vr;if(l&&e&&n){var f='link[rel="preload"][as="'+hn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+hn(a.imageSizes)+'"]')):f+='[href="'+hn(e)+'"]';var d=f;switch(n){case"style":d=br(e);break;case"script":d=_r(e)}Hn.has(d)||(e=C({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Hn.set(d,e),l.querySelector(f)!==null||n==="style"&&l.querySelector(Ll(d))||n==="script"&&l.querySelector(Pl(d))||(n=l.createElement("link"),Jt(n,"link",e),Ct(n),l.head.appendChild(n)))}}function E_(e,n){Zs.m(e,n);var a=vr;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+hn(l)+'"][href="'+hn(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=_r(e)}if(!Hn.has(d)&&(e=C({rel:"modulepreload",href:e},n),Hn.set(d,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(d)))return}l=a.createElement("link"),Jt(l,"link",e),Ct(l),a.head.appendChild(l)}}}function T_(e,n,a){Zs.S(e,n,a);var l=vr;if(l&&e){var f=fs(l).hoistableStyles,d=br(e);n=n||"default";var y=f.get(d);if(!y){var _={loading:0,preload:null};if(y=l.querySelector(Ll(d)))_.loading=5;else{e=C({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Hn.get(d))&&Df(e,a);var D=y=l.createElement("link");Ct(D),Jt(D,"link",e),D._p=new Promise(function(P,Q){D.onload=P,D.onerror=Q}),D.addEventListener("load",function(){_.loading|=1}),D.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Uc(y,n,l)}y={type:"stylesheet",instance:y,count:1,state:_},f.set(d,y)}}}function N_(e,n){Zs.X(e,n);var a=vr;if(a&&e){var l=fs(a).hoistableScripts,f=_r(e),d=l.get(f);d||(d=a.querySelector(Pl(f)),d||(e=C({src:e,async:!0},n),(n=Hn.get(f))&&If(e,n),d=a.createElement("script"),Ct(d),Jt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function w_(e,n){Zs.M(e,n);var a=vr;if(a&&e){var l=fs(a).hoistableScripts,f=_r(e),d=l.get(f);d||(d=a.querySelector(Pl(f)),d||(e=C({src:e,async:!0,type:"module"},n),(n=Hn.get(f))&&If(e,n),d=a.createElement("script"),Ct(d),Jt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function gy(e,n,a,l){var f=(f=B.current)?zc(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=br(a.href),a=fs(f).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=br(a.href);var d=fs(f).hoistableStyles,y=d.get(e);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=f.querySelector(Ll(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Hn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(e,a),d||j_(f,e,a,y.state))),n&&l===null)throw Error(r(528,""));return y}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=_r(a),a=fs(f).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function br(e){return'href="'+hn(e)+'"'}function Ll(e){return'link[rel="stylesheet"]['+e+"]"}function py(e){return C({},e,{"data-precedence":e.precedence,precedence:null})}function j_(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Jt(n,"link",a),Ct(n),e.head.appendChild(n))}function _r(e){return'[src="'+hn(e)+'"]'}function Pl(e){return"script[async]"+e}function yy(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+hn(a.href)+'"]');if(l)return n.instance=l,Ct(l),l;var f=C({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ct(l),Jt(l,"style",f),Uc(l,a.precedence,e),n.instance=l;case"stylesheet":f=br(a.href);var d=e.querySelector(Ll(f));if(d)return n.state.loading|=4,n.instance=d,Ct(d),d;l=py(a),(f=Hn.get(f))&&Df(l,f),d=(e.ownerDocument||e).createElement("link"),Ct(d);var y=d;return y._p=new Promise(function(_,D){y.onload=_,y.onerror=D}),Jt(d,"link",l),n.state.loading|=4,Uc(d,a.precedence,e),n.instance=d;case"script":return d=_r(a.src),(f=e.querySelector(Pl(d)))?(n.instance=f,Ct(f),f):(l=a,(f=Hn.get(d))&&(l=C({},a),If(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ct(f),Jt(f,"link",l),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Uc(l,a.precedence,e));return n.instance}function Uc(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,y=0;y<l.length;y++){var _=l[y];if(_.dataset.precedence===n)d=_;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Df(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function If(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Lc=null;function xy(e,n,a){if(Lc===null){var l=new Map,f=Lc=new Map;f.set(a,l)}else f=Lc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[us]||d[At]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(n)||"";y=e+y;var _=l.get(y);_?_.push(d):l.set(y,[d])}}return l}function vy(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function S_(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function by(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function A_(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=br(l.href),d=n.querySelector(Ll(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Pc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=d,Ct(d);return}d=n.ownerDocument||n,l=py(l),(f=Hn.get(f))&&Df(l,f),d=d.createElement("link"),Ct(d);var y=d;y._p=new Promise(function(_,D){y.onload=_,y.onerror=D}),Jt(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Pc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Mf=0;function C_(e,n){return e.stylesheets&&e.count===0&&qc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&qc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Mf===0&&(Mf=62500*c_());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&qc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Mf?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Pc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Bc=null;function qc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Bc=new Map,n.forEach(R_,e),Bc=null,Pc.call(e))}function R_(e,n){if(!(n.state.loading&4)){var a=Bc.get(e);if(a)var l=a.get(null);else{a=new Map,Bc.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var y=f[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}f=n.instance,y=f.getAttribute("data-precedence"),d=a.get(y)||l,d===l&&a.set(null,f),a.set(y,f),this.count++,l=Pc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var Bl={$$typeof:de,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function D_(e,n,a,l,f,d,y,_,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.hiddenUpdates=os(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function _y(e,n,a,l,f,d,y,_,D,P,Q,J){return e=new D_(e,n,a,y,D,P,Q,J,_),n=1,d===!0&&(n|=24),d=Nn(3,null,null,n),e.current=d,d.stateNode=e,n=hh(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:n},gh(d),e}function Ey(e){return e?(e=Ji,e):Ji}function Ty(e,n,a,l,f,d){f=Ey(f),l.context===null?l.context=f:l.pendingContext=f,l=ya(n),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=xa(e,l,n),a!==null&&(yn(a,e,n),vl(a,e,n))}function Ny(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Vf(e,n){Ny(e,n),(e=e.alternate)&&Ny(e,n)}function wy(e){if(e.tag===13||e.tag===31){var n=di(e,67108864);n!==null&&yn(n,e,67108864),Vf(e,67108864)}}function jy(e){if(e.tag===13||e.tag===31){var n=Cn();n=ti(n);var a=di(e,n);a!==null&&yn(a,e,n),Vf(e,n)}}var Hc=!0;function I_(e,n,a,l){var f=H.T;H.T=null;var d=te.p;try{te.p=2,Of(e,n,a,l)}finally{te.p=d,H.T=f}}function M_(e,n,a,l){var f=H.T;H.T=null;var d=te.p;try{te.p=8,Of(e,n,a,l)}finally{te.p=d,H.T=f}}function Of(e,n,a,l){if(Hc){var f=kf(l);if(f===null)_f(e,n,l,Gc,a),Ay(e,l);else if(O_(f,e,n,a,l))l.stopPropagation();else if(Ay(e,l),n&4&&-1<V_.indexOf(e)){for(;f!==null;){var d=In(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=rs(d.pendingLanes);if(y!==0){var _=d;for(_.pendingLanes|=2,_.entangledLanes|=2;y;){var D=1<<31-Et(y);_.entanglements[1]|=D,y&=~D}ws(d),(We&6)===0&&(jc=ln()+500,Ol(0))}}break;case 31:case 13:_=di(d,2),_!==null&&yn(_,d,2),Ac(),Vf(d,2)}if(d=kf(l),d===null&&_f(e,n,l,Gc,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else _f(e,n,l,null,a)}}function kf(e){return e=Mn(e),zf(e)}var Gc=null;function zf(e){if(Gc=null,e=hs(e),e!==null){var n=h(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=m(n),e!==null)return e;e=null}else if(a===31){if(e=p(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Gc=e,null}function Sy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Za()){case Gr:return 2;case Fr:return 8;case na:case qu:return 32;case Eo:return 268435456;default:return 32}default:return 32}}var Uf=!1,Ca=null,Ra=null,Da=null,ql=new Map,Hl=new Map,Ia=[],V_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ay(e,n){switch(e){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":Ra=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":ql.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(n.pointerId)}}function Gl(e,n,a,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},n!==null&&(n=In(n),n!==null&&wy(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function O_(e,n,a,l,f){switch(n){case"focusin":return Ca=Gl(Ca,e,n,a,l,f),!0;case"dragenter":return Ra=Gl(Ra,e,n,a,l,f),!0;case"mouseover":return Da=Gl(Da,e,n,a,l,f),!0;case"pointerover":var d=f.pointerId;return ql.set(d,Gl(ql.get(d)||null,e,n,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Hl.set(d,Gl(Hl.get(d)||null,e,n,a,l,f)),!0}return!1}function Cy(e){var n=hs(e.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=m(a),n!==null){e.blockedOn=n,$n(e.priority,function(){jy(a)});return}}else if(n===31){if(n=p(a),n!==null){e.blockedOn=n,$n(e.priority,function(){jy(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=kf(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);sl=l,a.target.dispatchEvent(l),sl=null}else return n=In(a),n!==null&&wy(n),e.blockedOn=a,!1;n.shift()}return!0}function Ry(e,n,a){Fc(e)&&a.delete(n)}function k_(){Uf=!1,Ca!==null&&Fc(Ca)&&(Ca=null),Ra!==null&&Fc(Ra)&&(Ra=null),Da!==null&&Fc(Da)&&(Da=null),ql.forEach(Ry),Hl.forEach(Ry)}function Yc(e,n){e.blockedOn===n&&(e.blockedOn=null,Uf||(Uf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,k_)))}var $c=null;function Dy(e){$c!==e&&($c=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){$c===e&&($c=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],f=e[n+2];if(typeof l!="function"){if(zf(l||a)===null)continue;break}var d=In(a);d!==null&&(e.splice(n,3),n-=3,Oh(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Er(e){function n(D){return Yc(D,e)}Ca!==null&&Yc(Ca,e),Ra!==null&&Yc(Ra,e),Da!==null&&Yc(Da,e),ql.forEach(n),Hl.forEach(n);for(var a=0;a<Ia.length;a++){var l=Ia[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ia.length&&(a=Ia[0],a.blockedOn===null);)Cy(a),a.blockedOn===null&&Ia.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],y=f[qt]||null;if(typeof d=="function")y||Dy(a);else if(y){var _=null;if(d&&d.hasAttribute("formAction")){if(f=d,y=d[qt]||null)_=y.formAction;else if(zf(f)!==null)continue}else _=y.action;typeof _=="function"?a[l+1]=_:(a.splice(l,3),l-=3),Dy(a)}}}function Iy(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Lf(e){this._internalRoot=e}Qc.prototype.render=Lf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Cn();Ty(a,l,e,n,null,null)},Qc.prototype.unmount=Lf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ty(e.current,2,null,e,null,null),Ac(),n[cs]=null}};function Qc(e){this._internalRoot=e}Qc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ao();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Ia.length&&n!==0&&n<Ia[a].priority;a++);Ia.splice(a,0,e),a===0&&Cy(e)}};var My=t.version;if(My!=="19.2.4")throw Error(r(527,My,"19.2.4"));te.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=x(n),e=e!==null?N(e):null,e=e===null?null:e.stateNode,e};var z_={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{Fn=Kc.inject(z_),$t=Kc}catch{}}return Yl.createRoot=function(e,n){if(!c(e))throw Error(r(299));var a=!1,l="",f=Pg,d=Bg,y=qg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=_y(e,1,!1,null,null,a,l,null,f,d,y,Iy),e[cs]=n.current,bf(e),new Lf(n)},Yl.hydrateRoot=function(e,n,a){if(!c(e))throw Error(r(299));var l=!1,f="",d=Pg,y=Bg,_=qg,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=_y(e,1,!0,n,a??null,l,f,D,d,y,_,Iy),n.context=Ey(null),a=n.current,l=Cn(),l=ti(l),f=ya(l),f.callback=null,xa(a,f,l),a=l,n.current.lanes=a,Wa(n,a),ws(n),e[cs]=n.current,bf(e),new Qc(n)},Yl.version="19.2.4",Yl}var Hy;function $_(){if(Hy)return qf.exports;Hy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),qf.exports=Y_(),qf.exports}var Q_=$_();const K_=o0(Q_),ct={projects:["R72","3","A"],contractors:["",""],supervisors:[" "," "," "],locations:["","",""],goals:["","",""],processes:["","",""],topics:["","",""],cautions:["","",""],subcontractors:["","","",""]},X_={project:ct.projects[0],month:new Date().getMonth()+1,contractor:ct.contractors[0],date:new Date().toISOString().split("T")[0],startTime:"08:00",endTime:"08:30",location:ct.locations[0],instructor:ct.supervisors[0],goal:ct.goals[0],process:ct.processes[0],topic:ct.topics[0],caution:ct.cautions[0],photoUrl:null,signatures:[]},Z_={count:1,project:ct.projects[0],date:new Date().toISOString().split("T")[0],contractor:ct.contractors[0],startTime:"13:00",endTime:"14:00",location:ct.locations[0],gcAttendees:[{role:"",name:ct.supervisors[0]},{role:"",name:""},{role:"",name:ct.supervisors[0]},{role:"",name:ct.supervisors[1]},{role:"",name:""},{role:"",name:""},{role:"",name:""},{role:"",name:""}],subcontractorAttendees:[]},J_={year:new Date().getFullYear(),month:new Date().getMonth()+1,createdDate:new Date().toISOString().split("T")[0],project:ct.projects[0],location:ct.locations[1],author:ct.supervisors[0],trainingDate:"",trainingLeader:ct.supervisors[0],councilDate:"",councilLeader:"",patrolDate:"",processRows:[{id:"1",category:"",name:"",bars:[]},{id:"2",category:"",name:"",bars:[]},{id:"3",category:"",name:"",bars:[]},{id:"4",category:"",name:"",bars:[]},{id:"5",category:"",name:"",bars:[]},{id:"6",category:"",name:"",bars:[]},{id:"7",category:"",name:"",bars:[]},{id:"8",category:"",name:"",bars:[]},{id:"9",category:"",name:"",bars:[]},{id:"10",category:"()",name:"",bars:[]},{id:"11",category:"()",name:"",bars:[]}],predictions:["","","","",""],countermeasures:["","","","",""],inspectionItems:["","","","",""],safetyDuty:{},lastMonthReflection:""},Yf={project:ct.projects[0],director:ct.supervisors[0],furigana:"",name:"",birthEra:"Showa",birthYear:"",birthMonth:"",birthDay:"",gender:"Male",age:0,company:ct.subcontractors[0],subcontractorRank:"",experienceYears:10,experienceMonths:0,jobType:"",jobTypeOther:"",address:"",phone:"",emergencyContactName:"",emergencyContactRelation:"",emergencyContactPhone:"",bloodType:"A",bloodTypeRh:"Plus",healthCheckYear:new Date().getFullYear()-2018,healthCheckMonth:new Date().getMonth()+1,healthCheckDay:new Date().getDate(),kentaikyo:"Joined",qualifications:{vehicle_leveling:!1,vehicle_demolition:!1,mobile_crane:!1,slinging:!1,gas_welding:!1,earth_retaining:!1,excavation:!1,scaffolding:!1,formwork:!1,oxygen_deficiency:!1,rough_terrain:!1,arc_welding:!1,grinding_wheel:!1,low_voltage:!1,roller:!1,asbestos:!1,foreman:!1,otherText1:"",otherText2:"",otherText3:""},pledgeDateYear:new Date().getFullYear()-2018,pledgeDateMonth:new Date().getMonth()+1,pledgeDateDay:new Date().getDate(),signatureDataUrl:null},W_=()=>{};var Gy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=function(i){const t=[];let s=0;for(let r=0;r<i.length;r++){let c=i.charCodeAt(r);c<128?t[s++]=c:c<2048?(t[s++]=c>>6|192,t[s++]=c&63|128):(c&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(c=65536+((c&1023)<<10)+(i.charCodeAt(++r)&1023),t[s++]=c>>18|240,t[s++]=c>>12&63|128,t[s++]=c>>6&63|128,t[s++]=c&63|128):(t[s++]=c>>12|224,t[s++]=c>>6&63|128,t[s++]=c&63|128)}return t},e1=function(i){const t=[];let s=0,r=0;for(;s<i.length;){const c=i[s++];if(c<128)t[r++]=String.fromCharCode(c);else if(c>191&&c<224){const h=i[s++];t[r++]=String.fromCharCode((c&31)<<6|h&63)}else if(c>239&&c<365){const h=i[s++],m=i[s++],p=i[s++],b=((c&7)<<18|(h&63)<<12|(m&63)<<6|p&63)-65536;t[r++]=String.fromCharCode(55296+(b>>10)),t[r++]=String.fromCharCode(56320+(b&1023))}else{const h=i[s++],m=i[s++];t[r++]=String.fromCharCode((c&15)<<12|(h&63)<<6|m&63)}}return t.join("")},h0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let c=0;c<i.length;c+=3){const h=i[c],m=c+1<i.length,p=m?i[c+1]:0,b=c+2<i.length,x=b?i[c+2]:0,N=h>>2,C=(h&3)<<4|p>>4;let M=(p&15)<<2|x>>6,F=x&63;b||(F=64,m||(M=64)),r.push(s[N],s[C],s[M],s[F])}return r.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(u0(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):e1(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let c=0;c<i.length;){const h=s[i.charAt(c++)],p=c<i.length?s[i.charAt(c)]:0;++c;const x=c<i.length?s[i.charAt(c)]:64;++c;const C=c<i.length?s[i.charAt(c)]:64;if(++c,h==null||p==null||x==null||C==null)throw new t1;const M=h<<2|p>>4;if(r.push(M),x!==64){const F=p<<4&240|x>>2;if(r.push(F),C!==64){const W=x<<6&192|C;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class t1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n1=function(i){const t=u0(i);return h0.encodeByteArray(t,!0)},lu=function(i){return n1(i).replace(/\./g,"")},s1=function(i){try{return h0.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=()=>a1().__FIREBASE_DEFAULTS__,r1=()=>{if(typeof process>"u"||typeof Gy>"u")return;const i=Gy.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},l1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&s1(i[1]);return t&&JSON.parse(t)},Sd=()=>{try{return W_()||i1()||r1()||l1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},o1=i=>{var t,s;return(s=(t=Sd())==null?void 0:t.emulatorHosts)==null?void 0:s[i]},c1=i=>{const t=o1(i);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),r]:[t.substring(0,s),r]},f0=()=>{var i;return(i=Sd())==null?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function h1(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=t||"demo-project",c=i.iat||0,h=i.sub||i.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${r}`,aud:r,iat:c,exp:c+3600,auth_time:c,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...i};return[lu(JSON.stringify(s)),lu(JSON.stringify(m)),""].join(".")}const Jl={};function d1(){const i={prod:[],emulator:[]};for(const t of Object.keys(Jl))Jl[t]?i.emulator.push(t):i.prod.push(t);return i}function m1(i){let t=document.getElementById(i),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),s=!0),{created:s,element:t}}let Fy=!1;function g1(i,t){if(typeof window>"u"||typeof document>"u"||!Ad(window.location.host)||Jl[i]===t||Jl[i]||Fy)return;Jl[i]=t;function s(M){return`__firebase__banner__${M}`}const r="__firebase__banner",h=d1().prod.length>0;function m(){const M=document.getElementById(r);M&&M.remove()}function p(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function b(M,F){M.setAttribute("width","24"),M.setAttribute("id",F),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function x(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{Fy=!0,m()},M}function N(M,F){M.setAttribute("id",F),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function C(){const M=m1(r),F=s("text"),W=document.getElementById(F)||document.createElement("span"),ie=s("learnmore"),K=document.getElementById(ie)||document.createElement("a"),pe=s("preprendIcon"),ge=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const de=M.element;p(de),N(K,ie);const xe=x();b(ge,pe),de.append(ge,W,K,xe),document.body.appendChild(de)}h?(W.innerText="Preview backend disconnected.",ge.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ge.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y1(){var t;const i=(t=Sd())==null?void 0:t.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x1(){return!y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v1(){try{return typeof indexedDB=="object"}catch{return!1}}function b1(){return new Promise((i,t)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(r);c.onsuccess=()=>{c.result.close(),s||self.indexedDB.deleteDatabase(r),i(!0)},c.onupgradeneeded=()=>{s=!1},c.onerror=()=>{var h;t(((h=c.error)==null?void 0:h.message)||"")}}catch(s){t(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="FirebaseError";class Ur extends Error{constructor(t,s,r){super(s),this.code=t,this.customData=r,this.name=_1,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d0.prototype.create)}}class d0{constructor(t,s,r){this.service=t,this.serviceName=s,this.errors=r}create(t,...s){const r=s[0]||{},c=`${this.service}/${t}`,h=this.errors[t],m=h?E1(h,r):"Error",p=`${this.serviceName}: ${m} (${c}).`;return new Ur(c,p,r)}}function E1(i,t){return i.replace(T1,(s,r)=>{const c=t[r];return c!=null?String(c):`<${r}?>`})}const T1=/\{\$([^}]+)}/g;function ou(i,t){if(i===t)return!0;const s=Object.keys(i),r=Object.keys(t);for(const c of s){if(!r.includes(c))return!1;const h=i[c],m=t[c];if(Yy(h)&&Yy(m)){if(!ou(h,m))return!1}else if(h!==m)return!1}for(const c of r)if(!s.includes(c))return!1;return!0}function Yy(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(i){return i&&i._delegate?i._delegate:i}class so{constructor(t,s,r){this.name=t,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const r=new u1;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:s});c&&r.resolve(c)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(r)return null;throw c}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(j1(t))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);try{const h=this.getOrInitializeService({instanceIdentifier:c});r.resolve(h)}catch{}}}}clearInstance(t=ji){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ji){return this.instances.has(t)}getOptions(t=ji){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[h,m]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(h);r===p&&m.resolve(c)}return c}onInit(t,s){const r=this.normalizeInstanceIdentifier(s),c=this.onInitCallbacks.get(r)??new Set;c.add(t),this.onInitCallbacks.set(r,c);const h=this.instances.get(r);return h&&t(h,r),()=>{c.delete(t)}}invokeOnInitCallbacks(t,s){const r=this.onInitCallbacks.get(s);if(r)for(const c of r)try{c(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:w1(t),options:s}),this.instances.set(t,r),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ji){return this.component?this.component.multipleInstances?t:ji:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function w1(i){return i===ji?void 0:i}function j1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new N1(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})($e||($e={}));const A1={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},C1=$e.INFO,R1={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},D1=(i,t,...s)=>{if(t<i.logLevel)return;const r=new Date().toISOString(),c=R1[t];if(c)console[c](`[${r}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class m0{constructor(t){this.name=t,this._logLevel=C1,this._logHandler=D1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $e))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?A1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...t),this._logHandler(this,$e.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...t),this._logHandler(this,$e.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...t),this._logHandler(this,$e.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...t),this._logHandler(this,$e.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...t),this._logHandler(this,$e.ERROR,...t)}}const I1=(i,t)=>t.some(s=>i instanceof s);let $y,Qy;function M1(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V1(){return Qy||(Qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g0=new WeakMap,sd=new WeakMap,p0=new WeakMap,$f=new WeakMap,Cd=new WeakMap;function O1(i){const t=new Promise((s,r)=>{const c=()=>{i.removeEventListener("success",h),i.removeEventListener("error",m)},h=()=>{s(Oa(i.result)),c()},m=()=>{r(i.error),c()};i.addEventListener("success",h),i.addEventListener("error",m)});return t.then(s=>{s instanceof IDBCursor&&g0.set(s,i)}).catch(()=>{}),Cd.set(t,i),t}function k1(i){if(sd.has(i))return;const t=new Promise((s,r)=>{const c=()=>{i.removeEventListener("complete",h),i.removeEventListener("error",m),i.removeEventListener("abort",m)},h=()=>{s(),c()},m=()=>{r(i.error||new DOMException("AbortError","AbortError")),c()};i.addEventListener("complete",h),i.addEventListener("error",m),i.addEventListener("abort",m)});sd.set(i,t)}let ad={get(i,t,s){if(i instanceof IDBTransaction){if(t==="done")return sd.get(i);if(t==="objectStoreNames")return i.objectStoreNames||p0.get(i);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Oa(i[t])},set(i,t,s){return i[t]=s,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function z1(i){ad=i(ad)}function U1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const r=i.call(Qf(this),t,...s);return p0.set(r,t.sort?t.sort():[t]),Oa(r)}:V1().includes(i)?function(...t){return i.apply(Qf(this),t),Oa(g0.get(this))}:function(...t){return Oa(i.apply(Qf(this),t))}}function L1(i){return typeof i=="function"?U1(i):(i instanceof IDBTransaction&&k1(i),I1(i,M1())?new Proxy(i,ad):i)}function Oa(i){if(i instanceof IDBRequest)return O1(i);if($f.has(i))return $f.get(i);const t=L1(i);return t!==i&&($f.set(i,t),Cd.set(t,i)),t}const Qf=i=>Cd.get(i);function P1(i,t,{blocked:s,upgrade:r,blocking:c,terminated:h}={}){const m=indexedDB.open(i,t),p=Oa(m);return r&&m.addEventListener("upgradeneeded",b=>{r(Oa(m.result),b.oldVersion,b.newVersion,Oa(m.transaction),b)}),s&&m.addEventListener("blocked",b=>s(b.oldVersion,b.newVersion,b)),p.then(b=>{h&&b.addEventListener("close",()=>h()),c&&b.addEventListener("versionchange",x=>c(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const B1=["get","getKey","getAll","getAllKeys","count"],q1=["put","add","delete","clear"],Kf=new Map;function Ky(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Kf.get(t))return Kf.get(t);const s=t.replace(/FromIndex$/,""),r=t!==s,c=q1.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(c||B1.includes(s)))return;const h=async function(m,...p){const b=this.transaction(m,c?"readwrite":"readonly");let x=b.store;return r&&(x=x.index(p.shift())),(await Promise.all([x[s](...p),c&&b.done]))[0]};return Kf.set(t,h),h}z1(i=>({...i,get:(t,s,r)=>Ky(t,s)||i.get(t,s,r),has:(t,s)=>!!Ky(t,s)||i.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(G1(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function G1(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const id="@firebase/app",Xy="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new m0("@firebase/app"),F1="@firebase/app-compat",Y1="@firebase/analytics-compat",$1="@firebase/analytics",Q1="@firebase/app-check-compat",K1="@firebase/app-check",X1="@firebase/auth",Z1="@firebase/auth-compat",J1="@firebase/database",W1="@firebase/data-connect",eE="@firebase/database-compat",tE="@firebase/functions",nE="@firebase/functions-compat",sE="@firebase/installations",aE="@firebase/installations-compat",iE="@firebase/messaging",rE="@firebase/messaging-compat",lE="@firebase/performance",oE="@firebase/performance-compat",cE="@firebase/remote-config",uE="@firebase/remote-config-compat",hE="@firebase/storage",fE="@firebase/storage-compat",dE="@firebase/firestore",mE="@firebase/ai",gE="@firebase/firestore-compat",pE="firebase",yE="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd="[DEFAULT]",xE={[id]:"fire-core",[F1]:"fire-core-compat",[$1]:"fire-analytics",[Y1]:"fire-analytics-compat",[K1]:"fire-app-check",[Q1]:"fire-app-check-compat",[X1]:"fire-auth",[Z1]:"fire-auth-compat",[J1]:"fire-rtdb",[W1]:"fire-data-connect",[eE]:"fire-rtdb-compat",[tE]:"fire-fn",[nE]:"fire-fn-compat",[sE]:"fire-iid",[aE]:"fire-iid-compat",[iE]:"fire-fcm",[rE]:"fire-fcm-compat",[lE]:"fire-perf",[oE]:"fire-perf-compat",[cE]:"fire-rc",[uE]:"fire-rc-compat",[hE]:"fire-gcs",[fE]:"fire-gcs-compat",[dE]:"fire-fst",[gE]:"fire-fst-compat",[mE]:"fire-vertex","fire-js":"fire-js",[pE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Map,vE=new Map,ld=new Map;function Zy(i,t){try{i.container.addComponent(t)}catch(s){Ws.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,s)}}function uu(i){const t=i.name;if(ld.has(t))return Ws.debug(`There were multiple attempts to register component ${t}.`),!1;ld.set(t,i);for(const s of cu.values())Zy(s,i);for(const s of vE.values())Zy(s,i);return!0}function bE(i,t){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(t)}function _E(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ka=new d0("app","Firebase",EE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(t,s,r){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new so("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=yE;function y0(i,t={}){let s=i;typeof t!="object"&&(t={name:t});const r={name:rd,automaticDataCollectionEnabled:!0,...t},c=r.name;if(typeof c!="string"||!c)throw ka.create("bad-app-name",{appName:String(c)});if(s||(s=f0()),!s)throw ka.create("no-options");const h=cu.get(c);if(h){if(ou(s,h.options)&&ou(r,h.config))return h;throw ka.create("duplicate-app",{appName:c})}const m=new S1(c);for(const b of ld.values())m.addComponent(b);const p=new TE(s,r,m);return cu.set(c,p),p}function wE(i=rd){const t=cu.get(i);if(!t&&i===rd&&f0())return y0();if(!t)throw ka.create("no-app",{appName:i});return t}function Sr(i,t,s){let r=xE[i]??i;s&&(r+=`-${s}`);const c=r.match(/\s|\//),h=t.match(/\s|\//);if(c||h){const m=[`Unable to register library "${r}" with version "${t}":`];c&&m.push(`library name "${r}" contains illegal characters (whitespace or "/")`),c&&h&&m.push("and"),h&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ws.warn(m.join(" "));return}uu(new so(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="firebase-heartbeat-database",SE=1,ao="firebase-heartbeat-store";let Xf=null;function x0(){return Xf||(Xf=P1(jE,SE,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(ao)}catch(s){console.warn(s)}}}}).catch(i=>{throw ka.create("idb-open",{originalErrorMessage:i.message})})),Xf}async function AE(i){try{const s=(await x0()).transaction(ao),r=await s.objectStore(ao).get(v0(i));return await s.done,r}catch(t){if(t instanceof Ur)Ws.warn(t.message);else{const s=ka.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ws.warn(s.message)}}}async function Jy(i,t){try{const r=(await x0()).transaction(ao,"readwrite");await r.objectStore(ao).put(t,v0(i)),await r.done}catch(s){if(s instanceof Ur)Ws.warn(s.message);else{const r=ka.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Ws.warn(r.message)}}}function v0(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=1024,RE=30;class DE{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new ME(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,s;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=Wy();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(m=>m.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:c}),this._heartbeatsCache.heartbeats.length>RE){const m=VE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ws.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Wy(),{heartbeatsToSend:r,unsentEntries:c}=IE(this._heartbeatsCache.heartbeats),h=lu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(s){return Ws.warn(s),""}}}function Wy(){return new Date().toISOString().substring(0,10)}function IE(i,t=CE){const s=[];let r=i.slice();for(const c of i){const h=s.find(m=>m.agent===c.agent);if(h){if(h.dates.push(c.date),ex(s)>t){h.dates.pop();break}}else if(s.push({agent:c.agent,dates:[c.date]}),ex(s)>t){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class ME{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v1()?b1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await AE(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jy(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function ex(i){return lu(JSON.stringify({version:2,heartbeats:i})).length}function VE(i){if(i.length===0)return-1;let t=0,s=i[0].date;for(let r=1;r<i.length;r++)i[r].date<s&&(s=i[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(i){uu(new so("platform-logger",t=>new H1(t),"PRIVATE")),uu(new so("heartbeat",t=>new DE(t),"PRIVATE")),Sr(id,Xy,i),Sr(id,Xy,"esm2020"),Sr("fire-js","")}OE("");var kE="firebase",zE="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(kE,zE,"app");var tx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var za,b0;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,j){function S(){}S.prototype=j.prototype,R.F=j.prototype,R.prototype=new S,R.prototype.constructor=R,R.D=function(V,w,I){for(var A=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)A[Se-2]=arguments[Se];return j.prototype[w].apply(V,A)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(R,j,S){S||(S=0);const V=Array(16);if(typeof j=="string")for(var w=0;w<16;++w)V[w]=j.charCodeAt(S++)|j.charCodeAt(S++)<<8|j.charCodeAt(S++)<<16|j.charCodeAt(S++)<<24;else for(w=0;w<16;++w)V[w]=j[S++]|j[S++]<<8|j[S++]<<16|j[S++]<<24;j=R.g[0],S=R.g[1],w=R.g[2];let I=R.g[3],A;A=j+(I^S&(w^I))+V[0]+3614090360&4294967295,j=S+(A<<7&4294967295|A>>>25),A=I+(w^j&(S^w))+V[1]+3905402710&4294967295,I=j+(A<<12&4294967295|A>>>20),A=w+(S^I&(j^S))+V[2]+606105819&4294967295,w=I+(A<<17&4294967295|A>>>15),A=S+(j^w&(I^j))+V[3]+3250441966&4294967295,S=w+(A<<22&4294967295|A>>>10),A=j+(I^S&(w^I))+V[4]+4118548399&4294967295,j=S+(A<<7&4294967295|A>>>25),A=I+(w^j&(S^w))+V[5]+1200080426&4294967295,I=j+(A<<12&4294967295|A>>>20),A=w+(S^I&(j^S))+V[6]+2821735955&4294967295,w=I+(A<<17&4294967295|A>>>15),A=S+(j^w&(I^j))+V[7]+4249261313&4294967295,S=w+(A<<22&4294967295|A>>>10),A=j+(I^S&(w^I))+V[8]+1770035416&4294967295,j=S+(A<<7&4294967295|A>>>25),A=I+(w^j&(S^w))+V[9]+2336552879&4294967295,I=j+(A<<12&4294967295|A>>>20),A=w+(S^I&(j^S))+V[10]+4294925233&4294967295,w=I+(A<<17&4294967295|A>>>15),A=S+(j^w&(I^j))+V[11]+2304563134&4294967295,S=w+(A<<22&4294967295|A>>>10),A=j+(I^S&(w^I))+V[12]+1804603682&4294967295,j=S+(A<<7&4294967295|A>>>25),A=I+(w^j&(S^w))+V[13]+4254626195&4294967295,I=j+(A<<12&4294967295|A>>>20),A=w+(S^I&(j^S))+V[14]+2792965006&4294967295,w=I+(A<<17&4294967295|A>>>15),A=S+(j^w&(I^j))+V[15]+1236535329&4294967295,S=w+(A<<22&4294967295|A>>>10),A=j+(w^I&(S^w))+V[1]+4129170786&4294967295,j=S+(A<<5&4294967295|A>>>27),A=I+(S^w&(j^S))+V[6]+3225465664&4294967295,I=j+(A<<9&4294967295|A>>>23),A=w+(j^S&(I^j))+V[11]+643717713&4294967295,w=I+(A<<14&4294967295|A>>>18),A=S+(I^j&(w^I))+V[0]+3921069994&4294967295,S=w+(A<<20&4294967295|A>>>12),A=j+(w^I&(S^w))+V[5]+3593408605&4294967295,j=S+(A<<5&4294967295|A>>>27),A=I+(S^w&(j^S))+V[10]+38016083&4294967295,I=j+(A<<9&4294967295|A>>>23),A=w+(j^S&(I^j))+V[15]+3634488961&4294967295,w=I+(A<<14&4294967295|A>>>18),A=S+(I^j&(w^I))+V[4]+3889429448&4294967295,S=w+(A<<20&4294967295|A>>>12),A=j+(w^I&(S^w))+V[9]+568446438&4294967295,j=S+(A<<5&4294967295|A>>>27),A=I+(S^w&(j^S))+V[14]+3275163606&4294967295,I=j+(A<<9&4294967295|A>>>23),A=w+(j^S&(I^j))+V[3]+4107603335&4294967295,w=I+(A<<14&4294967295|A>>>18),A=S+(I^j&(w^I))+V[8]+1163531501&4294967295,S=w+(A<<20&4294967295|A>>>12),A=j+(w^I&(S^w))+V[13]+2850285829&4294967295,j=S+(A<<5&4294967295|A>>>27),A=I+(S^w&(j^S))+V[2]+4243563512&4294967295,I=j+(A<<9&4294967295|A>>>23),A=w+(j^S&(I^j))+V[7]+1735328473&4294967295,w=I+(A<<14&4294967295|A>>>18),A=S+(I^j&(w^I))+V[12]+2368359562&4294967295,S=w+(A<<20&4294967295|A>>>12),A=j+(S^w^I)+V[5]+4294588738&4294967295,j=S+(A<<4&4294967295|A>>>28),A=I+(j^S^w)+V[8]+2272392833&4294967295,I=j+(A<<11&4294967295|A>>>21),A=w+(I^j^S)+V[11]+1839030562&4294967295,w=I+(A<<16&4294967295|A>>>16),A=S+(w^I^j)+V[14]+4259657740&4294967295,S=w+(A<<23&4294967295|A>>>9),A=j+(S^w^I)+V[1]+2763975236&4294967295,j=S+(A<<4&4294967295|A>>>28),A=I+(j^S^w)+V[4]+1272893353&4294967295,I=j+(A<<11&4294967295|A>>>21),A=w+(I^j^S)+V[7]+4139469664&4294967295,w=I+(A<<16&4294967295|A>>>16),A=S+(w^I^j)+V[10]+3200236656&4294967295,S=w+(A<<23&4294967295|A>>>9),A=j+(S^w^I)+V[13]+681279174&4294967295,j=S+(A<<4&4294967295|A>>>28),A=I+(j^S^w)+V[0]+3936430074&4294967295,I=j+(A<<11&4294967295|A>>>21),A=w+(I^j^S)+V[3]+3572445317&4294967295,w=I+(A<<16&4294967295|A>>>16),A=S+(w^I^j)+V[6]+76029189&4294967295,S=w+(A<<23&4294967295|A>>>9),A=j+(S^w^I)+V[9]+3654602809&4294967295,j=S+(A<<4&4294967295|A>>>28),A=I+(j^S^w)+V[12]+3873151461&4294967295,I=j+(A<<11&4294967295|A>>>21),A=w+(I^j^S)+V[15]+530742520&4294967295,w=I+(A<<16&4294967295|A>>>16),A=S+(w^I^j)+V[2]+3299628645&4294967295,S=w+(A<<23&4294967295|A>>>9),A=j+(w^(S|~I))+V[0]+4096336452&4294967295,j=S+(A<<6&4294967295|A>>>26),A=I+(S^(j|~w))+V[7]+1126891415&4294967295,I=j+(A<<10&4294967295|A>>>22),A=w+(j^(I|~S))+V[14]+2878612391&4294967295,w=I+(A<<15&4294967295|A>>>17),A=S+(I^(w|~j))+V[5]+4237533241&4294967295,S=w+(A<<21&4294967295|A>>>11),A=j+(w^(S|~I))+V[12]+1700485571&4294967295,j=S+(A<<6&4294967295|A>>>26),A=I+(S^(j|~w))+V[3]+2399980690&4294967295,I=j+(A<<10&4294967295|A>>>22),A=w+(j^(I|~S))+V[10]+4293915773&4294967295,w=I+(A<<15&4294967295|A>>>17),A=S+(I^(w|~j))+V[1]+2240044497&4294967295,S=w+(A<<21&4294967295|A>>>11),A=j+(w^(S|~I))+V[8]+1873313359&4294967295,j=S+(A<<6&4294967295|A>>>26),A=I+(S^(j|~w))+V[15]+4264355552&4294967295,I=j+(A<<10&4294967295|A>>>22),A=w+(j^(I|~S))+V[6]+2734768916&4294967295,w=I+(A<<15&4294967295|A>>>17),A=S+(I^(w|~j))+V[13]+1309151649&4294967295,S=w+(A<<21&4294967295|A>>>11),A=j+(w^(S|~I))+V[4]+4149444226&4294967295,j=S+(A<<6&4294967295|A>>>26),A=I+(S^(j|~w))+V[11]+3174756917&4294967295,I=j+(A<<10&4294967295|A>>>22),A=w+(j^(I|~S))+V[2]+718787259&4294967295,w=I+(A<<15&4294967295|A>>>17),A=S+(I^(w|~j))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+j&4294967295,R.g[1]=R.g[1]+(w+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+w&4294967295,R.g[3]=R.g[3]+I&4294967295}r.prototype.v=function(R,j){j===void 0&&(j=R.length);const S=j-this.blockSize,V=this.C;let w=this.h,I=0;for(;I<j;){if(w==0)for(;I<=S;)c(this,R,I),I+=this.blockSize;if(typeof R=="string"){for(;I<j;)if(V[w++]=R.charCodeAt(I++),w==this.blockSize){c(this,V),w=0;break}}else for(;I<j;)if(V[w++]=R[I++],w==this.blockSize){c(this,V),w=0;break}}this.h=w,this.o+=j},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var j=1;j<R.length-8;++j)R[j]=0;j=this.o*8;for(var S=R.length-8;S<R.length;++S)R[S]=j&255,j/=256;for(this.v(R),R=Array(16),j=0,S=0;S<4;++S)for(let V=0;V<32;V+=8)R[j++]=this.g[S]>>>V&255;return R};function h(R,j){var S=p;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=j(R)}function m(R,j){this.h=j;const S=[];let V=!0;for(let w=R.length-1;w>=0;w--){const I=R[w]|0;V&&I==j||(S[w]=I,V=!1)}this.g=S}var p={};function b(R){return-128<=R&&R<128?h(R,function(j){return new m([j|0],j<0?-1:0)}):new m([R|0],R<0?-1:0)}function x(R){if(isNaN(R)||!isFinite(R))return C;if(R<0)return K(x(-R));const j=[];let S=1;for(let V=0;R>=S;V++)j[V]=R/S|0,S*=4294967296;return new m(j,0)}function N(R,j){if(R.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(R.charAt(0)=="-")return K(N(R.substring(1),j));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=x(Math.pow(j,8));let V=C;for(let I=0;I<R.length;I+=8){var w=Math.min(8,R.length-I);const A=parseInt(R.substring(I,I+w),j);w<8?(w=x(Math.pow(j,w)),V=V.j(w).add(x(A))):(V=V.j(S),V=V.add(x(A)))}return V}var C=b(0),M=b(1),F=b(16777216);i=m.prototype,i.m=function(){if(ie(this))return-K(this).m();let R=0,j=1;for(let S=0;S<this.g.length;S++){const V=this.i(S);R+=(V>=0?V:4294967296+V)*j,j*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(W(this))return"0";if(ie(this))return"-"+K(this).toString(R);const j=x(Math.pow(R,6));var S=this;let V="";for(;;){const w=xe(S,j).g;S=pe(S,w.j(j));let I=((S.g.length>0?S.g[0]:S.h)>>>0).toString(R);if(S=w,W(S))return I+V;for(;I.length<6;)I="0"+I;V=I+V}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function W(R){if(R.h!=0)return!1;for(let j=0;j<R.g.length;j++)if(R.g[j]!=0)return!1;return!0}function ie(R){return R.h==-1}i.l=function(R){return R=pe(this,R),ie(R)?-1:W(R)?0:1};function K(R){const j=R.g.length,S=[];for(let V=0;V<j;V++)S[V]=~R.g[V];return new m(S,~R.h).add(M)}i.abs=function(){return ie(this)?K(this):this},i.add=function(R){const j=Math.max(this.g.length,R.g.length),S=[];let V=0;for(let w=0;w<=j;w++){let I=V+(this.i(w)&65535)+(R.i(w)&65535),A=(I>>>16)+(this.i(w)>>>16)+(R.i(w)>>>16);V=A>>>16,I&=65535,A&=65535,S[w]=A<<16|I}return new m(S,S[S.length-1]&-2147483648?-1:0)};function pe(R,j){return R.add(K(j))}i.j=function(R){if(W(this)||W(R))return C;if(ie(this))return ie(R)?K(this).j(K(R)):K(K(this).j(R));if(ie(R))return K(this.j(K(R)));if(this.l(F)<0&&R.l(F)<0)return x(this.m()*R.m());const j=this.g.length+R.g.length,S=[];for(var V=0;V<2*j;V++)S[V]=0;for(V=0;V<this.g.length;V++)for(let w=0;w<R.g.length;w++){const I=this.i(V)>>>16,A=this.i(V)&65535,Se=R.i(w)>>>16,Ce=R.i(w)&65535;S[2*V+2*w]+=A*Ce,ge(S,2*V+2*w),S[2*V+2*w+1]+=I*Ce,ge(S,2*V+2*w+1),S[2*V+2*w+1]+=A*Se,ge(S,2*V+2*w+1),S[2*V+2*w+2]+=I*Se,ge(S,2*V+2*w+2)}for(R=0;R<j;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=j;R<2*j;R++)S[R]=0;return new m(S,0)};function ge(R,j){for(;(R[j]&65535)!=R[j];)R[j+1]+=R[j]>>>16,R[j]&=65535,j++}function de(R,j){this.g=R,this.h=j}function xe(R,j){if(W(j))throw Error("division by zero");if(W(R))return new de(C,C);if(ie(R))return j=xe(K(R),j),new de(K(j.g),K(j.h));if(ie(j))return j=xe(R,K(j)),new de(K(j.g),j.h);if(R.g.length>30){if(ie(R)||ie(j))throw Error("slowDivide_ only works with positive integers.");for(var S=M,V=j;V.l(R)<=0;)S=Ie(S),V=Ie(V);var w=Ne(S,1),I=Ne(V,1);for(V=Ne(V,2),S=Ne(S,2);!W(V);){var A=I.add(V);A.l(R)<=0&&(w=w.add(S),I=A),V=Ne(V,1),S=Ne(S,1)}return j=pe(R,w.j(j)),new de(w,j)}for(w=C;R.l(j)>=0;){for(S=Math.max(1,Math.floor(R.m()/j.m())),V=Math.ceil(Math.log(S)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),I=x(S),A=I.j(j);ie(A)||A.l(R)>0;)S-=V,I=x(S),A=I.j(j);W(I)&&(I=M),w=w.add(I),R=pe(R,A)}return new de(w,R)}i.B=function(R){return xe(this,R).h},i.and=function(R){const j=Math.max(this.g.length,R.g.length),S=[];for(let V=0;V<j;V++)S[V]=this.i(V)&R.i(V);return new m(S,this.h&R.h)},i.or=function(R){const j=Math.max(this.g.length,R.g.length),S=[];for(let V=0;V<j;V++)S[V]=this.i(V)|R.i(V);return new m(S,this.h|R.h)},i.xor=function(R){const j=Math.max(this.g.length,R.g.length),S=[];for(let V=0;V<j;V++)S[V]=this.i(V)^R.i(V);return new m(S,this.h^R.h)};function Ie(R){const j=R.g.length+1,S=[];for(let V=0;V<j;V++)S[V]=R.i(V)<<1|R.i(V-1)>>>31;return new m(S,R.h)}function Ne(R,j){const S=j>>5;j%=32;const V=R.g.length-S,w=[];for(let I=0;I<V;I++)w[I]=j>0?R.i(I+S)>>>j|R.i(I+S+1)<<32-j:R.i(I+S);return new m(w,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,b0=r,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=x,m.fromString=N,za=m}).apply(typeof tx<"u"?tx:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _0,Ql,E0,tu,od,T0,N0,w0;(function(){var i,t=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=s(this);function c(u,g){if(g)e:{var v=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in v))break e;v=v[U]}u=u[u.length-1],T=v[u],g=g(T),g!=T&&g!=null&&t(v,u,{configurable:!0,writable:!0,value:g})}}c("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(u){return u||function(g){var v=[],T;for(T in g)Object.prototype.hasOwnProperty.call(g,T)&&v.push([T,g[T]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function b(u,g,v){return u.call.apply(u.bind,arguments)}function x(u,g,v){return x=b,x.apply(null,arguments)}function N(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function C(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(T,U,Y){for(var ce=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ce[Oe-2]=arguments[Oe];return g.prototype[U].apply(T,ce)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function F(u){const g=u.length;if(g>0){const v=Array(g);for(let T=0;T<g;T++)v[T]=u[T];return v}return[]}function W(u,g){for(let T=1;T<arguments.length;T++){const U=arguments[T];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=u.length||0;const Y=U.length||0;u.length=v+Y;for(let ce=0;ce<Y;ce++)u[v+ce]=U[ce]}else u.push(U)}}class ie{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function K(u){m.setTimeout(()=>{throw u},0)}function pe(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ge{constructor(){this.h=this.g=null}add(g,v){const T=de.get();T.set(g,v),this.h?this.h.next=T:this.g=T,this.h=T}}var de=new ie(()=>new xe,u=>u.reset());class xe{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,Ne=!1,R=new ge,j=()=>{const u=Promise.resolve(void 0);Ie=()=>{u.then(S)}};function S(){for(var u;u=pe();){try{u.h.call(u.g)}catch(v){K(v)}var g=de;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Ne=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,g),m.removeEventListener("test",v,g)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function Se(u,g){w.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}C(Se,w),Se.prototype.init=function(u,g){const v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),H=0;function te(u,g,v,T,U){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!T,this.ha=U,this.key=++H,this.da=this.fa=!1}function he(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function re(u,g,v){for(const T in u)g.call(v,u[T],T,u)}function Re(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function E(u){const g={};for(const v in u)g[v]=u[v];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(u,g){let v,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(v in T)u[v]=T[v];for(let Y=0;Y<k.length;Y++)v=k[Y],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,g,v,T,U){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const ce=B(u,g,T,U);return ce>-1?(g=u[ce],v||(g.fa=!1)):(g=new te(g,this.src,Y,!!T,U),g.fa=v,u.push(g)),g};function se(u,g){const v=g.type;if(v in u.g){var T=u.g[v],U=Array.prototype.indexOf.call(T,g,void 0),Y;(Y=U>=0)&&Array.prototype.splice.call(T,U,1),Y&&(he(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function B(u,g,v,T){for(let U=0;U<u.length;++U){const Y=u[U];if(!Y.da&&Y.listener==g&&Y.capture==!!v&&Y.ha==T)return U}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),be={};function we(u,g,v,T,U){if(Array.isArray(g)){for(let Y=0;Y<g.length;Y++)we(u,g[Y],v,T,U);return null}return v=ft(v),u&&u[Ce]?u.J(g,v,p(T)?!!T.capture:!1,U):bt(u,g,v,!1,T,U)}function bt(u,g,v,T,U,Y){if(!g)throw Error("Invalid event type");const ce=p(U)?!!U.capture:!!U;let Oe=_e(u);if(Oe||(u[oe]=Oe=new ue(u)),v=Oe.add(g,v,T,ce,Y),v.proxy)return v;if(T=_t(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)I||(U=ce),U===void 0&&(U=!1),u.addEventListener(g.toString(),T,U);else if(u.attachEvent)u.attachEvent(ne(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function _t(){function u(v){return g.call(u.src,u.listener,v)}const g=G;return u}function Yt(u,g,v,T,U){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)Yt(u,g[Y],v,T,U);else T=p(T)?!!T.capture:!!T,v=ft(v),u&&u[Ce]?(u=u.i,Y=String(g).toString(),Y in u.g&&(g=u.g[Y],v=B(g,v,T,U),v>-1&&(he(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[Y],u.h--)))):u&&(u=_e(u))&&(g=u.g[g.toString()],u=-1,g&&(u=B(g,v,T,U)),(v=u>-1?g[u]:null)&&un(v))}function un(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ce])se(g.i,u);else{var v=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(v,T,u.capture):g.detachEvent?g.detachEvent(ne(v),T):g.addListener&&g.removeListener&&g.removeListener(T),(v=_e(g))?(se(v,u),v.h==0&&(v.src=null,g[oe]=null)):he(u)}}}function ne(u){return u in be?be[u]:be[u]="on"+u}function G(u,g){if(u.da)u=!0;else{g=new Se(g,this);const v=u.listener,T=u.ha||u.src;u.fa&&un(u),u=v.call(T,g)}return u}function _e(u){return u=u[oe],u instanceof ue?u:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function ft(u){return typeof u=="function"?u:(u[Qe]||(u[Qe]=function(g){return u.handleEvent(g)}),u[Qe])}function Pe(){V.call(this),this.i=new ue(this),this.M=this,this.G=null}C(Pe,V),Pe.prototype[Ce]=!0,Pe.prototype.removeEventListener=function(u,g,v,T){Yt(this,u,g,v,T)};function Ze(u,g){var v,T=u.G;if(T)for(v=[];T;T=T.G)v.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new w(g,u);else if(g instanceof w)g.target=g.target||u;else{var U=g;g=new w(T,u),le(g,U)}U=!0;let Y,ce;if(v)for(ce=v.length-1;ce>=0;ce--)Y=g.g=v[ce],U=Bt(Y,T,!0,g)&&U;if(Y=g.g=u,U=Bt(Y,T,!0,g)&&U,U=Bt(Y,T,!1,g)&&U,v)for(ce=0;ce<v.length;ce++)Y=g.g=v[ce],U=Bt(Y,T,!1,g)&&U}Pe.prototype.N=function(){if(Pe.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let T=0;T<v.length;T++)he(v[T]);delete u.g[g],u.h--}}this.G=null},Pe.prototype.J=function(u,g,v,T){return this.i.add(String(u),g,!1,v,T)},Pe.prototype.K=function(u,g,v,T){return this.i.add(String(u),g,!0,v,T)};function Bt(u,g,v,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let U=!0;for(let Y=0;Y<g.length;++Y){const ce=g[Y];if(ce&&!ce.da&&ce.capture==v){const Oe=ce.listener,Tt=ce.ha||ce.src;ce.fa&&se(u.i,ce),U=Oe.call(Tt,T)!==!1&&U}}return U&&!T.defaultPrevented}function Xa(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:m.setTimeout(u,g||0)}function _o(u){u.g=Xa(()=>{u.g=null,u.i&&(u.i=!1,_o(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ln extends V{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:_o(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Za(u){V.call(this),this.h=u,this.g={}}C(Za,V);var Gr=[];function Fr(u){re(u.g,function(g,v){this.g.hasOwnProperty(v)&&un(g)},u),u.g={}}Za.prototype.N=function(){Za.Z.N.call(this),Fr(this)},Za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var na=m.JSON.stringify,qu=m.JSON.parse,Eo=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function To(){}function No(){}var Fn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){w.call(this,"d")}C($t,w);function Dn(){w.call(this,"c")}C(Dn,w);var Et={},wo=null;function ki(){return wo=wo||new Pe}Et.Ia="serverreachability";function jo(u){w.call(this,Et.Ia,u)}C(jo,w);function is(u){const g=ki();Ze(g,new jo(g))}Et.STAT_EVENT="statevent";function Ja(u,g){w.call(this,Et.STAT_EVENT,u),this.stat=g}C(Ja,w);function St(u){const g=ki();Ze(g,new Ja(g,u))}Et.Ja="timingevent";function rs(u,g){w.call(this,Et.Ja,u),this.size=g}C(rs,w);function ls(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},g)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function Hu(u,g,v,T,U,Y){u.info(function(){if(u.g)if(Y){var ce="",Oe=Y.split("&");for(let Je=0;Je<Oe.length;Je++){var Tt=Oe[Je].split("=");if(Tt.length>1){const gt=Tt[0];Tt=Tt[1];const On=gt.split("_");ce=On.length>=2&&On[1]=="type"?ce+(gt+"="+Tt+"&"):ce+(gt+"=redacted&")}}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+g+`
`+v+`
`+ce})}function So(u,g,v,T,U,Y,ce){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+g+`
`+v+`
`+Y+" "+ce})}function os(u,g,v,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Gu(u,v)+(T?" "+T:"")})}function Wa(u,g){u.info(function(){return"TIMEOUT: "+g})}Yn.prototype.info=function(){};function Gu(u,g){if(!u.g)return g;if(!g)return null;try{const Y=JSON.parse(g);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var v=Y[u];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var U=T[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ce=1;ce<T.length;ce++)T[ce]=""}}}}return na(Y)}catch{return g}}var ei={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$r;function ti(){}C(ti,To),ti.prototype.g=function(){return new XMLHttpRequest},$r=new ti;function Ms(u){return encodeURIComponent(String(u))}function Ao(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function $n(u,g,v,T){this.j=u,this.i=g,this.l=v,this.S=T||1,this.V=new Za(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var At={},qt={};function cs(u,g,v){u.M=1,u.A=ni(Rt(g)),u.u=v,u.R=!0,zi(u,null)}function zi(u,g){u.F=Date.now(),us(u),u.B=Rt(u.A);var v=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Bi(v.i,"t",T),u.C=0,v=u.j.L,u.h=new Qn,u.g=Ho(u.j,v?g:null,!u.u),u.P>0&&(u.O=new ln(x(u.Y,u,u.g),u.P)),g=u.V,v=u.g,T=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Gr[0]=U.toString()),U=Gr);for(let Y=0;Y<U.length;Y++){const ce=we(v,U[Y],T||g.handleEvent,!1,g.h||g);if(!ce)break;g.g[ce.key]=ce}g=u.J?E(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),is(),Hu(u.i,u.v,u.B,u.l,u.S,u.u)}$n.prototype.ba=function(u){u=u.target;const g=this.O;g&&Zn(u)==3?g.j():this.Y(u)},$n.prototype.Y=function(u){try{if(u==this.g)e:{const Oe=Zn(this.g),Tt=this.g.ya(),Je=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||Oe!=4||Tt==7||(Tt==8||Je<=0?is(3):is(2)),hs(this);var g=this.g.ca();this.X=g;var v=Fu(this);if(this.o=g==200,So(this.i,this.v,this.B,this.l,this.S,Oe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var T,U=this.g;if((T=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(T)){var Y=T;break t}}Y=null}if(u=Y)os(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fs(this,u);else{this.o=!1,this.m=3,St(12),_n(this),In(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<v.length;)if(gt=Ro(this,v),gt==qt){Oe==4&&(this.m=4,St(14),u=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==At){this.m=4,St(15),os(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else os(this.i,this.l,gt,null),fs(this,gt);if(Co(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||v.length!=0||this.h.h||(this.m=1,St(16),u=!1),this.o=this.o&&u,!u)os(this.i,this.l,v,"[Invalid Chunked Response]"),_n(this),In(this);else if(v.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),ol(ce),ce.P=!0,St(11))}}else os(this.i,this.l,v,null),fs(this,v);Oe==4&&_n(this),this.o&&!this.K&&(Oe==4?Lo(this.j,this):(this.o=!1,us(this)))}else Os(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),_n(this),In(this)}}}catch{}finally{}};function Fu(u){if(!Co(u))return u.g.la();const g=Qt(u.g);if(g==="")return"";let v="";const T=g.length,U=Zn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return _n(u),In(u),"";u.h.i=new m.TextDecoder}for(let Y=0;Y<T;Y++)u.h.h=!0,v+=u.h.i.decode(g[Y],{stream:!(U&&Y==T-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function Co(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ro(u,g){var v=u.C,T=g.indexOf(`
`,v);return T==-1?qt:(v=Number(g.substring(v,T)),isNaN(v)?At:(T+=1,T+v>g.length?qt:(g=g.slice(T,T+v),u.C=T+v,g)))}$n.prototype.cancel=function(){this.K=!0,_n(this)};function us(u){u.T=Date.now()+u.H,Ui(u,u.H)}function Ui(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ls(x(u.aa,u),g)}function hs(u){u.D&&(m.clearTimeout(u.D),u.D=null)}$n.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Wa(this.i,this.B),this.M!=2&&(is(),St(17)),_n(this),this.m=2,In(this)):Ui(this,this.T-u)};function In(u){u.j.I==0||u.K||Lo(u.j,u)}function _n(u){hs(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Fr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function fs(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||ms(v.h,u))){if(!u.L&&ms(v.h,u)&&v.I==3){try{var T=v.Ba.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Yi(v),ua(v);else break e;ci(v),St(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ls(x(v.Va,v),6e3));ds(v.h)<=1&&v.ta&&(v.ta=void 0)}else bs(v,11)}else if((u.L||v.g==u)&&Yi(v),!A(g))for(U=v.Ba.g.parse(g),g=0;g<U.length;g++){let Je=U[g];const gt=Je[0];if(!(gt<=v.K))if(v.K=gt,Je=Je[1],v.I==2)if(Je[0]=="c"){v.M=Je[1],v.ba=Je[2];const On=Je[3];On!=null&&(v.ka=On,v.j.info("VER="+v.ka));const _s=Je[4];_s!=null&&(v.za=_s,v.j.info("SVER="+v.za));const Jn=Je[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(T=1.5*Jn,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const Wn=u.g;if(Wn){const ui=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ui){var Y=T.h;Y.g||ui.indexOf("spdy")==-1&&ui.indexOf("quic")==-1&&ui.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Xr(Y,Y.h),Y.h=null))}if(T.G){const $i=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;$i&&(T.wa=$i,tt(T.J,T.G,$i))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var ce=u;if(T.na=qo(T,T.L?T.ba:null,T.W),ce.L){Zr(T.h,ce);var Oe=ce,Tt=T.O;Tt&&(Oe.H=Tt),Oe.D&&(hs(Oe),us(Oe)),T.g=ce}else zo(T);v.i.length>0&&vs(v)}else Je[0]!="stop"&&Je[0]!="close"||bs(v,7);else v.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?bs(v,7):rl(v):Je[0]!="noop"&&v.l&&v.l.qa(Je),v.A=0)}}is(4)}catch{}}var Ct=class{constructor(u,g){this.g=u,this.map=g}};function Qr(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Kr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ds(u){return u.h?1:u.g?u.g.size:0}function ms(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Xr(u,g){u.g?u.g.add(g):u.h=g}function Zr(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Qr.prototype.cancel=function(){if(this.i=Jr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Jr(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return F(u.i)}var Do=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Li(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const T=u[v].indexOf("=");let U,Y=null;T>=0?(U=u[v].substring(0,T),Y=u[v].substring(T+1)):U=u[v],g(U,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function En(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof En?(this.l=u.l,Ht(this,u.j),this.o=u.o,this.g=u.g,sa(this,u.u),this.h=u.h,Wr(this,Oo(u.i)),this.m=u.m):u&&(g=String(u).match(Do))?(this.l=!1,Ht(this,g[1]||"",!0),this.o=gs(g[2]||""),this.g=gs(g[3]||"",!0),sa(this,g[4]),this.h=gs(g[5]||"",!0),Wr(this,g[6]||"",!0),this.m=gs(g[7]||"")):(this.l=!1,this.i=new ia(null,this.l))}En.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(si(g,Pi,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(si(g,Pi,!0),"@"),u.push(Ms(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(si(v,v.charAt(0)=="/"?el:Io,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",si(v,Mo)),u.join("")},En.prototype.resolve=function(u){const g=Rt(this);let v=!!u.j;v?Ht(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var T=u.h;if(v)sa(g,u.u);else if(v=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var U=g.h.lastIndexOf("/");U!=-1&&(T=g.h.slice(0,U+1)+T)}if(U=T,U==".."||U==".")T="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){T=U.lastIndexOf("/",0)==0,U=U.split("/");const Y=[];for(let ce=0;ce<U.length;){const Oe=U[ce++];Oe=="."?T&&ce==U.length&&Y.push(""):Oe==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),T&&ce==U.length&&Y.push("")):(Y.push(Oe),T=!0)}T=Y.join("/")}else T=U}return v?g.h=T:v=u.i.toString()!=="",v?Wr(g,Oo(u.i)):v=!!u.m,v&&(g.m=u.m),g};function Rt(u){return new En(u)}function Ht(u,g,v){u.j=v?gs(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function sa(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Wr(u,g,v){g instanceof ia?(u.i=g,qi(u.i,u.l)):(v||(g=si(g,aa)),u.i=new ia(g,u.l))}function tt(u,g,v){u.i.set(g,v)}function ni(u){return tt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function gs(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function si(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,hn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Pi=/[#\/\?@]/g,Io=/[#\?:]/g,el=/[#\?]/g,aa=/[#\?@]/g,Mo=/#/g;function ia(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function fn(u){u.g||(u.g=new Map,u.h=0,u.i&&Li(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}i=ia.prototype,i.add=function(u,g){fn(this),this.i=null,u=ra(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function Vo(u,g){fn(u),g=ra(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function tl(u,g){return fn(u),g=ra(u,g),u.g.has(g)}i.forEach=function(u,g){fn(this),this.g.forEach(function(v,T){v.forEach(function(U){u.call(g,U,T,this)},this)},this)};function nl(u,g){fn(u);let v=[];if(typeof g=="string")tl(u,g)&&(v=v.concat(u.g.get(ra(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}i.set=function(u,g){return fn(this),this.i=null,u=ra(this,u),tl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},i.get=function(u,g){return u?(u=nl(this,u),u.length>0?String(u[0]):g):g};function Bi(u,g,v){Vo(u,g),v.length>0&&(u.i=null,u.g.set(ra(u,g),F(v)),u.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let T=0;T<g.length;T++){var v=g[T];const U=Ms(v);v=nl(this,v);for(let Y=0;Y<v.length;Y++){let ce=U;v[Y]!==""&&(ce+="="+Ms(v[Y])),u.push(ce)}}return this.i=u.join("&")};function Oo(u){const g=new ia;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function ra(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function qi(u,g){g&&!u.j&&(fn(u),u.i=null,u.g.forEach(function(v,T){const U=T.toLowerCase();T!=U&&(Vo(this,T),Bi(this,U,v))},u)),u.j=g}function Kn(u,g){const v=new Yn;if(m.Image){const T=new Image;T.onload=N(Mn,v,"TestLoadImage: loaded",!0,g,T),T.onerror=N(Mn,v,"TestLoadImage: error",!1,g,T),T.onabort=N(Mn,v,"TestLoadImage: abort",!1,g,T),T.ontimeout=N(Mn,v,"TestLoadImage: timeout",!1,g,T),m.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function sl(u,g){const v=new Yn,T=new AbortController,U=setTimeout(()=>{T.abort(),Mn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(Y=>{clearTimeout(U),Y.ok?Mn(v,"TestPingServer: ok",!0,g):Mn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),Mn(v,"TestPingServer: error",!1,g)})}function Mn(u,g,v,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(v)}catch{}}function la(){this.g=new Eo}function ps(u){this.i=u.Sb||null,this.h=u.ab||!1}C(ps,To),ps.prototype.g=function(){return new ai(this.i,this.h)};function ai(u,g){Pe.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(ai,Pe),i=ai.prototype,i.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Xn(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||m).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oa(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hi(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hi(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?oa(this):Xn(this),this.readyState==3&&Hi(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,oa(this))},i.Na=function(u){this.g&&(this.response=u,oa(this))},i.ga=function(){this.g&&oa(this)};function oa(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Xn(u)}i.setRequestHeader=function(u,g){this.A.append(u,g)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vn(u){let g="";return re(u,function(v,T){g+=T,g+=":",g+=v,g+=`\r
`}),g}function ii(u,g,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Vn(v),typeof u=="string"?v!=null&&Ms(v):tt(u,g,v))}function at(u){Pe.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(at,Pe);var ys=/^https?$/i,al=["POST","PUT"];i=at.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,g,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$r.g(),this.g.onreadystatechange=M(x(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Y){ri(this,Y);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)v.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const Y of T.keys())v.set(Y,T.get(Y));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),U=m.FormData&&u instanceof m.FormData,!(Array.prototype.indexOf.call(al,g,void 0)>=0)||T||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ce]of v)this.g.setRequestHeader(Y,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){ri(this,Y)}};function ri(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,il(u),Vs(u)}function il(u){u.A||(u.A=!0,Ze(u,"complete"),Ze(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ze(this,"complete"),Ze(this,"abort"),Vs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vs(this,!0)),at.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?li(this):this.Xa())},i.Xa=function(){li(this)};function li(u){if(u.h&&typeof h<"u"){if(u.v&&Zn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ze(u,"readystatechange"),Zn(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var T;if(T=Y===0){let ce=String(u.D).match(Do)[1]||null;!ce&&m.self&&m.self.location&&(ce=m.self.location.protocol.slice(0,-1)),T=!ys.test(ce?ce.toLowerCase():"")}v=T}if(v)Ze(u,"complete"),Ze(u,"success");else{u.o=6;try{var U=Zn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",il(u)}}finally{Vs(u)}}}}function Vs(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||Ze(u,"ready");try{v.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Zn(u){return u.g?u.g.readyState:0}i.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),qu(g)}};function Qt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Os(u){const g={};u=(u.g&&Zn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(A(u[T]))continue;var v=Ao(u[T]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=g[U]||[];g[U]=Y,Y.push(v)}Re(g,function(T){return T.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function ca(u){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xs("baseRetryDelayMs",5e3,u),this.Za=xs("retryDelaySeedMs",1e4,u),this.Ta=xs("forwardChannelMaxRetries",2,u),this.va=xs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Qr(u&&u.concurrentRequestLimit),this.Ba=new la,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ca.prototype,i.ka=8,i.I=1,i.connect=function(u,g,v,T){St(0),this.W=u,this.H=g||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=qo(this,null,this.W),vs(this)};function rl(u){if(Gi(u),u.I==3){var g=u.V++,v=Rt(u.J);if(tt(v,"SID",u.M),tt(v,"RID",g),tt(v,"TYPE","terminate"),oi(u,v),g=new $n(u,u.j,g),g.M=2,g.A=ni(Rt(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&m.Image&&(new Image().src=g.A,v=!0),v||(g.g=Ho(g.j,null),g.g.ea(g.A)),g.F=Date.now(),us(g)}Bo(u)}function ua(u){u.g&&(ol(u),u.g.cancel(),u.g=null)}function Gi(u){ua(u),u.v&&(m.clearTimeout(u.v),u.v=null),Yi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&m.clearTimeout(u.m),u.m=null)}function vs(u){if(!Kr(u.h)&&!u.m){u.m=!0;var g=u.Ea;Ie||j(),Ne||(Ie(),Ne=!0),R.add(g,u),u.D=0}}function Fi(u,g){return ds(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ls(x(u.Ea,u,g),Po(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new $n(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=E(Y),le(Y,this.U)):Y=this.U),this.u!==null||this.R||(U.J=Y,Y=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=ko(this,U,g),v=Rt(this.J),tt(v,"RID",u),tt(v,"CVER",22),this.G&&tt(v,"X-HTTP-Session-Id",this.G),oi(this,v),Y&&(this.R?g="headers="+Ms(Vn(Y))+"&"+g:this.u&&ii(v,this.u,Y)),Xr(this.h,U),this.Ra&&tt(v,"TYPE","init"),this.S?(tt(v,"$req",g),tt(v,"SID","null"),U.U=!0,cs(U,v,null)):cs(U,v,g),this.I=2}}else this.I==3&&(u?ll(this,u):this.i.length==0||Kr(this.h)||ll(this))};function ll(u,g){var v;g?v=g.l:v=u.V++;const T=Rt(u.J);tt(T,"SID",u.M),tt(T,"RID",v),tt(T,"AID",u.K),oi(u,T),u.u&&u.o&&ii(T,u.u,u.o),v=new $n(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=ko(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Xr(u.h,v),cs(v,T,g)}function oi(u,g){u.H&&re(u.H,function(v,T){tt(g,T,v)}),u.l&&re({},function(v,T){tt(g,T,v)})}function ko(u,g,v){v=Math.min(u.i.length,v);const T=u.l?x(u.l.Ka,u.l,u):null;e:{var U=u.i;let Oe=-1;for(;;){const Tt=["count="+v];Oe==-1?v>0?(Oe=U[0].g,Tt.push("ofs="+Oe)):Oe=0:Tt.push("ofs="+Oe);let Je=!0;for(let gt=0;gt<v;gt++){var Y=U[gt].g;const On=U[gt].map;if(Y-=Oe,Y<0)Oe=Math.max(0,U[gt].g-100),Je=!1;else try{Y="req"+Y+"_"||"";try{var ce=On instanceof Map?On:Object.entries(On);for(const[_s,Jn]of ce){let Wn=Jn;p(Jn)&&(Wn=na(Jn)),Tt.push(Y+_s+"="+encodeURIComponent(Wn))}}catch(_s){throw Tt.push(Y+"type="+encodeURIComponent("_badmap")),_s}}catch{T&&T(On)}}if(Je){ce=Tt.join("&");break e}}ce=void 0}return u=u.i.splice(0,v),g.G=u,ce}function zo(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Ie||j(),Ne||(Ie(),Ne=!0),R.add(g,u),u.A=0}}function ci(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ls(x(u.Da,u),Po(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,Uo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ls(x(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),ua(this),Uo(this))};function ol(u){u.B!=null&&(m.clearTimeout(u.B),u.B=null)}function Uo(u){u.g=new $n(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Rt(u.na);tt(g,"RID","rpc"),tt(g,"SID",u.M),tt(g,"AID",u.K),tt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&tt(g,"TO",u.ia),tt(g,"TYPE","xmlhttp"),oi(u,g),u.u&&u.o&&ii(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=ni(Rt(g)),v.u=null,v.R=!0,zi(v,u)}i.Va=function(){this.C!=null&&(this.C=null,ua(this),ci(this),St(19))};function Yi(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Lo(u,g){var v=null;if(u.g==g){Yi(u),ol(u),u.g=null;var T=2}else if(ms(u.h,g))v=g.G,Zr(u.h,g),T=1;else return;if(u.I!=0){if(g.o)if(T==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var U=u.D;T=ki(),Ze(T,new rs(T,v)),vs(u)}else zo(u);else if(U=g.m,U==3||U==0&&g.X>0||!(T==1&&Fi(u,g)||T==2&&ci(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),U){case 1:bs(u,5);break;case 4:bs(u,10);break;case 3:bs(u,6);break;default:bs(u,2)}}}function Po(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function bs(u,g){if(u.j.info("Error code "+g),g==2){var v=x(u.bb,u),T=u.Ua;const U=!T;T=new En(T||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ht(T,"https"),ni(T),U?Kn(T.toString(),v):sl(T.toString(),v)}else St(2);u.I=0,u.l&&u.l.pa(g),Bo(u),Gi(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Bo(u){if(u.I=0,u.ja=[],u.l){const g=Jr(u.h);(g.length!=0||u.i.length!=0)&&(W(u.ja,g),W(u.ja,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.oa()}}function qo(u,g,v){var T=v instanceof En?Rt(v):new En(v);if(T.g!="")g&&(T.g=g+"."+T.g),sa(T,T.u);else{var U=m.location;T=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;const Y=new En(null);T&&Ht(Y,T),g&&(Y.g=g),U&&sa(Y,U),v&&(Y.h=v),T=Y}return v=u.G,g=u.wa,v&&g&&tt(T,v,g),tt(T,"VER",u.ka),oi(u,T),T}function Ho(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new at(new ps({ab:v})):new at(u.ma),g.Fa(u.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Go(){}i=Go.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function ha(){}ha.prototype.g=function(u,g){return new on(u,g)};function on(u,g){Pe.call(this),this.g=new ca(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!A(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!A(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ks(this)}C(on,Pe),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){rl(this.g)},on.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=na(u),u=v);g.i.push(new Ct(g.Ya++,u)),g.I==3&&vs(g)},on.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,on.Z.N.call(this)};function Fo(u){$t.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}C(Fo,$t);function Yo(){Dn.call(this),this.status=1}C(Yo,Dn);function ks(u){this.g=u}C(ks,Go),ks.prototype.ra=function(){Ze(this.g,"a")},ks.prototype.qa=function(u){Ze(this.g,new Fo(u))},ks.prototype.pa=function(u){Ze(this.g,new Yo)},ks.prototype.oa=function(){Ze(this.g,"b")},ha.prototype.createWebChannel=ha.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,w0=function(){return new ha},N0=function(){return ki()},T0=Et,od={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ei.NO_ERROR=0,ei.TIMEOUT=8,ei.HTTP_ERROR=6,tu=ei,Yr.COMPLETE="complete",E0=Yr,No.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Pe.prototype.listen=Pe.prototype.J,Ql=No,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,_0=at}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lr="12.9.0";function UE(i){Lr=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new m0("@firebase/firestore");function Tr(){return Ci.logLevel}function me(i,...t){if(Ci.logLevel<=$e.DEBUG){const s=t.map(Rd);Ci.debug(`Firestore (${Lr}): ${i}`,...s)}}function ea(i,...t){if(Ci.logLevel<=$e.ERROR){const s=t.map(Rd);Ci.error(`Firestore (${Lr}): ${i}`,...s)}}function Ri(i,...t){if(Ci.logLevel<=$e.WARN){const s=t.map(Rd);Ci.warn(`Firestore (${Lr}): ${i}`,...s)}}function Rd(i){if(typeof i=="string")return i;try{return(function(s){return JSON.stringify(s)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(i,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,j0(i,r,s)}function j0(i,t,s){let r=`FIRESTORE (${Lr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw ea(r),new Error(r)}function et(i,t,s,r){let c="Unexpected state";typeof s=="string"?c=s:r=s,i||j0(t,c,r)}function Ve(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ur{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.promise=new Promise(((t,s)=>{this.resolve=t,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class LE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable((()=>s(an.UNAUTHENTICATED)))}shutdown(){}}class PE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,s){this.changeListener=s,t.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class BE{constructor(t){this.t=t,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){et(this.o===void 0,42304);let r=this.i;const c=b=>this.i!==r?(r=this.i,s(b)):Promise.resolve();let h=new Js;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Js,t.enqueueRetryable((()=>c(this.currentUser)))};const m=()=>{const b=h;t.enqueueRetryable((async()=>{await b.promise,await c(this.currentUser)}))},p=b=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((b=>p(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?p(b):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Js)}}),0),m()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==t?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string",31837,{l:r}),new S0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return et(t===null||typeof t=="string",2055,{h:t}),new an(t)}}class qE{constructor(t,s,r){this.P=t,this.T=s,this.I=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class HE{constructor(t,s,r){this.P=t,this.T=s,this.I=r}getToken(){return Promise.resolve(new qE(this.P,this.T,this.I))}start(t,s){t.enqueueRetryable((()=>s(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GE{constructor(t,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_E(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,s){et(this.o===void 0,3512);const r=h=>{h.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const m=h.token!==this.m;return this.m=h.token,me("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?s(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable((()=>r(h)))};const c=h=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>c(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?c(h):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((s=>s?(et(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new nx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let r=0;r<i;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const c=FE(40);for(let h=0;h<c.length;++h)r.length<20&&c[h]<s&&(r+=t.charAt(c[h]%62))}return r}}function He(i,t){return i<t?-1:i>t?1:0}function cd(i,t){const s=Math.min(i.length,t.length);for(let r=0;r<s;r++){const c=i.charAt(r),h=t.charAt(r);if(c!==h)return Zf(c)===Zf(h)?He(c,h):Zf(c)?1:-1}return He(i.length,t.length)}const YE=55296,$E=57343;function Zf(i){const t=i.charCodeAt(0);return t>=YE&&t<=$E}function Ir(i,t,s){return i.length===t.length&&i.every(((r,c)=>s(r,t[c])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="__name__";class js{constructor(t,s,r){s===void 0?s=0:s>t.length&&Ae(637,{offset:s,range:t.length}),r===void 0?r=t.length-s:r>t.length-s&&Ae(1746,{length:r,range:t.length-s}),this.segments=t,this.offset=s,this.len=r}get length(){return this.len}isEqual(t){return js.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof js?t.forEach((r=>{s.push(r)})):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,r=this.limit();s<r;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const r=Math.min(t.length,s.length);for(let c=0;c<r;c++){const h=js.compareSegments(t.get(c),s.get(c));if(h!==0)return h}return He(t.length,s.length)}static compareSegments(t,s){const r=js.isNumericId(t),c=js.isNumericId(s);return r&&!c?-1:!r&&c?1:r&&c?js.extractNumericId(t).compare(js.extractNumericId(s)):cd(t,s)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return za.fromString(t.substring(4,t.length-2))}}class ht extends js{construct(t,s,r){return new ht(t,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const s=[];for(const r of t){if(r.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((c=>c.length>0)))}return new ht(s)}static emptyPath(){return new ht([])}}const QE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends js{construct(t,s,r){return new en(t,s,r)}static isValidIdentifier(t){return QE.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sx}static keyField(){return new en([sx])}static fromServerFormat(t){const s=[];let r="",c=0;const h=()=>{if(r.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let m=!1;for(;c<t.length;){const p=t[c];if(p==="\\"){if(c+1===t.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const b=t[c+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=b,c+=2}else p==="`"?(m=!m,c++):p!=="."||m?(r+=p,c++):(h(),c++)}if(h(),m)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new en(s)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.path=t}static fromPath(t){return new Te(ht.fromString(t))}static fromName(t){return new Te(ht.fromString(t).popFirst(5))}static empty(){return new Te(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ht.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return ht.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Te(new ht(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(i,t,s){if(!s)throw new fe(Z.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function KE(i,t,s,r){if(t===!0&&r===!0)throw new fe(Z.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function ax(i){if(!Te.isDocumentKey(i))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ix(i){if(Te.isDocumentKey(i))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function C0(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Tu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Ae(12329,{type:typeof i})}function Ds(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Tu(i);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(i,t){const s={typeString:i};return t&&(s.value=t),s}function mo(i,t){if(!C0(i))throw new fe(Z.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in t)if(t[r]){const c=t[r].typeString,h="value"in t[r]?{value:t[r].value}:void 0;if(!(r in i)){s=`JSON missing required field: '${r}'`;break}const m=i[r];if(c&&typeof m!==c){s=`JSON field '${r}' must be a ${c}.`;break}if(h!==void 0&&m!==h.value){s=`Expected '${r}' field to equal '${h.value}'`;break}}if(s)throw new fe(Z.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=-62135596800,lx=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(t){return ut.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),r=Math.floor((t-1e3*s)*lx);return new ut(s,r)}constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<rx)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lx}_compareTo(t){return this.seconds===t.seconds?He(this.nanoseconds,t.nanoseconds):He(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(mo(t,ut._jsonSchema))return new ut(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-rx;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:zt("string",ut._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(t){return new De(t)}static min(){return new De(new ut(0,0))}static max(){return new De(new ut(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=-1;function XE(i,t){const s=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,c=De.fromTimestamp(r===1e9?new ut(s+1,0):new ut(s,r));return new Pa(c,Te.empty(),t)}function ZE(i){return new Pa(i.readTime,i.key,io)}class Pa{constructor(t,s,r){this.readTime=t,this.documentKey=s,this.largestBatchId=r}static min(){return new Pa(De.min(),Te.empty(),io)}static max(){return new Pa(De.max(),Te.empty(),io)}}function JE(i,t){let s=i.readTime.compareTo(t.readTime);return s!==0?s:(s=Te.comparator(i.documentKey,t.documentKey),s!==0?s:He(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pr(i){if(i.code!==Z.FAILED_PRECONDITION||i.message!==WE)throw i;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new ee(((r,c)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(r,c)},this.catchCallback=h=>{this.wrapFailure(s,h).next(r,c)}}))}toPromise(){return new Promise(((t,s)=>{this.next(t,s)}))}wrapUserFunction(t){try{const s=t();return s instanceof ee?s:ee.resolve(s)}catch(s){return ee.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction((()=>t(s))):ee.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction((()=>t(s))):ee.reject(s)}static resolve(t){return new ee(((s,r)=>{s(t)}))}static reject(t){return new ee(((s,r)=>{r(t)}))}static waitFor(t){return new ee(((s,r)=>{let c=0,h=0,m=!1;t.forEach((p=>{++c,p.next((()=>{++h,m&&h===c&&s()}),(b=>r(b)))})),m=!0,h===c&&s()}))}static or(t){let s=ee.resolve(!1);for(const r of t)s=s.next((c=>c?ee.resolve(c):r()));return s}static forEach(t,s){const r=[];return t.forEach(((c,h)=>{r.push(s.call(this,c,h))})),this.waitFor(r)}static mapArray(t,s){return new ee(((r,c)=>{const h=t.length,m=new Array(h);let p=0;for(let b=0;b<h;b++){const x=b;s(t[x]).next((N=>{m[x]=N,++p,p===h&&r(m)}),(N=>c(N)))}}))}static doWhile(t,s){return new ee(((r,c)=>{const h=()=>{t()===!0?s().next((()=>{h()}),c):r()};h()}))}}function tT(i){const t=i.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Br(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Nu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=-1;function wu(i){return i==null}function hu(i){return i===0&&1/i==-1/0}function nT(i){return typeof i=="number"&&Number.isInteger(i)&&!hu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="";function sT(i){let t="";for(let s=0;s<i.length;s++)t.length>0&&(t=ox(t)),t=aT(i.get(s),t);return ox(t)}function aT(i,t){let s=t;const r=i.length;for(let c=0;c<r;c++){const h=i.charAt(c);switch(h){case"\0":s+="";break;case R0:s+="";break;default:s+=h}}return s}function ox(i){return i+R0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(i){let t=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&t++;return t}function Qa(i,t){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&t(s,i[s])}function D0(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t,s){this.comparator=t,this.root=s||Wt.EMPTY}insert(t,s){return new yt(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(t){return new yt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(t){let s=0,r=this.root;for(;!r.isEmpty();){const c=this.comparator(t,r.key);if(c===0)return s+r.left.size;c<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((s,r)=>(t(s,r),!1)))}toString(){const t=[];return this.inorderTraversal(((s,r)=>(t.push(`${s}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Zc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Zc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Zc(this.root,t,this.comparator,!0)}}class Zc{constructor(t,s,r,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=s?r(t.key,s):1,s&&c&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Wt{constructor(t,s,r,c,h){this.key=t,this.value=s,this.color=r??Wt.RED,this.left=c??Wt.EMPTY,this.right=h??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,r,c,h){return new Wt(t??this.key,s??this.value,r??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,r){let c=this;const h=r(t,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(t,s,r),null):h===0?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(t,s,r)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let r,c=this;if(s(t,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(t,s),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),s(t,c.key)===0){if(c.right.isEmpty())return Wt.EMPTY;r=c.right.min(),c=c.copy(r.key,r.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(t,s))}return c.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ae(27949);return t+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(t,s,r,c,h){return this}insert(t,s,r){return new Wt(t,s)}remove(t,s){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t){this.comparator=t,this.data=new yt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((s,r)=>(t(s),!1)))}forEachInRange(t,s){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const c=r.getNext();if(this.comparator(c.key,t[1])>=0)return;s(c.key)}}forEachWhile(t,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new ux(this.data.getIterator())}getIteratorFrom(t){return new ux(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach((r=>{s=s.add(r)})),s}isEqual(t){if(!(t instanceof Pt)||this.size!==t.size)return!1;const s=this.data.getIterator(),r=t.data.getIterator();for(;s.hasNext();){const c=s.getNext().key,h=r.getNext().key;if(this.comparator(c,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((s=>{t.push(s)})),t}toString(){const t=[];return this.forEach((s=>t.push(s))),"SortedSet("+t.toString()+")"}copy(t){const s=new Pt(this.comparator);return s.data=t,s}}class ux{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t){this.fields=t,t.sort(en.comparator)}static empty(){return new Rn([])}unionWith(t){let s=new Pt(en.comparator);for(const r of this.fields)s=s.add(r);for(const r of t)s=s.add(r);return new Rn(s.toArray())}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return Ir(this.fields,t.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.binaryString=t}static fromBase64String(t){const s=(function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new I0("Invalid base64 string: "+h):h}})(t);return new tn(s)}static fromUint8Array(t){const s=(function(c){let h="";for(let m=0;m<c.length;++m)h+=String.fromCharCode(c[m]);return h})(t);return new tn(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let c=0;c<s.length;c++)r[c]=s.charCodeAt(c);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return He(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const iT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ba(i){if(et(!!i,39018),typeof i=="string"){let t=0;const s=iT.exec(i);if(et(!!s,46558,{timestamp:i}),s[1]){let c=s[1];c=(c+"000000000").substr(0,9),t=Number(c)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:jt(i.seconds),nanos:jt(i.nanos)}}function jt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function qa(i){return typeof i=="string"?tn.fromBase64String(i):tn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="server_timestamp",V0="__type__",O0="__previous_value__",k0="__local_write_time__";function Md(i){var s,r;return((r=(((s=i==null?void 0:i.mapValue)==null?void 0:s.fields)||{})[V0])==null?void 0:r.stringValue)===M0}function ju(i){const t=i.mapValue.fields[O0];return Md(t)?ju(t):t}function ro(i){const t=Ba(i.mapValue.fields[k0].timestampValue);return new ut(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t,s,r,c,h,m,p,b,x,N,C){this.databaseId=t,this.appId=s,this.persistenceKey=r,this.host=c,this.ssl=h,this.forceLongPolling=m,this.autoDetectLongPolling=p,this.longPollingOptions=b,this.useFetchStreams=x,this.isUsingEmulator=N,this.apiKey=C}}const fu="(default)";class lo{constructor(t,s){this.projectId=t,this.database=s||fu}static empty(){return new lo("","")}get isDefaultDatabase(){return this.database===fu}isEqual(t){return t instanceof lo&&t.projectId===this.projectId&&t.database===this.database}}function lT(i,t){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lo(i.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="__type__",oT="__max__",Jc={mapValue:{}},U0="__vector__",du="value";function Ha(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Md(i)?4:uT(i)?9007199254740991:cT(i)?10:11:Ae(28295,{value:i})}function Is(i,t){if(i===t)return!0;const s=Ha(i);if(s!==Ha(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return ro(i).isEqual(ro(t));case 3:return(function(c,h){if(typeof c.timestampValue=="string"&&typeof h.timestampValue=="string"&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const m=Ba(c.timestampValue),p=Ba(h.timestampValue);return m.seconds===p.seconds&&m.nanos===p.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(c,h){return qa(c.bytesValue).isEqual(qa(h.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(c,h){return jt(c.geoPointValue.latitude)===jt(h.geoPointValue.latitude)&&jt(c.geoPointValue.longitude)===jt(h.geoPointValue.longitude)})(i,t);case 2:return(function(c,h){if("integerValue"in c&&"integerValue"in h)return jt(c.integerValue)===jt(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const m=jt(c.doubleValue),p=jt(h.doubleValue);return m===p?hu(m)===hu(p):isNaN(m)&&isNaN(p)}return!1})(i,t);case 9:return Ir(i.arrayValue.values||[],t.arrayValue.values||[],Is);case 10:case 11:return(function(c,h){const m=c.mapValue.fields||{},p=h.mapValue.fields||{};if(cx(m)!==cx(p))return!1;for(const b in m)if(m.hasOwnProperty(b)&&(p[b]===void 0||!Is(m[b],p[b])))return!1;return!0})(i,t);default:return Ae(52216,{left:i})}}function oo(i,t){return(i.values||[]).find((s=>Is(s,t)))!==void 0}function Mr(i,t){if(i===t)return 0;const s=Ha(i),r=Ha(t);if(s!==r)return He(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return He(i.booleanValue,t.booleanValue);case 2:return(function(h,m){const p=jt(h.integerValue||h.doubleValue),b=jt(m.integerValue||m.doubleValue);return p<b?-1:p>b?1:p===b?0:isNaN(p)?isNaN(b)?0:-1:1})(i,t);case 3:return hx(i.timestampValue,t.timestampValue);case 4:return hx(ro(i),ro(t));case 5:return cd(i.stringValue,t.stringValue);case 6:return(function(h,m){const p=qa(h),b=qa(m);return p.compareTo(b)})(i.bytesValue,t.bytesValue);case 7:return(function(h,m){const p=h.split("/"),b=m.split("/");for(let x=0;x<p.length&&x<b.length;x++){const N=He(p[x],b[x]);if(N!==0)return N}return He(p.length,b.length)})(i.referenceValue,t.referenceValue);case 8:return(function(h,m){const p=He(jt(h.latitude),jt(m.latitude));return p!==0?p:He(jt(h.longitude),jt(m.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return fx(i.arrayValue,t.arrayValue);case 10:return(function(h,m){var M,F,W,ie;const p=h.fields||{},b=m.fields||{},x=(M=p[du])==null?void 0:M.arrayValue,N=(F=b[du])==null?void 0:F.arrayValue,C=He(((W=x==null?void 0:x.values)==null?void 0:W.length)||0,((ie=N==null?void 0:N.values)==null?void 0:ie.length)||0);return C!==0?C:fx(x,N)})(i.mapValue,t.mapValue);case 11:return(function(h,m){if(h===Jc.mapValue&&m===Jc.mapValue)return 0;if(h===Jc.mapValue)return 1;if(m===Jc.mapValue)return-1;const p=h.fields||{},b=Object.keys(p),x=m.fields||{},N=Object.keys(x);b.sort(),N.sort();for(let C=0;C<b.length&&C<N.length;++C){const M=cd(b[C],N[C]);if(M!==0)return M;const F=Mr(p[b[C]],x[N[C]]);if(F!==0)return F}return He(b.length,N.length)})(i.mapValue,t.mapValue);default:throw Ae(23264,{he:s})}}function hx(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return He(i,t);const s=Ba(i),r=Ba(t),c=He(s.seconds,r.seconds);return c!==0?c:He(s.nanos,r.nanos)}function fx(i,t){const s=i.values||[],r=t.values||[];for(let c=0;c<s.length&&c<r.length;++c){const h=Mr(s[c],r[c]);if(h)return h}return He(s.length,r.length)}function Vr(i){return ud(i)}function ud(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(s){const r=Ba(s);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(s){return qa(s).toBase64()})(i.bytesValue):"referenceValue"in i?(function(s){return Te.fromName(s).toString()})(i.referenceValue):"geoPointValue"in i?(function(s){return`geo(${s.latitude},${s.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(s){let r="[",c=!0;for(const h of s.values||[])c?c=!1:r+=",",r+=ud(h);return r+"]"})(i.arrayValue):"mapValue"in i?(function(s){const r=Object.keys(s.fields||{}).sort();let c="{",h=!0;for(const m of r)h?h=!1:c+=",",c+=`${m}:${ud(s.fields[m])}`;return c+"}"})(i.mapValue):Ae(61005,{value:i})}function nu(i){switch(Ha(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ju(i);return t?16+nu(t):16;case 5:return 2*i.stringValue.length;case 6:return qa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((c,h)=>c+nu(h)),0)})(i.arrayValue);case 10:case 11:return(function(r){let c=0;return Qa(r.fields,((h,m)=>{c+=h.length+nu(m)})),c})(i.mapValue);default:throw Ae(13486,{value:i})}}function dx(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function hd(i){return!!i&&"integerValue"in i}function Vd(i){return!!i&&"arrayValue"in i}function mx(i){return!!i&&"nullValue"in i}function gx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function su(i){return!!i&&"mapValue"in i}function cT(i){var s,r;return((r=(((s=i==null?void 0:i.mapValue)==null?void 0:s.fields)||{})[z0])==null?void 0:r.stringValue)===U0}function Wl(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Qa(i.mapValue.fields,((s,r)=>t.mapValue.fields[s]=Wl(r))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=Wl(i.arrayValue.values[s]);return t}return{...i}}function uT(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===oT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this.value=t}static empty(){return new vn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let r=0;r<t.length-1;++r)if(s=(s.mapValue.fields||{})[t.get(r)],!su(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=Wl(s)}setAll(t){let s=en.emptyPath(),r={},c=[];t.forEach(((m,p)=>{if(!s.isImmediateParentOf(p)){const b=this.getFieldsMap(s);this.applyChanges(b,r,c),r={},c=[],s=p.popLast()}m?r[p.lastSegment()]=Wl(m):c.push(p.lastSegment())}));const h=this.getFieldsMap(s);this.applyChanges(h,r,c)}delete(t){const s=this.field(t.popLast());su(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return Is(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<t.length;++r){let c=s.mapValue.fields[t.get(r)];su(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},s.mapValue.fields[t.get(r)]=c),s=c}return s.mapValue.fields}applyChanges(t,s,r){Qa(s,((c,h)=>t[c]=h));for(const c of r)delete t[c]}clone(){return new vn(Wl(this.value))}}function L0(i){const t=[];return Qa(i.fields,((s,r)=>{const c=new en([s]);if(su(r)){const h=L0(r.mapValue).fields;if(h.length===0)t.push(c);else for(const m of h)t.push(c.child(m))}else t.push(c)})),new Rn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t,s,r,c,h,m,p){this.key=t,this.documentType=s,this.version=r,this.readTime=c,this.createTime=h,this.data=m,this.documentState=p}static newInvalidDocument(t){return new rn(t,0,De.min(),De.min(),De.min(),vn.empty(),0)}static newFoundDocument(t,s,r,c){return new rn(t,1,s,De.min(),r,c,0)}static newNoDocument(t,s){return new rn(t,2,s,De.min(),De.min(),vn.empty(),0)}static newUnknownDocument(t,s){return new rn(t,3,s,De.min(),De.min(),vn.empty(),2)}convertToFoundDocument(t,s){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof rn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t,s){this.position=t,this.inclusive=s}}function px(i,t,s){let r=0;for(let c=0;c<i.position.length;c++){const h=t[c],m=i.position[c];if(h.field.isKeyField()?r=Te.comparator(Te.fromName(m.referenceValue),s.key):r=Mr(m,s.data.field(h.field)),h.dir==="desc"&&(r*=-1),r!==0)break}return r}function yx(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!Is(i.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t,s="asc"){this.field=t,this.dir=s}}function hT(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{}class kt extends P0{constructor(t,s,r){super(),this.field=t,this.op=s,this.value=r}static create(t,s,r){return t.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(t,s,r):new dT(t,s,r):s==="array-contains"?new pT(t,r):s==="in"?new yT(t,r):s==="not-in"?new xT(t,r):s==="array-contains-any"?new vT(t,r):new kt(t,s,r)}static createKeyFieldInFilter(t,s,r){return s==="in"?new mT(t,r):new gT(t,r)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Mr(s,this.value)):s!==null&&Ha(this.value)===Ha(s)&&this.matchesComparison(Mr(s,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends P0{constructor(t,s){super(),this.filters=t,this.op=s,this.Pe=null}static create(t,s){return new as(t,s)}matches(t){return B0(this)?this.filters.find((s=>!s.matches(t)))===void 0:this.filters.find((s=>s.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,s)=>t.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function B0(i){return i.op==="and"}function q0(i){return fT(i)&&B0(i)}function fT(i){for(const t of i.filters)if(t instanceof as)return!1;return!0}function fd(i){if(i instanceof kt)return i.field.canonicalString()+i.op.toString()+Vr(i.value);if(q0(i))return i.filters.map((t=>fd(t))).join(",");{const t=i.filters.map((s=>fd(s))).join(",");return`${i.op}(${t})`}}function H0(i,t){return i instanceof kt?(function(r,c){return c instanceof kt&&r.op===c.op&&r.field.isEqual(c.field)&&Is(r.value,c.value)})(i,t):i instanceof as?(function(r,c){return c instanceof as&&r.op===c.op&&r.filters.length===c.filters.length?r.filters.reduce(((h,m,p)=>h&&H0(m,c.filters[p])),!0):!1})(i,t):void Ae(19439)}function G0(i){return i instanceof kt?(function(s){return`${s.field.canonicalString()} ${s.op} ${Vr(s.value)}`})(i):i instanceof as?(function(s){return s.op.toString()+" {"+s.getFilters().map(G0).join(" ,")+"}"})(i):"Filter"}class dT extends kt{constructor(t,s,r){super(t,s,r),this.key=Te.fromName(r.referenceValue)}matches(t){const s=Te.comparator(t.key,this.key);return this.matchesComparison(s)}}class mT extends kt{constructor(t,s){super(t,"in",s),this.keys=F0("in",s)}matches(t){return this.keys.some((s=>s.isEqual(t.key)))}}class gT extends kt{constructor(t,s){super(t,"not-in",s),this.keys=F0("not-in",s)}matches(t){return!this.keys.some((s=>s.isEqual(t.key)))}}function F0(i,t){var s;return(((s=t.arrayValue)==null?void 0:s.values)||[]).map((r=>Te.fromName(r.referenceValue)))}class pT extends kt{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return Vd(s)&&oo(s.arrayValue,this.value)}}class yT extends kt{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&oo(this.value.arrayValue,s)}}class xT extends kt{constructor(t,s){super(t,"not-in",s)}matches(t){if(oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&s.nullValue===void 0&&!oo(this.value.arrayValue,s)}}class vT extends kt{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!Vd(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>oo(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t,s=null,r=[],c=[],h=null,m=null,p=null){this.path=t,this.collectionGroup=s,this.orderBy=r,this.filters=c,this.limit=h,this.startAt=m,this.endAt=p,this.Te=null}}function xx(i,t=null,s=[],r=[],c=null,h=null,m=null){return new bT(i,t,s,r,c,h,m)}function Od(i){const t=Ve(i);if(t.Te===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map((r=>fd(r))).join(","),s+="|ob:",s+=t.orderBy.map((r=>(function(h){return h.field.canonicalString()+h.dir})(r))).join(","),wu(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>Vr(r))).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>Vr(r))).join(",")),t.Te=s}return t.Te}function kd(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!hT(i.orderBy[s],t.orderBy[s]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!H0(i.filters[s],t.filters[s]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!yx(i.startAt,t.startAt)&&yx(i.endAt,t.endAt)}function dd(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t,s=null,r=[],c=[],h=null,m="F",p=null,b=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=c,this.limit=h,this.limitType=m,this.startAt=p,this.endAt=b,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function _T(i,t,s,r,c,h,m,p){return new qr(i,t,s,r,c,h,m,p)}function zd(i){return new qr(i)}function vx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function ET(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Y0(i){return i.collectionGroup!==null}function eo(i){const t=Ve(i);if(t.Ie===null){t.Ie=[];const s=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),s.add(h.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let p=new Pt(en.comparator);return m.filters.forEach((b=>{b.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(t).forEach((h=>{s.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new co(h,r))})),s.has(en.keyField().canonicalString())||t.Ie.push(new co(en.keyField(),r))}return t.Ie}function Ss(i){const t=Ve(i);return t.Ee||(t.Ee=TT(t,eo(i))),t.Ee}function TT(i,t){if(i.limitType==="F")return xx(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((c=>{const h=c.dir==="desc"?"asc":"desc";return new co(c.field,h)}));const s=i.endAt?new mu(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new mu(i.startAt.position,i.startAt.inclusive):null;return xx(i.path,i.collectionGroup,t,i.filters,i.limit,s,r)}}function md(i,t){const s=i.filters.concat([t]);return new qr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),s,i.limit,i.limitType,i.startAt,i.endAt)}function NT(i,t){const s=i.explicitOrderBy.concat([t]);return new qr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function gd(i,t,s){return new qr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,s,i.startAt,i.endAt)}function Su(i,t){return kd(Ss(i),Ss(t))&&i.limitType===t.limitType}function $0(i){return`${Od(Ss(i))}|lt:${i.limitType}`}function Nr(i){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((c=>G0(c))).join(", ")}]`),wu(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((c=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(c))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((c=>Vr(c))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((c=>Vr(c))).join(",")),`Target(${r})`})(Ss(i))}; limitType=${i.limitType})`}function Au(i,t){return t.isFoundDocument()&&(function(r,c){const h=c.key.path;return r.collectionGroup!==null?c.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):Te.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)})(i,t)&&(function(r,c){for(const h of eo(r))if(!h.field.isKeyField()&&c.data.field(h.field)===null)return!1;return!0})(i,t)&&(function(r,c){for(const h of r.filters)if(!h.matches(c))return!1;return!0})(i,t)&&(function(r,c){return!(r.startAt&&!(function(m,p,b){const x=px(m,p,b);return m.inclusive?x<=0:x<0})(r.startAt,eo(r),c)||r.endAt&&!(function(m,p,b){const x=px(m,p,b);return m.inclusive?x>=0:x>0})(r.endAt,eo(r),c))})(i,t)}function wT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Q0(i){return(t,s)=>{let r=!1;for(const c of eo(i)){const h=jT(c,t,s);if(h!==0)return h;r=r||c.field.isKeyField()}return 0}}function jT(i,t,s){const r=i.field.isKeyField()?Te.comparator(t.key,s.key):(function(h,m,p){const b=m.data.field(h),x=p.data.field(h);return b!==null&&x!==null?Mr(b,x):Ae(42886)})(i.field,t,s);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r!==void 0){for(const[c,h]of r)if(this.equalsFn(c,t))return h}}has(t){return this.get(t)!==void 0}set(t,s){const r=this.mapKeyFn(t),c=this.inner[r];if(c===void 0)return this.inner[r]=[[t,s]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],t))return void(c[h]=[t,s]);c.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return!1;for(let c=0;c<r.length;c++)if(this.equalsFn(r[c][0],t))return r.length===1?delete this.inner[s]:r.splice(c,1),this.innerSize--,!0;return!1}forEach(t){Qa(this.inner,((s,r)=>{for(const[c,h]of r)t(c,h)}))}isEmpty(){return D0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new yt(Te.comparator);function ta(){return ST}const K0=new yt(Te.comparator);function Kl(...i){let t=K0;for(const s of i)t=t.insert(s.key,s);return t}function X0(i){let t=K0;return i.forEach(((s,r)=>t=t.insert(s,r.overlayedDocument))),t}function Si(){return to()}function Z0(){return to()}function to(){return new Ii((i=>i.toString()),((i,t)=>i.isEqual(t)))}const AT=new yt(Te.comparator),CT=new Pt(Te.comparator);function Ge(...i){let t=CT;for(const s of i)t=t.add(s);return t}const RT=new Pt(He);function DT(){return RT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(t)?"-0":t}}function J0(i){return{integerValue:""+i}}function IT(i,t){return nT(t)?J0(t):Ud(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(){this._=void 0}}function MT(i,t,s){return i instanceof gu?(function(c,h){const m={fields:{[V0]:{stringValue:M0},[k0]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&Md(h)&&(h=ju(h)),h&&(m.fields[O0]=h),{mapValue:m}})(s,t):i instanceof uo?ev(i,t):i instanceof ho?tv(i,t):(function(c,h){const m=W0(c,h),p=bx(m)+bx(c.Ae);return hd(m)&&hd(c.Ae)?J0(p):Ud(c.serializer,p)})(i,t)}function VT(i,t,s){return i instanceof uo?ev(i,t):i instanceof ho?tv(i,t):s}function W0(i,t){return i instanceof pu?(function(r){return hd(r)||(function(h){return!!h&&"doubleValue"in h})(r)})(t)?t:{integerValue:0}:null}class gu extends Cu{}class uo extends Cu{constructor(t){super(),this.elements=t}}function ev(i,t){const s=nv(t);for(const r of i.elements)s.some((c=>Is(c,r)))||s.push(r);return{arrayValue:{values:s}}}class ho extends Cu{constructor(t){super(),this.elements=t}}function tv(i,t){let s=nv(t);for(const r of i.elements)s=s.filter((c=>!Is(c,r)));return{arrayValue:{values:s}}}class pu extends Cu{constructor(t,s){super(),this.serializer=t,this.Ae=s}}function bx(i){return jt(i.integerValue||i.doubleValue)}function nv(i){return Vd(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function OT(i,t){return i.field.isEqual(t.field)&&(function(r,c){return r instanceof uo&&c instanceof uo||r instanceof ho&&c instanceof ho?Ir(r.elements,c.elements,Is):r instanceof pu&&c instanceof pu?Is(r.Ae,c.Ae):r instanceof gu&&c instanceof gu})(i.transform,t.transform)}class kT{constructor(t,s){this.version=t,this.transformResults=s}}class bn{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new bn}static exists(t){return new bn(void 0,t)}static updateTime(t){return new bn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function au(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Ru{}function sv(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Du(i.key,bn.none()):new go(i.key,i.data,bn.none());{const s=i.data,r=vn.empty();let c=new Pt(en.comparator);for(let h of t.fields)if(!c.has(h)){let m=s.field(h);m===null&&h.length>1&&(h=h.popLast(),m=s.field(h)),m===null?r.delete(h):r.set(h,m),c=c.add(h)}return new Ka(i.key,r,new Rn(c.toArray()),bn.none())}}function zT(i,t,s){i instanceof go?(function(c,h,m){const p=c.value.clone(),b=Ex(c.fieldTransforms,h,m.transformResults);p.setAll(b),h.convertToFoundDocument(m.version,p).setHasCommittedMutations()})(i,t,s):i instanceof Ka?(function(c,h,m){if(!au(c.precondition,h))return void h.convertToUnknownDocument(m.version);const p=Ex(c.fieldTransforms,h,m.transformResults),b=h.data;b.setAll(av(c)),b.setAll(p),h.convertToFoundDocument(m.version,b).setHasCommittedMutations()})(i,t,s):(function(c,h,m){h.convertToNoDocument(m.version).setHasCommittedMutations()})(0,t,s)}function no(i,t,s,r){return i instanceof go?(function(h,m,p,b){if(!au(h.precondition,m))return p;const x=h.value.clone(),N=Tx(h.fieldTransforms,b,m);return x.setAll(N),m.convertToFoundDocument(m.version,x).setHasLocalMutations(),null})(i,t,s,r):i instanceof Ka?(function(h,m,p,b){if(!au(h.precondition,m))return p;const x=Tx(h.fieldTransforms,b,m),N=m.data;return N.setAll(av(h)),N.setAll(x),m.convertToFoundDocument(m.version,N).setHasLocalMutations(),p===null?null:p.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((C=>C.field)))})(i,t,s,r):(function(h,m,p){return au(h.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):p})(i,t,s)}function UT(i,t){let s=null;for(const r of i.fieldTransforms){const c=t.data.field(r.field),h=W0(r.transform,c||null);h!=null&&(s===null&&(s=vn.empty()),s.set(r.field,h))}return s||null}function _x(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(r,c){return r===void 0&&c===void 0||!(!r||!c)&&Ir(r,c,((h,m)=>OT(h,m)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class go extends Ru{constructor(t,s,r,c=[]){super(),this.key=t,this.value=s,this.precondition=r,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Ka extends Ru{constructor(t,s,r,c,h=[]){super(),this.key=t,this.data=s,this.fieldMask=r,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function av(i){const t=new Map;return i.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=i.data.field(s);t.set(s,r)}})),t}function Ex(i,t,s){const r=new Map;et(i.length===s.length,32656,{Ve:s.length,de:i.length});for(let c=0;c<s.length;c++){const h=i[c],m=h.transform,p=t.data.field(h.field);r.set(h.field,VT(m,p,s[c]))}return r}function Tx(i,t,s){const r=new Map;for(const c of i){const h=c.transform,m=s.data.field(c.field);r.set(c.field,MT(h,m,t))}return r}class Du extends Ru{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LT extends Ru{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(t,s,r,c){this.batchId=t,this.localWriteTime=s,this.baseMutations=r,this.mutations=c}applyToRemoteDocument(t,s){const r=s.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(t.key)&&zT(h,t,r[c])}}applyToLocalView(t,s){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(s=no(r,t,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(s=no(r,t,s,this.localWriteTime));return s}applyToLocalDocumentSet(t,s){const r=Z0();return this.mutations.forEach((c=>{const h=t.get(c.key),m=h.overlayedDocument;let p=this.applyToLocalView(m,h.mutatedFields);p=s.has(c.key)?null:p;const b=sv(m,p);b!==null&&r.set(c.key,b),m.isValidDocument()||m.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((t,s)=>t.add(s.key)),Ge())}isEqual(t){return this.batchId===t.batchId&&Ir(this.mutations,t.mutations,((s,r)=>_x(s,r)))&&Ir(this.baseMutations,t.baseMutations,((s,r)=>_x(s,r)))}}class Ld{constructor(t,s,r,c){this.batch=t,this.commitVersion=s,this.mutationResults=r,this.docVersions=c}static from(t,s,r){et(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let c=(function(){return AT})();const h=t.mutations;for(let m=0;m<h.length;m++)c=c.insert(h[m].key,r[m].version);return new Ld(t,s,r,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(t,s){this.count=t,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Ye;function HT(i){switch(i){case Z.OK:return Ae(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ae(15467,{code:i})}}function iv(i){if(i===void 0)return ea("GRPC error has no .code"),Z.UNKNOWN;switch(i){case Ot.OK:return Z.OK;case Ot.CANCELLED:return Z.CANCELLED;case Ot.UNKNOWN:return Z.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return Z.INTERNAL;case Ot.UNAVAILABLE:return Z.UNAVAILABLE;case Ot.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ot.NOT_FOUND:return Z.NOT_FOUND;case Ot.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ot.ABORTED:return Z.ABORTED;case Ot.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ot.DATA_LOSS:return Z.DATA_LOSS;default:return Ae(39323,{code:i})}}(Ye=Ot||(Ot={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=new za([4294967295,4294967295],0);function Nx(i){const t=GT().encode(i),s=new b0;return s.update(t),new Uint8Array(s.digest())}function wx(i){const t=new DataView(i.buffer),s=t.getUint32(0,!0),r=t.getUint32(4,!0),c=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new za([s,r],0),new za([c,h],0)]}class Pd{constructor(t,s,r){if(this.bitmap=t,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Xl(`Invalid padding: ${s}`);if(r<0)throw new Xl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${r}`);if(t.length===0&&s!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*t.length-s,this.pe=za.fromNumber(this.ge)}ye(t,s,r){let c=t.add(s.multiply(za.fromNumber(r)));return c.compare(FT)===1&&(c=new za([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const s=Nx(t),[r,c]=wx(s);for(let h=0;h<this.hashCount;h++){const m=this.ye(r,c,h);if(!this.we(m))return!1}return!0}static create(t,s,r){const c=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),m=new Pd(h,c,s);return r.forEach((p=>m.insert(p))),m}insert(t){if(this.ge===0)return;const s=Nx(t),[r,c]=wx(s);for(let h=0;h<this.hashCount;h++){const m=this.ye(r,c,h);this.be(m)}}be(t){const s=Math.floor(t/8),r=t%8;this.bitmap[s]|=1<<r}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(t,s,r,c,h){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,s,r){const c=new Map;return c.set(t,po.createSynthesizedTargetChangeForCurrentChange(t,s,r)),new Iu(De.min(),c,new yt(He),ta(),Ge())}}class po{constructor(t,s,r,c,h){this.resumeToken=t,this.current=s,this.addedDocuments=r,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,s,r){return new po(r,s,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(t,s,r,c){this.Se=t,this.removedTargetIds=s,this.key=r,this.De=c}}class rv{constructor(t,s){this.targetId=t,this.Ce=s}}class lv{constructor(t,s,r=tn.EMPTY_BYTE_STRING,c=null){this.state=t,this.targetIds=s,this.resumeToken=r,this.cause=c}}class jx{constructor(){this.ve=0,this.Fe=Sx(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ge(),s=Ge(),r=Ge();return this.Fe.forEach(((c,h)=>{switch(h){case 0:t=t.add(c);break;case 2:s=s.add(c);break;case 1:r=r.add(c);break;default:Ae(38017,{changeType:h})}})),new po(this.Me,this.xe,t,s,r)}Ke(){this.Oe=!1,this.Fe=Sx()}qe(t,s){this.Oe=!0,this.Fe=this.Fe.insert(t,s)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class YT{constructor(t){this.Ge=t,this.ze=new Map,this.je=ta(),this.He=Wc(),this.Je=Wc(),this.Ze=new yt(He)}Xe(t){for(const s of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(s,t.De):this.et(s,t.key,t.De);for(const s of t.removedTargetIds)this.et(s,t.key,t.De)}tt(t){this.forEachTarget(t,(s=>{const r=this.nt(s);switch(t.state){case 0:this.rt(s)&&r.Le(t.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(t.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.Qe(),r.Le(t.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(t.resumeToken));break;default:Ae(56790,{state:t.state})}}))}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.ze.forEach(((r,c)=>{this.rt(c)&&s(c)}))}st(t){const s=t.targetId,r=t.Ce.count,c=this.ot(s);if(c){const h=c.target;if(dd(h))if(r===0){const m=new Te(h.path);this.et(s,m,rn.newNoDocument(m,De.min()))}else et(r===1,20013,{expectedCount:r});else{const m=this._t(s);if(m!==r){const p=this.ut(t),b=p?this.ct(p,t,m):1;if(b!==0){this.it(s);const x=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(s,x)}}}}}ut(t){const s=t.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:c=0},hashCount:h=0}=s;let m,p;try{m=qa(r).toUint8Array()}catch(b){if(b instanceof I0)return Ri("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{p=new Pd(m,c,h)}catch(b){return Ri(b instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return p.ge===0?null:p}ct(t,s,r){return s.Ce.count===r-this.Pt(t,s.targetId)?0:2}Pt(t,s){const r=this.Ge.getRemoteKeysForTarget(s);let c=0;return r.forEach((h=>{const m=this.Ge.ht(),p=`projects/${m.projectId}/databases/${m.database}/documents/${h.path.canonicalString()}`;t.mightContain(p)||(this.et(s,h,null),c++)})),c}Tt(t){const s=new Map;this.ze.forEach(((h,m)=>{const p=this.ot(m);if(p){if(h.current&&dd(p.target)){const b=new Te(p.target.path);this.It(b).has(m)||this.Et(m,b)||this.et(m,b,rn.newNoDocument(b,t))}h.Be&&(s.set(m,h.ke()),h.Ke())}}));let r=Ge();this.Je.forEach(((h,m)=>{let p=!0;m.forEachWhile((b=>{const x=this.ot(b);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(h))})),this.je.forEach(((h,m)=>m.setReadTime(t)));const c=new Iu(t,s,this.Ze,this.je,r);return this.je=ta(),this.He=Wc(),this.Je=Wc(),this.Ze=new yt(He),c}Ye(t,s){if(!this.rt(t))return;const r=this.Et(t,s.key)?2:0;this.nt(t).qe(s.key,r),this.je=this.je.insert(s.key,s),this.He=this.He.insert(s.key,this.It(s.key).add(t)),this.Je=this.Je.insert(s.key,this.Rt(s.key).add(t))}et(t,s,r){if(!this.rt(t))return;const c=this.nt(t);this.Et(t,s)?c.qe(s,1):c.Ue(s),this.Je=this.Je.insert(s,this.Rt(s).delete(t)),this.Je=this.Je.insert(s,this.Rt(s).add(t)),r&&(this.je=this.je.insert(s,r))}removeTarget(t){this.ze.delete(t)}_t(t){const s=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let s=this.ze.get(t);return s||(s=new jx,this.ze.set(t,s)),s}Rt(t){let s=this.Je.get(t);return s||(s=new Pt(He),this.Je=this.Je.insert(t,s)),s}It(t){let s=this.He.get(t);return s||(s=new Pt(He),this.He=this.He.insert(t,s)),s}rt(t){const s=this.ot(t)!==null;return s||me("WatchChangeAggregator","Detected inactive target",t),s}ot(t){const s=this.ze.get(t);return s&&s.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new jx),this.Ge.getRemoteKeysForTarget(t).forEach((s=>{this.et(t,s,null)}))}Et(t,s){return this.Ge.getRemoteKeysForTarget(t).has(s)}}function Wc(){return new yt(Te.comparator)}function Sx(){return new yt(Te.comparator)}const $T={asc:"ASCENDING",desc:"DESCENDING"},QT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KT={and:"AND",or:"OR"};class XT{constructor(t,s){this.databaseId=t,this.useProto3Json=s}}function pd(i,t){return i.useProto3Json||wu(t)?t:{value:t}}function yu(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ov(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function ZT(i,t){return yu(i,t.toTimestamp())}function As(i){return et(!!i,49232),De.fromTimestamp((function(s){const r=Ba(s);return new ut(r.seconds,r.nanos)})(i))}function Bd(i,t){return yd(i,t).canonicalString()}function yd(i,t){const s=(function(c){return new ht(["projects",c.projectId,"databases",c.database])})(i).child("documents");return t===void 0?s:s.child(t)}function cv(i){const t=ht.fromString(i);return et(mv(t),10190,{key:t.toString()}),t}function xd(i,t){return Bd(i.databaseId,t.path)}function Jf(i,t){const s=cv(t);if(s.get(1)!==i.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new Te(hv(s))}function uv(i,t){return Bd(i.databaseId,t)}function JT(i){const t=cv(i);return t.length===4?ht.emptyPath():hv(t)}function vd(i){return new ht(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function hv(i){return et(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Ax(i,t,s){return{name:xd(i,t),fields:s.value.mapValue.fields}}function WT(i,t){let s;if("targetChange"in t){t.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Ae(39313,{state:x})})(t.targetChange.targetChangeType||"NO_CHANGE"),c=t.targetChange.targetIds||[],h=(function(x,N){return x.useProto3Json?(et(N===void 0||typeof N=="string",58123),tn.fromBase64String(N||"")):(et(N===void 0||N instanceof Buffer||N instanceof Uint8Array,16193),tn.fromUint8Array(N||new Uint8Array))})(i,t.targetChange.resumeToken),m=t.targetChange.cause,p=m&&(function(x){const N=x.code===void 0?Z.UNKNOWN:iv(x.code);return new fe(N,x.message||"")})(m);s=new lv(r,c,h,p||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const c=Jf(i,r.document.name),h=As(r.document.updateTime),m=r.document.createTime?As(r.document.createTime):De.min(),p=new vn({mapValue:{fields:r.document.fields}}),b=rn.newFoundDocument(c,h,m,p),x=r.targetIds||[],N=r.removedTargetIds||[];s=new iu(x,N,b.key,b)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const c=Jf(i,r.document),h=r.readTime?As(r.readTime):De.min(),m=rn.newNoDocument(c,h),p=r.removedTargetIds||[];s=new iu([],p,m.key,m)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const c=Jf(i,r.document),h=r.removedTargetIds||[];s=new iu([],h,c,null)}else{if(!("filter"in t))return Ae(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:c=0,unchangedNames:h}=r,m=new qT(c,h),p=r.targetId;s=new rv(p,m)}}return s}function eN(i,t){let s;if(t instanceof go)s={update:Ax(i,t.key,t.value)};else if(t instanceof Du)s={delete:xd(i,t.key)};else if(t instanceof Ka)s={update:Ax(i,t.key,t.data),updateMask:cN(t.fieldMask)};else{if(!(t instanceof LT))return Ae(16599,{dt:t.type});s={verify:xd(i,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map((r=>(function(h,m){const p=m.transform;if(p instanceof gu)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof uo)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ho)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof pu)return{fieldPath:m.field.canonicalString(),increment:p.Ae};throw Ae(20930,{transform:m.transform})})(0,r)))),t.precondition.isNone||(s.currentDocument=(function(c,h){return h.updateTime!==void 0?{updateTime:ZT(c,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Ae(27497)})(i,t.precondition)),s}function tN(i,t){return i&&i.length>0?(et(t!==void 0,14353),i.map((s=>(function(c,h){let m=c.updateTime?As(c.updateTime):As(h);return m.isEqual(De.min())&&(m=As(h)),new kT(m,c.transformResults||[])})(s,t)))):[]}function nN(i,t){return{documents:[uv(i,t.path)]}}function sN(i,t){const s={structuredQuery:{}},r=t.path;let c;t.collectionGroup!==null?(c=r,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(c=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=uv(i,c);const h=(function(x){if(x.length!==0)return dv(as.create(x,"and"))})(t.filters);h&&(s.structuredQuery.where=h);const m=(function(x){if(x.length!==0)return x.map((N=>(function(M){return{field:wr(M.field),direction:rN(M.dir)}})(N)))})(t.orderBy);m&&(s.structuredQuery.orderBy=m);const p=pd(i,t.limit);return p!==null&&(s.structuredQuery.limit=p),t.startAt&&(s.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(t.startAt)),t.endAt&&(s.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(t.endAt)),{ft:s,parent:c}}function aN(i){let t=JT(i.parent);const s=i.structuredQuery,r=s.from?s.from.length:0;let c=null;if(r>0){et(r===1,65062);const N=s.from[0];N.allDescendants?c=N.collectionId:t=t.child(N.collectionId)}let h=[];s.where&&(h=(function(C){const M=fv(C);return M instanceof as&&q0(M)?M.getFilters():[M]})(s.where));let m=[];s.orderBy&&(m=(function(C){return C.map((M=>(function(W){return new co(jr(W.field),(function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(M)))})(s.orderBy));let p=null;s.limit&&(p=(function(C){let M;return M=typeof C=="object"?C.value:C,wu(M)?null:M})(s.limit));let b=null;s.startAt&&(b=(function(C){const M=!!C.before,F=C.values||[];return new mu(F,M)})(s.startAt));let x=null;return s.endAt&&(x=(function(C){const M=!C.before,F=C.values||[];return new mu(F,M)})(s.endAt)),_T(t,c,m,h,p,"F",b,x)}function iN(i,t){const s=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:c})}})(t.purpose);return s==null?null:{"goog-listen-tags":s}}function fv(i){return i.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=jr(s.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const c=jr(s.unaryFilter.field);return kt.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=jr(s.unaryFilter.field);return kt.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=jr(s.unaryFilter.field);return kt.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(i):i.fieldFilter!==void 0?(function(s){return kt.create(jr(s.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(s){return as.create(s.compositeFilter.filters.map((r=>fv(r))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(s.compositeFilter.op))})(i):Ae(30097,{filter:i})}function rN(i){return $T[i]}function lN(i){return QT[i]}function oN(i){return KT[i]}function wr(i){return{fieldPath:i.canonicalString()}}function jr(i){return en.fromServerFormat(i.fieldPath)}function dv(i){return i instanceof kt?(function(s){if(s.op==="=="){if(gx(s.value))return{unaryFilter:{field:wr(s.field),op:"IS_NAN"}};if(mx(s.value))return{unaryFilter:{field:wr(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(gx(s.value))return{unaryFilter:{field:wr(s.field),op:"IS_NOT_NAN"}};if(mx(s.value))return{unaryFilter:{field:wr(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wr(s.field),op:lN(s.op),value:s.value}}})(i):i instanceof as?(function(s){const r=s.getFilters().map((c=>dv(c)));return r.length===1?r[0]:{compositeFilter:{op:oN(s.op),filters:r}}})(i):Ae(54877,{filter:i})}function cN(i){const t=[];return i.fields.forEach((s=>t.push(s.canonicalString()))),{fieldPaths:t}}function mv(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function gv(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t,s,r,c,h=De.min(),m=De.min(),p=tn.EMPTY_BYTE_STRING,b=null){this.target=t,this.targetId=s,this.purpose=r,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=p,this.expectedCount=b}withSequenceNumber(t){return new Va(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,s){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(t){this.yt=t}}function hN(i){const t=aN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?gd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.Sn=new dN}addToCollectionParentIndex(t,s){return this.Sn.add(s),ee.resolve()}getCollectionParents(t,s){return ee.resolve(this.Sn.getEntries(s))}addFieldIndex(t,s){return ee.resolve()}deleteFieldIndex(t,s){return ee.resolve()}deleteAllFieldIndexes(t){return ee.resolve()}createTargetIndexes(t,s){return ee.resolve()}getDocumentsMatchingTarget(t,s){return ee.resolve(null)}getIndexType(t,s){return ee.resolve(0)}getFieldIndexes(t,s){return ee.resolve([])}getNextCollectionGroupToUpdate(t){return ee.resolve(null)}getMinOffset(t,s){return ee.resolve(Pa.min())}getMinOffsetFromCollectionGroup(t,s){return ee.resolve(Pa.min())}updateCollectionGroup(t,s,r){return ee.resolve()}updateIndexEntries(t,s){return ee.resolve()}}class dN{constructor(){this.index={}}add(t){const s=t.lastSegment(),r=t.popLast(),c=this.index[s]||new Pt(ht.comparator),h=!c.has(r);return this.index[s]=c.add(r),h}has(t){const s=t.lastSegment(),r=t.popLast(),c=this.index[s];return c&&c.has(r)}getEntries(t){return(this.index[t]||new Pt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pv=41943040;class xn{static withCacheSize(t){return new xn(t,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,s,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(pv,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new Or(0)}static ar(){return new Or(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="LruGarbageCollector",mN=1048576;function Dx([i,t],[s,r]){const c=He(i,s);return c===0?He(t,r):c}class gN{constructor(t){this.Pr=t,this.buffer=new Pt(Dx),this.Tr=0}Ir(){return++this.Tr}Er(t){const s=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();Dx(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class pN{constructor(t,s,r){this.garbageCollector=t,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){me(Rx,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Br(s)?me(Rx,"Ignoring IndexedDB error during garbage collection: ",s):await Pr(s)}await this.Ar(3e5)}))}}class yN{constructor(t,s){this.Vr=t,this.params=s}calculateTargetCount(t,s){return this.Vr.dr(t).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(t,s){if(s===0)return ee.resolve(Nu.ce);const r=new gN(s);return this.Vr.forEachTarget(t,(c=>r.Er(c.sequenceNumber))).next((()=>this.Vr.mr(t,(c=>r.Er(c))))).next((()=>r.maxValue))}removeTargets(t,s,r){return this.Vr.removeTargets(t,s,r)}removeOrphanedDocuments(t,s){return this.Vr.removeOrphanedDocuments(t,s)}collect(t,s){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Cx)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cx):this.gr(t,s)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,s){let r,c,h,m,p,b,x;const N=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),c=this.params.maximumSequenceNumbersToCollect):c=C,m=Date.now(),this.nthSequenceNumber(t,c)))).next((C=>(r=C,p=Date.now(),this.removeTargets(t,r,s)))).next((C=>(h=C,b=Date.now(),this.removeOrphanedDocuments(t,r)))).next((C=>(x=Date.now(),Tr()<=$e.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-N}ms
	Determined least recently used ${c} in `+(p-m)+`ms
	Removed ${h} targets in `+(b-p)+`ms
	Removed ${C} documents in `+(x-b)+`ms
Total Duration: ${x-N}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:C}))))}}function xN(i,t){return new yN(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.changes=new Ii((t=>t.toString()),((t,s)=>t.isEqual(s))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,rn.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ee.resolve(r):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(t,s){this.overlayedDocument=t,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(t,s,r,c){this.remoteDocumentCache=t,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=c}getDocument(t,s){let r=null;return this.documentOverlayCache.getOverlay(t,s).next((c=>(r=c,this.remoteDocumentCache.getEntry(t,s)))).next((c=>(r!==null&&no(r.mutation,c,Rn.empty(),ut.now()),c)))}getDocuments(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.getLocalViewOfDocuments(t,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(t,s,r=Ge()){const c=Si();return this.populateOverlays(t,c,s).next((()=>this.computeViews(t,s,c,r).next((h=>{let m=Kl();return h.forEach(((p,b)=>{m=m.insert(p,b.overlayedDocument)})),m}))))}getOverlayedDocuments(t,s){const r=Si();return this.populateOverlays(t,r,s).next((()=>this.computeViews(t,s,r,Ge())))}populateOverlays(t,s,r){const c=[];return r.forEach((h=>{s.has(h)||c.push(h)})),this.documentOverlayCache.getOverlays(t,c).next((h=>{h.forEach(((m,p)=>{s.set(m,p)}))}))}computeViews(t,s,r,c){let h=ta();const m=to(),p=(function(){return to()})();return s.forEach(((b,x)=>{const N=r.get(x.key);c.has(x.key)&&(N===void 0||N.mutation instanceof Ka)?h=h.insert(x.key,x):N!==void 0?(m.set(x.key,N.mutation.getFieldMask()),no(N.mutation,x,N.mutation.getFieldMask(),ut.now())):m.set(x.key,Rn.empty())})),this.recalculateAndSaveOverlays(t,h).next((b=>(b.forEach(((x,N)=>m.set(x,N))),s.forEach(((x,N)=>p.set(x,new bN(N,m.get(x)??null)))),p)))}recalculateAndSaveOverlays(t,s){const r=to();let c=new yt(((m,p)=>m-p)),h=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,s).next((m=>{for(const p of m)p.keys().forEach((b=>{const x=s.get(b);if(x===null)return;let N=r.get(b)||Rn.empty();N=p.applyToLocalView(x,N),r.set(b,N);const C=(c.get(p.batchId)||Ge()).add(b);c=c.insert(p.batchId,C)}))})).next((()=>{const m=[],p=c.getReverseIterator();for(;p.hasNext();){const b=p.getNext(),x=b.key,N=b.value,C=Z0();N.forEach((M=>{if(!h.has(M)){const F=sv(s.get(M),r.get(M));F!==null&&C.set(M,F),h=h.add(M)}})),m.push(this.documentOverlayCache.saveOverlays(t,x,C))}return ee.waitFor(m)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,s){return this.remoteDocumentCache.getEntries(t,s).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,s,r,c){return ET(s)?this.getDocumentsMatchingDocumentQuery(t,s.path):Y0(s)?this.getDocumentsMatchingCollectionGroupQuery(t,s,r,c):this.getDocumentsMatchingCollectionQuery(t,s,r,c)}getNextDocuments(t,s,r,c){return this.remoteDocumentCache.getAllFromCollectionGroup(t,s,r,c).next((h=>{const m=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,s,r.largestBatchId,c-h.size):ee.resolve(Si());let p=io,b=h;return m.next((x=>ee.forEach(x,((N,C)=>(p<C.largestBatchId&&(p=C.largestBatchId),h.get(N)?ee.resolve():this.remoteDocumentCache.getEntry(t,N).next((M=>{b=b.insert(N,M)}))))).next((()=>this.populateOverlays(t,x,h))).next((()=>this.computeViews(t,b,x,Ge()))).next((N=>({batchId:p,changes:X0(N)})))))}))}getDocumentsMatchingDocumentQuery(t,s){return this.getDocument(t,new Te(s)).next((r=>{let c=Kl();return r.isFoundDocument()&&(c=c.insert(r.key,r)),c}))}getDocumentsMatchingCollectionGroupQuery(t,s,r,c){const h=s.collectionGroup;let m=Kl();return this.indexManager.getCollectionParents(t,h).next((p=>ee.forEach(p,(b=>{const x=(function(C,M){return new qr(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(s,b.child(h));return this.getDocumentsMatchingCollectionQuery(t,x,r,c).next((N=>{N.forEach(((C,M)=>{m=m.insert(C,M)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(t,s,r,c){let h;return this.documentOverlayCache.getOverlaysForCollection(t,s.path,r.largestBatchId).next((m=>(h=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,s,r,h,c)))).next((m=>{h.forEach(((b,x)=>{const N=x.getKey();m.get(N)===null&&(m=m.insert(N,rn.newInvalidDocument(N)))}));let p=Kl();return m.forEach(((b,x)=>{const N=h.get(b);N!==void 0&&no(N.mutation,x,Rn.empty(),ut.now()),Au(s,x)&&(p=p.insert(b,x))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,s){return ee.resolve(this.Nr.get(s))}saveBundleMetadata(t,s){return this.Nr.set(s.id,(function(c){return{id:c.id,version:c.version,createTime:As(c.createTime)}})(s)),ee.resolve()}getNamedQuery(t,s){return ee.resolve(this.Br.get(s))}saveNamedQuery(t,s){return this.Br.set(s.name,(function(c){return{name:c.name,query:hN(c.bundledQuery),readTime:As(c.readTime)}})(s)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.overlays=new yt(Te.comparator),this.Lr=new Map}getOverlay(t,s){return ee.resolve(this.overlays.get(s))}getOverlays(t,s){const r=Si();return ee.forEach(s,(c=>this.getOverlay(t,c).next((h=>{h!==null&&r.set(c,h)})))).next((()=>r))}saveOverlays(t,s,r){return r.forEach(((c,h)=>{this.bt(t,s,h)})),ee.resolve()}removeOverlaysForBatchId(t,s,r){const c=this.Lr.get(r);return c!==void 0&&(c.forEach((h=>this.overlays=this.overlays.remove(h))),this.Lr.delete(r)),ee.resolve()}getOverlaysForCollection(t,s,r){const c=Si(),h=s.length+1,m=new Te(s.child("")),p=this.overlays.getIteratorFrom(m);for(;p.hasNext();){const b=p.getNext().value,x=b.getKey();if(!s.isPrefixOf(x.path))break;x.path.length===h&&b.largestBatchId>r&&c.set(b.getKey(),b)}return ee.resolve(c)}getOverlaysForCollectionGroup(t,s,r,c){let h=new yt(((x,N)=>x-N));const m=this.overlays.getIterator();for(;m.hasNext();){const x=m.getNext().value;if(x.getKey().getCollectionGroup()===s&&x.largestBatchId>r){let N=h.get(x.largestBatchId);N===null&&(N=Si(),h=h.insert(x.largestBatchId,N)),N.set(x.getKey(),x)}}const p=Si(),b=h.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((x,N)=>p.set(x,N))),!(p.size()>=c)););return ee.resolve(p)}bt(t,s,r){const c=this.overlays.get(r.key);if(c!==null){const m=this.Lr.get(c.largestBatchId).delete(r.key);this.Lr.set(c.largestBatchId,m)}this.overlays=this.overlays.insert(r.key,new BT(s,r));let h=this.Lr.get(s);h===void 0&&(h=Ge(),this.Lr.set(s,h)),this.Lr.set(s,h.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(t){return ee.resolve(this.sessionToken)}setSessionToken(t,s){return this.sessionToken=s,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.kr=new Pt(Ft.Kr),this.qr=new Pt(Ft.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,s){const r=new Ft(t,s);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(t,s){t.forEach((r=>this.addReference(r,s)))}removeReference(t,s){this.Wr(new Ft(t,s))}Qr(t,s){t.forEach((r=>this.removeReference(r,s)))}Gr(t){const s=new Te(new ht([])),r=new Ft(s,t),c=new Ft(s,t+1),h=[];return this.qr.forEachInRange([r,c],(m=>{this.Wr(m),h.push(m.key)})),h}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const s=new Te(new ht([])),r=new Ft(s,t),c=new Ft(s,t+1);let h=Ge();return this.qr.forEachInRange([r,c],(m=>{h=h.add(m.key)})),h}containsKey(t){const s=new Ft(t,0),r=this.kr.firstAfterOrEqual(s);return r!==null&&t.isEqual(r.key)}}class Ft{constructor(t,s){this.key=t,this.Hr=s}static Kr(t,s){return Te.comparator(t.key,s.key)||He(t.Hr,s.Hr)}static Ur(t,s){return He(t.Hr,s.Hr)||Te.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.mutationQueue=[],this.Yn=1,this.Jr=new Pt(Ft.Kr)}checkEmpty(t){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(t,s,r,c){const h=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new PT(h,s,r,c);this.mutationQueue.push(m);for(const p of c)this.Jr=this.Jr.add(new Ft(p.key,h)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return ee.resolve(m)}lookupMutationBatch(t,s){return ee.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(t,s){const r=s+1,c=this.Xr(r),h=c<0?0:c;return ee.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Id:this.Yn-1)}getAllMutationBatches(t){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const r=new Ft(s,0),c=new Ft(s,Number.POSITIVE_INFINITY),h=[];return this.Jr.forEachInRange([r,c],(m=>{const p=this.Zr(m.Hr);h.push(p)})),ee.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,s){let r=new Pt(He);return s.forEach((c=>{const h=new Ft(c,0),m=new Ft(c,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([h,m],(p=>{r=r.add(p.Hr)}))})),ee.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(t,s){const r=s.path,c=r.length+1;let h=r;Te.isDocumentKey(h)||(h=h.child(""));const m=new Ft(new Te(h),0);let p=new Pt(He);return this.Jr.forEachWhile((b=>{const x=b.key.path;return!!r.isPrefixOf(x)&&(x.length===c&&(p=p.add(b.Hr)),!0)}),m),ee.resolve(this.Yr(p))}Yr(t){const s=[];return t.forEach((r=>{const c=this.Zr(r);c!==null&&s.push(c)})),s}removeMutationBatch(t,s){et(this.ei(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ee.forEach(s.mutations,(c=>{const h=new Ft(c.key,s.batchId);return r=r.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,c.key)})).next((()=>{this.Jr=r}))}nr(t){}containsKey(t,s){const r=new Ft(s,0),c=this.Jr.firstAfterOrEqual(r);return ee.resolve(s.isEqual(c&&c.key))}performConsistencyCheck(t){return this.mutationQueue.length,ee.resolve()}ei(t,s){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const s=this.Xr(t);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(t){this.ti=t,this.docs=(function(){return new yt(Te.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const r=s.key,c=this.docs.get(r),h=c?c.size:0,m=this.ti(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:m}),this.size+=m-h,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const r=this.docs.get(s);return ee.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(s))}getEntries(t,s){let r=ta();return s.forEach((c=>{const h=this.docs.get(c);r=r.insert(c,h?h.document.mutableCopy():rn.newInvalidDocument(c))})),ee.resolve(r)}getDocumentsMatchingQuery(t,s,r,c){let h=ta();const m=s.path,p=new Te(m.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(p);for(;b.hasNext();){const{key:x,value:{document:N}}=b.getNext();if(!m.isPrefixOf(x.path))break;x.path.length>m.length+1||JE(ZE(N),r)<=0||(c.has(N.key)||Au(s,N))&&(h=h.insert(N.key,N.mutableCopy()))}return ee.resolve(h)}getAllFromCollectionGroup(t,s,r,c){Ae(9500)}ni(t,s){return ee.forEach(this.docs,(r=>s(r)))}newChangeBuffer(t){return new SN(this)}getSize(t){return ee.resolve(this.size)}}class SN extends vN{constructor(t){super(),this.Mr=t}applyChanges(t){const s=[];return this.changes.forEach(((r,c)=>{c.isValidDocument()?s.push(this.Mr.addEntry(t,c)):this.Mr.removeEntry(r)})),ee.waitFor(s)}getFromCache(t,s){return this.Mr.getEntry(t,s)}getAllFromCache(t,s){return this.Mr.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(t){this.persistence=t,this.ri=new Ii((s=>Od(s)),kd),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ii=0,this.si=new qd,this.targetCount=0,this.oi=Or._r()}forEachTarget(t,s){return this.ri.forEach(((r,c)=>s(c))),ee.resolve()}getLastRemoteSnapshotVersion(t){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ee.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(t,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.ii&&(this.ii=s),ee.resolve()}lr(t){this.ri.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.oi=new Or(s),this.highestTargetId=s),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,s){return this.lr(s),this.targetCount+=1,ee.resolve()}updateTargetData(t,s){return this.lr(s),ee.resolve()}removeTargetData(t,s){return this.ri.delete(s.target),this.si.Gr(s.targetId),this.targetCount-=1,ee.resolve()}removeTargets(t,s,r){let c=0;const h=[];return this.ri.forEach(((m,p)=>{p.sequenceNumber<=s&&r.get(p.targetId)===null&&(this.ri.delete(m),h.push(this.removeMatchingKeysForTargetId(t,p.targetId)),c++)})),ee.waitFor(h).next((()=>c))}getTargetCount(t){return ee.resolve(this.targetCount)}getTargetData(t,s){const r=this.ri.get(s)||null;return ee.resolve(r)}addMatchingKeys(t,s,r){return this.si.$r(s,r),ee.resolve()}removeMatchingKeys(t,s,r){this.si.Qr(s,r);const c=this.persistence.referenceDelegate,h=[];return c&&s.forEach((m=>{h.push(c.markPotentiallyOrphaned(t,m))})),ee.waitFor(h)}removeMatchingKeysForTargetId(t,s){return this.si.Gr(s),ee.resolve()}getMatchingKeysForTargetId(t,s){const r=this.si.jr(s);return ee.resolve(r)}containsKey(t,s){return ee.resolve(this.si.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(t,s){this._i={},this.overlays={},this.ai=new Nu(0),this.ui=!1,this.ui=!0,this.ci=new NN,this.referenceDelegate=t(this),this.li=new AN(this),this.indexManager=new fN,this.remoteDocumentCache=(function(c){return new jN(c)})((r=>this.referenceDelegate.hi(r))),this.serializer=new uN(s),this.Pi=new EN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new TN,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let r=this._i[t.toKey()];return r||(r=new wN(s,this.referenceDelegate),this._i[t.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,s,r){me("MemoryPersistence","Starting transaction:",t);const c=new CN(this.ai.next());return this.referenceDelegate.Ti(),r(c).next((h=>this.referenceDelegate.Ii(c).next((()=>h)))).toPromise().then((h=>(c.raiseOnCommittedEvent(),h)))}Ei(t,s){return ee.or(Object.values(this._i).map((r=>()=>r.containsKey(t,s))))}}class CN extends eT{constructor(t){super(),this.currentSequenceNumber=t}}class Hd{constructor(t){this.persistence=t,this.Ri=new qd,this.Ai=null}static Vi(t){return new Hd(t)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(t,s,r){return this.Ri.addReference(r,s),this.di.delete(r.toString()),ee.resolve()}removeReference(t,s,r){return this.Ri.removeReference(r,s),this.di.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(t,s){return this.di.add(s.toString()),ee.resolve()}removeTarget(t,s){this.Ri.Gr(s.targetId).forEach((c=>this.di.add(c.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,s.targetId).next((c=>{c.forEach((h=>this.di.add(h.toString())))})).next((()=>r.removeTargetData(t,s)))}Ti(){this.Ai=new Set}Ii(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.di,(r=>{const c=Te.fromPath(r);return this.mi(t,c).next((h=>{h||s.removeEntry(c,De.min())}))})).next((()=>(this.Ai=null,s.apply(t))))}updateLimboDocument(t,s){return this.mi(t,s).next((r=>{r?this.di.delete(s.toString()):this.di.add(s.toString())}))}hi(t){return 0}mi(t,s){return ee.or([()=>ee.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Ei(t,s)])}}class xu{constructor(t,s){this.persistence=t,this.fi=new Ii((r=>sT(r.path)),((r,c)=>r.isEqual(c))),this.garbageCollector=xN(this,s)}static Vi(t,s){return new xu(t,s)}Ti(){}Ii(t){return ee.resolve()}forEachTarget(t,s){return this.persistence.getTargetCache().forEachTarget(t,s)}dr(t){const s=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>s.next((c=>r+c))))}pr(t){let s=0;return this.mr(t,(r=>{s++})).next((()=>s))}mr(t,s){return ee.forEach(this.fi,((r,c)=>this.wr(t,r,c).next((h=>h?ee.resolve():s(c)))))}removeTargets(t,s,r){return this.persistence.getTargetCache().removeTargets(t,s,r)}removeOrphanedDocuments(t,s){let r=0;const c=this.persistence.getRemoteDocumentCache(),h=c.newChangeBuffer();return c.ni(t,(m=>this.wr(t,m,s).next((p=>{p||(r++,h.removeEntry(m,De.min()))})))).next((()=>h.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,s){return this.fi.set(s,t.currentSequenceNumber),ee.resolve()}removeTarget(t,s){const r=s.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,s,r){return this.fi.set(r,t.currentSequenceNumber),ee.resolve()}removeReference(t,s,r){return this.fi.set(r,t.currentSequenceNumber),ee.resolve()}updateLimboDocument(t,s){return this.fi.set(s,t.currentSequenceNumber),ee.resolve()}hi(t){let s=t.key.toString().length;return t.isFoundDocument()&&(s+=nu(t.data.value)),s}wr(t,s,r){return ee.or([()=>this.persistence.Ei(t,s),()=>this.persistence.getTargetCache().containsKey(t,s),()=>{const c=this.fi.get(s);return ee.resolve(c!==void 0&&c>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(t,s,r,c){this.targetId=t,this.fromCache=s,this.Ts=r,this.Is=c}static Es(t,s){let r=Ge(),c=Ge();for(const h of s.docChanges)switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new Gd(t,s.fromCache,r,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return x1()?8:tT(p1())>0?6:4})()}initialize(t,s){this.fs=t,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(t,s,r,c){const h={result:null};return this.gs(t,s).next((m=>{h.result=m})).next((()=>{if(!h.result)return this.ps(t,s,c,r).next((m=>{h.result=m}))})).next((()=>{if(h.result)return;const m=new RN;return this.ys(t,s,m).next((p=>{if(h.result=p,this.As)return this.ws(t,s,m,p.size)}))})).next((()=>h.result))}ws(t,s,r,c){return r.documentReadCount<this.Vs?(Tr()<=$e.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Nr(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Tr()<=$e.DEBUG&&me("QueryEngine","Query:",Nr(s),"scans",r.documentReadCount,"local documents and returns",c,"documents as results."),r.documentReadCount>this.ds*c?(Tr()<=$e.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Nr(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ss(s))):ee.resolve())}gs(t,s){if(vx(s))return ee.resolve(null);let r=Ss(s);return this.indexManager.getIndexType(t,r).next((c=>c===0?null:(s.limit!==null&&c===1&&(s=gd(s,null,"F"),r=Ss(s)),this.indexManager.getDocumentsMatchingTarget(t,r).next((h=>{const m=Ge(...h);return this.fs.getDocuments(t,m).next((p=>this.indexManager.getMinOffset(t,r).next((b=>{const x=this.bs(s,p);return this.Ss(s,x,m,b.readTime)?this.gs(t,gd(s,null,"F")):this.Ds(t,x,s,b)}))))})))))}ps(t,s,r,c){return vx(s)||c.isEqual(De.min())?ee.resolve(null):this.fs.getDocuments(t,r).next((h=>{const m=this.bs(s,h);return this.Ss(s,m,r,c)?ee.resolve(null):(Tr()<=$e.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Nr(s)),this.Ds(t,m,s,XE(c,io)).next((p=>p)))}))}bs(t,s){let r=new Pt(Q0(t));return s.forEach(((c,h)=>{Au(t,h)&&(r=r.add(h))})),r}Ss(t,s,r,c){if(t.limit===null)return!1;if(r.size!==s.size)return!0;const h=t.limitType==="F"?s.last():s.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}ys(t,s,r){return Tr()<=$e.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Nr(s)),this.fs.getDocumentsMatchingQuery(t,s,Pa.min(),r)}Ds(t,s,r,c){return this.fs.getDocumentsMatchingQuery(t,r,c).next((h=>(s.forEach((m=>{h=h.insert(m.key,m)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="LocalStore",IN=3e8;class MN{constructor(t,s,r,c){this.persistence=t,this.Cs=s,this.serializer=c,this.vs=new yt(He),this.Fs=new Ii((h=>Od(h)),kd),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(r)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _N(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>t.collect(s,this.vs)))}}function VN(i,t,s,r){return new MN(i,t,s,r)}async function xv(i,t){const s=Ve(i);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let c;return s.mutationQueue.getAllMutationBatches(r).next((h=>(c=h,s.Os(t),s.mutationQueue.getAllMutationBatches(r)))).next((h=>{const m=[],p=[];let b=Ge();for(const x of c){m.push(x.batchId);for(const N of x.mutations)b=b.add(N.key)}for(const x of h){p.push(x.batchId);for(const N of x.mutations)b=b.add(N.key)}return s.localDocuments.getDocuments(r,b).next((x=>({Ns:x,removedBatchIds:m,addedBatchIds:p})))}))}))}function ON(i,t){const s=Ve(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const c=t.batch.keys(),h=s.xs.newChangeBuffer({trackRemovals:!0});return(function(p,b,x,N){const C=x.batch,M=C.keys();let F=ee.resolve();return M.forEach((W=>{F=F.next((()=>N.getEntry(b,W))).next((ie=>{const K=x.docVersions.get(W);et(K!==null,48541),ie.version.compareTo(K)<0&&(C.applyToRemoteDocument(ie,x),ie.isValidDocument()&&(ie.setReadTime(x.commitVersion),N.addEntry(ie)))}))})),F.next((()=>p.mutationQueue.removeMutationBatch(b,C)))})(s,r,t,h).next((()=>h.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,c,t.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let b=Ge();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(b=b.add(p.batch.mutations[x].key));return b})(t)))).next((()=>s.localDocuments.getDocuments(r,c)))}))}function vv(i){const t=Ve(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>t.li.getLastRemoteSnapshotVersion(s)))}function kN(i,t){const s=Ve(i),r=t.snapshotVersion;let c=s.vs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const m=s.xs.newChangeBuffer({trackRemovals:!0});c=s.vs;const p=[];t.targetChanges.forEach(((N,C)=>{const M=c.get(C);if(!M)return;p.push(s.li.removeMatchingKeys(h,N.removedDocuments,C).next((()=>s.li.addMatchingKeys(h,N.addedDocuments,C))));let F=M.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(C)!==null?F=F.withResumeToken(tn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):N.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(N.resumeToken,r)),c=c.insert(C,F),(function(ie,K,pe){return ie.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=IN?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0})(M,F,N)&&p.push(s.li.updateTargetData(h,F))}));let b=ta(),x=Ge();if(t.documentUpdates.forEach((N=>{t.resolvedLimboDocuments.has(N)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(h,N))})),p.push(zN(h,m,t.documentUpdates).next((N=>{b=N.Bs,x=N.Ls}))),!r.isEqual(De.min())){const N=s.li.getLastRemoteSnapshotVersion(h).next((C=>s.li.setTargetsMetadata(h,h.currentSequenceNumber,r)));p.push(N)}return ee.waitFor(p).next((()=>m.apply(h))).next((()=>s.localDocuments.getLocalViewOfDocuments(h,b,x))).next((()=>b))})).then((h=>(s.vs=c,h)))}function zN(i,t,s){let r=Ge(),c=Ge();return s.forEach((h=>r=r.add(h))),t.getEntries(i,r).next((h=>{let m=ta();return s.forEach(((p,b)=>{const x=h.get(p);b.isFoundDocument()!==x.isFoundDocument()&&(c=c.add(p)),b.isNoDocument()&&b.version.isEqual(De.min())?(t.removeEntry(p,b.readTime),m=m.insert(p,b)):!x.isValidDocument()||b.version.compareTo(x.version)>0||b.version.compareTo(x.version)===0&&x.hasPendingWrites?(t.addEntry(b),m=m.insert(p,b)):me(Fd,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",b.version)})),{Bs:m,Ls:c}}))}function UN(i,t){const s=Ve(i);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Id),s.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function LN(i,t){const s=Ve(i);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let c;return s.li.getTargetData(r,t).next((h=>h?(c=h,ee.resolve(c)):s.li.allocateTargetId(r).next((m=>(c=new Va(t,m,"TargetPurposeListen",r.currentSequenceNumber),s.li.addTargetData(r,c).next((()=>c)))))))})).then((r=>{const c=s.vs.get(r.targetId);return(c===null||r.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(s.vs=s.vs.insert(r.targetId,r),s.Fs.set(t,r.targetId)),r}))}async function bd(i,t,s){const r=Ve(i),c=r.vs.get(t),h=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",h,(m=>r.persistence.referenceDelegate.removeTarget(m,c)))}catch(m){if(!Br(m))throw m;me(Fd,`Failed to update sequence numbers for target ${t}: ${m}`)}r.vs=r.vs.remove(t),r.Fs.delete(c.target)}function Ix(i,t,s){const r=Ve(i);let c=De.min(),h=Ge();return r.persistence.runTransaction("Execute query","readwrite",(m=>(function(b,x,N){const C=Ve(b),M=C.Fs.get(N);return M!==void 0?ee.resolve(C.vs.get(M)):C.li.getTargetData(x,N)})(r,m,Ss(t)).next((p=>{if(p)return c=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(m,p.targetId).next((b=>{h=b}))})).next((()=>r.Cs.getDocumentsMatchingQuery(m,t,s?c:De.min(),s?h:Ge()))).next((p=>(PN(r,wT(t),p),{documents:p,ks:h})))))}function PN(i,t,s){let r=i.Ms.get(t)||De.min();s.forEach(((c,h)=>{h.readTime.compareTo(r)>0&&(r=h.readTime)})),i.Ms.set(t,r)}class Mx{constructor(){this.activeTargetIds=DT()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class BN{constructor(){this.vo=new Mx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,r){}addLocalQueryTarget(t,s=!0){return s&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,s,r){this.Fo[t]=s}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new Mx,Promise.resolve()}handleUserChange(t,s,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="ConnectivityMonitor";class Ox{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(Vx,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){me(Vx,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu=null;function _d(){return eu===null?eu=(function(){return 268435456+Math.round(2147483648*Math.random())})():eu++,"0x"+eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="RestConnection",HN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class GN{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.qo=s+"://"+t.host,this.Uo=`projects/${r}/databases/${c}`,this.$o=this.databaseId.database===fu?`project_id=${r}`:`project_id=${r}&database_id=${c}`}Wo(t,s,r,c,h){const m=_d(),p=this.Qo(t,s.toUriEncodedString());me(Wf,`Sending RPC '${t}' ${m}:`,p,r);const b={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(b,c,h);const{host:x}=new URL(p),N=Ad(x);return this.zo(t,p,b,r,N).then((C=>(me(Wf,`Received RPC '${t}' ${m}: `,C),C)),(C=>{throw Ri(Wf,`RPC '${t}' ${m} failed with error: `,C,"url: ",p,"request:",r),C}))}jo(t,s,r,c,h,m){return this.Wo(t,s,r,c,h)}Go(t,s,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((c,h)=>t[h]=c)),r&&r.headers.forEach(((c,h)=>t[h]=c))}Qo(t,s){const r=HN[t];let c=`${this.qo}/v1/${s}:${r}`;return this.databaseInfo.apiKey&&(c=`${c}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),c}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection",$l=(i,t,s)=>{i.listen(t,(r=>{try{s(r)}catch(c){setTimeout((()=>{throw c}),0)}}))};class Ar extends GN{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Ar.c_){const t=N0();$l(t,T0.STAT_EVENT,(s=>{s.stat===od.PROXY?me(sn,"STAT_EVENT: detected buffering proxy"):s.stat===od.NOPROXY&&me(sn,"STAT_EVENT: detected no buffering proxy")})),Ar.c_=!0}}zo(t,s,r,c,h){const m=_d();return new Promise(((p,b)=>{const x=new _0;x.setWithCredentials(!0),x.listenOnce(E0.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case tu.NO_ERROR:const C=x.getResponseJson();me(sn,`XHR for RPC '${t}' ${m} received:`,JSON.stringify(C)),p(C);break;case tu.TIMEOUT:me(sn,`RPC '${t}' ${m} timed out`),b(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:const M=x.getStatus();if(me(sn,`RPC '${t}' ${m} failed with status:`,M,"response text:",x.getResponseText()),M>0){let F=x.getResponseJson();Array.isArray(F)&&(F=F[0]);const W=F==null?void 0:F.error;if(W&&W.status&&W.message){const ie=(function(pe){const ge=pe.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ge)>=0?ge:Z.UNKNOWN})(W.status);b(new fe(ie,W.message))}else b(new fe(Z.UNKNOWN,"Server responded with status "+x.getStatus()))}else b(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:t,streamId:m,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{me(sn,`RPC '${t}' ${m} completed.`)}}));const N=JSON.stringify(c);me(sn,`RPC '${t}' ${m} sending request:`,c),x.send(s,"POST",N,r,15)}))}T_(t,s,r){const c=_d(),h=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(p.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,s,r),p.encodeInitMessageHeaders=!0;const x=h.join("");me(sn,`Creating RPC '${t}' stream ${c}: ${x}`,p);const N=m.createWebChannel(x,p);this.I_(N);let C=!1,M=!1;const F=new FN({Ho:W=>{M?me(sn,`Not sending because RPC '${t}' stream ${c} is closed:`,W):(C||(me(sn,`Opening RPC '${t}' stream ${c} transport.`),N.open(),C=!0),me(sn,`RPC '${t}' stream ${c} sending:`,W),N.send(W))},Jo:()=>N.close()});return $l(N,Ql.EventType.OPEN,(()=>{M||(me(sn,`RPC '${t}' stream ${c} transport opened.`),F.i_())})),$l(N,Ql.EventType.CLOSE,(()=>{M||(M=!0,me(sn,`RPC '${t}' stream ${c} transport closed`),F.o_(),this.E_(N))})),$l(N,Ql.EventType.ERROR,(W=>{M||(M=!0,Ri(sn,`RPC '${t}' stream ${c} transport errored. Name:`,W.name,"Message:",W.message),F.o_(new fe(Z.UNAVAILABLE,"The operation could not be completed")))})),$l(N,Ql.EventType.MESSAGE,(W=>{var ie;if(!M){const K=W.data[0];et(!!K,16349);const pe=K,ge=(pe==null?void 0:pe.error)||((ie=pe[0])==null?void 0:ie.error);if(ge){me(sn,`RPC '${t}' stream ${c} received error:`,ge);const de=ge.status;let xe=(function(R){const j=Ot[R];if(j!==void 0)return iv(j)})(de),Ie=ge.message;de==="NOT_FOUND"&&Ie.includes("database")&&Ie.includes("does not exist")&&Ie.includes(this.databaseId.database)&&Ri(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),xe===void 0&&(xe=Z.INTERNAL,Ie="Unknown error status: "+de+" with message "+ge.message),M=!0,F.o_(new fe(xe,Ie)),N.close()}else me(sn,`RPC '${t}' stream ${c} received:`,K),F.__(K)}})),Ar.u_(),setTimeout((()=>{F.s_()}),0),F}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((s=>s===t))}Go(t,s,r){super.Go(t,s,r),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return w0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(i){return new Ar(i)}function ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(i){return new XT(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar.c_=!1;class bv{constructor(t,s,r=1e3,c=1.5,h=6e4){this.Ci=t,this.timerId=s,this.R_=r,this.A_=c,this.V_=h,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const s=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),c=Math.max(0,s-r);c>0&&me("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.d_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="PersistentStream";class _v{constructor(t,s,r,c,h,m,p,b){this.Ci=t,this.b_=r,this.S_=c,this.connection=h,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=p,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bv(t,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,s){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():s&&s.code===Z.RESOURCE_EXHAUSTED?(ea(s.toString()),ea("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(s)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,c])=>{this.D_===s&&this.G_(r,c)}),(r=>{t((()=>{const c=new fe(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(c)}))}))}G_(t,s){const r=this.Q_(this.D_);this.stream=this.j_(t,s),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((c=>{r((()=>this.z_(c)))})),this.stream.onMessage((c=>{r((()=>++this.F_==1?this.H_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return me(kx,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return s=>{this.Ci.enqueueAndForget((()=>this.D_===t?s():(me(kx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $N extends _v{constructor(t,s,r,c,h,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,c,m),this.serializer=h}j_(t,s){return this.connection.T_("Listen",t,s)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const s=WT(this.serializer,t),r=(function(h){if(!("targetChange"in h))return De.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?De.min():m.readTime?As(m.readTime):De.min()})(t);return this.listener.J_(s,r)}Z_(t){const s={};s.database=vd(this.serializer),s.addTarget=(function(h,m){let p;const b=m.target;if(p=dd(b)?{documents:nN(h,b)}:{query:sN(h,b).ft},p.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){p.resumeToken=ov(h,m.resumeToken);const x=pd(h,m.expectedCount);x!==null&&(p.expectedCount=x)}else if(m.snapshotVersion.compareTo(De.min())>0){p.readTime=yu(h,m.snapshotVersion.toTimestamp());const x=pd(h,m.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,t);const r=iN(this.serializer,t);r&&(s.labels=r),this.K_(s)}X_(t){const s={};s.database=vd(this.serializer),s.removeTarget=t,this.K_(s)}}class QN extends _v{constructor(t,s,r,c,h,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,c,m),this.serializer=h}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,s){return this.connection.T_("Write",t,s)}H_(t){return et(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,et(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){et(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const s=tN(t.writeResults,t.commitTime),r=As(t.commitTime);return this.listener.na(r,s)}ra(){const t={};t.database=vd(this.serializer),this.K_(t)}ea(t){const s={streamToken:this.lastStreamToken,writes:t.map((r=>eN(this.serializer,r)))};this.K_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{}class XN extends KN{constructor(t,s,r,c){super(),this.authCredentials=t,this.appCheckCredentials=s,this.connection=r,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,s,r,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Wo(t,yd(s,r),c,h,m))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new fe(Z.UNKNOWN,h.toString())}))}jo(t,s,r,c,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,p])=>this.connection.jo(t,yd(s,r),c,m,p,h))).catch((m=>{throw m.name==="FirebaseError"?(m.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new fe(Z.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function ZN(i,t,s,r){return new XN(i,t,s,r)}class JN{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ea(s),this.aa=!1):me("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="RemoteStore";class WN{constructor(t,s,r,c,h){this.localStore=t,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=h,this.Aa.Mo((m=>{r.enqueueAndForget((async()=>{Mi(this)&&(me(Di,"Restarting streams for network reachability change."),await(async function(b){const x=Ve(b);x.Ea.add(4),await yo(x),x.Va.set("Unknown"),x.Ea.delete(4),await Vu(x)})(this))}))})),this.Va=new JN(r,c)}}async function Vu(i){if(Mi(i))for(const t of i.Ra)await t(!0)}async function yo(i){for(const t of i.Ra)await t(!1)}function Ev(i,t){const s=Ve(i);s.Ia.has(t.targetId)||(s.Ia.set(t.targetId,t),Kd(s)?Qd(s):Hr(s).O_()&&$d(s,t))}function Yd(i,t){const s=Ve(i),r=Hr(s);s.Ia.delete(t),r.O_()&&Tv(s,t),s.Ia.size===0&&(r.O_()?r.L_():Mi(s)&&s.Va.set("Unknown"))}function $d(i,t){if(i.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(De.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}Hr(i).Z_(t)}function Tv(i,t){i.da.$e(t),Hr(i).X_(t)}function Qd(i){i.da=new YT({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),Hr(i).start(),i.Va.ua()}function Kd(i){return Mi(i)&&!Hr(i).x_()&&i.Ia.size>0}function Mi(i){return Ve(i).Ea.size===0}function Nv(i){i.da=void 0}async function e2(i){i.Va.set("Online")}async function t2(i){i.Ia.forEach(((t,s)=>{$d(i,t)}))}async function n2(i,t){Nv(i),Kd(i)?(i.Va.ha(t),Qd(i)):i.Va.set("Unknown")}async function s2(i,t,s){if(i.Va.set("Online"),t instanceof lv&&t.state===2&&t.cause)try{await(async function(c,h){const m=h.cause;for(const p of h.targetIds)c.Ia.has(p)&&(await c.remoteSyncer.rejectListen(p,m),c.Ia.delete(p),c.da.removeTarget(p))})(i,t)}catch(r){me(Di,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await vu(i,r)}else if(t instanceof iu?i.da.Xe(t):t instanceof rv?i.da.st(t):i.da.tt(t),!s.isEqual(De.min()))try{const r=await vv(i.localStore);s.compareTo(r)>=0&&await(function(h,m){const p=h.da.Tt(m);return p.targetChanges.forEach(((b,x)=>{if(b.resumeToken.approximateByteSize()>0){const N=h.Ia.get(x);N&&h.Ia.set(x,N.withResumeToken(b.resumeToken,m))}})),p.targetMismatches.forEach(((b,x)=>{const N=h.Ia.get(b);if(!N)return;h.Ia.set(b,N.withResumeToken(tn.EMPTY_BYTE_STRING,N.snapshotVersion)),Tv(h,b);const C=new Va(N.target,b,x,N.sequenceNumber);$d(h,C)})),h.remoteSyncer.applyRemoteEvent(p)})(i,s)}catch(r){me(Di,"Failed to raise snapshot:",r),await vu(i,r)}}async function vu(i,t,s){if(!Br(t))throw t;i.Ea.add(1),await yo(i),i.Va.set("Offline"),s||(s=()=>vv(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me(Di,"Retrying IndexedDB access"),await s(),i.Ea.delete(1),await Vu(i)}))}function wv(i,t){return t().catch((s=>vu(i,s,t)))}async function Ou(i){const t=Ve(i),s=Ga(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Id;for(;a2(t);)try{const c=await UN(t.localStore,r);if(c===null){t.Ta.length===0&&s.L_();break}r=c.batchId,i2(t,c)}catch(c){await vu(t,c)}jv(t)&&Sv(t)}function a2(i){return Mi(i)&&i.Ta.length<10}function i2(i,t){i.Ta.push(t);const s=Ga(i);s.O_()&&s.Y_&&s.ea(t.mutations)}function jv(i){return Mi(i)&&!Ga(i).x_()&&i.Ta.length>0}function Sv(i){Ga(i).start()}async function r2(i){Ga(i).ra()}async function l2(i){const t=Ga(i);for(const s of i.Ta)t.ea(s.mutations)}async function o2(i,t,s){const r=i.Ta.shift(),c=Ld.from(r,t,s);await wv(i,(()=>i.remoteSyncer.applySuccessfulWrite(c))),await Ou(i)}async function c2(i,t){t&&Ga(i).Y_&&await(async function(r,c){if((function(m){return HT(m)&&m!==Z.ABORTED})(c.code)){const h=r.Ta.shift();Ga(r).B_(),await wv(r,(()=>r.remoteSyncer.rejectFailedWrite(h.batchId,c))),await Ou(r)}})(i,t),jv(i)&&Sv(i)}async function zx(i,t){const s=Ve(i);s.asyncQueue.verifyOperationInProgress(),me(Di,"RemoteStore received new credentials");const r=Mi(s);s.Ea.add(3),await yo(s),r&&s.Va.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.Ea.delete(3),await Vu(s)}async function u2(i,t){const s=Ve(i);t?(s.Ea.delete(2),await Vu(s)):t||(s.Ea.add(2),await yo(s),s.Va.set("Unknown"))}function Hr(i){return i.ma||(i.ma=(function(s,r,c){const h=Ve(s);return h.sa(),new $N(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(i.datastore,i.asyncQueue,{Zo:e2.bind(null,i),Yo:t2.bind(null,i),t_:n2.bind(null,i),J_:s2.bind(null,i)}),i.Ra.push((async t=>{t?(i.ma.B_(),Kd(i)?Qd(i):i.Va.set("Unknown")):(await i.ma.stop(),Nv(i))}))),i.ma}function Ga(i){return i.fa||(i.fa=(function(s,r,c){const h=Ve(s);return h.sa(),new QN(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:r2.bind(null,i),t_:c2.bind(null,i),ta:l2.bind(null,i),na:o2.bind(null,i)}),i.Ra.push((async t=>{t?(i.fa.B_(),await Ou(i)):(await i.fa.stop(),i.Ta.length>0&&(me(Di,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(t,s,r,c,h){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=r,this.op=c,this.removalCallback=h,this.deferred=new Js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,s,r,c,h){const m=Date.now()+r,p=new Xd(t,s,m,c,h);return p.start(r),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zd(i,t){if(ea("AsyncQueue",`${t}: ${i}`),Br(i))return new fe(Z.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{static emptySet(t){return new Cr(t.comparator)}constructor(t){this.comparator=t?(s,r)=>t(s,r)||Te.comparator(s.key,r.key):(s,r)=>Te.comparator(s.key,r.key),this.keyedMap=Kl(),this.sortedSet=new yt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((s,r)=>(t(s),!1)))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof Cr)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;s.hasNext();){const c=s.getNext().key,h=r.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach((s=>{t.push(s.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const r=new Cr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.ga=new yt(Te.comparator)}track(t){const s=t.doc.key,r=this.ga.get(s);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(s,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(s):t.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:t.doc}):Ae(63341,{Vt:t,pa:r}):this.ga=this.ga.insert(s,t)}ya(){const t=[];return this.ga.inorderTraversal(((s,r)=>{t.push(r)})),t}}class kr{constructor(t,s,r,c,h,m,p,b,x){this.query=t,this.docs=s,this.oldDocs=r,this.docChanges=c,this.mutatedKeys=h,this.fromCache=m,this.syncStateChanged=p,this.excludesMetadataChanges=b,this.hasCachedResults=x}static fromInitialDocuments(t,s,r,c,h){const m=[];return s.forEach((p=>{m.push({type:0,doc:p})})),new kr(t,s,Cr.emptySet(s),m,r,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Su(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,r=t.docChanges;if(s.length!==r.length)return!1;for(let c=0;c<s.length;c++)if(s[c].type!==r[c].type||!s[c].doc.isEqual(r[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class f2{constructor(){this.queries=Lx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const c=Ve(s),h=c.queries;c.queries=Lx(),h.forEach(((m,p)=>{for(const b of p.ba)b.onError(r)}))})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function Lx(){return new Ii((i=>$0(i)),Su)}async function Av(i,t){const s=Ve(i);let r=3;const c=t.query;let h=s.queries.get(c);h?!h.Sa()&&t.Da()&&(r=2):(h=new h2,r=t.Da()?0:1);try{switch(r){case 0:h.wa=await s.onListen(c,!0);break;case 1:h.wa=await s.onListen(c,!1);break;case 2:await s.onFirstRemoteStoreListen(c)}}catch(m){const p=Zd(m,`Initialization of query '${Nr(t.query)}' failed`);return void t.onError(p)}s.queries.set(c,h),h.ba.push(t),t.va(s.onlineState),h.wa&&t.Fa(h.wa)&&Jd(s)}async function Cv(i,t){const s=Ve(i),r=t.query;let c=3;const h=s.queries.get(r);if(h){const m=h.ba.indexOf(t);m>=0&&(h.ba.splice(m,1),h.ba.length===0?c=t.Da()?0:1:!h.Sa()&&t.Da()&&(c=2))}switch(c){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function d2(i,t){const s=Ve(i);let r=!1;for(const c of t){const h=c.query,m=s.queries.get(h);if(m){for(const p of m.ba)p.Fa(c)&&(r=!0);m.wa=c}}r&&Jd(s)}function m2(i,t,s){const r=Ve(i),c=r.queries.get(t);if(c)for(const h of c.ba)h.onError(s);r.queries.delete(t)}function Jd(i){i.Ca.forEach((t=>{t.next()}))}var Ed,Px;(Px=Ed||(Ed={})).Ma="default",Px.Cache="cache";class Rv{constructor(t,s,r){this.query=t,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const c of t.docChanges)c.type!==3&&r.push(c);t=new kr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let s=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),s=!0):this.La(t,this.onlineState)&&(this.ka(t),s=!0),this.Na=t,s}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),s=!0),s}La(t,s){if(!t.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.Ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||s==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(t){t=kr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ed.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(t){this.key=t}}class Iv{constructor(t){this.key=t}}class g2{constructor(t,s){this.query=t,this.Za=s,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ge(),this.mutatedKeys=Ge(),this.eu=Q0(t),this.tu=new Cr(this.eu)}get nu(){return this.Za}ru(t,s){const r=s?s.iu:new Ux,c=s?s.tu:this.tu;let h=s?s.mutatedKeys:this.mutatedKeys,m=c,p=!1;const b=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,x=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(t.inorderTraversal(((N,C)=>{const M=c.get(N),F=Au(this.query,C)?C:null,W=!!M&&this.mutatedKeys.has(M.key),ie=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let K=!1;M&&F?M.data.isEqual(F.data)?W!==ie&&(r.track({type:3,doc:F}),K=!0):this.su(M,F)||(r.track({type:2,doc:F}),K=!0,(b&&this.eu(F,b)>0||x&&this.eu(F,x)<0)&&(p=!0)):!M&&F?(r.track({type:0,doc:F}),K=!0):M&&!F&&(r.track({type:1,doc:M}),K=!0,(b||x)&&(p=!0)),K&&(F?(m=m.add(F),h=ie?h.add(N):h.delete(N)):(m=m.delete(N),h=h.delete(N)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const N=this.query.limitType==="F"?m.last():m.first();m=m.delete(N.key),h=h.delete(N.key),r.track({type:1,doc:N})}return{tu:m,iu:r,Ss:p,mutatedKeys:h}}su(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,r,c){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const m=t.iu.ya();m.sort(((N,C)=>(function(F,W){const ie=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:K})}};return ie(F)-ie(W)})(N.type,C.type)||this.eu(N.doc,C.doc))),this.ou(r),c=c??!1;const p=s&&!c?this._u():[],b=this.Ya.size===0&&this.current&&!c?1:0,x=b!==this.Xa;return this.Xa=b,m.length!==0||x?{snapshot:new kr(this.query,t.tu,h,m,t.mutatedKeys,b===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ux,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((s=>this.Za=this.Za.add(s))),t.modifiedDocuments.forEach((s=>{})),t.removedDocuments.forEach((s=>this.Za=this.Za.delete(s))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const s=[];return t.forEach((r=>{this.Ya.has(r)||s.push(new Iv(r))})),this.Ya.forEach((r=>{t.has(r)||s.push(new Dv(r))})),s}cu(t){this.Za=t.ks,this.Ya=Ge();const s=this.ru(t.documents);return this.applyChanges(s,!0)}lu(){return kr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Wd="SyncEngine";class p2{constructor(t,s,r){this.query=t,this.targetId=s,this.view=r}}class y2{constructor(t){this.key=t,this.hu=!1}}class x2{constructor(t,s,r,c,h,m){this.localStore=t,this.remoteStore=s,this.eventManager=r,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Ii((p=>$0(p)),Su),this.Iu=new Map,this.Eu=new Set,this.Ru=new yt(Te.comparator),this.Au=new Map,this.Vu=new qd,this.du={},this.mu=new Map,this.fu=Or.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function v2(i,t,s=!0){const r=Uv(i);let c;const h=r.Tu.get(t);return h?(r.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.lu()):c=await Mv(r,t,s,!0),c}async function b2(i,t){const s=Uv(i);await Mv(s,t,!0,!1)}async function Mv(i,t,s,r){const c=await LN(i.localStore,Ss(t)),h=c.targetId,m=i.sharedClientState.addLocalQueryTarget(h,s);let p;return r&&(p=await _2(i,t,h,m==="current",c.resumeToken)),i.isPrimaryClient&&s&&Ev(i.remoteStore,c),p}async function _2(i,t,s,r,c){i.pu=(C,M,F)=>(async function(ie,K,pe,ge){let de=K.view.ru(pe);de.Ss&&(de=await Ix(ie.localStore,K.query,!1).then((({documents:R})=>K.view.ru(R,de))));const xe=ge&&ge.targetChanges.get(K.targetId),Ie=ge&&ge.targetMismatches.get(K.targetId)!=null,Ne=K.view.applyChanges(de,ie.isPrimaryClient,xe,Ie);return qx(ie,K.targetId,Ne.au),Ne.snapshot})(i,C,M,F);const h=await Ix(i.localStore,t,!0),m=new g2(t,h.ks),p=m.ru(h.documents),b=po.createSynthesizedTargetChangeForCurrentChange(s,r&&i.onlineState!=="Offline",c),x=m.applyChanges(p,i.isPrimaryClient,b);qx(i,s,x.au);const N=new p2(t,s,m);return i.Tu.set(t,N),i.Iu.has(s)?i.Iu.get(s).push(t):i.Iu.set(s,[t]),x.snapshot}async function E2(i,t,s){const r=Ve(i),c=r.Tu.get(t),h=r.Iu.get(c.targetId);if(h.length>1)return r.Iu.set(c.targetId,h.filter((m=>!Su(m,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(c.targetId),r.sharedClientState.isActiveQueryTarget(c.targetId)||await bd(r.localStore,c.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(c.targetId),s&&Yd(r.remoteStore,c.targetId),Td(r,c.targetId)})).catch(Pr)):(Td(r,c.targetId),await bd(r.localStore,c.targetId,!0))}async function T2(i,t){const s=Ve(i),r=s.Tu.get(t),c=s.Iu.get(r.targetId);s.isPrimaryClient&&c.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),Yd(s.remoteStore,r.targetId))}async function N2(i,t,s){const r=D2(i);try{const c=await(function(m,p){const b=Ve(m),x=ut.now(),N=p.reduce(((F,W)=>F.add(W.key)),Ge());let C,M;return b.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let W=ta(),ie=Ge();return b.xs.getEntries(F,N).next((K=>{W=K,W.forEach(((pe,ge)=>{ge.isValidDocument()||(ie=ie.add(pe))}))})).next((()=>b.localDocuments.getOverlayedDocuments(F,W))).next((K=>{C=K;const pe=[];for(const ge of p){const de=UT(ge,C.get(ge.key).overlayedDocument);de!=null&&pe.push(new Ka(ge.key,de,L0(de.value.mapValue),bn.exists(!0)))}return b.mutationQueue.addMutationBatch(F,x,pe,p)})).next((K=>{M=K;const pe=K.applyToLocalDocumentSet(C,ie);return b.documentOverlayCache.saveOverlays(F,K.batchId,pe)}))})).then((()=>({batchId:M.batchId,changes:X0(C)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(c.batchId),(function(m,p,b){let x=m.du[m.currentUser.toKey()];x||(x=new yt(He)),x=x.insert(p,b),m.du[m.currentUser.toKey()]=x})(r,c.batchId,s),await xo(r,c.changes),await Ou(r.remoteStore)}catch(c){const h=Zd(c,"Failed to persist write");s.reject(h)}}async function Vv(i,t){const s=Ve(i);try{const r=await kN(s.localStore,t);t.targetChanges.forEach(((c,h)=>{const m=s.Au.get(h);m&&(et(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?m.hu=!0:c.modifiedDocuments.size>0?et(m.hu,14607):c.removedDocuments.size>0&&(et(m.hu,42227),m.hu=!1))})),await xo(s,r,t)}catch(r){await Pr(r)}}function Bx(i,t,s){const r=Ve(i);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const c=[];r.Tu.forEach(((h,m)=>{const p=m.view.va(t);p.snapshot&&c.push(p.snapshot)})),(function(m,p){const b=Ve(m);b.onlineState=p;let x=!1;b.queries.forEach(((N,C)=>{for(const M of C.ba)M.va(p)&&(x=!0)})),x&&Jd(b)})(r.eventManager,t),c.length&&r.Pu.J_(c),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function w2(i,t,s){const r=Ve(i);r.sharedClientState.updateQueryState(t,"rejected",s);const c=r.Au.get(t),h=c&&c.key;if(h){let m=new yt(Te.comparator);m=m.insert(h,rn.newNoDocument(h,De.min()));const p=Ge().add(h),b=new Iu(De.min(),new Map,new yt(He),m,p);await Vv(r,b),r.Ru=r.Ru.remove(h),r.Au.delete(t),em(r)}else await bd(r.localStore,t,!1).then((()=>Td(r,t,s))).catch(Pr)}async function j2(i,t){const s=Ve(i),r=t.batch.batchId;try{const c=await ON(s.localStore,t);kv(s,r,null),Ov(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await xo(s,c)}catch(c){await Pr(c)}}async function S2(i,t,s){const r=Ve(i);try{const c=await(function(m,p){const b=Ve(m);return b.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let N;return b.mutationQueue.lookupMutationBatch(x,p).next((C=>(et(C!==null,37113),N=C.keys(),b.mutationQueue.removeMutationBatch(x,C)))).next((()=>b.mutationQueue.performConsistencyCheck(x))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(x,N,p))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,N))).next((()=>b.localDocuments.getDocuments(x,N)))}))})(r.localStore,t);kv(r,t,s),Ov(r,t),r.sharedClientState.updateMutationState(t,"rejected",s),await xo(r,c)}catch(c){await Pr(c)}}function Ov(i,t){(i.mu.get(t)||[]).forEach((s=>{s.resolve()})),i.mu.delete(t)}function kv(i,t,s){const r=Ve(i);let c=r.du[r.currentUser.toKey()];if(c){const h=c.get(t);h&&(s?h.reject(s):h.resolve(),c=c.remove(t)),r.du[r.currentUser.toKey()]=c}}function Td(i,t,s=null){i.sharedClientState.removeLocalQueryTarget(t);for(const r of i.Iu.get(t))i.Tu.delete(r),s&&i.Pu.yu(r,s);i.Iu.delete(t),i.isPrimaryClient&&i.Vu.Gr(t).forEach((r=>{i.Vu.containsKey(r)||zv(i,r)}))}function zv(i,t){i.Eu.delete(t.path.canonicalString());const s=i.Ru.get(t);s!==null&&(Yd(i.remoteStore,s),i.Ru=i.Ru.remove(t),i.Au.delete(s),em(i))}function qx(i,t,s){for(const r of s)r instanceof Dv?(i.Vu.addReference(r.key,t),A2(i,r)):r instanceof Iv?(me(Wd,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,t),i.Vu.containsKey(r.key)||zv(i,r.key)):Ae(19791,{wu:r})}function A2(i,t){const s=t.key,r=s.path.canonicalString();i.Ru.get(s)||i.Eu.has(r)||(me(Wd,"New document in limbo: "+s),i.Eu.add(r),em(i))}function em(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const s=new Te(ht.fromString(t)),r=i.fu.next();i.Au.set(r,new y2(s)),i.Ru=i.Ru.insert(s,r),Ev(i.remoteStore,new Va(Ss(zd(s.path)),r,"TargetPurposeLimboResolution",Nu.ce))}}async function xo(i,t,s){const r=Ve(i),c=[],h=[],m=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,b)=>{m.push(r.pu(b,t,s).then((x=>{var N;if((x||s)&&r.isPrimaryClient){const C=x?!x.fromCache:(N=s==null?void 0:s.targetChanges.get(b.targetId))==null?void 0:N.current;r.sharedClientState.updateQueryState(b.targetId,C?"current":"not-current")}if(x){c.push(x);const C=Gd.Es(b.targetId,x);h.push(C)}})))})),await Promise.all(m),r.Pu.J_(c),await(async function(b,x){const N=Ve(b);try{await N.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>ee.forEach(x,(M=>ee.forEach(M.Ts,(F=>N.persistence.referenceDelegate.addReference(C,M.targetId,F))).next((()=>ee.forEach(M.Is,(F=>N.persistence.referenceDelegate.removeReference(C,M.targetId,F)))))))))}catch(C){if(!Br(C))throw C;me(Fd,"Failed to update sequence numbers: "+C)}for(const C of x){const M=C.targetId;if(!C.fromCache){const F=N.vs.get(M),W=F.snapshotVersion,ie=F.withLastLimboFreeSnapshotVersion(W);N.vs=N.vs.insert(M,ie)}}})(r.localStore,h))}async function C2(i,t){const s=Ve(i);if(!s.currentUser.isEqual(t)){me(Wd,"User change. New user:",t.toKey());const r=await xv(s.localStore,t);s.currentUser=t,(function(h,m){h.mu.forEach((p=>{p.forEach((b=>{b.reject(new fe(Z.CANCELLED,m))}))})),h.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await xo(s,r.Ns)}}function R2(i,t){const s=Ve(i),r=s.Au.get(t);if(r&&r.hu)return Ge().add(r.key);{let c=Ge();const h=s.Iu.get(t);if(!h)return c;for(const m of h){const p=s.Tu.get(m);c=c.unionWith(p.view.nu)}return c}}function Uv(i){const t=Ve(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=R2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=w2.bind(null,t),t.Pu.J_=d2.bind(null,t.eventManager),t.Pu.yu=m2.bind(null,t.eventManager),t}function D2(i){const t=Ve(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=j2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=S2.bind(null,t),t}class bu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Mu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,s){return null}Mu(t,s){return null}vu(t){return VN(this.persistence,new DN,t.initialUser,this.serializer)}Cu(t){return new yv(Hd.Vi,this.serializer)}Du(t){return new BN}async terminate(){var t,s;(t=this.gcScheduler)==null||t.stop(),(s=this.indexBackfillerScheduler)==null||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bu.provider={build:()=>new bu};class I2 extends bu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,s){et(this.persistence.referenceDelegate instanceof xu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pN(r,t.asyncQueue,s)}Cu(t){const s=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new yv((r=>xu.Vi(r,s)),this.serializer)}}class Nd{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=C2.bind(null,this.syncEngine),await u2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new f2})()}createDatastore(t){const s=Mu(t.databaseInfo.databaseId),r=YN(t.databaseInfo);return ZN(t.authCredentials,t.appCheckCredentials,r,s)}createRemoteStore(t){return(function(r,c,h,m,p){return new WN(r,c,h,m,p)})(this.localStore,this.datastore,t.asyncQueue,(s=>Bx(this.syncEngine,s,0)),(function(){return Ox.v()?new Ox:new qN})())}createSyncEngine(t,s){return(function(c,h,m,p,b,x,N){const C=new x2(c,h,m,p,b,x);return N&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}async terminate(){var t,s;await(async function(c){const h=Ve(c);me(Di,"RemoteStore shutting down."),h.Ea.add(5),await yo(h),h.Aa.shutdown(),h.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(s=this.eventManager)==null||s.terminate()}}Nd.provider={build:()=>new Nd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ea("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,s){setTimeout((()=>{this.muted||t(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="FirestoreClient";class M2{constructor(t,s,r,c,h){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=r,this._databaseInfo=c,this.user=an.UNAUTHENTICATED,this.clientId=Dd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(r,(async m=>{me(Fa,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(r,(m=>(me(Fa,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const r=Zd(s,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function td(i,t){i.asyncQueue.verifyOperationInProgress(),me(Fa,"Initializing OfflineComponentProvider");const s=i.configuration;await t.initialize(s);let r=s.initialUser;i.setCredentialChangeListener((async c=>{r.isEqual(c)||(await xv(t.localStore,c),r=c)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function Hx(i,t){i.asyncQueue.verifyOperationInProgress();const s=await V2(i);me(Fa,"Initializing OnlineComponentProvider"),await t.initialize(s,i.configuration),i.setCredentialChangeListener((r=>zx(t.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,c)=>zx(t.remoteStore,c))),i._onlineComponents=t}async function V2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(Fa,"Using user provided OfflineComponentProvider");try{await td(i,i._uninitializedComponentsProvider._offline)}catch(t){const s=t;if(!(function(c){return c.name==="FirebaseError"?c.code===Z.FAILED_PRECONDITION||c.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(s))throw s;Ri("Error using user provided cache. Falling back to memory cache: "+s),await td(i,new bu)}}else me(Fa,"Using default OfflineComponentProvider"),await td(i,new I2(void 0));return i._offlineComponents}async function Pv(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(Fa,"Using user provided OnlineComponentProvider"),await Hx(i,i._uninitializedComponentsProvider._online)):(me(Fa,"Using default OnlineComponentProvider"),await Hx(i,new Nd))),i._onlineComponents}function O2(i){return Pv(i).then((t=>t.syncEngine))}async function Bv(i){const t=await Pv(i),s=t.eventManager;return s.onListen=v2.bind(null,t.syncEngine),s.onUnlisten=E2.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=b2.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=T2.bind(null,t.syncEngine),s}function k2(i,t,s={}){const r=new Js;return i.asyncQueue.enqueueAndForget((async()=>(function(h,m,p,b,x){const N=new Lv({next:M=>{N.Nu(),m.enqueueAndForget((()=>Cv(h,C)));const F=M.docs.has(p);!F&&M.fromCache?x.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&b&&b.source==="server"?x.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(M)},error:M=>x.reject(M)}),C=new Rv(zd(p.path),N,{includeMetadataChanges:!0,Ka:!0});return Av(h,C)})(await Bv(i),i.asyncQueue,t,s,r))),r.promise}function z2(i,t,s={}){const r=new Js;return i.asyncQueue.enqueueAndForget((async()=>(function(h,m,p,b,x){const N=new Lv({next:M=>{N.Nu(),m.enqueueAndForget((()=>Cv(h,C))),M.fromCache&&b.source==="server"?x.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(M)},error:M=>x.reject(M)}),C=new Rv(p,N,{includeMetadataChanges:!0,Ka:!0});return Av(h,C)})(await Bv(i),i.asyncQueue,t,s,r))),r.promise}function U2(i,t){const s=new Js;return i.asyncQueue.enqueueAndForget((async()=>N2(await O2(i),t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="ComponentProvider",Gx=new Map;function P2(i,t,s,r,c){return new rT(i,t,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,qv(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="firestore.googleapis.com",Fx=!0;class Yx{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hv,this.ssl=Fx}else this.host=t.host,this.ssl=t.ssl??Fx;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=pv;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<mN)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qv(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,c){return r.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ku{constructor(t,s,r,c){this._authCredentials=t,this._appCheckCredentials=s,this._databaseId=r,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yx(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new LE;switch(r.type){case"firstParty":return new HE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Gx.get(s);r&&(me(L2,"Removing Datastore"),Gx.delete(s),r.terminate())})(this),Promise.resolve()}}function B2(i,t,s,r={}){var x;i=Ds(i,ku);const c=Ad(t),h=i._getSettings(),m={...h,emulatorOptions:i._getEmulatorOptions()},p=`${t}:${s}`;c&&(h1(`https://${p}`),g1("Firestore",!0)),h.host!==Hv&&h.host!==p&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...h,host:p,ssl:c,emulatorOptions:r};if(!ou(b,m)&&(i._setSettings(b),r.mockUserToken)){let N,C;if(typeof r.mockUserToken=="string")N=r.mockUserToken,C=an.MOCK_USER;else{N=f1(r.mockUserToken,(x=i._app)==null?void 0:x.options.projectId);const M=r.mockUserToken.sub||r.mockUserToken.user_id;if(!M)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new an(M)}i._authCredentials=new PE(new S0(N,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Vi(this.firestore,t,this._query)}}class Ut{constructor(t,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ut(this.firestore,t,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,s,r){if(mo(s,Ut._jsonSchema))return new Ut(t,r||null,new Te(ht.fromString(s.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:zt("string",Ut._jsonSchemaVersion),referencePath:zt("string")};class Ua extends Vi{constructor(t,s,r){super(t,s,zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ut(this.firestore,null,new Te(t))}withConverter(t){return new Ua(this.firestore,t,this._path)}}function tm(i,t,...s){if(i=Rs(i),A0("collection","path",t),i instanceof ku){const r=ht.fromString(t,...s);return ix(r),new Ua(i,null,r)}{if(!(i instanceof Ut||i instanceof Ua))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ht.fromString(t,...s));return ix(r),new Ua(i.firestore,null,r)}}function vo(i,t,...s){if(i=Rs(i),arguments.length===1&&(t=Dd.newId()),A0("doc","path",t),i instanceof ku){const r=ht.fromString(t,...s);return ax(r),new Ut(i,null,new Te(r))}{if(!(i instanceof Ut||i instanceof Ua))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ht.fromString(t,...s));return ax(r),new Ut(i.firestore,i instanceof Ua?i.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="AsyncQueue";class Qx{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bv(this,"async_queue_retry"),this._c=()=>{const r=ed();r&&me($x,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const s=ed();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const s=ed();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Js;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Br(t))throw t;me($x,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const s=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,ea("INTERNAL UNHANDLED ERROR: ",Kx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(t,s,r){this.uc(),this.oc.indexOf(t)>-1&&(s=0);const c=Xd.createAndSchedule(this,t,s,r,(h=>this.hc(h)));return this.tc.push(c),c}uc(){this.nc&&Ae(47125,{Pc:Kx(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const s of this.tc)if(s.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const s=this.tc.indexOf(t);this.tc.splice(s,1)}}function Kx(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}class Oi extends ku{constructor(t,s,r,c){super(t,s,r,c),this.type="firestore",this._queue=new Qx,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Qx(t),this._firestoreClient=void 0,await t}}}function q2(i,t){const s=typeof i=="object"?i:wE(),r=typeof i=="string"?i:fu,c=bE(s,"firestore").getImmediate({identifier:r});if(!c._initialized){const h=c1("firestore");h&&B2(c,...h)}return c}function zu(i){if(i._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||H2(i),i._firestoreClient}function H2(i){var r,c,h,m;const t=i._freezeSettings(),s=P2(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,(c=i._app)==null?void 0:c.options.apiKey,t);i._componentsProvider||(h=t.localCache)!=null&&h._offlineComponentProvider&&((m=t.localCache)!=null&&m._onlineComponentProvider)&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new M2(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&(function(b){const x=b==null?void 0:b._online.build();return{_offline:b==null?void 0:b._offline.build(x),_online:x}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Gn(tn.fromBase64String(t))}catch(s){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new Gn(tn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(mo(t,Gn._jsonSchema))return Gn.fromBase64String(t.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:zt("string",Gn._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return He(this._lat,t._lat)||He(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cs._jsonSchemaVersion}}static fromJSON(t){if(mo(t,Cs._jsonSchema))return new Cs(t.latitude,t.longitude)}}Cs._jsonSchemaVersion="firestore/geoPoint/1.0",Cs._jsonSchema={type:zt("string",Cs._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t){this._values=(t||[]).map((s=>s))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,c){if(r.length!==c.length)return!1;for(let h=0;h<r.length;++h)if(r[h]!==c[h])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(mo(t,ss._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((s=>typeof s=="number")))return new ss(t.vectorValues);throw new fe(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ss._jsonSchemaVersion="firestore/vectorValue/1.0",ss._jsonSchema={type:zt("string",ss._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=/^__.*__$/;class F2{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return this.fieldMask!==null?new Ka(t,this.data,this.fieldMask,s,this.fieldTransforms):new go(t,this.data,s,this.fieldTransforms)}}class Gv{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return new Ka(t,this.data,this.fieldMask,s,this.fieldTransforms)}}function Fv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:i})}}class am{constructor(t,s,r,c,h,m){this.settings=t,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=c,h===void 0&&this.validatePath(),this.fieldTransforms=h||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new am({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var c;const s=(c=this.path)==null?void 0:c.child(t),r=this.contextWith({path:s,arrayElement:!1});return r.validatePathSegment(t),r}childContextForFieldPath(t){var c;const s=(c=this.path)==null?void 0:c.child(t),r=this.contextWith({path:s,arrayElement:!1});return r.validatePath(),r}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return _u(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((s=>t.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>t.isPrefixOf(s.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(Fv(this.dataSource)&&G2.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class Y2{constructor(t,s,r){this.databaseId=t,this.ignoreUndefinedProperties=s,this.serializer=r||Mu(t)}createContext(t,s,r,c=!1){return new am({dataSource:t,methodName:s,targetDoc:r,path:en.emptyPath(),arrayElement:!1,hasConverter:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uu(i){const t=i._freezeSettings(),s=Mu(i._databaseId);return new Y2(i._databaseId,!!t.ignoreUndefinedProperties,s)}function im(i,t,s,r,c,h={}){const m=i.createContext(h.merge||h.mergeFields?2:0,t,s,c);rm("Data must be an object, but it was:",m,r);const p=Yv(r,m);let b,x;if(h.merge)b=new Rn(m.fieldMask),x=m.fieldTransforms;else if(h.mergeFields){const N=[];for(const C of h.mergeFields){const M=zr(t,C,s);if(!m.contains(M))throw new fe(Z.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);Kv(N,M)||N.push(M)}b=new Rn(N),x=m.fieldTransforms.filter((C=>b.covers(C.field)))}else b=null,x=m.fieldTransforms;return new F2(new vn(p),b,x)}class Lu extends sm{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Lu}}function $2(i,t,s,r){const c=i.createContext(1,t,s);rm("Data must be an object, but it was:",c,r);const h=[],m=vn.empty();Qa(r,((b,x)=>{const N=Qv(t,b,s);x=Rs(x);const C=c.childContextForFieldPath(N);if(x instanceof Lu)h.push(N);else{const M=bo(x,C);M!=null&&(h.push(N),m.set(N,M))}}));const p=new Rn(h);return new Gv(m,p,c.fieldTransforms)}function Q2(i,t,s,r,c,h){const m=i.createContext(1,t,s),p=[zr(t,r,s)],b=[c];if(h.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<h.length;M+=2)p.push(zr(t,h[M])),b.push(h[M+1]);const x=[],N=vn.empty();for(let M=p.length-1;M>=0;--M)if(!Kv(x,p[M])){const F=p[M];let W=b[M];W=Rs(W);const ie=m.childContextForFieldPath(F);if(W instanceof Lu)x.push(F);else{const K=bo(W,ie);K!=null&&(x.push(F),N.set(F,K))}}const C=new Rn(x);return new Gv(N,C,m.fieldTransforms)}function K2(i,t,s,r=!1){return bo(s,i.createContext(r?4:3,t))}function bo(i,t){if($v(i=Rs(i)))return rm("Unsupported field value:",t,i),Yv(i,t);if(i instanceof sm)return(function(r,c){if(!Fv(c.dataSource))throw c.createError(`${r._methodName}() can only be used with update() and set()`);if(!c.path)throw c.createError(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(c);h&&c.fieldTransforms.push(h)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(r,c){const h=[];let m=0;for(const p of r){let b=bo(p,c.childContextForArray(m));b==null&&(b={nullValue:"NULL_VALUE"}),h.push(b),m++}return{arrayValue:{values:h}}})(i,t)}return(function(r,c){if((r=Rs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IT(c.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const h=ut.fromDate(r);return{timestampValue:yu(c.serializer,h)}}if(r instanceof ut){const h=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yu(c.serializer,h)}}if(r instanceof Cs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gn)return{bytesValue:ov(c.serializer,r._byteString)};if(r instanceof Ut){const h=c.databaseId,m=r.firestore._databaseId;if(!m.isEqual(h))throw c.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Bd(r.firestore._databaseId||c.databaseId,r._key.path)}}if(r instanceof ss)return(function(m,p){const b=m instanceof ss?m.toArray():m;return{mapValue:{fields:{[z0]:{stringValue:U0},[du]:{arrayValue:{values:b.map((N=>{if(typeof N!="number")throw p.createError("VectorValues must only contain numeric values.");return Ud(p.serializer,N)}))}}}}}})(r,c);if(gv(r))return r._toProto(c.serializer);throw c.createError(`Unsupported field value: ${Tu(r)}`)})(i,t)}function Yv(i,t){const s={};return D0(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qa(i,((r,c)=>{const h=bo(c,t.childContextForField(r));h!=null&&(s[r]=h)})),{mapValue:{fields:s}}}function $v(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ut||i instanceof Cs||i instanceof Gn||i instanceof Ut||i instanceof sm||i instanceof ss||gv(i))}function rm(i,t,s){if(!$v(s)||!C0(s)){const r=Tu(s);throw r==="an object"?t.createError(i+" a custom object"):t.createError(i+" "+r)}}function zr(i,t,s){if((t=Rs(t))instanceof nm)return t._internalPath;if(typeof t=="string")return Qv(i,t);throw _u("Field path arguments must be of type string or ",i,!1,void 0,s)}const X2=new RegExp("[~\\*/\\[\\]]");function Qv(i,t,s){if(t.search(X2)>=0)throw _u(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new nm(...t.split("."))._internalPath}catch{throw _u(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function _u(i,t,s,r,c){const h=r&&!r.isEmpty(),m=c!==void 0;let p=`Function ${t}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let b="";return(h||m)&&(b+=" (found",h&&(b+=` in field ${r}`),m&&(b+=` in document ${c}`),b+=")"),new fe(Z.INVALID_ARGUMENT,p+i+b)}function Kv(i,t){return i.some((s=>s.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{convertValue(t,s="none"){switch(Ha(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(qa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 11:return this.convertObject(t.mapValue,s);case 10:return this.convertVectorValue(t.mapValue);default:throw Ae(62114,{value:t})}}convertObject(t,s){return this.convertObjectMap(t.fields,s)}convertObjectMap(t,s="none"){const r={};return Qa(t,((c,h)=>{r[c]=this.convertValue(h,s)})),r}convertVectorValue(t){var r,c,h;const s=(h=(c=(r=t.fields)==null?void 0:r[du].arrayValue)==null?void 0:c.values)==null?void 0:h.map((m=>jt(m.doubleValue)));return new ss(s)}convertGeoPoint(t){return new Cs(jt(t.latitude),jt(t.longitude))}convertArray(t,s){return(t.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(t,s){switch(s){case"previous":const r=ju(t);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(ro(t));default:return null}}convertTimestamp(t){const s=Ba(t);return new ut(s.seconds,s.nanos)}convertDocumentKey(t,s){const r=ht.fromString(t);et(mv(r),9688,{name:t});const c=new lo(r.get(1),r.get(3)),h=new Te(r.popFirst(5));return c.isEqual(s)||ea(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends Z2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Gn(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new Ut(this.firestore,null,s)}}const Xx="@firebase/firestore",Zx="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,s,r,c,h){this._firestore=t,this._userDataWriter=s,this._key=r,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new J2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const s=this._document.data.field(zr("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class J2 extends Zv{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lm{}class Jv extends lm{}function ew(i,t,...s){let r=[];t instanceof lm&&r.push(t),r=r.concat(s),(function(h){const m=h.filter((b=>b instanceof cm)).length,p=h.filter((b=>b instanceof om)).length;if(m>1||m>0&&p>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const c of r)i=c._apply(i);return i}class om extends Jv{constructor(t,s,r){super(),this._field=t,this._op=s,this._value=r,this.type="where"}static _create(t,s,r){return new om(t,s,r)}_apply(t){const s=this._parse(t);return Wv(t._query,s),new Vi(t.firestore,t.converter,md(t._query,s))}_parse(t){const s=Uu(t.firestore);return(function(h,m,p,b,x,N,C){let M;if(x.isKeyField()){if(N==="array-contains"||N==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${N}' queries on documentId().`);if(N==="in"||N==="not-in"){Wx(C,N);const W=[];for(const ie of C)W.push(Jx(b,h,ie));M={arrayValue:{values:W}}}else M=Jx(b,h,C)}else N!=="in"&&N!=="not-in"&&N!=="array-contains-any"||Wx(C,N),M=K2(p,m,C,N==="in"||N==="not-in");return kt.create(x,N,M)})(t._query,"where",s,t.firestore._databaseId,this._field,this._op,this._value)}}class cm extends lm{constructor(t,s){super(),this.type=t,this._queryConstraints=s}static _create(t,s){return new cm(t,s)}_parse(t){const s=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:as.create(s,this._getOperator())}_apply(t){const s=this._parse(t);return s.getFilters().length===0?t:((function(c,h){let m=c;const p=h.getFlattenedFilters();for(const b of p)Wv(m,b),m=md(m,b)})(t._query,s),new Vi(t.firestore,t.converter,md(t._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class um extends Jv{constructor(t,s){super(),this._field=t,this._direction=s,this.type="orderBy"}static _create(t,s){return new um(t,s)}_apply(t){const s=(function(c,h,m){if(c.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(c.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new co(h,m)})(t._query,this._field,this._direction);return new Vi(t.firestore,t.converter,NT(t._query,s))}}function tw(i,t="asc"){const s=t,r=zr("orderBy",i);return um._create(r,s)}function Jx(i,t,s){if(typeof(s=Rs(s))=="string"){if(s==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y0(t)&&s.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=t.path.child(ht.fromString(s));if(!Te.isDocumentKey(r))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dx(i,new Te(r))}if(s instanceof Ut)return dx(i,s._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tu(s)}.`)}function Wx(i,t){if(!Array.isArray(i)||i.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Wv(i,t){const s=(function(c,h){for(const m of c)for(const p of m.getFlattenedFilters())if(h.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(s!==null)throw s===t.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}function hm(i,t,s){let r;return r=i?s&&(s.merge||s.mergeFields)?i.toFirestore(t,s):i.toFirestore(t):t,r}class Zl{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ai extends Zv{constructor(t,s,r,c,h,m){super(t,s,r,c,m),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new ru(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const r=this._document.data.field(zr("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,s={};return s.type=Ai._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Ai._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ai._jsonSchema={type:zt("string",Ai._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class ru extends Ai{data(t={}){return super.data(t)}}class Rr{constructor(t,s,r,c){this._firestore=t,this._userDataWriter=s,this._snapshot=c,this.metadata=new Zl(c.hasPendingWrites,c.fromCache),this.query=r}get docs(){const t=[];return this.forEach((s=>t.push(s))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach((r=>{t.call(s,new ru(this._firestore,this._userDataWriter,r.key,r,new Zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(c,h){if(c._snapshot.oldDocs.isEmpty()){let m=0;return c._snapshot.docChanges.map((p=>{const b=new ru(c._firestore,c._userDataWriter,p.doc.key,p.doc,new Zl(c._snapshot.mutatedKeys.has(p.doc.key),c._snapshot.fromCache),c.query.converter);return p.doc,{type:"added",doc:b,oldIndex:-1,newIndex:m++}}))}{let m=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((p=>h||p.type!==3)).map((p=>{const b=new ru(c._firestore,c._userDataWriter,p.doc.key,p.doc,new Zl(c._snapshot.mutatedKeys.has(p.doc.key),c._snapshot.fromCache),c.query.converter);let x=-1,N=-1;return p.type!==0&&(x=m.indexOf(p.doc.key),m=m.delete(p.doc.key)),p.type!==1&&(m=m.add(p.doc),N=m.indexOf(p.doc.key)),{type:nw(p.type),doc:b,oldIndex:x,newIndex:N}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Rr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Dd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],c=[];return this.docs.forEach((h=>{h._document!==null&&(s.push(h._document),r.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),c.push(h.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function nw(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr._jsonSchemaVersion="firestore/querySnapshot/1.0",Rr._jsonSchema={type:zt("string",Rr._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t,s){this._firestore=t,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Uu(t)}set(t,s,r){this._verifyNotCommitted();const c=nd(t,this._firestore),h=hm(c.converter,s,r),m=im(this._dataReader,"WriteBatch.set",c._key,h,c.converter!==null,r);return this._mutations.push(m.toMutation(c._key,bn.none())),this}update(t,s,r,...c){this._verifyNotCommitted();const h=nd(t,this._firestore);let m;return m=typeof(s=Rs(s))=="string"||s instanceof nm?Q2(this._dataReader,"WriteBatch.update",h._key,s,r,c):$2(this._dataReader,"WriteBatch.update",h._key,s),this._mutations.push(m.toMutation(h._key,bn.exists(!0))),this}delete(t){this._verifyNotCommitted();const s=nd(t,this._firestore);return this._mutations=this._mutations.concat(new Du(s._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nd(i,t){if((i=Rs(i)).firestore!==t)throw new fe(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(i){i=Ds(i,Ut);const t=Ds(i.firestore,Oi),s=zu(t);return k2(s,i._key).then((r=>lw(t,i,r)))}function eb(i){i=Ds(i,Vi);const t=Ds(i.firestore,Oi),s=zu(t),r=new Xv(t);return W2(i._query),z2(s,i._query).then((c=>new Rr(t,r,i,c)))}function tb(i,t,s){i=Ds(i,Ut);const r=Ds(i.firestore,Oi),c=hm(i.converter,t,s),h=Uu(r);return Pu(r,[im(h,"setDoc",i._key,c,i.converter!==null,s).toMutation(i._key,bn.none())])}function iw(i){return Pu(Ds(i.firestore,Oi),[new Du(i._key,bn.none())])}function rw(i,t){const s=Ds(i.firestore,Oi),r=vo(i),c=hm(i.converter,t),h=Uu(i.firestore);return Pu(s,[im(h,"addDoc",r._key,c,i.converter!==null,{}).toMutation(r._key,bn.exists(!1))]).then((()=>r))}function Pu(i,t){const s=zu(i);return U2(s,t)}function lw(i,t,s){const r=s.docs.get(t._key),c=new Xv(i);return new Ai(i,c,t._key,r,new Zl(s.hasPendingWrites,s.fromCache),t.converter)}function ow(i){return i=Ds(i,Oi),zu(i),new sw(i,(t=>Pu(i,t)))}(function(t,s=!0){UE(NE),uu(new so("firestore",((r,{instanceIdentifier:c,options:h})=>{const m=r.getProvider("app").getImmediate(),p=new Oi(new BE(r.getProvider("auth-internal")),new GE(m,r.getProvider("app-check-internal")),lT(m,c),m);return h={useFetchStreams:s,...h},p._setSettings(h),p}),"PUBLIC").setMultipleInstances(!0)),Sr(Xx,Zx,t),Sr(Xx,Zx,"esm2020")})();const cw={apiKey:"AIzaSyCYT45WYMTTCpp3MDvUShT1yEwz-x9mYWQ",authDomain:"core-safe.firebaseapp.com",projectId:"core-safe",storageBucket:"core-safe.firebasestorage.app",messagingSenderId:"538945747105",appId:"1:538945747105:web:09373b659159a8b8c618e0"},uw=y0(cw),Ya=q2(uw),fo="drafts",nb="masterData",sb="general",wd=async()=>{try{const i=ew(tm(Ya,fo),tw("lastModified","desc"));return(await eb(i)).docs.map(s=>{const r=s.data();return{id:s.id,type:r.type,lastModified:r.lastModified instanceof ut?r.lastModified.toMillis():r.lastModified,data:r.data}})}catch(i){throw console.error(": ",i),i}},hw=async i=>{try{await iw(vo(Ya,fo,i))}catch(t){throw console.error(": ",t),t}},$a=async(i,t,s)=>{try{const r={type:t,data:s,lastModified:ut.now()};return i?(await tb(vo(Ya,fo,i),r,{merge:!0}),i):(await rw(tm(Ya,fo),r)).id}catch(r){throw console.error(": ",r),r}},Bu=async()=>{try{const i=vo(Ya,nb,sb),t=await aw(i);return t.exists()?t.data():ct}catch(i){return console.error(": ",i),ct}},La=async i=>{try{await tb(vo(Ya,nb,sb),i)}catch(t){throw console.error(": ",t),t}},fw=i=>new Promise((t,s)=>{const r=new FileReader;r.readAsDataURL(i),r.onload=c=>{var m;const h=new Image;h.src=(m=c.target)==null?void 0:m.result,h.onload=()=>{const p=document.createElement("canvas"),b=800,x=b/h.width;p.width=b,p.height=h.height*x;const N=p.getContext("2d");N==null||N.drawImage(h,0,0,p.width,p.height),t(p.toDataURL("image/jpeg",.7))},h.onerror=s},r.onerror=s}),fm=async i=>{try{const t=await eb(tm(Ya,fo)),s=ow(Ya);let r=0;t.forEach(c=>{const h=c.data();h.data&&h.data.project===i&&(s.delete(c.ref),r++)}),r>0&&await s.commit()}catch(t){throw console.error(": ",t),t}},ab=async i=>{try{return(await wd()).filter(r=>r.type==="SAFETY_PLAN"&&r.data.project===i)}catch(t){throw console.error(": ",t),t}},dm=({onSave:i,onClear:t,lineWidth:s=3.5,keepOpenOnSave:r=!1})=>{const[c,h]=ae.useState(!1),m=ae.useRef(null),p=ae.useRef(null),[b,x]=ae.useState(!1),[N,C]=ae.useState(!1),[M,F]=ae.useState(!1),[W,ie]=ae.useState(!1),[K,pe]=ae.useState({width:0,height:0}),[ge,de]=ae.useState(!1);ae.useEffect(()=>{const w=()=>{de(window.innerHeight>window.innerWidth)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),ae.useEffect(()=>{if(!c||!m.current)return;const w=setTimeout(()=>{(()=>{if(m.current){const A=window.devicePixelRatio||1,Se=Math.floor(m.current.clientWidth*A),Ce=Math.floor(m.current.clientHeight*A);Se>0&&Ce>0&&pe({width:Se,height:Ce})}})()},300);return()=>clearTimeout(w)},[c,ge]),ae.useEffect(()=>{if(!c||K.width===0)return;const w=p.current;if(w){const I=w.getContext("2d");I&&(I.lineWidth=s,I.lineCap="round",I.lineJoin="round",I.strokeStyle="#000")}},[K,c,s]);const xe=w=>{const I=p.current;if(!I)return{x:0,y:0};const A=I.getBoundingClientRect(),Se=w.clientX,Ce=w.clientY,H=Se-A.left,te=Ce-A.top;return ge?{x:te/A.height*I.width,y:(1-H/A.width)*I.height}:{x:H/A.width*I.width,y:te/A.height*I.height}},Ie=w=>{var Se;if(W&&w.pointerType!=="pen")return;w.preventDefault(),w.stopPropagation(),x(!0),w.target.setPointerCapture(w.pointerId);const I=xe(w),A=(Se=p.current)==null?void 0:Se.getContext("2d");A==null||A.beginPath(),A==null||A.moveTo(I.x,I.y)},Ne=w=>{var Se;if(!b||W&&w.pointerType!=="pen")return;w.preventDefault(),w.stopPropagation();const I=xe(w),A=(Se=p.current)==null?void 0:Se.getContext("2d");A==null||A.lineTo(I.x,I.y),A==null||A.stroke(),N||C(!0)},R=w=>{b&&(w.preventDefault(),x(!1),w.target.releasePointerCapture(w.pointerId))},j=()=>{const w=p.current,I=w==null?void 0:w.getContext("2d");w&&I&&I.clearRect(0,0,w.width,w.height),C(!1)},S=()=>{if(p.current&&N){const w=p.current,I=0,A=w.height*.25,Se=w.width,Ce=w.height*.5,H=document.createElement("canvas");H.width=Se,H.height=Ce;const te=H.getContext("2d");te&&(te.drawImage(w,I,A,Se,Ce,0,0,H.width,H.height),i(H.toDataURL("image/png"))),r?(j(),F(!0),setTimeout(()=>F(!1),2e3)):h(!1)}};if(!c)return o.jsxs("div",{onClick:()=>h(!0),className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-blue-50 hover:border-blue-300 bg-white text-gray-500 transition-all group",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-2 group-hover:bg-blue-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-pen-nib text-xl text-gray-400 group-hover:text-blue-500"})}),o.jsx("span",{className:"font-bold text-sm group-hover:text-blue-600",children:""})]});const V=ge?"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[100dvh] h-[100dvw] rotate-90 origin-center":"fixed inset-0 w-full h-full";return o.jsx("div",{className:"fixed inset-0 z-[100] bg-gray-900 bg-opacity-95 select-none touch-none",onContextMenu:w=>w.preventDefault(),style:{WebkitUserSelect:"none",WebkitTouchCallout:"none"},children:o.jsxs("div",{className:`${V} bg-white flex flex-col overflow-hidden shadow-2xl relative select-none`,children:[M&&o.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[60] bg-gray-800 bg-opacity-90 text-white px-8 py-6 rounded-xl shadow-2xl animate-fade-in flex flex-col items-center backdrop-blur-sm pointer-events-none",children:[o.jsx("i",{className:"fa-solid fa-check-circle text-5xl text-green-400 mb-4"}),o.jsx("span",{className:"font-bold text-xl mb-1",children:""}),o.jsx("span",{className:"text-sm text-gray-300",children:""})]}),o.jsxs("div",{className:"bg-gray-100 flex-none border-b shadow-sm z-20 select-none",children:[o.jsxs("div",{className:"relative flex justify-between items-center px-4 py-4 border-b border-gray-200 bg-white min-h-[72px]",children:[o.jsx("button",{type:"button",onClick:()=>{h(!1),t()},className:"px-4 py-2 text-sm font-bold text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 border border-gray-300 z-10 relative",children:""}),o.jsxs("h3",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 font-bold text-lg text-gray-800 hidden sm:flex items-center justify-center pointer-events-none",children:[o.jsx("i",{className:"fa-solid fa-pen-nib mr-2 text-gray-500"}),""]}),o.jsxs("div",{className:"flex items-center gap-2 z-10 relative",children:[o.jsxs("button",{type:"button",onClick:j,className:"px-3 py-2 text-sm font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg flex items-center border border-red-200 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-eraser mr-1"})," ",o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"sm:hidden",children:""})]}),o.jsxs("button",{type:"button",onClick:S,disabled:!N,className:`px-4 py-2 text-sm font-bold rounded-lg flex items-center shadow-sm transition-colors ${N?"bg-blue-600 text-white active:scale-95 hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[o.jsx("i",{className:"fa-solid fa-check mr-1"})," "]})]})]}),o.jsxs("div",{className:"relative flex justify-end items-center px-4 py-3 bg-gray-50",children:[o.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-red-600 text-sm font-bold flex items-center pointer-events-none whitespace-nowrap",children:[o.jsx("i",{className:"fa-solid fa-circle-exclamation mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"sm:hidden",children:""})]}),o.jsxs("label",{className:`
                  flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-bold cursor-pointer transition-colors shadow-sm select-none border-2 z-10 relative bg-white
                  ${W?"bg-blue-600 text-white border-blue-700 hover:bg-blue-700":"bg-green-600 text-white border-green-700 hover:bg-green-700"}
                `,children:[o.jsx("input",{type:"checkbox",className:"hidden",checked:W,onChange:w=>ie(w.target.checked)}),o.jsx("i",{className:`fa-solid ${W?"fa-pen-fancy":"fa-hand-pointer"} text-lg`}),o.jsx("span",{children:W?"":""})]})]})]}),o.jsx("div",{className:"flex-1 min-h-0 bg-gray-50 p-2 sm:p-4 pb-8 sm:pb-8 flex flex-col select-none",children:o.jsxs("div",{ref:m,className:"flex-1 min-h-0 w-full bg-white border-2 border-gray-300 shadow-inner rounded-xl overflow-hidden touch-none relative select-none",children:[o.jsxs("div",{className:"absolute inset-0 flex flex-col pointer-events-none select-none",children:[o.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-b-2 border-dashed border-gray-400 flex items-end justify-center pb-1",children:o.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})}),o.jsx("div",{className:"h-[50%] w-full flex items-center justify-center bg-transparent",children:!N&&o.jsxs("div",{className:"text-center text-gray-200",children:[o.jsx("span",{className:"text-4xl sm:text-6xl font-bold mb-2 block",children:""}),o.jsx("span",{className:"text-xs sm:text-lg font-bold",children:""}),o.jsx("div",{className:"sm:hidden text-red-300 text-[10px] mt-1 font-bold",children:""})]})}),o.jsx("div",{className:"h-[25%] w-full bg-gray-100 opacity-60 border-t-2 border-dashed border-gray-400 flex items-start justify-center pt-1",children:o.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 font-bold tracking-widest",children:""})})]}),K.width>0&&o.jsx("canvas",{ref:p,width:K.width,height:K.height,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},className:"absolute inset-0 z-10 cursor-crosshair block touch-none select-none",onPointerDown:Ie,onPointerMove:Ne,onPointerUp:R,onPointerLeave:R,onContextMenu:w=>w.preventDefault()})]})})]})})},e0=({data:i})=>{const t=r=>{const c=r.length;return c>30?"text-xl":c>22?"text-2xl":c>15?"text-3xl":c>10?"text-4xl":"text-5xl"},s=(r,c,h)=>{const m=[];for(let p=0;p<h;p++){const b=c[p];m.push(o.jsxs("tr",{className:"h-20",children:[o.jsx("td",{className:"border border-black text-center text-xl font-bold",children:r+p+1}),o.jsx("td",{className:"border border-black px-4 text-lg",children:b?b.company:""}),o.jsx("td",{className:"border border-black px-2 text-center",children:b?o.jsx("img",{src:b.signatureDataUrl,alt:b.name,className:"h-16 w-auto max-w-full object-contain mx-auto"}):null})]},r+p))}return o.jsx("div",{className:"print-page p-[15mm] flex flex-col h-full justify-between",children:o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-center mb-4",children:[i.month,"  (",r+1,"",r+h,")"]}),o.jsxs("table",{className:"w-full border-collapse border-2 border-black",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"h-10",children:[o.jsx("th",{className:"border border-black bg-gray-100 py-1 w-20 text-lg",children:""}),o.jsx("th",{className:"border border-black bg-gray-100 py-1 w-1/3 text-lg",children:""}),o.jsx("th",{className:"border border-black bg-gray-100 py-1 text-lg",children:" ()"})]})}),o.jsx("tbody",{children:m})]}),o.jsx("div",{className:"mt-2 text-right text-sm",children:r===0&&i.signatures.length<=10?` ${i.signatures.length} `:r===10?` ${i.signatures.length} `:""})]})})};return o.jsxs("div",{className:"font-serif text-black leading-tight",children:[o.jsxs("div",{className:"print-page relative p-[20mm] flex flex-col justify-between items-center",children:[o.jsx("div",{className:"w-full text-center mt-24",children:o.jsx("h1",{className:`${t(i.project)} font-bold mb-4 leading-normal`,children:i.project})}),o.jsx("div",{className:"text-center my-auto",children:o.jsx("h2",{className:"text-4xl font-bold border-b-4 border-double border-black pb-2 px-10 inline-block",children:""})}),o.jsxs("div",{className:"text-center mb-20",children:[o.jsxs("p",{className:"text-4xl font-bold mb-16",children:[i.month," "]}),o.jsx("div",{className:"flex items-center justify-center gap-2",children:o.jsxs("span",{className:"font-bold text-xl italic",style:{fontFamily:"sans-serif"},children:[o.jsx("span",{className:"bg-red-600 text-white px-1 mr-1",children:"K"}),i.contractor]})})]})]}),o.jsx("div",{className:"print-page p-[15mm]",children:o.jsxs("div",{className:"border-2 border-black p-6 h-full",children:[o.jsx("h3",{className:"text-2xl font-bold mb-8 text-center",children:""}),o.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-y-4 text-lg mb-8",children:[o.jsx("div",{className:"col-span-2 h-8"}),o.jsx("div",{className:"font-bold",children:""}),o.jsx("div",{children:new Date(i.date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}),o.jsx("div",{className:"font-bold",children:""}),o.jsx("div",{children:i.location}),o.jsx("div",{className:"font-bold",children:""}),o.jsxs("div",{children:[i.startTime,"  ",i.endTime," 15"]}),o.jsx("div",{className:"font-bold",children:""}),o.jsx("div",{children:i.instructor}),o.jsx("div",{className:"font-bold",children:""}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(1)"})," ",o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(2)"})," ",o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(3)"})," ",o.jsx("span",{children:i.topic})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(4)"})," ",o.jsx("span",{children:i.caution})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(5)"})," ",o.jsx("span",{children:"web"})]}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"w-8",children:"(6)"})," ",o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"mt-8",children:[o.jsx("h4",{className:"text-lg mb-4",children:""}),o.jsx("div",{className:"w-full h-[400px] border border-gray-300 flex items-center justify-center overflow-hidden bg-gray-50",children:i.photoUrl?o.jsx("img",{src:i.photoUrl,alt:"Evidence",className:"max-w-full max-h-full object-contain"}):o.jsx("div",{className:"text-gray-400",children:""})})]})]})}),s(0,i.signatures.slice(0,10),10),i.signatures.length>10&&s(10,i.signatures.slice(10,20),10)]})},t0=Symbol.for("constructDateFrom");function ib(i,t){return typeof i=="function"?i(t):i&&typeof i=="object"&&t0 in i?i[t0](t):i instanceof Date?new i.constructor(t):new Date(t)}function rb(i,t){return ib(i,i)}function Dr(i,t){return rb(i).getDay()}function lb(i,t){const s=rb(i),r=s.getFullYear(),c=s.getMonth(),h=ib(s,0);return h.setFullYear(r,c+1,0),h.setHours(0,0,0,0),h.getDate()}const dw=["","","","","","",""],mw=i=>{const t=i.getFullYear(),s=i.getMonth()+1,r=i.getDate();if(s===1&&r===1||s===2&&r===11||s===2&&r===23||s===4&&r===29||s===5&&r===3||s===5&&r===4||s===5&&r===5||s===8&&r===11||s===11&&r===3||s===11&&r===23)return!0;const c=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),h=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&r===c||s===9&&r===h},Eu=({data:i})=>{const t="border-2 border-black",s="border border-black",r="bg-cyan-100",c=ae.useMemo(()=>{const m=new Date(i.year,i.month-1,1),p=lb(m),b=[];for(let x=1;x<=p;x++){const N=new Date(i.year,i.month-1,x),C=Dr(N)===0,M=Dr(N)===6,F=mw(N);let W="",ie="";C||F?(W="text-red-600",ie="bg-red-50"):M&&(W="text-blue-600",ie="bg-blue-50"),b.push({date:x,dayOfWeek:dw[Dr(N)],colorClass:W,bgClass:ie})}return b},[i.year,i.month]),h=ae.useMemo(()=>{const m=c.length,p=Math.floor(m/5),b=m%5;return Array.from({length:5}).map((x,N)=>p+(N<b?1:0))},[c.length]);return o.jsxs("div",{className:"bg-white w-full h-full flex flex-col font-serif text-black p-[10mm]",style:{width:"297mm",height:"210mm"},children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[o.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[o.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[o.jsxs("span",{className:"text-xl",children:[" ",i.year-2018,"  ",i.month," "]}),o.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),o.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),i.project]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),i.location]})]})]}),o.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[o.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",i.createdDate,""]}),o.jsxs("table",{className:`w-full ${t} text-[10px] border-collapse`,children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[15%]"}),o.jsx("col",{className:"w-[25%]"}),o.jsx("col",{className:"w-[35%]"}),o.jsx("col",{className:"w-[25%]"})]}),o.jsx("thead",{children:o.jsxs("tr",{className:r,children:[o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${s} py-0.5 font-normal`,children:""})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.trainingDate}),o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.trainingLeader})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.councilDate}),o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.councilLeader})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.patrolDate}),o.jsx("td",{className:`${s} bg-gray-100`}),o.jsx("td",{className:`${s} bg-gray-100`})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${s} bg-gray-100`}),o.jsx("td",{className:`${s} bg-gray-100`}),o.jsx("td",{className:`${s} text-center`,children:""}),o.jsx("td",{className:`${s} text-center`,children:i.author})]})]})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:o.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[35mm]"}),c.map(m=>o.jsx("col",{},m.date)),o.jsx("col",{className:"w-[10mm]"})]}),o.jsxs("thead",{children:[o.jsxs("tr",{className:"h-[8mm]",children:[o.jsx("th",{className:`${s} ${r} font-normal`,children:""}),o.jsx("th",{className:`${s} ${r}`,colSpan:c.length,children:o.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[o.jsx("span",{children:""}),o.jsx("span",{children:""}),o.jsx("span",{children:""})]})}),o.jsx("th",{className:`${s} ${r} font-normal`,rowSpan:4,children:""})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),o.jsxs("th",{className:`${s} font-normal text-center`,colSpan:c.length,children:[i.month,""]})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:""}),c.map(m=>o.jsx("th",{className:`${s} font-normal text-center ${m.colorClass} ${m.bgClass}`,children:m.date},m.date))]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${s} bg-gray-50 font-normal`,children:" "}),c.map(m=>o.jsx("th",{className:`${s} font-normal text-center ${m.colorClass} ${m.bgClass}`,children:m.dayOfWeek},m.date))]})]}),o.jsxs("tbody",{children:[i.processRows.map(m=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${s} px-1 align-middle leading-none`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:m.category}),o.jsx("span",{className:"font-bold text-[9px] truncate",children:m.name})]})}),c.map(p=>{const b=m.bars.some(x=>p.date>=x.startDay&&p.date<=x.endDay);return o.jsx("td",{className:`${s} p-0 relative ${p.bgClass}`,children:b&&o.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"})},p.date)}),o.jsx("td",{className:`${s}`})]},m.id)),Array.from({length:Math.max(0,12-i.processRows.length)}).map((m,p)=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${s}`}),c.map(b=>o.jsx("td",{className:`${s} ${b.bgClass}`},b.date)),o.jsx("td",{className:`${s}`})]},`fill-${p}`))]}),o.jsxs("tfoot",{children:[o.jsxs("tr",{className:"h-[12mm]",children:[o.jsx("td",{className:`${s} ${r} text-center font-normal`,children:""}),h.map((m,p)=>o.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:i.predictions[p]},p)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[18mm]",children:[o.jsxs("td",{className:`${s} ${r} text-center font-normal leading-tight`,children:["",o.jsx("br",{}),""]}),h.map((m,p)=>o.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:i.countermeasures[p]},p)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${s} ${r} text-center font-normal leading-tight`,children:""}),h.map((m,p)=>o.jsx("td",{colSpan:m,className:`${s} align-top p-1 text-[9px]`,children:i.inspectionItems[p]},p)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${s} ${r} text-center font-normal`,children:""}),c.map(m=>o.jsx("td",{className:`${s} p-0 text-center text-[8px]`,children:i.safetyDuty[m.date]},m.date)),o.jsx("td",{className:`${s}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${s} ${r} text-center font-normal`,children:""}),o.jsx("td",{colSpan:c.length+1,className:`${s} p-1 text-[10px]`,children:i.lastMonthReflection})]})]})]})})]})},n0=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,gw=({title:i,items:t,onUpdate:s,onDeleteRequest:r})=>{const[c,h]=ae.useState(""),m=()=>{c.trim()&&(s([...t,c.trim()]),h(""))};return o.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg bg-white shadow-sm break-inside-avoid",children:[o.jsxs("h3",{className:"font-bold mb-3 text-lg text-gray-800 border-b pb-2 flex justify-between items-center",children:[i,o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[t.length,""]})]}),o.jsxs("ul",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[t.map((p,b)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:p}),o.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),r(b,p)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},b)),t.length===0&&o.jsx("li",{className:"text-gray-400 text-sm italic text-center py-2",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm bg-white text-black outline-none",placeholder:"...",value:c,onChange:p=>h(p.target.value),onKeyDown:p=>p.key==="Enter"&&m()}),o.jsxs("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 whitespace-nowrap shadow-sm",children:[o.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})]})},pw={projects:"",contractors:"",supervisors:"",locations:"",goals:"",processes:"",topics:"",cautions:"",subcontractors:""},yw=({initialData:i,initialDraftId:t,onBackToMenu:s})=>{const[r,c]=ae.useState(1),[h,m]=ae.useState(i||X_),[p,b]=ae.useState(t||null),[x,N]=ae.useState(ct),[C,M]=ae.useState(!1),[F,W]=ae.useState(!1),[ie,K]=ae.useState("idle"),[pe,ge]=ae.useState(!1),[de,xe]=ae.useState(null),[Ie,Ne]=ae.useState(1),[R,j]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[S,V]=ae.useState(!1),[w,I]=ae.useState([]),[A,Se]=ae.useState(null);ae.useEffect(()=>{(async()=>{try{const _e=await Bu();N(_e)}catch(_e){console.error("",_e)}})()},[]),ae.useEffect(()=>{if(!F)return;const G=()=>{const ft=window.innerWidth-40;let Pe=1;ft<794&&(Pe=ft/794),Ne(Pe)};return window.addEventListener("resize",G),G(),()=>window.removeEventListener("resize",G)},[F]);const Ce=(G,_e)=>{m(Qe=>({...Qe,[G]:_e})),K("idle"),ge(!0)},H=()=>c(G=>Math.min(G+1,3)),te=()=>c(G=>Math.max(G-1,1)),he=async G=>{if(G.target.files&&G.target.files[0]){const _e=await fw(G.target.files[0]);Ce("photoUrl",_e)}},re=async()=>{K("saving");try{const G=await $a(p,"SAFETY_TRAINING",h);b(G),K("saved"),ge(!1),setTimeout(()=>K("idle"),2e3)}catch(G){console.error(G),alert(""),K("idle")}},Re=(G,_e)=>{const Qe={id:Date.now().toString(),company:G,name:"Signed",signatureDataUrl:_e};m(ft=>({...ft,signatures:[...ft.signatures,Qe]})),K("idle"),ge(!0)},E=async()=>{K("saving");try{const G=await $a(p,"SAFETY_TRAINING",h);b(G),K("saved"),ge(!1),setTimeout(()=>K("idle"),2e3);const _e=await ab(h.project);if(_e.length===0){alert(`${h.project}

`);return}I(_e),V(!0)}catch{alert(""),K("idle")}},k=G=>{Se(G.data),V(!1),W(!0)},le=()=>{const G=document.title;document.title=`_${h.project}_${h.month}`,window.print(),document.title=G},ue=()=>{pe?j({isOpen:!0,message:`
`,onConfirm:()=>{j(G=>({...G,isOpen:!1})),s()}}):s()},se=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 1: "}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none",value:h.project,onChange:G=>Ce("project",G.target.value),children:x.projects.map(G=>o.jsx("option",{value:G,children:G},G))})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none",value:h.month,onChange:G=>Ce("month",parseInt(G.target.value)),children:Array.from({length:12},(G,_e)=>_e+1).map(G=>o.jsxs("option",{value:G,children:[G,""]},G))})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white text-black outline-none",value:h.contractor,onChange:G=>Ce("contractor",G.target.value),children:x.contractors.map(G=>o.jsx("option",{value:G,children:G},G))})]})]}),B=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 2: "}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded bg-white text-black outline-none",value:h.date,onChange:G=>Ce("date",G.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded bg-white text-black outline-none",value:h.location,onChange:G=>Ce("location",G.target.value),children:x.locations.map(G=>o.jsx("option",{value:G,children:G},G))})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("input",{type:"time",className:"w-full p-2 border border-gray-300 rounded bg-white text-black outline-none",value:h.startTime,onChange:G=>Ce("startTime",G.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("input",{type:"time",className:"w-full p-2 border border-gray-300 rounded bg-white text-black outline-none",value:h.endTime,onChange:G=>Ce("endTime",G.target.value)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label text-sm font-bold text-gray-700",children:""}),o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded bg-white text-black outline-none",value:h.instructor,onChange:G=>Ce("instructor",G.target.value),children:x.supervisors.map(G=>o.jsx("option",{value:G,children:G},G))})]}),o.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg space-y-4",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-2",children:""}),o.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 space-y-2 py-1",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(1)"}),o.jsx("span",{children:" ()"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(2)"}),o.jsx("span",{children:" ()"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(3)"}),o.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm",value:h.topic,onChange:G=>Ce("topic",G.target.value),children:x.topics.map(G=>o.jsx("option",{value:G,children:G},G))})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-sm text-gray-700 w-8 shrink-0 flex justify-center bg-white rounded-full h-6 items-center border border-gray-200 shadow-sm",children:"(4)"}),o.jsx("select",{className:"flex-1 p-2 border border-gray-300 rounded bg-white text-black outline-none text-sm",value:h.caution,onChange:G=>Ce("caution",G.target.value),children:x.cautions.map(G=>o.jsx("option",{value:G,children:G},G))})]})]}),o.jsxs("div",{className:"text-sm text-gray-600 pl-2 border-l-4 border-gray-300 mt-2 space-y-2 py-1",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(5)"}),o.jsx("span",{children:"web ()"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-bold w-8",children:"(6)"}),o.jsx("span",{children:" ()"})]})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsxs("label",{className:"label font-bold flex justify-between text-gray-700",children:[o.jsx("span",{children:" ()"}),o.jsx("span",{className:"text-xs font-normal bg-red-100 text-red-600 px-2 rounded border border-red-200",children:""})]}),o.jsx("input",{type:"file",accept:"image/*",className:"w-full mt-2 text-sm text-gray-500",onChange:he}),h.photoUrl&&o.jsx("div",{className:"mt-3",children:o.jsx("img",{src:h.photoUrl,alt:"preview",className:"h-40 w-full object-contain border bg-gray-50 rounded"})})]})]}),[oe,be]=ae.useState("");ae.useEffect(()=>{x.subcontractors.length>0&&!oe&&be(x.subcontractors[0])},[x.subcontractors,oe]);const[we,bt]=ae.useState(0),_t=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-blue-600 pl-3",children:"STEP 3: "}),o.jsxs("div",{className:"bg-white p-6 shadow rounded-lg border border-gray-200",children:[o.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:""}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-50 text-lg text-black outline-none",value:oe,onChange:G=>be(G.target.value),children:x.subcontractors.map(G=>o.jsx("option",{value:G,children:G},G))})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2 text-center",children:" ()"}),o.jsx("div",{className:"w-full",children:o.jsx(dm,{onSave:G=>{Re(oe,G)},onClear:()=>{},lineWidth:6,keepOpenOnSave:!0},we)})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("h3",{className:"font-bold text-gray-700 mb-2",children:[" (",h.signatures.length,")"]}),o.jsxs("div",{className:"bg-white border rounded divide-y max-h-60 overflow-y-auto",children:[h.signatures.length===0&&o.jsx("div",{className:"p-4 text-center text-gray-400",children:""}),h.signatures.map((G,_e)=>o.jsxs("div",{className:"p-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o.jsx("span",{className:"w-6 h-6 shrink-0 rounded-full bg-gray-200 text-xs flex items-center justify-center text-gray-700",children:_e+1}),o.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-bold text-gray-700 truncate flex-1",children:G.company}),o.jsx("div",{className:"h-10 border border-gray-200 bg-gray-50 rounded cursor-pointer hover:border-blue-400 transition-colors flex items-center justify-center px-2 shrink-0",onClick:()=>xe(G.signatureDataUrl),title:"",children:o.jsx("img",{src:G.signatureDataUrl,alt:"sig",className:"h-full object-contain"})})]})]}),o.jsx("button",{onClick:()=>{j({isOpen:!0,message:`${_e+1}`,onConfirm:()=>{m(Qe=>({...Qe,signatures:Qe.signatures.filter(ft=>ft.id!==G.id)})),j(Qe=>({...Qe,isOpen:!1})),ge(!0)}})},className:"ml-3 text-red-400 hover:text-red-600 p-2 shrink-0",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},G.id))]})]})]}),Yt=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>M(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:Object.keys(x).map(G=>{const _e=G,Qe=pw[G]||G;return o.jsx(gw,{title:Qe,items:x[_e],onUpdate:async ft=>{const Pe={...x,[_e]:ft};N(Pe),await La(Pe)},onDeleteRequest:(ft,Pe)=>{j(G==="projects"?{isOpen:!0,message:`${Pe}



`,onConfirm:async()=>{await fm(Pe);const Ze=[...x[G]];Ze.splice(ft,1);const Bt={...x,[G]:Ze};N(Bt),await La(Bt),j(Xa=>({...Xa,isOpen:!1}))}}:{isOpen:!0,message:`${Pe}`,onConfirm:async()=>{const Ze=[...x[G]];Ze.splice(ft,1);const Bt={...x,[G]:Ze};N(Bt),await La(Bt),j(Xa=>({...Xa,isOpen:!1}))}})}},G)})})]}),un=()=>o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500",children:""}),o.jsxs("button",{onClick:le,className:"px-6 py-2 bg-green-600 rounded font-bold hover:bg-green-500 shadow-md flex items-center",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${Ie})`,transformOrigin:"top center"},children:o.jsx(e0,{data:h})}),A&&o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${Ie*.7})`,transformOrigin:"top center"},children:o.jsx(Eu,{data:A})})]})]}),ne=()=>S?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",h.project,""]}),o.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:w.map(G=>{const _e=G.data;return o.jsxs("button",{onClick:()=>k(G),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-blue-800",children:[_e.month," "]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(G.lastModified).toLocaleString("ja-JP")]})]}),o.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},G.id)})}),o.jsx("button",{onClick:()=>V(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null;return C?o.jsxs(o.Fragment,{children:[" ",Yt()," ",o.jsx(n0,{isOpen:R.isOpen,message:R.message,onConfirm:R.onConfirm,onCancel:()=>j(G=>({...G,isOpen:!1}))})," "]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:ue,className:"text-white hover:text-gray-300",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-helmet-safety mr-2"}),""]})]}),o.jsxs("button",{onClick:()=>M(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),o.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[o.jsx("span",{className:r>=1?"text-blue-600":"",children:"STEP 1"}),o.jsx("span",{className:r>=2?"text-blue-600":"",children:"STEP 2"}),o.jsx("span",{className:r>=3?"text-blue-600":"",children:"STEP 3"})]}),o.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:o.jsx("div",{className:"bg-blue-600 h-full transition-all duration-300",style:{width:`${r*33.3}%`}})})]}),o.jsxs("main",{className:`mx-auto p-4 bg-white shadow-lg rounded-lg min-h-[60vh] transition-all duration-300 ${r===3?"max-w-3xl":"max-w-md"}`,children:[r===1&&se(),r===2&&B(),r===3&&_t()]}),o.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:te,disabled:r===1,className:`px-4 py-3 rounded-lg font-bold ${r===1?"text-gray-300":"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,children:""}),o.jsxs("button",{onClick:re,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center transition-colors",children:[o.jsx("i",{className:`fa-solid ${ie==="saved"?"fa-check":"fa-save"} mr-2`}),ie==="saved"?"":""]})]}),r<3?o.jsxs("button",{onClick:H,className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-bold shadow hover:bg-blue-700 flex items-center",children:[" ",o.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):o.jsxs("button",{onClick:E,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),de&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>xe(null),children:[o.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:o.jsx("img",{src:de,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),o.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),F&&un(),ne(),o.jsx(n0,{isOpen:R.isOpen,message:R.message,onConfirm:R.onConfirm,onCancel:()=>j(G=>({...G,isOpen:!1}))}),o.jsxs("div",{className:"hidden print:block",children:[o.jsx(e0,{data:h}),A&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),o.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:o.jsx(Eu,{data:A})})]})]})]})},s0=({data:i})=>{var x,N,C,M,F,W,ie,K,pe,ge,de,xe,Ie,Ne,R,j,S,V,w,I,A,Se,Ce,H;const t="border border-black",s="bg-green-100 text-center font-bold py-1",r=te=>{const he=new Date(te);return`${he.getFullYear()}/${he.getMonth()+1}/${he.getDate()}`},c=Math.max(10,i.subcontractorAttendees.length),h=Array.from({length:c-i.subcontractorAttendees.length}),m=te=>{const he=te.length;return he>45?"text-lg":he>35?"text-xl":he>25?"text-2xl":he>15?"text-3xl":"text-4xl"},p=te=>te?te===""?"":te===""?"":te:"",b=te=>{const he=p(te);if(!he)return"";const re=he.length;return re>10?"text-xs tracking-tighter":re>8?"text-sm":""};return o.jsxs("div",{className:"font-serif text-black leading-tight",children:[o.jsxs("div",{className:"print-page relative p-[25mm] flex flex-col justify-between items-center text-center",children:[o.jsxs("div",{className:"mt-16 text-3xl font-normal tracking-widest",children:["",i.count,""]}),o.jsx("div",{className:"mt-20 px-4 w-full flex items-center justify-center min-h-[4rem]",children:o.jsx("h1",{className:`${m(i.project)} font-normal mb-4 leading-normal whitespace-nowrap`,children:i.project})}),o.jsx("div",{className:"my-auto",children:o.jsx("h2",{className:"text-5xl font-normal tracking-[0.2em] leading-loose",children:"      "})}),o.jsxs("div",{className:"mb-24 w-full",children:[o.jsxs("div",{className:"text-2xl mb-16",children:[" ",r(i.date)]}),o.jsx("div",{className:"flex items-center justify-center gap-3",children:o.jsxs("span",{className:"font-bold text-2xl italic flex items-center",style:{fontFamily:"sans-serif"},children:[o.jsx("span",{className:"bg-red-600 text-white px-2 py-0.5 mr-2 skew-x-[-12deg] inline-block",children:"K"}),i.contractor]})})]})]}),o.jsxs("div",{className:"print-page p-[30mm] flex flex-col items-center",children:[o.jsx("div",{className:"mt-20 mb-24 border-b-2 border-black px-12 pb-2",children:o.jsx("h2",{className:"text-4xl font-normal tracking-[0.2em] ml-2",children:""})}),o.jsxs("div",{className:"w-full max-w-lg space-y-12 text-2xl",children:[o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"1"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"2"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"3"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"4"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"5"}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("span",{className:"w-16 text-right mr-8 font-serif",children:"6"}),o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"print-page p-[20mm]",children:[o.jsxs("div",{className:"flex justify-between items-end mb-4 px-2",children:[o.jsxs("div",{className:"text-xl font-bold",children:[" ",i.count," "]}),o.jsx("h3",{className:"text-2xl font-bold text-center flex-1",children:""}),o.jsx("div",{className:"w-16"})," "]}),o.jsx("table",{className:`w-full border-collapse mb-6 ${t}`,children:o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{className:`${t} p-2 w-32 text-center`,children:"   "}),o.jsx("td",{className:`${t} p-2`,children:" "})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${t} p-2 text-center`,children:"   "}),o.jsx("td",{className:`${t} p-2`,children:r(i.date)})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${t} p-2 text-center`,children:""}),o.jsx("td",{className:`${t} p-2`,children:i.location})]})]})}),o.jsx("div",{className:"mb-6",children:o.jsxs("table",{className:`w-full border-collapse ${t}`,children:[o.jsxs("thead",{children:[o.jsx("tr",{children:o.jsx("th",{className:`${t} ${s}`,colSpan:4,children:""})}),o.jsxs("tr",{children:[o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/4 py-1 font-normal`,children:""})]})]}),o.jsxs("tbody",{children:[o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${b((x=i.gcAttendees[0])==null?void 0:x.role)}`,children:p((N=i.gcAttendees[0])==null?void 0:N.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(C=i.gcAttendees[0])==null?void 0:C.name}),o.jsx("td",{className:`${t} px-2 align-middle ${b((M=i.gcAttendees[1])==null?void 0:M.role)}`,children:p((F=i.gcAttendees[1])==null?void 0:F.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(W=i.gcAttendees[1])==null?void 0:W.name})]}),o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${b((ie=i.gcAttendees[2])==null?void 0:ie.role)}`,children:p((K=i.gcAttendees[2])==null?void 0:K.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(pe=i.gcAttendees[2])==null?void 0:pe.name}),o.jsx("td",{className:`${t} px-2 align-middle ${b((ge=i.gcAttendees[3])==null?void 0:ge.role)}`,children:p((de=i.gcAttendees[3])==null?void 0:de.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(xe=i.gcAttendees[3])==null?void 0:xe.name})]}),o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${b((Ie=i.gcAttendees[4])==null?void 0:Ie.role)}`,children:p((Ne=i.gcAttendees[4])==null?void 0:Ne.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(R=i.gcAttendees[4])==null?void 0:R.name}),o.jsx("td",{className:`${t} px-2 align-middle ${b((j=i.gcAttendees[5])==null?void 0:j.role)}`,children:p((S=i.gcAttendees[5])==null?void 0:S.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(V=i.gcAttendees[5])==null?void 0:V.name})]}),o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle ${b((w=i.gcAttendees[6])==null?void 0:w.role)}`,children:p((I=i.gcAttendees[6])==null?void 0:I.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(A=i.gcAttendees[6])==null?void 0:A.name}),o.jsx("td",{className:`${t} px-2 align-middle ${b((Se=i.gcAttendees[7])==null?void 0:Se.role)}`,children:p((Ce=i.gcAttendees[7])==null?void 0:Ce.role)}),o.jsx("td",{className:`${t} px-2 align-middle text-center text-lg`,children:(H=i.gcAttendees[7])==null?void 0:H.name})]})]})]})}),o.jsx("div",{children:o.jsxs("table",{className:`w-full border-collapse ${t}`,children:[o.jsxs("thead",{children:[o.jsx("tr",{children:o.jsx("th",{className:`${t} ${s}`,colSpan:3,children:"              "})}),o.jsxs("tr",{children:[o.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""}),o.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:"     "}),o.jsx("th",{className:`${t} w-1/3 py-1 font-normal`,children:""})]})]}),o.jsxs("tbody",{children:[i.subcontractorAttendees.map(te=>o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t} px-2 align-middle`,children:te.company}),o.jsx("td",{className:`${t} px-2 align-middle`,children:te.role}),o.jsx("td",{className:`${t} px-2 align-middle text-center`,children:te.signatureDataUrl?o.jsx("img",{src:te.signatureDataUrl,alt:te.name,className:"h-10 mx-auto object-contain"}):te.name})]},te.id)),h.map((te,he)=>o.jsxs("tr",{className:"h-12",children:[o.jsx("td",{className:`${t}`}),o.jsx("td",{className:`${t}`}),o.jsx("td",{className:`${t}`})]},`blank-${he}`))]})]})})]})]})},a0=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,xw=({title:i,items:t,onUpdate:s,onDeleteRequest:r})=>{const[c,h]=ae.useState(""),m=()=>{c.trim()&&(s([...t,c.trim()]),h(""))};return o.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg bg-white shadow-sm break-inside-avoid",children:[o.jsxs("h3",{className:"font-bold mb-3 text-lg text-gray-800 border-b pb-2 flex justify-between items-center",children:[i,o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[t.length,""]})]}),o.jsxs("ul",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[t.map((p,b)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:p}),o.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),r(b,p)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},b)),t.length===0&&o.jsx("li",{className:"text-gray-400 text-sm italic text-center py-2",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm bg-white text-black focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"...",value:c,onChange:p=>h(p.target.value),onKeyDown:p=>p.key==="Enter"&&m()}),o.jsxs("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 whitespace-nowrap shadow-sm transition-colors",children:[o.jsx("i",{className:"fa-solid fa-plus mr-1"}),""]})]})]})},vw={projects:"",contractors:"",supervisors:"",locations:"",subcontractors:""},bw=({initialData:i,initialDraftId:t,onBackToMenu:s})=>{const[r,c]=ae.useState(1),[h,m]=ae.useState(i||Z_),[p,b]=ae.useState(t||null),[x,N]=ae.useState(ct),[C,M]=ae.useState(!1),[F,W]=ae.useState(!1),[ie,K]=ae.useState("idle"),[pe,ge]=ae.useState(1),[de,xe]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[Ie,Ne]=ae.useState(!1),[R,j]=ae.useState(null),[S,V]=ae.useState(""),[w,I]=ae.useState(""),[A,Se]=ae.useState(0),[Ce,H]=ae.useState(!1),[te,he]=ae.useState([]),[re,Re]=ae.useState(null);ae.useEffect(()=>{(async()=>{try{const G=await Bu();N(G),G.subcontractors.length>0&&V(G.subcontractors[0])}catch(G){console.error("",G)}})()},[]),ae.useEffect(()=>{x.subcontractors.length>0&&!x.subcontractors.includes(S)&&S!==""&&V(x.subcontractors[0])},[x.subcontractors,S]),ae.useEffect(()=>{if(!F)return;const ne=()=>{const Qe=window.innerWidth-40;ge(Qe<794?Qe/794:1)};return window.addEventListener("resize",ne),ne(),()=>window.removeEventListener("resize",ne)},[F]);const E=(ne,G)=>{m(_e=>({..._e,[ne]:G})),K("idle"),Ne(!0)},k=(ne,G,_e)=>{const Qe=[...h.gcAttendees];Qe[ne]||(Qe[ne]={role:"",name:""}),Qe[ne][G]=_e,E("gcAttendees",Qe)},le=ne=>{const G={id:Date.now().toString(),company:S,role:w,name:"Signed",signatureDataUrl:ne};m(_e=>({..._e,subcontractorAttendees:[..._e.subcontractorAttendees,G]})),Se(_e=>_e+1),K("idle"),Ne(!0)},ue=async()=>{K("saving");try{const ne=await $a(p,"DISASTER_COUNCIL",h);b(ne),K("saved"),Ne(!1),setTimeout(()=>K("idle"),2e3)}catch(ne){console.error(ne),alert(""),K("idle")}},se=async()=>{K("saving");try{const ne=await $a(p,"DISASTER_COUNCIL",h);b(ne),K("saved"),Ne(!1),setTimeout(()=>K("idle"),2e3);const G=await ab(h.project);if(G.length===0){alert(`${h.project}

`);return}he(G),H(!0)}catch{alert(""),K("idle")}},B=ne=>{Re(ne.data),H(!1),W(!0)},oe=()=>{const G=new Date(h.date).getMonth()+1,_e=document.title;document.title=`_${h.project}_${G}`,window.print(),document.title=_e},be=()=>{Ie?xe({isOpen:!0,message:`
`,onConfirm:()=>{xe(ne=>({...ne,isOpen:!1})),s()}}):s()},we=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>M(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:Object.keys(x).map(ne=>{const G=ne,_e=vw[ne]||ne;return o.jsx(xw,{title:_e,items:x[G],onUpdate:async Qe=>{const ft={...x,[G]:Qe};N(ft),await La(ft)},onDeleteRequest:(Qe,ft)=>{xe(ne==="projects"?{isOpen:!0,message:`${ft}



`,onConfirm:async()=>{await fm(ft);const Pe=[...x[ne]];Pe.splice(Qe,1);const Ze={...x,[ne]:Pe};N(Ze),await La(Ze),xe(Bt=>({...Bt,isOpen:!1}))}}:{isOpen:!0,message:`${ft}`,onConfirm:async()=>{const Pe=[...x[ne]];Pe.splice(Qe,1);const Ze={...x,[ne]:Pe};N(Ze),await La(Ze),xe(Bt=>({...Bt,isOpen:!1}))}})}},ne)})})]}),bt=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 1: "}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-gray-600",children:""}),o.jsx("select",{className:"w-24 p-2 border border-gray-300 rounded text-center text-lg bg-white",value:h.count,onChange:ne=>E("count",parseInt(ne.target.value)||0),children:Array.from({length:100},(ne,G)=>G+1).map(ne=>o.jsx("option",{value:ne,children:ne},ne))}),o.jsx("span",{className:"text-gray-600",children:""})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white",value:h.project,onChange:ne=>E("project",ne.target.value),children:x.projects.map(ne=>o.jsx("option",{value:ne,children:ne},ne))})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("input",{type:"date",className:"w-full p-3 border border-gray-300 rounded-lg bg-white",value:h.date,onChange:ne=>E("date",ne.target.value)})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsx("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white",value:h.contractor,onChange:ne=>E("contractor",ne.target.value),children:x.contractors.map(ne=>o.jsx("option",{value:ne,children:ne},ne))})]})]}),_t=()=>o.jsxs("div",{className:"space-y-8",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-green-600 pl-3",children:"STEP 2: "}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-3",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded bg-white",value:h.location,onChange:ne=>E("location",ne.target.value),children:x.locations.map(ne=>o.jsx("option",{value:ne,children:ne},ne))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500",children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"time",className:"p-2 border rounded",value:h.startTime,onChange:ne=>E("startTime",ne.target.value)}),o.jsx("span",{children:""}),o.jsx("input",{type:"time",className:"p-2 border rounded",value:h.endTime,onChange:ne=>E("endTime",ne.target.value)})]})]})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-3 border-b pb-1",children:""}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.gcAttendees.map((ne,G)=>o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{type:"text",placeholder:"",className:"w-1/3 p-2 border border-gray-300 rounded text-sm bg-gray-50",value:ne.role,onChange:_e=>k(G,"role",_e.target.value)}),o.jsxs("select",{className:"flex-1 p-2 border border-gray-300 rounded text-sm",value:ne.name,onChange:_e=>k(G,"name",_e.target.value),children:[o.jsx("option",{value:"",children:"()"}),x.supervisors.map(_e=>o.jsx("option",{value:_e,children:_e},_e))]})]},G))})]}),o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold text-gray-700 mb-3 border-b pb-1",children:""}),o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-gray-300 rounded",value:S,onChange:ne=>V(ne.target.value),children:x.subcontractors.map(ne=>o.jsx("option",{value:ne,children:ne},ne))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded",value:w,onChange:ne=>I(ne.target.value)})]})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 text-center",children:" ()"}),o.jsx(dm,{onSave:le,onClear:()=>{},lineWidth:6},A)]})]}),o.jsx("div",{className:"divide-y border rounded max-h-48 overflow-y-auto",children:h.subcontractorAttendees.map((ne,G)=>o.jsxs("div",{className:"p-2 flex justify-between items-center bg-white",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-bold",children:ne.company}),o.jsx("div",{className:"text-xs text-gray-500",children:ne.role})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 cursor-pointer hover:opacity-80 transition-opacity border border-transparent hover:border-blue-300 rounded px-1",onClick:()=>j(ne.signatureDataUrl),title:"",children:o.jsx("img",{src:ne.signatureDataUrl,alt:"sig",className:"h-full object-contain"})}),o.jsx("button",{onClick:()=>{const _e=h.subcontractorAttendees.filter(Qe=>Qe.id!==ne.id);E("subcontractorAttendees",_e)},className:"text-red-400 hover:text-red-600",children:o.jsx("i",{className:"fa-solid fa-trash"})})]})]},ne.id))})]})]}),Yt=()=>o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-gray-600 rounded",children:""}),o.jsxs("button",{onClick:oe,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 flex flex-col items-center gap-10 bg-gray-800",children:[o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"794px",transform:`scale(${pe})`,transformOrigin:"top center"},children:o.jsx(s0,{data:h})}),re&&o.jsx("div",{className:"bg-white shadow-2xl",style:{width:"1123px",height:"794px",transform:`scale(${pe*.7})`,transformOrigin:"top center"},children:o.jsx(Eu,{data:re})})]})]}),un=()=>Ce?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["",h.project,""]}),o.jsx("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto",children:te.map(ne=>{const G=ne.data;return o.jsxs("button",{onClick:()=>B(ne),className:"w-full text-left border rounded p-3 hover:bg-blue-50 transition-colors flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"font-bold text-blue-800",children:[G.month," "]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[": ",new Date(ne.lastModified).toLocaleString("ja-JP")]})]}),o.jsx("i",{className:"fa-solid fa-chevron-right text-gray-400"})]},ne.id)})}),o.jsx("button",{onClick:()=>H(!1),className:"w-full py-2 bg-gray-200 text-gray-700 rounded font-bold",children:""})]})}):null;return C?o.jsxs(o.Fragment,{children:[" ",we()," ",o.jsx(a0,{isOpen:de.isOpen,message:de.message,onConfirm:de.onConfirm,onCancel:()=>xe(ne=>({...ne,isOpen:!1}))})," "]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:be,className:"text-white hover:text-gray-300",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-users-rectangle mr-2"}),""]})]}),o.jsxs("button",{onClick:()=>M(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),o.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[o.jsx("span",{className:r>=1?"text-green-600":"",children:"STEP 1"}),o.jsx("span",{className:r>=2?"text-green-600":"",children:"STEP 2"})]}),o.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:o.jsx("div",{className:"bg-green-600 h-full transition-all duration-300",style:{width:`${r*50}%`}})})]}),o.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg max-w-lg min-h-[60vh]",children:[r===1&&bt(),r===2&&_t()]}),o.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-md z-20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>c(ne=>Math.max(1,ne-1)),disabled:r===1,className:`px-4 py-3 rounded-lg font-bold ${r===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),o.jsxs("button",{onClick:ue,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center",children:[o.jsx("i",{className:`fa-solid ${ie==="saved"?"fa-check":"fa-save"} mr-2`}),ie==="saved"?"":""]})]}),r===1?o.jsxs("button",{onClick:()=>c(2),className:"px-8 py-3 bg-green-600 text-white rounded-lg font-bold shadow hover:bg-green-700 flex items-center",children:[" ",o.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):o.jsxs("button",{onClick:se,className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),R&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>j(null),children:[o.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:o.jsx("img",{src:R,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),o.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),F&&Yt(),un(),o.jsx(a0,{isOpen:de.isOpen,message:de.message,onConfirm:de.onConfirm,onCancel:()=>xe({...de,isOpen:!1})}),o.jsxs("div",{className:"hidden print:block",children:[o.jsx(s0,{data:h}),re&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{pageBreakBefore:"always",breakBefore:"page"}}),o.jsx("div",{style:{width:"297mm",height:"210mm",transform:"rotate(90deg) translate(0, -210mm)",transformOrigin:"top left",position:"absolute",overflow:"hidden"},children:o.jsx(Eu,{data:re})})]})]})]})},i0=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,_w=({title:i,items:t,onUpdate:s,onDeleteRequest:r})=>{const[c,h]=ae.useState(""),m=()=>{c.trim()&&(s([...t,c.trim()]),h(""))};return o.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg bg-white shadow-sm break-inside-avoid",children:[o.jsxs("h3",{className:"font-bold mb-3 text-lg text-gray-800 border-b pb-2 flex justify-between items-center",children:[i,o.jsxs("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[t.length,""]})]}),o.jsx("ul",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:t.map((p,b)=>o.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded hover:bg-gray-100 transition-colors",children:[o.jsx("span",{className:"text-sm text-gray-800 break-all mr-2",children:p}),o.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),r(b,p)},className:"text-gray-400 hover:text-red-600 p-2 rounded hover:bg-red-50 transition-colors",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},b))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded px-3 py-2 text-sm outline-none",placeholder:"...",value:c,onChange:p=>h(p.target.value),onKeyDown:p=>p.key==="Enter"&&m()}),o.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700 whitespace-nowrap",children:o.jsx("i",{className:"fa-solid fa-plus"})})]})]})},Ew={projects:"",supervisors:"",locations:""},Tw=["projects","supervisors","locations"],Nw=["","","","","","",""],ww=i=>{const t=i.getFullYear(),s=i.getMonth()+1,r=i.getDate();if(s===1&&r===1||s===2&&r===11||s===2&&r===23||s===4&&r===29||s===5&&r===3||s===5&&r===4||s===5&&r===5||s===8&&r===11||s===11&&r===3||s===11&&r===23)return!0;const c=(p,b,x)=>{const N=new Date(p,b-1,1).getDay();return 1+(N===1?0:(8-N)%7)+(x-1)*7};if(s===1&&r===c(t,1,2)||s===7&&r===c(t,7,3)||s===9&&r===c(t,9,3)||s===10&&r===c(t,10,2))return!0;const h=Math.floor(20.8431+.242194*(t-1980)-Math.floor((t-1980)/4)),m=Math.floor(23.2488+.242194*(t-1980)-Math.floor((t-1980)/4));return s===3&&r===h||s===9&&r===m},jw=({initialData:i,initialDraftId:t,onBackToMenu:s})=>{const[r,c]=ae.useState(i||J_),[h,m]=ae.useState(t||null),[p,b]=ae.useState(ct),[x,N]=ae.useState(!1),[C,M]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[F,W]=ae.useState(!1),[ie,K]=ae.useState(null),[pe,ge]=ae.useState(null),[de,xe]=ae.useState("idle"),[Ie,Ne]=ae.useState(1),[R,j]=ae.useState(!1);ae.useEffect(()=>{(async()=>{try{const B=await Bu();b(B)}catch(B){console.error("",B)}})()},[]),ae.useEffect(()=>{const se=()=>{let _t=(window.innerWidth-40)/1122.6599999999999;_t>1.2&&(_t=1.2),Ne(_t)};return window.addEventListener("resize",se),se(),()=>window.removeEventListener("resize",se)},[]);const S=ae.useMemo(()=>{const se=new Date(r.year,r.month-1,1),B=lb(se),oe=[];for(let be=1;be<=B;be++){const we=new Date(r.year,r.month-1,be),bt=Dr(we)===0,_t=Dr(we)===6,Yt=ww(we);let un="",ne="";bt||Yt?(un="text-red-600",ne="bg-red-50"):_t&&(un="text-blue-600",ne="bg-blue-50"),oe.push({date:be,dayOfWeek:Nw[Dr(we)],colorClass:un,bgClass:ne})}return oe},[r.year,r.month]),V=ae.useMemo(()=>{const se=S.length,B=Math.floor(se/5),oe=se%5;return Array.from({length:5}).map((be,we)=>B+(we<oe?1:0))},[S.length]),w=se=>{c(B=>({...B,...se})),xe("idle"),j(!0)},I=async()=>{xe("saving");try{const se=await $a(h,"SAFETY_PLAN",r);m(se),xe("saved"),j(!1),setTimeout(()=>xe("idle"),2e3)}catch(se){console.error(se),alert(""),xe("idle")}},A=async()=>{xe("saving");try{const se=await $a(h,"SAFETY_PLAN",r);m(se),xe("saved"),j(!1),setTimeout(()=>xe("idle"),2e3),setTimeout(()=>window.print(),100)}catch{alert(""),xe("idle")}},Se=()=>{R?M({isOpen:!0,message:`
`,onConfirm:()=>{M(se=>({...se,isOpen:!1})),s()}}):s()},Ce=(se,B)=>{if(ie===null)K(se),ge(B);else if(ie!==se)K(se),ge(B);else{if(pe!==null){const oe=Math.min(pe,B),be=Math.max(pe,B),we=r.processRows.map(bt=>{if(bt.id===se){const _t=bt.bars.filter(Yt=>Yt.endDay<oe||Yt.startDay>be);return{...bt,bars:[..._t,{startDay:oe,endDay:be}]}}return bt});w({processRows:we})}K(null),ge(null)}},H=(se,B)=>{const oe=r.processRows.find(be=>be.id===se);return oe?oe.bars.some(be=>B>=be.startDay&&B<=be.endDay):!1},te=(se,B)=>ie!==se||pe===null?!1:B===pe,he="border-2 border-black",re="border border-black",Re="bg-cyan-100",E="w-full h-full bg-transparent outline-none text-center font-serif",k="w-full h-full bg-transparent outline-none text-center appearance-none font-serif text-center-last",le=()=>o.jsxs("div",{className:"p-4 max-w-4xl mx-auto bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 py-4 z-10 border-b",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[o.jsx("i",{className:"fa-solid fa-database mr-2"}),""]}),o.jsxs("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-bold",children:[o.jsx("i",{className:"fa-solid fa-xmark mr-1"}),""]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:Tw.map(se=>{const B=Ew[se]||se;return o.jsx(_w,{title:B,items:p[se],onUpdate:async oe=>{const be={...p,[se]:oe};b(be),await La(be)},onDeleteRequest:(oe,be)=>{const we=se==="projects"?`${be}



`:`${be}`;M({isOpen:!0,message:we,onConfirm:async()=>{se==="projects"&&await fm(be);const bt=[...p[se]];bt.splice(oe,1);const _t={...p,[se]:bt};b(_t),await La(_t),M(Yt=>({...Yt,isOpen:!1}))}})}},se)})})]}),ue=(se=!1)=>o.jsxs("div",{className:"p-[10mm] w-full h-full flex flex-col font-serif",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 h-[38mm]",children:[o.jsxs("div",{className:"flex-1 flex flex-col justify-center pb-2 h-full",children:[o.jsxs("div",{className:"flex items-end mb-4 pl-4",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsx("select",{className:"w-12 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:r.year-2018,onChange:B=>w({year:2018+parseInt(B.target.value||"0")}),children:Array.from({length:30},(B,oe)=>oe+1).map(B=>o.jsx("option",{value:B,children:B},B))}),o.jsx("span",{className:"text-xl mr-4",children:""}),o.jsx("select",{className:"w-10 text-center text-xl border-b border-black outline-none mx-1 bg-transparent appearance-none",value:r.month,onChange:B=>w({month:parseInt(B.target.value||"0")}),children:Array.from({length:12},(B,oe)=>oe+1).map(B=>o.jsx("option",{value:B,children:B},B))}),o.jsx("span",{className:"text-xl mr-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold border-b-2 border-black ml-4 px-2 tracking-widest",children:""})]}),o.jsxs("div",{className:"flex flex-col gap-1 pl-4 text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),o.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[300px] max-w-[500px]",value:r.project,onChange:B=>w({project:B.target.value}),children:p.projects.map(B=>o.jsx("option",{value:B,children:B},B))})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-bold mr-2 w-16 text-right",children:" :"}),o.jsx("select",{className:"border-b border-black outline-none bg-transparent min-w-[200px]",value:r.location,onChange:B=>w({location:B.target.value}),children:p.locations.map(B=>o.jsx("option",{value:B,children:B},B))})]})]})]}),o.jsxs("div",{className:"w-[100mm] h-full flex flex-col justify-end",children:[o.jsxs("div",{className:"text-[10px] text-right mb-0.5",children:["",o.jsx("input",{type:"date",className:"bg-transparent text-[10px] w-24 text-right font-serif",value:r.createdDate,onChange:B=>w({createdDate:B.target.value})}),""]}),o.jsxs("table",{className:`w-full ${he} text-[10px] border-collapse`,children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[15%]"}),o.jsx("col",{className:"w-[25%]"}),o.jsx("col",{className:"w-[35%]"}),o.jsx("col",{className:"w-[25%]"})]}),o.jsx("thead",{children:o.jsxs("tr",{className:Re,children:[o.jsx("th",{className:`${re} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${re} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${re} py-0.5 font-normal`,children:""}),o.jsx("th",{className:`${re} py-0.5 font-normal`,children:""})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("input",{type:"date",className:E,value:r.trainingDate,onChange:B=>w({trainingDate:B.target.value})})}),o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("select",{className:k,value:r.trainingLeader,onChange:B=>w({trainingLeader:B.target.value}),children:p.supervisors.map(B=>o.jsx("option",{value:B,children:B},B))})})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("input",{type:"date",className:E,value:r.councilDate,onChange:B=>w({councilDate:B.target.value})})}),o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("select",{className:k,value:r.councilLeader,onChange:B=>w({councilLeader:B.target.value}),children:p.supervisors.map(B=>o.jsx("option",{value:B,children:B},B))})})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("input",{type:"date",className:E,value:r.patrolDate,onChange:B=>w({patrolDate:B.target.value})})}),o.jsx("td",{className:`${re} bg-gray-100`}),o.jsx("td",{className:`${re} bg-gray-100`})]}),o.jsxs("tr",{children:[o.jsx("td",{className:`${re} bg-gray-100`}),o.jsx("td",{className:`${re} bg-gray-100`}),o.jsx("td",{className:`${re} text-center`,children:""}),o.jsx("td",{className:`${re}`,children:o.jsx("select",{className:k,value:r.author,onChange:B=>w({author:B.target.value}),children:p.supervisors.map(B=>o.jsx("option",{value:B,children:B},B))})})]})]})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col border-2 border-black overflow-hidden relative",children:o.jsxs("table",{className:"w-full h-full border-collapse table-fixed text-[10px]",children:[o.jsxs("colgroup",{children:[o.jsx("col",{className:"w-[35mm]"}),S.map(B=>o.jsx("col",{},B.date)),o.jsx("col",{className:"w-[10mm]"})]}),o.jsxs("thead",{children:[o.jsxs("tr",{className:"h-[8mm]",children:[o.jsx("th",{className:`${re} ${Re} font-normal`,children:""}),o.jsx("th",{className:`${re} ${Re}`,colSpan:S.length,children:o.jsxs("div",{className:"flex justify-around text-xs font-bold",children:[o.jsx("span",{children:""}),o.jsx("span",{children:""}),o.jsx("span",{children:""})]})}),o.jsx("th",{className:`${re} ${Re} font-normal`,rowSpan:4,children:""})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${re} bg-gray-50 font-normal`,children:""}),o.jsxs("th",{className:`${re} font-normal text-center`,colSpan:S.length,children:[r.month,""]})]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${re} bg-gray-50 font-normal`,children:""}),S.map(B=>o.jsx("th",{className:`${re} font-normal text-center ${B.colorClass} ${B.bgClass}`,children:B.date},B.date))]}),o.jsxs("tr",{className:"h-[5mm]",children:[o.jsx("th",{className:`${re} bg-gray-50 font-normal`,children:" "}),S.map(B=>o.jsx("th",{className:`${re} font-normal text-center ${B.colorClass} ${B.bgClass}`,children:B.dayOfWeek},B.date))]})]}),o.jsxs("tbody",{children:[r.processRows.map(B=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${re} px-1 align-middle leading-none`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-[8px] transform -rotate-90 origin-center w-3 h-3 block whitespace-nowrap text-gray-500 mr-1",children:B.category}),o.jsx("span",{className:"font-bold text-[9px] truncate",children:B.name})]})}),S.map(oe=>{const be=H(B.id,oe.date),we=te(B.id,oe.date);return o.jsxs("td",{className:`${re} p-0 relative cursor-pointer hover:bg-yellow-50 ${oe.bgClass}`,onClick:()=>!se&&Ce(B.id,oe.date),children:[be&&o.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-600"}),we&&o.jsx("div",{className:"absolute inset-y-[30%] left-0 right-0 bg-blue-300 opacity-50"})]},oe.date)}),o.jsx("td",{className:`${re}`})]},B.id)),Array.from({length:Math.max(0,12-r.processRows.length)}).map((B,oe)=>o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${re}`}),S.map(be=>o.jsx("td",{className:`${re} ${be.bgClass}`},be.date)),o.jsx("td",{className:`${re}`})]},`fill-${oe}`))]}),o.jsxs("tfoot",{children:[o.jsxs("tr",{className:"h-[12mm]",children:[o.jsx("td",{className:`${re} ${Re} text-center font-normal`,children:""}),V.map((B,oe)=>o.jsx("td",{colSpan:B,className:`${re} align-top p-0`,children:o.jsxs("select",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1 appearance-none",value:r.predictions[oe]||"",onChange:be=>{const we=[...r.predictions];we[oe]=be.target.value,w({predictions:we})},children:[o.jsx("option",{value:"",children:"-"}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})},oe)),o.jsx("td",{className:`${re}`})]}),o.jsxs("tr",{className:"h-[18mm]",children:[o.jsxs("td",{className:`${re} ${Re} text-center font-normal leading-tight`,children:["",o.jsx("br",{}),""]}),V.map((B,oe)=>o.jsx("td",{colSpan:B,className:`${re} align-top p-0`,children:o.jsx("textarea",{className:"w-full h-full bg-transparent text-[9px] outline-none resize-none p-1 leading-tight",value:r.countermeasures[oe]||"",onChange:be=>{const we=[...r.countermeasures];we[oe]=be.target.value,w({countermeasures:we})}})},oe)),o.jsx("td",{className:`${re}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${re} ${Re} text-center font-normal leading-tight`,children:""}),V.map((B,oe)=>o.jsx("td",{colSpan:B,className:`${re} align-top p-0`,children:o.jsx("input",{className:"w-full h-full bg-transparent text-[9px] outline-none px-1",value:r.inspectionItems[oe]||"",onChange:be=>{const we=[...r.inspectionItems];we[oe]=be.target.value,w({inspectionItems:we})}})},oe)),o.jsx("td",{className:`${re}`})]}),o.jsxs("tr",{className:"h-[6mm]",children:[o.jsx("td",{className:`${re} ${Re} text-center font-normal`,children:""}),S.map(B=>o.jsx("td",{className:`${re} p-0 text-center`,children:o.jsx("input",{className:"w-full h-full text-[8px] text-center bg-transparent outline-none p-0",value:r.safetyDuty[B.date]||"",onChange:oe=>w({safetyDuty:{...r.safetyDuty,[B.date]:oe.target.value}})})},B.date)),o.jsx("td",{className:`${re}`})]}),o.jsxs("tr",{className:"h-[10mm]",children:[o.jsx("td",{className:`${re} ${Re} text-center font-normal`,children:""}),o.jsx("td",{colSpan:S.length+1,className:`${re} p-0`,children:o.jsx("textarea",{className:"w-full h-full p-1 text-[10px] bg-transparent outline-none resize-none leading-tight",value:r.lastMonthReflection,onChange:B=>w({lastMonthReflection:B.target.value})})})]})]})]})})]});return x?o.jsxs(o.Fragment,{children:[le(),o.jsx(i0,{isOpen:C.isOpen,message:C.message,onConfirm:C.onConfirm,onCancel:()=>M(se=>({...se,isOpen:!1}))})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen bg-gray-50 flex flex-col",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-30 flex justify-between items-center shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:Se,className:"text-white hover:text-gray-300 transition-colors",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-clipboard-list mr-2"}),""]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:I,className:"px-4 py-2 rounded font-bold border border-blue-400 text-white bg-blue-600 hover:bg-blue-500 flex items-center text-sm transition-colors shadow-sm",children:[o.jsx("i",{className:`fa-solid ${de==="saved"?"fa-check":"fa-save"} mr-2`}),de==="saved"?"":de==="saving"?"...":""]}),o.jsxs("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-cyan-600 text-white rounded font-bold hover:bg-cyan-500 flex items-center text-sm transition-colors shadow-sm",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]}),o.jsxs("button",{onClick:()=>N(!0),className:"text-xs bg-slate-700 px-3 py-2 rounded hover:bg-slate-600 transition-colors ml-2 shadow-sm",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]})]}),o.jsx("main",{className:"flex-1 overflow-auto p-4 bg-gray-100 flex justify-center",children:o.jsx("div",{className:"bg-white shadow-xl origin-top",style:{width:"297mm",minHeight:"210mm"},children:ue(!1)})})]}),F&&o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-95 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"}),""]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500 transition-colors",children:""}),o.jsxs("button",{onClick:A,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center hover:bg-green-500 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-8 flex justify-center items-start bg-gray-800",children:o.jsx("div",{style:{width:"297mm",transform:`scale(${Ie})`,transformOrigin:"top center",marginBottom:`${(Ie-1)*100}%`},children:o.jsx("div",{className:"bg-white shadow-2xl",children:ue(!0)})})})]}),o.jsxs("div",{className:"hidden print:block",children:[o.jsx("style",{children:"@media print { @page { size: landscape; } }"}),o.jsx("div",{className:"print-page-landscape",children:ue(!0)})]}),o.jsx(i0,{isOpen:C.isOpen,message:C.message,onConfirm:C.onConfirm,onCancel:()=>M({...C,isOpen:!1})})]})},r0=({data:i})=>{if(!i)return null;const t=i.qualifications||{},s="border-b border-r border-black",r=({checked:h,label:m})=>o.jsxs("div",{className:"flex items-center text-[11px] leading-tight mb-0.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 border border-black flex items-center justify-center mr-1.5 text-[10px] shrink-0 font-sans",children:h?"":""}),o.jsx("span",{className:"whitespace-nowrap",children:m})]}),c=["","","","","","",""];return o.jsx("div",{className:"font-serif text-black leading-tight bg-white relative",children:o.jsxs("div",{className:"print-page p-[12mm] flex flex-col box-border",style:{height:"297mm",width:"210mm"},children:[o.jsx("h1",{className:"text-3xl font-bold text-center mb-6 tracking-[0.5em] shrink-0",children:""}),o.jsxs("div",{className:"w-full border-2 border-black flex-1 flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[64px]",children:[o.jsxs("div",{className:`w-24 ${s} bg-gray-50 flex flex-col justify-center items-center p-1`,children:[o.jsx("span",{className:"text-[10px] mb-1",children:""}),o.jsx("span",{className:"font-bold text-base",children:""})]}),o.jsxs("div",{className:`w-64 ${s} p-1 flex flex-col justify-center`,children:[o.jsx("div",{className:"text-xs text-center w-full mb-0.5",children:i.furigana}),o.jsx("div",{className:"text-xl text-center font-bold",children:i.name})]}),o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold text-sm text-center`,children:""}),o.jsx("div",{className:`flex-1 ${s} flex items-center justify-center p-1`,children:o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsxs("div",{className:"flex flex-col text-[10px] leading-none mr-1 gap-1",children:[o.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${i.birthEra==="Showa"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""}),o.jsx("div",{className:`w-4 h-4 flex items-center justify-center ${i.birthEra==="Heisei"?"border border-black rounded-full font-bold":"text-gray-400"}`,children:""})]}),o.jsx("span",{className:"text-lg font-bold",children:i.birthYear}),o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"text-lg font-bold",children:i.birthMonth}),o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"text-lg font-bold",children:i.birthDay}),o.jsx("span",{className:"text-xs",children:""})]})}),o.jsxs("div",{className:"w-24 border-b border-black flex flex-col items-center justify-center p-1",children:[o.jsxs("div",{className:"flex gap-3 mb-1 text-sm",children:[o.jsx("span",{className:i.gender==="Male"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""}),o.jsx("span",{children:""}),o.jsx("span",{className:i.gender==="Female"?"font-bold rounded-full border border-black w-5 h-5 flex items-center justify-center":"w-5 h-5 flex items-center justify-center text-gray-400",children:""})]}),o.jsxs("div",{className:"flex items-end gap-0.5",children:[o.jsx("span",{className:"text-lg font-bold",children:i.age}),o.jsx("span",{className:"text-[10px]",children:""})]})]})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsx("div",{className:`flex-1 ${s} px-3 flex items-center`,children:o.jsx("span",{className:"text-base font-bold",children:i.company})}),o.jsxs("div",{className:`w-32 ${s} flex items-center justify-center p-1 text-[11px]`,children:["( ",o.jsx("span",{className:"w-6 text-center text-base font-bold",children:i.subcontractorRank})," ) "]}),o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsxs("div",{className:"w-40 border-b border-black flex items-center justify-center p-1",children:[o.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:i.experienceYears}),o.jsx("span",{className:"text-xs mr-2",children:""}),o.jsx("span",{className:"text-lg font-bold w-5 text-right mr-1",children:i.experienceMonths}),o.jsx("span",{className:"text-xs",children:""})]})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsx("div",{className:"flex-1 border-b border-black px-2 flex items-center text-sm",children:o.jsxs("div",{className:"flex flex-nowrap items-center w-full",children:[c.map((h,m)=>o.jsx(c0.Fragment,{children:o.jsxs("div",{className:"flex items-center whitespace-nowrap",children:[o.jsx("span",{className:`px-1 ${i.jobType===h?"border border-black rounded-full font-bold":""}`,children:h}),m<c.length-1&&o.jsx("span",{className:"text-gray-400 mx-1",children:""})]})},h)),o.jsxs("div",{className:"flex items-center whitespace-nowrap ml-1",children:[o.jsx("span",{children:""}),o.jsx("span",{className:"inline-block min-w-[100px] text-center px-1 italic",children:i.jobType===""?i.jobTypeOther:""}),o.jsx("span",{children:""})]})]})})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsx("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:i.address}),o.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[o.jsx("span",{children:""}),o.jsx("span",{children:""})]}),o.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:i.phone})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm text-center leading-none`,children:""}),o.jsx("div",{className:`w-12 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-[10px]`,children:""}),o.jsx("div",{className:`flex-1 ${s} px-3 flex items-center text-sm`,children:i.emergencyContactName}),o.jsx("div",{className:`w-12 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-[10px]`,children:""}),o.jsx("div",{className:`w-20 ${s} flex items-center justify-center text-sm`,children:i.emergencyContactRelation}),o.jsxs("div",{className:`w-16 ${s} bg-gray-50 flex flex-col items-center justify-center font-bold text-[10px] p-1 leading-tight`,children:[o.jsx("span",{children:""}),o.jsx("span",{children:""})]}),o.jsx("div",{className:"w-48 border-b border-black px-3 flex items-center justify-center text-base font-bold tracking-wider",children:i.emergencyContactPhone})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[48px]",children:[o.jsx("div",{className:`w-24 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsxs("div",{className:`flex-1 ${s} p-1 flex items-center justify-center gap-2`,children:[o.jsx("span",{className:"text-lg font-bold w-6 text-center",children:i.bloodType}),o.jsx("span",{className:"text-xs",children:""}),o.jsx("span",{className:"ml-4 text-xs font-bold",children:"  "}),o.jsx("span",{className:"w-10 text-center border-b border-black text-lg font-bold",children:i.bloodTypeRh==="Plus"?"+":i.bloodTypeRh==="Minus"?"-":""}),o.jsx("span",{className:"text-xs font-bold",children:" "})]}),o.jsx("div",{className:`w-32 ${s} bg-gray-50 flex items-center justify-center font-bold text-[10px] p-1 text-center leading-tight`,children:""}),o.jsxs("div",{className:"w-64 border-b border-black p-1 flex items-center justify-center",children:[o.jsx("span",{className:"text-xs mr-1",children:""}),o.jsx("span",{className:"text-lg font-bold w-8 text-right mr-1",children:i.healthCheckYear}),o.jsx("span",{className:"text-xs mr-2",children:""}),o.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:i.healthCheckMonth}),o.jsx("span",{className:"text-xs mr-2",children:""}),o.jsx("span",{className:"text-lg font-bold w-6 text-right mr-1",children:i.healthCheckDay}),o.jsx("span",{className:"text-xs",children:""})]})]}),o.jsxs("div",{className:"flex border-b border-black shrink-0 h-[40px]",children:[o.jsx("div",{className:`w-1/2 ${s} bg-gray-50 flex items-center justify-center font-bold p-1 text-sm`,children:""}),o.jsxs("div",{className:"w-1/2 border-b border-black flex items-center justify-center gap-10 p-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:i.kentaikyo==="Joined"&&o.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),o.jsx("span",{className:`text-sm ${i.kentaikyo==="Joined"?"font-bold":""}`,children:""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3.5 h-3.5 rounded-full border border-black flex items-center justify-center",children:i.kentaikyo==="NotJoined"&&o.jsx("div",{className:"w-2 h-2 bg-black rounded-full"})}),o.jsx("span",{className:`text-sm ${i.kentaikyo==="NotJoined"?"font-bold":""}`,children:""})]})]})]}),o.jsxs("div",{className:"p-4 flex-1 flex flex-col border-b border-black",children:[o.jsx("div",{className:"font-bold text-xs mb-3",children:""}),o.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2",children:[o.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx(r,{checked:t.vehicle_leveling,label:""}),o.jsx(r,{checked:t.vehicle_demolition,label:""}),o.jsx(r,{checked:t.mobile_crane,label:""}),o.jsx(r,{checked:t.slinging,label:""}),o.jsx(r,{checked:t.gas_welding,label:""}),o.jsx(r,{checked:t.earth_retaining,label:""}),o.jsx(r,{checked:t.excavation,label:""}),o.jsx(r,{checked:t.scaffolding,label:""}),o.jsx(r,{checked:t.formwork,label:""}),o.jsx(r,{checked:t.oxygen_deficiency,label:""}),o.jsx(r,{checked:t.rough_terrain,label:""})]})]}),o.jsxs("div",{className:"flex flex-col border-r border-dashed border-gray-400 pr-2 pl-2",children:[o.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx(r,{checked:t.arc_welding,label:""}),o.jsx(r,{checked:t.grinding_wheel,label:""}),o.jsx(r,{checked:t.low_voltage,label:""}),o.jsx(r,{checked:t.roller,label:""}),o.jsx(r,{checked:t.asbestos,label:""})]})]}),o.jsxs("div",{className:"flex flex-col pl-2",children:[o.jsx("div",{className:"font-bold text-[10px] mb-2 text-center bg-gray-100 py-0.5",children:"  "}),o.jsx(r,{checked:t.foreman,label:""}),o.jsxs("div",{className:"mt-auto pt-2",children:[o.jsx("div",{className:"text-[9px] font-bold mb-1 text-gray-600",children:""}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText1}),o.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText2}),o.jsx("div",{className:"border-b border-black h-4 text-[10px] px-1 italic",children:t.otherText3})]})]})]})]})]}),o.jsxs("div",{className:"p-3 bg-gray-50 flex-1 flex flex-col justify-between shrink-0 h-[180px]",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-sm mb-2 flex items-center",children:[o.jsx("span",{className:"w-1 h-4 bg-black mr-2"}),""]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-4 pl-2 text-[9px] leading-tight mb-2",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]})]}),o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("span",{className:"mr-1",children:"-"}),""]})]})]})]}),o.jsxs("div",{className:"flex justify-between items-end px-1 mt-auto",children:[o.jsxs("div",{className:"w-[50%] space-y-2",children:[o.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[o.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5",children:""}),o.jsx("span",{className:"flex-1 text-[10px] font-bold truncate px-1",children:i.project})]}),o.jsxs("div",{className:"flex items-end border-b border-black pb-0.5",children:[o.jsx("span",{className:"text-[9px] font-bold w-12 mb-0.5",children:""}),o.jsx("span",{className:"flex-1 text-sm font-bold text-center",children:i.director}),o.jsx("span",{className:"text-[9px] ml-1 mb-0.5",children:""})]})]}),o.jsxs("div",{className:"w-[45%] flex flex-col items-end",children:[o.jsxs("div",{className:"flex justify-center items-baseline mb-1 text-[10px] font-bold w-full",children:[o.jsx("span",{className:"mr-1",children:""}),o.jsx("span",{className:"text-base w-6 text-center border-b border-black mx-0.5",children:i.pledgeDateYear}),o.jsx("span",{children:""}),o.jsx("span",{className:"text-base w-5 text-center border-b border-black mx-0.5",children:i.pledgeDateMonth}),o.jsx("span",{children:""}),o.jsx("span",{className:"text-base w-5 text-center border-b border-black mx-0.5",children:i.pledgeDateDay}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex w-full items-end border-2 border-black bg-white h-[50px] relative",children:[o.jsx("span",{className:"absolute left-1 top-1 text-[9px] font-bold text-gray-400",children:""}),o.jsx("div",{className:"flex-1 h-full flex items-center justify-center p-1",children:i.signatureDataUrl?o.jsx("img",{src:i.signatureDataUrl,alt:"Signature",className:"max-h-full max-w-full object-contain"}):o.jsx("span",{className:"text-gray-200 text-[9px]",children:"()"})})]})]})]})]})]})]})})},Sw=i=>{if(!i)return Yf;const t={...Yf.qualifications,...i.qualifications||{}};return{...Yf,...i,qualifications:t}},l0=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[60] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200 font-bold text-gray-600",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,Aw=({initialData:i,initialDraftId:t,onBackToMenu:s})=>{const[r,c]=ae.useState(1),[h,m]=ae.useState(Sw(i)),[p,b]=ae.useState(t||null),[x,N]=ae.useState(ct),[C,M]=ae.useState(!1),[F,W]=ae.useState(!1),[ie,K]=ae.useState("idle"),[pe,ge]=ae.useState(1),[de,xe]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[Ie,Ne]=ae.useState(!1),[R,j]=ae.useState(0),[S,V]=ae.useState(null);ae.useEffect(()=>{(async()=>{try{const k=await Bu();N(k)}catch(k){console.error("",k)}})()},[]),ae.useEffect(()=>{if(!F)return;const E=()=>{const ue=window.innerWidth-40;ge(ue<794?ue/794:1)};return window.addEventListener("resize",E),E(),()=>window.removeEventListener("resize",E)},[F]),ae.useEffect(()=>{const k=(()=>{if(h.birthYear===""||h.birthMonth===""||h.birthDay==="")return h.age;let le=0;if(h.birthEra==="Showa"?le=1925+h.birthYear:h.birthEra==="Heisei"&&(le=1988+h.birthYear),le===0)return h.age;const ue=new Date,se=new Date(le,h.birthMonth-1,h.birthDay);let B=ue.getFullYear()-se.getFullYear();const oe=ue.getMonth()-se.getMonth();return(oe<0||oe===0&&ue.getDate()<se.getDate())&&B--,Math.max(0,B)})();k!==h.age&&h.birthYear!==""&&h.birthMonth!==""&&h.birthDay!==""&&m(le=>({...le,age:k}))},[h.birthEra,h.birthYear,h.birthMonth,h.birthDay]);const w=E=>{m(k=>({...k,...E})),K("idle"),Ne(!0)},I=(E,k)=>{m(le=>({...le,qualifications:{...le.qualifications,[E]:k}})),K("idle"),Ne(!0)},A=async()=>{K("saving");try{const E=await $a(p,"NEWCOMER_SURVEY",h);b(E),K("saved"),Ne(!1),setTimeout(()=>K("idle"),2e3)}catch(E){console.error(E),alert(""),K("idle")}},Se=async()=>{K("saving");try{const E=await $a(p,"NEWCOMER_SURVEY",h);b(E),K("saved"),Ne(!1),setTimeout(()=>K("idle"),2e3);const k=document.title,le=`_${h.company||""}_${h.name||""}`;document.title=le,window.print(),document.title=k}catch{alert(""),K("idle")}},Ce=()=>{Ie?xe({isOpen:!0,message:`
`,onConfirm:()=>{xe(E=>({...E,isOpen:!1})),s()}}):s()},H=E=>{w({signatureDataUrl:E}),j(k=>k+1)},te=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 1: "}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded border border-purple-100 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"col-span-1 md:col-span-2 text-sm text-purple-700 font-bold mb-1",children:[o.jsx("i",{className:"fa-solid fa-circle-info mr-1"}),""]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-purple-300 rounded bg-white font-bold",value:h.project,onChange:E=>w({project:E.target.value}),children:x.projects.map(E=>o.jsx("option",{value:E,children:E},E))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:" ()"}),o.jsx("select",{className:"w-full p-2 border border-purple-300 rounded bg-white",value:h.director,onChange:E=>w({director:E.target.value}),children:x.supervisors.map(E=>o.jsx("option",{value:E,children:E},E))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded mb-2",placeholder:"",value:h.name,onChange:E=>w({name:E.target.value})}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:h.furigana,onChange:E=>w({furigana:E.target.value})})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[o.jsxs("select",{className:"p-2 border rounded",value:h.birthEra,onChange:E=>w({birthEra:E.target.value}),children:[o.jsx("option",{value:"Showa",children:""}),o.jsx("option",{value:"Heisei",children:""})]}),o.jsx("input",{type:"number",className:"w-14 p-2 border rounded text-center",value:h.birthYear,onChange:E=>w({birthYear:E.target.value===""?"":parseInt(E.target.value)}),placeholder:""}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.birthMonth,onChange:E=>w({birthMonth:E.target.value===""?"":parseInt(E.target.value)}),placeholder:""}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.birthDay,onChange:E=>w({birthDay:E.target.value===""?"":parseInt(E.target.value)}),placeholder:""}),o.jsx("span",{children:""})]}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsxs("div",{className:"flex gap-2 border p-1 rounded bg-white",children:[o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:h.gender==="Male",onChange:()=>w({gender:"Male"})}),""]}),o.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:h.gender==="Female",onChange:()=>w({gender:"Female"})}),""]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",className:"w-16 p-2 border rounded text-center bg-gray-100",readOnly:!0,value:h.age}),o.jsx("span",{children:""})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsx("select",{className:"w-full p-2 border rounded mb-2",value:h.company,onChange:E=>w({company:E.target.value}),children:x.subcontractors.map(E=>o.jsx("option",{value:E,children:E},E))}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{children:"("}),o.jsx("input",{type:"text",className:"w-10 border-b text-center",value:h.subcontractorRank,onChange:E=>w({subcontractorRank:E.target.value})}),o.jsx("span",{children:") "})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("input",{type:"number",className:"w-16 p-2 border rounded text-center",value:h.experienceYears,onChange:E=>w({experienceYears:parseInt(E.target.value)})}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-16 p-2 border rounded text-center",value:h.experienceMonths,onChange:E=>w({experienceMonths:parseInt(E.target.value)})}),o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"w-1/2 p-2 border rounded",value:h.jobType,onChange:E=>w({jobType:E.target.value}),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]}),h.jobType===""&&o.jsx("input",{type:"text",className:"flex-1 p-2 border rounded",placeholder:"",value:h.jobTypeOther,onChange:E=>w({jobTypeOther:E.target.value})})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded mb-2",placeholder:"",value:h.address,onChange:E=>w({address:E.target.value})}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:h.phone,onChange:E=>w({phone:E.target.value})})]}),o.jsxs("div",{className:"form-control bg-gray-50 p-3 rounded",children:[o.jsx("label",{className:"label font-bold text-gray-700 mb-2 block",children:""}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:h.emergencyContactName,onChange:E=>w({emergencyContactName:E.target.value})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),o.jsxs("select",{className:"w-full p-2 border rounded bg-white",value:h.emergencyContactRelation,onChange:E=>w({emergencyContactRelation:E.target.value}),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500 font-bold mb-1 block",children:""}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"090-0000-0000",value:h.emergencyContactPhone,onChange:E=>w({emergencyContactPhone:E.target.value})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"p-2 border rounded",value:h.bloodType,onChange:E=>w({bloodType:E.target.value}),children:[o.jsx("option",{value:"A",children:"A"}),o.jsx("option",{value:"B",children:"B"}),o.jsx("option",{value:"O",children:"O"}),o.jsx("option",{value:"AB",children:"AB"})]}),o.jsx("span",{className:"self-center",children:""}),o.jsx("span",{className:"self-center ml-2",children:"RH"}),o.jsxs("select",{className:"p-2 border rounded",value:h.bloodTypeRh,onChange:E=>w({bloodTypeRh:E.target.value}),children:[o.jsx("option",{value:"Plus",children:"+"}),o.jsx("option",{value:"Minus",children:"-"})]})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:" ()"}),o.jsxs("div",{className:"flex gap-1 items-center",children:[o.jsx("input",{type:"number",className:"w-14 p-2 border rounded text-center",value:h.healthCheckYear,onChange:E=>w({healthCheckYear:parseInt(E.target.value)})}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.healthCheckMonth,onChange:E=>w({healthCheckMonth:parseInt(E.target.value)})}),o.jsx("span",{children:""}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.healthCheckDay,onChange:E=>w({healthCheckDay:parseInt(E.target.value)})}),o.jsx("span",{children:""})]})]})]}),o.jsxs("div",{className:"form-control",children:[o.jsx("label",{className:"label font-bold text-gray-700",children:""}),o.jsxs("div",{className:"flex gap-4 mt-1",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-2 border rounded shadow-sm",children:[o.jsx("input",{type:"radio",checked:h.kentaikyo==="Joined",onChange:()=>w({kentaikyo:"Joined"})}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-4 py-2 border rounded shadow-sm",children:[o.jsx("input",{type:"radio",checked:h.kentaikyo==="NotJoined",onChange:()=>w({kentaikyo:"NotJoined"})}),""]})]})]})]}),he=()=>{const E=h.qualifications||{};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 2: "}),o.jsx("p",{className:"text-sm text-gray-500",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold border-b mb-3",children:""}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.vehicle_leveling,onChange:k=>I("vehicle_leveling",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.vehicle_demolition,onChange:k=>I("vehicle_demolition",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.mobile_crane,onChange:k=>I("mobile_crane",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.slinging,onChange:k=>I("slinging",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.gas_welding,onChange:k=>I("gas_welding",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.earth_retaining,onChange:k=>I("earth_retaining",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.excavation,onChange:k=>I("excavation",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.scaffolding,onChange:k=>I("scaffolding",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.formwork,onChange:k=>I("formwork",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.oxygen_deficiency,onChange:k=>I("oxygen_deficiency",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.rough_terrain,onChange:k=>I("rough_terrain",k.target.checked)}),""]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold border-b mb-3",children:""}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.arc_welding,onChange:k=>I("arc_welding",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.grinding_wheel,onChange:k=>I("grinding_wheel",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.low_voltage,onChange:k=>I("low_voltage",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.roller,onChange:k=>I("roller",k.target.checked)}),""]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:E.asbestos,onChange:k=>I("asbestos",k.target.checked)}),""]})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded border shadow-sm",children:[o.jsx("h3",{className:"font-bold border-b mb-3",children:""}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-4",children:[o.jsx("input",{type:"checkbox",checked:E.foreman,onChange:k=>I("foreman",k.target.checked)}),""]}),o.jsx("div",{className:"text-sm font-bold mb-2",children:""}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:E.otherText1,onChange:k=>I("otherText1",k.target.value)}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:E.otherText2,onChange:k=>I("otherText2",k.target.value)}),o.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"",value:E.otherText3,onChange:k=>I("otherText3",k.target.value)})]})]})]})]})]})},re=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 border-l-4 border-purple-600 pl-3",children:"STEP 3: "}),o.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border leading-relaxed text-gray-800",children:[o.jsx("h3",{className:"font-bold text-lg mb-4 text-center",children:""}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2 mb-6",children:[o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""}),o.jsx("li",{children:""})]}),o.jsxs("div",{className:"bg-white p-4 rounded border text-center",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"font-bold mr-2",children:" ()"}),o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.pledgeDateYear,onChange:E=>w({pledgeDateYear:parseInt(E.target.value)})}),"",o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.pledgeDateMonth,onChange:E=>w({pledgeDateMonth:parseInt(E.target.value)})}),"",o.jsx("input",{type:"number",className:"w-12 p-2 border rounded text-center",value:h.pledgeDateDay,onChange:E=>w({pledgeDateDay:parseInt(E.target.value)})}),""]}),o.jsx("label",{className:"block font-bold text-gray-700 mb-2",children:""}),o.jsx("div",{className:"mx-auto w-full max-w-sm",children:o.jsx(dm,{onSave:H,onClear:()=>{w({signatureDataUrl:null})},lineWidth:6},R)}),h.signatureDataUrl&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-xs text-green-600 font-bold mb-1",children:""}),o.jsx("div",{className:"cursor-pointer hover:opacity-80 transition-opacity inline-block border border-transparent hover:border-blue-300 rounded p-1",onClick:()=>V(h.signatureDataUrl),title:"",children:o.jsx("img",{src:h.signatureDataUrl,alt:"Signature",className:"h-10 mx-auto border"})})]})]})]})]}),Re=()=>o.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90 flex flex-col no-print",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-800 text-white p-4 shadow-lg flex justify-between items-center shrink-0",children:[o.jsxs("h2",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-eye mr-2"})," "]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-gray-600 rounded",children:""}),o.jsxs("button",{onClick:Se,className:"px-6 py-2 bg-green-600 rounded font-bold shadow-md flex items-center",children:[o.jsx("i",{className:"fa-solid fa-print mr-2"})," "]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 flex justify-center",children:o.jsx("div",{style:{width:"794px",transform:`scale(${pe})`,transformOrigin:"top center",marginBottom:`${(pe-1)*100}%`},children:o.jsx(r0,{data:h})})})]});return C?o.jsxs(o.Fragment,{children:[" ",renderMasterManager()," ",o.jsx(l0,{isOpen:de.isOpen,message:de.message,onConfirm:de.onConfirm,onCancel:()=>xe(E=>({...E,isOpen:!1}))})," "]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"no-print min-h-screen pb-24 bg-gray-50",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-4 shadow-md sticky top-0 z-10 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:Ce,className:"text-white hover:text-gray-300",children:o.jsx("i",{className:"fa-solid fa-house"})}),o.jsxs("h1",{className:"text-lg font-bold",children:[o.jsx("i",{className:"fa-solid fa-person-circle-question mr-2"}),""]})]}),o.jsxs("button",{onClick:()=>M(!0),className:"text-xs bg-slate-700 px-2 py-1 rounded hover:bg-slate-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-gear mr-1"}),""]})]}),o.jsxs("div",{className:"bg-white p-4 shadow-sm mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs font-bold text-gray-400 mb-2",children:[o.jsx("span",{className:r>=1?"text-purple-600":"",children:""}),o.jsx("span",{className:r>=2?"text-purple-600":"",children:""}),o.jsx("span",{className:r>=3?"text-purple-600":"",children:""})]}),o.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full overflow-hidden",children:o.jsx("div",{className:"bg-purple-600 h-full transition-all duration-300",style:{width:`${r*33.3}%`}})})]}),o.jsxs("main",{className:"mx-auto p-4 bg-white shadow-lg rounded-lg max-w-lg min-h-[60vh]",children:[r===1&&te(),r===2&&he(),r===3&&re()]}),o.jsxs("footer",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-md z-20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>c(E=>Math.max(1,E-1)),disabled:r===1,className:`px-4 py-3 rounded-lg font-bold ${r===1?"text-gray-300":"text-gray-600 bg-gray-100"}`,children:""}),o.jsxs("button",{onClick:A,className:"px-4 py-3 rounded-lg font-bold border border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100 flex items-center",children:[o.jsx("i",{className:`fa-solid ${ie==="saved"?"fa-check":"fa-save"} mr-2`}),ie==="saved"?"":""]})]}),r<3?o.jsxs("button",{onClick:()=>c(E=>E+1),className:"px-8 py-3 bg-purple-600 text-white rounded-lg font-bold shadow hover:bg-purple-700 flex items-center",children:[" ",o.jsx("i",{className:"fa-solid fa-chevron-right ml-2"})]}):o.jsxs("button",{onClick:()=>W(!0),className:"px-8 py-3 bg-cyan-600 text-white rounded-lg font-bold shadow hover:bg-cyan-700 flex items-center",children:[o.jsx("i",{className:"fa-solid fa-file-pdf mr-2"})," "]})]})]}),S&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black bg-opacity-90 flex flex-col items-center justify-center p-4",onClick:()=>V(null),children:[o.jsx("div",{className:"bg-white p-1 rounded-lg shadow-2xl overflow-hidden max-w-full max-h-[80vh]",children:o.jsx("img",{src:S,alt:"Signature Preview",className:"max-w-full max-h-[70vh] object-contain"})}),o.jsxs("button",{className:"mt-6 text-white text-lg font-bold flex items-center gap-2 bg-gray-700 px-6 py-2 rounded-full hover:bg-gray-600 transition-colors",children:[o.jsx("i",{className:"fa-solid fa-xmark"})," "]})]}),F&&Re(),o.jsx(l0,{isOpen:de.isOpen,message:de.message,onConfirm:de.onConfirm,onCancel:()=>xe({...de,isOpen:!1})}),o.jsx("div",{className:"hidden print:block",children:o.jsx(r0,{data:h})})]})},Cw=({isOpen:i,message:t,onConfirm:s,onCancel:r})=>i?o.jsx("div",{className:"fixed inset-0 z-[70] bg-gray-900 bg-opacity-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6 animate-fade-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),o.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 font-bold",children:""}),o.jsx("button",{onClick:s,className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700 font-bold",children:""})]})]})}):null,Rw=()=>{const[i,t]=ae.useState("HOME"),[s,r]=ae.useState(!1),[c,h]=ae.useState(null),[m,p]=ae.useState([]),[b,x]=ae.useState(null),[N,C]=ae.useState(!1),[M,F]=ae.useState({isOpen:!1,message:"",onConfirm:()=>{}}),[W,ie]=ae.useState(void 0),[K,pe]=ae.useState(null);ae.useEffect(()=>{s&&((async()=>{C(!0);try{const j=await wd();p(j)}catch(j){console.error("Failed to load drafts",j),alert("")}finally{C(!1)}})(),x(null))},[s]);const ge=R=>{h(R),r(!0)},de=()=>{c&&(ie(void 0),pe(null),t(c),r(!1))},xe=R=>{ie(R.data),pe(R.id),t(R.type),r(!1)},Ie=R=>{F({isOpen:!0,message:"",onConfirm:async()=>{try{await hw(R);const j=await wd();p(j),b&&c&&j.filter(V=>V.type===c&&(V.data.project||"")===b).length===0&&x(null),F(S=>({...S,isOpen:!1}))}catch(j){console.error("Failed to delete draft",j),alert("")}}})};if(i==="SAFETY_TRAINING")return o.jsx(yw,{initialData:W,initialDraftId:K,onBackToMenu:()=>t("HOME")});if(i==="DISASTER_COUNCIL")return o.jsx(bw,{initialData:W,initialDraftId:K,onBackToMenu:()=>t("HOME")});if(i==="SAFETY_PLAN")return o.jsx(jw,{initialData:W,initialDraftId:K,onBackToMenu:()=>t("HOME")});if(i==="NEWCOMER_SURVEY")return o.jsx(Aw,{initialData:W,initialDraftId:K,onBackToMenu:()=>t("HOME")});const Ne=()=>{if(!s||!c)return null;const R=m.filter(S=>S.type===c),j={};return R.forEach(S=>{const V=S.data.project||"";j[V]||(j[V]=[]),j[V].push(S)}),o.jsx("div",{className:"fixed inset-0 z-50 bg-gray-900 bg-opacity-80 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full overflow-hidden flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"bg-gray-800 text-white p-4 flex justify-between items-center shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[b&&o.jsx("button",{onClick:()=>x(null),className:"mr-1 text-gray-300 hover:text-white",children:o.jsx("i",{className:"fa-solid fa-arrow-left"})}),o.jsx("h3",{className:"font-bold text-lg",children:b?"":""})]}),o.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-white",children:o.jsx("i",{className:"fa-solid fa-xmark text-xl"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:N?o.jsxs("div",{className:"flex justify-center items-center py-10",children:[o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-3 text-gray-500",children:"..."})]}):b?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded border text-sm text-gray-600 mb-4",children:[o.jsx("i",{className:"fa-solid fa-building mr-2"}),b]}),o.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-2 uppercase tracking-wide",children:""}),o.jsx("div",{className:"space-y-3",children:j[b].map(S=>o.jsxs("div",{className:"border rounded-lg p-3 hover:bg-blue-50 transition-colors flex justify-between items-center group bg-white shadow-sm",children:[o.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>xe(S),children:[o.jsxs("div",{className:"font-bold text-blue-800 text-lg",children:[o.jsx("i",{className:"fa-regular fa-calendar-check mr-2"}),S.type==="SAFETY_TRAINING"?`${S.data.month}`:S.type==="DISASTER_COUNCIL"?`${S.data.count}`:S.type==="NEWCOMER_SURVEY"?S.data.name||"":`${S.data.month} `]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1 pl-7",children:[": ",new Date(S.lastModified).toLocaleString("ja-JP")]})]}),o.jsx("button",{onClick:V=>{V.stopPropagation(),Ie(S.id)},className:"ml-3 p-3 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-50 transition-colors",title:"",children:o.jsx("i",{className:"fa-solid fa-trash"})})]},S.id))})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-8",children:o.jsxs("button",{onClick:de,className:"w-full py-4 bg-blue-600 text-white rounded-lg font-bold shadow-md hover:bg-blue-700 flex items-center justify-center gap-2 transition-transform transform hover:scale-[1.01]",children:[o.jsx("i",{className:"fa-solid fa-file-circle-plus text-xl"}),""]})}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsx("h4",{className:"text-gray-500 text-sm font-bold mb-3 uppercase tracking-wide",children:""}),Object.keys(j).length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 bg-gray-50 rounded-lg",children:""}):o.jsx("div",{className:"space-y-3",children:Object.entries(j).map(([S,V])=>o.jsxs("button",{onClick:()=>x(S),className:"w-full text-left border rounded-lg p-4 hover:bg-blue-50 transition-colors flex justify-between items-center group shadow-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-gray-800 text-sm mb-1",children:S}),o.jsxs("div",{className:"text-xs text-gray-500",children:[o.jsx("i",{className:"fa-regular fa-folder-open mr-1"}),V.length," "]})]}),o.jsx("i",{className:"fa-solid fa-chevron-right text-gray-300 group-hover:text-blue-400"})]},S))})]})]})})]})})};return o.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-gray-800",children:[o.jsxs("header",{className:"bg-slate-800 text-white p-6 shadow-md text-center",children:[o.jsxs("h1",{className:"text-2xl font-bold tracking-wide",children:[o.jsx("i",{className:"fa-solid fa-building-shield mr-2"}),""]}),o.jsx("p",{className:"text-slate-400 text-sm mt-2",children:""})]}),o.jsxs("main",{className:"max-w-4xl mx-auto p-6 mt-8",children:[o.jsx("h2",{className:"text-xl font-bold mb-6 text-gray-700 border-l-4 border-slate-800 pl-3",children:""}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("button",{onClick:()=>ge("SAFETY_TRAINING"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-blue-600 group",children:[o.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-helmet-safety text-4xl text-blue-600"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),o.jsxs("button",{onClick:()=>ge("DISASTER_COUNCIL"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-green-600 group",children:[o.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-green-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-users-rectangle text-4xl text-green-600"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),o.jsxs("button",{onClick:()=>ge("SAFETY_PLAN"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-orange-500 group",children:[o.jsx("div",{className:"w-20 h-20 bg-orange-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-orange-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-clipboard-list text-4xl text-orange-500"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]}),o.jsxs("button",{onClick:()=>ge("NEWCOMER_SURVEY"),className:"flex flex-col items-center p-8 bg-white rounded-xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 border-t-4 border-purple-600 group",children:[o.jsx("div",{className:"w-20 h-20 bg-purple-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-100 transition-colors",children:o.jsx("i",{className:"fa-solid fa-person-circle-question text-4xl text-purple-600"})}),o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:""}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:""})]})]})]}),o.jsx("footer",{className:"mt-12 text-center text-gray-400 text-sm pb-8",children:" 2024 Safety Reporting App"}),Ne(),o.jsx(Cw,{isOpen:M.isOpen,message:M.message,onConfirm:M.onConfirm,onCancel:()=>F(R=>({...R,isOpen:!1}))})]})},ob=document.getElementById("root");if(!ob)throw new Error("Could not find root element to mount to");const Dw=K_.createRoot(ob);Dw.render(o.jsx(c0.StrictMode,{children:o.jsx(Rw,{})}));
